def add bucket default owner bucket name user email storage client storage Client bucket storage client bucket bucket name bucket acl reload bucket default object acl user user email grant owner bucket default object acl save print ' Addeduser{}asanownerinthedefaultaclonbucket{} ' format user email bucket name
def add bucket default owner bucket name user email storage client storage Client bucket storage client bucket bucket name bucket acl reload bucket default object acl user user email grant owner bucket default object acl save print ' Addeduser{}asanownerinthedefaultaclonbucket{} ' format user email bucket name
def add bucket default owner bucket name user email storage client storage Client bucket storage client bucket bucket name bucket acl reload bucket default object acl user user email grant owner bucket default object acl save print ' Addeduser{}asanownerinthedefaultaclonbucket{} ' format user email bucket name
def make trivial sdist dist path setup py setup py file tarfile Tar Info name 'setup py' try Mem File Bytes I Oexcept Attribute Error Mem File String I Osetup py bytes Mem File setup py encode 'utf- 8 ' setup py file size len setup py bytes getvalue dist tarfile open dist path 'w gz' try dist addfile setup py file fileobj setup py bytes finally dist close
def make trivial sdist dist path setup py setup py file tarfile Tar Info name 'setup py' try Mem File Bytes I Oexcept Attribute Error Mem File String I Osetup py bytes Mem File setup py encode 'utf- 8 ' setup py file size len setup py bytes getvalue dist tarfile open dist path 'w gz' try dist addfile setup py file fileobj setup py bytes finally dist close
def make trivial sdist dist path setup py setup py file tarfile Tar Info name 'setup py' try Mem File Bytes I Oexcept Attribute Error Mem File String I Osetup py bytes Mem File setup py encode 'utf- 8 ' setup py file size len setup py bytes getvalue dist tarfile open dist path 'w gz' try dist addfile setup py file fileobj setup py bytes finally dist close
def create le config parent dir config copy deepcopy constants CLI DEFAULTS le dir os path join parent dir 'certbot' config['config dir'] os path join le dir 'config' config['work dir'] os path join le dir 'work' config['logs dir'] os path join le dir 'logs dir' os makedirs config['config dir'] os mkdir config['work dir'] os mkdir config['logs dir'] config['domains'] Nonereturn argparse Namespace **config
def create le config parent dir config copy deepcopy constants CLI DEFAULTS le dir os path join parent dir 'certbot' config['config dir'] os path join le dir 'config' config['work dir'] os path join le dir 'work' config['logs dir'] os path join le dir 'logs dir' os makedirs config['config dir'] os mkdir config['work dir'] os mkdir config['logs dir'] config['domains'] Nonereturn argparse Namespace **config
def create le config parent dir config copy deepcopy constants CLI DEFAULTS le dir os path join parent dir 'certbot' config['config dir'] os path join le dir 'config' config['work dir'] os path join le dir 'work' config['logs dir'] os path join le dir 'logs dir' os makedirs config['config dir'] os mkdir config['work dir'] os mkdir config['logs dir'] config['domains'] Nonereturn argparse Namespace **config
def policy key location return u'{cat}/{name}' format cat location category name location name
def policy key location return u'{cat}/{name}' format cat location category name location name
def remove like obj user obj type apps get model 'contenttypes' ' Content Type' objects get for model obj with atomic qs Like objects filter content type obj type object id obj id user user if not qs exists returnlike qs first project like projectqs delete if project is not None project refresh totals
def remove like obj user obj type apps get model 'contenttypes' ' Content Type' objects get for model obj with atomic qs Like objects filter content type obj type object id obj id user user if not qs exists returnlike qs first project like projectqs delete if project is not None project refresh totals
def test message delete db gmail account api client new api client db gmail account namespace generic thread add fake thread db session gmail account namespace id gen message add fake message db session gmail account namespace id generic thread category ids []for i in xrange 10 po data api client post data '/labels/' {'display name' str i } assert po data status code 200 category ids append json loads po data data ['id'] data {'label ids' category ids}resp api client put data '/messages/{}' format gen message public id data assert resp status code 200 associated mcs db session query Message Category filter Message Category message id gen message id all assert len associated mcs 10 db session delete gen message db session commit assert db session query Message Category filter Message Category message id gen message id all []
def test message delete db gmail account api client new api client db gmail account namespace generic thread add fake thread db session gmail account namespace id gen message add fake message db session gmail account namespace id generic thread category ids []for i in xrange 10 po data api client post data '/labels/' {'display name' str i } assert po data status code 200 category ids append json loads po data data ['id'] data {'label ids' category ids}resp api client put data '/messages/{}' format gen message public id data assert resp status code 200 associated mcs db session query Message Category filter Message Category message id gen message id all assert len associated mcs 10 db session delete gen message db session commit assert db session query Message Category filter Message Category message id gen message id all []
def test message delete db gmail account api client new api client db gmail account namespace generic thread add fake thread db session gmail account namespace id gen message add fake message db session gmail account namespace id generic thread category ids []for i in xrange 10 po data api client post data '/labels/' {'display name' str i } assert po data status code 200 category ids append json loads po data data ['id'] data {'label ids' category ids}resp api client put data '/messages/{}' format gen message public id data assert resp status code 200 associated mcs db session query Message Category filter Message Category message id gen message id all assert len associated mcs 10 db session delete gen message db session commit assert db session query Message Category filter Message Category message id gen message id all []
def check output *args cmd output subprocess check output args cmd output cmd output decode 'utf- 8 ' return cmd output strip
def check output *args cmd output subprocess check output args cmd output cmd output decode 'utf- 8 ' return cmd output strip
def set seed seed None if seed None random seed seed
def set seed seed None if seed None random seed seed
def argmin x axis -1 if axis < 0 axis axis % len x get shape return tf argmin x axis
def argmin x axis -1 if axis < 0 axis axis % len x get shape return tf argmin x axis
def get query handle and state query history handle query history get handle if handle is None raise Popup Exception ' Failedtoretrievequerystatefromthe Query Server ' state dbms get query history owner query history get query server config get state handle if state is None raise Popup Exception ' Failedtocontact Servertocheckquerystatus ' return handle state
def get query handle and state query history handle query history get handle if handle is None raise Popup Exception ' Failedtoretrievequerystatefromthe Query Server ' state dbms get query history owner query history get query server config get state handle if state is None raise Popup Exception ' Failedtocontact Servertocheckquerystatus ' return handle state
def Throttled Http Rpc Server Factory throttle throttle class None def Make Rpc Server *args **kwargs ' Factorytoproducea Throttled Http Rpc Server \n\n Args \nargs Positionalargstopassto Throttled Http Rpc Server \nkwargs Keywordargstopassto Throttled Http Rpc Server \n\n Returns \n A Throttled Http Rpc Serverinstance \n'kwargs['account type'] 'HOSTED OR GOOGLE'kwargs['save cookies'] Trueif throttle class rpc server throttle class throttle *args **kwargs else rpc server Throttled Http Rpc Server throttle *args **kwargs return rpc serverreturn Make Rpc Server
def Throttled Http Rpc Server Factory throttle throttle class None def Make Rpc Server *args **kwargs ' Factorytoproducea Throttled Http Rpc Server \n\n Args \nargs Positionalargstopassto Throttled Http Rpc Server \nkwargs Keywordargstopassto Throttled Http Rpc Server \n\n Returns \n A Throttled Http Rpc Serverinstance \n'kwargs['account type'] 'HOSTED OR GOOGLE'kwargs['save cookies'] Trueif throttle class rpc server throttle class throttle *args **kwargs else rpc server Throttled Http Rpc Server throttle *args **kwargs return rpc serverreturn Make Rpc Server
def Throttled Http Rpc Server Factory throttle throttle class None def Make Rpc Server *args **kwargs ' Factorytoproducea Throttled Http Rpc Server \n\n Args \nargs Positionalargstopassto Throttled Http Rpc Server \nkwargs Keywordargstopassto Throttled Http Rpc Server \n\n Returns \n A Throttled Http Rpc Serverinstance \n'kwargs['account type'] 'HOSTED OR GOOGLE'kwargs['save cookies'] Trueif throttle class rpc server throttle class throttle *args **kwargs else rpc server Throttled Http Rpc Server throttle *args **kwargs return rpc serverreturn Make Rpc Server
def Throttled Http Rpc Server Factory throttle throttle class None def Make Rpc Server *args **kwargs ' Factorytoproducea Throttled Http Rpc Server \n\n Args \nargs Positionalargstopassto Throttled Http Rpc Server \nkwargs Keywordargstopassto Throttled Http Rpc Server \n\n Returns \n A Throttled Http Rpc Serverinstance \n'kwargs['account type'] 'HOSTED OR GOOGLE'kwargs['save cookies'] Trueif throttle class rpc server throttle class throttle *args **kwargs else rpc server Throttled Http Rpc Server throttle *args **kwargs return rpc serverreturn Make Rpc Server
@register as tagdef blog categories *args posts Blog Post objects published categories Blog Category objects filter blogposts in posts return list categories annotate post count Count u'blogposts'
@register as tagdef blog categories *args posts Blog Post objects published categories Blog Category objects filter blogposts in posts return list categories annotate post count Count u'blogposts'
def query database query time precision 's' chunked False user None password None host None port None client client user user password password host host port port client switch database database return client query query time precision time precision chunked chunked
def query database query time precision 's' chunked False user None password None host None port None client client user user password password host host port port client switch database database return client query query time precision time precision chunked chunked
def query database query time precision 's' chunked False user None password None host None port None client client user user password password host host port port client switch database database return client query query time precision time precision chunked chunked
def final repset from iteration repsets repset fasta fs observed {}for repset fasta f in repset fasta fs for otu id seq in parse fasta repset fasta f o otu id split [0 ]if not o in observed yield otu id seq observed[o] Noneelse pass
def final repset from iteration repsets repset fasta fs observed {}for repset fasta f in repset fasta fs for otu id seq in parse fasta repset fasta f o otu id split [0 ]if not o in observed yield otu id seq observed[o] Noneelse pass
@register simple tagdef bootstrap formset *args **kwargs return render formset *args **kwargs
@register simple tagdef bootstrap formset *args **kwargs return render formset *args **kwargs
def get float data position dummy 0 dummy 1 dummy 2 end position + 8 return UNPACK FLOAT data[position end] [0 ] end
def get float data position dummy 0 dummy 1 dummy 2 end position + 8 return UNPACK FLOAT data[position end] [0 ] end
def str 2 css sourcestring colors None title '' markup 'css' header None footer None linenumbers 0 form None if markup lower not in ['css' 'xhtml'] markup 'css'string IO String IO String IO parse Parser sourcestring colors colors title title out string IO markup markup header header footer footer linenumbers linenumbers parse format form string IO seek 0 if form None return parse send CSS Style external 1 string IO read else return None string IO read
def str 2 css sourcestring colors None title '' markup 'css' header None footer None linenumbers 0 form None if markup lower not in ['css' 'xhtml'] markup 'css'string IO String IO String IO parse Parser sourcestring colors colors title title out string IO markup markup header header footer footer linenumbers linenumbers parse format form string IO seek 0 if form None return parse send CSS Style external 1 string IO read else return None string IO read
def str 2 css sourcestring colors None title '' markup 'css' header None footer None linenumbers 0 form None if markup lower not in ['css' 'xhtml'] markup 'css'string IO String IO String IO parse Parser sourcestring colors colors title title out string IO markup markup header header footer footer linenumbers linenumbers parse format form string IO seek 0 if form None return parse send CSS Style external 1 string IO read else return None string IO read
def validate value tokens for token in tokens type token typeif type u'{' validate block token content u'propertyvalue' else validate any token u'propertyvalue'
def validate value tokens for token in tokens type token typeif type u'{' validate block token content u'propertyvalue' else validate any token u'propertyvalue'
@login required@ensure csrf cookiedef run python request if not request user is staff raise Http 404 c {}c['code'] ''c['results'] Noneif request method 'POST' py code c['code'] request POST get 'code' g {}try safe exec py code g except Exception c['results'] traceback format exc else c['results'] pprint pformat g return render to response 'debug/run python form html' c
@login required@ensure csrf cookiedef run python request if not request user is staff raise Http 404 c {}c['code'] ''c['results'] Noneif request method 'POST' py code c['code'] request POST get 'code' g {}try safe exec py code g except Exception c['results'] traceback format exc else c['results'] pprint pformat g return render to response 'debug/run python form html' c
@login required@ensure csrf cookiedef run python request if not request user is staff raise Http 404 c {}c['code'] ''c['results'] Noneif request method 'POST' py code c['code'] request POST get 'code' g {}try safe exec py code g except Exception c['results'] traceback format exc else c['results'] pprint pformat g return render to response 'debug/run python form html' c
@login required@ensure csrf cookiedef run python request if not request user is staff raise Http 404 c {}c['code'] ''c['results'] Noneif request method 'POST' py code c['code'] request POST get 'code' g {}try safe exec py code g except Exception c['results'] traceback format exc else c['results'] pprint pformat g return render to response 'debug/run python form html' c
@login required@ensure csrf cookiedef run python request if not request user is staff raise Http 404 c {}c['code'] ''c['results'] Noneif request method 'POST' py code c['code'] request POST get 'code' g {}try safe exec py code g except Exception c['results'] traceback format exc else c['results'] pprint pformat g return render to response 'debug/run python form html' c
def get all orgs return BACKEND get all orgs
def get all orgs return BACKEND get all orgs
def get all orgs return BACKEND get all orgs
def get all orgs return BACKEND get all orgs
def get all orgs return BACKEND get all orgs
def threadfunc callback callback Async callback try while True print ' 'callback time sleep 1 except print 'threadexiting'
def threadfunc callback callback Async callback try while True print ' 'callback time sleep 1 except print 'threadexiting'
def fix url s charset 'utf- 8 ' if isinstance s unicode s s encode charset 'ignore' scheme netloc path qs anchor urlparse urlsplit s path urllib quote path '/%' qs urllib quote plus qs ' & ' return urlparse urlunsplit scheme netloc path qs anchor
def fix url s charset 'utf- 8 ' if isinstance s unicode s s encode charset 'ignore' scheme netloc path qs anchor urlparse urlsplit s path urllib quote path '/%' qs urllib quote plus qs ' & ' return urlparse urlunsplit scheme netloc path qs anchor
def test ast bad lambda cant compile u' lambda '
def test ast bad lambda cant compile u' lambda '
def test ast bad lambda cant compile u' lambda '
def test ast bad lambda cant compile u' lambda '
def test ast bad lambda cant compile u' lambda '
def virtual if not detect os return False ' Thelvsexecutionmodulecannotbeloaded theipvsadmbinaryisnotinthepath ' return 'lvs'
def virtual if not detect os return False ' Thelvsexecutionmodulecannotbeloaded theipvsadmbinaryisnotinthepath ' return 'lvs'
def local server get url session request Http Request request method 'GET'request session session view args kwargs resolve url response view request *args **kwargs return response content
def local server get url session request Http Request request method 'GET'request session session view args kwargs resolve url response view request *args **kwargs return response content
def local server get url session request Http Request request method 'GET'request session session view args kwargs resolve url response view request *args **kwargs return response content
def local server get url session request Http Request request method 'GET'request session session view args kwargs resolve url response view request *args **kwargs return response content
def local server get url session request Http Request request method 'GET'request session session view args kwargs resolve url response view request *args **kwargs return response content
def local server get url session request Http Request request method 'GET'request session session view args kwargs resolve url response view request *args **kwargs return response content
@not implemented for 'undirected' def number attracting components G n len list attracting components G return n
@not implemented for 'undirected' def number attracting components G n len list attracting components G return n
def find guids guid string guids []for found guid in re finditer GUID REGEX guid string if found guid groups guids append found guid group 0 strip '{}' return sorted list set guids
def find guids guid string guids []for found guid in re finditer GUID REGEX guid string if found guid groups guids append found guid group 0 strip '{}' return sorted list set guids
def find guids guid string guids []for found guid in re finditer GUID REGEX guid string if found guid groups guids append found guid group 0 strip '{}' return sorted list set guids
def verify centralizer group arg centr None if centr is None centr group centralizer arg centr list list centr generate dimino af True centr list naive naive list centralizer group arg af True return cmp perm lists centr list centr list naive
def verify centralizer group arg centr None if centr is None centr group centralizer arg centr list list centr generate dimino af True centr list naive naive list centralizer group arg af True return cmp perm lists centr list centr list naive
def assert Not Reading test Case reactor transport if I Reactor FD Set provided By reactor test Case assert Not In transport reactor get Readers else test Case assert False transport reading
def assert Not Reading test Case reactor transport if I Reactor FD Set provided By reactor test Case assert Not In transport reactor get Readers else test Case assert False transport reading
def assert Not Reading test Case reactor transport if I Reactor FD Set provided By reactor test Case assert Not In transport reactor get Readers else test Case assert False transport reading
def zone for name name rdclass dns rdataclass IN tcp False resolver None if isinstance name str unicode name dns name from text name dns name root if resolver is None resolver get default resolver if not name is absolute raise Not Absolute name while 1 try answer resolver query name dns rdatatype SOA rdclass tcp if answer rrset name name return nameexcept dns resolver NXDOMAIN dns resolver No Answer passtry name name parent except dns name No Parent raise No Root SOA
def zone for name name rdclass dns rdataclass IN tcp False resolver None if isinstance name str unicode name dns name from text name dns name root if resolver is None resolver get default resolver if not name is absolute raise Not Absolute name while 1 try answer resolver query name dns rdatatype SOA rdclass tcp if answer rrset name name return nameexcept dns resolver NXDOMAIN dns resolver No Answer passtry name name parent except dns name No Parent raise No Root SOA
def zone for name name rdclass dns rdataclass IN tcp False resolver None if isinstance name str unicode name dns name from text name dns name root if resolver is None resolver get default resolver if not name is absolute raise Not Absolute name while 1 try answer resolver query name dns rdatatype SOA rdclass tcp if answer rrset name name return nameexcept dns resolver NXDOMAIN dns resolver No Answer passtry name name parent except dns name No Parent raise No Root SOA
def test infomax weights ini X np random random 3 100 weights np array [[ 1 2 3] [4 5 6] [7 8 9]] dtype np float 64 w1 infomax X max iter 0 weights weights extended True w2 infomax X max iter 0 weights weights extended False assert almost equal w1 weights assert almost equal w2 weights
def test infomax weights ini X np random random 3 100 weights np array [[ 1 2 3] [4 5 6] [7 8 9]] dtype np float 64 w1 infomax X max iter 0 weights weights extended True w2 infomax X max iter 0 weights weights extended False assert almost equal w1 weights assert almost equal w2 weights
def test infomax weights ini X np random random 3 100 weights np array [[ 1 2 3] [4 5 6] [7 8 9]] dtype np float 64 w1 infomax X max iter 0 weights weights extended True w2 infomax X max iter 0 weights weights extended False assert almost equal w1 weights assert almost equal w2 weights
def Generate O Auth Request Token Url oauth input params scopes request token url 'https //www google com/accounts/O Auth Get Request Token' extra parameters None scopes string '' join [str scope for scope in scopes] parameters {'scope' scopes string}if extra parameters parameters update extra parameters oauth request oauth O Auth Request from consumer and token oauth input params Get Consumer http url request token url parameters parameters oauth request sign request oauth input params Get Signature Method oauth input params Get Consumer None return atom url parse url oauth request to url
def Generate O Auth Request Token Url oauth input params scopes request token url 'https //www google com/accounts/O Auth Get Request Token' extra parameters None scopes string '' join [str scope for scope in scopes] parameters {'scope' scopes string}if extra parameters parameters update extra parameters oauth request oauth O Auth Request from consumer and token oauth input params Get Consumer http url request token url parameters parameters oauth request sign request oauth input params Get Signature Method oauth input params Get Consumer None return atom url parse url oauth request to url
def Generate O Auth Request Token Url oauth input params scopes request token url 'https //www google com/accounts/O Auth Get Request Token' extra parameters None scopes string '' join [str scope for scope in scopes] parameters {'scope' scopes string}if extra parameters parameters update extra parameters oauth request oauth O Auth Request from consumer and token oauth input params Get Consumer http url request token url parameters parameters oauth request sign request oauth input params Get Signature Method oauth input params Get Consumer None return atom url parse url oauth request to url
def Generate O Auth Request Token Url oauth input params scopes request token url 'https //www google com/accounts/O Auth Get Request Token' extra parameters None scopes string '' join [str scope for scope in scopes] parameters {'scope' scopes string}if extra parameters parameters update extra parameters oauth request oauth O Auth Request from consumer and token oauth input params Get Consumer http url request token url parameters parameters oauth request sign request oauth input params Get Signature Method oauth input params Get Consumer None return atom url parse url oauth request to url
def completed chart series id get vars get 'series id' if not series id return ' Programming Error Series I Dmissing'question id get vars get 'question id' if not question id return ' Programming Error Question I Dmissing'q type get vars get 'type' if not q type return ' Programming Error Question Typemissing'get Answers s3 db survey get All Answers For Question In Seriesanswers get Answers question id series id analysis Tool s3 db survey analysis type[q type] question id answers qstn Name analysis Tool qstn Widget question nameimage analysis Tool draw Chart series id output 'png' return image
def completed chart series id get vars get 'series id' if not series id return ' Programming Error Series I Dmissing'question id get vars get 'question id' if not question id return ' Programming Error Question I Dmissing'q type get vars get 'type' if not q type return ' Programming Error Question Typemissing'get Answers s3 db survey get All Answers For Question In Seriesanswers get Answers question id series id analysis Tool s3 db survey analysis type[q type] question id answers qstn Name analysis Tool qstn Widget question nameimage analysis Tool draw Chart series id output 'png' return image
def completed chart series id get vars get 'series id' if not series id return ' Programming Error Series I Dmissing'question id get vars get 'question id' if not question id return ' Programming Error Question I Dmissing'q type get vars get 'type' if not q type return ' Programming Error Question Typemissing'get Answers s3 db survey get All Answers For Question In Seriesanswers get Answers question id series id analysis Tool s3 db survey analysis type[q type] question id answers qstn Name analysis Tool qstn Widget question nameimage analysis Tool draw Chart series id output 'png' return image
def completed chart series id get vars get 'series id' if not series id return ' Programming Error Series I Dmissing'question id get vars get 'question id' if not question id return ' Programming Error Question I Dmissing'q type get vars get 'type' if not q type return ' Programming Error Question Typemissing'get Answers s3 db survey get All Answers For Question In Seriesanswers get Answers question id series id analysis Tool s3 db survey analysis type[q type] question id answers qstn Name analysis Tool qstn Widget question nameimage analysis Tool draw Chart series id output 'png' return image
def completed chart series id get vars get 'series id' if not series id return ' Programming Error Series I Dmissing'question id get vars get 'question id' if not question id return ' Programming Error Question I Dmissing'q type get vars get 'type' if not q type return ' Programming Error Question Typemissing'get Answers s3 db survey get All Answers For Question In Seriesanswers get Answers question id series id analysis Tool s3 db survey analysis type[q type] question id answers qstn Name analysis Tool qstn Widget question nameimage analysis Tool draw Chart series id output 'png' return image
def import And Run Function path module Name func Name **keywords import sysoriginal Path sys pathtry augmented Path [path] + sys path sys path augmented Pathfunc getattr import module Name fromlist [func Name] func Name sys path original Pathexcept sys path original Pathraisereturn func **keywords
def import And Run Function path module Name func Name **keywords import sysoriginal Path sys pathtry augmented Path [path] + sys path sys path augmented Pathfunc getattr import module Name fromlist [func Name] func Name sys path original Pathexcept sys path original Pathraisereturn func **keywords
def regions from boto cloudsearchdomain layer 1 import Cloud Search Domain Connectionreturn get regions 'cloudsearchdomain' connection cls Cloud Search Domain Connection
def regions from boto cloudsearchdomain layer 1 import Cloud Search Domain Connectionreturn get regions 'cloudsearchdomain' connection cls Cloud Search Domain Connection
def to snake case pascal case snake case re sub ' ^ [a-z] [A-Z] ' lambda match '{ 0 } {1 }' format match group 1 lower match group 2 lower pascal case return snake case lower strip ' '
def to snake case pascal case snake case re sub ' ^ [a-z] [A-Z] ' lambda match '{ 0 } {1 }' format match group 1 lower match group 2 lower pascal case return snake case lower strip ' '
def cov nw panel results nlags groupidx weights func weights bartlett use correction 'hac' if nlags 0 weights [1 0]else weights weights func nlags xu hessian inv get sandwich arrays results S hac S nw panel xu weights groupidx cov hac HCCM 2 hessian inv S hac if use correction nobs k params xu shapeif use correction 'hac' cov hac * nobs / float nobs - k params elif use correction in ['c' 'clu' 'cluster'] n groups len groupidx cov hac * n groups / n groups - 1 0 cov hac * nobs - 1 0 / float nobs - k params return cov hac
def cov nw panel results nlags groupidx weights func weights bartlett use correction 'hac' if nlags 0 weights [1 0]else weights weights func nlags xu hessian inv get sandwich arrays results S hac S nw panel xu weights groupidx cov hac HCCM 2 hessian inv S hac if use correction nobs k params xu shapeif use correction 'hac' cov hac * nobs / float nobs - k params elif use correction in ['c' 'clu' 'cluster'] n groups len groupidx cov hac * n groups / n groups - 1 0 cov hac * nobs - 1 0 / float nobs - k params return cov hac
def iter dir dir saltenv ret []for fn in os listdir dir path os path join dir fn if os path isdir path yield iter dir path saltenv elif os path isfile path with salt utils fopen path as fp if salt utils istextfile fp ret append {'path' six text type path 'saltenv' six text type saltenv 'content' six text type fp read } else ret append {'path' six text type path 'saltenv' six text type saltenv 'content' u'bin'} yield ret
def iter dir dir saltenv ret []for fn in os listdir dir path os path join dir fn if os path isdir path yield iter dir path saltenv elif os path isfile path with salt utils fopen path as fp if salt utils istextfile fp ret append {'path' six text type path 'saltenv' six text type saltenv 'content' six text type fp read } else ret append {'path' six text type path 'saltenv' six text type saltenv 'content' u'bin'} yield ret
def iter dir dir saltenv ret []for fn in os listdir dir path os path join dir fn if os path isdir path yield iter dir path saltenv elif os path isfile path with salt utils fopen path as fp if salt utils istextfile fp ret append {'path' six text type path 'saltenv' six text type saltenv 'content' six text type fp read } else ret append {'path' six text type path 'saltenv' six text type saltenv 'content' u'bin'} yield ret
def iter dir dir saltenv ret []for fn in os listdir dir path os path join dir fn if os path isdir path yield iter dir path saltenv elif os path isfile path with salt utils fopen path as fp if salt utils istextfile fp ret append {'path' six text type path 'saltenv' six text type saltenv 'content' six text type fp read } else ret append {'path' six text type path 'saltenv' six text type saltenv 'content' u'bin'} yield ret
def mask color clip color [0 0 0] thr 0 s 1 hill lambda x 1 0 * x 0 if thr 0 else x ** s / thr ** s + x ** s color np array color flim lambda im hill np sqrt im - color ** 2 sum axis 2 mask clip fl image flim mask ismask Truenewclip clip set mask mask return newclip
def mask color clip color [0 0 0] thr 0 s 1 hill lambda x 1 0 * x 0 if thr 0 else x ** s / thr ** s + x ** s color np array color flim lambda im hill np sqrt im - color ** 2 sum axis 2 mask clip fl image flim mask ismask Truenewclip clip set mask mask return newclip
def mask color clip color [0 0 0] thr 0 s 1 hill lambda x 1 0 * x 0 if thr 0 else x ** s / thr ** s + x ** s color np array color flim lambda im hill np sqrt im - color ** 2 sum axis 2 mask clip fl image flim mask ismask Truenewclip clip set mask mask return newclip
def mask color clip color [0 0 0] thr 0 s 1 hill lambda x 1 0 * x 0 if thr 0 else x ** s / thr ** s + x ** s color np array color flim lambda im hill np sqrt im - color ** 2 sum axis 2 mask clip fl image flim mask ismask Truenewclip clip set mask mask return newclip
def remove original values config vars for k in list config vars if k startswith INITPRE del config vars[k]
def remove original values config vars for k in list config vars if k startswith INITPRE del config vars[k]
@step u' The" [^"]* "problemdisplaysa" [^"]* "answer' def assert problem has answer step problem type answer class assert answer class in ['correct' 'incorrect' 'blank'] assert problem type in PROBLEM DICT problem has answer world scenario dict['COURSE'] number problem type answer class
@step u' The" [^"]* "problemdisplaysa" [^"]* "answer' def assert problem has answer step problem type answer class assert answer class in ['correct' 'incorrect' 'blank'] assert problem type in PROBLEM DICT problem has answer world scenario dict['COURSE'] number problem type answer class
def approximate fst desired fst simulated fst parameter fst max run fst 1 min run fst 0 limit 0 005 if abs simulated fst - desired fst < limit return parameter fst max run fst min run fst if simulated fst > desired fst max run fst parameter fstnext parameter fst min run fst + parameter fst / 2 else min run fst parameter fstnext parameter fst max run fst + parameter fst / 2 return next parameter fst max run fst min run fst
def approximate fst desired fst simulated fst parameter fst max run fst 1 min run fst 0 limit 0 005 if abs simulated fst - desired fst < limit return parameter fst max run fst min run fst if simulated fst > desired fst max run fst parameter fstnext parameter fst min run fst + parameter fst / 2 else min run fst parameter fstnext parameter fst max run fst + parameter fst / 2 return next parameter fst max run fst min run fst
def approximate fst desired fst simulated fst parameter fst max run fst 1 min run fst 0 limit 0 005 if abs simulated fst - desired fst < limit return parameter fst max run fst min run fst if simulated fst > desired fst max run fst parameter fstnext parameter fst min run fst + parameter fst / 2 else min run fst parameter fstnext parameter fst max run fst + parameter fst / 2 return next parameter fst max run fst min run fst
def gen Bh Lobe x N 512 f x * np pi * 2 / N df 2 * np pi / N y np zeros x size consts [0 35875 0 48829 0 14128 0 01168 ]for m in range 0 4 y + consts[m] / 2 * sinc f - df * m N + sinc f + df * m N y y / N / consts[ 0 ] return y
def gen Bh Lobe x N 512 f x * np pi * 2 / N df 2 * np pi / N y np zeros x size consts [0 35875 0 48829 0 14128 0 01168 ]for m in range 0 4 y + consts[m] / 2 * sinc f - df * m N + sinc f + df * m N y y / N / consts[ 0 ] return y
def get cifar 100 withlabel True ndim 3 scale 1 0 raw retrieve cifar 100 train preprocess cifar raw['train x'] raw['train y'] withlabel ndim scale test preprocess cifar raw['test x'] raw['test y'] withlabel ndim scale return train test
def get cifar 100 withlabel True ndim 3 scale 1 0 raw retrieve cifar 100 train preprocess cifar raw['train x'] raw['train y'] withlabel ndim scale test preprocess cifar raw['test x'] raw['test y'] withlabel ndim scale return train test
def get window start end from scipy signal import hannwindow 1 - np r [ hann 4 [ 2] np ones np abs end - start - 4 hann 4 [ -2 ] ] T return window
def get window start end from scipy signal import hannwindow 1 - np r [ hann 4 [ 2] np ones np abs end - start - 4 hann 4 [ -2 ] ] T return window
def get window start end from scipy signal import hannwindow 1 - np r [ hann 4 [ 2] np ones np abs end - start - 4 hann 4 [ -2 ] ] T return window
def apply operators e e e expand muls e atoms Mul subs list [ m apply Mul m for m in iter muls ]return e subs subs list
def apply operators e e e expand muls e atoms Mul subs list [ m apply Mul m for m in iter muls ]return e subs subs list
def apply operators e e e expand muls e atoms Mul subs list [ m apply Mul m for m in iter muls ]return e subs subs list
def map url out request env application controller function args other scheme host port language None map Map Url Out request env application controller function args other scheme host port language return map acf
def map url out request env application controller function args other scheme host port language None map Map Url Out request env application controller function args other scheme host port language return map acf
def map url out request env application controller function args other scheme host port language None map Map Url Out request env application controller function args other scheme host port language return map acf
def map url out request env application controller function args other scheme host port language None map Map Url Out request env application controller function args other scheme host port language return map acf
def map url out request env application controller function args other scheme host port language None map Map Url Out request env application controller function args other scheme host port language return map acf
def map url out request env application controller function args other scheme host port language None map Map Url Out request env application controller function args other scheme host port language return map acf
def get Wide Angle Point Index loop dot Product Minimum 9999999 9widest Point Index 0for point Index in xrange len loop point loop[ point Index % len loop ]after Point loop[ point Index + 1 % len loop ]before Point loop[ point Index - 1 % len loop ]after Segment Normalized euclidean get Normalized after Point - point before Segment Normalized euclidean get Normalized before Point - point dot Product euclidean get Dot Product after Segment Normalized before Segment Normalized if dot Product < 0 99 return point Indexif dot Product < dot Product Minimum dot Product Minimum dot Productwidest Point Index point Indexreturn widest Point Index
def get Wide Angle Point Index loop dot Product Minimum 9999999 9widest Point Index 0for point Index in xrange len loop point loop[ point Index % len loop ]after Point loop[ point Index + 1 % len loop ]before Point loop[ point Index - 1 % len loop ]after Segment Normalized euclidean get Normalized after Point - point before Segment Normalized euclidean get Normalized before Point - point dot Product euclidean get Dot Product after Segment Normalized before Segment Normalized if dot Product < 0 99 return point Indexif dot Product < dot Product Minimum dot Product Minimum dot Productwidest Point Index point Indexreturn widest Point Index
def get Wide Angle Point Index loop dot Product Minimum 9999999 9widest Point Index 0for point Index in xrange len loop point loop[ point Index % len loop ]after Point loop[ point Index + 1 % len loop ]before Point loop[ point Index - 1 % len loop ]after Segment Normalized euclidean get Normalized after Point - point before Segment Normalized euclidean get Normalized before Point - point dot Product euclidean get Dot Product after Segment Normalized before Segment Normalized if dot Product < 0 99 return point Indexif dot Product < dot Product Minimum dot Product Minimum dot Productwidest Point Index point Indexreturn widest Point Index
def get Wide Angle Point Index loop dot Product Minimum 9999999 9widest Point Index 0for point Index in xrange len loop point loop[ point Index % len loop ]after Point loop[ point Index + 1 % len loop ]before Point loop[ point Index - 1 % len loop ]after Segment Normalized euclidean get Normalized after Point - point before Segment Normalized euclidean get Normalized before Point - point dot Product euclidean get Dot Product after Segment Normalized before Segment Normalized if dot Product < 0 99 return point Indexif dot Product < dot Product Minimum dot Product Minimum dot Productwidest Point Index point Indexreturn widest Point Index
def get Wide Angle Point Index loop dot Product Minimum 9999999 9widest Point Index 0for point Index in xrange len loop point loop[ point Index % len loop ]after Point loop[ point Index + 1 % len loop ]before Point loop[ point Index - 1 % len loop ]after Segment Normalized euclidean get Normalized after Point - point before Segment Normalized euclidean get Normalized before Point - point dot Product euclidean get Dot Product after Segment Normalized before Segment Normalized if dot Product < 0 99 return point Indexif dot Product < dot Product Minimum dot Product Minimum dot Productwidest Point Index point Indexreturn widest Point Index
def attach points queryset as field 'points attr' model queryset modelsql '\n SELEC Tjson agg \nrow to json projects points \n ORDERB Yprojects points order\n \n FRO Mprojects points\n WHER Eprojects points project id {tbl} id\n'sql sql format tbl model meta db table queryset queryset extra select {as field sql} return queryset
def attach points queryset as field 'points attr' model queryset modelsql '\n SELEC Tjson agg \nrow to json projects points \n ORDERB Yprojects points order\n \n FRO Mprojects points\n WHER Eprojects points project id {tbl} id\n'sql sql format tbl model meta db table queryset queryset extra select {as field sql} return queryset
def get registered option key return registered options get key
def get registered option key return registered options get key
def move entry from list from set to list to set i mac get from list if mac is None returnfrom list delete i to list insert END mac mac Eth Addr mac to set add mac from set remove mac if clear tables on change core call Later clear flows
def align check device part type partition validate device device if part type not in set ['minimal' 'optimal'] raise Command Execution Error ' Invalidpart typepassedtopartition align check' try int partition except Exception raise Command Execution Error ' Invalidpartitionpassedtopartition align check' cmd 'parted-m-s{ 0 }align-check{ 1 }{ 2 }' format device part type partition out salt ['cmd run'] cmd splitlines return out
def align check device part type partition validate device device if part type not in set ['minimal' 'optimal'] raise Command Execution Error ' Invalidpart typepassedtopartition align check' try int partition except Exception raise Command Execution Error ' Invalidpartitionpassedtopartition align check' cmd 'parted-m-s{ 0 }align-check{ 1 }{ 2 }' format device part type partition out salt ['cmd run'] cmd splitlines return out
def align check device part type partition validate device device if part type not in set ['minimal' 'optimal'] raise Command Execution Error ' Invalidpart typepassedtopartition align check' try int partition except Exception raise Command Execution Error ' Invalidpartitionpassedtopartition align check' cmd 'parted-m-s{ 0 }align-check{ 1 }{ 2 }' format device part type partition out salt ['cmd run'] cmd splitlines return out
def create custom token uid valid minutes 60 client email app identity get service account name now int time time payload base 64 b64 encode json dumps {'iss' client email 'sub' client email 'aud' IDENTITY ENDPOINT 'uid' uid 'iat' now 'exp' now + valid minutes * 60 } header base 64 b64 encode json dumps {'typ' 'JWT' 'alg' 'RS 256 '} to sign '{} {}' format header payload return '{} {}' format to sign base 64 b64 encode app identity sign blob to sign [1 ]
def create custom token uid valid minutes 60 client email app identity get service account name now int time time payload base 64 b64 encode json dumps {'iss' client email 'sub' client email 'aud' IDENTITY ENDPOINT 'uid' uid 'iat' now 'exp' now + valid minutes * 60 } header base 64 b64 encode json dumps {'typ' 'JWT' 'alg' 'RS 256 '} to sign '{} {}' format header payload return '{} {}' format to sign base 64 b64 encode app identity sign blob to sign [1 ]
def accumulate Frequency Counts values freq Counts None values numpy array values num Entries values max + 1 if freq Counts is not None num Entries max num Entries freq Counts size if freq Counts is not None if freq Counts size num Entries new Counts numpy zeros num Entries dtype 'int 32 ' new Counts[ 0 freq Counts size] freq Countselse new Counts freq Countselse new Counts numpy zeros num Entries dtype 'int 32 ' for v in values new Counts[v] + 1return new Counts
def accumulate Frequency Counts values freq Counts None values numpy array values num Entries values max + 1 if freq Counts is not None num Entries max num Entries freq Counts size if freq Counts is not None if freq Counts size num Entries new Counts numpy zeros num Entries dtype 'int 32 ' new Counts[ 0 freq Counts size] freq Countselse new Counts freq Countselse new Counts numpy zeros num Entries dtype 'int 32 ' for v in values new Counts[v] + 1return new Counts
def test badoptimization opt err @gof local optimizer [theano tensor add] def insert bigger b add node if node op theano tensor add inputs list node inputs if inputs[ -1 ] owner is None inputs[ -1 ] theano tensor concatenate inputs[ -1 ] inputs[ -1 ] return [node op *inputs ]return Falseedb gof Equilibrium DB edb register 'insert bigger b add' insert bigger b add 'all' opt edb query '+all' a theano tensor dvector b theano tensor dvector f theano function [a b] a + b mode debugmode Debug Mode optimizer opt try f [1 0 2 0 3 0] [2 3 4] except Exception as e assert 'insert bigger b add' in exc message e returnassert False
def test badoptimization opt err @gof local optimizer [theano tensor add] def insert bigger b add node if node op theano tensor add inputs list node inputs if inputs[ -1 ] owner is None inputs[ -1 ] theano tensor concatenate inputs[ -1 ] inputs[ -1 ] return [node op *inputs ]return Falseedb gof Equilibrium DB edb register 'insert bigger b add' insert bigger b add 'all' opt edb query '+all' a theano tensor dvector b theano tensor dvector f theano function [a b] a + b mode debugmode Debug Mode optimizer opt try f [1 0 2 0 3 0] [2 3 4] except Exception as e assert 'insert bigger b add' in exc message e returnassert False
def test badoptimization opt err @gof local optimizer [theano tensor add] def insert bigger b add node if node op theano tensor add inputs list node inputs if inputs[ -1 ] owner is None inputs[ -1 ] theano tensor concatenate inputs[ -1 ] inputs[ -1 ] return [node op *inputs ]return Falseedb gof Equilibrium DB edb register 'insert bigger b add' insert bigger b add 'all' opt edb query '+all' a theano tensor dvector b theano tensor dvector f theano function [a b] a + b mode debugmode Debug Mode optimizer opt try f [1 0 2 0 3 0] [2 3 4] except Exception as e assert 'insert bigger b add' in exc message e returnassert False
def test badoptimization opt err @gof local optimizer [theano tensor add] def insert bigger b add node if node op theano tensor add inputs list node inputs if inputs[ -1 ] owner is None inputs[ -1 ] theano tensor concatenate inputs[ -1 ] inputs[ -1 ] return [node op *inputs ]return Falseedb gof Equilibrium DB edb register 'insert bigger b add' insert bigger b add 'all' opt edb query '+all' a theano tensor dvector b theano tensor dvector f theano function [a b] a + b mode debugmode Debug Mode optimizer opt try f [1 0 2 0 3 0] [2 3 4] except Exception as e assert 'insert bigger b add' in exc message e returnassert False
def test badoptimization opt err @gof local optimizer [theano tensor add] def insert bigger b add node if node op theano tensor add inputs list node inputs if inputs[ -1 ] owner is None inputs[ -1 ] theano tensor concatenate inputs[ -1 ] inputs[ -1 ] return [node op *inputs ]return Falseedb gof Equilibrium DB edb register 'insert bigger b add' insert bigger b add 'all' opt edb query '+all' a theano tensor dvector b theano tensor dvector f theano function [a b] a + b mode debugmode Debug Mode optimizer opt try f [1 0 2 0 3 0] [2 3 4] except Exception as e assert 'insert bigger b add' in exc message e returnassert False
def construct query part model cls prefixes query part if not query part return query True Query query classes {}for k t in itertools chain model cls fields items model cls types items query classes[k] t query key pattern query class negate parse query part query part query classes prefixes if key is None if issubclass query class query Field Query q query Any Field Query pattern model cls search fields query class if negate return query Not Query q else return qelif negate return query Not Query query class pattern else return query class pattern key key lower q query class key lower pattern key in model cls fields if negate return query Not Query q return q
def construct query part model cls prefixes query part if not query part return query True Query query classes {}for k t in itertools chain model cls fields items model cls types items query classes[k] t query key pattern query class negate parse query part query part query classes prefixes if key is None if issubclass query class query Field Query q query Any Field Query pattern model cls search fields query class if negate return query Not Query q else return qelif negate return query Not Query query class pattern else return query class pattern key key lower q query class key lower pattern key in model cls fields if negate return query Not Query q return q
def rectangle terminal position dimension top left position width height dimensionterminal select Character Set insults CS DRAWING insults G0 terminal cursor Position top left terminal write chr 108 terminal write chr 113 * width - 2 terminal write chr 107 for n in range height - 2 terminal cursor Position left top + n + 1 terminal write chr 120 terminal cursor Forward width - 2 terminal write chr 120 terminal cursor Position 0 top + height - 1 terminal write chr 109 terminal write chr 113 * width - 2 terminal write chr 106 terminal select Character Set insults CS US insults G0
def rectangle terminal position dimension top left position width height dimensionterminal select Character Set insults CS DRAWING insults G0 terminal cursor Position top left terminal write chr 108 terminal write chr 113 * width - 2 terminal write chr 107 for n in range height - 2 terminal cursor Position left top + n + 1 terminal write chr 120 terminal cursor Forward width - 2 terminal write chr 120 terminal cursor Position 0 top + height - 1 terminal write chr 109 terminal write chr 113 * width - 2 terminal write chr 106 terminal select Character Set insults CS US insults G0
def terminate instance id None name None region None key None keyid None profile None filters None instances find instances instance id instance id name name region region key key keyid keyid profile profile return objs True filters filters if instances in False None [] return instancesif len instances 1 instances[ 0 ] terminate return Trueelse log warning ' Refusingtoterminatemultipleinstancesatonce' return False
def terminate instance id None name None region None key None keyid None profile None filters None instances find instances instance id instance id name name region region key key keyid keyid profile profile return objs True filters filters if instances in False None [] return instancesif len instances 1 instances[ 0 ] terminate return Trueelse log warning ' Refusingtoterminatemultipleinstancesatonce' return False
def make container root name path root name if os path exists path context ['retcode'] salt defaults exitcodes SALT BUILD FAI Lraise Command Execution Error ' Container{ 0 }alreadyexists' format name else try os makedirs path return pathexcept OS Error as exc raise Command Execution Error ' Unabletomakecontainerrootdirectory{ 0 } {1 }' format name exc
def make container root name path root name if os path exists path context ['retcode'] salt defaults exitcodes SALT BUILD FAI Lraise Command Execution Error ' Container{ 0 }alreadyexists' format name else try os makedirs path return pathexcept OS Error as exc raise Command Execution Error ' Unabletomakecontainerrootdirectory{ 0 } {1 }' format name exc
def split gcd *a g a[ 0 ]b 1 [g]b 2 []for x in a[ 1 ] g1 gcd g x if g1 1 b2 append x else g g1 b 1 append x return g b1 b2
def split gcd *a g a[ 0 ]b 1 [g]b 2 []for x in a[ 1 ] g1 gcd g x if g1 1 b2 append x else g g1 b 1 append x return g b1 b2
def johnson G weight 'weight' if not nx is weighted G weight weight raise nx Network X Error ' Graphisnotweighted ' dist {v 0 for v in G}pred {v [ None] for v in G}weight weight function G weight dist bellman bellman ford G list G weight pred pred dist dist scale lambda u v dist bellman[u] - dist bellman[v] new weight lambda u v d weight u v d + scale u v def dist path v paths {v [v]} dijkstra G v new weight paths paths return pathsreturn {v dist path v for v in G}
def johnson G weight 'weight' if not nx is weighted G weight weight raise nx Network X Error ' Graphisnotweighted ' dist {v 0 for v in G}pred {v [ None] for v in G}weight weight function G weight dist bellman bellman ford G list G weight pred pred dist dist scale lambda u v dist bellman[u] - dist bellman[v] new weight lambda u v d weight u v d + scale u v def dist path v paths {v [v]} dijkstra G v new weight paths paths return pathsreturn {v dist path v for v in G}
def johnson G weight 'weight' if not nx is weighted G weight weight raise nx Network X Error ' Graphisnotweighted ' dist {v 0 for v in G}pred {v [ None] for v in G}weight weight function G weight dist bellman bellman ford G list G weight pred pred dist dist scale lambda u v dist bellman[u] - dist bellman[v] new weight lambda u v d weight u v d + scale u v def dist path v paths {v [v]} dijkstra G v new weight paths paths return pathsreturn {v dist path v for v in G}
def packages pkg list name None prefix None **kwargs install pkg list name name prefix prefix **kwargs
def packages pkg list name None prefix None **kwargs install pkg list name name prefix prefix **kwargs
def connect creds credentials get credentials return storage Client credentials credentials http Thread Safe Http credentials
def connect creds credentials get credentials return storage Client credentials credentials http Thread Safe Http credentials
def connect creds credentials get credentials return storage Client credentials credentials http Thread Safe Http credentials
def quote s return '"' + s replace '\\' '\\\\' replace '"' '\\"' + '"'
def quote s return '"' + s replace '\\' '\\\\' replace '"' '\\"' + '"'
def redirect with get view name get querydict do reverse True if do reverse url reverse view name else url view nameif get querydict return redirect '%s?%s' % url get querydict urlencode safe '/' return redirect view name
def redirect with get view name get querydict do reverse True if do reverse url reverse view name else url view nameif get querydict return redirect '%s?%s' % url get querydict urlencode safe '/' return redirect view name
def Parse Host Port address host port re re match ' [a-z A-Z 0 - 9 -\\ ]+ [0 - 9 ]{ 1 5} $' address if not host port re raise Type Error 'badhost port %s' % address host host port re group 1 port int host port re group 2 if port > 65536 raise Type Error 'invalidport %d' % port return host port
def Parse Host Port address host port re re match ' [a-z A-Z 0 - 9 -\\ ]+ [0 - 9 ]{ 1 5} $' address if not host port re raise Type Error 'badhost port %s' % address host host port re group 1 port int host port re group 2 if port > 65536 raise Type Error 'invalidport %d' % port return host port
def Parse Host Port address host port re re match ' [a-z A-Z 0 - 9 -\\ ]+ [0 - 9 ]{ 1 5} $' address if not host port re raise Type Error 'badhost port %s' % address host host port re group 1 port int host port re group 2 if port > 65536 raise Type Error 'invalidport %d' % port return host port
def wider test jpeg data if data[ 2] '\xff\xd 8 ' return 'jpeg'
def wider test jpeg data if data[ 2] '\xff\xd 8 ' return 'jpeg'
def wider test jpeg data if data[ 2] '\xff\xd 8 ' return 'jpeg'
def wider test jpeg data if data[ 2] '\xff\xd 8 ' return 'jpeg'
def wider test jpeg data if data[ 2] '\xff\xd 8 ' return 'jpeg'
def wider test jpeg data if data[ 2] '\xff\xd 8 ' return 'jpeg'
def wider test jpeg data if data[ 2] '\xff\xd 8 ' return 'jpeg'
def wider test jpeg data if data[ 2] '\xff\xd 8 ' return 'jpeg'
def wider test jpeg data if data[ 2] '\xff\xd 8 ' return 'jpeg'
def get course enrollment username course id course key Course Key from string course id try enrollment Course Enrollment objects get user username username course id course key return Course Enrollment Serializer enrollment dataexcept Course Enrollment Does Not Exist return None
def get course enrollment username course id course key Course Key from string course id try enrollment Course Enrollment objects get user username username course id course key return Course Enrollment Serializer enrollment dataexcept Course Enrollment Does Not Exist return None
def get course enrollment username course id course key Course Key from string course id try enrollment Course Enrollment objects get user username username course id course key return Course Enrollment Serializer enrollment dataexcept Course Enrollment Does Not Exist return None
def get course enrollment username course id course key Course Key from string course id try enrollment Course Enrollment objects get user username username course id course key return Course Enrollment Serializer enrollment dataexcept Course Enrollment Does Not Exist return None
def get volume type extra spec type id spec key possible values None default value None if not type id return default valuespec key 'vmware %s' % spec key spec value volume types get volume type extra specs type id spec key if not spec value LOG debug ' Returningdefaultspecvalue %s ' default value return default valueif possible values is None return spec valueif spec value in possible values LOG debug ' Returningspecvalue%s' spec value return spec value LOG debug ' Invalidspecvalue %sspecified ' spec value
def get volume type extra spec type id spec key possible values None default value None if not type id return default valuespec key 'vmware %s' % spec key spec value volume types get volume type extra specs type id spec key if not spec value LOG debug ' Returningdefaultspecvalue %s ' default value return default valueif possible values is None return spec valueif spec value in possible values LOG debug ' Returningspecvalue%s' spec value return spec value LOG debug ' Invalidspecvalue %sspecified ' spec value
def display s if not isinstance s unicode s s decode 'utf- 8 ' s indent escaped text from text s 'whitespace' 4 if not s endswith '\n' s + '\n'return s
@cache permissiondef can commit translation user project return check permission user project 'trans commit translation'
@cache permissiondef can commit translation user project return check permission user project 'trans commit translation'
def synchronized method def synchronized wrapper self *args with self lock return method self *args return synchronized wrapper
def synchronized method def synchronized wrapper self *args with self lock return method self *args return synchronized wrapper
def orbits degree generators seen set orbs []sorted I list range degree I set sorted I while I i sorted I[ 0 ]orb orbit degree generators i orbs append orb I - orbsorted I [i for i in sorted I if i not in orb ]return orbs
def orbits degree generators seen set orbs []sorted I list range degree I set sorted I while I i sorted I[ 0 ]orb orbit degree generators i orbs append orb I - orbsorted I [i for i in sorted I if i not in orb ]return orbs
def saferepr obj repr py io saferepr obj if py builtin istext repr t py builtin textelse t py builtin bytesreturn repr replace t '\n' t '\\n'
def saferepr obj repr py io saferepr obj if py builtin istext repr t py builtin textelse t py builtin bytesreturn repr replace t '\n' t '\\n'
def parse rarefaction lines col headers []comments []rarefaction data []rarefaction fns []for line in lines if line[ 0 ] '#' comments append line elif line[ 0 ] ' DCTB ' col headers map strip line split ' DCTB ' else rarefaction fn data parse rarefaction record line rarefaction fns append rarefaction fn rarefaction data append data return col headers comments rarefaction fns rarefaction data
@contextmanagerdef flock lockfile shared False fcntl flock lockfile fcntl LOCK SH if shared else fcntl LOCK EX try yield finally fcntl flock lockfile fcntl LOCK UN
@contextmanagerdef flock lockfile shared False fcntl flock lockfile fcntl LOCK SH if shared else fcntl LOCK EX try yield finally fcntl flock lockfile fcntl LOCK UN
def ms module exploit return {' 1 ' 'exploit/multi/browser/adobe flash hacking team uaf' '2 ' 'exploit/multi/browser/adobe flash nellymoser bof' '3 ' 'exploit/multi/browser/adobe flash shader drawing fill' '4 ' 'exploit/windows/browser/ms 14 012 textrange' '5 ' 'exploit/windows/browser/ms 14 012 cmarkup uaf' '6 ' 'exploit/windows/browser/ms 13 080 cdisplaypointer' '7 ' 'exploit/windows/browser/ie setmousecapture uaf' '8 ' 'exploit/multi/browser/java jre 17 jmxbean 2' '9 ' 'exploit/multi/browser/java jre 17 jmxbean' '10 ' 'exploit/windows/browser/ms 13 009 ie slayoutrun uaf' '11 ' 'exploit/windows/browser/ie cbutton uaf' '12 ' 'exploit/multi/browser/java jre 17 exec' '13 ' 'exploit/windows/browser/ie execcommand uaf' '14 ' 'exploit/multi/browser/java atomicreferencearray' '15 ' 'exploit/multi/browser/java verifier field access' '16 ' 'exploit/windows/browser/ms 12 037 same id' '17 ' 'exploit/windows/browser/msxml get definition code exec' '18 ' 'exploit/windows/browser/adobe flash rtmp' '19 ' 'exploit/windows/browser/adobe flash mp 4 cprt' '20 ' 'exploit/windows/browser/ms 12 004 midi' '21 ' 'multi/browser/java rhino\nsettarget 1 ' '22 ' 'windows/browser/ms 11 050 mshtml cobjectelement' '23 ' 'windows/browser/adobe flashplayer flash 10 o' '24 ' 'windows/browser/cisco anyconnect exec' '25 ' 'windows/browser/ms 11 003 ie css import' '26 ' 'windows/browser/wmi admintools' '27 ' 'windows/browser/ms 10 090 ie css clip' '28 ' 'windows/browser/java codebase trust' '29 ' 'windows/browser/java docbase bof' '30 ' 'windows/browser/webdav dll hijacker' '31 ' 'windows/browser/adobe flashplayer avm' '32 ' 'windows/browser/adobe shockwave rcsl corruption' '33 ' 'windows/browser/adobe cooltype sing' '34 ' 'windows/browser/apple quicktime marshaled punk' '35 ' 'windows/browser/ms 10 042 helpctr xss cmd exec' '36 ' 'windows/browser/ms 10 018 ie behaviors' '37 ' 'windows/browser/ms 10 002 aurora' '38 ' 'windows/browser/ms 10 018 ie tabular activex' '39 ' 'windows/browser/ms 09 002 memory corruption' '40 ' 'windows/browser/ms 09 072 style object' '41 ' 'windows/browser/ie iscomponentinstalled' '42 ' 'windows/browser/ms 08 078 xml corruption' '43 ' 'windows/browser/ie unsafe scripting' '44 ' 'multi/browser/firefox escape retval' '45 ' 'windows/browser/mozilla mchannel' '46 ' 'auxiliary/server/browser autopwn'} get exploit 'ERROR'
def ms module exploit return {' 1 ' 'exploit/multi/browser/adobe flash hacking team uaf' '2 ' 'exploit/multi/browser/adobe flash nellymoser bof' '3 ' 'exploit/multi/browser/adobe flash shader drawing fill' '4 ' 'exploit/windows/browser/ms 14 012 textrange' '5 ' 'exploit/windows/browser/ms 14 012 cmarkup uaf' '6 ' 'exploit/windows/browser/ms 13 080 cdisplaypointer' '7 ' 'exploit/windows/browser/ie setmousecapture uaf' '8 ' 'exploit/multi/browser/java jre 17 jmxbean 2' '9 ' 'exploit/multi/browser/java jre 17 jmxbean' '10 ' 'exploit/windows/browser/ms 13 009 ie slayoutrun uaf' '11 ' 'exploit/windows/browser/ie cbutton uaf' '12 ' 'exploit/multi/browser/java jre 17 exec' '13 ' 'exploit/windows/browser/ie execcommand uaf' '14 ' 'exploit/multi/browser/java atomicreferencearray' '15 ' 'exploit/multi/browser/java verifier field access' '16 ' 'exploit/windows/browser/ms 12 037 same id' '17 ' 'exploit/windows/browser/msxml get definition code exec' '18 ' 'exploit/windows/browser/adobe flash rtmp' '19 ' 'exploit/windows/browser/adobe flash mp 4 cprt' '20 ' 'exploit/windows/browser/ms 12 004 midi' '21 ' 'multi/browser/java rhino\nsettarget 1 ' '22 ' 'windows/browser/ms 11 050 mshtml cobjectelement' '23 ' 'windows/browser/adobe flashplayer flash 10 o' '24 ' 'windows/browser/cisco anyconnect exec' '25 ' 'windows/browser/ms 11 003 ie css import' '26 ' 'windows/browser/wmi admintools' '27 ' 'windows/browser/ms 10 090 ie css clip' '28 ' 'windows/browser/java codebase trust' '29 ' 'windows/browser/java docbase bof' '30 ' 'windows/browser/webdav dll hijacker' '31 ' 'windows/browser/adobe flashplayer avm' '32 ' 'windows/browser/adobe shockwave rcsl corruption' '33 ' 'windows/browser/adobe cooltype sing' '34 ' 'windows/browser/apple quicktime marshaled punk' '35 ' 'windows/browser/ms 10 042 helpctr xss cmd exec' '36 ' 'windows/browser/ms 10 018 ie behaviors' '37 ' 'windows/browser/ms 10 002 aurora' '38 ' 'windows/browser/ms 10 018 ie tabular activex' '39 ' 'windows/browser/ms 09 002 memory corruption' '40 ' 'windows/browser/ms 09 072 style object' '41 ' 'windows/browser/ie iscomponentinstalled' '42 ' 'windows/browser/ms 08 078 xml corruption' '43 ' 'windows/browser/ie unsafe scripting' '44 ' 'multi/browser/firefox escape retval' '45 ' 'windows/browser/mozilla mchannel' '46 ' 'auxiliary/server/browser autopwn'} get exploit 'ERROR'
def expire key seconds host None port None db None password None server connect host port db password return server expire key seconds
def expire key seconds host None port None db None password None server connect host port db password return server expire key seconds
def expire key seconds host None port None db None password None server connect host port db password return server expire key seconds
def expand empty tensor var size if size 0 return tensor varshapes [tensor var shape[x] for x in xrange tensor var ndim ]new shape [ size + shapes[ 0 ] ] + shapes[ 1 ] empty tensor Alloc Empty tensor var dtype *new shape ret tensor set subtensor empty[ shapes[ 0 ]] tensor var ret tag nan guard mode check Falsereturn ret
def expand empty tensor var size if size 0 return tensor varshapes [tensor var shape[x] for x in xrange tensor var ndim ]new shape [ size + shapes[ 0 ] ] + shapes[ 1 ] empty tensor Alloc Empty tensor var dtype *new shape ret tensor set subtensor empty[ shapes[ 0 ]] tensor var ret tag nan guard mode check Falsereturn ret
def expand empty tensor var size if size 0 return tensor varshapes [tensor var shape[x] for x in xrange tensor var ndim ]new shape [ size + shapes[ 0 ] ] + shapes[ 1 ] empty tensor Alloc Empty tensor var dtype *new shape ret tensor set subtensor empty[ shapes[ 0 ]] tensor var ret tag nan guard mode check Falsereturn ret
def expand empty tensor var size if size 0 return tensor varshapes [tensor var shape[x] for x in xrange tensor var ndim ]new shape [ size + shapes[ 0 ] ] + shapes[ 1 ] empty tensor Alloc Empty tensor var dtype *new shape ret tensor set subtensor empty[ shapes[ 0 ]] tensor var ret tag nan guard mode check Falsereturn ret
def test json assert hug types json {'this' 'works'} {'this' 'works'} assert hug types json json dumps {'this' 'works'} {'this' 'works'} with pytest raises Value Error hug types json ' Invalid JSON'
def test json assert hug types json {'this' 'works'} {'this' 'works'} assert hug types json json dumps {'this' 'works'} {'this' 'works'} with pytest raises Value Error hug types json ' Invalid JSON'
def test json assert hug types json {'this' 'works'} {'this' 'works'} assert hug types json json dumps {'this' 'works'} {'this' 'works'} with pytest raises Value Error hug types json ' Invalid JSON'
@ Local Contextdef unpack many data word size None word size word size or context word size endianness context endiannesssign context signif word size 'all' return [unpack data word size ]if word size % 8 0 raise Value Error 'unpack many word sizemustbeamultipleof 8 ' out []n word size // 8 for i in range 0 len data n out append unpack data[i i + n ] word size return list map int out
@ Local Contextdef unpack many data word size None word size word size or context word size endianness context endiannesssign context signif word size 'all' return [unpack data word size ]if word size % 8 0 raise Value Error 'unpack many word sizemustbeamultipleof 8 ' out []n word size // 8 for i in range 0 len data n out append unpack data[i i + n ] word size return list map int out
def maximum flow value G s t capacity 'capacity' flow func None **kwargs if flow func is None if kwargs raise nx Network X Error ' Youhavetoexplicitlysetaflow funcifyouneedtopassparametersviakwargs ' flow func default flow funcif not callable flow func raise nx Network X Error 'flow funchastobecallable ' R flow func G s t capacity capacity value only True **kwargs return R graph['flow value']
def maximum flow value G s t capacity 'capacity' flow func None **kwargs if flow func is None if kwargs raise nx Network X Error ' Youhavetoexplicitlysetaflow funcifyouneedtopassparametersviakwargs ' flow func default flow funcif not callable flow func raise nx Network X Error 'flow funchastobecallable ' R flow func G s t capacity capacity value only True **kwargs return R graph['flow value']
def Remove Self Dependencies targets for target name target dict in targets iteritems for dependency key in dependency sections dependencies target dict get dependency key [] if dependencies for t in dependencies if t target name if targets[t] get 'variables' {} get 'prune self dependency' 0 target dict[dependency key] Filter dependencies target name
def Remove Self Dependencies targets for target name target dict in targets iteritems for dependency key in dependency sections dependencies target dict get dependency key [] if dependencies for t in dependencies if t target name if targets[t] get 'variables' {} get 'prune self dependency' 0 target dict[dependency key] Filter dependencies target name
def Remove Self Dependencies targets for target name target dict in targets iteritems for dependency key in dependency sections dependencies target dict get dependency key [] if dependencies for t in dependencies if t target name if targets[t] get 'variables' {} get 'prune self dependency' 0 target dict[dependency key] Filter dependencies target name
def Remove Self Dependencies targets for target name target dict in targets iteritems for dependency key in dependency sections dependencies target dict get dependency key [] if dependencies for t in dependencies if t target name if targets[t] get 'variables' {} get 'prune self dependency' 0 target dict[dependency key] Filter dependencies target name
def as sparse or tensor variable x name None try return as sparse variable x name except Value Error Type Error return theano tensor as tensor variable x name
def as sparse or tensor variable x name None try return as sparse variable x name except Value Error Type Error return theano tensor as tensor variable x name
def get python os info info platform system alias platform system platform release platform version os type os ver infoos type os type lower if os type startswith 'linux' info platform linux distribution if info[ 0 ] os type info[ 0 ]if info[ 1 ] os ver info[ 1 ]elif os type startswith 'darwin' os ver subprocess Popen ['sw vers' '-product Version'] stdout subprocess PIPE communicate [0 ] rstrip '\n' elif os type startswith 'freebsd' os ver os ver partition '-' [0 ]os ver os ver partition ' ' [0 ]elif platform win 32 ver [1 ] os ver platform win 32 ver [1 ]else os ver ''return os type os ver
def get python os info info platform system alias platform system platform release platform version os type os ver infoos type os type lower if os type startswith 'linux' info platform linux distribution if info[ 0 ] os type info[ 0 ]if info[ 1 ] os ver info[ 1 ]elif os type startswith 'darwin' os ver subprocess Popen ['sw vers' '-product Version'] stdout subprocess PIPE communicate [0 ] rstrip '\n' elif os type startswith 'freebsd' os ver os ver partition '-' [0 ]os ver os ver partition ' ' [0 ]elif platform win 32 ver [1 ] os ver platform win 32 ver [1 ]else os ver ''return os type os ver
def mkdirs path mode if not path or os path exists path return [] head os path split path res mkdirs head mode os mkdir path os chmod path mode res + [path]return res
@dispatch Broadcast Mongo Query def post compute e q scope None columns dict col 1 for qry in q query for col in qry get '$project' [] scope {'$project' toolz merge {' id' 0} dict col 1 for col in columns }q q append scope dicts get result q coll aggregate list q query assert len columns 1 return list pluck first columns keys dicts
def get modules package src directory blacklist STD BLACKLIST modules []for directory dirnames filenames in os walk src directory handle blacklist blacklist dirnames filenames if not ' init py' in filenames dirnames[ ] continueif directory src directory dir package directory[len src directory ] replace os sep ' ' modules append package + dir package for filename in filenames if is python file filename and filename ' init py' src join directory filename module package + src[len src directory -3 ] modules append module replace os sep ' ' return modules
def predict binary estimator X if is regressor estimator return estimator predict X try score np ravel estimator decision function X except Attribute Error Not Implemented Error score estimator predict proba X [ 1]return score
def apns fetch inactive ids certfile None with closing apns create socket to feedback certfile as socket inactive ids []for ts registration id in apns receive feedback socket inactive ids append codecs encode registration id 'hex codec' return inactive ids
def gen vol xml vmname diskname size hypervisor **kwargs size int size * 1024 disk info get image info hypervisor vmname **kwargs context {'name' vmname 'filename' '{ 0 } {1 }' format diskname disk info['disktype'] 'volname' diskname 'disktype' disk info['disktype'] 'size' str size 'pool' disk info['pool']}fn 'libvirt volume jinja'try template JINJA get template fn except jinja 2 exceptions Template Not Found log error ' Couldnotloadtemplate{ 0 }' format fn return ''return template render **context
def read chunk fp chunk []lines []while 1 line fp readline if not line breakif line sep 1 if lines chunk append lines breakif line sep 2 if lines chunk append lines lines []else lines append line return chunk
def shrunk covariance emp cov shrinkage 0 1 emp cov check array emp cov n features emp cov shape[ 0 ]mu np trace emp cov / n features shrunk cov 1 0 - shrinkage * emp cov shrunk cov flat[ n features + 1 ] + shrinkage * mu return shrunk cov
def create var size var id None if var id is None var id get id return lo Lin Op lo VARIABLE size [] var id
def from html html code **kwargs parser Table Handler **kwargs parser feed html code return parser tables
def memoize stacks func cache {}@wraps func def memoizer be optree optree key tensor index map index tensor map optree intrinsic key maps optree key optree key id be if optree key in cache stacks cached tensor index map cache[optree key]for stack in stacks for i in range len stack if isinstance stack[i] Tensor if stack[i] in cached tensor index map stack[i] index tensor map[cached tensor index map[stack[i]]]cache[optree key] stacks tensor index map else stacks func be optree cache[optree key] stacks tensor index map return stacksreturn memoizer
def memoize stacks func cache {}@wraps func def memoizer be optree optree key tensor index map index tensor map optree intrinsic key maps optree key optree key id be if optree key in cache stacks cached tensor index map cache[optree key]for stack in stacks for i in range len stack if isinstance stack[i] Tensor if stack[i] in cached tensor index map stack[i] index tensor map[cached tensor index map[stack[i]]]cache[optree key] stacks tensor index map else stacks func be optree cache[optree key] stacks tensor index map return stacksreturn memoizer
def memoize stacks func cache {}@wraps func def memoizer be optree optree key tensor index map index tensor map optree intrinsic key maps optree key optree key id be if optree key in cache stacks cached tensor index map cache[optree key]for stack in stacks for i in range len stack if isinstance stack[i] Tensor if stack[i] in cached tensor index map stack[i] index tensor map[cached tensor index map[stack[i]]]cache[optree key] stacks tensor index map else stacks func be optree cache[optree key] stacks tensor index map return stacksreturn memoizer
def update simple binding jboss config binding name value profile None log debug ' MODULEFUNCTION jboss 7 update simple binding binding name %s value %s profile %s' binding name value profile operation '/subsystem naming/binding "{binding name}" write-attribute name value value "{value}" ' format binding name binding name value escape binding value value if profile is not None operation '/profile "{profile}"' format profile profile + operation return salt ['jboss 7 cli run operation'] jboss config operation
def get action manager mod SETTINGS get 'MANAGER' 'actstream managers Action Manager' mod path mod split ' ' try return getattr import ' ' join mod path[ -1 ] {} {} [mod path[ -1 ]] mod path[ -1 ] except Import Error raise Import Error ' Cannotimport%stryfixing ACTSTREAM SETTINGS[MANAGER]setting ' % mod
def get action manager mod SETTINGS get 'MANAGER' 'actstream managers Action Manager' mod path mod split ' ' try return getattr import ' ' join mod path[ -1 ] {} {} [mod path[ -1 ]] mod path[ -1 ] except Import Error raise Import Error ' Cannotimport%stryfixing ACTSTREAM SETTINGS[MANAGER]setting ' % mod
def test input discard mlp MLP layers [ Flattener Layer Composite Layer 'composite' [ Linear 10 'h 0 ' 0 1 ] {0 [0 ] 1 []} Softmax 5 'softmax' 0 1 ] input space Composite Space [ Vector Space 15 Vector Space 20 ] input source 'features 0 ' 'features 1 ' dataset Vector Spaces Dataset np random rand 20 20 astype theano config float X np random rand 20 15 astype theano config float X np random rand 20 5 astype theano config float X Composite Space [ Vector Space 20 Vector Space 15 Vector Space 5 ] 'features 1 ' 'features 0 ' 'targets' train Train dataset mlp SGD 0 1 batch size 5 train algorithm termination criterion Epoch Counter 1 train main loop
def test input discard mlp MLP layers [ Flattener Layer Composite Layer 'composite' [ Linear 10 'h 0 ' 0 1 ] {0 [0 ] 1 []} Softmax 5 'softmax' 0 1 ] input space Composite Space [ Vector Space 15 Vector Space 20 ] input source 'features 0 ' 'features 1 ' dataset Vector Spaces Dataset np random rand 20 20 astype theano config float X np random rand 20 15 astype theano config float X np random rand 20 5 astype theano config float X Composite Space [ Vector Space 20 Vector Space 15 Vector Space 5 ] 'features 1 ' 'features 0 ' 'targets' train Train dataset mlp SGD 0 1 batch size 5 train algorithm termination criterion Epoch Counter 1 train main loop
def get or set hash name length 8 chars 'abcdefghijklmnopqrstuvwxyz 0123456789 @#$%^&* - + ' ret get name None if ret is None val '' join [random System Random choice chars for in range length ] if DEFAULT TARGET DELIM in name root rest name split DEFAULT TARGET DELIM 1 curr get root infinitedict val dict from path rest val curr update val setval root curr else setval name val return get name
def domains for certname config certname def update domains for name match candidate lineage rv ' Returndomainsifcertnamematches elsereturnrv\n'matching domains rvif candidate lineage lineagename certname matching domains candidate lineage names return matching domainsreturn search lineages config update domains for name match None
def get decoder t return decoders[ aliases get t t ]
def download name if not update available name raise Salt Invocation Error ' Updatenotavailable {0 }' format name if name in list downloads return Truecmd ['softwareupdate' '--download' name]salt utils mac utils execute return success cmd return name in list downloads
def get os sslcertfile l get os sslcertfile searchpath if l None return Nonefor f in l assert type f type '' if os path exists f and os path isfile f or os path islink f return freturn None
def yaml dquote text with io String IO as ostream yemitter yaml emitter Emitter ostream width six MAXSIZE yemitter write double quoted six text type text return ostream getvalue
def yaml dquote text with io String IO as ostream yemitter yaml emitter Emitter ostream width six MAXSIZE yemitter write double quoted six text type text return ostream getvalue
def yaml dquote text with io String IO as ostream yemitter yaml emitter Emitter ostream width six MAXSIZE yemitter write double quoted six text type text return ostream getvalue
def constructor float loader node value loader construct scalar node return float value
def find checks argument name checks []function type type find checks for name function in globals iteritems if type function is function type args inspect getargspec function [0 ]if len args > 1 and args[ 0 ] startswith argument name checks append name function args checks sort return checks
def client *args **kwargs return get default session client *args **kwargs
def to OPM plate d dict plate qualifiers items d[ csv Data] {}d[ csv Data][ plate] plate idd[ measurements] {}d[ measurements][ hour] []times set for wid w in plate wells items d[ measurements][wid] []for hour in w signals times add hour for hour in sorted times d[ measurements][ hour] append hour for wid w in plate wells items if hour in w signals d[ measurements][wid] append w[hour] else d[ measurements][wid] append float 'nan' return d
def quote unix value value six moves shlex quote value return value
def generate random string length None entropy None pool ALPHANUMERIC pool list set pool if length and entropy raise Value Error ' Uselengthorentropy notboth ' if length < 0 and entropy < 0 raise Value Error ' Lengthorentropymustbegreaterthan 0 ' if entropy log of 2 0 6931471805599453 length long math ceil log of 2 / math log len pool * entropy return '' join rng choice pool for in xrange length
def create index table name session *column names index name u' ' join [u'ix' table name] + list column names table table schema table name session columns [getattr table c column for column in column names]try Index index name *columns create bind session bind except Operational Error log debug u' Errorcreatingindex ' exc info True
def create index table name session *column names index name u' ' join [u'ix' table name] + list column names table table schema table name session columns [getattr table c column for column in column names]try Index index name *columns create bind session bind except Operational Error log debug u' Errorcreatingindex ' exc info True
def split policy string policy string if '-' in policy string base policy index policy string rsplit '-' 1 else base policy index policy string None policy POLICIES get by index policy index if get policy string base policy policy string raise Policy Error ' Unknownpolicy' index policy index return base policy
def convert input x y z None n models 1 model set axis 0 x np asarray x dtype np float y np asarray y dtype np float if z is not None z np asarray z dtype np float if n models > 1 if z is None if y shape[model set axis] n models raise Value Error u' Numberofdatasets yarrayisexpectedtoequalthenumberofparametersets ' y np rollaxis y model set axis y ndim else z shape z shape[ model set axis] + z shape[ model set axis + 1 ] if not x shape y shape z shape raise Value Error u'x yandzshouldhavethesameshape' if z is None farg x y else farg x y z return farg
def gaussian random partition graph n s v p in p out directed False seed None if s > n raise nx Network X Error 'smustbe< n' assigned 0sizes []while True size int random normalvariate s float s / v + 0 5 if size < 1 continueif assigned + size > n sizes append n - assigned breakassigned + sizesizes append size return random partition graph sizes p in p out directed seed
def readwav file wav wave open file rate wav getframerate nchannels wav getnchannels sampwidth wav getsampwidth nframes wav getnframes data wav readframes nframes wav close array wav 2 array nchannels sampwidth data return rate sampwidth array
def info pretty False best False return distro info pretty best
def read handle format seq count None alphabet None iterator parse handle format seq count alphabet try first next iterator except Stop Iteration first Noneif first is None raise Value Error ' Norecordsfoundinhandle' try second next iterator except Stop Iteration second Noneif second is not None raise Value Error ' Morethanonerecordfoundinhandle' if seq count assert len first seq count return first
def change node state deployer desired configuration state persister In Memory State Persister def converge d deployer discover state Deployment State nodes { Node State hostname deployer hostname uuid deployer node uuid applications [] manifestations {} paths {} devices {} } persistent state state persister get state def got changes local state changes local state shared state changes cluster state Deployment State for change in changes cluster state change update cluster state cluster state return deployer calculate changes desired configuration cluster state local state d add Callback got changes d add Callback lambda change run state change change deployer deployer state persister state persister return dresult converge result add Callback lambda converge result add Callback lambda converge return result
def pre Build Page page context data return context data
@pytest fixturedef user default groups user User username 'test normal' email 'test normal@example org' password 'test' primary group default groups[ 3 ] activated True user save return user
def break long words value max word length 8 tagless django utils html strip tags value re capitalized word re compile ' [A-Z][a-z][a-z]+ ' re UNICODE words re capitalized word split tagless re too many letters in a row re compile ' [\\w]{%d} [ \\ ^/] ' % max word length re UNICODE broken words []for word in words if word broken words + re too many letters in a row split word broken words filter lambda x x broken words return u'\u 200 b' join broken words
def break long words value max word length 8 tagless django utils html strip tags value re capitalized word re compile ' [A-Z][a-z][a-z]+ ' re UNICODE words re capitalized word split tagless re too many letters in a row re compile ' [\\w]{%d} [ \\ ^/] ' % max word length re UNICODE broken words []for word in words if word broken words + re too many letters in a row split word broken words filter lambda x x broken words return u'\u 200 b' join broken words
def get suffixes return [ PY SOURCE SUFFIX]
@manager commanddef worker print u' Starting SQL Celeryworker ' if config get u'CELERY CONFIG' print u' Celerybrokerurl ' print config get u'CELERY CONFIG' BROKER URL application celery current app get current object c worker celery worker worker app application options {u'broker' config get u'CELERY CONFIG' BROKER URL u'loglevel' u'INFO' u'traceback' True}c worker run **options
def check feature enabled feature name def check feature enabled view func def decorator request *args **kwargs if not settings FEATURES get feature name False return Http Response Bad Request return view func request *args **kwargs return wraps view func decorator return check feature enabled
def find stim steps raw pad start None pad stop None merge 0 stim channel None stim channel get stim channel stim channel raw info picks pick channels raw info['ch names'] include stim channel if len picks 0 raise Value Error ' Nostimchannelfoundtoextracteventtriggers ' data raw[picks ]if np any data < 0 warn ' Triggerchannelcontainsnegativevalues usingabsolutevalue ' data np abs data data data astype np int return find stim steps data raw first samp pad start pad start pad stop pad stop merge merge
def simple class factory model attrs return model
def skip because *args **kwargs def decorator f @functools wraps f def wrapper self *func args **func kwargs skip Falseif 'condition' in kwargs if kwargs['condition'] is True skip Trueelse skip Trueif 'bug' in kwargs and skip is True if not kwargs['bug'] isdigit raise Value Error 'bugmustbeavalidbugnumber' msg ' Skippeduntil Bug %sisresolved ' % kwargs['bug'] raise testtools Test Case skip Exception msg return f self *func args **func kwargs return wrapperreturn decorator
def skip because *args **kwargs def decorator f @functools wraps f def wrapper self *func args **func kwargs skip Falseif 'condition' in kwargs if kwargs['condition'] is True skip Trueelse skip Trueif 'bug' in kwargs and skip is True if not kwargs['bug'] isdigit raise Value Error 'bugmustbeavalidbugnumber' msg ' Skippeduntil Bug %sisresolved ' % kwargs['bug'] raise testtools Test Case skip Exception msg return f self *func args **func kwargs return wrapperreturn decorator
def print all links res rules r []for host in res host name apply rules host rules print '%s esxhostname %s' % host name host name print '%s isesxhost 1' % host name for vm in res[host] vm name apply rules vm rules print '%s vmname %s' % vm name vm name print '%s isesxvm 1' % vm name print '%s esxhost %s' % vm name host name return r
def unit file changed name return "'systemctldaemon-reload'" in systemctl status name ['stdout'] lower
def unit file changed name return "'systemctldaemon-reload'" in systemctl status name ['stdout'] lower
def key description character ascii code ord character if ascii code < 32 return ' Ctrl+{ c}' format ord '@' + ascii code else return repr character
def test multiseries donut chart Pie inner radius 0 3 pretty print True chart title ' Browserusagebyversionin February 2012 in% 'chart add 'IE' [5 7 10 2 2 6 1] chart add ' Firefox' [0 6 16 8 7 4 2 2 1 2 1 1 1 1 4 3 1] chart add ' Chrome' [0 3 0 9 17 1 15 3 0 6 0 5 1 6] chart add ' Safari' [4 4 0 1] chart add ' Opera' [0 1 1 6 0 1 0 5] assert chart render
def setup platform hass config add devices discovery info None if discovery info is not None host urlparse discovery info[ 1 ] hostnameelse host config get CONF HOST if host is None LOGGER error ' No T Vfoundinconfigurationfileorwithdiscovery' return Falseif host in CONFIGURING returnmac config get CONF MAC name config get CONF NAME customize config get CONF CUSTOMIZE setup tv host mac name customize hass add devices
def clean directory directory if not os path exists directory returnfor entry in os listdir directory if entry startswith u' ' continuepath os path join directory entry if os path isdir path shutil rmtree path True else os unlink path
def add node workflow name node type parents attrs {} Node Class NODE TYPES[node type]node Node Class workflow workflow node type node type name name for attr in attrs setattr node attr attrs[attr] node save if parents for parent in parents name 'ok'if parent node type 'start' or parent node type 'join' name 'to'elif parent node type 'fork' or parent node type 'decision' name 'start'link Link parent parent child node name name link save if node type 'fork' and node type 'decision' and node type 'join' link Link parent node child Kill objects get name 'kill' workflow workflow name 'error' link save return node
def add node workflow name node type parents attrs {} Node Class NODE TYPES[node type]node Node Class workflow workflow node type node type name name for attr in attrs setattr node attr attrs[attr] node save if parents for parent in parents name 'ok'if parent node type 'start' or parent node type 'join' name 'to'elif parent node type 'fork' or parent node type 'decision' name 'start'link Link parent parent child node name name link save if node type 'fork' and node type 'decision' and node type 'join' link Link parent node child Kill objects get name 'kill' workflow workflow name 'error' link save return node
def notify list user unsubscribed e target e['target']if target['screen name'] c['original name'] returnsource e['source']target object [e['target object']]created at e['created at']source user cycle color source['name'] + color func c['NOTIFICATION']['source nick'] '@' + source['screen name'] notify color func c['NOTIFICATION']['notify'] 'unsubscribedfromyourlist' date parser parse created at clock fallback humanize date clock color func c['NOTIFICATION']['clock'] clock meta c['NOTIFY FORMAT']meta source user join meta split '#source user' meta notify join meta split '#notify' meta clock join meta split '#clock' meta emojize meta print Nicely '' print Nicely meta print list target object noti True
def qualities quality ids def q qid try return quality ids index qid except Value Error return -1 return q
def generate Arg List arglist args []extra []count 0for i in range len arglist elt arglist[i]if isinstance elt str args append elt elif isinstance elt tuple args append Tuple Arg i * 2 elt extra extend misc flatten elt count count + 1 else raise Value Error 'unexpectargumenttype ' eltreturn args + extra count
def generate Arg List arglist args []extra []count 0for i in range len arglist elt arglist[i]if isinstance elt str args append elt elif isinstance elt tuple args append Tuple Arg i * 2 elt extra extend misc flatten elt count count + 1 else raise Value Error 'unexpectargumenttype ' eltreturn args + extra count
def generate Arg List arglist args []extra []count 0for i in range len arglist elt arglist[i]if isinstance elt str args append elt elif isinstance elt tuple args append Tuple Arg i * 2 elt extra extend misc flatten elt count count + 1 else raise Value Error 'unexpectargumenttype ' eltreturn args + extra count
def make xontribs wiz md xontrib metadata pkgs [md['packages'] get d get 'package' None {} for d in md['xontribs']]w make flat wiz make xontrib md['xontribs'] pkgs return w
def get pointer ctypes func return ctypes cast ctypes func ctypes c void p value
def user with role user role return {'id' user id 'username' user username 'email' user email 'role' role}
def print class class name filename sys argv[ 0 ]with open filename as f data f read regex '^ class' + class name + '\\b *? ^\\S' match re search regex data flags re MULTILINE re DOTALL if match print match group 1
def print class class name filename sys argv[ 0 ]with open filename as f data f read regex '^ class' + class name + '\\b *? ^\\S' match re search regex data flags re MULTILINE re DOTALL if match print match group 1
def count total params layers layer set None if layer set is None layer set set trainable count 0non trainable count 0for layer in layers if layer in layer set continuelayer set add layer if isinstance layer Model Sequential t nt count total params layer layers layer set trainable count + tnon trainable count + ntelse trainable count + sum [K count params p for p in layer trainable weights] non trainable count + sum [K count params p for p in layer non trainable weights] return trainable count non trainable count
def parse db config config key 'sqlalchemy url' from ckan common import configurl config[config key]regex ['^\\s* ?P<db type>\\w* ' ' //' ' ?P<db user>[^ ]* ' ' ?' ' ?P<db pass>[^@]* ' '@' ' ?P<db host>[^/ ]* ' ' ?' ' ?P<db port>[^/]* ' '/' ' ?P<db name>[\\w -]* ']db details match re match '' join regex url if not db details match raise Exception ' Couldnotextractdbdetailsfromurl %r' % url db details db details match groupdict return db details
def create collection committer id collection commit message commit cmds collection validate strict False rights manager create new collection rights collection id committer id model collection models Collection Model id collection id category collection category title collection title objective collection objective language code collection language code tags collection tags schema version collection schema version nodes [collection node to dict for collection node in collection nodes] model commit committer id commit message commit cmds collection version + 1create collection summary collection id committer id
def test topic save forum user post Post content ' Test Content' topic Topic title ' Test Title' assert forum last post id is None assert forum post count 0 assert forum topic count 0 topic save forum forum post post user user assert topic title ' Test Title' topic title ' Test Edit Title'topic save assert topic title ' Test Edit Title' assert topic first post id post id assert topic last post id post id assert forum last post id post id assert forum post count 1 assert forum topic count 1
@functools wrapsdef process request body fn def wrapped *args **kwargs if cherrypy request process request body is not False fn *args **kwargs return wrapped
def get reader data format data class readers [ fmt cls for fmt cls in readers if fmt data format ]for reader format reader class in readers if is best match data class reader class readers return readers[ reader format reader class ]else format table str get format table str data class u' Read' raise IO Registry Error u" Noreaderdefinedforformat'{ 0 }'andclass'{ 1 }' \n Theavailableformatsare \n{ 2 }" format data format data class name format table str
def for float dtypes name 'dtype' no float 16 False if no float 16 return for dtypes regular float dtypes name name else return for dtypes float dtypes name name
def splitext p tail head split p if '/' in head q len head - string rfind head '/' return p[ - q ] p[ - q ] return p ''
def add discussion page menu index 0 page wait for component menu click css page 'button>span large-discussion-icon' menu index
def generate user email username slugify email user User Profile objects get or create email email defaults {'username' username} return user
def filter match kwargs kwargs children False kwargs kwargs copy for key in 'pattern' 'start' 'end' 'parent' 'formatter' 'value' if key in kwargs del kwargs[key]if children for key in 'name' if key in kwargs del kwargs[key]return kwargs
def find repeats arr return Repeated Results * find repeats np array arr dtype np float 64
def bugreport app import billiardimport celeryimport kombutry conn app connection driver v u'{ 0 } {1 }' format conn transport driver name conn transport driver version transport conn transport clsexcept Exception transport driver v u''return BUGREPORT INFO format system platform system arch u' ' join x for x in platform architecture if x py i pyimplementation celery v celery VERSION BANNER kombu v kombu version billiard v billiard version py v platform python version driver v driver v transport transport results maybe sanitize url app conf result backend or u'disabled' human settings app conf humanize loader qualname app loader class
def show Info text parent False help '' type 'info' title ' Anki' if parent is False parent aqt mw app active Window or aqt mw if type 'warning' icon Q Message Box Warningelif type 'critical' icon Q Message Box Criticalelse icon Q Message Box Informationmb Q Message Box parent mb set Text text mb set Icon icon mb set Window Modality Qt Window Modal mb set Window Title title b mb add Button Q Message Box Ok b set Default True if help b mb add Button Q Message Box Help b clicked connect lambda open Help help b set Auto Default False return mb exec
def install reactor Wx Reactor from twisted internet main import install Reactorinstall Reactor reactor return reactor
def install reactor Wx Reactor from twisted internet main import install Reactorinstall Reactor reactor return reactor
def color text text color color mapping {u'black' u' 0 30 ' u'red' u' 0 31 ' u'green' u' 0 32 ' u'brown' u' 0 33 ' u'blue' u' 0 34 ' u'magenta' u' 0 35 ' u'cyan' u' 0 36 ' u'lightgrey' u' 0 37 ' u'default' u' 0 39 ' u'darkgrey' u' 1 30 ' u'lightred' u' 1 31 ' u'lightgreen' u' 1 32 ' u'yellow' u' 1 33 ' u'lightblue' u' 1 34 ' u'lightmagenta' u' 1 35 ' u'lightcyan' u' 1 36 ' u'white' u' 1 37 '}if sys platform u'win 32 ' and Out Stream is None return textcolor code color mapping get color u' 0 39 ' return u'\x 1 b[{ 0 }m{ 1 }\x 1 b[ 0 m' format color code text
def color text text color color mapping {u'black' u' 0 30 ' u'red' u' 0 31 ' u'green' u' 0 32 ' u'brown' u' 0 33 ' u'blue' u' 0 34 ' u'magenta' u' 0 35 ' u'cyan' u' 0 36 ' u'lightgrey' u' 0 37 ' u'default' u' 0 39 ' u'darkgrey' u' 1 30 ' u'lightred' u' 1 31 ' u'lightgreen' u' 1 32 ' u'yellow' u' 1 33 ' u'lightblue' u' 1 34 ' u'lightmagenta' u' 1 35 ' u'lightcyan' u' 1 36 ' u'white' u' 1 37 '}if sys platform u'win 32 ' and Out Stream is None return textcolor code color mapping get color u' 0 39 ' return u'\x 1 b[{ 0 }m{ 1 }\x 1 b[ 0 m' format color code text
def color text text color color mapping {u'black' u' 0 30 ' u'red' u' 0 31 ' u'green' u' 0 32 ' u'brown' u' 0 33 ' u'blue' u' 0 34 ' u'magenta' u' 0 35 ' u'cyan' u' 0 36 ' u'lightgrey' u' 0 37 ' u'default' u' 0 39 ' u'darkgrey' u' 1 30 ' u'lightred' u' 1 31 ' u'lightgreen' u' 1 32 ' u'yellow' u' 1 33 ' u'lightblue' u' 1 34 ' u'lightmagenta' u' 1 35 ' u'lightcyan' u' 1 36 ' u'white' u' 1 37 '}if sys platform u'win 32 ' and Out Stream is None return textcolor code color mapping get color u' 0 39 ' return u'\x 1 b[{ 0 }m{ 1 }\x 1 b[ 0 m' format color code text
def color text text color color mapping {u'black' u' 0 30 ' u'red' u' 0 31 ' u'green' u' 0 32 ' u'brown' u' 0 33 ' u'blue' u' 0 34 ' u'magenta' u' 0 35 ' u'cyan' u' 0 36 ' u'lightgrey' u' 0 37 ' u'default' u' 0 39 ' u'darkgrey' u' 1 30 ' u'lightred' u' 1 31 ' u'lightgreen' u' 1 32 ' u'yellow' u' 1 33 ' u'lightblue' u' 1 34 ' u'lightmagenta' u' 1 35 ' u'lightcyan' u' 1 36 ' u'white' u' 1 37 '}if sys platform u'win 32 ' and Out Stream is None return textcolor code color mapping get color u' 0 39 ' return u'\x 1 b[{ 0 }m{ 1 }\x 1 b[ 0 m' format color code text
def color text text color color mapping {u'black' u' 0 30 ' u'red' u' 0 31 ' u'green' u' 0 32 ' u'brown' u' 0 33 ' u'blue' u' 0 34 ' u'magenta' u' 0 35 ' u'cyan' u' 0 36 ' u'lightgrey' u' 0 37 ' u'default' u' 0 39 ' u'darkgrey' u' 1 30 ' u'lightred' u' 1 31 ' u'lightgreen' u' 1 32 ' u'yellow' u' 1 33 ' u'lightblue' u' 1 34 ' u'lightmagenta' u' 1 35 ' u'lightcyan' u' 1 36 ' u'white' u' 1 37 '}if sys platform u'win 32 ' and Out Stream is None return textcolor code color mapping get color u' 0 39 ' return u'\x 1 b[{ 0 }m{ 1 }\x 1 b[ 0 m' format color code text
def color text text color color mapping {u'black' u' 0 30 ' u'red' u' 0 31 ' u'green' u' 0 32 ' u'brown' u' 0 33 ' u'blue' u' 0 34 ' u'magenta' u' 0 35 ' u'cyan' u' 0 36 ' u'lightgrey' u' 0 37 ' u'default' u' 0 39 ' u'darkgrey' u' 1 30 ' u'lightred' u' 1 31 ' u'lightgreen' u' 1 32 ' u'yellow' u' 1 33 ' u'lightblue' u' 1 34 ' u'lightmagenta' u' 1 35 ' u'lightcyan' u' 1 36 ' u'white' u' 1 37 '}if sys platform u'win 32 ' and Out Stream is None return textcolor code color mapping get color u' 0 39 ' return u'\x 1 b[{ 0 }m{ 1 }\x 1 b[ 0 m' format color code text
def is Loop List Intersecting loops for loop Index in xrange len loops - 1 loop loops[loop Index]if is Loop Intersecting Loops loop loops[ loop Index + 1 ] return Truereturn False
def is Loop List Intersecting loops for loop Index in xrange len loops - 1 loop loops[loop Index]if is Loop Intersecting Loops loop loops[ loop Index + 1 ] return Truereturn False
def update key description key id description region None key None keyid None profile None conn get conn region region key key keyid keyid profile profile r {}try conn update key description key id description r['result'] Trueexcept boto exception Boto Server Error as e r['result'] Falser['error'] utils ['boto get error'] e return r
def read *parts with codecs open os path join HERE *parts 'r' as f return f read
def read *parts with codecs open os path join HERE *parts 'r' as f return f read
def get key default '' if not isinstance key six string types log debug "{ 0 } 'key'argumentisnotastringtype '{ 1 }'" format name key return Falsereturn os environ get key default
def get session global SESSIO Nif tf get default session is not None session tf get default session else if SESSION is None if not os environ get 'OMP NUM THREADS' config tf Config Proto allow soft placement True else nb thread int os environ get 'OMP NUM THREADS' config tf Config Proto intra op parallelism threads nb thread allow soft placement True SESSION tf Session config config session SESSIO Nif not MANUAL VAR INIT initialize variables return session
def virtual if HAS JUNOS and 'proxy' in opts return virtualname else return False ' Thejunosmodulecouldnotbeloaded junos-ezncorjxmleaseorproxycouldnotbeloaded '
@given 'abehavemodelwith' def step given a behave model with table context assert context table 'REQUIRE context table'context table require columns Behave Model Builder REQUIRED COLUMNS model builder Behave Model Builder context behave model model builder build model from table context table
def generate tasks **kwargs tasks local tasks for fun args in tasks fun *args tasks clear
def exec query ps cmd fields if not WINDOWS returnps sp Popen [conf prog powershell] + cmd + [' ' 'select%s' % ' ' join fields ' ' 'fl'] stdout sp PIPE universal newlines True l []for line in ps stdout if not line strip continuesl line split ' ' 1 if len sl 1 l[ -1 ] + sl[ 0 ] strip continueelse l append sl[ 1 ] strip if len l len fields yield l l []
def clean tables for f in TABLES if os path isfile f os remove f print u' Removed' + f
def apply if callable maybe callable obj **kwargs if callable maybe callable return maybe callable obj **kwargs return maybe callable
def apply if callable maybe callable obj **kwargs if callable maybe callable return maybe callable obj **kwargs return maybe callable
def serve config file None dev addr None strict None theme None theme dir None livereload u'livereload' tempdir tempfile mkdtemp def builder log info u' Buildingdocumentation ' config load config config file config file dev addr dev addr strict strict theme theme theme dir theme dir config[u'site dir'] tempdirlive server livereload in [u'dirty' u'livereload'] dirty livereload u'dirty' build config live server live server dirty dirty return configconfig builder host port config[u'dev addr'] split u' ' 1 try if livereload in [u'livereload' u'dirty'] livereload host port config builder tempdir else static server host port tempdir finally shutil rmtree tempdir
def serve config file None dev addr None strict None theme None theme dir None livereload u'livereload' tempdir tempfile mkdtemp def builder log info u' Buildingdocumentation ' config load config config file config file dev addr dev addr strict strict theme theme theme dir theme dir config[u'site dir'] tempdirlive server livereload in [u'dirty' u'livereload'] dirty livereload u'dirty' build config live server live server dirty dirty return configconfig builder host port config[u'dev addr'] split u' ' 1 try if livereload in [u'livereload' u'dirty'] livereload host port config builder tempdir else static server host port tempdir finally shutil rmtree tempdir
def serve config file None dev addr None strict None theme None theme dir None livereload u'livereload' tempdir tempfile mkdtemp def builder log info u' Buildingdocumentation ' config load config config file config file dev addr dev addr strict strict theme theme theme dir theme dir config[u'site dir'] tempdirlive server livereload in [u'dirty' u'livereload'] dirty livereload u'dirty' build config live server live server dirty dirty return configconfig builder host port config[u'dev addr'] split u' ' 1 try if livereload in [u'livereload' u'dirty'] livereload host port config builder tempdir else static server host port tempdir finally shutil rmtree tempdir
def serve config file None dev addr None strict None theme None theme dir None livereload u'livereload' tempdir tempfile mkdtemp def builder log info u' Buildingdocumentation ' config load config config file config file dev addr dev addr strict strict theme theme theme dir theme dir config[u'site dir'] tempdirlive server livereload in [u'dirty' u'livereload'] dirty livereload u'dirty' build config live server live server dirty dirty return configconfig builder host port config[u'dev addr'] split u' ' 1 try if livereload in [u'livereload' u'dirty'] livereload host port config builder tempdir else static server host port tempdir finally shutil rmtree tempdir
def validate twitter username if username username re sub 'https? // www\\ ?twitter\\ com/ @' '' username if len username > 15 raise Validation Error ' Twitterusernamescannotbelongerthan 15 characters ' if not re match '^\\w+$' username raise Validation Error ' Twitterusernamesmustcontainonlyalphanumericcharactersandtheunderscore ' return username
def validate twitter username if username username re sub 'https? // www\\ ?twitter\\ com/ @' '' username if len username > 15 raise Validation Error ' Twitterusernamescannotbelongerthan 15 characters ' if not re match '^\\w+$' username raise Validation Error ' Twitterusernamesmustcontainonlyalphanumericcharactersandtheunderscore ' return username
def create template register return django template Library
def create template register return django template Library
def register jitable *args **kwargs def wrap fn @overload fn jit options kwargs def ov wrap *args **kwargs return fnreturn fnif kwargs return wrapelse return wrap *args
def get service hass config discovery info None filename config[CONF FILENAME]timestamp config[CONF TIMESTAMP]return File Notification Service hass filename timestamp
def get Z Component Cross Product vec 3 First vec 3 Second return vec 3 First x * vec 3 Second y - vec 3 First y * vec 3 Second x
@taskdef remove incomplete accounts days INCOMPLETE ACC MAX DAYS from mozillians users models import User Profilenow datetime now - timedelta days days User Profile objects filter full name '' filter user date joined lt now delete
def mount dmg temp dir salt ['temp dir'] prefix 'dmg-' cmd 'hdiutilattach-readonly-nobrowse-mountpoint{ 0 }"{ 1 }"' format temp dir dmg return salt ['cmd run'] cmd temp dir
@njitdef repeat 1d x K out N x shape[ 0 ]L out shape[ 0 ] // K * N for n in range N val x[n]for k in range K for l in range L ind k * N * L + n * L + l out[ind] val
def upgrade migrate engine meta Meta Data meta bind migrate engine Table 'volume attachment' meta autoload True attachment specs Table 'attachment specs' meta Column 'created at' Date Time timezone False Column 'updated at' Date Time timezone False Column 'deleted at' Date Time timezone False Column 'deleted' Boolean default False Column 'id' Integer primary key True nullable False Column 'attachment id' String 36 Foreign Key 'volume attachment id' nullable False Column 'key' String 255 Column 'value' String 255 mysql engine ' Inno DB' mysql charset 'utf 8 ' attachment specs create
@verbosedef data path url path None force update False update path None verbose None key 'MNE DATASETS EEGBCI PATH'name 'EEGBCI'path get path path key name destination url to local path url op join path 'MNE-eegbci-data' destinations [destination]if not op isfile destination or force update if op isfile destination os remove destination if not op isdir op dirname destination os makedirs op dirname destination fetch file url destination print destination False do path update path update path key name return destinations
@require POST@login requireddef get coupon info request course id coupon id request POST get 'id' None if not coupon id return Json Response {'message' 'couponidnotfound' } status 400 try coupon Coupon objects get id coupon id except Object Does Not Exist return Json Response {'message' 'couponwiththecouponid {coupon id} Does Not Exist' format coupon id coupon id } status 400 if not coupon is active return Json Response {'message' 'couponwiththecouponid {coupon id} isalreadyinactive' format coupon id coupon id } status 400 expiry date coupon display expiry datereturn Json Response {'coupon code' coupon code 'coupon description' coupon description 'coupon course id' coupon course id to deprecated string 'coupon discount' coupon percentage discount 'expiry date' expiry date 'message' 'couponwiththecouponid {coupon id} updatedsuccessfully' format coupon id coupon id }
def diffsets with comments review current pair if not review returndiffsets Diff Set objects filter files comments review review diffsets diffsets filter files comments interfilediff isnull True diffsets diffsets distinct for diffset in diffsets yield {u'diffset' diffset u'is current' current pair[ 0 ] diffset and current pair[ 1 ] is None }
def binskim sample signature check challenge signature if len re findall ' [a-f\\d]{ 32 } ' sample 0 return ' Wrong Input 'binskim path config['binskim']['file x64 ']command 'analyze'path config[' Mob SF']['samples'] + sample output p '-o'output d config[' Mob SF']['samples'] + sample + ' binskim' policy p '--config'policy d 'default'params [binskim path command path output p output d policy p policy d]pipe subprocess Popen subprocess list 2 cmdline params pipe wait out file open output d return out file read
def mean image subtraction image means if image get shape ndims 3 raise Value Error ' Inputmustbeofsize[height width C> 0 ]' num channels image get shape as list [ -1 ]if len means num channels raise Value Error 'len means mustmatchthenumberofchannels' channels tf split 2 num channels image for i in range num channels channels[i] - means[i]return tf concat 2 channels
def webapi token saved cb instance created **kwargs if created op u'created'else op u'updated'mail webapi token instance op
def interval *args def add attribute function if not hasattr function u'interval' function interval []for arg in args function interval append arg return functionreturn add attribute
def interval *args def add attribute function if not hasattr function u'interval' function interval []for arg in args function interval append arg return functionreturn add attribute
def autofill unprovided options options package name get formatted string u'packagename' options package name options extension name Lower Case With Underscores options class name get formatted string u'classname' options class name options extension name Camel Case if options description is None options description u' Extension%s' % options extension name
def setup platform hass config add devices discovery info None emails config get CONF EMAIL data Have I Been Pwned Data emails devices []for email in emails devices append Have I Been Pwned Sensor data hass email add devices devices for sensor in devices sensor update nothrottle
def dfs command None *args if command return hadoop cmd 'dfs' command *args else return ' Error commandmustbeprovided'
def hvals key host None port None db None password None server connect host port db password return server hvals key
def hvals key host None port None db None password None server connect host port db password return server hvals key
def l1 regularizer weight 1 0 scope None def regularizer tensor with tf name scope scope 'L 1 Regularizer' [tensor] l1 weight tf convert to tensor weight dtype tensor dtype base dtype name 'weight' return tf multiply l1 weight tf reduce sum tf abs tensor name 'value' return regularizer
def b level 1 if config DEBUG > level pdb set trace
def get version return ' ' join str each for each in VERSION[ 3]
def teardown paste factories global app factory filter factorydel app factorydel filter factory
def write theme return theme xml
def get pending servermanager vname ' Current Reboot Attempts'key 'SOFTWARE\\ Microsoft\\ Server Manager'reg ret salt ['reg read value'] 'HKLM' key vname if reg ret['success'] log debug ' Foundkey %s' key try if int reg ret['vdata'] > 0 return Trueexcept Value Error passelse log debug ' Unabletoaccesskey %s' key return False
def pause trace return replace trace
def group volume type mapping create context group id volume type id return IMPL group volume type mapping create context group id volume type id
def add kernel arrays 1D array 1 array 2 if array 1 size > array 2 size new array array 1 copy center array 1 size // 2 slice slice center - array 2 size // 2 center + array 2 size // 2 + 1 new array[slice ] + array 2return new arrayelif array 2 size > array 1 size new array array 2 copy center array 2 size // 2 slice slice center - array 1 size // 2 center + array 1 size // 2 + 1 new array[slice ] + array 1return new arrayreturn array 2 + array 1
def apply web specific fixes font unhinted family name hhea font['hhea']hhea ascent 1900 hhea descent -500 os 2 font['OS/ 2 ']os 2 s Typo Ascender 1536 os 2 s Typo Descender -512 os 2 s Typo Line Gap 102 os 2 us Win Ascent 1946 os 2 us Win Descent 512 apply web cros common fixes font unhinted family name
def apply web specific fixes font unhinted family name hhea font['hhea']hhea ascent 1900 hhea descent -500 os 2 font['OS/ 2 ']os 2 s Typo Ascender 1536 os 2 s Typo Descender -512 os 2 s Typo Line Gap 102 os 2 us Win Ascent 1946 os 2 us Win Descent 512 apply web cros common fixes font unhinted family name
def call context topic msg timeout None check for lock False if check for lock check for lock return get impl call CONF context topic msg timeout
def shell env **kw return setenv {'shell env' kw}
def shell env **kw return setenv {'shell env' kw}
def semanage fcontext exists sefcontext target ftype record target option to file type str[ftype] records sefcontext get all try return records[record]except Key Error return None
def non translated locals global non translated localsif not non translated locals locales config get 'ckan locale order' '' split non translated locals [x for x in locales if x not in get locales ]return non translated locals
def translation x 0 y 0 z 0 m np array [[ 1 0 0 x] [0 1 0 y] [0 0 1 z] [0 0 0 1]] dtype float return m
def is widget with placeholder widget return isinstance widget Text Input Textarea Password Input
def make decreasing candle open high low close dates **kwargs decrease x decrease y Candlestick open high low close dates **kwargs get candle decrease if 'line' in kwargs kwargs setdefault 'fillcolor' kwargs['line']['color'] else kwargs setdefault 'fillcolor' DEFAULT DECREASING COLOR kwargs setdefault 'showlegend' False kwargs setdefault 'line' dict color DEFAULT DECREASING COLOR kwargs setdefault 'name' ' Decreasing' candle decr data dict type 'box' x decrease x y decrease y whiskerwidth 0 boxpoints False **kwargs return [candle decr data]
def to datetime iso 8601 time if iso 8601 time is None return Nonereturn iso 8601 to datetime iso 8601 time
def forget func *xs return Forget func *xs
def hex to filename path hex if getattr path 'encode' None is not None hex hex decode 'ascii' dir hex[ 2]file hex[ 2 ]return os path join path dir file
def create ipsecpolicy name profile None **kwargs conn auth profile return conn create ipsecpolicy name **kwargs
def get page context page content toc meta config if config[u'site url'] page set canonical url config[u'site url'] if config[u'repo url'] page set edit url config[u'repo url'] config[u'edit uri'] page content contentpage toc tocpage meta metaif page is homepage or page title is None page title Noneelse page title page titleif page is homepage page description config[u'site description']else page description Nonereturn {u'page' page u'page title' page title u'page description' page description u'content' content u'toc' toc u'meta' meta u'canonical url' page canonical url u'current page' page u'previous page' page previous page u'next page' page next page}
def get page context page content toc meta config if config[u'site url'] page set canonical url config[u'site url'] if config[u'repo url'] page set edit url config[u'repo url'] config[u'edit uri'] page content contentpage toc tocpage meta metaif page is homepage or page title is None page title Noneelse page title page titleif page is homepage page description config[u'site description']else page description Nonereturn {u'page' page u'page title' page title u'page description' page description u'content' content u'toc' toc u'meta' meta u'canonical url' page canonical url u'current page' page u'previous page' page previous page u'next page' page next page}
def blockcut expr rowsizes colsizes rowbounds bounds rowsizes colbounds bounds colsizes return Block Matrix [[ Matrix Slice expr rowbound colbound for colbound in colbounds] for rowbound in rowbounds]
def in words integer in million True locale u'en IN' if not in million else frappe local lang integer int integer try ret num 2 words integer lang locale except Not Implemented Error ret num 2 words integer lang u'en' return ret replace u'-' u''
@click command 'get-app' @click argument 'name' nargs -1 @click argument 'git-url' @click option '--branch' default None help 'branchtocheckout' def get app git url branch name None from bench app import get appget app git url branch branch
def mount Cgroups mounts quiet Run 'cat/proc/mounts' cgdir '/sys/fs/cgroup'csdir cgdir + '/cpuset' if 'cgroup%s' % cgdir not in mounts and 'cgroups%s' % cgdir not in mounts raise Exception 'cgroupsnotmountedon' + cgdir if 'cpuset%s' % csdir not in mounts err Run 'mkdir-p' + csdir err Run 'mount-tcgroup-ocpusetcpuset' + csdir
@must be logged indef oauth application detail auth **kwargs client id kwargs get 'client id' try record Api O Auth 2 Application find one Q 'client id' 'eq' client id except No Results Found raise HTTP Error http NOT FOUND except Value Error raise HTTP Error http NOT FOUND if record owner auth user raise HTTP Error http FORBIDDEN if record is active is False raise HTTP Error http GONE app detail url api v2 url 'applications/{}/' format client id return {'app list url' '' 'app detail url' app detail url}
def test xml filters round trip plot Bar plot add 'A' [60 75 80 78 83 90 ] plot add 'B' [92 87 81 73 68 55 ] before plot render plot add xml filter lambda T T after plot render assert before after
def task cli pip install venv name 'flocker-client' package source Package Source url 'https //{bucket} s3 amazonaws com/{key}/ Flocker-{version}-py 2 -none-any whl' format bucket ARCHIVE BUCKET key 'python' version get wheel version package source return sequence [run from args ['virtualenv' '--python /usr/bin/python 2 7' venv name] run from args ['source' '{}/bin/activate' format venv name ] run from args ['pip' 'install' '--upgrade' 'pip'] run from args ['pip' 'install' url] ]
def diskfull if cfg email full return send T ' To %s\n From %s\n Date %s\n Subject SA Bnzbdreports Disk Full\n\n Hi \n\n SA Bnzbdhasstoppeddownloading becausethediskisalmostfull \n Pleasemakeroomandresume SA Bnzbdmanually \n\n' % cfg email to get string cfg email from get email date cfg email to else return ''
def get valid name layer name name clean string layer name proposed name namecount 1while Layer objects filter name proposed name exists proposed name '%s %d' % name count count count + 1 logger info ' Requestednamealreadyused adjustingname[%s] >[%s]' layer name proposed name else logger info ' Usingnameasrequested' return proposed name
def reactivate domain name opts salt utils namecheap get opts 'namecheap domains reactivate' opts[' Domain Name'] domain nameresponse xml salt utils namecheap post request opts if response xml is None return {}domainreactivateresult response xml get Elements By Tag Name ' Domain Reactivate Result' [0 ]return salt utils namecheap xml to dict domainreactivateresult
def reactivate domain name opts salt utils namecheap get opts 'namecheap domains reactivate' opts[' Domain Name'] domain nameresponse xml salt utils namecheap post request opts if response xml is None return {}domainreactivateresult response xml get Elements By Tag Name ' Domain Reactivate Result' [0 ]return salt utils namecheap xml to dict domainreactivateresult
def string to rgb color if not color startswith '#' if color lower not in color dict raise Value Error ' Color"%s"unknown' % color color color dict[color]assert color[ 0 ] '#' color color[ 1 ]lc len color if lc in 3 4 color '' join c + c for c in color lc len color if lc not in 6 8 raise Value Error ' Hexcolormusthaveexactlysixoreightelementsfollowingthe#sign' color np array [ int color[i i + 2 ] 16 / 255 0 for i in range 0 lc 2 ] return color
def string to rgb color if not color startswith '#' if color lower not in color dict raise Value Error ' Color"%s"unknown' % color color color dict[color]assert color[ 0 ] '#' color color[ 1 ]lc len color if lc in 3 4 color '' join c + c for c in color lc len color if lc not in 6 8 raise Value Error ' Hexcolormusthaveexactlysixoreightelementsfollowingthe#sign' color np array [ int color[i i + 2 ] 16 / 255 0 for i in range 0 lc 2 ] return color
def get component by name app name sa session app model context currentreturn sa session query app model Component filter app model Component table c name name first
@gen enginedef Setup And Dispatch callback Email Manager Set Instance Send Grid Email Manager Throttle Usage client db client DB Client Instance yield gen Task Dispatch client callback
def additions installed name reboot False upgrade os False ret {'name' name 'changes' {} 'result' False 'comment' ''}current state salt ['vbox guest additions version'] if current state ret['result'] Trueret['comment'] ' Systemalreadyinthecorrectstate'return retif opts ['test'] ret['comment'] ' Thestateof Virtual Box Guest Additionswillbechanged 'ret['changes'] {'old' current state 'new' True}ret['result'] Nonereturn retnew state salt ['vbox guest additions install'] reboot reboot upgrade os upgrade os ret['comment'] ' Thestateof Virtual Box Guest Additionswaschanged 'ret['changes'] {'old' current state 'new' new state}ret['result'] bool new state return ret
def parse extra model fields extra model fields fields defaultdict list for entry in extra model fields model key field name parse field path entry[ 0 ] field class import field entry[ 1 ] field args field kwargs entry[ 2 ]try field field class *field args **field kwargs except Type Error as e raise Improperly Configured u" The EXTRA MODEL FIELD Ssettingcontainsargumentsforthefield'%s'whichcouldnotbeapplied %s" % entry[ 1 ] e fields[model key] append field name field return fields
def dmp to tuple f u if not u return tuple f v u - 1 return tuple dmp to tuple c v for c in f
def volume mute hass hass services call DOMAIN SERVICE VOLUME MUTE
def service get all computes by hv type context hv type include disabled False return IMPL service get all computes by hv type context hv type include disabled include disabled
def path exists path return os path exists path
def path exists path return os path exists path
def path exists path return os path exists path
def path exists path return os path exists path
def path exists path return os path exists path
def path exists path return os path exists path
def path exists path return os path exists path
def path exists path return os path exists path
def path exists path return os path exists path
def wait for notification page def is saving ' Whetherornotthenotificationiscurrentlyshowing 'return page q css ' wrapper-notification-mini is-shown' presentdef is saving done ' Whetherornotthenotificationisfinishedshowing 'return page q css ' wrapper-notification-mini is-hiding' present Empty Promise is saving ' Notificationshouldhavebeenshown ' try interval 0 1 timeout 60 fulfill Empty Promise is saving done ' Notificationshouldhavebeenhidden ' try interval 0 1 timeout 60 fulfill
def write Feature File font path fout open path 'w' fout write font features text fout close
def sleep sleep time 0 25 time sleep sleep time
def nsdecls *prefixes return u'' join [ u'xmlns %s "%s"' % pfx nsmap[pfx] for pfx in prefixes]
def to unicode value if not isinstance value six string types raise Value Error ' Value"%s"mustbeastring ' % value if not isinstance value six text type value six u value return value
def cli *commands return proxy ['napalm call'] 'cli' **{'commands' list commands }
def same TP Params tp 1 tp 2 result Truefor param in ['number Of Cols' 'cells Per Column' 'initial Perm' 'connected Perm' 'min Threshold' 'new Synapse Count' 'permanence Inc' 'permanence Dec' 'permanence Max' 'global Decay' 'activation Threshold' 'do Pooling' 'seg Update Valid Duration' 'seed' 'burn In' 'pam Length' 'max Age'] if getattr tp 1 param getattr tp 2 param print param 'isdifferent'print getattr tp 1 param 'vs' getattr tp 2 param result Falsereturn result
def check password strength password password unicode password n math log len set password num re search '[ 0 - 9 ]' password is not None and re match '^[ 0 - 9 ]*$' password is None caps password password upper and password password lower extra re match '^[a-z A-Z 0 - 9 ]*$' password is None score len password * n + caps + num + extra / 20 password strength {0 ' Weak' 1 ' Medium' 2 ' Strong' 3 ' Very Strong'}return password strength[min 3 int score ]
def update config from env config env srcdir os path join os path dirname os path realpath file ' ' if env in ['prod' 'staging'] base cfg path ['/etc/inboxapp/secrets yml' '/etc/inboxapp/config json']else v {'env' env 'srcdir' srcdir}base cfg path ['{srcdir}/etc/secrets-{env} yml' format **v '{srcdir}/etc/config-{env} json' format **v ]if 'SYNC ENGINE CFG PATH' in os environ cfg path os environ get 'SYNC ENGINE CFG PATH' '' split os path pathsep cfg path list p strip for p in cfg path if p strip else cfg path []path cfg path + base cfg path for filename in reversed path try f open filename except IO Error OS Error as e if e errno errno ENOENT raiseelse with f config update yaml safe load f
def Serial Corr series lag 1 xs series[lag ]ys series shift lag [lag ]corr Corr xs ys return corr
@pytest fixture autouse True def reset cache backend state celery app yield backend celery app dict get u'backend' if backend is not None if isinstance backend Cache Backend if isinstance backend client Dummy Client backend client cache clear backend cache clear
def create image bdm image ref boot index 0 return Block Device Dict {'source type' 'image' 'image id' image ref 'delete on termination' True 'boot index' boot index 'device type' 'disk' 'destination type' 'local'}
def is Fixed Group kex Algorithm return I Fixed Group Kex Algorithm provided By get Kex kex Algorithm
def is Fixed Group kex Algorithm return I Fixed Group Kex Algorithm provided By get Kex kex Algorithm
def delete cookie response response set cookie settings SESSION COOKIE NAME max age 0 expires ' Thu 01 - Jan- 197000 00 00 GMT' domain settings SESSION COOKIE DOMAIN secure settings SESSION COOKIE SECURE or None httponly settings SESSION COOKIE HTTPONLY or None
def delete cookie response response set cookie settings SESSION COOKIE NAME max age 0 expires ' Thu 01 - Jan- 197000 00 00 GMT' domain settings SESSION COOKIE DOMAIN secure settings SESSION COOKIE SECURE or None httponly settings SESSION COOKIE HTTPONLY or None
def fake service orm **updates db service fake db service **updates service models Service **db service return service
def get eip address info addresses None allocation ids None region None key None keyid None profile None if type addresses type 'string' addresses [addresses]if type allocation ids type 'string' allocation ids [allocation ids]ret get all eip addresses addresses addresses allocation ids allocation ids region region key key keyid keyid profile profile interesting ['allocation id' 'association id' 'domain' 'instance id' 'network interface id' 'network interface owner id' 'public ip' 'private ip address']return [dict [ x getattr address x for x in interesting] for address in ret]
def write name list fid kind data write string fid kind ' ' join data
def format by pattern numobj number format user defined formats country code numobj country codensn national significant number numobj if not has valid country calling code country code return nsnregion code region code for country code country code metadata Phone Metadata metadata for region or calling code country code region code formatted number U EMPTY STRIN Gformatting pattern choose formatting pattern for number user defined formats nsn if formatting pattern is None formatted number nsnelse num format copy copy number format formatting pattern np formatting rule formatting pattern national prefix formatting ruleif np formatting rule national prefix metadata national prefixif national prefix np formatting rule re sub NP PATTERN national prefix np formatting rule count 1 np formatting rule re sub FG PATTERN unicod '\\\\ 1 ' np formatting rule count 1 num format copy national prefix formatting rule np formatting ruleelse num format copy national prefix formatting rule Noneformatted number format nsn using pattern nsn num format copy number format formatted number maybe append formatted extension numobj metadata number format formatted number formatted number prefix number with country calling code country code number format formatted number return formatted number
def get config root *append from hadoop conf import HDFS CLUSTER Syarn site path HDFS CLUSTERS['default'] HADOOP CONF DIR get return os path abspath os path join yarn site path ' ' *append
def mergetreejinja src dst context for item in os listdir src s os path join src item d os path join dst item if os path isdir s log info ' Copyingfolder{ 0 }to{ 1 }' format s d if os path exists d mergetreejinja s d context else os mkdir d mergetreejinja s d context elif item TEMPLATE FILE NAME d Template d render context log info ' Copyingfile{ 0 }to{ 1 }' format s d with salt utils fopen s 'r' as source file src contents source file read dest contents Template src contents render context with salt utils fopen d 'w' as dest file dest file write dest contents
def hg hook ui repo node None **kwargs seen set paths []if len repo for rev in range repo[node] len repo for file in repo[rev] files file op join repo root file if file in seen or not op exists file continueseen add file paths append file options parse options setup logger options if paths process paths options candidates paths
def convert to http date dt if timezone is naive dt default timezone timezone get default timezone dt timezone make aware dt default timezone utc dt dt astimezone timezone utc epoch dt calendar timegm utc dt utctimetuple return http date epoch dt
def is android return sys platform startswith 'linux' and 'ANDROID PRIVATE' in os environ
def is android return sys platform startswith 'linux' and 'ANDROID PRIVATE' in os environ
def is android return sys platform startswith 'linux' and 'ANDROID PRIVATE' in os environ
def macroexpand tree compiler load macros compiler module name old Nonewhile old tree old treetree macroexpand 1 tree compiler return tree
def sanitize text text valid characters valid chars character map mapped chars invalid character 'X' if isinstance text list return [sanitize text x valid characters valid characters character map character map invalid character invalid character for x in text]if not isinstance text string types text smart str text return sanitize text helper text valid characters valid characters character map character map
def sanitize text text valid characters valid chars character map mapped chars invalid character 'X' if isinstance text list return [sanitize text x valid characters valid characters character map character map invalid character invalid character for x in text]if not isinstance text string types text smart str text return sanitize text helper text valid characters valid characters character map character map
def get request ip resolver module attribute get cms setting 'REQUEST IP RESOLVER' rsplit ' ' 1 try ip resolver module importlib import module module ip resolver getattr ip resolver module attribute except Import Error raise Improperly Configured ' Unabletofindthespecified CMS REQUEST IP RESOLVE Rmodule "{ 0 }" ' format module except Attribute Error raise Improperly Configured ' Unabletofindthespecified CMS REQUEST IP RESOLVE Rfunction "{ 0 }"inmodule"{ 1 }" ' format attribute module return ip resolver
def cons el seq yield el for s in seq yield s
def Get setting name return style[setting name]
def Task Message 1 name id None args kwargs {} callbacks None errbacks None chain None **options from celery import uuidfrom kombu serialization import dumpsid id or uuid message Mock name u' Task Message-{ 0 }' format id message headers {}message payload {u'task' name u'id' id u'args' args u'kwargs' kwargs u'callbacks' callbacks u'errbacks' errbacks}message payload update options message content type message content encoding message body dumps message payload return message
def system data if sys platform startswith 'linux' path '/usr/share/qutebrowser'if not os path exists path path data else path data return path
def keepalived ipv 6 supported br name ha port gw port common utils get related rand device names ['ka-test-' ha router HA DEV PREFIX namespaces INTERNAL DEV PREFIX] gw vip 'fdf 8 f53 b 82 e 4 10 / 64 'expected default gw 'fe 80 f816 1'with ovs lib OVS Bridge br name as br with Keepalived I Pv 6 Test ha port gw port gw vip expected default gw as ka br add port ha port 'type' 'internal' br add port gw port 'type' 'internal' ha dev ip lib IP Device ha port gw dev ip lib IP Device gw port ha dev link set netns ka nsname gw dev link set netns ka nsname ha dev link set up gw dev link set up ka configure ka start keepalived process ka verify ipv 6 address assignment gw dev default gw gw dev route get gateway ip version 6 if default gw default gw default gw['gateway']return expected default gw default gw
def keepalived ipv 6 supported br name ha port gw port common utils get related rand device names ['ka-test-' ha router HA DEV PREFIX namespaces INTERNAL DEV PREFIX] gw vip 'fdf 8 f53 b 82 e 4 10 / 64 'expected default gw 'fe 80 f816 1'with ovs lib OVS Bridge br name as br with Keepalived I Pv 6 Test ha port gw port gw vip expected default gw as ka br add port ha port 'type' 'internal' br add port gw port 'type' 'internal' ha dev ip lib IP Device ha port gw dev ip lib IP Device gw port ha dev link set netns ka nsname gw dev link set netns ka nsname ha dev link set up gw dev link set up ka configure ka start keepalived process ka verify ipv 6 address assignment gw dev default gw gw dev route get gateway ip version 6 if default gw default gw default gw['gateway']return expected default gw default gw
@ ensure existsdef stop name kill False if sd version > 219 if kill action 'terminate'else action 'poweroff'ret machinectl '{ 0 }{ 1 }' format action name else cmd 'systemctlstopsystemd-nspawn@{ 0 }' format name ret salt ['cmd run all'] cmd python shell False if ret['retcode'] 0 context ['retcode'] salt defaults exitcodes EX UNAVAILABL Ereturn Falsereturn True
def Sequence To Conjunction node return Convert Nodes node Query Parser SEQUENCE Query Parser CONJUNCTION 'CONJUNCTION'
def build real request wsgi environ config testing set Up settings DEFAULT SETTINGS includeme config request pyramid request Request wsgi environ request registry config registryreturn request
def strip uri repo splits repo split for idx in range len splits if any splits[idx] startswith x for x in 'http //' 'https //' 'ftp //' splits[idx] splits[idx] rstrip '/' return '' join splits
def strip uri repo splits repo split for idx in range len splits if any splits[idx] startswith x for x in 'http //' 'https //' 'ftp //' splits[idx] splits[idx] rstrip '/' return '' join splits
def get uid path follow symlinks True if not os path exists path return Falseif follow symlinks and sys getwindowsversion major > 6 path resolve symlink path try secdesc win 32 security Get File Security path win 32 security OWNER SECURITY INFORMATION except Memory Error return 'S- 1 - 1 - 0 'except pywinerror as exc if exc winerror 1 or exc winerror 50 return 'S- 1 - 1 - 0 'raiseowner sid secdesc Get Security Descriptor Owner return win 32 security Convert Sid To String Sid owner sid
def any pandas objects terms return any isinstance term value pd core generic Pandas Object for term in terms
def test read hdf multiply open pytest importorskip 'tables' df pd Data Frame {'x' ['a' 'b' 'c' 'd'] 'y' [1 2 3 4]} index [1 0 2 0 3 0 4 0] with tmpfile 'h 5 ' as fn df to hdf fn '/data' format 'table' with pd HDF Store fn mode 'r' dd read hdf fn '/data' chunksize 2 mode 'r'
def get Avatar acc pimg 'avatars/' + acc + ' jpeg' return pimg None if os path exists pimg else '/ Applications/ Skype app' 'fileicon'
def transform index index func if isinstance index Multi Index items [tuple func y for y in x for x in index]return Multi Index from tuples items names index names else items [func x for x in index]return Index items name index name
def md 5 digest instr if six PY 3 b salt utils to bytes instr return hashlib md 5 b hexdigest return hashlib md 5 instr hexdigest
def mongo db registry xml parent data mongodb XML Sub Element xml parent 'org jenkinsci plugins mongodb Mongo Build Wrapper' mongodb set 'plugin' 'mongodb' mapping [ 'name' 'mongodb Name' None 'port' 'port' '' 'data-directory' 'dbpath' '' 'startup-params' 'parameters' '' 'start-timeout' 'start Timeout' 0 ]convert mapping to xml mongodb data mapping fail required True
def mongo db registry xml parent data mongodb XML Sub Element xml parent 'org jenkinsci plugins mongodb Mongo Build Wrapper' mongodb set 'plugin' 'mongodb' mapping [ 'name' 'mongodb Name' None 'port' 'port' '' 'data-directory' 'dbpath' '' 'startup-params' 'parameters' '' 'start-timeout' 'start Timeout' 0 ]convert mapping to xml mongodb data mapping fail required True
def test bootstrap random seed data rs randn 50 seed 42 boots 1 algo bootstrap data random seed seed boots 2 algo bootstrap data random seed seed assert array equal boots 1 boots 2
def test bootstrap random seed data rs randn 50 seed 42 boots 1 algo bootstrap data random seed seed boots 2 algo bootstrap data random seed seed assert array equal boots 1 boots 2
def test bootstrap random seed data rs randn 50 seed 42 boots 1 algo bootstrap data random seed seed boots 2 algo bootstrap data random seed seed assert array equal boots 1 boots 2
@lower builtin types Number Class types Any def number constructor context builder sig args if isinstance sig return type types Array impl context get function np array sig return impl builder args else [val] args[valty] sig argsreturn context cast builder val valty sig return type
def null image return Q Image
def get all params layer unwrap shared True **tags layers get all layers layer params chain from iterable l get params unwrap shared unwrap shared **tags for l in layers return utils unique params
def m quadratic sum A B max it 50 gamma 1 solve discrete lyapunov A B max it return gamma 1
def add Hook registry lookup registry lookup 1 def hook iface ob factory lookup declarations provided By ob iface if factory is None return Noneelse return factory ob interface adapter hooks append hook return hook
def add Hook registry lookup registry lookup 1 def hook iface ob factory lookup declarations provided By ob iface if factory is None return Noneelse return factory ob interface adapter hooks append hook return hook
def add Hook registry lookup registry lookup 1 def hook iface ob factory lookup declarations provided By ob iface if factory is None return Noneelse return factory ob interface adapter hooks append hook return hook
def add Hook registry lookup registry lookup 1 def hook iface ob factory lookup declarations provided By ob iface if factory is None return Noneelse return factory ob interface adapter hooks append hook return hook
def serialize format queryset **options s get serializer format s serialize queryset **options return s getvalue
def dblog msg module return insert 'INSERTINT Olog VALUES ? ? ? ' module timestamp msg rstrip
def refactor with 2to 3 source text fixer names filename u'' from lib 2 to 3 refactor import Refactoring Toolfixers [ u'lib 2 to 3 fixes fix ' + name for name in fixer names]tool Refactoring Tool fixer names fixers explicit fixers from lib 2 to 3 pgen 2 import tokenize as lib 2 to 3 tokenizetry return unicode tool refactor string source text name filename except lib 2 to 3 tokenize Token Error return source text
def refactor with 2to 3 source text fixer names filename u'' from lib 2 to 3 refactor import Refactoring Toolfixers [ u'lib 2 to 3 fixes fix ' + name for name in fixer names]tool Refactoring Tool fixer names fixers explicit fixers from lib 2 to 3 pgen 2 import tokenize as lib 2 to 3 tokenizetry return unicode tool refactor string source text name filename except lib 2 to 3 tokenize Token Error return source text
@event u'task execute started' def load task task if not Simple Persistence class store[task name] Simple Persistence load task name
def find node v cls ignore clients False if v owner is not None and ignore clients or len v clients 1 if isinstance v owner op cls return v ownerelif isinstance v owner op Gpu From Host and v owner inputs[ 0 ] owner is not None and ignore clients or len v owner inputs[ 0 ] clients 1 and isinstance v owner inputs[ 0 ] owner op Host From Gpu return find node v owner inputs[ 0 ] owner inputs[ 0 ] cls else return None
def find node v cls ignore clients False if v owner is not None and ignore clients or len v clients 1 if isinstance v owner op cls return v ownerelif isinstance v owner op Gpu From Host and v owner inputs[ 0 ] owner is not None and ignore clients or len v owner inputs[ 0 ] clients 1 and isinstance v owner inputs[ 0 ] owner op Host From Gpu return find node v owner inputs[ 0 ] owner inputs[ 0 ] cls else return None
def post upgrade name if name not in tracker['post upgrade'] return Falsereturn tracker['post upgrade'][name]
def legalize stage path replacements length extension fragment path sanitize path path replacements if not fragment path bytestring path path path + extension lower pre truncate path pathpath truncate path path length return path path pre truncate path
def make full schema data schema flattened schema flatten schema schema key combinations get all key combinations data flattened schema full schema {}for combination in key combinations sub schema schemafor key in combination[ 2] sub schema sub schema[key]for key value in sub schema iteritems if isinstance value list full schema[ combination + key ] valuereturn full schema
def generate Persistent Job GUID return 'JOB UUID 1 -' + str uuid uuid 1
def slack registry xml parent data logger logging get Logger name plugin info registry get plugin info ' Slack Notification Plugin' plugin ver pkg resources parse version plugin info get 'version' '0 ' if plugin ver > pkg resources parse version '2 0' logger warn 'propertiessectionisnotusedwithpluginversion> 2 0' mapping 'notify-start' 'start Notification' False 'notify-success' 'notify Success' False 'notify-aborted' 'notify Aborted' False 'notify-not-built' 'notify Not Built' False 'notify-unstable' 'notify Unstable' False 'notify-failure' 'notify Failure' False 'notify-back-to-normal' 'notify Back To Normal' False 'notify-repeated-failure' 'notify Repeated Failure' False 'include-test-summary' 'include Test Summary' False 'include-custom-message' 'include Custom Message' False 'custom-message' 'custom Message' '' 'room' 'room' '' slack XML Sub Element xml parent 'jenkins plugins slack Slack Notifier - Slack Job Property' if data get 'include-custom-message' False if not data get 'custom-message' '' raise Missing Attribute Error 'custom-message' helpers convert mapping to xml slack data mapping fail required True
def slack registry xml parent data logger logging get Logger name plugin info registry get plugin info ' Slack Notification Plugin' plugin ver pkg resources parse version plugin info get 'version' '0 ' if plugin ver > pkg resources parse version '2 0' logger warn 'propertiessectionisnotusedwithpluginversion> 2 0' mapping 'notify-start' 'start Notification' False 'notify-success' 'notify Success' False 'notify-aborted' 'notify Aborted' False 'notify-not-built' 'notify Not Built' False 'notify-unstable' 'notify Unstable' False 'notify-failure' 'notify Failure' False 'notify-back-to-normal' 'notify Back To Normal' False 'notify-repeated-failure' 'notify Repeated Failure' False 'include-test-summary' 'include Test Summary' False 'include-custom-message' 'include Custom Message' False 'custom-message' 'custom Message' '' 'room' 'room' '' slack XML Sub Element xml parent 'jenkins plugins slack Slack Notifier - Slack Job Property' if data get 'include-custom-message' False if not data get 'custom-message' '' raise Missing Attribute Error 'custom-message' helpers convert mapping to xml slack data mapping fail required True
def describe api deployments rest Api Id region None key None keyid None profile None try conn get conn region region key key keyid keyid profile profile deployments [] deployments conn get deployments rest Api Id rest Api Id while True if deployments deployments deployments + deployments['items'] if 'position' not in deployments break deployments conn get deployments rest Api Id rest Api Id position deployments['position'] return {'deployments' [ convert datetime str deployment for deployment in deployments]}except Client Error as e return {'error' salt utils boto 3 get error e }
def write metadata tag stream metadata SCRIPT TAG '\x 12 'FLV TAG HEADER LEN 11 if metadata stream write SCRIPT TAG write unsigned int 24 stream len metadata stream write '\x 00 \x 00 \x 00 \x 00 \x 00 \x 00 \x 00 ' stream write metadata write unsigned int stream FLV TAG HEADER LEN + len metadata
def users to remove source event source node new node Notification Subscription apps get model 'osf Notification Subscription' removed users {key [] for key in constants NOTIFICATION TYPES}if source node new node return removed usersold sub Notification Subscription load to subscription key source node id source event old node sub Notification Subscription load to subscription key source node id ' ' join source event split ' ' [ -2 ] if not old sub and not old node sub return removed usersfor notification type in constants NOTIFICATION TYPES users list getattr old sub notification type values list 'guids id' flat True + list getattr old node sub notification type values list 'guids id' flat True subbed removed users[notification type] separate users new node users return removed users
def users to remove source event source node new node Notification Subscription apps get model 'osf Notification Subscription' removed users {key [] for key in constants NOTIFICATION TYPES}if source node new node return removed usersold sub Notification Subscription load to subscription key source node id source event old node sub Notification Subscription load to subscription key source node id ' ' join source event split ' ' [ -2 ] if not old sub and not old node sub return removed usersfor notification type in constants NOTIFICATION TYPES users list getattr old sub notification type values list 'guids id' flat True + list getattr old node sub notification type values list 'guids id' flat True subbed removed users[notification type] separate users new node users return removed users
def users to remove source event source node new node Notification Subscription apps get model 'osf Notification Subscription' removed users {key [] for key in constants NOTIFICATION TYPES}if source node new node return removed usersold sub Notification Subscription load to subscription key source node id source event old node sub Notification Subscription load to subscription key source node id ' ' join source event split ' ' [ -2 ] if not old sub and not old node sub return removed usersfor notification type in constants NOTIFICATION TYPES users list getattr old sub notification type values list 'guids id' flat True + list getattr old node sub notification type values list 'guids id' flat True subbed removed users[notification type] separate users new node users return removed users
def users to remove source event source node new node Notification Subscription apps get model 'osf Notification Subscription' removed users {key [] for key in constants NOTIFICATION TYPES}if source node new node return removed usersold sub Notification Subscription load to subscription key source node id source event old node sub Notification Subscription load to subscription key source node id ' ' join source event split ' ' [ -2 ] if not old sub and not old node sub return removed usersfor notification type in constants NOTIFICATION TYPES users list getattr old sub notification type values list 'guids id' flat True + list getattr old node sub notification type values list 'guids id' flat True subbed removed users[notification type] separate users new node users return removed users
def Get Group By Key entity property names return frozenset prop name prop value Serialize To String for prop in entity property list if prop name in property names
def Get Group By Key entity property names return frozenset prop name prop value Serialize To String for prop in entity property list if prop name in property names
def test predefined string roundtrip with u magnitude zero points enable assert u Unit u S Tmag to string u S Tmag assert u Unit u A Bmag to string u A Bmag assert u Unit u M bol to string u M bol assert u Unit u m bol to string u m bol
def split de casteljau beta t beta np asarray beta beta list [beta]while True beta de casteljau 1 beta t beta list append beta if len beta 1 breakleft beta [beta[ 0 ] for beta in beta list]right beta [beta[ -1 ] for beta in reversed beta list ]return left beta right beta
def split de casteljau beta t beta np asarray beta beta list [beta]while True beta de casteljau 1 beta t beta list append beta if len beta 1 breakleft beta [beta[ 0 ] for beta in beta list]right beta [beta[ -1 ] for beta in reversed beta list ]return left beta right beta
def compare partial dicts source comparee for key value in six iteritems source if key not in comparee or value comparee[key] return Falsereturn True
def json File Log Observer out File record Separator u'\x 1 e' return File Log Observer out File lambda event u'{ 0 }{ 1 }\n' format record Separator event As JSON event
def update cwd rev force False user None cmd ['hg' 'update' '{ 0 }' format rev ]if force cmd append '-C' ret salt ['cmd run all'] cmd cwd cwd runas user python shell False if ret['retcode'] 0 raise Command Execution Error ' Hgcommandfailed {0 }' format ret get 'stderr' ret['stdout'] return ret['stdout']
def computed values d *args **kwargs result {}for k v in six iteritems d if callable v v v *args **kwargs if isinstance v dict v computed values v *args **kwargs result[k] vreturn result
def intersect chunks old chunks new chunks cmo cumdims label old chunks 'o' cmn cumdims label new chunks 'n' sums [sum o for o in old chunks]sums 2 [sum n for n in old chunks]if not sums sums 2 raise Value Error ' Cannotchangedimensionsfromto%r' % sums 2 old to new [ intersect 1d breakpoints cm[ 0 ] cm[ 1 ] for cm in zip cmo cmn ]cross 1 product *old to new cross chain tuple product *cr for cr in cross 1 return cross
def run script pycode if pycode[ 0 ] '\n' pycode pycode[ 1 ]pycode rstrip pycode textwrap dedent pycode globs {}exec pycode in globs globsreturn globs
@pytest mark parametrize u'testframe' totest frames def test gcrs icrs moonish testframe moonish GCRS MOONDIST CART obstime testframe obstime moonicrs moonish transform to ICRS assert 0 97 * u au < moonicrs distance < 1 03 * u au
def prep course for grading course request course field data cache {}course set grading policy course grading policy
def prep course for grading course request course field data cache {}course set grading policy course grading policy
def convert nnn val word '' mod rem val % 100 val // 100 if rem > 0 word to 19 [rem] + ' Hundred' if mod > 0 word + ''if mod > 0 word + convert nn mod return word
@staff member requireddef report request context admin context request context[u'subprojects'] Sub Project objects all return render request u'admin/report html' context
def has unicode fields array dtypes d[ 0 ] for d in array dtype fields values return any d kind 'U' for d in dtypes
def has unicode fields array dtypes d[ 0 ] for d in array dtype fields values return any d kind 'U' for d in dtypes
def test convert np array mixin cols t Q Table mixin cols ta t as array m mixin cols['m']dtype kind m dtype kind if hasattr m 'dtype' else 'O' assert ta['m'] dtype kind dtype kind
def test convert np array mixin cols t Q Table mixin cols ta t as array m mixin cols['m']dtype kind m dtype kind if hasattr m 'dtype' else 'O' assert ta['m'] dtype kind dtype kind
def test convert np array mixin cols t Q Table mixin cols ta t as array m mixin cols['m']dtype kind m dtype kind if hasattr m 'dtype' else 'O' assert ta['m'] dtype kind dtype kind
def test convert np array mixin cols t Q Table mixin cols ta t as array m mixin cols['m']dtype kind m dtype kind if hasattr m 'dtype' else 'O' assert ta['m'] dtype kind dtype kind
def mut ES Log Normal individual c indpb size len individual t c / math sqrt 2 0 * math sqrt size t0 c / math sqrt 2 0 * size n random gauss 0 1 t0 n t0 * n for indx in xrange size if random random < indpb individual strategy[indx] * math exp t0 n + t * random gauss 0 1 individual[indx] + individual strategy[indx] * random gauss 0 1 return individual
def mut ES Log Normal individual c indpb size len individual t c / math sqrt 2 0 * math sqrt size t0 c / math sqrt 2 0 * size n random gauss 0 1 t0 n t0 * n for indx in xrange size if random random < indpb individual strategy[indx] * math exp t0 n + t * random gauss 0 1 individual[indx] + individual strategy[indx] * random gauss 0 1 return individual
def check pillar kwargs if kwargs get 'force' return Trueif ' errors' in pillar return Falsereturn True
def get discovery srid 36 s srs Subreddit by name g live config['discovery srs'] return [sr id 36 for sr in srs itervalues ]
def get discovery srid 36 s srs Subreddit by name g live config['discovery srs'] return [sr id 36 for sr in srs itervalues ]
def get discovery srid 36 s srs Subreddit by name g live config['discovery srs'] return [sr id 36 for sr in srs itervalues ]
def get discovery srid 36 s srs Subreddit by name g live config['discovery srs'] return [sr id 36 for sr in srs itervalues ]
def ignore nanwarnings return Warning Context 'ignore' {'category' Runtime Warning 'module' 'numpy lib nanfunctions'}
def ignore nanwarnings return Warning Context 'ignore' {'category' Runtime Warning 'module' 'numpy lib nanfunctions'}
@click group def cli pass
@click group def cli pass
def b0 indices in bval max b 10 0 import numpy as npbval np loadtxt in bval return np argwhere bval < max b flatten tolist
def clear layers name set keep[' layers name list'] []
def clear layers name set keep[' layers name list'] []
def bfs edges G source reverse False if reverse and G is directed successors G predecessorselse successors G neighborsfor e in generic bfs edges G source successors yield e
def bfs edges G source reverse False if reverse and G is directed successors G predecessorselse successors G neighborsfor e in generic bfs edges G source successors yield e
@printing funcdef select package address jvm package name address families addresses [address for address family in address families for address in address family addressables keys ]if len addresses 0 raise Value Error u' Notargetsexistedin{}toprovide{}' format address families jvm package name elif len addresses > 1 raise Value Error u' Multipletargetsmightbeabletoprovide{} \n{}' format jvm package name u'\n' join str a for a in addresses return addresses[ 0 ]
@printing funcdef select package address jvm package name address families addresses [address for address family in address families for address in address family addressables keys ]if len addresses 0 raise Value Error u' Notargetsexistedin{}toprovide{}' format address families jvm package name elif len addresses > 1 raise Value Error u' Multipletargetsmightbeabletoprovide{} \n{}' format jvm package name u'\n' join str a for a in addresses return addresses[ 0 ]
def populate entry fields entry parser config entry[u'series parser'] copy parser entry[u'series name'] parser nameif u'quality' in entry and entry[u'quality'] parser quality log verbose u' Founddifferentqualityfor%s Was%s overridingwith%s ' % entry[u'title'] entry[u'quality'] parser quality entry[u'quality'] parser qualityentry[u'proper'] parser properentry[u'proper count'] parser proper countentry[u'release group'] parser groupif parser id type u'ep' entry[u'series season'] parser seasonentry[u'series episode'] parser episodeelif parser id type u'date' entry[u'series date'] parser identry[u'series season'] parser id yearelse entry[u'series season'] time gmtime tm yearentry[u'series episodes'] parser episodesentry[u'series id'] parser pack identifierentry[u'series id type'] parser id typeif config if u'path' in config log debug u'setting%scustompathto%s' entry[u'title'] config get u'path' config setdefault u'set' {} update path config[u'path'] if u'set' in config set plugin get plugin by name u'set' set instance modify entry config get u'set'
def get module path module *joins module scrub module return get pymodule path local module app[module] + u' ' + module *joins
def groupsstats 1d y x labelsunique labelmeans np array ndimage mean x labels y index labelsunique labelvars np array ndimage var x labels y index labelsunique return labelmeans labelvars
def groupsstats 1d y x labelsunique labelmeans np array ndimage mean x labels y index labelsunique labelvars np array ndimage var x labels y index labelsunique return labelmeans labelvars
def list aliases ret dict alias target for alias target comment in parse aliases if alias return ret
def list aliases ret dict alias target for alias target comment in parse aliases if alias return ret
def requires special home display name return name '~' and Color HOME SPECIAL DISPLAY
def requires special home display name return name '~' and Color HOME SPECIAL DISPLAY
def add lookup namespace directory package None prepend False templates LOOKUP get namespace if not templates LOOKUP[namespace] templates Dynamic Template Lookup module directory settings MAKO MODULE DIR output encoding 'utf- 8 ' input encoding 'utf- 8 ' default filters ['decode utf 8 '] encoding errors 'replace' if package directory pkg resources resource filename package directory templates add directory directory prepend prepend
def snapshot create request conf request bodyif isinstance conf basestring config json loads conf snapshot Map Snapshot objects create config clean config conf map Map objects get id config['id'] return Http Response num encode snapshot id content type 'text/plain' else return Http Response ' Invalid JSON' content type 'text/plain' status 500
def get dev url backend instance None return 'http //%s' % get dev hostname backend instance
def validate string s try return len s > 0 except Type Error return False
def validate string s try return len s > 0 except Type Error return False
def reset *args **kwargs for pool in all pools try pool force close all except Exception passfor group in groups group clear
def play Movie In Window the Window the File movie Box the Movie load Movie the File the Movie Set Movie Box movie Box the Movie Go To Beginning Of Movie the Movie Movies Task 0 the Movie Start Movie while not the Movie Is Movie Done and not Evt Button the Movie Movies Task 0
def make blob public bucket name blob name storage client storage Client bucket storage client get bucket bucket name blob bucket blob blob name blob make public print ' Blob{}ispubliclyaccessibleat{}' format blob name blob public url
def mixed join iterable sentinel iterator iter iterable first item next iterator sentinel if isinstance first item bytes return first item + '' join iterator return first item + u'' join iterator
def quota usage update resource context old res new res return IMPL quota usage update resource context old res new res
def quota usage update resource context old res new res return IMPL quota usage update resource context old res new res
def build path graph node 1 node 2 path None if path is None path []if node 1 is node 2 return pathpath append node 2 for pred in graph all preds node 2 if pred in path continuebuild path graph node 1 pred path return path
def irc prefix var if isinstance var basestring return u'irc %s' % var lower
@before each scenariodef process requires tags scenario tag re re compile 'requires stub ?P<server>[^ ]+ ' for tag in scenario tags requires tag re match tag if requires if requires group 'server' 'youtube' if not is youtube available YOUTUBE API URLS scenario steps []returnstart stub requires group 'server'
@before each scenariodef process requires tags scenario tag re re compile 'requires stub ?P<server>[^ ]+ ' for tag in scenario tags requires tag re match tag if requires if requires group 'server' 'youtube' if not is youtube available YOUTUBE API URLS scenario steps []returnstart stub requires group 'server'
def execute until empty taskqueue queue 'default' handlers map None task run counts collections defaultdict lambda 0 while taskqueue Get Tasks queue new counts execute all tasks taskqueue queue handlers map for handler cls in new counts task run counts[handler cls] + new counts[handler cls]return task run counts
def support enumeration g return list support enumeration gen g
def upload to mugshot instance filename extension filename split ' ' [ -1 ] lower salt hash generate sha 1 instance pk path userena settings USERENA MUGSHOT PATH % {'username' instance user username 'id' instance user id 'date' instance user date joined 'date now' get datetime now date } return '% path s% hash s % extension s' % {'path' path 'hash' hash[ 10 ] 'extension' extension}
def upload to mugshot instance filename extension filename split ' ' [ -1 ] lower salt hash generate sha 1 instance pk path userena settings USERENA MUGSHOT PATH % {'username' instance user username 'id' instance user id 'date' instance user date joined 'date now' get datetime now date } return '% path s% hash s % extension s' % {'path' path 'hash' hash[ 10 ] 'extension' extension}
def upload to mugshot instance filename extension filename split ' ' [ -1 ] lower salt hash generate sha 1 instance pk path userena settings USERENA MUGSHOT PATH % {'username' instance user username 'id' instance user id 'date' instance user date joined 'date now' get datetime now date } return '% path s% hash s % extension s' % {'path' path 'hash' hash[ 10 ] 'extension' extension}
def exit status message None if isinstance status Value Constant code status valueelse code int status if message if code 0 out stdoutelse out stderrout write message out write '\n' sysexit code
def write weighted edgelist G path comments '#' delimiter '' encoding 'utf- 8 ' write edgelist G path comments comments delimiter delimiter data 'weight' encoding encoding
def absent name **kwargs ret {'name' name 'result' True 'changes' {} 'comment' []}current schedule salt ['schedule list'] show all True return yaml False if name in current schedule if 'test' in opts and opts ['test'] kwargs['test'] Trueresult salt ['schedule delete'] name **kwargs ret['comment'] append result['comment'] else result salt ['schedule delete'] name **kwargs if not result['result'] ret['result'] result['result']ret['comment'] result['comment']return retelse ret['comment'] append ' Removedjob{ 0 }fromschedule' format name else ret['comment'] append ' Job{ 0 }notpresentinschedule' format name ret['comment'] '\n' join ret['comment'] return ret
def get service hass config discovery info None return Free SMS Notification Service config[CONF USERNAME] config[CONF ACCESS TOKEN]
def add Class Advisor callback depth 2 frame sys getframe depth kind module caller locals caller globals get Frame Info frame previous Metaclass caller locals get ' metaclass ' if python 3 default Metaclass caller globals get ' metaclass ' type else default Metaclass caller globals get ' metaclass ' Class Type def advise name bases cdict if ' metaclass ' in cdict del cdict[' metaclass ']if previous Metaclass is None if bases meta determine Metaclass bases else meta default Metaclasselif is Class Advisor previous Metaclass meta previous Metaclasselse meta determine Metaclass bases previous Metaclass new Class meta name bases cdict return callback new Class advise previous Metaclass previous Metaclassadvise callback callbackcaller locals[' metaclass '] advise
def add Class Advisor callback depth 2 frame sys getframe depth kind module caller locals caller globals get Frame Info frame previous Metaclass caller locals get ' metaclass ' if python 3 default Metaclass caller globals get ' metaclass ' type else default Metaclass caller globals get ' metaclass ' Class Type def advise name bases cdict if ' metaclass ' in cdict del cdict[' metaclass ']if previous Metaclass is None if bases meta determine Metaclass bases else meta default Metaclasselif is Class Advisor previous Metaclass meta previous Metaclasselse meta determine Metaclass bases previous Metaclass new Class meta name bases cdict return callback new Class advise previous Metaclass previous Metaclassadvise callback callbackcaller locals[' metaclass '] advise
def add Class Advisor callback depth 2 frame sys getframe depth kind module caller locals caller globals get Frame Info frame previous Metaclass caller locals get ' metaclass ' if python 3 default Metaclass caller globals get ' metaclass ' type else default Metaclass caller globals get ' metaclass ' Class Type def advise name bases cdict if ' metaclass ' in cdict del cdict[' metaclass ']if previous Metaclass is None if bases meta determine Metaclass bases else meta default Metaclasselif is Class Advisor previous Metaclass meta previous Metaclasselse meta determine Metaclass bases previous Metaclass new Class meta name bases cdict return callback new Class advise previous Metaclass previous Metaclassadvise callback callbackcaller locals[' metaclass '] advise
def diagnose try import pynotifyexcept Import Error return u'<p> Error pynotifyisn\'tinstalled On Ubuntu/ Debian installthe<ahref "apt python-notify">python-notify</a>package 'if 'DISPLAY' not in os environ and 'DBUS SESSION BUS ADDRESS' not in os environ return u"<p> Error Environmentvariables DISPLA Yand DBUS SESSION BUS ADDRES Saren'tset libnotifywillonlyworkwhenyourun Sick Beardfromadesktoplogin "try import dbusexcept Import Error passelse try bus dbus Session Bus except dbus D Bus Exception as e return u'<p> Error unabletoconnectto D- Bussessionbus <code>%s</code> <p> Areyourunning Sick Beardinadesktopsession?' % cgi escape e try bus get object 'org freedesktop Notifications' '/org/freedesktop/ Notifications' except dbus D Bus Exception as e return u"<p> Error theredoesn'tseemtobeanotificationdaemonavailable <code>%s</code><p> Tryinstallingnotification-daemonornotify-osd " % cgi escape e return u'<p> Error Unabletosendnotification '
def fancify summary expr seen names clear name dict clear exprs pipe expr values map Expr traverse concat filter lambda x isinstance x Reduction set one summary **dict name expr expr for expr in exprs two dict name expr symbol name expr datashape var * expr dshape for expr in exprs d dict expr two[ name expr ] for expr in exprs three dict name value subs d for name value in zip expr names expr values return one two three
def fancify summary expr seen names clear name dict clear exprs pipe expr values map Expr traverse concat filter lambda x isinstance x Reduction set one summary **dict name expr expr for expr in exprs two dict name expr symbol name expr datashape var * expr dshape for expr in exprs d dict expr two[ name expr ] for expr in exprs three dict name value subs d for name value in zip expr names expr values return one two three
def returns arg function def call and assert arg context None if context is None context {}result function arg context context assert result arg ' Shouldreturntheargumentthatwaspassedtoit unchanged {arg} ' format arg repr arg return resultreturn call and assert
def guess scheme url parts urlparse url if parts scheme return urlif re match '^#startwith \n \n\\ # asingledot \n \n\\ [^/\\ ]+#optionallyfollowedby\n ?#eitheraseconddotorsomecharacters\n ?#optionalmatchof" " " "or" blabla"\n/#atleastone"/"forafilepath \n #andsomethingafterthe"/"\n' parts path flags re VERBOSE return any to uri url else return add http if no scheme url
def guess scheme url parts urlparse url if parts scheme return urlif re match '^#startwith \n \n\\ # asingledot \n \n\\ [^/\\ ]+#optionallyfollowedby\n ?#eitheraseconddotorsomecharacters\n ?#optionalmatchof" " " "or" blabla"\n/#atleastone"/"forafilepath \n #andsomethingafterthe"/"\n' parts path flags re VERBOSE return any to uri url else return add http if no scheme url
def flip codons codon seq target seq a b '' '' for char 1 char 2 in zip codon seq target seq if char 1 '' a + char 1 b + char 2 else a + char 2 b + char 1 return a b
@synchronized IO LOCK def load admin id remove False do pickle True silent False path os path join cfg admin dir get path id logging info ' Loadingdatafor%sfrom%s' id path if not os path exists path logging info '%smissing' path return Nonetry f open path 'rb' if do pickle data c Pickle load f else data f read f close if remove os remove path except if not silent excepterror str sys exc info [0 ] logging error T ' Loading%sfailedwitherror%s' path excepterror logging info ' Traceback ' exc info True return Nonereturn data
@contextfilterdef currency format context value currency None if not currency currency Currency objects get is default True if not currency symbol return unicode value + '' + currency code else return currency symbol + unicode value
@contextfilterdef currency format context value currency None if not currency currency Currency objects get is default True if not currency symbol return unicode value + '' + currency code else return currency symbol + unicode value
@contextfilterdef currency format context value currency None if not currency currency Currency objects get is default True if not currency symbol return unicode value + '' + currency code else return currency symbol + unicode value
@contextfilterdef currency format context value currency None if not currency currency Currency objects get is default True if not currency symbol return unicode value + '' + currency code else return currency symbol + unicode value
def only name hostnames ret {'name' name 'changes' {} 'result' None 'comment' ''}if isinstance hostnames six string types hostnames [hostnames]old '' join salt ['hosts get alias'] name new '' join x strip for x in hostnames if old new ret['comment'] 'I Paddress{ 0 }alreadysetto"{ 1 }"' format name new ret['result'] Truereturn retif opts ['test'] ret['comment'] ' Wouldchange{ 0 }from"{ 1 }"to"{ 2 }"' format name old new return retret['result'] salt ['hosts set host'] name new if not ret['result'] ret['comment'] 'hosts set hostfailedtochange{ 0 }' + 'from"{ 1 }"to"{ 2 }"' format name old new return retret['comment'] 'successfullychanged{ 0 }from"{ 1 }"to"{ 2 }"' format name old new ret['changes'] {name {'old' old 'new' new}}return ret
def apply temporary fixes font is for cros False font name font data font name font weight noto fonts parse weight font name weight number noto fonts WEIGHTS[weight]if is for cros and weight ' Thin' weight number 100 font['OS/ 2 '] us Weight Class weight numbername records font data get name records font family name name records[ 1 ]if family name endswith ' Black' font['head'] mac Style 1 << 0 font['OS/ 2 '] fs Selection 1 << 5 font['OS/ 2 '] fs Selection & ~ 1 << 6
def Language Facet locale ident extra weights {} def score searcher docnum doc searcher stored fields docnum weight extra weights get doc['name'] 1 0 doc language doc['language']if doc language locale ident weight * 2 0elif doc language u'roomaji' weight * 1 4return - weight return whoosh sorting Function Facet score
def Language Facet locale ident extra weights {} def score searcher docnum doc searcher stored fields docnum weight extra weights get doc['name'] 1 0 doc language doc['language']if doc language locale ident weight * 2 0elif doc language u'roomaji' weight * 1 4return - weight return whoosh sorting Function Facet score
def Language Facet locale ident extra weights {} def score searcher docnum doc searcher stored fields docnum weight extra weights get doc['name'] 1 0 doc language doc['language']if doc language locale ident weight * 2 0elif doc language u'roomaji' weight * 1 4return - weight return whoosh sorting Function Facet score
def calc end text start if len text 1 new end start + Position 0 len text[ 0 ] else new end Position start line + len text - 1 len text[ -1 ] return new end
def unwindk z return int np ceil z imag - np pi / 2 * np pi
def peer 2 str addr if isinstance addr I Pv 4 Address res u'tcp 4 {0 } {1 }' format addr host addr port elif HAS IPV 6 and isinstance addr I Pv 6 Address res u'tcp 6 {0 } {1 }' format addr host addr port elif isinstance addr UNIX Address res u'unix {0 }' format addr name elif isinstance addr Pipe Address res u'<pipe>'else res u'? {0 }' format addr return res
def h2 safe headers headers stripped {i lower strip for k v in headers if k 'connection' for i in v split ' ' }stripped add 'connection' return [header for header in headers if header[ 0 ] not in stripped ]
def get position size fd 1 info get console screen buffer info fd return info dw Cursor Position X info dw Cursor Position Y info dw Size X info dw Size Y
def get Fill Of Surroundings nested Rings penultimate Fill Loops fill Of Surroundings []for nested Ring in nested Rings fill Of Surroundings + nested Ring get Fill Loops penultimate Fill Loops return fill Of Surroundings
@pick context manager writerdef instance group update context group uuid values group model query context models Instance Group filter by uuid group uuid first if not group raise exception Instance Group Not Found group uuid group uuid policies values get 'policies' if policies is not None instance group policies add context group id values pop 'policies' set delete True members values get 'members' if members is not None instance group members add context group id values pop 'members' set delete True group update values if policies values['policies'] policiesif members values['members'] members
def which prefix path prefix abspath path while True if isdir join prefix u'conda-meta' return prefixif prefix dirname prefix return Noneprefix dirname prefix
def which prefix path prefix abspath path while True if isdir join prefix u'conda-meta' return prefixif prefix dirname prefix return Noneprefix dirname prefix
def which prefix path prefix abspath path while True if isdir join prefix u'conda-meta' return prefixif prefix dirname prefix return Noneprefix dirname prefix
def create logger common config use daemon threads True ext u' unknown ' import paths None imported modules None stream None logger logging Logger u'powerline' level getattr logging common config[u'log level'] logger set Level level pl Powerline Logger use daemon threads logger ext get module attr gen module attr getter pl common config[u'paths'] set if imported modules is None else imported modules set log handlers common config logger get module attr stream return logger pl get module attr
def convert coord data to dict data coord header data['coord'][ 0 ]coords data['coord'][ 1 ]pct var data['coord'][ 3 ]coords dict {}pct var dict {}coords dict['pcvectornumber'] coord headerfor x in range len coords coords dict[str x + 1 ] coords[ 0 x]pct var dict[str x + 1 ] pct var[x]return coords dict pct var dict
def get max data extent net layer rc is conv if is conv conv size net blobs[layer] data shape[ 2 4]layer slice middle conv size[ 0 ] / 2 conv size[ 0 ] / 2 + 1 conv size[ 1 ] / 2 conv size[ 1 ] / 2 + 1 data slice rc convert region layer 'data' layer slice middle return data slice[ 1 ] - data slice[ 0 ] data slice[ 3 ] - data slice[ 2 ] else return net blobs['data'] data shape[ 2 4]
def get max data extent net layer rc is conv if is conv conv size net blobs[layer] data shape[ 2 4]layer slice middle conv size[ 0 ] / 2 conv size[ 0 ] / 2 + 1 conv size[ 1 ] / 2 conv size[ 1 ] / 2 + 1 data slice rc convert region layer 'data' layer slice middle return data slice[ 1 ] - data slice[ 0 ] data slice[ 3 ] - data slice[ 2 ] else return net blobs['data'] data shape[ 2 4]
def get max data extent net layer rc is conv if is conv conv size net blobs[layer] data shape[ 2 4]layer slice middle conv size[ 0 ] / 2 conv size[ 0 ] / 2 + 1 conv size[ 1 ] / 2 conv size[ 1 ] / 2 + 1 data slice rc convert region layer 'data' layer slice middle return data slice[ 1 ] - data slice[ 0 ] data slice[ 3 ] - data slice[ 2 ] else return net blobs['data'] data shape[ 2 4]
def generic bfs edges G source neighbors None visited {source}queue deque [ source neighbors source ] while queue parent children queue[ 0 ]try child next children if child not in visited yield parent child visited add child queue append child neighbors child except Stop Iteration queue popleft
def generic bfs edges G source neighbors None visited {source}queue deque [ source neighbors source ] while queue parent children queue[ 0 ]try child next children if child not in visited yield parent child visited add child queue append child neighbors child except Stop Iteration queue popleft
def cleaned Up Classification Network original network num categories network caffe pb 2 Net Parameter network Copy From original network for i layer in enumerate network layer if ' Data' in layer type assert layer type in [' Data' 'HDF 5 Data'] ' Unsupporteddatalayertype%s' % layer type elif layer type ' Input' del network layer[i]elif layer type ' Accuracy' if layer accuracy param Has Field 'top k' and layer accuracy param top k > num categories del network layer[i]elif layer type ' Inner Product' if not layer inner product param Has Field 'num output' layer inner product param num output num categoriesreturn network
def cleaned Up Classification Network original network num categories network caffe pb 2 Net Parameter network Copy From original network for i layer in enumerate network layer if ' Data' in layer type assert layer type in [' Data' 'HDF 5 Data'] ' Unsupporteddatalayertype%s' % layer type elif layer type ' Input' del network layer[i]elif layer type ' Accuracy' if layer accuracy param Has Field 'top k' and layer accuracy param top k > num categories del network layer[i]elif layer type ' Inner Product' if not layer inner product param Has Field 'num output' layer inner product param num output num categoriesreturn network
def utcnow now datetime datetime utcnow now now replace tzinfo Time Zone Info utc return now
def utcnow now datetime datetime utcnow now now replace tzinfo Time Zone Info utc return now
def package pkg name update False if not is installed pkg name install pkg name update update
def notify about volume swap context instance host action phase old volume id new volume id exception None ips get instance ips instance flavor flavor notification Flavor Payload instance flavor fault priority get fault and priority from exc exception payload instance notification Instance Action Volume Swap Payload instance instance fault fault ip addresses ips flavor flavor old volume id old volume id new volume id new volume id instance notification Instance Action Volume Swap Notification context context priority priority publisher notification base Notification Publisher context context host host binary 'nova-compute' event type notification base Event Type object 'instance' action action phase phase payload payload emit context
def setup standalone signals instance window instance get widget 'config-window' window connect 'delete-event' gtk main quit button instance get widget 'button 1 ' button handler block by func instance gtk widget destroy button connect 'clicked' gtk main quit return instance
def setup standalone signals instance window instance get widget 'config-window' window connect 'delete-event' gtk main quit button instance get widget 'button 1 ' button handler block by func instance gtk widget destroy button connect 'clicked' gtk main quit return instance
def is course blocked request redeemed registration codes course key blocked Falsefor redeemed registration in redeemed registration codes if redeemed registration invoice item if not redeemed registration invoice item invoice is valid blocked True Optout objects get or create user request user course id course key log info u' User%s %s optedoutofreceivingemailsfromcourse%s' request user username request user email course key track views server track request 'change-email 1 -settings' {'receive emails' 'no' 'course' course key to deprecated string } page 'dashboard' breakreturn blocked
def libvlc audio output list get p instance f Cfunctions get 'libvlc audio output list get' None or Cfunction 'libvlc audio output list get' 1 None ctypes POINTER Audio Output Instance return f p instance
@sopel module require privmsg@sopel module require admin@sopel module commands u'mode' @sopel module priority u'low' def mode bot trigger mode trigger group 3 bot write u'MODE' bot nick + u'' + mode
def get price info shop customer product quantity pricing mod get pricing module pricing ctx pricing mod get context from data shop shop customer customer or Anonymous Contact return product get price info pricing ctx quantity quantity
def libvlc video get cursor p mi num f Cfunctions get 'libvlc video get cursor' None or Cfunction 'libvlc video get cursor' 1 1 2 2 None ctypes c int Media Player ctypes c uint ctypes POINTER ctypes c int ctypes POINTER ctypes c int return f p mi num
def libvlc video get cursor p mi num f Cfunctions get 'libvlc video get cursor' None or Cfunction 'libvlc video get cursor' 1 1 2 2 None ctypes c int Media Player ctypes c uint ctypes POINTER ctypes c int ctypes POINTER ctypes c int return f p mi num
@auth s3 requires membership 1 def clean from subprocess import check callinstance settings get instance name try check call [ 'sudo/usr/local/bin/clean%s' % instance ] shell True except import syserror sys exc info [1 ]status current xml json message False 400 ' Scriptcannotberun %s' % error raise HTTP 400 body status
@auth s3 requires membership 1 def clean from subprocess import check callinstance settings get instance name try check call [ 'sudo/usr/local/bin/clean%s' % instance ] shell True except import syserror sys exc info [1 ]status current xml json message False 400 ' Scriptcannotberun %s' % error raise HTTP 400 body status
def emr ssl host for region region region fix region region if not region return EMR REGIONLESS ENDPOIN Telse return EMR REGION SSL HOST % {'region' region}
def emr ssl host for region region region fix region region if not region return EMR REGIONLESS ENDPOIN Telse return EMR REGION SSL HOST % {'region' region}
def list sandbox name results 15 start 0 result util callm '%s/%s' % 'sandbox' 'list' {'sandbox' sandbox name 'results' results 'start' start} assets result['response']['assets']start result['response']['start']total result['response']['total']return Result List assets start total
def xml readlines source encoding get xml encoding source with data get readable fileobj source encoding encoding as input input seek 0 xml lines input readlines return xml lines
def ulps check expected got ulps 20 ulps error to ulps got - to ulps expected if abs ulps error < ulps return Nonereturn 'error {}ulps permittederror {}ulps' format ulps error ulps
@check job permissiondef set job priority request job priority request GET get 'priority' jid request jt thriftjobid from string job job Id request jt set job priority jid Thrift Job Priority NAMES TO VALUES[priority] return render json {}
def volume delete name profile None conn auth profile return conn volume delete name
def replace new vars expr id to new var if expr type lo VARIABLE and expr data in id to new var return id to new var[expr data]else new args []for arg in expr args new args append replace new vars arg id to new var return lo Lin Op expr type expr size new args expr data
def delete ref refname oldvalue None assert refname startswith 'refs/' oldvalue [] if not oldvalue else [oldvalue] p subprocess Popen ['git' 'update-ref' '-d' refname] + oldvalue preexec fn gitenv git wait 'gitupdate-ref' p
def Convert To Cygpath path if sys platform 'cygwin' p subprocess Popen ['cygpath' path] stdout subprocess PIPE path p communicate [0 ] strip return path
def present name provider ret {'name' name 'result' True 'comment' '' 'changes' {}}is present list salt ['cloud action'] 'queues exists' provider provider name name [provider] values [0 ]if not is present if opts ['test'] msg ' Rackspacequeue{ 0 }issettobecreated ' format name ret['comment'] msgret['result'] Nonereturn retcreated salt ['cloud action'] 'queues create' provider provider name name if created queue salt ['cloud action'] 'queues show' provider provider name name ret['changes']['old'] {}ret['changes']['new'] {'queue' queue}else ret['result'] Falseret['comment'] ' Failedtocreate{ 0 } Rackspacequeue ' format name return retelse ret['comment'] '{ 0 }present ' format name return ret
def write files output root contents generated suffix map None ensure dir output root to delete set file basename for file in output root files - set contents keys if generated suffix map for output file in contents keys for suffix generated suffix in generated suffix map items if output file endswith suffix to delete discard output file replace suffix generated suffix for extra file in to delete output root / extra file remove p for filename file content in contents iteritems output file output root / filename not file not output file isfile write file not file or output file read md 5 hashlib md 5 file content digest if write file LOG debug ' Writing%s' output file output file write bytes file content else LOG debug '%sunchanged skipping' output file
def write files output root contents generated suffix map None ensure dir output root to delete set file basename for file in output root files - set contents keys if generated suffix map for output file in contents keys for suffix generated suffix in generated suffix map items if output file endswith suffix to delete discard output file replace suffix generated suffix for extra file in to delete output root / extra file remove p for filename file content in contents iteritems output file output root / filename not file not output file isfile write file not file or output file read md 5 hashlib md 5 file content digest if write file LOG debug ' Writing%s' output file output file write bytes file content else LOG debug '%sunchanged skipping' output file
def concatenate tensors axis -1 if axis < 0 dims ndim tensors[ 0 ] if dims axis axis % dims else axis 0if py all [is sparse x for x in tensors] return tf sparse concat axis tensors else try return tf concat v2 [to dense x for x in tensors] axis except Attribute Error return tf concat axis [to dense x for x in tensors]
def pos match pos tuple if pos tuple[ 0 ] 's' pos tuple 'a' pos tuple[ 1 ] pos tuple[ 2 ] for n x in enumerate pos tuple if x is not None breakfor pt in pos tuples if pt[n] pos tuple[n] return ptreturn None
def set partition ssli part []for s in sorted list set ssli key len [ -1 ] s set s copy if not any set s intersection set t for t in part part append s missing list set i for ll in ssli for i in ll - set i for ll in part for i in ll return part missing
def assert application calculated changes case node state node config nonmanifest datasets expected changes additional node states frozenset additional node config frozenset deployer Application Node Deployer hostname node state hostname node uuid node state uuid docker client Fake Docker Client return assert calculated changes for deployer case deployer node state node config nonmanifest datasets additional node states additional node config expected changes Node Local State node state node state
def default missing value for dtype dtype try return FILLVALUE DEFAULTS[dtype]except Key Error raise No Default Missing Value ' Nodefaultvalueregisteredfordtype%s ' % dtype
@lru cache def get firebase db url regex re compile '\\bdatabase URL\\b *?["\\\'] [^"\\\']+ ' cwd os path dirname file try with open os path join cwd 'templates' FIREBASE CONFIG as f url next regex search line for line in f if regex search line except Stop Iteration raise Value Error ' Errorparsingdatabase URL Pleasecopy Firebasewebsnippetintotemplates/{}' format FIREBASE CONFIG return url group 1
def render alert content alert type None dismissable True button u''if not alert type alert type u'info'css classes [u'alert' u'alert-' + text value alert type ]if dismissable css classes append u'alert-dismissable' button u'<buttontype "button"class "close"' + u'data-dismiss "alert"aria-hidden "true">&times </button>' button placeholder u' BUTTON 'return mark safe render tag u'div' attrs {u'class' u'' join css classes } content button placeholder + text value content replace button placeholder button
def last update time STAMP '/var/lib/apt/periodic/fabtools-update-success-stamp'if not is file STAMP return -1 return getmtime STAMP
def U func numpy x1 y1 x2 y2 if x1 x2 and y1 y2 return 0 0r 2 x2 - x1 ** 2 + y2 - y1 ** 2 return r 2 * np log r 2
def U func numpy x1 y1 x2 y2 if x1 x2 and y1 y2 return 0 0r 2 x2 - x1 ** 2 + y2 - y1 ** 2 return r 2 * np log r 2
def get locales by visit start date end date cache key 'locales sorted by visits {start} {end}' format start start date end end date sorted locales cache get cache key if sorted locales is None try results visitors by locale start date end date locales and visits results items sorted locales list reversed sorted locales and visits key lambda x x[ 1 ] cache add cache key sorted locales CACHE TIMEOUT except Google API Error Oauth 2 Error Open SSL Error log exception ' Somethingwentwronggettingvisitorsbylocalefrom Google Analytics Nobodygota 500 though ' sorted locales [ l 0 for l in settings SUMO LANGUAGES]return sorted locales
def multisig type wallet type match re match ' \\d+ of \\d+ ' wallet type if match match [int x for x in match group 1 2 ]return match
def multisig type wallet type match re match ' \\d+ of \\d+ ' wallet type if match match [int x for x in match group 1 2 ]return match
def openshift img tagger registry xml parent data osb XML Sub Element xml parent 'com openshift jenkins plugins pipeline Open Shift Image Tagger' mapping [ 'api-url' 'api URL' 'https //openshift default svc cluster local' 'test-tag' 'test Tag' 'origin-nodejs-sample latest' 'prod-tag' 'prod Tag' 'origin-nodejs-sample prod' 'namespace' 'namespace' 'test' 'auth-token' 'auth Token' '' 'verbose' 'verbose' False ]convert mapping to xml osb data mapping fail required True
def openshift img tagger registry xml parent data osb XML Sub Element xml parent 'com openshift jenkins plugins pipeline Open Shift Image Tagger' mapping [ 'api-url' 'api URL' 'https //openshift default svc cluster local' 'test-tag' 'test Tag' 'origin-nodejs-sample latest' 'prod-tag' 'prod Tag' 'origin-nodejs-sample prod' 'namespace' 'namespace' 'test' 'auth-token' 'auth Token' '' 'verbose' 'verbose' False ]convert mapping to xml osb data mapping fail required True
def openshift img tagger registry xml parent data osb XML Sub Element xml parent 'com openshift jenkins plugins pipeline Open Shift Image Tagger' mapping [ 'api-url' 'api URL' 'https //openshift default svc cluster local' 'test-tag' 'test Tag' 'origin-nodejs-sample latest' 'prod-tag' 'prod Tag' 'origin-nodejs-sample prod' 'namespace' 'namespace' 'test' 'auth-token' 'auth Token' '' 'verbose' 'verbose' False ]convert mapping to xml osb data mapping fail required True
def install python python runas None python re sub '^python-' '' python env Noneenv list []if grains ['os'] in ' Free BSD' ' Net BSD' ' Open BSD' env list append 'MAKE gmake' if salt ['config option'] 'pyenv build env' env list append salt ['config option'] 'pyenv build env' if env list env '' join env list ret {}ret pyenv exec 'install' python env env runas runas ret ret if ret['retcode'] 0 rehash runas runas return ret['stderr']else uninstall python python runas runas return False
def select filters filters level return [f for f in filters if f max debug level is None or cmp debug levels level f max debug level < 0 ]
def select filters filters level return [f for f in filters if f max debug level is None or cmp debug levels level f max debug level < 0 ]
def make X Axis xaxis title xaxis range xaxis graph objs X Axis title xaxis title range xaxis range showgrid False zeroline False showline False mirror False ticks '' showticklabels False return xaxis
def get selections with settings hide 'stdout' res run as root 'dpkg--get-selections' selections dict for line in res splitlines package status line split selections setdefault status list append package return selections
def header elements fieldname fieldvalue if not fieldvalue return []result []for element in fieldvalue split ' ' if fieldname startswith ' Accept' or fieldname 'TE' hv Accept Element from str element else hv Header Element from str element result append hv result sort result reverse return result
def header elements fieldname fieldvalue if not fieldvalue return []result []for element in fieldvalue split ' ' if fieldname startswith ' Accept' or fieldname 'TE' hv Accept Element from str element else hv Header Element from str element result append hv result sort result reverse return result
@cwd at ' ' def test completion docstring def docstr src result c Script src completions [0 ]assert c docstring raw True fast False cleandoc result c Script 'importjedi\njed' completions [0 ]assert c docstring fast False cleandoc jedi doc docstr 'importjedi\njedi Scr' cleandoc Script doc docstr 'abcd 3 abcd' '' docstr '"hello"\nabcd 3\nabcd' 'hello' docstr '"hello"\nabcd 3 abcd' 'hello' docstr '"hello" 0\nabcd 3\nabcd' ''
@intercept errors User API Internal Error ignore errors [ User API Request Error] def get user preferences requesting user username None existing user get authorized user requesting user username allow staff True context {'request' get request or stub }user serializer User Serializer existing user context context return user serializer data['preferences']
def create account caller text ' Enteryournewaccountname 'options {'key' ' default' 'goto' 'create username'} return text options
@cacheitdef expand delta expr index if not expr is Mul return exprdelta Nonefunc Addterms [S 1 ]for h in expr args if delta is None and h is Add and has simple delta h index delta Truefunc h functerms [ terms[ 0 ] * t for t in h args]else terms [ t * h for t in terms]return func *terms
@cacheitdef expand delta expr index if not expr is Mul return exprdelta Nonefunc Addterms [S 1 ]for h in expr args if delta is None and h is Add and has simple delta h index delta Truefunc h functerms [ terms[ 0 ] * t for t in h args]else terms [ t * h for t in terms]return func *terms
def get Centers From Loop Direction is Widdershins loop radius centers get Centers From Loop loop radius return get Loops From Loops Direction is Widdershins centers
@lazyobjectdef Set Console Cursor Position sccp ctypes windll kernel 32 Set Console Cursor Positionsccp errcheck check zerosccp argtypes HANDLE COORD sccp restype BOO Lreturn sccp
@lazyobjectdef Set Console Cursor Position sccp ctypes windll kernel 32 Set Console Cursor Positionsccp errcheck check zerosccp argtypes HANDLE COORD sccp restype BOO Lreturn sccp
def get languages for locale locale locale locale replace '-' ' ' if locale not in AVAILABLE LANGUAGES try local lang babel Locale locale languagesexcept babel Unknown Locale Error return AVAILABLE LANGUAGES['en']diff [lc for lc in REFERENCE LANGUAGE keys if lc not in local lang keys ]for lc in diff local lang[lc] REFERENCE LANGUAGE[lc]for lang in REMOVE LANGS if lang in local lang local lang pop lang local lang sorted [ key value capitalize for key value in local lang items ] key lambda language language[ 1 ] AVAILABLE LANGUAGES[locale] local langreturn AVAILABLE LANGUAGES[locale]
def get languages for locale locale locale locale replace '-' ' ' if locale not in AVAILABLE LANGUAGES try local lang babel Locale locale languagesexcept babel Unknown Locale Error return AVAILABLE LANGUAGES['en']diff [lc for lc in REFERENCE LANGUAGE keys if lc not in local lang keys ]for lc in diff local lang[lc] REFERENCE LANGUAGE[lc]for lang in REMOVE LANGS if lang in local lang local lang pop lang local lang sorted [ key value capitalize for key value in local lang items ] key lambda language language[ 1 ] AVAILABLE LANGUAGES[locale] local langreturn AVAILABLE LANGUAGES[locale]
def cast other binary op def cast op self other ' Awrappedbinaryoperatorthatcanhandlenon- Expressionarguments \n'other self cast to const other return binary op self other return cast op
def rush value True realtime False if import Ctypes Failed return Falseif value sched Params Sched Params sched Params sched priority c sched get priority max SCHED RR err c sched setscheduler 0 SCHED RR ctypes byref sched Params if err -1 logging warning warn Max % sys executable sys executable else sched Params Sched Params sched Params sched priority c sched get priority min SCHED NORMAL err c sched setscheduler 0 SCHED NORMAL ctypes byref sched Params if err -1 logging warning warn Normal % sys executable return True
def rush value True realtime False if import Ctypes Failed return Falseif value sched Params Sched Params sched Params sched priority c sched get priority max SCHED RR err c sched setscheduler 0 SCHED RR ctypes byref sched Params if err -1 logging warning warn Max % sys executable sys executable else sched Params Sched Params sched Params sched priority c sched get priority min SCHED NORMAL err c sched setscheduler 0 SCHED NORMAL ctypes byref sched Params if err -1 logging warning warn Normal % sys executable return True
def rush value True realtime False if import Ctypes Failed return Falseif value sched Params Sched Params sched Params sched priority c sched get priority max SCHED RR err c sched setscheduler 0 SCHED RR ctypes byref sched Params if err -1 logging warning warn Max % sys executable sys executable else sched Params Sched Params sched Params sched priority c sched get priority min SCHED NORMAL err c sched setscheduler 0 SCHED NORMAL ctypes byref sched Params if err -1 logging warning warn Normal % sys executable return True
def rush value True realtime False if import Ctypes Failed return Falseif value sched Params Sched Params sched Params sched priority c sched get priority max SCHED RR err c sched setscheduler 0 SCHED RR ctypes byref sched Params if err -1 logging warning warn Max % sys executable sys executable else sched Params Sched Params sched Params sched priority c sched get priority min SCHED NORMAL err c sched setscheduler 0 SCHED NORMAL ctypes byref sched Params if err -1 logging warning warn Normal % sys executable return True
def validate cert path name cmd " Test- Path- Path'{ 0 }'" format name if not ast literal eval cmd run cmd cmd raise Salt Invocation Error ' Invalidpathspecified {0 }' format name
def get boolean data position dummy 0 dummy 1 dummy 2 end position + 1 boolean byte data[position end]if boolean byte '\x 00 ' return False end elif boolean byte '\x 01 ' return True end raise Invalid BSON 'invalidbooleanvalue %r' % boolean byte
def assert not match pattern string msg None assert none re search pattern string msg
def assert not match pattern string msg None assert none re search pattern string msg
def assert not match pattern string msg None assert none re search pattern string msg
def escape x if "'" not in x return "'" + x + "'" s '"'for c in x if c in '\\$"`' s s + '\\' s s + c s s + '"' return s
def bingify s return "'{}'" format s
def bingify s return "'{}'" format s
def create blockdevice id for test dataset id return 'blockdevice-' + unicode dataset id
def create blockdevice id for test dataset id return 'blockdevice-' + unicode dataset id
def create blockdevice id for test dataset id return 'blockdevice-' + unicode dataset id
def create blockdevice id for test dataset id return 'blockdevice-' + unicode dataset id
def call User acc try get User Name except skype Error return skype 'CALL' + acc
def get cursor offset fd 1 csbi get console screen buffer info fd fd pos csbi dw Cursor Positionsize csbi dw Sizereturn pos Y * size X + pos X
def Find Unix Socket for path in POTENTIAL SOCKET LOCATIONS if os path exists path return path
def Find Unix Socket for path in POTENTIAL SOCKET LOCATIONS if os path exists path return path
def get defaults func code func code pos count code co argcountarg names code co varnamesarg names arg names[ pos count]defaults func defaults or kwdefaults func kwdefaults res dict kwdefaults if kwdefaults else {} pos offset pos count - len defaults for name value in zip arg names[pos offset ] defaults assert name not in res res[name] valuereturn res
def Parse Nolint Suppressions filename raw line linenum error matched Search '\\b NOLINT NEXTLINE ?\\b \\ [^ ]+\\ ?' raw line if matched if matched group 1 suppressed line linenum + 1 else suppressed line linenumcategory matched group 2 if category in None ' * ' error suppressions setdefault None set add suppressed line elif category startswith ' ' and category endswith ' ' category category[ 1 -1 ]if category in ERROR CATEGORIES error suppressions setdefault category set add suppressed line elif category not in LEGACY ERROR CATEGORIES error filename linenum 'readability/nolint' 5 ' Unknown NOLIN Terrorcategory %s' % category
def get int len int power 1while True if int 0 return 0elif int < 10 ** power return powerpower + 1
def eval Units unit Str pass
def get Description Multiply lines activate Multiply String get Setting String lines 'multiply' ' Activate Multiply' if activate Multiply String None or activate Multiply String ' False' return ''columns String get Setting String lines 'multiply' ' Numberof Columns' rows String get Setting String lines 'multiply' ' Numberof Rows' if columns String '1 ' and rows String '1 ' return ''return ' %scx%sr' % columns String rows String
def available distributions flocker source path return set path basename for path in flocker source path descendant BUILD TARGETS SEGMENTS children if path isdir and path child ' Dockerfile' exists
def get gmond format val tp type val name if tp 'int' return 'uint' '%u' elif tp 'float' return 'float' '% 4f' elif tp 'string' return 'string' '%u' else return 'string' '%u'
@yield oncedef icollect bears bear dir glob bear globs kinds log printer for bear dir dir glob in filter lambda x os path isdir x[ 0 ] icollect bear dir glob bear dir glob escape bear dir for bear glob in bear globs for matching file in iglob os path join bear dir bear glob + ' py' try for bear in import bears matching file kinds yield bear bear glob except pkg resources Version Conflict as exception log printer log exception ' Unabletocollectbearsfrom{file}becausethereisaconflictwiththeversionofadependencyyouhaveinstalled Thismayberesolvedbycreatingaseparatevirtualenvironmentforcoalaorrunning`pipinstall"{pkg}"` Beawarethatthelattersolutionmightbreakotherpythonpackagesthatdependonthecurrentlyinstalledversion ' format file matching file pkg exception req exception log level LOG LEVEL WARNING except Base Exception as exception log printer log exception ' Unabletocollectbearsfrom{file} Probablythefileismalformedorthemodulecoderaisesanexception ' format file matching file exception log level LOG LEVEL WARNING
def create diffs for sets current path set a set b resulting diffs pvector [] evolver for item in set a difference set b resulting diffs append Remove path current path item item for item in set b difference set a resulting diffs append Add path current path item item return resulting diffs persistent
def validate footer timestamp vdi path check cmd 'vhd-utilcheck-n% vdi path s-p' % locals check proc make subprocess check cmd stdout True stderr True out err finish subprocess check proc check cmd ok exit codes [0 22 ] first line out splitlines [0 ] strip if 'primaryfooterinvalid' in first line raise Exception "VDI'% vdi path s'hastimestampinthefuture ensuresourceanddestinationhostmachineshavetimesetcorrectly" % locals elif check proc returncode 0 raise Exception " Unexpectedoutput'% out s'fromvhd-util" % locals
def validate footer timestamp vdi path check cmd 'vhd-utilcheck-n% vdi path s-p' % locals check proc make subprocess check cmd stdout True stderr True out err finish subprocess check proc check cmd ok exit codes [0 22 ] first line out splitlines [0 ] strip if 'primaryfooterinvalid' in first line raise Exception "VDI'% vdi path s'hastimestampinthefuture ensuresourceanddestinationhostmachineshavetimesetcorrectly" % locals elif check proc returncode 0 raise Exception " Unexpectedoutput'% out s'fromvhd-util" % locals
def validate footer timestamp vdi path check cmd 'vhd-utilcheck-n% vdi path s-p' % locals check proc make subprocess check cmd stdout True stderr True out err finish subprocess check proc check cmd ok exit codes [0 22 ] first line out splitlines [0 ] strip if 'primaryfooterinvalid' in first line raise Exception "VDI'% vdi path s'hastimestampinthefuture ensuresourceanddestinationhostmachineshavetimesetcorrectly" % locals elif check proc returncode 0 raise Exception " Unexpectedoutput'% out s'fromvhd-util" % locals
def to text value if value < 0 or value > 65535 raise Value Error 'classmustbebetween> 0and< 65535 ' text by value get value if text is None text 'CLASS' + `value` return text
def count params layer **tags params get all params layer **tags shapes [p get value shape for p in params]counts [np prod shape for shape in shapes]return sum counts
def check builtin matches remote download url True builtin registry Earth Location get site registry force builtin True dl registry Earth Location get site registry force download download url in dl {}matches {}for name in builtin registry names in dl[name] name in dl registry if in dl[name] matches[name] quantity allclose builtin registry[name] dl registry[name] else matches[name] Falseif not all matches values print u' Inbuiltinregistrybutnotindownload ' for name in in dl if not in dl[name] print u'' name print u' Inbothbutnotthesamevalue ' for name in matches if not matches[name] and in dl[name] print u'' name u'builtin ' builtin registry[name] u'download ' dl registry[name] assert False u" Builtinanddownloadregistryaren'tconsistent-failuresprintedtostdout"
def get fun fun conn mdb get conn ret None ret {}rdata mdb salt Returns find one {'fun' fun} {' id' 0} if rdata ret rdatareturn ret
def get fun fun conn mdb get conn ret None ret {}rdata mdb salt Returns find one {'fun' fun} {' id' 0} if rdata ret rdatareturn ret
def row by value idl table column match default NO DEFAULT tab idl tables[table]for r in tab rows values if getattr r column match return rif default is not NO DEFAULT return defaultraise Row Not Found table table col column match match
def close *args if len args 0 fig Manager pylab helpers Gcf get active if fig Manager is None returnelse fig Manager canvas mpl disconnect fig Manager cidgcf pylab helpers Gcf destroy fig Manager num elif len args 1 arg args[ 0 ]if arg 'all' for manager in pylab helpers Gcf get all fig managers manager canvas mpl disconnect manager cidgcf pylab helpers Gcf destroy manager num elif isinstance arg int pylab helpers Gcf destroy arg elif isinstance arg Figure for manager in pylab helpers Gcf get all fig managers if manager canvas figure arg manager canvas mpl disconnect manager cidgcf pylab helpers Gcf destroy manager num else raise Type Error ' Unrecognizedargumenttype%stoclose' % type arg else raise Type Error 'closetakes 0 or 1 arguments'
def set hsa kernel fn mod fn modulefn calling convention CC SPIR KERNE Locl kernels mod get or insert named metadata 'opencl kernels' ocl kernels add lc Meta Data get mod [fn gen arg addrspace md fn gen arg access qual md fn gen arg type fn gen arg type qual fn gen arg base type fn ] make constant lambda x lc Constant int lc Type int x spir version constant [make constant x for x in SPIR VERSION]spir version mod get or insert named metadata 'opencl spir version' if not spir version operands spir version add lc Meta Data get mod spir version constant ocl version mod get or insert named metadata 'opencl ocl version' if not ocl version operands ocl version add lc Meta Data get mod spir version constant
def correlation row generator bt pmf category data array [i for i in bt iter data axis 'observation' ] try cat vect array [pmf[s][category] for s in bt ids ] dtype float return row cat vect for row in data except Value Error raise Value Error " Mappingfilecategorycontaineddatathatcouldn't" + "beconvertedtofloat Can'tcontinue "
def test cache clear activated config stub tmpdir config stub data {'storage' {'cache-size' 1024 } 'general' {'private-browsing' False}}disk cache cache Disk Cache str tmpdir assert disk cache cache Size 0 preload cache disk cache assert disk cache cache Size 0 disk cache clear assert disk cache cache Size 0
@pytest mark skipif 'not HAS PATHLIB' def test votable path object fpath pathlib Path get pkg data filename 'data/names xml' table parse fpath get first table to table assert len table 1 assert int table[ 0 ][ 3 ] 266
def metric init params global descriptorsd 1 {'name' 'scribe overall messages per second' 'call back' Get Overall Messages Per Second 'time max' 90 'value type' 'float' 'units' 'msg/sec' 'slope' 'both' 'format' '%f' 'description' ' Averagenumberofmessagessentpersecond' 'groups' 'scribe'}descriptors [d 1 ]return descriptors
def pull repository repo repository clone url ctx rev commands pull get configured ui repo source repository clone url rev [ctx rev]
def outparam key type None return Bind Parameter key None type type unique False isoutparam True
def env script registry xml parent data el XML Sub Element xml parent 'com lookout jenkins Environment Script' XML Sub Element el 'script' text data get 'script-content' '' valid script types {'unix-script' 'unix Script' 'power-shell' 'power Shell' 'batch-script' 'batch Script'}script type data get 'script-type' 'unix-script' if script type not in valid script types raise Invalid Attribute Error 'script-type' script type valid script types XML Sub Element el 'script Type' text valid script types[script type]only on parent str data get 'only-run-on-parent' False lower XML Sub Element el 'only Run On Parent' text only on parent
def wait ready prefix popen prefix emulator ready Falsewhile not emulator ready emulator ready popen stderr readline startswith prefix
def wait ready prefix popen prefix emulator ready Falsewhile not emulator ready emulator ready popen stderr readline startswith prefix
def get associations context qos specs id try types objects Volume Type List get all types for qos context qos specs id except db exc DB Error LOG exception LE 'D Berror ' msg ' Failedtogetallassociationsofqosspecs%s' % qos specs id LOG warning msg raise exception Cinder Exception message msg result []for vol type in types result append {'association type' 'volume type' 'name' vol type name 'id' vol type id} return result
def compiler type dist Distribution dist parse config files cmd dist get command obj 'build' cmd ensure finalized compiler new compiler compiler cmd compiler return compiler compiler type
def Calculate Variables default variables params generator flags params get 'generator flags' {} msvs version MSVS Version Select Visual Studio Version generator flags get 'msvs version' 'auto' params['msvs version'] msvs versiondefault variables['MSVS VERSION'] msvs version Short Name if os environ get 'PROCESSOR ARCHITECTURE' '' find '64 ' > 0 or os environ get 'PROCESSOR ARCHITEW 6432 ' '' find '64 ' > 0 default variables['MSVS OS BITS'] 64 else default variables['MSVS OS BITS'] 32 if gyp common Get Flavor params 'ninja' default variables['SHARED INTERMEDIATE DIR'] '$ Out Dir gen'
def Calculate Variables default variables params generator flags params get 'generator flags' {} msvs version MSVS Version Select Visual Studio Version generator flags get 'msvs version' 'auto' params['msvs version'] msvs versiondefault variables['MSVS VERSION'] msvs version Short Name if os environ get 'PROCESSOR ARCHITECTURE' '' find '64 ' > 0 or os environ get 'PROCESSOR ARCHITEW 6432 ' '' find '64 ' > 0 default variables['MSVS OS BITS'] 64 else default variables['MSVS OS BITS'] 32 if gyp common Get Flavor params 'ninja' default variables['SHARED INTERMEDIATE DIR'] '$ Out Dir gen'
@taskdef tag vs push False patch version vs repo root with cd repo root run 'gitcommit-a-m"release{}"' format vs run 'gittag-a-m"release{ 0 }"{ 0 }' format vs if push run 'gitpush' run 'gitpush--tags'
def put In To C document toc toc Orig domhelpers find Elements With Attribute document 'class' 'toc' if toc Orig toc Orig toc Orig[ 0 ]toc Orig child Nodes [toc]
def to timestamp value return value - epoch total seconds
def get data cache dir data dir subdir None data cache dir os environ get 'NEON DATA CACHE DIR' if data cache dir is None data cache dir data dirif subdir subdir subdir if isinstance subdir list else [subdir] data cache dir os path join data cache dir *subdir if not os path exists data cache dir os makedirs data cache dir return data cache dir
def xblock has own studio page xblock parent xblock None category xblock categoryif is unit xblock parent xblock return Trueelif category 'vertical' if parent xblock is None parent xblock get parent xblock xblock return is unit parent xblock if parent xblock else False return xblock has children
def xblock has own studio page xblock parent xblock None category xblock categoryif is unit xblock parent xblock return Trueelif category 'vertical' if parent xblock is None parent xblock get parent xblock xblock return is unit parent xblock if parent xblock else False return xblock has children
def add output compression type parser group parser add mutually exclusive group group add argument u'--gzip' default False action u'store true' help u' Compressoutputusinggzip' group add argument u'--bzip' default False action u'store true' help u' Compressoutputusingbzip 2 '
def add variables to context generator context generator contextcontext['relpath to site'] relpath to sitecontext['main siteurl'] MAIN SITEUR Lcontext['main lang'] MAIN LAN Gcontext['lang siteurls'] SITE D Bcurrent lang generator settings['DEFAULT LANG']extra siteurls SITE DB copy extra siteurls pop current lang context['extra siteurls'] extra siteurls
def check action edition permission view func def decorate request *args **kwargs action kwargs get 'action' Job objects can edit or exception request action workflow return view func request *args **kwargs return wraps view func decorate
def check action edition permission view func def decorate request *args **kwargs action kwargs get 'action' Job objects can edit or exception request action workflow return view func request *args **kwargs return wraps view func decorate
def check action edition permission view func def decorate request *args **kwargs action kwargs get 'action' Job objects can edit or exception request action workflow return view func request *args **kwargs return wraps view func decorate
def interpolate cache slug string cache slug utils get asset dir prefix return parse string string {'cache slug' cache slug}
def interpolate cache slug string cache slug utils get asset dir prefix return parse string string {'cache slug' cache slug}
def reinit hub get hub if hub is not None hub loop reinit if hasattr hub threadpool ' on fork' hub threadpool on fork if hasattr hub resolver ' on fork' hub resolver on fork
def reinit hub get hub if hub is not None hub loop reinit if hasattr hub threadpool ' on fork' hub threadpool on fork if hasattr hub resolver ' on fork' hub resolver on fork
def kill processtree pid signum family pids get processtree pids pid for pid in family pids os kill pid signum
def looks like issubclass obj classname t objif t name classname return Truefor klass in t mro if klass name classname return Truereturn False
def json encode obj **kwargs return json dumps obj default json default **kwargs
def json encode obj **kwargs return json dumps obj default json default **kwargs
def create key policy None description None key usage None region None key None keyid None profile None conn get conn region region key key keyid keyid profile profile r {} policy json serialize policy try key metadata conn create key policy description description key usage key usage r['key metadata'] key metadata[' Key Metadata']except boto exception Boto Server Error as e r['error'] utils ['boto get error'] e return r
def do votes by user parser token bits token contents split if len bits 6 raise template Template Syntax Error "'%s'tagtakesexactlyfourarguments" % bits[ 0 ] if bits[ 2 ] 'on' raise template Template Syntax Error "secondargumentto'%s'tagmustbe'on'" % bits[ 0 ] if bits[ 4 ] 'as' raise template Template Syntax Error "fourthargumentto'%s'tagmustbe'as'" % bits[ 0 ] return Votes By User Node bits[ 1 ] bits[ 3 ] bits[ 5 ]
def do votes by user parser token bits token contents split if len bits 6 raise template Template Syntax Error "'%s'tagtakesexactlyfourarguments" % bits[ 0 ] if bits[ 2 ] 'on' raise template Template Syntax Error "secondargumentto'%s'tagmustbe'on'" % bits[ 0 ] if bits[ 4 ] 'as' raise template Template Syntax Error "fourthargumentto'%s'tagmustbe'as'" % bits[ 0 ] return Votes By User Node bits[ 1 ] bits[ 3 ] bits[ 5 ]
def assert has element with path output path if xml find output path is None errmsg ' Expectedtofind XM Lelementmatchingexpression%s notsuchmatchwasfound ' % path raise Assertion Error errmsg
def assert has element with path output path if xml find output path is None errmsg ' Expectedtofind XM Lelementmatchingexpression%s notsuchmatchwasfound ' % path raise Assertion Error errmsg
def assert has element with path output path if xml find output path is None errmsg ' Expectedtofind XM Lelementmatchingexpression%s notsuchmatchwasfound ' % path raise Assertion Error errmsg
@register inclusion tag 'inclusion html' takes context True def inclusion no params with context context return {'result' 'inclusion no params with context- Expectedresult contextvalue %s ' % context['value'] }
def unique labels list of labels list of labels [idx for idx labels in enumerate list of labels ]return list of labels
def unique labels list of labels list of labels [idx for idx labels in enumerate list of labels ]return list of labels
def get snapshot paths service file list []if service 'cassandra' return file listlook for 'snapshots'data dir '{ 0 }/{ 1 }' format APPSCALE DATA DIR service for full path file in os walk data dir if look for in full path file list append full path logging debug " Listofdatapathsfor'{ 0 }' {1 }" format service file list return file list
def get snapshot paths service file list []if service 'cassandra' return file listlook for 'snapshots'data dir '{ 0 }/{ 1 }' format APPSCALE DATA DIR service for full path file in os walk data dir if look for in full path file list append full path logging debug " Listofdatapathsfor'{ 0 }' {1 }" format service file list return file list
def build cors request url origin header value headers Headers if origin header value is not None headers[' Origin'] origin header value strip forged req Fuzzable Request url 'GET' headers headers return forged req
def get gridline path world pixel mask np isnan pixel[ 0] np isnan pixel[ 1] codes np zeros world shape[ 0 ] dtype np uint 8 codes[ ] Path LINET Ocodes[ 0 ] Path MOVET Ocodes[mask] Path MOVET Ocodes[ 1 ][mask[ -1 ]] Path MOVET Opath Path pixel codes codes return path
def fileobj is binary f if hasattr f 'binary' return f binaryif io is not None and isinstance f io Text IO Base return Falsemode fileobj mode f if mode return 'b' in mode else return True
def fileobj is binary f if hasattr f 'binary' return f binaryif io is not None and isinstance f io Text IO Base return Falsemode fileobj mode f if mode return 'b' in mode else return True
@utils arg 'host' metavar '<host>' help ' Nameofhost ' @utils arg 'action' metavar '<action>' choices ['set' 'delete'] help " Actions 'set'or'delete'" @utils arg 'metadata' metavar '<key value>' nargs '+' action 'append' default [] help ' Metadatatosetordelete onlykeyisnecessaryondelete ' def do host meta cs args hypervisors cs hypervisors search args host servers True for hyper in hypervisors metadata extract metadata args if hasattr hyper 'servers' for server in hyper servers if args action 'set' cs servers set meta server['uuid'] metadata elif args action 'delete' cs servers delete meta server['uuid'] metadata keys
def rebuild all translation files for lang in get all languages for app in frappe get all apps write translations file app lang
def copy dist from dir link path location if os path isdir location rmtree location setup py 'setup py'sdist args [sys executable]sdist args append '-c' sdist args append SETUPTOOLS SHIM % setup py sdist args append 'sdist' sdist args + ['--dist-dir' location]logger info ' Runningsetup pysdistfor%s' link path with indent log call subprocess sdist args cwd link path show stdout False sdist os path join location os listdir location [0 ] logger info ' Unpackingsdist%sinto%s' sdist location unpack file sdist location content type None link None
def copy dist from dir link path location if os path isdir location rmtree location setup py 'setup py'sdist args [sys executable]sdist args append '-c' sdist args append SETUPTOOLS SHIM % setup py sdist args append 'sdist' sdist args + ['--dist-dir' location]logger info ' Runningsetup pysdistfor%s' link path with indent log call subprocess sdist args cwd link path show stdout False sdist os path join location os listdir location [0 ] logger info ' Unpackingsdist%sinto%s' sdist location unpack file sdist location content type None link None
def Get Local User return pwd getpwuid os getuid [0 ] or os getlogin
@pytest mark parametrize u'gframe' gcrs frames def test icrs gcrs dist diff gframe gcrsnod icrs coords[ 0 ] transform to gframe gcrswd icrs coords[ 1 ] transform to gframe assert not allclose gcrswd ra gcrsnod ra rtol 1e- 08 atol 1e- 10 * u deg assert not allclose gcrswd dec gcrsnod dec rtol 1e- 08 atol 1e- 10 * u deg assert not allclose gcrswd distance icrs coords[ 1 ] distance rtol 1e- 08 atol 1e- 10 * u pc
def feature permission url option msg yes action no action abort on config val config get *option if config val 'ask' if url is Valid text ' Allowthewebsiteat<b>{}</b>to{}?' format html escape url to Display String msg else text ' Allowthewebsiteto{}?' format msg return message confirm async yes action yes action no action no action cancel action no action abort on abort on title ' Permissionrequest' text text elif config val yes action return Noneelse no action return None
def rm subdirs path onerror None names []try names os listdir path except os error as err if onerror is not None onerror os listdir path sys exc info else raisefor name in names fullname os path join path name if os path isdir fullname if onerror is not None shutil rmtree fullname False onerror else err count 0while True try shutil rmtree fullname False None breakexcept os error if err count > 0 raiseerr count + 1time sleep RM SUBDIRS RETRY TIME
def cherry pick args func args dargs if func func code co flags & 4 p args argselse p args if func func code co flags & 8 p dargs dargselse p dargs {}for param in get nonstar args func if param in dargs p dargs[param] dargs[param]return p args p dargs
def cherry pick args func args dargs if func func code co flags & 4 p args argselse p args if func func code co flags & 8 p dargs dargselse p dargs {}for param in get nonstar args func if param in dargs p dargs[param] dargs[param]return p args p dargs
def disable signing **kwargs return botocore UNSIGNED
def disable signing **kwargs return botocore UNSIGNED
def disable signing **kwargs return botocore UNSIGNED
def local bitwidth return struct calcsize 'P' * 8
def local bitwidth return struct calcsize 'P' * 8
def threads thread yields [100 200 500 1000 ]thread locks [2 4 8 16 ]test command 'sysbench--num-threads 64 --test threads'test command + '--thread-yields {0 }--thread-locks {1 }run'result Noneret val {}for yields locks in zip thread yields thread locks key ' Yields {0 } Locks {1 }' format yields locks run command test command format yields locks result salt ['cmd run'] run command ret val[key] parser result return ret val
def aggregate input options output time Field Name aggregator Aggregator aggregation Info options input Fields input get Fields time Field Name time Field Name while True in Record input get Next Record print ' Feedingin ' in Record out Record agg Bookmark aggregator next record in Record cur Input Bookmark None print ' Recordout ' out Recordif out Record is not None output append Record out Record None if in Record is None and out Record is None break
def get datastore ref si datastore name inventory get inventory si container inventory view Manager Create Container View inventory root Folder [vim Datastore] True for item in container view if item name datastore name return itemreturn None
def get datastore ref si datastore name inventory get inventory si container inventory view Manager Create Container View inventory root Folder [vim Datastore] True for item in container view if item name datastore name return itemreturn None
def filter factory global conf **local conf conf global conf copy conf update local conf def swift 3 filter app return Swift 3 Middleware app conf return swift 3 filter
def filter factory global conf **local conf conf global conf copy conf update local conf def swift 3 filter app return Swift 3 Middleware app conf return swift 3 filter
@pytest mark skipif 'no real s3 credentials ' def test subdomain compatible creds Credentials os getenv 'AWS ACCESS KEY ID' os getenv 'AWS SECRET ACCESS KEY' bucket name bucket name mangle 'wal-e-test-us-west- 1 -no-dots' cinfo calling format from store name bucket name with Fresh Bucket bucket name host 's 3 -us-west- 1 amazonaws com' calling format connection Ordinary Calling Format as fb fb create location 'us-west- 1 ' conn cinfo connect creds assert cinfo region is None assert cinfo calling format is connection Subdomain Calling Format assert isinstance conn calling format connection Subdomain Calling Format
def output file filename title ' Bokeh Plot' mode 'cdn' root dir None state output file filename title title mode mode root dir root dir
@pytest mark parametrize 'fast writer' [ True False] def test write fill masked different fast writer data ascii read tab to fill data table Table data masked True data['a'] mask [ True False]data['c'] mask [ False True]for test def in test def masked fill value check write table test def data fast writer
def get username username salt ['config get'] 'mattermost username' or salt ['config get'] 'mattermost username' return username
def test start after join group worker Wal Transfer Group Fake Wal Uploader group join seg Fake Wal Segment 'arbitrary' with pytest raises User Critical group start seg
def get container view service instance obj type container None if not container container service instance content root Folderview ref service instance content view Manager Create Container View container container type obj type recursive True return view ref
def get container view service instance obj type container None if not container container service instance content root Folderview ref service instance content view Manager Create Container View container container type obj type recursive True return view ref
def bytes text if text is None return ''if sys version info < 3 0 import builtin return builtin bytes text else import builtinsif isinstance text builtins bytes return textif isinstance text list return builtins bytes text else return builtins bytes text encoding 'utf- 8 '
def bytes text if text is None return ''if sys version info < 3 0 import builtin return builtin bytes text else import builtinsif isinstance text builtins bytes return textif isinstance text list return builtins bytes text else return builtins bytes text encoding 'utf- 8 '
def add doc link app pagename templatename context doctree if not app config github user and app config github project returnsource suffix app config source suffixsource suffix source suffix if isinstance source suffix basestring else source suffix[ 0 ] context['github link'] lambda mode 'edit' make github link app 'doc/%s%s' % pagename source suffix mode mode
@pytest fixture scope u'function' def remove test dir request def fin remove test dir if os path exists u'test copy without render' utils rmtree u'test copy without render' request addfinalizer fin remove test dir
def divergence vect coord sys return coord sys delop dot vect doit
def send alert confirmation alert ctx Context {'alert' alert 'site' Site objects get current } subject tpl loader get template 'customer/alerts/emails/confirmation subject txt' body tpl loader get template 'customer/alerts/emails/confirmation body txt' mail send mail subject tpl render ctx strip body tpl render ctx settings OSCAR FROM EMAIL [alert email]
def clean order order order re findall '\\ [0 - 9 ]*?\\ ' order clean lambda x tuple map int re sub '[ ]' '' x split '' if len order > 1 order sorder map clean order else order clean order[ 0 ] sorder 0 0 0 return order sorder
def parse template delimiters None if type template is not unicode raise Exception ' Templateisnotunicode %s' % type template parser Parser delimiters return parser parse template
def get switchport port module command 'showinterface{ 0 }switchport' format port body execute show command command module try body execute show command command module [0 ]except Index Error body []if body key map {'interface' 'interface' 'oper mode' 'mode' 'switchport' 'switchport' 'access vlan' 'access vlan' 'access vlan name' 'access vlan name' 'native vlan' 'native vlan' 'native vlan name' 'native vlan name' 'trunk vlans' 'trunk vlans'}sp table body['TABLE interface']['ROW interface']sp apply key map key map sp table return spelse return {}
def ansible dict to boto 3 filter list filters dict filters list []for k v in filters dict items filter dict {' Name' k}if isinstance v string types filter dict[' Values'] [v]else filter dict[' Values'] vfilters list append filter dict return filters list
def ansible dict to boto 3 filter list filters dict filters list []for k v in filters dict items filter dict {' Name' k}if isinstance v string types filter dict[' Values'] [v]else filter dict[' Values'] vfilters list append filter dict return filters list
def canonicalize email email if not email return ''email force utf 8 email lower localpart at domain email partition '@' if not at or '@' in domain return ''localpart localpart replace ' ' '' localpart localpart partition '+' [0 ]return localpart + '@' + domain
def cleanup style None def make cleanup func if inspect isgeneratorfunction func @functools wraps func def wrapped callable *args **kwargs original units registry matplotlib units registry copy original settings mpl rc Params copy matplotlib style use style try for yielded in func *args **kwargs yield yielded finally do cleanup original units registry original settings else @functools wraps func def wrapped callable *args **kwargs original units registry matplotlib units registry copy original settings mpl rc Params copy matplotlib style use style try func *args **kwargs finally do cleanup original units registry original settings return wrapped callableif isinstance style six string types return make cleanupelse result make cleanup style style u'classic'return result
def regions return get regions 'cloudwatch' connection cls Cloud Watch Connection
def Out Header text dash n 64 - len text Output Output '/*%s%s%s*/' dash * n / 2 text dash * n - n / 2 Output
def Out Header text dash n 64 - len text Output Output '/*%s%s%s*/' dash * n / 2 text dash * n - n / 2 Output
def Is Derived Function clean lines linenum for i in xrange linenum max -1 linenum - 10 -1 match Match '^ [^ ]*\\w+ \\ ' clean lines elided[i] if match line closing paren Close Expression clean lines i len match group 1 return closing paren > 0 and Search '\\boverride\\b' line[closing paren ] return False
def test merge type mismatch merge log err packages {'pack 1' {'input boolean' [{'ib 1 ' None}]} 'pack 11 ' {'input select' {'ib 1 ' None}} 'pack 2' {'light' {'ib 1 ' None}}}config {config util CONF CORE {config util CONF PACKAGES packages} 'input boolean' {'ib 2 ' None} 'input select' [{'ib 2 ' None}] 'light' [{'platform' 'two'}]}config util merge packages config config packages assert merge log err call count 2 assert len config 4 assert len config['input boolean'] 1 assert len config['light'] 2
def wraps function def wrap decorator decorator functools wraps function decorator if not hasattr function 'original' decorator original functionelse decorator original function originaldelattr function 'original' return decoratorreturn wrap
def twinx ax None if ax is None ax gca ax 1 ax twinx return ax 1
def twinx ax None if ax is None ax gca ax 1 ax twinx return ax 1
def generate video v params [] sources []if v webm sources append {'src' get video url v webm 'type' 'webm'} if v ogv sources append {'src' get video url v ogv 'type' 'ogg'} data fallback ''if v flv data fallback get video url v flv return render to string 'wikiparser/hook video html' {'fallback' data fallback 'sources' sources 'params' params 'video' v 'height' settings WIKI VIDEO HEIGHT 'width' settings WIKI VIDEO WIDTH}
def generate video v params [] sources []if v webm sources append {'src' get video url v webm 'type' 'webm'} if v ogv sources append {'src' get video url v ogv 'type' 'ogg'} data fallback ''if v flv data fallback get video url v flv return render to string 'wikiparser/hook video html' {'fallback' data fallback 'sources' sources 'params' params 'video' v 'height' settings WIKI VIDEO HEIGHT 'width' settings WIKI VIDEO WIDTH}
def namespace to regex namespace db name coll name namespace split ' ' 1 db regex re escape db name replace '\\*' ' [^ ]* ' coll regex re escape coll name replace '\\*' ' * ' return re compile '\\A' + db regex + '\\ ' + coll regex + '\\Z'
def scale taxa data matrix coords pct var return coords[ len pct var ] * pct var / pct var max
def date to key date return int date strftime '%Y%m%d'
def group to gid group if group is None return ''try if isinstance group int return groupreturn grp getgrnam group gr gidexcept Key Error return ''
def Get Active File Name b Auto Save 1 path Name Noneactive Get Active View if active is None return Nonetry doc active Get Document path Name doc Get Path Name if b Auto Save and len path Name > 0 or doc Get Title [ 8] ' Untitled' or doc Get Title [ 6] ' Script' if doc Is Modified try doc On Save Document path Name path Name doc Get Path Name linecache clearcache except win 32 ui error raise Keyboard Interruptexcept win 32 ui error Attribute Error passif not path Name return Nonereturn path Name
def p Pca data dim num data shape[ 1 ]data asmatrix make Centered data W asmatrix standard normal num dim W W[ ]while True E inv W T * W * W T * data T W W data T * E T * inv E * E T W if abs W - W max < 0 001 breakreturn W T
def run shell use plain False from django db models loading import get modelsloaded models get models try if use plain raise Import Errorimport I Pythonshell I Python Shell IP Shell argv [] shell mainloop except Import Error import codetry import readlineexcept Import Error passelse import rlcompleterreadline parse and bind 'tab complete' code interact
def src filename if filename is None return filenameif sys platform startswith 'java' and filename endswith '$py class' return ' ' join filename[ -9 ] 'py' base ext os path splitext filename if ext in ' pyc' ' pyo' ' py' return ' ' join base 'py' return filename
def normpath path path syspath path prefix False path os path normpath os path abspath os path expanduser path return bytestring path path
def tiny 2 zero x eps 1e- 15 mask np abs x copy < eps x[mask] 0return x
def get completion try return instances[completion]except Key Error if completion in INITIALIZERS INITIALIZERS[completion] return instances[completion]else raise
def data for url url path url path host url host log misc debug 'url {} path {} host{}' format url to Display String path host try handler HANDLERS[path]except Key Error try handler HANDLERS[host]except Key Error raise No Handler Found url try mimetype data handler url except OS Error as e raise Qute Scheme OS Error e except Qute Scheme Error as e raiseassert mimetype is not None urlif mimetype 'text/html' and isinstance data str data data encode 'utf- 8 ' errors 'xmlcharrefreplace' return mimetype data
def ssh run with recursion ssh bin address ec 2 key pair file keyfile cmd args if ' ' in address if keyfile is None raise Value Error 'SS Hkeyfilepathcannotbe None' host 1 host 2 address split ' ' more args ['ssh' '-i' keyfile '-o' ' Strict Host Key Checking no' '-o' ' User Known Hosts File /dev/null' 'hadoop@%s' % host 2 ]return ssh run ssh bin host 1 ec 2 key pair file more args + list cmd args else return ssh run ssh bin address ec 2 key pair file cmd args
def list states saltenv 'base' return context ['fileclient'] list states saltenv
def json from url url error message ''url handle urllib urlopen url url contents url handle read try parsed json json loads url contents except Exception as e error message str url contents print ' Errorparsing JSO Ndatainjson from url ' str e return None error message return parsed json error message
def show path changes path changes sources destinations zip *path changes sources list map util displayable path sources destinations list map util displayable path destinations col width term width - len '->' // 2 max width len max sources + destinations key len if max width > col width for source dest in zip sources destinations log info u'{ 0 }\n->{ 1 }' source dest else title pad max width - len ' Source' + len '->' log info u' Source{ 0 } Destination' '' * title pad for source dest in zip sources destinations pad max width - len source log info u'{ 0 }{ 1 }->{ 2 }' source '' * pad dest
@core helperdef resource view display preview resource view view plugin datapreview get view plugin resource view['view type'] return view plugin info get 'preview enabled' True
def test temporary files failed cleanup caplog qtbot py proc runner cmd args py proc "\nimportos\nos remove os environ['QUTE HTML'] \n" with caplog at level logging ERROR with qtbot wait Signal runner finished timeout 10000 runner prepare run cmd *args runner store text '' runner store html '' assert len caplog records 1 expected ' Failedtodeletetempfile'assert caplog records[ 0 ] message startswith expected
def must have write permission or public wiki func @functools wraps func def wrapped *args **kwargs inject nodes kwargs wiki kwargs['node'] get addon 'wiki' if wiki and wiki is publicly editable return func *args **kwargs else return must have permission 'write' func *args **kwargs return wrapped
@register filterdef friends user try return Relationship objects get friends for user user except Attribute Error return []
def assert arping src namespace dst ip source None timeout 1 count 1 ns ip wrapper ip lib IP Wrapper src namespace arping cmd ['arping' '-c' count '-w' timeout]if source arping cmd extend ['-s' source] arping cmd append dst ip ns ip wrapper netns execute arping cmd
def log loss actual predicted return np mean ll actual predicted
def stash model Stash Model view Stash View model qtutils active window view show view raise return view
def stash model Stash Model view Stash View model qtutils active window view show view raise return view
def send message token chat id text disable web page preview None reply to message id None reply markup None parse mode None disable notification None method url 'send Message'payload {'chat id' str chat id 'text' text}if disable web page preview payload['disable web page preview'] disable web page previewif reply to message id payload['reply to message id'] reply to message idif reply markup payload['reply markup'] convert markup reply markup if parse mode payload['parse mode'] parse modeif disable notification payload['disable notification'] disable notificationreturn make request token method url params payload method 'post'
def Condition *args **kwargs return Condition *args **kwargs
def get move page id list user site check global True use cache True page ids get page ids for action user user site site action 'move page' check global check global use cache use cache return page ids
def serve webapp webapp port None host None server Noneif port is not None server httpserver serve webapp host host port port start loop False else random seed for i in range 0 9 try port str random randint 8000 10000 server httpserver serve webapp host host port port start loop False breakexcept socket error as e if e[ 0 ] 98 continueraiseelse raise Exception ' Unabletoopenaportbetween%sand%stostart Galaxyserver' % 8000 1000 t threading Thread target server serve forever t start return server port
def example short number for cost region code cost metadata Phone Metadata short metadata for region region code if metadata is None return U EMPTY STRIN Gdesc Noneif cost Short Number Cost TOLL FREE desc metadata toll freeelif cost Short Number Cost STANDARD RATE desc metadata standard rateelif cost Short Number Cost PREMIUM RATE desc metadata premium rateelse passif desc is not None and desc example number is not None return desc example numberreturn U EMPTY STRING
def test pmf hist basics out utils pmf hist a norm assert equal len out 3 x h w outassert equal len x len h a np arange 10 x h w utils pmf hist a 10 nose tools assert true np all h h[ 0 ]
def expand path path return os path expandvars os path expanduser path
def group snapshot create context values return IMPL group snapshot create context values
@contextmanagerdef use step import modules step container orig modules {}import context Step Import Module Context step container with step import lock try for module name fake module in six iteritems import context modules orig module sys modules get module name unknown orig modules[module name] orig modulesys modules[module name] fake module yield import context finally for module name orig module in six iteritems orig modules if orig module is unknown del sys modules[module name]else sys modules[module name] orig module
@contextmanagerdef use step import modules step container orig modules {}import context Step Import Module Context step container with step import lock try for module name fake module in six iteritems import context modules orig module sys modules get module name unknown orig modules[module name] orig modulesys modules[module name] fake module yield import context finally for module name orig module in six iteritems orig modules if orig module is unknown del sys modules[module name]else sys modules[module name] orig module
@contextmanagerdef use step import modules step container orig modules {}import context Step Import Module Context step container with step import lock try for module name fake module in six iteritems import context modules orig module sys modules get module name unknown orig modules[module name] orig modulesys modules[module name] fake module yield import context finally for module name orig module in six iteritems orig modules if orig module is unknown del sys modules[module name]else sys modules[module name] orig module
def map bits fn n while n b n & ~ n + 1 yield fn b n ^ b
def generate secret from Crypto Random import get random bytesbytes get random bytes 20 encoded base 64 b32 encode bytes return encoded
def create X Ys x y None if y is None y xxs numpy resize x len x * len y ys numpy repeat y len x return numpy vstack [xs ys] transpose
def get category or 404 path path bits [p for p in path split '/' if p]return get object or 404 Category slug path bits[ -1 ]
def get category or 404 path path bits [p for p in path split '/' if p]return get object or 404 Category slug path bits[ -1 ]
def transform cls if cls name in NEED FIX for f in FIX MEMBERS cls locals[f] [scoped nodes Class f None ]
def transform cls if cls name in NEED FIX for f in FIX MEMBERS cls locals[f] [scoped nodes Class f None ]
def transform cls if cls name in NEED FIX for f in FIX MEMBERS cls locals[f] [scoped nodes Class f None ]
def default fused keys renamer keys typ type keys[ 0 ] if typ is str or typ is unicode names [key split x for x in keys[ 0 -1 ]]names append keys[ 0 ] return '-' join names elif typ is tuple and len keys[ 0 ] > 0 and isinstance keys[ 0 ][ 0 ] str unicode names [key split x for x in keys[ 0 -1 ]]names append keys[ 0 ][ 0 ] return '-' join names + keys[ 0 ][ 1 ] else return None
def test commented scenarios scenario Scenario from string COMMENTED SCENARIO assert equals scenario name u' Addingsomestudentstomyuniversitydatabase' assert equals len scenario steps 4
def test commented scenarios scenario Scenario from string COMMENTED SCENARIO assert equals scenario name u' Addingsomestudentstomyuniversitydatabase' assert equals len scenario steps 4
def virtual interface get by uuid context vif uuid return IMPL virtual interface get by uuid context vif uuid
def symlink check name target force user group pchanges {}if not os path exists name and not salt ['file is link'] name pchanges['new'] namereturn None ' Symlink{ 0 }to{ 1 }issetforcreation' format name target pchanges if salt ['file is link'] name if salt ['file readlink'] name target pchanges['change'] namereturn None ' Link{ 0 }targetissettobechangedto{ 1 }' format name target pchanges else result Truemsg ' Thesymlink{ 0 }ispresent' format name if not check symlink ownership name user group result Nonepchanges['ownership'] '{ 0 } {1 }' format * get symlink ownership name msg + ' buttheownershipofthesymlinkwouldbechangedfrom{ 2 } {3 }to{ 0 } {1 }' format user group * get symlink ownership name return result msg pchanges else if force return None ' Thefileordirectory{ 0 }issetforremovaltomakewayforanewsymlinktargeting{ 1 }' format name target pchanges return False ' Fileordirectoryexistswherethesymlink{ 0 }shouldbe Didyoumeantouseforce?' format name pchanges
def service get by args context host binary return IMPL service get by args context host binary
def clear color None if color is None sensehat clear else sensehat clear color return {'color' color}
def get server certs iam name None results dict try if name server certs [iam get server certificate Server Certificate Name name [' Server Certificate']]else server certs iam list server certificates [' Server Certificate Metadata List']for server cert in server certs if not name server cert iam get server certificate Server Certificate Name server cert[' Server Certificate Name'] [' Server Certificate']cert md server cert[' Server Certificate Metadata']results[cert md[' Server Certificate Name']] {'certificate body' server cert[' Certificate Body'] 'server certificate id' cert md[' Server Certificate Id'] 'server certificate name' cert md[' Server Certificate Name'] 'arn' cert md[' Arn'] 'path' cert md[' Path'] 'expiration' cert md[' Expiration'] isoformat 'upload date' cert md[' Upload Date'] isoformat }except botocore exceptions Client Error passreturn results
def blame upstream registry xml parent data XML Sub Element xml parent 'hudson plugins blame upstream commiters Blame Upstream Commiters Publisher'
def blame upstream registry xml parent data XML Sub Element xml parent 'hudson plugins blame upstream commiters Blame Upstream Commiters Publisher'
def blame upstream registry xml parent data XML Sub Element xml parent 'hudson plugins blame upstream commiters Blame Upstream Commiters Publisher'
def is exp summary editable exp summary user id None return user id is not None and user id in exp summary editor ids or user id in exp summary owner ids or exp summary community owned
def is exp summary editable exp summary user id None return user id is not None and user id in exp summary editor ids or user id in exp summary owner ids or exp summary community owned
def is Valid Quicktime Video URL field data all data uc URL Mime Type Check 'video/quicktime' 'video/mpeg' try uc field data all data except URL Mime Type Check Invalid Content Type raise Validation Error gettext ' The URL%sdoesnotpointtoavalid Quick Timevideo ' % field data
def get array memory extents context builder arrty arr shapes strides data lower upper offset bounds from strides context builder arrty arr shapes strides return compute memory extents context builder lower upper data
def class Of Method method Object if PY 3 return method Object self class return method Object im class
def parse userdata options userdata options['userdata']if userdata try if userdata startswith '@' try with open userdata[ 1 ] as f return json load f except IO Error as e usage options ' Invaliduserdatafile {}' format e strerror else return json loads userdata except Value Error as e usage options ' Invaliduserdata {}' format e args[ 0 ] return None
def resize part and fs dev start old sectors new sectors size new sectors - start end new sectors - 1 dev path utils make dev path dev partition path utils make dev path dev partition 1 utils execute 'e 2 fsck' '-f' '-y' partition path run as root True check exit code [0 1 2] utils execute 'tune 2 fs' '-O^has journal' partition path run as root True if new sectors < old sectors utils execute 'resize 2 fs' partition path '%ds' % size run as root True utils execute 'parted' '--script' dev path 'rm' '1 ' run as root True utils execute 'parted' '--script' dev path 'mkpart' 'primary' '%ds' % start '%ds' % end run as root True if new sectors > old sectors utils execute 'resize 2 fs' partition path run as root True utils execute 'tune 2 fs' '-j' partition path run as root True
def get cost functions cost fns conf CONF least cost functionsif cost fns conf is None fn str 'nova scheduler least cost compute fill first cost fn'cost fns conf [fn str]cost fns []for cost fn str in cost fns conf short name cost fn str split ' ' [ -1 ]if not short name startswith 'compute ' or short name startswith 'noop' continueif cost fn str startswith 'nova scheduler least cost ' cost fn str 'nova scheduler weights least cost' + cost fn str[ 25 ] try cost fn importutils import class cost fn str except Import Error raise exception Scheduler Cost Function Not Found cost fn str cost fn str try flag name '%s weight' % cost fn name weight getattr CONF flag name except Attribute Error raise exception Scheduler Weight Flag Not Found flag name flag name if flag name 'compute fill first cost fn weight' and weight is None weight -1 0 cost fns append weight cost fn return cost fns
def cleanup print green '%s Cleaningup' % env host with cd '/home/web 2 py/applications/eden/' run '/bin/rm-rfcompiled' pty True run 'find -name* BASE-print xargs/bin/rm-f' pty True run 'find -name* THIS-print xargs/bin/rm-f' pty True run 'foriin`find -name* OTHER` domv$i${i/ OTHER/} done' pty True run 'bzrresolve' pty True print green '%s Restoring Customisations' % env host env warn only Truerun 'patch-f-p 0 </root/custom diff' pty True env warn only False
@parametrize 'varname' [attr for attr in dir tables if not attr startswith ' ' ] def test variable names varname table getattr tables varname try if not issubclass table tables Table Base or table is tables Table Base returnexcept Type Error returnclassname table name if classname and varname[ 0 ] isupper assert varname classname '%srefersto%s' % varname classname
def clear persistent graph cache request request facebook Nonerequest session delete 'graph' if request user is authenticated profile get profile request user profile clear access token
def polarify eq subs True lift False if lift subs Falseeq polarify sympify eq lift if not subs return eqreps {s Dummy s name polar True for s in eq free symbols}eq eq subs reps return eq {r s for s r in reps items }
def Check Redundant Override Or Final filename clean lines linenum error line clean lines elided[linenum]declarator end line rfind ' ' if declarator end > 0 fragment line[declarator end ]elif linenum > 1 and clean lines elided[ linenum - 1 ] rfind ' ' > 0 fragment lineelse returnif Search '\\boverride\\b' fragment and Search '\\bfinal\\b' fragment error filename linenum 'readability/inheritance' 4 '"override"isredundantsincefunctionisalreadydeclaredas"final"'
def maybe shift divisions df periods freq if isinstance freq str freq pd tseries frequencies to offset freq if isinstance freq pd Date Offset and freq is Anchored or not hasattr freq 'delta' return df clear divisions if df known divisions divs pd Series range len df divisions index df divisions divisions divs shift periods freq freq indexreturn type df df dask df name df meta divisions return df
def maybe shift divisions df periods freq if isinstance freq str freq pd tseries frequencies to offset freq if isinstance freq pd Date Offset and freq is Anchored or not hasattr freq 'delta' return df clear divisions if df known divisions divs pd Series range len df divisions index df divisions divisions divs shift periods freq freq indexreturn type df df dask df name df meta divisions return df
def maybe shift divisions df periods freq if isinstance freq str freq pd tseries frequencies to offset freq if isinstance freq pd Date Offset and freq is Anchored or not hasattr freq 'delta' return df clear divisions if df known divisions divs pd Series range len df divisions index df divisions divisions divs shift periods freq freq indexreturn type df df dask df name df meta divisions return df
def maybe shift divisions df periods freq if isinstance freq str freq pd tseries frequencies to offset freq if isinstance freq pd Date Offset and freq is Anchored or not hasattr freq 'delta' return df clear divisions if df known divisions divs pd Series range len df divisions index df divisions divisions divs shift periods freq freq indexreturn type df df dask df name df meta divisions return df
def humanize speed speed if speed > 1000000000 and speed % 1000000000 0 return '{} Tbps' format speed / 1000000000 elif speed > 1000000 and speed % 1000000 0 return '{} Gbps' format speed / 1000000 elif speed > 1000 and speed % 1000 0 return '{} Mbps' format speed / 1000 elif speed > 1000 return '{} Mbps' format float speed / 1000 else return '{} Kbps' format speed
def humanize speed speed if speed > 1000000000 and speed % 1000000000 0 return '{} Tbps' format speed / 1000000000 elif speed > 1000000 and speed % 1000000 0 return '{} Gbps' format speed / 1000000 elif speed > 1000 and speed % 1000 0 return '{} Mbps' format speed / 1000 elif speed > 1000 return '{} Mbps' format float speed / 1000 else return '{} Kbps' format speed
def to pgraster rast if rast is None or rast '' returnrasterheader 1 0 len rast bands rast scale x rast scale y rast origin x rast origin y rast skew x rast skew y rast srs srid rast width rast height result pack POSTGIS HEADER STRUCTURE rasterheader for band in rast bands structure 'B' + GDAL TO STRUCT[band datatype ] pixeltype GDAL TO POSTGIS[band datatype ]if band nodata value is not None pixeltype + 64 bandheader pack structure pixeltype band nodata value or 0 band data hex binascii hexlify band data as memoryview True upper result + bandheader + band data hex return result decode
def make Cgi Print Encoding encoding def cgi Print s ' Encodethegivenstringusingthe%sencoding andreplace\ncharsoutsidethegivencharsetwith XM Lcharreferences ' % encoding s escape s quote 1 if isinstance s unicode s s encode encoding 'xmlcharrefreplace' return sreturn cgi Print
def run subsuite args runner class subsuite index subsuite failfast argsrunner runner class failfast failfast result runner run subsuite return subsuite index result events
def search For Needed Episodes results []for cur Show in sickrage sr Core SHOWLIST if cur Show paused continueepisodes wanted Episodes cur Show date fromordinal 1 result search Providers cur Show episodes cache Only True if result results + resultreturn results
def search For Needed Episodes results []for cur Show in sickrage sr Core SHOWLIST if cur Show paused continueepisodes wanted Episodes cur Show date fromordinal 1 result search Providers cur Show episodes cache Only True if result results + resultreturn results
def get filter name field name lookup expr filter name LOOKUP SEP join [field name lookup expr] exact LOOKUP SEP + u'exact' if filter name endswith exact filter name filter name[ - len exact ]return filter name
def register request success url None form class Registration Form profile callback None template name 'registration/registration form html' extra context None if request method 'POST' form form class data request POST files request FILES if form is valid new user form save profile callback profile callback return Http Response Redirect success url or reverse 'registration complete' else form form class if extra context is None extra context {}context Request Context request for key value in extra context items context[key] callable value and value or value return render to response template name {'form' form} context instance context
@pytest mark parametrize 'elidemode check' [ Qt Elide Right lambda s s endswith '\xe 2 \x 80 \xa 6 ' or s endswith ' ' Qt Elide Left lambda s s startswith '\xe 2 \x 80 \xa 6 ' or s startswith ' ' Qt Elide Middle lambda s '\xe 2 \x 80 \xa 6 ' in s or ' ' in s Qt Elide None lambda s '\xe 2 \x 80 \xa 6 ' not in s and ' ' not in s ] def test elided text fake statusbar qtbot elidemode check label Text Base elidemode elidemode qtbot add widget label fake statusbar hbox add Widget label long string ' Helloworld ' * 100 label set Text long string label show assert check label elided text
def get service hass config discovery info None secret config get CONF API KEY recipient config get CONF TO device config get CONF DEVICE return Automate Notification Service secret recipient device
def Index Definitions To Keys indexes keyset set if indexes is not None if indexes indexes for index in indexes indexes keyset add Index To Key index return keyset
def Index Definitions To Keys indexes keyset set if indexes is not None if indexes indexes for index in indexes indexes keyset add Index To Key index return keyset
def unregister config unused plugins account storage account Account File Storage config accounts account storage find all reporter util zope component get Utility interfaces I Reporter if not accounts return ' Couldnotfindexistingaccounttodeactivate 'yesno zope component get Utility interfaces I Display yesnoprompt ' Areyousureyouwouldliketoirrevocablydeactivateyouraccount?'wants deactivate yesno prompt yes label ' Deactivate' no label ' Abort' default True if not wants deactivate return ' Deactivationaborted ' acc acme determine account config acme client client Client config acc None None acme acme acme client acme deactivate registration acc regr account files account Account File Storage config account files delete config account reporter util add message ' Accountdeactivated ' reporter util MEDIUM PRIORITY
@contextmanagerdef ensure clean filename None return filelike False filename filename or '' fd Noneif return filelike f tempfile Temporary File suffix filename try yield f finally f close else if len os path dirname filename raise Value Error " Can'tpassaqualifiednametoensure clean " try fd filename tempfile mkstemp suffix filename except Unicode Encode Error import noseraise nose Skip Test 'nounicodefilenamesonthissystem' try yield filename finally try os close fd except Exception as e print " Couldn'tclosefiledescriptor %d file %s " % fd filename try if os path exists filename os remove filename except Exception as e print ' Exceptiononremovingfile %s' % e
def event 2 json event return jdumps dict type event type send event event send event time event time root str event root window str event window same screen event same screen child str event child root x event root x root y event root y event x event event x event y event event y state event state detail event detail
def nt quote args args for i in range len args if string find args[i] '' -1 args[i] '"%s"' % args[i] return args
def nt quote args args for i in range len args if string find args[i] '' -1 args[i] '"%s"' % args[i] return args
def keywords func if isinstance func type return keywords func init elif isinstance func partial return keywords func func return inspect getargspec func args
def approximate taylor polynomial f x degree scale order None if order is None order degreen order + 1 xs scale * np cos np linspace 0 np pi n endpoint n % 1 + x P Krogh Interpolator xs f xs d P derivatives x der degree + 1 return np poly 1 d d / factorial np arange degree + 1 [ -1 ]
def approximate taylor polynomial f x degree scale order None if order is None order degreen order + 1 xs scale * np cos np linspace 0 np pi n endpoint n % 1 + x P Krogh Interpolator xs f xs d P derivatives x der degree + 1 return np poly 1 d d / factorial np arange degree + 1 [ -1 ]
@utils memoizedef get pkgfile command try command command strip if command startswith 'sudo' command command[ 5 ]command command split '' [0 ]packages subprocess check output ['pkgfile' '-b' '-v' command] universal newlines True stderr utils DEVNULL splitlines return [package split [0 ] for package in packages]except subprocess Called Process Error return None
@utils memoizedef get pkgfile command try command command strip if command startswith 'sudo' command command[ 5 ]command command split '' [0 ]packages subprocess check output ['pkgfile' '-b' '-v' command] universal newlines True stderr utils DEVNULL splitlines return [package split [0 ] for package in packages]except subprocess Called Process Error return None
def get role ids course id roles Role objects filter course id course id exclude name FORUM ROLE STUDENT return dict [ role name list role users values list 'id' flat True for role in roles]
def load params global ANSIBLE ARG Sif ANSIBLE ARGS is not None buffer ANSIBLE ARG Selse if len sys argv > 1 if os path isfile sys argv[ 1 ] fd open sys argv[ 1 ] 'rb' buffer fd read fd close else buffer sys argv[ 1 ]if PY 3 buffer buffer encode 'utf- 8 ' errors 'surrogateescape' elif PY 2 buffer sys stdin read else buffer sys stdin buffer read ANSIBLE ARGS buffertry params json loads buffer decode 'utf- 8 ' except Value Error print '\n{"msg" " Error Moduleunabletodecodevalid JSO Nonstdin Unabletofigureoutwhatparameterswerepassed" "failed" true}'sys exit 1 if PY 2 params json dict unicode to bytes params try return params['ANSIBLE MODULE ARGS']except Key Error print '\n{"msg" " Error Moduleunabletolocate ANSIBLE MODULE ARG Sinjsondatafromstdin Unabletofigureoutwhatparameterswerepassed" "failed" true}'sys exit 1
def get date regex timestring prev ''curr ''regex ''for s in range 0 len timestring curr timestring[s]if curr '%' passelif curr in settings date regex and prev '%' regex + '\\d{' + settings date regex [curr] + '}' elif curr in [' ' '-'] regex + '\\' + curr else regex + currprev currlogger debug 'regex {0 }' format regex return regex
def uptime format False uptime time - SERVER START TIME if format return format uptime 31536000 2628000 604800 86400 3600 60 return uptime
def uptime format False uptime time - SERVER START TIME if format return format uptime 31536000 2628000 604800 86400 3600 60 return uptime
def update pathtozip patterns filepaths names compression zipfile ZIP DEFLATED verbose True assert len patterns len filepaths len names z zipfile Zip File pathtozip mode 'a' for name in z namelist for pat fname new name in zip patterns filepaths names if pat search name if verbose print ' Updating%swith%s' % name fname if new name is None z replace fname arcname name compress type compression else z delete name z write fname new name compress type compression breakz close
def update pathtozip patterns filepaths names compression zipfile ZIP DEFLATED verbose True assert len patterns len filepaths len names z zipfile Zip File pathtozip mode 'a' for name in z namelist for pat fname new name in zip patterns filepaths names if pat search name if verbose print ' Updating%swith%s' % name fname if new name is None z replace fname arcname name compress type compression else z delete name z write fname new name compress type compression breakz close
def test user link unicode u User Profile username u'jm\xfcller' display name u'J\xfcrgen M\xfcller' pk 1 assert user link u u'<ahref "%s"title "%s">J\xfcrgen M\xfcller</a>' % u get url path u name u User Profile username '\xe 5 \xaf\x 92 \xe 6 \x 98 \x 9 f' pk 1 assert user link u u'<ahref "%s"title "%s">%s</a>' % u get url path u name u username
def create xml runner test pkg test name results file None is rostest False test name os path basename test name if not results file results file xml results file test pkg test name is rostest test dir os path abspath os path dirname results file if not os path exists test dir try makedirs with parent perms test dir except OS Error as error raise IO Error 'cannotcreatetestresultsdirectory[%s] %s' % test dir str error elif os path isfile test dir raise Exception 'ERROR cannotruntestsuite fileispreventingcreationoftestdir %s' % test dir print '[ROSUNIT] Outputtingtestresultsto' + results file outstream open results file 'w' outstream write '<?xmlversion "1 0"encoding "utf- 8 "?>\n' return XML Test Runner stream outstream
def get Data Directory module Name None if not module Name caller currentframe 1 module Name inspect getmodule caller name return appdirs user data dir module Name
def Find Stmt Parent node if pytree utils Node Name node in STATEMENT NODES return nodeelse return Find Stmt Parent node parent
def get current view return getattr g ' admin view' None
def is Path Added edges faces loops remaining Edge Table vertexes z if len remaining Edge Table < 1 return Falsepath Indexes []remaining Edge Index Key remaining Edge Table keys [0 ]path Indexes append remaining Edge Index Key del remaining Edge Table[remaining Edge Index Key]next Edge Index Around Z get Next Edge Index Around Z edges[remaining Edge Index Key] faces remaining Edge Table while next Edge Index Around Z -1 path Indexes append next Edge Index Around Z del remaining Edge Table[next Edge Index Around Z]next Edge Index Around Z get Next Edge Index Around Z edges[next Edge Index Around Z] faces remaining Edge Table if len path Indexes < 3 print ' Danglingedges willuseintersectingcirclestogetimportlayeratheight%s' % z del loops[ ]return Falseloops append get Path edges path Indexes vertexes z return True
def is Path Added edges faces loops remaining Edge Table vertexes z if len remaining Edge Table < 1 return Falsepath Indexes []remaining Edge Index Key remaining Edge Table keys [0 ]path Indexes append remaining Edge Index Key del remaining Edge Table[remaining Edge Index Key]next Edge Index Around Z get Next Edge Index Around Z edges[remaining Edge Index Key] faces remaining Edge Table while next Edge Index Around Z -1 path Indexes append next Edge Index Around Z del remaining Edge Table[next Edge Index Around Z]next Edge Index Around Z get Next Edge Index Around Z edges[next Edge Index Around Z] faces remaining Edge Table if len path Indexes < 3 print ' Danglingedges willuseintersectingcirclestogetimportlayeratheight%s' % z del loops[ ]return Falseloops append get Path edges path Indexes vertexes z return True
def install git path hook op join path 'pre-commit' with open hook 'w' as fd fd write "# /usr/bin/envpython\nimportsys\nfrompylama hookimportgit hook\n\nif name ' main ' \nsys exit git hook \n" chmod hook 484
def test positive integer 2 assert 1 positive integer '1 '
def prepare query string params params sorted params items key lambda x x[ 0 ] return '?%s' % parse urlencode params if params else ''
def prepare query string params params sorted params items key lambda x x[ 0 ] return '?%s' % parse urlencode params if params else ''
def get attr method string app name method string split u' ' [0 ]if not local flags in install and app name not in get installed apps throw u' App{ 0 }isnotinstalled' format app name App Not Installed Error modulename u' ' join method string split u' ' [ -1 ] methodname method string split u' ' [ -1 ]return getattr get module modulename methodname
def start webserver config args logger info ' Startwebservermode' global webserverfrom glances webserver import Glances Web Serverwebserver Glances Web Server config config args args webserver serve forever
def systemd running state name path None try ret run all name 'systemctlis-system-running' path path ignore retcode True ['stdout']except Command Execution Error ret ''return ret
def gimme json for portfolio request "JSO Nincludes \n* Theperson'sdata \n*otherstuff"if not request user is authenticated return Http Response Server Error " Oops you'renotloggedin " person request user get profile citations list Citation untrashed filter portfolio entry person person portfolio entries unserialized Portfolio Entry objects filter person person is deleted False projects unserialized [p project for p in portfolio entries unserialized]summaries {}for c in citations summaries[c pk] render to string 'profile/portfolio/citation summary html' {'citation' c} five minutes ago datetime datetime utcnow - datetime timedelta minutes 5 portfolio entries json loads serializers serialize 'json' portfolio entries unserialized projects json loads serializers serialize 'json' projects unserialized citations json loads serializers serialize 'json' citations portfolio json json dumps {'citations' citations 'portfolio entries' portfolio entries 'projects' projects 'summaries' summaries} return Http Response portfolio json mimetype 'application/json'
def speaker Diarization Evaluate Script folder Name LD As types '* wav' wav Files List []for files in types wav Files List extend glob glob os path join folder Name files wav Files List sorted wav Files List N []for wav File in wav Files List gt File wav File replace ' wav' ' segments' if os path isfile gt File [seg Start seg End seg Labels] read Segment GT gt File N append len list set seg Labels else N append -1 for l in LD As print 'LDA {0 d}' format l for i wav File in enumerate wav Files List speaker Diarization wav File N[i] 2 0 0 2 0 05 l PLOT False print
def speaker Diarization Evaluate Script folder Name LD As types '* wav' wav Files List []for files in types wav Files List extend glob glob os path join folder Name files wav Files List sorted wav Files List N []for wav File in wav Files List gt File wav File replace ' wav' ' segments' if os path isfile gt File [seg Start seg End seg Labels] read Segment GT gt File N append len list set seg Labels else N append -1 for l in LD As print 'LDA {0 d}' format l for i wav File in enumerate wav Files List speaker Diarization wav File N[i] 2 0 0 2 0 05 l PLOT False print
def get default hparams return H Params batch size 64 residual blocks 2 n couplings 2 n scale 4 learning rate 0 001 momentum 0 1 decay 0 001 l2 coeff 5e- 05 clip gradient 100 0 optimizer 'adam' dropout mask 0 base dim 32 bottleneck 0 use batch norm 1 alternate 1 use aff 1 skip 1 data constraint 0 9 n opt 0
def print timing msg None debug False prefix msgif isinstance msg types Function Type prefix msg func namedef wrap f func *arg **kargs ' Rawtimingfunction'time 1 time time res func *arg **kargs time 2 time time msg '%stook% 0 3fmins' % prefix time 2 - time 1 / 60 0 if debug log debug msg else log info msg return resif isinstance msg types Function Type return decorator decorator wrap f msg else return decorator decorator wrap f
def print timing msg None debug False prefix msgif isinstance msg types Function Type prefix msg func namedef wrap f func *arg **kargs ' Rawtimingfunction'time 1 time time res func *arg **kargs time 2 time time msg '%stook% 0 3fmins' % prefix time 2 - time 1 / 60 0 if debug log debug msg else log info msg return resif isinstance msg types Function Type return decorator decorator wrap f msg else return decorator decorator wrap f
def sanitize redirect host redirect to if redirect to try netloc urlparse redirect to [1 ] or host except Type Error Attribute Error passelse if netloc host return redirect to
@ensure csrf cookie@cache control no cache True no store True must revalidate True @require level 'staff' @require POS Tdef get registration codes request course id course id Slash Separated Course Key from deprecated string course id registration codes Course Registration Code objects filter course id course id order by 'invoice item invoice company name' company name request POST['download company name']if company name registration codes registration codes filter invoice item invoice company name company name csv type 'download'return registration codes csv ' Registration Codes csv' registration codes csv type
def get collection by alias bus alias service obj bus get object bus SS PATH service iface dbus Interface service obj SERVICE IFACE collection path service iface Read Alias alias signature 's' if len collection path < 1 raise Item Not Found Exception ' Nocollectionwithsuchalias ' return Collection bus collection path
def get main running hub hubs get running hubs if not hubs raise SAMP Hub Error u' Unabletofindarunning SAMP Hub ' if u'SAMP HUB' in os environ if os environ[u'SAMP HUB'] startswith u'std-lockurl ' lockfilename os environ[u'SAMP HUB'][len u'std-lockurl ' ]else raise SAMP Hub Error u'SAMP Hubprofilenotsupported ' else lockfilename os path join find home u' samp' return hubs[lockfilename]
def create appscale user password uaserver does user exist uaserver does user exist hermes constants USER EMAIL appscale info get secret if does user exist 'true' logging debug ' User{ 0 }alreadyexists sonotcreatingitagain ' format hermes constants USER EMAIL return Trueelif uaserver commit new user hermes constants USER EMAIL password hermes constants ACCOUNT TYPE appscale info get secret 'true' return Trueelse logging error ' Errorwhilecreatingan Appscaleuser ' return False
def clear time override utcnow override time None
def has constant term p x R p ringiv R gens index x zm R zero monoma [0 ] * R ngens a[iv] 1miv tuple a for expv in p if monomial min expv miv zm return Truereturn False
def make link volume path backup path vol id try utils execute 'ln' volume path backup path run as root True check exit code True except processutils Process Execution Error as exc err 'backup % vol id sfailedtocreatedevicehardlinkfrom% vpath sto% bpath s \nstdout % out s\nstderr % err s' % {'vol id' vol id 'vpath' volume path 'bpath' backup path 'out' exc stdout 'err' exc stderr} LOG error err raise exception Invalid Backup reason err
def pretty bool value bool dict [ True ' True' 'true' 'T' 't' '1 ']return value in bool dict
def cmp People p1 p2 p1 b getattr p1 'billing Pos' None or last p2 b getattr p2 'billing Pos' None or last if p1 b > p2 b return 1if p1 b < p2 b return -1 p1 n p1 get 'canonicalname' last p2 n p2 get 'canonicalname' last if p1 n is last and p2 n is last p1 n p1 get 'name' last p2 n p2 get 'name' last if p1 n > p2 n return 1if p1 n < p2 n return -1 p1 i p1 get 'imdb Index' last p2 i p2 get 'imdb Index' last if p1 i > p2 i return 1if p1 i < p2 i return -1 return 0
def cmp People p1 p2 p1 b getattr p1 'billing Pos' None or last p2 b getattr p2 'billing Pos' None or last if p1 b > p2 b return 1if p1 b < p2 b return -1 p1 n p1 get 'canonicalname' last p2 n p2 get 'canonicalname' last if p1 n is last and p2 n is last p1 n p1 get 'name' last p2 n p2 get 'name' last if p1 n > p2 n return 1if p1 n < p2 n return -1 p1 i p1 get 'imdb Index' last p2 i p2 get 'imdb Index' last if p1 i > p2 i return 1if p1 i < p2 i return -1 return 0
def current service request if request matched route services request registry cornice servicespattern request matched route patterntry service services[pattern]except Key Error return Noneelse return service
def current service request if request matched route services request registry cornice servicespattern request matched route patterntry service services[pattern]except Key Error return Noneelse return service
def expanding apply arg func min periods 1 freq None args kwargs {} return ensure compat 'expanding' 'apply' arg freq freq min periods min periods func kw ['func' 'args' 'kwargs'] func func args args kwargs kwargs
def sha 1 hash digest payload return base 64 b64 encode hashlib sha 1 payload digest
def sha 1 hash digest payload return base 64 b64 encode hashlib sha 1 payload digest
@open file 0 mode 'rt' def read graph 6 path glist []for line in path line line strip if not len line continueglist append parse graph 6 line if len glist 1 return glist[ 0 ]else return glist
def decint raw forward True val 0byts bytearray src bytearray raw if not forward src reverse for bnum in src byts append bnum & 127 if bnum & 128 breakif not forward byts reverse for byte in byts val << 7val bytereturn val len byts
def decint raw forward True val 0byts bytearray src bytearray raw if not forward src reverse for bnum in src byts append bnum & 127 if bnum & 128 breakif not forward byts reverse for byte in byts val << 7val bytereturn val len byts
def find label paths subject 'fsaverage' pattern None subjects dir None subjects dir get subjects dir subjects dir raise error True subject dir os path join subjects dir subject lbl dir os path join subject dir 'label' if pattern is None paths []for dirpath filenames in os walk lbl dir rel dir os path relpath dirpath lbl dir for filename in fnmatch filter filenames '* label' path os path join rel dir filename paths append path else paths [os path relpath path lbl dir for path in iglob pattern ]return paths
def find label paths subject 'fsaverage' pattern None subjects dir None subjects dir get subjects dir subjects dir raise error True subject dir os path join subjects dir subject lbl dir os path join subject dir 'label' if pattern is None paths []for dirpath filenames in os walk lbl dir rel dir os path relpath dirpath lbl dir for filename in fnmatch filter filenames '* label' path os path join rel dir filename paths append path else paths [os path relpath path lbl dir for path in iglob pattern ]return paths
def memory memory oper ['read' 'write']memory scope ['local' 'global']test command 'sysbench--num-threads 64 --test memory'test command + '--memory-oper {0 }--memory-scope {1 }'test command + '--memory-block-size 1K--memory-total-size 32 Grun'result Noneret val {}for oper in memory oper for scope in memory scope key ' Operation {0 } Scope {1 }' format oper scope run command test command format oper scope result salt ['cmd run'] run command ret val[key] parser result return ret val
def compile device template pyfunc debug False inline False from descriptor import CUDA Target Descdft Device Function Template pyfunc debug debug inline inline class device function template Abstract Template key dftdef generic self args kws assert not kws return dft compile args typingctx CUDA Target Desc typingctxtypingctx insert user function dft device function template return dft
def to rgba c alpha None if is nth color c from matplotlib import rc Paramsprop cycler rc Params[u'axes prop cycle']colors prop cycler by key get u'color' [u'k'] c colors[ int c[ 1 ] % len colors ]try rgba colors full map cache[ c alpha ]except Key Error Type Error rgba to rgba no colorcycle c alpha try colors full map cache[ c alpha ] rgbaexcept Type Error passreturn rgba
def spawn personal stream args stuff None g['keyword'] g['listname'] ''g['PREFIX'] u2 str emojize format prefix th threading Thread target stream args c['USER DOMAIN'] args g['original name'] th daemon Trueth start
def stop On Error case reactor publisher None if publisher is None from twisted python import log as publisherrunning [ None]def stop If Error event if running and event get 'is Error' running pop reactor stop publisher add Observer stop If Error case add Cleanup publisher remove Observer stop If Error
def stop On Error case reactor publisher None if publisher is None from twisted python import log as publisherrunning [ None]def stop If Error event if running and event get 'is Error' running pop reactor stop publisher add Observer stop If Error case add Cleanup publisher remove Observer stop If Error
def stop On Error case reactor publisher None if publisher is None from twisted python import log as publisherrunning [ None]def stop If Error event if running and event get 'is Error' running pop reactor stop publisher add Observer stop If Error case add Cleanup publisher remove Observer stop If Error
def has pattern try from pattern en import parsereturn Trueexcept Import Error return False
def has pattern try from pattern en import parsereturn Trueexcept Import Error return False
def Potential name var model None model modelcontext model var name model name for name model potentials append var return var
@verbosedef fetch hcp mmp parcellation subjects dir None verbose None subjects dir get subjects dir subjects dir raise error True destination op join subjects dir 'fsaverage' 'label' fnames [op join destination 'lh HCPMMP 1 annot' op join destination 'rh HCPMMP 1 annot' ]if all op isfile fname for fname in fnames returnif '--accept-hcpmmp-license' in sys argv answer 'y'else answer input '%s\n Agree y/[n] ?' % hcp mmp license text if answer lower 'y' raise Runtime Error ' Youmustagreetothelicensetousethisdataset' fetch file 'https //ndownloader figshare com/files/ 5528816 ' fnames[ 0 ] hash '46 a 102 b 59 b 2 fb 1 bb 4 bd 62 d 51 bf 02 e 975 ' fetch file 'https //ndownloader figshare com/files/ 5528819 ' fnames[ 1 ] hash '75 e 96 b 331940227 bbcb 07 c 1 c 791 c 2463 '
def install widget ms 10 reactor None install Tk Functions global task task task Looping Call widget update task start ms / 1000 0 False
def normalize resource url resource url try protocol name split resource url resource url except Value Error protocol u'nltk'name resource urlif protocol u'nltk' and os path isabs name protocol u'file //'name normalize resource name name False None elif protocol u'file' protocol u'file //'name normalize resource name name False None elif protocol u'nltk' protocol u'nltk 'name normalize resource name name True else protocol + u' //'return u'' join [protocol name]
def fake exists path return False
def is process running node name command ['pidof' '-x' name]d node run as root command def not existing failure failure trap Process Terminated return Falsed add Callbacks lambda result True not existing return d
def is process running node name command ['pidof' '-x' name]d node run as root command def not existing failure failure trap Process Terminated return Falsed add Callbacks lambda result True not existing return d
def test from castra with selection castra pytest importorskip 'castra' blosc pytest importorskip 'blosc' if Loose Version blosc version '1 3 0' or Loose Version castra version < '0 1 8' pytest skip df pd Data Frame {'x' ['a' 'b' 'c' 'd'] 'y' [2 3 4 5]} index pd Index [1 0 2 0 3 0 4 0] name 'ind' a dd from pandas df 2 b dd from castra a to castra assert eq b[ b y > 3 ] x df[ df y > 3 ] x
def in 6 or a1 a2 return in 6 bitops a1 a2 0
@frappe whitelist def get users doctype name return frappe db sql u'select\n DCTB DCTB DCTB `name` `user` `read` `write` `share` `everyone`\n DCTB DCTB from\n DCTB DCTB DCTB tab Doc Share\n DCTB DCTB where\n DCTB DCTB DCTB share doctype %sandshare name %s' doctype name as dict True
@open file 0 mode 'rt' def read sparse 6 path glist []for line in path line line strip if not len line continueglist append parse sparse 6 line if len glist 1 return glist[ 0 ]else return glist
def requirejs xmodule request return render to response 'xmodule js' {'urls' get xmodule urls } content type 'text/javascript'
def requirejs xmodule request return render to response 'xmodule js' {'urls' get xmodule urls } content type 'text/javascript'
def requirejs xmodule request return render to response 'xmodule js' {'urls' get xmodule urls } content type 'text/javascript'
def requirejs xmodule request return render to response 'xmodule js' {'urls' get xmodule urls } content type 'text/javascript'
def in 6 iseui 64 x eui 64 inet pton socket AF INET 6 ' ff fe 00 0' x in 6 and inet pton socket AF INET 6 x eui 64 return x eui 64
def in 6 iseui 64 x eui 64 inet pton socket AF INET 6 ' ff fe 00 0' x in 6 and inet pton socket AF INET 6 x eui 64 return x eui 64
def python revision return sys version [3 ]
def get repository categories app id sa session app model context currentreturn sa session query app model Repository Category Association filter app model Repository Category Association table c repository id app security decode id id
def create api error from http exception e response e responsetry explanation response json ['message']except Value Error explanation response content strip cls API Errorif response status code 404 if explanation and ' Nosuchimage' in str explanation or 'notfound doesnotexistornoreadaccess' in str explanation cls Image Not Foundelse cls Not Foundraise cls e response response explanation explanation
@utils expects func args 'migration' def errors out migration function @functools wraps function def decorated function self context *args **kwargs try return function self context *args **kwargs except Exception as ex with excutils save and reraise exception wrapped func safe utils get wrapped function function keyed args inspect getcallargs wrapped func self context *args **kwargs migration keyed args['migration']if not isinstance ex exception Instance Not Found status migration statusif status not in ['migrating' 'post-migrating'] returnmigration status 'error'try with migration obj as admin migration save except Exception LOG debug ' Errorsettingmigrationstatusforinstance%s ' migration instance uuid exc info True return decorated function
def task id str task family params param str json dumps params separators ' ' ' ' sort keys True param hash hashlib md 5 param str encode 'utf- 8 ' hexdigest param summary ' ' join p[ TASK ID TRUNCATE PARAMS] for p in params[p] for p in sorted params [ TASK ID INCLUDE PARAMS] param summary TASK ID INVALID CHAR REGEX sub ' ' param summary return '{} {} {}' format task family param summary param hash[ TASK ID TRUNCATE HASH]
def task id str task family params param str json dumps params separators ' ' ' ' sort keys True param hash hashlib md 5 param str encode 'utf- 8 ' hexdigest param summary ' ' join p[ TASK ID TRUNCATE PARAMS] for p in params[p] for p in sorted params [ TASK ID INCLUDE PARAMS] param summary TASK ID INVALID CHAR REGEX sub ' ' param summary return '{} {} {}' format task family param summary param hash[ TASK ID TRUNCATE HASH]
def get method java object method name return Java Member method name java object java object target id java object gateway client
def validate config section filename config section if not isinstance config dict raise Configuration Error u" Infile'{filename}' {section}mustbeamapping not{type} " format filename filename section section type anglicize json type python type to yaml type config for key value in config items if not isinstance key six string types raise Configuration Error u" Infile'{filename}' the{section}name{name}mustbeaquotedstring i e '{name}' " format filename filename section section name key if not isinstance value dict type None raise Configuration Error u" Infile'{filename}' {section}'{name}'mustbeamappingnot{type} " format filename filename section section name key type anglicize json type python type to yaml type value
def color func func name if str func name isdigit return term color int func name return globals [func name]
def task cli pkg install distribution package source Package Source commands task package install 'clusterhq-flocker-cli' distribution package source return sequence [ Effect Sudo command e intent command log command filter e intent log command filter if isinstance e intent Run else e for e in commands intent effects]
def node redundancy G nodes None if nodes is None nodes Gif any len G[v] < 2 for v in nodes raise Network X Error ' Cannotcomputeredundancycoefficientforanodethathasfewerthantwoneighbors ' return {v node redundancy G v for v in nodes}
def parse one rule from dict rule rule pop 'description' None trigger rule pop 'trigger' None case sensitive rule pop 'case Sensitive' True if case sensitive 'false' case sensitive Falseelif case sensitive 'true' case sensitive Truetry search rule pop 'search' except Key Error raise Value Error ' Redactionruleismissing`search`field' try replace rule pop 'replace' except Key Error raise Value Error ' Redactionruleismissing`replace`field' if rule raise Value Error ' Redactionrulecontainsunknownfield s %s' % rule keys return Redaction Rule trigger search replace case sensitive
def parse one rule from dict rule rule pop 'description' None trigger rule pop 'trigger' None case sensitive rule pop 'case Sensitive' True if case sensitive 'false' case sensitive Falseelif case sensitive 'true' case sensitive Truetry search rule pop 'search' except Key Error raise Value Error ' Redactionruleismissing`search`field' try replace rule pop 'replace' except Key Error raise Value Error ' Redactionruleismissing`replace`field' if rule raise Value Error ' Redactionrulecontainsunknownfield s %s' % rule keys return Redaction Rule trigger search replace case sensitive
def subtract X Intersections Table subtract From Table subtract Table subtract From Table Keys subtract From Table keys subtract From Table Keys sort for subtract From Table Key in subtract From Table Keys x Intersection Index List []add X Intersection Indexes From X Intersections -1 x Intersection Index List subtract From Table[subtract From Table Key] if subtract From Table Key in subtract Table add X Intersection Indexes From X Intersections 0 x Intersection Index List subtract Table[subtract From Table Key] x Intersections get X Intersections From Intersections x Intersection Index List if len x Intersections > 0 subtract From Table[subtract From Table Key] x Intersectionselse del subtract From Table[subtract From Table Key]
def set style style None rc None style object axes style style rc mpl rc Params update style object
def is Network Roaming try m Context autoclass 'android content Context' python Activity autoclass 'org renpy android Python Service' telephony Manager cast 'android telephony Telephony Manager' python Activity m Service get System Service m Context TELEPHONY SERVICE is Network Roaming telephony Manager is Network Roaming return is Network Roamingexcept Exception as e return None
def is Network Roaming try m Context autoclass 'android content Context' python Activity autoclass 'org renpy android Python Service' telephony Manager cast 'android telephony Telephony Manager' python Activity m Service get System Service m Context TELEPHONY SERVICE is Network Roaming telephony Manager is Network Roaming return is Network Roamingexcept Exception as e return None
@dec skip without 'sqlite 3 ' def test macro run ip get ipython ip history manager reset cmds ['a 10 ' 'a+ 1' py 3 compat doctest refactor print 'printa' '%macrotest 2 - 3 ']for cmd in cmds ip run cell cmd store history True nt assert equal ip user ns['test'] value py 3 compat doctest refactor print 'a+ 1\nprinta\n' with tt Assert Prints '12 ' ip run cell 'test' with tt Assert Prints '13 ' ip run cell 'test'
def isleap year return year % 4 0 and year % 100 0 or year % 400 0
def vb wait for network address timeout step None machine name None machine None kwargs {'machine name' machine name 'machine' machine}return wait for vb get network addresses timeout timeout step step default [] func kwargs kwargs
def add jinja 2 ext pelican if u'JINJA ENVIRONMENT' in pelican settings pelican settings[u'JINJA ENVIRONMENT'][u'extensions'] append Assets Extension else pelican settings[u'JINJA EXTENSIONS'] append Assets Extension
def add jinja 2 ext pelican if u'JINJA ENVIRONMENT' in pelican settings pelican settings[u'JINJA ENVIRONMENT'][u'extensions'] append Assets Extension else pelican settings[u'JINJA EXTENSIONS'] append Assets Extension
def unroll deep autoencoder net Network deep autoencoder layers net weights deep autoencoder weights[ len deep autoencoder layers - 1 ]net biases deep autoencoder biases[ len deep autoencoder layers - 1 ]return net
@with setup prepare stderr def test many features a file filename syntax feature name 'many features a file' runner Runner filename assert raises Lettuce Runner Error runner run assert stderr lines ' Syntaxerrorat %s\n Afeaturefilemustcontain ONLYON Efeature \n' % filename
def fetch latest from memcache app version proto string memcache get app version namespace NAMESPACE if proto string logging debug ' Loadedmostrecentconfdatafrommemcache ' return db model from protobuf proto string logging debug ' Triedtoloadconfdatafrommemcache butfoundnothing ' return None
def set reply headers new message previous message if previous message message id header new message in reply to previous message message id headerif previous message references new message references previous message references + [previous message message id header] else new message references [previous message message id header]
def translation language global translationsif language not in translations translations[language] Django Translation language return translations[language]
def translation language global translationsif language not in translations translations[language] Django Translation language return translations[language]
def find review request request review request id local site review request find review request object review request id local site if review request is accessible by request user return review request None else return None render permission denied request
def find review request request review request id local site review request find review request object review request id local site if review request is accessible by request user return review request None else return None render permission denied request
def ec 2 client region zone access key id secret access key session token None validate region True connection boto 3 session Session aws access key id access key id aws secret access key secret access key aws session token session token connection session set config variable 'metadata service num attempts' BOTO NUM RETRIES ec 2 resource connection resource 'ec 2 ' region name region if validate region try zones ec 2 resource meta client describe availability zones except Endpoint Connection Error raise Invalid Region Error region available zones [available zone[' Zone Name'] for available zone in zones[' Availability Zones']]if zone not in available zones raise Invalid Zone Error zone available zones return EC 2 zone zone connection ec 2 resource
def fetch token mock *args **kwargs return
def fetch token mock *args **kwargs return
def describe volume volume return {'id' volume id 'creation time' format time get volume creation time volume 'provider' volume driver name 'region' get volume region volume 'extra' repr volume extra }
def randperm n r range n x []while r i random choice r x append i r remove i return x
def check conflicts unmerged if prefs check conflicts unmerged [path for path in unmerged if is conflict free path ]return unmerged
@taskdef prepare prepare apt checkout cache
def nn model text vectors query k 5 qf encode model [query] qf / norm qf scores numpy dot qf vectors T flatten sorted args numpy argsort scores [ -1 ]sentences [text[a] for a in sorted args[ k]]print 'QUERY ' + query print 'NEAREST 'for i s in enumerate sentences print s sorted args[i]
def set Up Module global ENGIN Eglobal SESSIONENGINE create engine 'sqlite //' Base metadata create all ENGINE session factory sessionmaker bind ENGINE SESSION scoped session session factory
def increment ipv 4 segments segments segments [int segment for segment in segments]segments[ 3 ] + 1if segments[ 3 ] 256 segments[ 3 ] 0segments[ 2 ] + 1if segments[ 2 ] 256 segments[ 2 ] 0segments[ 1 ] + 1if segments[ 1 ] 256 segments[ 1 ] 0segments[ 0 ] + 1return segments
def update user email user new email validate email unique new email validate email new email user email new emailuser save
def raises exc func *args try func *args except exc return Trueelse return False
def conlleval p g w filename script path out ''for sl sp sw in zip g p w out + 'BOSOO\n'for wl wp w in zip sl sp sw out + w + '' + wl + '' + wp + '\n' out + 'EOSOO\n\n'f open filename 'w' f writelines out f close return get perf filename script path
@register filterdef prepend http if necessary value parsed urlparse value if not parsed scheme return 'http //' + parsed geturl return value
def get model classes result []for module name in MODEL MODULE NAMES module importlib import module module name model classes getattr module 'MODELS' [] result extend model classes return result
def get jid snapshots jid config 'root' jid snapshots [x for x in list snapshots config if x['userdata'] get 'salt jid' jid ]pre snapshot [x for x in jid snapshots if x['type'] 'pre' ]post snapshot [x for x in jid snapshots if x['type'] 'post' ]if not pre snapshot or not post snapshot raise Command Execution Error " Jid'{ 0 }'snapshotsnotfound" format jid return pre snapshot[ 0 ]['id'] post snapshot[ 0 ]['id']
@webauth Security Check@csrf ensure csrf cookiedef Homepage request renderers js files set ['statistics js' 'usage js'] create time psutil Process os getpid create time context {'heading' config lib CONFIG[' Admin UI heading'] 'report url' config lib CONFIG[' Admin UI report url'] 'help url' config lib CONFIG[' Admin UI help url'] 'use precompiled js' config lib CONFIG[' Admin UI use precompiled js'] 'renderers js' renderers js files 'timestamp' create time}response shortcuts render to response 'base html' context context instance template Request Context request request REQ request GET dict request token Build Token request 60 user record aff 4 FACTORY Create aff 4 ROOT URN Add 'users' Add request user aff 4 type aff 4 users GRR User mode 'r' token request token canary mode user record Get user record Schema GUI SETTINGS canary modeif canary mode response set cookie 'canary mode' 'true' else response delete cookie 'canary mode' return response
@webauth Security Check@csrf ensure csrf cookiedef Homepage request renderers js files set ['statistics js' 'usage js'] create time psutil Process os getpid create time context {'heading' config lib CONFIG[' Admin UI heading'] 'report url' config lib CONFIG[' Admin UI report url'] 'help url' config lib CONFIG[' Admin UI help url'] 'use precompiled js' config lib CONFIG[' Admin UI use precompiled js'] 'renderers js' renderers js files 'timestamp' create time}response shortcuts render to response 'base html' context context instance template Request Context request request REQ request GET dict request token Build Token request 60 user record aff 4 FACTORY Create aff 4 ROOT URN Add 'users' Add request user aff 4 type aff 4 users GRR User mode 'r' token request token canary mode user record Get user record Schema GUI SETTINGS canary modeif canary mode response set cookie 'canary mode' 'true' else response delete cookie 'canary mode' return response
def filter roidb roidb def is valid entry overlaps entry['max overlaps']fg inds np where overlaps > cfg TRAIN FG THRESH [0 ]bg inds np where overlaps < cfg TRAIN BG THRESH HI & overlaps > cfg TRAIN BG THRESH LO [0 ]valid len fg inds > 0 or len bg inds > 0 return validnum len roidb filtered roidb [entry for entry in roidb if is valid entry ]num after len filtered roidb print ' Filtered{}roidbentries {}->{}' format num - num after num num after return filtered roidb
def filter roidb roidb def is valid entry overlaps entry['max overlaps']fg inds np where overlaps > cfg TRAIN FG THRESH [0 ]bg inds np where overlaps < cfg TRAIN BG THRESH HI & overlaps > cfg TRAIN BG THRESH LO [0 ]valid len fg inds > 0 or len bg inds > 0 return validnum len roidb filtered roidb [entry for entry in roidb if is valid entry ]num after len filtered roidb print ' Filtered{}roidbentries {}->{}' format num - num after num num after return filtered roidb
def filter roidb roidb def is valid entry overlaps entry['max overlaps']fg inds np where overlaps > cfg TRAIN FG THRESH [0 ]bg inds np where overlaps < cfg TRAIN BG THRESH HI & overlaps > cfg TRAIN BG THRESH LO [0 ]valid len fg inds > 0 or len bg inds > 0 return validnum len roidb filtered roidb [entry for entry in roidb if is valid entry ]num after len filtered roidb print ' Filtered{}roidbentries {}->{}' format num - num after num num after return filtered roidb
def generate argument parser for metadata metadata parameters metadata['parameters']parser argparse Argument Parser description metadata['description'] for parameter name parameter options in parameters items name parameter name replace ' ' '-' description parameter options['description'] type parameter options['type']required parameter options get 'required' False default value parameter options get 'default' None immutable parameter options get 'immutable' False if immutable continueargs [ '--%s' % name ]kwargs {'help' description 'required' required}if default value is not None kwargs['default'] default valueif type 'string' kwargs['type'] strelif type 'integer' kwargs['type'] intelif type 'boolean' if default value is False kwargs['action'] 'store false'else kwargs['action'] 'store true'parser add argument *args **kwargs return parser
def server mailname if not is installed 'postfix' preseed package 'postfix' {'postfix/main mailer type' 'select' ' Internet Site' 'postfix/mailname' 'string' mailname 'postfix/destinations' 'string' '%s localhost localdomain localhost' % mailname } install 'postfix' started 'postfix'
def Eval Exponential Cdf x lam return 1 - math exp - lam * x
def compose views request user profile method kwarg pairs json dict {}with transaction atomic for method kwargs in method kwarg pairs response method request user profile **kwargs if response status code 200 raise Jsonable Error response content json dict update ujson loads response content return json success json dict
def mark asn 1 named ec curve backend ec cdata backend lib EC KEY set asn 1 flag ec cdata backend lib OPENSSL EC NAMED CURVE
def mark asn 1 named ec curve backend ec cdata backend lib EC KEY set asn 1 flag ec cdata backend lib OPENSSL EC NAMED CURVE
def add data sharing consent field request form desc enterprise customer get enterprise customer for request request required data sharing consent required at login request if not data sharing consent requested request returnlabel ' Iagreetoallow{platform name}tosharedataaboutmyenrollment completionandperformanceinall{platform name}coursesandprogramswheremyenrollmentissponsoredby{ec name} ' format platform name configuration helpers get value 'PLATFORM NAME' settings PLATFORM NAME ec name enterprise customer name error msg ' Tolinkyouraccountwith{ec name} youarerequiredtoconsenttodatasharing ' format ec name enterprise customer name form desc add field 'data sharing consent' label label field type 'checkbox' default False required required error messages {'required' error msg}
def add data sharing consent field request form desc enterprise customer get enterprise customer for request request required data sharing consent required at login request if not data sharing consent requested request returnlabel ' Iagreetoallow{platform name}tosharedataaboutmyenrollment completionandperformanceinall{platform name}coursesandprogramswheremyenrollmentissponsoredby{ec name} ' format platform name configuration helpers get value 'PLATFORM NAME' settings PLATFORM NAME ec name enterprise customer name error msg ' Tolinkyouraccountwith{ec name} youarerequiredtoconsenttodatasharing ' format ec name enterprise customer name form desc add field 'data sharing consent' label label field type 'checkbox' default False required required error messages {'required' error msg}
def Standardized Moment xs k var Central Moment xs 2 std math sqrt var return Central Moment xs k / std ** k
def record action action request data None if data is None data {}data['user-agent'] request META get 'HTTP USER AGENT' data['locale'] request LAN Gdata['src'] request GET get 'src' '' record stat action request **data
def magma rc u'image' cmap u'magma' im gci if im is not None im set cmap cm magma
def regexp extraction string regexp groups 1 regexp search re search string str string pattern str regexp if regexp search if regexp search group groups '' return str regexp search group groups return None
def regexp extraction string regexp groups 1 regexp search re search string str string pattern str regexp if regexp search if regexp search group groups '' return str regexp search group groups return None
def init cachedir base None if base is None base opts ['cachedir']needed dirs base os path join base 'requested' os path join base 'active' for dir in needed dirs if not os path exists dir os makedirs dir os chmod base 493 return base
def init cachedir base None if base is None base opts ['cachedir']needed dirs base os path join base 'requested' os path join base 'active' for dir in needed dirs if not os path exists dir os makedirs dir os chmod base 493 return base
def init cachedir base None if base is None base opts ['cachedir']needed dirs base os path join base 'requested' os path join base 'active' for dir in needed dirs if not os path exists dir os makedirs dir os chmod base 493 return base
def generate filename and delete previous ffile name before delete None new filename ffile field generate filename ffile instance name try orig instance ffile instance class objects get id ffile instance id orig field file getattr orig instance ffile field name orig filename orig field file nameif orig filename and new filename orig filename if before delete before delete orig field file orig field file delete except ffile instance class Does Not Exist passreturn new filename
def install le auto contents venv dir venv le auto path join venv dir 'letsencrypt-auto' with open venv le auto path 'w' as le auto le auto write contents chmod venv le auto path S IRUSR S IXUSR
def install le auto contents venv dir venv le auto path join venv dir 'letsencrypt-auto' with open venv le auto path 'w' as le auto le auto write contents chmod venv le auto path S IRUSR S IXUSR
def call with retry max attempts def wrapper f def func wrapper *args **kwargs action '% func s' % {'func' getattr f ' name ' f } for attempt in range 1 max attempts + 1 try return f *args **kwargs except oslo messaging Messaging Exception with excutils save and reraise exception reraise False as ctxt LOG warning LW ' Failedtoexecute% action s % attempt doutof% max attempts d' {'attempt' attempt 'max attempts' max attempts 'action' action} if attempt max attempts ctxt reraise Truereturn func wrapperreturn wrapper
def call with retry max attempts def wrapper f def func wrapper *args **kwargs action '% func s' % {'func' getattr f ' name ' f } for attempt in range 1 max attempts + 1 try return f *args **kwargs except oslo messaging Messaging Exception with excutils save and reraise exception reraise False as ctxt LOG warning LW ' Failedtoexecute% action s % attempt doutof% max attempts d' {'attempt' attempt 'max attempts' max attempts 'action' action} if attempt max attempts ctxt reraise Truereturn func wrapperreturn wrapper
def check course access course key user None ip address None url None if not settings FEATURES get 'EMBARGO' return Truecourse is restricted Restricted Course is restricted course course key if not course is restricted return Trueif user is not None and has course author access user course key return Trueif ip address is not None user country from ip country code from ip ip address if not Country Access Rule check country access course key user country from ip log info u" Blockinguser%sfromaccessingcourse%sat%sbecausetheuser's I Paddress%sappearstobelocatedin%s " getattr user 'id' '< Not Authenticated>' course key url ip address user country from ip return Falseif user is not None user country from profile get user country from profile user if not Country Access Rule check country access course key user country from profile log info u" Blockinguser%sfromaccessingcourse%sat%sbecausetheuser'sprofilecountryis%s " user id course key url user country from profile return Falsereturn True
def check course access course key user None ip address None url None if not settings FEATURES get 'EMBARGO' return Truecourse is restricted Restricted Course is restricted course course key if not course is restricted return Trueif user is not None and has course author access user course key return Trueif ip address is not None user country from ip country code from ip ip address if not Country Access Rule check country access course key user country from ip log info u" Blockinguser%sfromaccessingcourse%sat%sbecausetheuser's I Paddress%sappearstobelocatedin%s " getattr user 'id' '< Not Authenticated>' course key url ip address user country from ip return Falseif user is not None user country from profile get user country from profile user if not Country Access Rule check country access course key user country from profile log info u" Blockinguser%sfromaccessingcourse%sat%sbecausetheuser'sprofilecountryis%s " user id course key url user country from profile return Falsereturn True
def check course access course key user None ip address None url None if not settings FEATURES get 'EMBARGO' return Truecourse is restricted Restricted Course is restricted course course key if not course is restricted return Trueif user is not None and has course author access user course key return Trueif ip address is not None user country from ip country code from ip ip address if not Country Access Rule check country access course key user country from ip log info u" Blockinguser%sfromaccessingcourse%sat%sbecausetheuser's I Paddress%sappearstobelocatedin%s " getattr user 'id' '< Not Authenticated>' course key url ip address user country from ip return Falseif user is not None user country from profile get user country from profile user if not Country Access Rule check country access course key user country from profile log info u" Blockinguser%sfromaccessingcourse%sat%sbecausetheuser'sprofilecountryis%s " user id course key url user country from profile return Falsereturn True
def validate named port params params if not params['named ports'] return True '' if not isinstance params['named ports'] list return False 'named ports expectedlistofname portdictionaries ' req fields [{'name' 'name' 'required' True 'type' str} {'name' 'port' 'required' True 'type' int}]for np in params['named ports'] valid named ports np msg check params np req fields if not valid named ports return False np msg return True ''
@task@timeddef uninstall python packages hasher hashlib sha 1 hasher update repr PACKAGES TO UNINSTALL expected version hasher hexdigest state file path os path join PREREQS STATE DIR ' Python uninstall sha 1 ' create prereqs cache dir if os path isfile state file path with open state file path as state file version state file read if version expected version print ' Pythonuninstallsunchanged skipping 'returnfor in range 3 uninstalled Falsefrozen sh 'pipfreeze' capture True for package name in PACKAGES TO UNINSTALL if package in frozen package name frozen sh 'pipuninstall--disable-pip-version-check-y{}' format package name uninstalled Trueif not uninstalled breakelse print " Couldn'tuninstallunwanted Pythonpackages "returnwith open state file path 'w' as state file state file write expected version
@task@timeddef uninstall python packages hasher hashlib sha 1 hasher update repr PACKAGES TO UNINSTALL expected version hasher hexdigest state file path os path join PREREQS STATE DIR ' Python uninstall sha 1 ' create prereqs cache dir if os path isfile state file path with open state file path as state file version state file read if version expected version print ' Pythonuninstallsunchanged skipping 'returnfor in range 3 uninstalled Falsefrozen sh 'pipfreeze' capture True for package name in PACKAGES TO UNINSTALL if package in frozen package name frozen sh 'pipuninstall--disable-pip-version-check-y{}' format package name uninstalled Trueif not uninstalled breakelse print " Couldn'tuninstallunwanted Pythonpackages "returnwith open state file path 'w' as state file state file write expected version
def define vol xml str xml poolname salt ['config get'] 'libvirt storagepool' 'default' conn get conn pool conn storage Pool Lookup By Name str poolname return pool create XML xml 0 is not None
def get ptb words vocabulary return retrieve word vocabulary
def s size block name offset 0 length 4 endian '<' format 'binary' inclusive False signed False math None fuzzable False name None if block name in blocks CURRENT block stack raise sex Sully Runtime Error 'CANNOTADDASIZEFORABLOCKCURRENTLYINTHESTACK' size blocks size block name blocks CURRENT offset length endian format inclusive signed math fuzzable name blocks CURRENT push size
def validate config if not isinstance config dict return False ' Configurationforstatusbeaconmustbeadictionary ' return True ' Validbeaconconfiguration'
def hostgroup exists name None groupid None node None nodeids None **connection args conn args login **connection args zabbix version apiinfo version **connection args try if conn args if Loose Version zabbix version > Loose Version '2 5' if not groupid groupid Noneif not name name Noneret hostgroup get name groupid **connection args return bool ret else params {}method 'hostgroup exists'if groupid params['groupid'] groupidif name params['name'] nameif Loose Version zabbix version < Loose Version '2 4' if node params['node'] nodeif nodeids params['nodeids'] nodeidsif not groupid and not name and not node and not nodeids return {'result' False 'comment' ' Pleasesubmitgroupid name nodeornodeidsparametertocheckifatleastonehostgroupthatmatchesthegivenfiltercriteriaexists '}ret query method params conn args['url'] conn args['auth'] return ret['result']else raise Key Errorexcept Key Error return False
def make browser model browser filter type None factories { Filter Type instrument hotswap make instruments browser model Filter Type drum pad hotswap make drum pad browser model Filter Type audio effect hotswap make audio effect browser model Filter Type midi effect hotswap make midi effect browser model}if filter type None filter type filter type for browser browser return factories get filter type make fallback browser model browser
def get file from s3 creds metadata saltenv bucket path cached file path if os path isfile cached file path file meta find file meta metadata bucket saltenv path file md 5 '' join list filter str isalnum file meta['E Tag'] if file meta else None cached md 5 salt utils get hash cached file path 'md 5 ' log debug ' Cachedfile path {0 } md 5 {1 } etag {2 }' format cached file path cached md 5 file md 5 log debug ' Cachedfile path {0 } md 5 {1 } etag {2 }' format cached file path cached md 5 file md 5 if cached md 5 file md 5 return utils ['s 3 query'] key creds key keyid creds keyid kms keyid creds kms keyid bucket bucket service url creds service url path quote path local file cached file path verify ssl creds verify ssl location creds location path style creds path style https enable creds https enable
def set Default Privacy List disp listname None return set Active Privacy List disp listname 'default'
def set Default Privacy List disp listname None return set Active Privacy List disp listname 'default'
def get Sequence Index Plus One From Text file Text craft Sequence get Read Craft Sequence for craft Sequence Index in xrange len craft Sequence - 1 -1 -1 procedure craft Sequence[craft Sequence Index]if gcodec is Procedure Done file Text procedure return craft Sequence Index + 1 return 0
def keyed md 5 secret challenge warnings warn 'keyed md 5 isdeprecated Usethestdlibmodulehmacinstead ' Deprecation Warning stacklevel 2 return hmac HMAC secret challenge hexdigest
def get ip addresses include loopback True system platform system if system lower in ['linux' 'darwin' 'macosx'] ips [iface get 'inet' for iface in ifcfg interfaces values ]elif system lower 'windows' ipconfig os popen 'ipconfig/all' read ips [match[ 1 ] for match in re findall 'IP v4 ? Address[\\ \\ ]+ [\\d\\ ]+ ' ipconfig ]else ips []ips set ips - set [ None ''] if include loopback ips ips union [' 127 0 0 1'] else ips ips - set [' 127 0 0 1'] return list ips
def validate file listed None subtask None from utils import Validation Annotatorannotator Validation Annotator file listed listed task id cache get annotator cache key if task id return Async Result task id else chain annotator taskif subtask is not None chain subtaskresult chain delay cache set annotator cache key result task id 5 * 60 return result
def pr compile regex cleanup None return re compile regex cleanup
def setup platform hass config add devices disc info None if disc info is None returnif not any [data[CONF TRACK] for data in disc info[CONF ENTITIES]] returncalendar service Google Calendar Service hass config path TOKEN FILE add devices [ Google Calendar Event Device hass calendar service disc info[CONF CAL ID] data for data in disc info[CONF ENTITIES] if data[CONF TRACK]]
def to dict sentence token str list children [[] for token in sentence token]root -1 for i in range 0 len sentence token token sentence token[i]token str append '%s%s%s@%d' % token word token tag token label i + 1 if token head -1 root ielse children[token head] append i def get dict i d collections Ordered Dict for c in children[i] d[token str[c]] get dict c return dtree collections Ordered Dict tree[token str[root]] get dict root return tree
def write obj handle **kwargs trees list obj writer Newick IO Writer trees nexus trees [ TREE TEMPLATE % {'index' idx + 1 'tree' nwk} for idx nwk in enumerate writer to strings plain False plain newick True **kwargs ]tax labels [str x name for x in chain * t get terminals for t in trees ]text NEX TEMPLATE % {'count' len tax labels 'labels' '' join tax labels 'trees' '\n' join nexus trees } handle write text return len nexus trees
def write obj handle **kwargs trees list obj writer Newick IO Writer trees nexus trees [ TREE TEMPLATE % {'index' idx + 1 'tree' nwk} for idx nwk in enumerate writer to strings plain False plain newick True **kwargs ]tax labels [str x name for x in chain * t get terminals for t in trees ]text NEX TEMPLATE % {'count' len tax labels 'labels' '' join tax labels 'trees' '\n' join nexus trees } handle write text return len nexus trees
def write obj handle **kwargs trees list obj writer Newick IO Writer trees nexus trees [ TREE TEMPLATE % {'index' idx + 1 'tree' nwk} for idx nwk in enumerate writer to strings plain False plain newick True **kwargs ]tax labels [str x name for x in chain * t get terminals for t in trees ]text NEX TEMPLATE % {'count' len tax labels 'labels' '' join tax labels 'trees' '\n' join nexus trees } handle write text return len nexus trees
def get sample sample output check output [NODE TOOL 'rangekeysample'] keys [{'key' key strip decode 'hex' 'size' 0} for key in sample output splitlines [1 ]]sorted keys key lambda key key['key'] return keys
def Create Binary Config Paths token None required urns set try for platform in SUPPORTED PLATFORMS required urns add 'aff 4 /config/executables/%s/agentupdates' % platform required urns add 'aff 4 /config/executables/%s/installers' % platform existing urns [x['urn'] for x in aff 4 FACTORY Stat list required urns token token ]missing urns required urns - set existing urns for urn in missing urns aff 4 FACTORY Create urn aff 4 AFF 4 Volume token token Flush except access control Unauthorized Access logging info ' Userisnotadmin cannotcheckconfigurationtree ' return
def create warning path error message skip file True print string 'warning 'if skip file print string print string + ' Skippingfile' + path + ' ' print string print string + error message warning message Warning Result message print string error False warning True return warning message
def create warning path error message skip file True print string 'warning 'if skip file print string print string + ' Skippingfile' + path + ' ' print string print string + error message warning message Warning Result message print string error False warning True return warning message
def test strongly typed events def f global calledcalled Trueglobal calledcalled Falseev Iron Python Test Events ev Instance Test + Iron Python Test Event Test Delegate f ev Call Instance Are Equal called True called Falseev Instance Test - Iron Python Test Event Test Delegate f ev Call Instance Are Equal called False
def test strongly typed events def f global calledcalled Trueglobal calledcalled Falseev Iron Python Test Events ev Instance Test + Iron Python Test Event Test Delegate f ev Call Instance Are Equal called True called Falseev Instance Test - Iron Python Test Event Test Delegate f ev Call Instance Are Equal called False
def test strongly typed events def f global calledcalled Trueglobal calledcalled Falseev Iron Python Test Events ev Instance Test + Iron Python Test Event Test Delegate f ev Call Instance Are Equal called True called Falseev Instance Test - Iron Python Test Event Test Delegate f ev Call Instance Are Equal called False
def test strongly typed events def f global calledcalled Trueglobal calledcalled Falseev Iron Python Test Events ev Instance Test + Iron Python Test Event Test Delegate f ev Call Instance Are Equal called True called Falseev Instance Test - Iron Python Test Event Test Delegate f ev Call Instance Are Equal called False
def test strongly typed events def f global calledcalled Trueglobal calledcalled Falseev Iron Python Test Events ev Instance Test + Iron Python Test Event Test Delegate f ev Call Instance Are Equal called True called Falseev Instance Test - Iron Python Test Event Test Delegate f ev Call Instance Are Equal called False
def test strongly typed events def f global calledcalled Trueglobal calledcalled Falseev Iron Python Test Events ev Instance Test + Iron Python Test Event Test Delegate f ev Call Instance Are Equal called True called Falseev Instance Test - Iron Python Test Event Test Delegate f ev Call Instance Are Equal called False
def guess repo path None global repodirif path repodir pathif not repodir repodir os environ get 'BUP DIR' if not repodir repodir os path expanduser '~/ bup'
def ranked Fitness R res zeros like R l list zip R list range len R l sort for i j in enumerate l res[j] ireturn res
def reap fileserver cache dir cache base find func for saltenv in os listdir cache base env base os path join cache base saltenv for root dirs files in os walk env base if len dirs 0 and len files 0 if time time - os path getctime root > 60 os rmdir root continuefor file in files file path os path join root file file rel path os path relpath file path env base try filename hash type file rel path rsplit ' ' 2 except Value Error log warning ' Foundinvalidhashfile[{ 0 }]whenattemptingtoreapcachedirectory ' format file continueret find func filename saltenv saltenv if ret['path'] '' os unlink file path
def reap fileserver cache dir cache base find func for saltenv in os listdir cache base env base os path join cache base saltenv for root dirs files in os walk env base if len dirs 0 and len files 0 if time time - os path getctime root > 60 os rmdir root continuefor file in files file path os path join root file file rel path os path relpath file path env base try filename hash type file rel path rsplit ' ' 2 except Value Error log warning ' Foundinvalidhashfile[{ 0 }]whenattemptingtoreapcachedirectory ' format file continueret find func filename saltenv saltenv if ret['path'] '' os unlink file path
def reap fileserver cache dir cache base find func for saltenv in os listdir cache base env base os path join cache base saltenv for root dirs files in os walk env base if len dirs 0 and len files 0 if time time - os path getctime root > 60 os rmdir root continuefor file in files file path os path join root file file rel path os path relpath file path env base try filename hash type file rel path rsplit ' ' 2 except Value Error log warning ' Foundinvalidhashfile[{ 0 }]whenattemptingtoreapcachedirectory ' format file continueret find func filename saltenv saltenv if ret['path'] '' os unlink file path
@contextmanagerdef temporary file path root dir None cleanup True suffix u'' permissions None with temporary file root dir cleanup cleanup suffix suffix permissions permissions as fd fd close yield fd name
@pytest fixture scope u'function' def remove output folder request def finalizer remove output folder if os path exists u'output folder' utils rmtree u'output folder' request addfinalizer finalizer remove output folder
@must be contributor or publicdef claim user post node **kwargs request data request jsonunclaimed user User load request data['pk'] unclaimed data unclaimed user get unclaimed record node primary key if 'value' in request data email request data['value'] lower strip claimer get user email email if claimer and claimer is registered send claim registered email claimer unclaimed user node else send claim email email unclaimed user node notify True elif 'claimer Id' in request data claimer id request data['claimer Id']claimer User load claimer id send claim registered email claimer unclaimed user node email claimer usernameelse raise HTTP Error http BAD REQUEST return {'status' 'success' 'email' email 'fullname' unclaimed data['name']}
def set num instances instances server None version None if not isinstance instances long int raise Type Error "'instances'argmustbeoftypelongorint " req servers service pb Set Num Instances Request req set instances instances if server req set server server if version req set version version resp servers service pb Set Num Instances Response try apiproxy stub map Make Sync Call 'servers' ' Set Num Instances' req resp except apiproxy errors Application Error as e if e application error servers service pb Servers Service Error INVALID VERSION raise Invalid Version Error elif e application error servers service pb Servers Service Error TRANSIENT ERROR raise Transient Error else raise Error
def cellname x y assert x > 0 return colnum 2 name x + str y
def dot Unquoter line if line startswith ' ' return line[ 1 ]return line
def dot Unquoter line if line startswith ' ' return line[ 1 ]return line
def setup platform hass config add devices discovery info None add devices [ Demo Weather ' South' ' Sunshine' 21 92 1099 0 5 TEMP CELSIUS Demo Weather ' North' ' Showerrain' -12 54 987 4 8 TEMP FAHRENHEIT ]
def create array of type t if t in array types return array types[t] array type name ' Array Of%s' % t array type type array type name Data Object {} def init self super array type self init array type name setattr self t [] setattr array type ' init ' init array types[t] array typereturn array type
def get service manager host reference return host reference config Manager service System
def get upload pipeline in fd out fd rate limit None gpg key None lzop True commands []if rate limit is not None commands append Pipe Viewer Rate Limit Filter rate limit if lzop commands append LZO Compression Filter if gpg key is not None commands append GPG Encryption Filter gpg key return Pipeline commands in fd out fd
def get upload pipeline in fd out fd rate limit None gpg key None lzop True commands []if rate limit is not None commands append Pipe Viewer Rate Limit Filter rate limit if lzop commands append LZO Compression Filter if gpg key is not None commands append GPG Encryption Filter gpg key return Pipeline commands in fd out fd
def get upload pipeline in fd out fd rate limit None gpg key None lzop True commands []if rate limit is not None commands append Pipe Viewer Rate Limit Filter rate limit if lzop commands append LZO Compression Filter if gpg key is not None commands append GPG Encryption Filter gpg key return Pipeline commands in fd out fd
@scope definedef callpipe 1 fn list arg for f in fn list arg f arg return arg
@scope definedef callpipe 1 fn list arg for f in fn list arg f arg return arg
def libvlc audio get mute p mi f Cfunctions get 'libvlc audio get mute' None or Cfunction 'libvlc audio get mute' 1 None ctypes c int Media Player return f p mi
def cb Pick Mailbox result proto mboxes mbox mboxes[ int result or '1 ' - 1 ]return proto examine mbox add Callback cb Examine Mbox proto
def agent build get by triple context hypervisor os architecture return IMPL agent build get by triple context hypervisor os architecture
def eval location 2 pymodule offset pyname finder Scope Name Finder pymodule return pyname finder get primary and pyname at offset
def eval location 2 pymodule offset pyname finder Scope Name Finder pymodule return pyname finder get primary and pyname at offset
def bi Di Text text text s3 unicode text if bi Di Imported and current deployment settings get pdf bidi is Arabic Falseis Bidi Falsefor c in text cat unicodedata bidirectional c if cat in 'AL' 'AN' is Arabic Trueis Bidi Truebreakelif cat in 'R' 'RLE' 'RLO' is Bidi Trueif is Arabic text arabic reshaper reshape text if is Bidi text get display text return text
def bi Di Text text text s3 unicode text if bi Di Imported and current deployment settings get pdf bidi is Arabic Falseis Bidi Falsefor c in text cat unicodedata bidirectional c if cat in 'AL' 'AN' is Arabic Trueis Bidi Truebreakelif cat in 'R' 'RLE' 'RLO' is Bidi Trueif is Arabic text arabic reshaper reshape text if is Bidi text get display text return text
def membership required function None def decorator request *args **kwargs group get object or 404 Group slug kwargs['slug'] if request user is anonymous return Http Response Redirect reverse 'django contrib auth views login' if Group Member objects is member group request user return function request *args **kwargs else return Http Response Redirect reverse 'groups join' args [group slug] return decorator
def get resource manager extra kwargs f args allow conflicts False hooks getattr f 'resource manager kwargs hooks' [] extra kwargs {}for hook in hooks hook kwargs hook args hook name hook name conflicting keys set hook kwargs keys & set extra kwargs keys if conflicting keys and not allow conflicts msg " Hook'% hook name s'isattemptingtoredefineattributes'% conflicting keys s'" % {'hook name' hook name 'conflicting keys' conflicting keys} raise exceptions No Unique Match msg extra kwargs update hook kwargs return extra kwargs
def file iter fname sep None for line in open fname if line and line[ 0 ] '#' yield line split sep
def file iter fname sep None for line in open fname if line and line[ 0 ] '#' yield line split sep
def from wire wire keyring None request mac '' xfr False origin None tsig ctx None multi False first True question only False one rr per rrset False ignore trailing False m Message id 0 m keyring keyringm request mac request macm xfr xfrm origin originm tsig ctx tsig ctxm multi multim first firstreader Wire Reader wire m question only one rr per rrset ignore trailing reader read return m
def load external templates spec base spider name spider dir join spec base spider name if not isdir spider dir raise Stop Iterationfor name in os listdir spider dir if not name endswith ' json' continuepath join spider dir name with open path as f sample json load f sample dir path[ - len ' json' ]if isdir sample dir for fname in os listdir sample dir if fname endswith ' html' with open join sample dir fname as f attr fname[ - len ' html' ]sample[attr] read f version sample get 'version' '' yield build sample sample legacy version < '0 13 0'
def reset repo mode committish 'HEAD' if mode 'hard' raise Value Error 'hardistheonlymodecurrentlysupported' with open repo closing repo as r tree r[committish] treer reset index tree
def reset repo mode committish 'HEAD' if mode 'hard' raise Value Error 'hardistheonlymodecurrentlysupported' with open repo closing repo as r tree r[committish] treer reset index tree
def get word blacklist regex return re compile '\\b ' + ' ' join map re escape settings CC WORD BLACKLIST + ' \\b'
def test read right indented table table '\n#comment withblanklineabove \n \n Col 1 Col 2 Col 3 \n \n 33 4foo\n 14 5bar\n \n'reader ascii get reader Reader ascii RST dat reader read table assert equal dat colnames [' Col 1 ' ' Col 2 ' ' Col 3 '] assert equal dat[ 0 ][ 2 ] 'foo' assert equal dat[ 1 ][ 0 ] 1
def to ANP poly f ring domain ring domainf ring zeroif isinstance f ring domain Polynomial Ring for monom coeff in f iterterms for mon coef in coeff iterterms m monom[ 0 ] + mon c domain [domain domain coef ] + [0 ] * monom[ 1 ] if m not in f f [m] celse f [m] + celse for monom coeff in f iterterms m monom[ 0 ] c domain [domain domain coeff ] + [0 ] * monom[ 1 ] if m not in f f [m] celse f [m] + creturn f
def quality mime type ranges parsed ranges [parse media range r for r in ranges split ' ' ]return quality parsed mime type parsed ranges
def time to micros time seconds time hour * 60 * 60 + time minute * 60 + time second return 1000000 * seconds + time microsecond
def post save user instance raw created **kwargs from cms utils permissions import get current usercreator get current user if not creator or not created or creator is anonymous returnpage user Page User user ptr id instance pk created by creator page user dict update instance dict page user save
def pool add pool name **kwargs return ceph cfg pool add pool name **kwargs
def install middlewares app settings if settings get 'newrelic config' ini file settings['newrelic config']env settings['newrelic env']newrelic agent initialize ini file env app newrelic agent WSGI Application Wrapper app if asbool settings get 'profiler enabled' profile dir settings['profiler dir']app Profiler Middleware app profile dir profile dir restrictions '*kinto core*' return app
def hamming loss y true y pred labels None sample weight None classes None if classes is not None warnings warn "'classes'wasrenamedto'labels'inversion 0 18 andwillberemovedin 0 20 " Deprecation Warning labels classes y type y true y pred check targets y true y pred if labels is None labels unique labels y true y pred else labels np asarray labels if sample weight is None weight average 1 0else weight average np mean sample weight if y type startswith 'multilabel' n differences count nonzero y true - y pred sample weight sample weight return n differences / y true shape[ 0 ] * len labels * weight average elif y type in ['binary' 'multiclass'] return weighted sum y true y pred sample weight normalize True else raise Value Error '{ 0 }isnotsupported' format y type
def latin to vcg st for char in st if char not in string ascii letters try num ord char if num > 192 st st replace char '\\fi%d' % ord char except passreturn st
def masscan x509 output certificate output decode 'base 64 ' newout []for hashtype hashname in [ 'md 5 ' 'MD 5 ' 'sha 1 ' 'SHA- 1 ' ] hashvalue hashlib new hashtype cert hexdigest newout append '%- 7 s%s\n' % hashname '' join hashvalue[i i + 4 ] for i in xrange 0 len hashvalue 4 b64 cert certificate encode 'base 64 ' newout append '-----BEGINCERTIFICATE-----\n' newout extend '%s\n' % b64 cert[i i + 64 ] for i in xrange 0 len b64 cert 64 newout append '-----ENDCERTIFICATE-----\n' return '' join newout
def grader from conf conf if isinstance conf Course Grader return confsubgraders []for subgraderconf in conf subgraderconf subgraderconf copy weight subgraderconf pop 'weight' 0 try if 'min count' in subgraderconf subgrader class Assignment Format Graderelse raise Value Error ' Configurationhasnoappropriategraderclass ' bad args invalid args subgrader class init subgraderconf if len bad args > 0 log warning ' Invalidargumentsforasubgrader %s' bad args for key in bad args del subgraderconf[key]subgrader subgrader class **subgraderconf subgraders append subgrader subgrader category weight except Type Error Value Error as error msg ' Unabletoparsegraderconfiguration \n' + str subgraderconf + '\n Errorwas \n' + str error raise Value Error msg None sys exc info [2 ]return Weighted Subsections Grader subgraders
@pytest mark cmddef test add vfolders user nofile with pytest raises Command Error as e call command 'add vfolders' assert 'toofewarguments' in str e
def build addon button text action title '' button {'text' text 'action' action}if title button['attributes'] 'title "{title}"data-toggle "tooltip"data-placement "right"' format title title return button
def plot topo onpick event show func orig ax event inaxesif event inaxes is None or not hasattr orig ax ' mne ch idx' and not hasattr orig ax ' mne axs' returnimport matplotlib pyplot as plttry if hasattr orig ax ' mne axs' x y event xdata event ydata for ax in orig ax mne axs if x > ax pos[ 0 ] and y > ax pos[ 1 ] and x < ax pos[ 0 ] + ax pos[ 2 ] and y < ax pos[ 1 ] + ax pos[ 3 ] orig ax axbreakelse returnch idx orig ax mne ch idxface color orig ax mne ax face color fig ax plt subplots 1 plt title orig ax mne ch name ax set axis bgcolor face color show func ax ch idx except Exception as err print err raise
def ratings success msg app old status old modified if old modified old modified datetime strptime old modified '%Y-%m-%d T%H %M %S' if old status app status return submission msgs ['complete']elif old modified app last rated time return submission msgs ['content ratings saved']
def ratings success msg app old status old modified if old modified old modified datetime strptime old modified '%Y-%m-%d T%H %M %S' if old status app status return submission msgs ['complete']elif old modified app last rated time return submission msgs ['content ratings saved']
def ratings success msg app old status old modified if old modified old modified datetime strptime old modified '%Y-%m-%d T%H %M %S' if old status app status return submission msgs ['complete']elif old modified app last rated time return submission msgs ['content ratings saved']
def copy gl functions source dest constants False if isinstance source Base GL Proxy s {}for key in dir source s[key] getattr source key source selif not isinstance source dict source source dict if not isinstance dest dict dest dest dict funcnames [name for name in source keys if name startswith 'gl' ]for name in funcnames dest[name] source[name]if constants constnames [name for name in source keys if name startswith 'GL ' ]for name in constnames dest[name] source[name]
def copy gl functions source dest constants False if isinstance source Base GL Proxy s {}for key in dir source s[key] getattr source key source selif not isinstance source dict source source dict if not isinstance dest dict dest dest dict funcnames [name for name in source keys if name startswith 'gl' ]for name in funcnames dest[name] source[name]if constants constnames [name for name in source keys if name startswith 'GL ' ]for name in constnames dest[name] source[name]
def require params oauth request parameters None if parameters is None parameters []params ['oauth consumer key' 'oauth nonce' 'oauth signature' 'oauth signature method' 'oauth timestamp']params extend parameters missing list param for param in params if not oauth request or param not in oauth request if missing response Http Response ' Missing O Authparameters %s' % ' ' join missing response status code 401 return responsereturn None
def clone via serialize obj s c Pickle dumps obj get pickle protocol return c Pickle loads s
def clone via serialize obj s c Pickle dumps obj get pickle protocol return c Pickle loads s
def rastrigin scaled individual N len individual return 10 * N + sum 10 ** i / N - 1 * x ** 2 - 10 * cos 2 * pi * 10 ** i / N - 1 * x for i x in enumerate individual
def get header from yaml lines try import yamlexcept Import Error raise Import Error '`importyaml`failed Py YAM Lpackageisrequiredfor ECS Vformat' from io misc yaml import Astropy Loaderclass Table Loader Astropy Loader '\n Custom Loaderthatconstructs Ordered Dictfroman omapobject \n Thisdoesnothingbutprovideanamespaceforaddingthe\ncustomodictconstructor \n' Table Loader add constructor u'tag yaml org 2002 omap' construct odict header yaml textwrap dedent '\n' join lines try header yaml load header yaml Loader Table Loader except Exception as err raise Yaml Parse Error str err return header
def words group input strlen words []nblanks input count '' nmax max nblanks len input // strlen + 1 arr np fromstring input + '' dtype binary type 1 blank loc np nonzero arr '' [0 ]offset 0xoffset 0for idx in range nmax try loc np nonzero blank loc > strlen + offset [0 ][ 0 ]offset blank loc[ loc - 1 ] + 1 if loc 0 offset -1 except Exception offset len input if offset < xoffset offset xoffset + strlen words append input[xoffset offset] if len input offset breakxoffset offsetreturn words
def words group input strlen words []nblanks input count '' nmax max nblanks len input // strlen + 1 arr np fromstring input + '' dtype binary type 1 blank loc np nonzero arr '' [0 ]offset 0xoffset 0for idx in range nmax try loc np nonzero blank loc > strlen + offset [0 ][ 0 ]offset blank loc[ loc - 1 ] + 1 if loc 0 offset -1 except Exception offset len input if offset < xoffset offset xoffset + strlen words append input[xoffset offset] if len input offset breakxoffset offsetreturn words
def colon Hex val bytecount pieces []for i in range bytecount - 1 -1 -1 piece 255 << i * 8 & val >> i * 8 pieces append '% 02 x' % piece ch Str ' ' join pieces return ch Str
def data 2 proddummy x groups np unique lmap tuple x tolist return x groups[ None ] all -1 T astype int [ -1 ]
def data 2 proddummy x groups np unique lmap tuple x tolist return x groups[ None ] all -1 T astype int [ -1 ]
@pytest mark parametrize 'fast reader' [ True False 'force'] def test read with names arg fast reader with pytest raises Value Error dat ascii read ['cd' 'ef'] names 'a' guess False fast reader fast reader
def remove hop by hop headers headers headers[ ] [ key value for key value in headers if not is hop by hop header key ]
@docstring dedent interpddef xscale *args **kwargs gca set xscale *args **kwargs
def Timestamp From Ticks ticks return Timestamp *time localtime ticks [ 6]
def is Negative phrase return bool re search "\\b no t ? don\\'t stop end \\b" phrase re IGNORECASE
def make pidlockfile path acquire timeout if not isinstance path basestring error Value Error ' Notafilesystempath % path r' % vars raise errorif not os path isabs path error Value Error ' Notanabsolutepath % path r' % vars raise errorlockfile pidlockfile Timeout PID Lock File path acquire timeout return lockfile
def check marks quteproc quickmarks expected contains if quickmarks mark file os path join quteproc basedir 'config' 'quickmarks' else mark file os path join quteproc basedir 'config' 'bookmarks' 'urls' quteproc clear data quteproc send cmd ' save' quteproc wait for message ' Savedto{}' format mark file with open mark file 'r' encoding 'utf- 8 ' as f lines f readlines matched line any utils pattern match pattern expected value line rstrip '\n' for line in lines assert matched line contains lines
def check marks quteproc quickmarks expected contains if quickmarks mark file os path join quteproc basedir 'config' 'quickmarks' else mark file os path join quteproc basedir 'config' 'bookmarks' 'urls' quteproc clear data quteproc send cmd ' save' quteproc wait for message ' Savedto{}' format mark file with open mark file 'r' encoding 'utf- 8 ' as f lines f readlines matched line any utils pattern match pattern expected value line rstrip '\n' for line in lines assert matched line contains lines
def collect all bears from sections sections log printer local bears {}global bears {}for section in sections bear dirs sections[section] bear dirs local bears[section] global bears[section] collect bears bear dirs ['**'] [BEAR KIND LOCAL BEAR KIND GLOBAL] log printer warn if unused glob False return local bears global bears
def collect all bears from sections sections log printer local bears {}global bears {}for section in sections bear dirs sections[section] bear dirs local bears[section] global bears[section] collect bears bear dirs ['**'] [BEAR KIND LOCAL BEAR KIND GLOBAL] log printer warn if unused glob False return local bears global bears
def replaced fmri return fmadm action fmri 'replaced' fmri
def sniffing interface cb try sniff iface interface prn cb stop filter stopfilter store False lfilter lambda p Dot 11 Beacon in p or Dot 11 Probe Resp in p except socket error as e if e errno 100 passelse raise
def ae actual predicted return np abs np array actual - np array predicted
def available content databases pattern re compile 'content ?P<channel>[^ ]+ ?P<language>[^ ]+ sqlite' for filename in glob iglob django settings DEFAULT DATABASE DIR match pattern search filename if match yield match group 1 2
def available content databases pattern re compile 'content ?P<channel>[^ ]+ ?P<language>[^ ]+ sqlite' for filename in glob iglob django settings DEFAULT DATABASE DIR match pattern search filename if match yield match group 1 2
def responsive res space compress None if space compress is None space compress not g template debug if is api res res or u'' if not c allowed callback and request environ get 'WANT RAW JSON' res scriptsafe dumps res else res websafe json simplejson dumps res if c allowed callback res '/**/%s %s ' % websafe json c allowed callback res elif space compress res space Compress res return res
def limited join sep items max chars 30 overflow marker ' ' full str sep join items if len full str < max chars return full strn chars 0n items 0for j item in enumerate items n chars + len item + len sep if n chars < max chars - len overflow marker n items + 1else breakreturn sep join list items[ n items] + [overflow marker]
def increment lineno node n 1 for node in zip node walk node if 'lineno' in node attributes node lineno getattr node 'lineno' 0 + n
@step CHECK PREFIX + ' Ihavesentanemailwiththefollowinginthebody ' def mail sent content multiline step return mail sent content step step multiline 'body'
def get field precision df doc None currency None from frappe utils import get number format infoif cint df precision precision cint df precision elif df fieldtype u' Currency' number format Noneif not currency and doc currency get field currency df doc if not currency currency frappe db get default u'currency' if currency number format frappe db get value u' Currency' currency u'number format' cache True if not number format number format frappe db get default u'number format' or u'# ### ##' decimal str comma str precision get number format info number format else precision cint frappe db get default u'float precision' or 3 return precision
def get python exec ver try return PYEXECS[ver]except Key Error raise Value Error ' Version%snotsupported/recognized' % ver
def unify walk a b U if a class b class return Falseelif a b return Uelse return False
def unify walk a b U if a class b class return Falseelif a b return Uelse return False
def unify walk a b U if a class b class return Falseelif a b return Uelse return False
def hostgroup list **connection args conn args login **connection args try if conn args method 'hostgroup get'params {'output' 'extend'}ret query method params conn args['url'] conn args['auth'] return ret['result']else raise Key Errorexcept Key Error return False
def get Recent Tile layer coord format key layer coord format body use by recent tiles['hash'] get key None 0 if body is None return Noneif time < use by logging debug ' Tile Stache Core add Recent Tile foundtileinrecenttiles %s' key return bodytry del recent tiles['hash'][key]except Key Error passreturn None
def find globals g tree for child in tree if hasattr child 'body' and isinstance child body list find globals g child body elif isinstance child ast Function Def ast Class Def g add child name continueelif isinstance child ast Assign try g add child targets[ 0 ] id except Index Error Attribute Error passelif isinstance child ast Import g add child names[ 0 ] name elif isinstance child ast Import From for name in child names g name name asname or name name if g name '*' continueg add g name
def find globals g tree for child in tree if hasattr child 'body' and isinstance child body list find globals g child body elif isinstance child ast Function Def ast Class Def g add child name continueelif isinstance child ast Assign try g add child targets[ 0 ] id except Index Error Attribute Error passelif isinstance child ast Import g add child names[ 0 ] name elif isinstance child ast Import From for name in child names g name name asname or name name if g name '*' continueg add g name
def asset get current log asset id table current s3 db asset logquery table asset id asset id & table cancel False & table deleted False asset log current db query select table id table status table datetime table cond table person id table organisation id table site id orderby ~ table datetime limitby 0 1 first if asset log return Storage datetime asset log datetime person id asset log person id cond int asset log cond or 0 status int asset log status or 0 organisation id asset log organisation id site id asset log site id else return Storage
def mark Failed ep Obj log str u''try with ep Obj lock quality Quality split Composite Status ep Obj status [1 ]ep Obj status Quality composite Status FAILED quality ep Obj save To DB except Episode Not Found Exception as e logger log u' Unabletogetepisode pleasesetitsstatusmanually ' + ex e logger WARNING return log str
@task@timeddef i18 n validate transifex config home path '~' expanduser config home / ' transifexrc' if not config isfile or config getsize 0 msg colorize 'red' ' Cannotconnectto Transifex configfileismissingorempty {config}\n Seehttp //help transifex com/features/client/#transifexrc\n' format config config sys stderr write msg sys exit 1
@given u'arunhavingmixedtextcontent' def given a run having mixed text content context r xml u'<w r%s>\n<w t>abc</w t>\n<w tab/>\n<w t>def</w t>\n<w cr/>\n<w t>ghi</w t>\n<w drawing/>\n<w br/>\n<w t>jkl</w t>\n</w r>' % nsdecls u'w' r parse xml r xml context run Run r None
def get current request hostname hostname Nonerequest get current request if request hostname request META get 'HTTP HOST' return hostname
def get current request hostname hostname Nonerequest get current request if request hostname request META get 'HTTP HOST' return hostname
def storage service key bucket file name key name '{}/{}' format settings VIDEO UPLOAD PIPELINE get 'ROOT PATH' '' file name return s3 key Key bucket key name
def determine version api discovery make service 'discovery' 'v 1 ' response discovery apis list name api preferred True execute if not response get 'items' raise Value Error ' Unknown API"{ 0 }" ' format api return response['items'][ 0 ]['version']
def get Selected Radio Plugin names radio Plugins for radio Plugin in radio Plugins if radio Plugin value return radio Pluginfor name in names for radio Plugin in radio Plugins if radio Plugin name name radio Plugin value Truereturn radio Pluginprint 'thisshouldneverhappen noget Selected Radio Plugininsettings'print namesreturn radio Plugin[ 0 ]
def set shutdown hook hook if hook is not None and not callable hook raise Type Error 'hookmustbecallable got%s' % hook class global shutdown hookwith shutdown mutex old hook shutdown hook shutdown hook hookreturn old hook
def check modify host locking host update data locked update data get 'locked' None if locked is not None if locked and host locked raise model logic Validation Error {'locked' ' Hostalreadylockedby%son%s ' % host locked by host lock time } if not locked and not host locked raise model logic Validation Error {'locked' ' Hostalreadyunlocked '}
def create and add option option global current option current option Option type params expand one key dictionary option current option type type create and add parameters params current statement add child current option
def get hash path form 'sha 256 ' chunk size 65536 return salt utils get hash os path expanduser path form chunk size
def get hash path form 'sha 256 ' chunk size 65536 return salt utils get hash os path expanduser path form chunk size
def get hash path form 'sha 256 ' chunk size 65536 return salt utils get hash os path expanduser path form chunk size
def get hash path form 'sha 256 ' chunk size 65536 return salt utils get hash os path expanduser path form chunk size
def get hash path form 'sha 256 ' chunk size 65536 return salt utils get hash os path expanduser path form chunk size
def get quotas tenant profile None conn auth profile return conn get quotas tenant
def get quotas tenant profile None conn auth profile return conn get quotas tenant
def get quotas tenant profile None conn auth profile return conn get quotas tenant
@pytest mark skipif not lb enabled reason ' Load Balancerdisabled' def test if minuteman routes to named vip dcos api session origin app origin uuid get test app origin app['port Definitions'][ 0 ]['labels'] {'VIP 0' 'foo 5000 '}with dcos api session marathon deploy and cleanup origin app proxy app proxy uuid get test app with dcos api session marathon deploy and cleanup proxy app as service points cmd '/opt/mesosphere/bin/curl-s-f-m 5 http //foo marathon l4 lb thisdcos directory 5000 /ping'ensure routable cmd service points
def make N Queens CSP n vars list range n domains list range n neighbors {}for v in vars neighbors[v] vars[ ]neighbors[v] remove v return N Queens CSP vars vars domains defaultdict lambda domains neighbors neighbors binary constraint queens constraint
def find prototypes code prots []lines code split '\n' for line in lines m re match '\\s*' + re func prot line if m is not None rtype name args m groups [ 3]if args 'void' or args strip '' args []else args [tuple arg strip split '' for arg in args split ' ' ]prots append name args rtype return prots
def find prototypes code prots []lines code split '\n' for line in lines m re match '\\s*' + re func prot line if m is not None rtype name args m groups [ 3]if args 'void' or args strip '' args []else args [tuple arg strip split '' for arg in args split ' ' ]prots append name args rtype return prots
@cli command 'open' @click option '-i' '--image' 'images' type click Path multiple True help ' Theimagefiletoopen ' @generatordef open cmd images for image in images try click echo ' Opening"%s"' % image if image '-' img Image open click get binary stdin img filename '-'else img Image open image yield img except Exception as e click echo ' Couldnotopenimage"%s" %s' % image e err True
def get default page content type return Content Type objects get for model Page
def lead text top elem num words 10 pat re compile u'\\s+' flags re UNICODE words []def get text x attr u'text' ans getattr x attr if ans words extend filter None pat split ans stack [ top elem u'text' ]while stack and len words < num words elem attr stack pop get text elem attr if attr u'text' if elem is not top elem stack append elem u'tail' stack extend reversed list c u'text' for c in elem iterchildren u'*' return u'' join words[ num words]
def testparagraph testpara paragraph 'paratext' style ' Body Text' assert testpara tag '{http //schemas openxmlformats org/wordprocessingml/ 2006 /main}p' pass
def clean text tags ALLOWED TAGS attributes ALLOWED ATTRIBUTES styles ALLOWED STYLES strip False strip comments True if not text return u''text force unicode text if text startswith u'< --' text u'' + text class s Bleach Sanitizer allowed elements tagsallowed attributes attributesallowed css properties stylesstrip disallowed elements stripstrip html comments strip commentsparser html 5 lib HTML Parser tokenizer s return render parser parse Fragment text strip
def is user profile visible self user None try if hasattr self u'is private' is private self is privateelse is private self get profile is privatereturn user and user self or user is staff or not is private except Profile Does Not Exist return True
def runtime hooks return [join curdir 'pyi rth kivy py' ]
def get processor decline html params payment support email configuration helpers get value 'payment support email' settings PAYMENT SUPPORT EMAIL return format error html ' Sorry Ourpaymentprocessordidnotacceptyourpayment Thedecisiontheyreturnedwas{decision} andthereasonwas{reason} Youwerenotcharged Pleasetryadifferentformofpayment Contactuswithpayment-relatedquestionsat{email} ' format decision '<spanclass "decision">{decision}</span>' format decision params['decision'] reason '<spanclass "reason">{reason code} {reason msg}</span>' format reason code params['reason code'] reason msg REASONCODE MAP get params['reason code'] email payment support email
def fix osmesa gl lib if testing test name os getenv ' VISPY TESTING APP' None if test name 'osmesa' from util osmesa gl import fix osmesa gl libfix osmesa gl lib
def new key return PKCS 115 Sig Scheme key
def seam carve img energy map mode num border 1 force copy True utils assert nD img 2 3 image util img as float img force copy energy map util img as float energy map force copy if image ndim 2 image image[ np newaxis]if mode 'horizontal' image np transpose image 1 0 2 image np ascontiguousarray image out seam carve v image energy map num border if mode 'horizontal' out np transpose out 1 0 2 return np squeeze out
def seam carve img energy map mode num border 1 force copy True utils assert nD img 2 3 image util img as float img force copy energy map util img as float energy map force copy if image ndim 2 image image[ np newaxis]if mode 'horizontal' image np transpose image 1 0 2 image np ascontiguousarray image out seam carve v image energy map num border if mode 'horizontal' out np transpose out 1 0 2 return np squeeze out
def new state trans tool invalid False state galaxy tools Default Tool State state inputs {}if invalid return statetry return tool new state trans except Exception as e log debug ' Failedtobuildtoolstatefortool"%s"usingstandardmethod willtrytofallbackoncustommethod %s' tool id e inputs tool inputs by page[ 0 ]context Expression Context state inputs parent None for input in inputs values try state inputs[input name] input get initial value trans context except state inputs[input name] []return state
def kaiser beta a if a > 50 beta 0 1102 * a - 8 7 elif a > 21 beta 0 5842 * a - 21 ** 0 4 + 0 07886 * a - 21 else beta 0 0return beta
def push on stack section args if len args 0 return ''parts ['self->deeplevel++ ']for idx in xrange len args parts append 'self->arguments stack[self->deeplevel "arg%d"] self->arg%d \n DCTB self->arg%d arg%d ' % idx idx idx idx return '\n DCTB ' join parts
def rand text alpha upper length bad '' return rand base length bad set upper Alpha
@content type 'application/json' def json body charset 'utf- 8 ' **kwargs return json converter loads text body charset charset
def resolve id val return val if isinstance val six string types else val id
def create permission grant role db resource uid resource type permission types permission grant db Permission Grant DB resource uid resource uid resource type resource type permission types permission types permission grant db Permission Grant add or update permission grant db role db update push permission grants str permission grant db id return permission grant db
def test ast good import from can compile u' import[x[y]] '
def report messages stats sect stats if not stats['by msg'] raise utils Empty Report in order sorted [ value msg id for msg id value in six iteritems stats['by msg'] if not msg id startswith 'I' ] in order reverse lines 'messageid' 'occurrences' for value msg id in in order lines + msg id str value sect append ureports Table children lines cols 2 rheaders 1
@task task ignore result True def store friends user friends converter class get class for 'user conversion' logger info 'celeryisstoring%sfriends' % len friends converter class store friends user friends return friends
@task task ignore result True def store friends user friends converter class get class for 'user conversion' logger info 'celeryisstoring%sfriends' % len friends converter class store friends user friends return friends
@task task ignore result True def store friends user friends converter class get class for 'user conversion' logger info 'celeryisstoring%sfriends' % len friends converter class store friends user friends return friends
@task task ignore result True def store friends user friends converter class get class for 'user conversion' logger info 'celeryisstoring%sfriends' % len friends converter class store friends user friends return friends
def get collection rights collection id strict True model collection models Collection Rights Model get collection id strict strict if model is None return Nonereturn get activity rights from model model feconf ACTIVITY TYPE COLLECTION
def get dataset directory dataset name create directory True path os path join dataset root dataset name if create directory try os makedirs path except OS Error passreturn path
def hostgroup delete hostgroupids **connection args conn args login **connection args try if conn args method 'hostgroup delete'if not isinstance hostgroupids list params [hostgroupids]else params hostgroupidsret query method params conn args['url'] conn args['auth'] return ret['result']['groupids']else raise Key Errorexcept Key Error return ret
def find Certain Show show List indexerid if indexerid is None or show List is None or len show List 0 return Noneindexer ids [indexerid] if not isinstance indexerid list else indexerid results [show for show in show List if show indexerid in indexer ids ]if not results return Noneif len results 1 return results[ 0 ]raise Multiple Show Objects Exception
def tenant create name description None enabled True profile None **connection args kstone auth profile **connection args new getattr kstone TENANTS None create name description enabled return tenant get new id profile profile **connection args
def minute to session column close locs data out if column 'open' minute to session open close locs data out elif column 'high' minute to session high close locs data out elif column 'low' minute to session low close locs data out elif column 'close' minute to session close close locs data out elif column 'volume' minute to session volume close locs data out return out
def minute to session column close locs data out if column 'open' minute to session open close locs data out elif column 'high' minute to session high close locs data out elif column 'low' minute to session low close locs data out elif column 'close' minute to session close close locs data out elif column 'volume' minute to session volume close locs data out return out
def make default headers n return tuple agate utils letter name i for i in range n
def dic trace model None model modelcontext model mean deviance -2 * np mean [model logp pt for pt in trace] free rv means {rv name trace[rv name] mean axis 0 for rv in model free R Vs}deviance at mean -2 * model logp free rv means return 2 * mean deviance - deviance at mean
def test With No Kwargs io launch Hub Server keyboard io devices keyboardprint print '**PRESSAKEYTOCONTINUE ' while not keyboard get Events io wait 0 25 print 'A Keyboard Eventwas Detected exiting Test ' io quit
def post order list node filter func no filter l stack [] [] poped index 0 0 while node if filter func node if node children and not poped stack append node index index 0node node children[ 0 ]else l append node index + 1try node stack[ -1 ][ 0 ] children[index]except Index Error node Noneelse node Nonepoped 0if node is None and stack node index stack pop poped 1return l
def post order list node filter func no filter l stack [] [] poped index 0 0 while node if filter func node if node children and not poped stack append node index index 0node node children[ 0 ]else l append node index + 1try node stack[ -1 ][ 0 ] children[index]except Index Error node Noneelse node Nonepoped 0if node is None and stack node index stack pop poped 1return l
@task default True def test args None tests '' if args else 'tests' default args '-sv--with-doctest--nologcapture--with-color%s' % tests default args + '' + args if args else '' nose core run exit argv [''] + default args split
def deprecated call func None *args **kwargs if not func return Warnings Checker expected warning Deprecation Warning categories []def warn explicit message category *args **kwargs categories append category old warn explicit message category *args **kwargs def warn message category None *args **kwargs if isinstance message Warning categories append message class else categories append category old warn message category *args **kwargs old warn warnings warnold warn explicit warnings warn explicitwarnings warn explicit warn explicitwarnings warn warntry ret func *args **kwargs finally warnings warn explicit old warn explicitwarnings warn old warndeprecation categories Deprecation Warning Pending Deprecation Warning if not any issubclass c deprecation categories for c in categories tracebackhide Trueraise Assertion Error '%rdidnotproduce Deprecation Warning' % func return ret
def deprecated call func None *args **kwargs if not func return Warnings Checker expected warning Deprecation Warning categories []def warn explicit message category *args **kwargs categories append category old warn explicit message category *args **kwargs def warn message category None *args **kwargs if isinstance message Warning categories append message class else categories append category old warn message category *args **kwargs old warn warnings warnold warn explicit warnings warn explicitwarnings warn explicit warn explicitwarnings warn warntry ret func *args **kwargs finally warnings warn explicit old warn explicitwarnings warn old warndeprecation categories Deprecation Warning Pending Deprecation Warning if not any issubclass c deprecation categories for c in categories tracebackhide Trueraise Assertion Error '%rdidnotproduce Deprecation Warning' % func return ret
def is hash empty context builder h empty ir Constant h type EMPTY return builder icmp unsigned ' ' h empty
def raises msg exc msg func *args **kwds try func *args **kwds except exc as err assert msg in str err '"%s"notin"%s"' % msg err else raise Assertion Error '%sdidnotraise%s' % func name excstr exc
def raises msg exc msg func *args **kwds try func *args **kwds except exc as err assert msg in str err '"%s"notin"%s"' % msg err else raise Assertion Error '%sdidnotraise%s' % func name excstr exc
def raises msg exc msg func *args **kwds try func *args **kwds except exc as err assert msg in str err '"%s"notin"%s"' % msg err else raise Assertion Error '%sdidnotraise%s' % func name excstr exc
def randompass import randomimport stringrandom seed lower '' join random choice string ascii lowercase for x in range 6 upper '' join random choice string ascii uppercase for x in range 6 number '' join random choice string digits for x in range 6 punct '' join random choice string punctuation for x in range 6 p lower + upper + number + punct return '' join random sample p len p
def randompass import randomimport stringrandom seed lower '' join random choice string ascii lowercase for x in range 6 upper '' join random choice string ascii uppercase for x in range 6 number '' join random choice string digits for x in range 6 punct '' join random choice string punctuation for x in range 6 p lower + upper + number + punct return '' join random sample p len p
def randompass import randomimport stringrandom seed lower '' join random choice string ascii lowercase for x in range 6 upper '' join random choice string ascii uppercase for x in range 6 number '' join random choice string digits for x in range 6 punct '' join random choice string punctuation for x in range 6 p lower + upper + number + punct return '' join random sample p len p
def config option update context data dict return {'success' False}
def get limit return limit[ 0 ]
def construct tuple obj RS Aobj if len tuple not in [2 3 5 6] raise error 'argumentforconstruct wronglength'for i in range len tuple field obj keydata[i]setattr obj field tuple[i] if len tuple > 5 if obj p > obj q obj p obj q obj q obj p if len tuple 5 obj u pubkey inverse obj p obj q return obj
def construct tuple obj RS Aobj if len tuple not in [2 3 5 6] raise error 'argumentforconstruct wronglength'for i in range len tuple field obj keydata[i]setattr obj field tuple[i] if len tuple > 5 if obj p > obj q obj p obj q obj q obj p if len tuple 5 obj u pubkey inverse obj p obj q return obj
def vm disk snapshot create name kwargs None call None if call 'action' raise Salt Cloud System Exit ' Thevm disk snapshot createactionmustbecalledwith-aor--action ' if kwargs is None kwargs {}disk id kwargs get 'disk id' None description kwargs get 'description' None if disk id is None or description is None raise Salt Cloud System Exit " Thevm disk snapshot createfunctionrequiresa'disk id'anda'description'tobeprovided " server user password get xml rpc auth ' ' join [user password] vm id int get vm id kwargs {'name' name} response server one vm disksnapshotcreate auth vm id int disk id description data {'action' 'vm disksnapshotcreate' 'created' response[ 0 ] 'snapshot id' response[ 1 ] 'error code' response[ 2 ]}return data
def get grain proxy name grains retrieve grains proxy if grains get 'result' False and grains get 'out' {} return grains get 'out' get name
def prep case insensitive value value re sub '\\s+' '' value strip lower return value
def to str obj encoding 'utf- 8 ' force string False if force string and not isinstance obj basestring try obj str obj except Exception obj unicode obj if isinstance obj basestring and isinstance obj unicode try obj obj encode encoding return objexcept Unicode Encode Error for alt encoding in ENCODINGS try obj obj encode alt encoding return objexcept Unicode Encode Error passtry return latinify obj '?' except Exception as err raise Exception "%s Error Unicodecouldnotencodeunicodestring'%s' %s toabytestring " % err obj encoding return obj
def show chain *chains **kw backrefs kw pop 'backrefs' True chains [chain for chain in chains if chain]def in chains x ids set map id itertools chain *chains return id x in ids max depth max map len chains - 1 if backrefs show backrefs [chain[ -1 ] for chain in chains] max depth max depth filter in chains **kw else show refs [chain[ 0 ] for chain in chains] max depth max depth filter in chains **kw
def network create safe context values return IMPL network create safe context values
def newer a b if not os path exists a return Falseif not os path exists b return Truereturn os path getmtime a > os path getmtime b
def simple moving average iterable k 10 a iterable if isinstance iterable list else list iterable for m in xrange len a i m - k j m + k + 1 w a[max 0 i j] yield float sum w / len w or 1
def setup platform hass config add devices discovery info None if discovery info is None return LOGGER debug ' Settingupnestthermostat' temp unit hass config units temperature unitadd devices [ Nest Thermostat structure device temp unit for structure device in hass data[DATA NEST] thermostats ] True
def compare torrents torrent 1 torrent 2 files 1 [files for files in torrent 1['metainfo'] get files with length if files[ 1 ] > 1024 * 1024 ]files 2 [files for files in torrent 2['metainfo'] get files with length if files[ 1 ] > 1024 * 1024 ]if len files 1 len files 2 for ft 1 in files 1 for ft 2 in files 2 if ft 1 [ 1 ] ft 2 [ 1 ] or levenshtein dist ft 1 [ 0 ] ft 2 [ 0 ] > SIMILARITY TRESHOLD return Falsereturn Truereturn False
@with devicedef which name which cmd '\n IFS \n BINARY %s\n P $PATH \nforpathin"${P[@]}" doif[-e"$path/$BINARY"] thenecho"$path/$BINARY" \nbreak\nfi\ndone\n' % name which cmd which cmd strip return process ['sh' '-c' which cmd] recvall strip
def get users channel 14 **kwargs with Ipmi Command **kwargs as c return c get users channel
def posixpath normpath pathname backslash '\\'pathname 2 os path normpath pathname or ' ' if backslash in pathname 2 pathname 2 pathname 2 replace backslash '/' return pathname 2
def build instance groups parsed instance groups instance groups []for instance group in parsed instance groups ig config {}keys instance group keys if ' Name' in keys ig config[' Name'] instance group[' Name']else ig config[' Name'] instance group[' Instance Group Type']ig config[' Instance Type'] instance group[' Instance Type']ig config[' Instance Count'] instance group[' Instance Count']ig config[' Instance Role'] instance group[' Instance Group Type'] upper if ' Bid Price' in keys ig config[' Bid Price'] instance group[' Bid Price']ig config[' Market'] constants SPO Telse ig config[' Market'] constants ON DEMAN Dif ' Ebs Configuration' in keys ig config[' Ebs Configuration'] instance group[' Ebs Configuration']if ' Auto Scaling Policy' in keys ig config[' Auto Scaling Policy'] instance group[' Auto Scaling Policy']instance groups append ig config return instance groups
def build instance groups parsed instance groups instance groups []for instance group in parsed instance groups ig config {}keys instance group keys if ' Name' in keys ig config[' Name'] instance group[' Name']else ig config[' Name'] instance group[' Instance Group Type']ig config[' Instance Type'] instance group[' Instance Type']ig config[' Instance Count'] instance group[' Instance Count']ig config[' Instance Role'] instance group[' Instance Group Type'] upper if ' Bid Price' in keys ig config[' Bid Price'] instance group[' Bid Price']ig config[' Market'] constants SPO Telse ig config[' Market'] constants ON DEMAN Dif ' Ebs Configuration' in keys ig config[' Ebs Configuration'] instance group[' Ebs Configuration']if ' Auto Scaling Policy' in keys ig config[' Auto Scaling Policy'] instance group[' Auto Scaling Policy']instance groups append ig config return instance groups
def virtual if salt utils is windows global genrepo update git repos genrepo salt utils namespaced function genrepo globals update git repos salt utils namespaced function update git repos globals return virtualname return False ' Thismoduleonlyworkson Windows '
@skip 'silverlight' def test event lifetime def keep alive o passdef test runner import weakrefglobal calledcalled 0a Iron Python Test Events def foo global calledcalled + 1foo abc aa Instance Test + fooa Call Instance Are Equal called 1 ret val weakref ref foo keep alive foo import gcfor i in xrange 10 gc collect a Call Instance Are Equal called 2 return ret valfunc ref test runner import gcfor i in xrange 10 gc collect Assert not hasattr func ref 'abc' Are Equal func ref None Are Equal called 2
@skip 'silverlight' def test event lifetime def keep alive o passdef test runner import weakrefglobal calledcalled 0a Iron Python Test Events def foo global calledcalled + 1foo abc aa Instance Test + fooa Call Instance Are Equal called 1 ret val weakref ref foo keep alive foo import gcfor i in xrange 10 gc collect a Call Instance Are Equal called 2 return ret valfunc ref test runner import gcfor i in xrange 10 gc collect Assert not hasattr func ref 'abc' Are Equal func ref None Are Equal called 2
@skip 'silverlight' def test event lifetime def keep alive o passdef test runner import weakrefglobal calledcalled 0a Iron Python Test Events def foo global calledcalled + 1foo abc aa Instance Test + fooa Call Instance Are Equal called 1 ret val weakref ref foo keep alive foo import gcfor i in xrange 10 gc collect a Call Instance Are Equal called 2 return ret valfunc ref test runner import gcfor i in xrange 10 gc collect Assert not hasattr func ref 'abc' Are Equal func ref None Are Equal called 2
@skip 'silverlight' def test event lifetime def keep alive o passdef test runner import weakrefglobal calledcalled 0a Iron Python Test Events def foo global calledcalled + 1foo abc aa Instance Test + fooa Call Instance Are Equal called 1 ret val weakref ref foo keep alive foo import gcfor i in xrange 10 gc collect a Call Instance Are Equal called 2 return ret valfunc ref test runner import gcfor i in xrange 10 gc collect Assert not hasattr func ref 'abc' Are Equal func ref None Are Equal called 2
def hmac signature string shared secret challenge hmac if six PY 3 msg salt utils to bytes string key salt utils to bytes shared secret challenge salt utils to bytes challenge hmac else msg stringkey shared secretchallenge challenge hmachmac hash hmac new key msg hashlib sha 256 valid hmac base 64 b64 encode hmac hash digest return valid hmac challenge
def retry func max attempts return call with retry max attempts func
def retry func max attempts return call with retry max attempts func
@csrf exemptdef ssl login request if not settings FEATURES['AUTH USE CERTIFICATES'] return Http Response Forbidden cert ssl get cert from request request if not cert return student views index request user email fullname ssl dn extract info cert redirect to get next url for login page request retfun functools partial redirect redirect to return external login or signup request external id email external domain 'ssl MIT' credentials cert email email fullname fullname retfun retfun
def format playlist playlist show url True out '\x 02 {}\x 02 ' format playlist['title'] if playlist['description'] out + ' "{}"' format formatting truncate playlist['description'] if playlist['genre'] out + '-\x 02 {}\x 02 ' format playlist['genre'] out + '-by\x 02 {}\x 02 ' format playlist['user']['username'] if not playlist['tracks'] out + '- Noitems'else out + '-{}items ' format len playlist['tracks'] seconds round int playlist['duration'] / 1000 out + '{}' format timeformat format time seconds simple True if show url out + '-{}' format web try shorten playlist['permalink url'] return out
def get configuration from db shop configuration {}for conf item in Configuration Item objects filter shop shop configuration[conf item key] conf item valuereturn configuration
def generate Hub Sequences n Coinc 10 hubs [2 6] seq Length [5 6 7] n Seq 100 coinc List range n Coinc for hub in hubs coinc List remove hub seq List []for i in xrange n Seq length random choice seq Length - 1 seq random sample coinc List length seq insert length // 2 random choice hubs seq List append seq return seq List
def open repo name temp dir None if temp dir is None temp dir tempfile mkdtemp repo dir os path join os path dirname file 'data' 'repos' name temp repo dir os path join temp dir name shutil copytree repo dir temp repo dir symlinks True return Repo temp repo dir
def namespace to ord namespace n 0for i c in enumerate namespace n + LEX DISTANCE[ MAX NAMESPACE LENGTH - i - 1 ] * NAMESPACE CHARACTERS index c + 1 return n
def make transparent proxy global conf force host None force scheme 'http' return Transparent Proxy force host force host force scheme force scheme
def mod Clear Refs s titles Refs names Refs characters Refs s mod Clear Title Refs s {} {} {} s mod Clear Character Refs s {} {} {} return mod Clear Name Refs s {} {} {}
def compile func body body u'def{ 0 } \n{ 1 }' format FUNC NAME body replace '\n' '\n' code compile body 'inline' 'exec' env {}eval code env return env[FUNC NAME]
@frappe whitelist def get default address template return u'{{address line 1 }}<br>{%ifaddress line 2 %}{{address line 2 }}<br>{%endif-%}{{city}}<br>\n{%ifstate%}{{state}}<br>{%endif-%}\n{%ifpincode%}{{pincode}}<br>{%endif-%}\n{{country}}<br>\n{%ifphone%}' + u' Phone' + u' {{phone}}<br>{%endif-%}\n{%iffax%}' + u' Fax' + u' {{fax}}<br>{%endif-%}\n{%ifemail id%}' + u' Email' + u' {{email id}}<br>{%endif-%}'
def clear inputhook pyos inputhook ptr ctypes c void p in dll ctypes pythonapi ' Py OS Input Hook' pyos inputhook ptr value ctypes c void p None valueallow CTRL C
def clear inputhook pyos inputhook ptr ctypes c void p in dll ctypes pythonapi ' Py OS Input Hook' pyos inputhook ptr value ctypes c void p None valueallow CTRL C
def get initializers initializers fields result {}for f in fields if isinstance initializers dict if f in initializers result[f] convert to initializer initializers[f] else result[f] convert to initializer initializers return result
def explore account c while True printfolderflags {}data c list folders for flags delimiter name in data folderflags[name] flagsfor name in sorted folderflags keys print '%- 30 s%s' % name '' join folderflags[name] printreply raw input ' Typeafoldername or"q"toquit ' strip if reply lower startswith 'q' breakif reply in folderflags explore folder c reply else print ' Error nofoldernamed' repr reply
def test search any case result list search packages info ['PIP'] assert len result 1 assert 'pip' result[ 0 ]['name']
def create python 27 start cmd app name login ip port load balancer host xmpp ip db location DATASTORE PAT Hcmd ['/usr/bin/python 2 ' constants APPSCALE HOME + '/ App Server/dev appserver py' '--port' + str port '--admin port' + str port + 10000 '--login server' + login ip '--skip sdk update check' '--nginx host' + str load balancer host '--require indexes' '--enable sendmail' '--xmpp path' + xmpp ip '--php executable path ' + str PHP CGI LOCATION '--uaserver path' + db location + ' ' + str constants UA SERVER PORT '--datastore path' + db location + ' ' + str constants DB SERVER PORT '/var/apps/' + app name + '/app' '--host' + appscale info get private ip ]if app name in TRUSTED APPS cmd extend [TRUSTED FLAG] return '' join cmd
def duplication divergence graph n p seed None if p > 1 or p < 0 msg ' Network X Errorp {0 }isnotin[ 0 1] ' format p raise nx Network X Error msg if n < 2 msg 'nmustbegreaterthanorequalto 2 'raise nx Network X Error msg if seed is not None random seed seed G nx Graph G name 'duplication divergence graph {} {} ' format n p G add edge 0 1 i 2while i < n random node random choice list G G add node i flag Falsefor nbr in G neighbors random node if random random < p G add edge i nbr flag Trueif not flag G remove node i else i + 1return G
def duplication divergence graph n p seed None if p > 1 or p < 0 msg ' Network X Errorp {0 }isnotin[ 0 1] ' format p raise nx Network X Error msg if n < 2 msg 'nmustbegreaterthanorequalto 2 'raise nx Network X Error msg if seed is not None random seed seed G nx Graph G name 'duplication divergence graph {} {} ' format n p G add edge 0 1 i 2while i < n random node random choice list G G add node i flag Falsefor nbr in G neighbors random node if random random < p G add edge i nbr flag Trueif not flag G remove node i else i + 1return G
def files with suffix base path suffix if os path isfile base path if base path endswith suffix yield base path else for root files in os walk base path for filename in files if filename endswith suffix yield os path join root filename
def Sequence To Image And Diff images image diff list []image seq tf unstack images axis 1 for size in [32 64 128 256 ] resized images [tf image resize images i [size size] for i in image seq]diffs []for i in xrange 0 len resized images - 1 diffs append resized images[ i + 1 ] - resized images[i] image diff list append tf concat 0 resized images[ -1 ] tf concat 0 diffs return image diff list
def Sequence To Image And Diff images image diff list []image seq tf unstack images axis 1 for size in [32 64 128 256 ] resized images [tf image resize images i [size size] for i in image seq]diffs []for i in xrange 0 len resized images - 1 diffs append resized images[ i + 1 ] - resized images[i] image diff list append tf concat 0 resized images[ -1 ] tf concat 0 diffs return image diff list
def release vlanid vlan id LOG debug 'release vlanid called' session db get session try vlanid session query network models v2 Vlan ID filter by vlan id vlan id one vlanid['vlan used'] Falsesession merge vlanid session flush return vlanid['vlan used']except exc No Result Found raise c exc Vlan ID Not Found vlan id vlan id return
def release vlanid vlan id LOG debug 'release vlanid called' session db get session try vlanid session query network models v2 Vlan ID filter by vlan id vlan id one vlanid['vlan used'] Falsesession merge vlanid session flush return vlanid['vlan used']except exc No Result Found raise c exc Vlan ID Not Found vlan id vlan id return
@pytest mark parametrize 'parallel' [ True False] def test many rows parallel read basic text 'ABC\n'for i in range 500 text + '' join [str i for i in range 3 ] text + '\n'table read basic text parallel parallel expected Table [ [0 ] * 500 [1 ] * 500 [2 ] * 500 ] names 'A' 'B' 'C' assert table equal table expected
def ls emr bootstrap stderr logs fs log dir stream action num None node id None matches ls logs fs log dir stream match emr bootstrap stderr path action num None node id None return sorted matches key lambda m - m['action num'] m['node id']
def skip Unless GIS Lookup *gis lookups def decorator test func @wraps test func def skip wrapper *args **kwargs if any key not in connection ops gis operators for key in gis lookups raise unittest Skip Test " Databasedoesn'tsupportallthelookups %s" % ' ' join gis lookups return test func *args **kwargs return skip wrapperreturn decorator
def task enable updates testing distribution raise Distribution Not Supported distribution distribution
def get outerhtml html node html string lxml html tostring html node return re sub '[^>]*$' '' html string count 1
def test pushdpopd xonsh builtins xonsh builtins xonsh env Env CDPATH PARENT PWD HERE dirstack cd [PARENT] owd os getcwd assert owd casefold xonsh builtins xonsh env ['PWD'] casefold dirstack pushd [HERE] wd os getcwd assert wd casefold HERE casefold dirstack popd [] assert owd casefold os getcwd casefold 'popdreturnedcwdtoexpecteddir'
def test pushdpopd xonsh builtins xonsh builtins xonsh env Env CDPATH PARENT PWD HERE dirstack cd [PARENT] owd os getcwd assert owd casefold xonsh builtins xonsh env ['PWD'] casefold dirstack pushd [HERE] wd os getcwd assert wd casefold HERE casefold dirstack popd [] assert owd casefold os getcwd casefold 'popdreturnedcwdtoexpecteddir'
@contextmanagerdef temp style style name settings None if not settings settings DUMMY SETTING Stemp file u'%s %s' % style name STYLE EXTENSION tempdir tempfile mkdtemp with open os path join tempdir temp file u'w' as f for k v in six iteritems settings f write u'%s %s' % k v USER LIBRARY PATHS append tempdir style reload library try yield finally shutil rmtree tempdir style reload library
def clear if not isatty sys stdout returnif WIN os system 'cls' else sys stdout write '\x 1 b[ 2 J\x 1 b[ 1 1H'
def register assert rewrite *names for name in names if not isinstance name str msg 'expectedmodulenamesas*args got{ 0 }instead'raise Type Error msg format repr names for hook in sys meta path if isinstance hook rewrite Assertion Rewriting Hook importhook hookbreakelse importhook Dummy Rewrite Hook importhook mark rewrite *names
def register assert rewrite *names for name in names if not isinstance name str msg 'expectedmodulenamesas*args got{ 0 }instead'raise Type Error msg format repr names for hook in sys meta path if isinstance hook rewrite Assertion Rewriting Hook importhook hookbreakelse importhook Dummy Rewrite Hook importhook mark rewrite *names
def downgrade version db version repo path get migrate repo path sql connection CONF sql connection LOG info ' Downgradingdatabasetoversion%s' % version return versioning api downgrade sql connection repo path version
def make conditional response last modified None etag None max age 0 response cache control must revalidate Trueresponse cache control max age max ageif last modified response last modified last modifiedif etag response set etag etag return response make conditional request httprequest
def make conditional response last modified None etag None max age 0 response cache control must revalidate Trueresponse cache control max age max ageif last modified response last modified last modifiedif etag response set etag etag return response make conditional request httprequest
def get msupdate status obj sm win 32 com client Dispatch ' Microsoft Update Service Manager' col services obj sm Servicesfor service in col services if service name ' Microsoft Update' return Truereturn False
def Time hour minute second return dateconverter Time hour minute second
def load class alias try return CLASS CACHE[alias]except Key Error passfor loader in CLASS LOADERS klass loader alias if klass is None continueif isinstance klass python class types return register class klass alias elif isinstance klass Class Alias CLASS CACHE[klass alias] klass CLASS CACHE[klass klass] klassreturn klassraise Type Error ' Expectingclassobjector Class Aliasfromloader' mod class alias split ' ' if mod class module ' ' join mod class[ -1 ] klass mod class[ -1 ]try module util get module module except Import Error Attribute Error passelse klass getattr module klass if isinstance klass python class types return register class klass alias elif isinstance klass Class Alias CLASS CACHE[klass alias] klass CLASS CACHE[klass klass] klassreturn klass klasselse raise Type Error ' Expectingclasstypeor Class Aliasfromloader' raise Unknown Class Alias ' Unknownaliasfor%r' % alias
def ensure home directory fs user userprofile get profile user if userprofile is not None and userprofile home directory fs do as user user username fs create home dir userprofile home directory else LOG warn ' Notcreatinghomedirectoryof%sashisprofileisempty' % user
def difftool run files selection selected group if not files returns selection selection model main model difftool launch with head files bool s staged model head
def output server session id None url 'default' app path '/' deprecated 0 12 3 'bokeh io output server ' '\nbokeh clientsessionsasdescribedathttp //bokeh pydata org/en/latest/docs/user guide/server html#connecting-with-bokeh-client"\n' from client import DEFAULT SESSION I Dif session id is None session id DEFAULT SESSION ID state output server session id session id url url app path app path
def output server session id None url 'default' app path '/' deprecated 0 12 3 'bokeh io output server ' '\nbokeh clientsessionsasdescribedathttp //bokeh pydata org/en/latest/docs/user guide/server html#connecting-with-bokeh-client"\n' from client import DEFAULT SESSION I Dif session id is None session id DEFAULT SESSION ID state output server session id session id url url app path app path
def end of set index string start index length len string closing index start indexif closing index < length and string[closing index] ' ' closing index + 1if closing index < length closing index + 1while closing index < length and string[closing index] ']' closing index + 1return closing index
def prep acl for compare ACL ret deepcopy ACL ret[' Owner'] normalize user ret[' Owner'] for item in ret get ' Grants' item[' Grantee'] normalize user item get ' Grantee' return ret
def get pending update vname ' Default 'key 'SOFTWARE\\ Microsoft\\ Windows\\ Current Version\\ Windows Update\\ Auto Update\\ Reboot Required'reg ret salt ['reg read value'] 'HKLM' key vname if reg ret['success'] log debug ' Foundkey %s' key return Trueelse log debug ' Unabletoaccesskey %s' key return False
def get color color data colors data colors if isinstance color str if color in data colors return data colors[color]else raise Value Error ' Colorname%sinprefsnotrecognized' % color else name coords colorif isinstance coords str colorspace 'rgb'else colorspace 'hsv'return Color name coords colorspace
def get color color data colors data colors if isinstance color str if color in data colors return data colors[color]else raise Value Error ' Colorname%sinprefsnotrecognized' % color else name coords colorif isinstance coords str colorspace 'rgb'else colorspace 'hsv'return Color name coords colorspace
def remove name path cmd [ get cmd '--remove' name path]out salt ['cmd run all'] cmd python shell False if out['retcode'] > 0 return out['stderr']return out['stdout']
def remove name path cmd [ get cmd '--remove' name path]out salt ['cmd run all'] cmd python shell False if out['retcode'] > 0 return out['stderr']return out['stdout']
def list formatter view values return u' ' join text type v for v in values
def libvlc vlm get media instance chapter p instance psz name i instance f Cfunctions get 'libvlc vlm get media instance chapter' None or Cfunction 'libvlc vlm get media instance chapter' 1 1 1 None ctypes c int Instance ctypes c char p ctypes c int return f p instance psz name i instance
def branch results results list results ret Result for result in results[ -1 ] ret + resultret + result expr as stmt for result in results[ -1 ] ret + resultreturn ret
def setup platform hass config add devices discovery info None dev id config get CONF ID devname config get CONF NAME sensor class config get CONF SENSOR CLASS add devices [ En Ocean Binary Sensor dev id devname sensor class ]
def add current user id graph user if graph graph current user id Noneif user is authenticated profile try get profile user facebook id get user attribute user profile 'facebook id' if facebook id graph current user id facebook id
def write Django Object obj encoder None s obj pkif s is None encoder write Object obj returndjango objects get Django Objects encoder context kls obj class try referenced object django objects get Class Key kls s except Key Error referenced object objdjango objects add Class Key kls s obj encoder write Object referenced object
def write Django Object obj encoder None s obj pkif s is None encoder write Object obj returndjango objects get Django Objects encoder context kls obj class try referenced object django objects get Class Key kls s except Key Error referenced object objdjango objects add Class Key kls s obj encoder write Object referenced object
@register simple tag def crispy addon field append '' prepend '' form show labels True if field context Context {'field' field 'form show errors' True 'form show labels' form show labels} template loader get template '%s/layout/prepended appended text html' % get template pack context['crispy prepended text'] prependcontext['crispy appended text'] appendif not prepend and not append raise Type Error ' Expectedaprependand/orappendargument' context context flatten return template render context
def get fontsize numrows thresholds [25 50 75 100 125 ]sizes [5 4 3 2 1 5 1]i 0while numrows > thresholds[i] i + 1if i len thresholds breakreturn sizes[i]
def Pearson Median Skewness xs median Median xs mean Raw Moment xs 1 var Central Moment xs 2 std math sqrt var gp 3 * mean - median / std return gp
def walk python files def is dir ignored root d if d startswith u' ' return Truereturn os path join rel root d in IGNORED DIRS for abs root dirnames filenames in os walk PROJECT ROOT rel root os path relpath abs root PROJECT ROOT if rel root u' ' rel root u''dirnames[ ] [d for d in dirnames if not is dir ignored rel root d ]for filename in filenames if not filename endswith u' py' continueabs name os path join abs root filename rel name os path join rel root filename yield abs name rel name
def get random state global random statesdev cuda Device rs random states get dev id None if rs is None rs Random State os getenv 'CHAINER SEED' random states[dev id] rsreturn rs
def ci arr ci from scipy import stats mean sigma arr mean 0 stats sem arr 0 return np asarray [stats t interval ci arr shape[ 0 ] loc mean scale sigma for mean sigma in zip mean sigma ] T
@pytest fixturedef webview qtbot webpage Qt Web Kit Widgets pytest importorskip ' Py Qt 5 Qt Web Kit Widgets' view Qt Web Kit Widgets Q Web View qtbot add widget view view page delete Later view set Page webpage view resize 640 480 return view
def get all volumes volume ids None filters None return objs False region None key None keyid None profile None conn get conn region region key key keyid keyid profile profile try ret conn get all volumes volume ids volume ids filters filters return ret if return objs else [r id for r in ret] except boto exception Boto Server Error as e log error e return []
def setup mainloop extension iteration scheme None features [numpy array f dtype theano config float X for f in [[ 1 2]] * 101 ]dataset Iterable Dataset dict features features data stream Data Stream dataset iteration scheme iteration scheme W shared floatx [0 0] name 'W' x tensor vector 'features' cost tensor sum x - W ** 2 cost name 'cost'algorithm Gradient Descent cost cost parameters [W] step rule Scale 0 001 main loop Main Loop model None data stream data stream algorithm algorithm extensions [ Finish After after n epochs 1 extension] return main loop
def extract modes spans rangelen sorted [ x['to'] - x['from'] + 1 for x in spans] deflen sorted rangelen key rangelen count [ -1 ]reprs [str 2 fmt x['str'] for x in spans]deffmt sorted reprs key reprs count [ -1 ]return deflen deffmt
def idna Text octets try import idnaexcept Import Error return octets decode 'idna' else return idna decode octets
@log calldef metadef tag count context namespace name namespace metadef namespace get context namespace name check namespace visibility context namespace namespace name count 0for tag in DATA['metadef tags'] if tag['namespace id'] namespace['id'] count count + 1 return count
def find human readable labels synsets synset to human humans []for s in synsets assert s in synset to human ' Failedtofind %s' % s humans append synset to human[s] return humans
def get wyr headers r requests get url API URL headers headers data r json data['title'] data['title'] strip capitalize rstrip ' ? ' data['choicea'] data['choicea'] strip lower rstrip ' ? ' lstrip ' ' data['choiceb'] data['choiceb'] strip lower rstrip ' ? ' lstrip ' ' if data['tags'] data['tags'] data['tags'] lower split ' ' else data['tags'] []if data['nsfw'] data['tags'] append 'nsfw' return data
def fractional matrix power A t A asarray square A import scipy linalg matfuncs inv ssqreturn scipy linalg matfuncs inv ssq fractional matrix power A t
def compile marker try return cache[marker]except Key Error passif not marker strip def marker fn environment None override None ''return Trueelse compiled marker compile marker parse marker marker def marker fn environment None override None 'overrideupdatesenvironment'if override is None override {}if environment is None environment default environment environment update override return eval compiled marker environment marker fn doc marker cache[marker] marker fnreturn cache[marker]
def remove SVG File svg File Path if archive get Ends With List svg File Path [' bottom svg' ' carve svg' ' chop svg' ' cleave svg' ' scale svg' ' vectorwrite svg'] os remove svg File Path print 'remove Generated Filesdeleted' + svg File Path
def sem a axis 0 ddof 1 nan policy 'propagate' a axis chk asarray a axis contains nan nan policy contains nan a nan policy if contains nan and nan policy 'omit' a ma masked invalid a return mstats basic sem a axis ddof n a shape[axis]s np std a axis axis ddof ddof / np sqrt n return s
def find OP Local Identifier service element type uris local id tags []if OPENID 1 1 TYPE in type uris or OPENID 1 0 TYPE in type uris local id tags append ns Tag OPENID 1 0 NS ' Delegate' if OPENID 2 0 TYPE in type uris local id tags append ns Tag XRD NS 2 0 ' Local ID' local id Nonefor local id tag in local id tags for local id element in service element findall local id tag if local id is None local id local id element textelif local id local id element text format ' Morethanone%rtagfoundinoneserviceelement'message format % local id tag raise Discovery Failure message None return local id
def preparse source f compose replace locals replace booleans rewrite assign assert callable f 'fmustbecallable'return tokenize untokenize lmap f tokenize string source
def preparse source f compose replace locals replace booleans rewrite assign assert callable f 'fmustbecallable'return tokenize untokenize lmap f tokenize string source
@login requireddef upload manifest *args **kwargs return upload manifest *args **kwargs
def make routine name expr argument sequence None global vars None language 'F 95 ' code gen get code generator language 'nothing Else Matters' return code gen routine name expr argument sequence global vars
def track from id identifier timeout DEFAULT ASYNC TIMEOUT param dict dict id identifier return profile param dict timeout
@contextmanagerdef temporary folder tempdir mkdtemp try yield tempdir finally rmtree tempdir
def get document name doc document registry get name None if not doc single end name split ' ' [ -1 ]compound end ' %s' % single end possible match [k for k in document registry keys if k endswith compound end or k single end ]if len possible match 1 doc document registry get possible match pop None if not doc raise Not Registered '\n`%s`hasnotbeenregisteredinthedocumentregistry \n Importingthedocumentclassautomaticallyregistersit hasit\nbeenimported?\n' strip % name return doc
def generate initial profile picture user id user email get email from user id user id user gravatar fetch gravatar user email update profile picture data url user id user gravatar
def generate initial profile picture user id user email get email from user id user id user gravatar fetch gravatar user email update profile picture data url user id user gravatar
@depends HAS PYVMOMI def update host datetime host username password protocol None port None host names None service instance salt utils vmware get service instance host host username username password password protocol protocol port port host names check hosts service instance host host names ret {}for host name in host names host ref get host ref service instance host host name host name date time manager get date time mgr host ref try date time manager Update Date Time datetime datetime utcnow except vim fault Host Config Fault as err msg "'vsphere update date time'failedforhost{ 0 } {1 }" format host name err log debug msg ret update {host name {' Error' msg}} continueret update {host name {' Datetime Updated' True}} return ret
def circmoment data p 1 0 centered False axis None weights None if centered phi circmean data axis weights else phi 0 0return angle data p phi axis weights length data p phi axis weights
def Find End Of Expression In Line line startpos depth startchar endchar for i in xrange startpos len line if line[i] startchar depth + 1elif line[i] endchar depth - 1if depth 0 return i + 1 0 return -1 depth
def default request ip resolver request return real ip request or x forwarded ip request or remote addr ip request
def default request ip resolver request return real ip request or x forwarded ip request or remote addr ip request
def generate encryption key key os urandom 32 encoded key base 64 b64 encode key decode 'utf- 8 ' print ' Base 64 encodedencryptionkey {}' format encoded key
def generate encryption key key os urandom 32 encoded key base 64 b64 encode key decode 'utf- 8 ' print ' Base 64 encodedencryptionkey {}' format encoded key
def auth nodes pcsuser 'hacluster' pcspasswd 'hacluster' extra args None cmd ['pcs' 'cluster' 'auth']if pcsuser cmd + ['-u' pcsuser]if pcspasswd cmd + ['-p' pcspasswd]if isinstance extra args list tuple cmd + extra argscmd + nodesreturn salt ['cmd run all'] cmd output loglevel 'trace' python shell False
def auth nodes pcsuser 'hacluster' pcspasswd 'hacluster' extra args None cmd ['pcs' 'cluster' 'auth']if pcsuser cmd + ['-u' pcsuser]if pcspasswd cmd + ['-p' pcspasswd]if isinstance extra args list tuple cmd + extra argscmd + nodesreturn salt ['cmd run all'] cmd output loglevel 'trace' python shell False
def pytest configure config if config getoption 'gae sdk' is not None set up gae environment config getoption 'gae sdk'
def pytest configure config if config getoption 'gae sdk' is not None set up gae environment config getoption 'gae sdk'
@must have addon SHORT NAME 'node' @must be addon authorizer SHORT NAME def figshare folder list node addon **kwargs return node addon get folders
@must have addon SHORT NAME 'node' @must be addon authorizer SHORT NAME def figshare folder list node addon **kwargs return node addon get folders
def unpack name dest None path None pack format 'tar' compress 'bz 2 ' if pack format 'tar' untar name dest path compress
@require POST@ensure csrf cookie@cache control no cache True no store True must revalidate True @require level 'staff' def get grading config request course id course id Slash Separated Course Key from deprecated string course id course get course with access request user 'staff' course id depth None grading config summary instructor analytics basic dump grading context course response payload {'course id' course id to deprecated string 'grading config summary' grading config summary}return Json Response response payload
def test destop from vispy gloo gl import gl 2 test function names gl 2 test constant names gl 2
def del pid pidfile if os path exists pidfile os remove pidfile
def valid iface iface ifaces list interfaces if iface in ifaces keys return Truereturn False
@auth s3 requires membership 1 def setting return dict
def Channel n rv channels get n None if rv is None rv Channel Impl n channels[n] rvreturn rv
def render report form start str end str start letter end letter report type total count error False date fmt error False context {'total count error' total count error 'date fmt error' date fmt error 'start date' start str 'end date' end str 'start letter' start letter 'end letter' end letter 'requested report' report type}return render to response 'shoppingcart/download report html' context
def convert systemd target to runlevel target if target 'poweroff target' runlevel '0 'elif target 'rescue target' runlevel 's'elif target 'multi-user target' runlevel '3 'elif target 'graphical target' runlevel '5 'elif target 'reboot target' runlevel '6 'else raise Value Error 'unknowntarget%s' % target return runlevel
def convert systemd target to runlevel target if target 'poweroff target' runlevel '0 'elif target 'rescue target' runlevel 's'elif target 'multi-user target' runlevel '3 'elif target 'graphical target' runlevel '5 'elif target 'reboot target' runlevel '6 'else raise Value Error 'unknowntarget%s' % target return runlevel
def get project count bugs mysite search models Bug all bugs all return bugs values u'project' distinct count
def get compute api class name cell type nova cells opts get cell type return CELL TYPE TO CLS NAME[cell type]
def output data **kwargs try if 'output indent' not in opts return json dumps data default repr indent 4 indent opts get 'output indent' sort keys Falseif indent is None indent Noneelif indent 'pretty' indent 4sort keys Trueelif isinstance indent int if indent > 0 indent indentelse indent Nonereturn json dumps data default repr indent indent sort keys sort keys except Unicode Decode Error as exc log error ' Unabletoserializeoutputtojson' return json dumps {'error' ' Unabletoserializeoutputtojson' 'message' str exc } except Type Error log debug ' Anerroroccurredwhileoutputting JSON' exc info True return json dumps {}
def absolute url staticfile is secure name url path staticfiles storage url name if urlparse urlparse url path netloc return url pathreturn absolute url is secure url path
def write error summary error fullpath request environ get 'FULLPATH' request path uid c user id if c user is loggedin else '-' g log error 'E %s U %s FP %s' error uid fullpath
def called in methods func klass methods if not isinstance func astroid Function return Falsefor method in methods try infered klass getattr method except astroid Not Found Error continuefor infer method in infered for callfunc in infer method nodes of class astroid Call Func try bound next callfunc func infer except astroid Inference Error Stop Iteration continueif not isinstance bound astroid Bound Method continuefunc obj bound proxiedif isinstance func obj astroid Unbound Method func obj func obj proxiedif func obj name func name return Truereturn False
def called in methods func klass methods if not isinstance func astroid Function return Falsefor method in methods try infered klass getattr method except astroid Not Found Error continuefor infer method in infered for callfunc in infer method nodes of class astroid Call Func try bound next callfunc func infer except astroid Inference Error Stop Iteration continueif not isinstance bound astroid Bound Method continuefunc obj bound proxiedif isinstance func obj astroid Unbound Method func obj func obj proxiedif func obj name func name return Truereturn False
def version return PIP VERSION
def remove file s for match in re finditer RE P15 s m match group 0 caption m[ -2 ] split ' ' [ -1 ]s s replace m caption 1 return s
def pad data bytes to pad AES block size - len data % AES block size return data + bytes to pad * chr bytes to pad
def set master service conn type private 'y' unpriv 'y' chroot 'y' wakeup 'n' maxproc '100 ' command '' write conf True path MASTER CF conf dict conf list parse master path new conf []dict key '{ 0 }{ 1 }' format service conn type new line format master service conn type private unpriv chroot wakeup maxproc command for line in conf list if isinstance line dict if line['service'] service and line['conn type'] conn type new conf append new line else new conf append format master **line else new conf append line if dict key not in conf dict new conf append new line if write conf write conf new conf path return '\n' join new conf
def new unfollow self user id user name url unfollow self url unfollow % user id try unfollow self s post url unfollow if unfollow status code 200 self unfollow counter + 1log string ' Unfollow %s#%i ' % user name self unfollow counter self write log log string return unfollowexcept self write log ' Exeptonunfollow ' return False
def new unfollow self user id user name url unfollow self url unfollow % user id try unfollow self s post url unfollow if unfollow status code 200 self unfollow counter + 1log string ' Unfollow %s#%i ' % user name self unfollow counter self write log log string return unfollowexcept self write log ' Exeptonunfollow ' return False
def publish progress *args **kwargs import frappe asyncreturn frappe async publish progress *args **kwargs
def expand login view login view if login view startswith 'https //' 'http //' '/' return login viewelse return url for login view
def make derivative operator M z def doit C r z * C diff z + C * M r r applyfunc make simp z return rreturn doit
def process extract samples samples to extract prefs {}if samples to extract samples samples to extract strip strip "'" split ' ' for j col in enumerate samples key str j prefs[key] {}prefs[key] colreturn prefs
def write trans fname trans check fname fname 'trans' '-trans fif' '-trans fif gz' fid start file fname write coord trans fid trans end file fid
def make Text Notes replace Txt Notes def replacer s out S replace Txt Notesif not isinstance s unicode str return sssplit s split ' ' 1 text ssplit[ 0 ]keys Dict {}if text keys Dict['text'] Trueout S out S replace '% text s' text if len ssplit 2 keys Dict['notes'] Trueout S out S replace '% notes s' ssplit[ 1 ] else out S out S replace '% notes s' u'' def exclude False Conditionals matchobj if matchobj group 1 in keys Dict return matchobj group 2 return u''while re conditional search out S out S re conditional sub exclude False Conditionals out S return out Sreturn replacer
@cache page 3600 key prefix 'js 18 n-%s' % get language def javascript catalog all request domain 'djangojs' all apps [x name for x in apps get app configs ]return javascript catalog request domain all apps
def get admin app list parser token tokens token contents split if len tokens < 3 raise template Template Syntax Error "'%s'tagrequirestwoarguments" % tokens[ 0 ] if tokens[ 1 ] 'as' raise template Template Syntax Error " Firstargumentto'%s'tagmustbe'as'" % tokens[ 0 ] return Admin Applist Node tokens[ 2 ]
def potential after i input string return i + 2 > len input string or input string[ i + 2 ] input string[i] and input string[ i + 1 ] not in seps
def make sampling table size sampling factor 1e- 05 gamma 0 577 rank np array list range size rank[ 0 ] 1inv fq rank * np log rank + gamma + 0 5 - 1 0 / 12 0 * rank f sampling factor * inv fq return np minimum 1 0 f / np sqrt f
def run script scriptfile try f open scriptfile mode 'r' except Exception returnmpstate console writeln ' Runningscript%s' % scriptfile for line in f line line strip if line '' or line startswith '#' continueif line startswith '@' line line[ 1 ]else mpstate console writeln '->%s' % line process stdin line f close
def pmonitor popens timeoutms 500 readline True readmax 1024 poller poll fd To Host {}for host popen in popens iteritems fd popen stdout fileno fd To Host[fd] hostpoller register fd POLLIN if not readline flags fcntl fd F GETFL fcntl fd F SETFL flags O NONBLOCK while popens fds poller poll timeoutms if fds for fd event in fds host fd To Host[fd]popen popens[host]if event & POLLIN if readline line popen stdout readline else line popen stdout read readmax yield host line elif event & POLLHUP poller unregister fd del popens[host]else yield None ''
def pmonitor popens timeoutms 500 readline True readmax 1024 poller poll fd To Host {}for host popen in popens iteritems fd popen stdout fileno fd To Host[fd] hostpoller register fd POLLIN if not readline flags fcntl fd F GETFL fcntl fd F SETFL flags O NONBLOCK while popens fds poller poll timeoutms if fds for fd event in fds host fd To Host[fd]popen popens[host]if event & POLLIN if readline line popen stdout readline else line popen stdout read readmax yield host line elif event & POLLHUP poller unregister fd del popens[host]else yield None ''
def check print compat return not os name 'nt' and version check '5 3 0' operator lt
def check print compat return not os name 'nt' and version check '5 3 0' operator lt
def hmc move s rng positions energy fn stepsize n steps initial vel s rng normal size positions shape final pos final vel simulate dynamics initial pos positions initial vel initial vel stepsize stepsize n steps n steps energy fn energy fn accept metropolis hastings accept energy prev hamiltonian positions initial vel energy fn energy next hamiltonian final pos final vel energy fn s rng s rng return accept final pos
def del quote db nick msg query qtable update where qtable c chan 1 where qtable c nick nick lower where qtable c msg msg values deleted 1 db execute query db commit
def use fsdev lib fs desc disk 1 only reinit disks global FSDEV FS DES Cglobal FSDEV RESTOR Eglobal FSDEV DISK 1 ONL Yglobal FSDEV PREP CNTFSDEV FS DESC fs desc FSDEV DISK 1 ONLY disk 1 only FSDEV RESTORE reinit disks FSDEV PREP CNT 0
def update limits limits dict limits get limits limits update limits dict update site config u'limits' limits validate False disable users limits frappe local conf limits limits
def make grid to short label dataset unique values [sorted list frozenset column for column in dataset y[ 5] transpose ]category index dataset label name to index['category']unique categories unique values[category index]category to name dataset label to value funcs[category index]if any category to name category 'blank' for category in unique categories for d in range 1 len unique values assert unique values[d][ 0 ] -1 'unique values %s' % str unique values unique values[d] unique values[d][ 1 ]return unique values
def make grid to short label dataset unique values [sorted list frozenset column for column in dataset y[ 5] transpose ]category index dataset label name to index['category']unique categories unique values[category index]category to name dataset label to value funcs[category index]if any category to name category 'blank' for category in unique categories for d in range 1 len unique values assert unique values[d][ 0 ] -1 'unique values %s' % str unique values unique values[d] unique values[d][ 1 ]return unique values
def make grid to short label dataset unique values [sorted list frozenset column for column in dataset y[ 5] transpose ]category index dataset label name to index['category']unique categories unique values[category index]category to name dataset label to value funcs[category index]if any category to name category 'blank' for category in unique categories for d in range 1 len unique values assert unique values[d][ 0 ] -1 'unique values %s' % str unique values unique values[d] unique values[d][ 1 ]return unique values
def single source dijkstra path G source cutoff None weight 'weight' return multi source dijkstra path G {source} cutoff cutoff weight weight
def cache model model timeout None if hasattr model 'get cached' returndef clear cache sender instance *args **kwargs '\n Clearsthecacheforthegiveninstance \n'delete instance sender instance post save connect clear cache sender model weak False post delete connect clear cache sender model weak False @classmethoddef get cls pk using None '\n Returnsthemodelforthegivenprimarykey pk \n'if pk is None return Nonereturn get instance cls pk timeout using model get cached get
def cache model model timeout None if hasattr model 'get cached' returndef clear cache sender instance *args **kwargs '\n Clearsthecacheforthegiveninstance \n'delete instance sender instance post save connect clear cache sender model weak False post delete connect clear cache sender model weak False @classmethoddef get cls pk using None '\n Returnsthemodelforthegivenprimarykey pk \n'if pk is None return Nonereturn get instance cls pk timeout using model get cached get
def cache model model timeout None if hasattr model 'get cached' returndef clear cache sender instance *args **kwargs '\n Clearsthecacheforthegiveninstance \n'delete instance sender instance post save connect clear cache sender model weak False post delete connect clear cache sender model weak False @classmethoddef get cls pk using None '\n Returnsthemodelforthegivenprimarykey pk \n'if pk is None return Nonereturn get instance cls pk timeout using model get cached get
def cache model model timeout None if hasattr model 'get cached' returndef clear cache sender instance *args **kwargs '\n Clearsthecacheforthegiveninstance \n'delete instance sender instance post save connect clear cache sender model weak False post delete connect clear cache sender model weak False @classmethoddef get cls pk using None '\n Returnsthemodelforthegivenprimarykey pk \n'if pk is None return Nonereturn get instance cls pk timeout using model get cached get
def main args None parser argparse Argument Parser description ' Loada YAM Lfilewithoutperforminganytraining ' parser add argument 'yaml file' type argparse File Type 'r' help ' The YAM Lfiletoload ' parser add argument '-N' '--no-instantiate' action 'store const' default False const True help ' Onlyverifythatthe YAM Lparsescorrectlybutdonotattempttoinstantiatetheobjects Thismightbeusedasaquicksanitycheckifcheckingafilethatrequiresa GP Uinanenvironmentthatlacksone e g aclusterheadnode ' args parser parse args args args name args yaml file nameinitialize if args no instantiate yaml load args yaml file print ' Successfullyparsed%s butobjectsnotinstantiated ' % name else load args yaml file print ' Successfullyparsedandloaded%s ' % name
def profile SP sp Class sp Dim n Runs in Dim [10000 1 1]col Dim [sp Dim 1 1]sp sp Class input Dimensions in Dim column Dimensions col Dim potential Radius 3 potential Pct 0 5 global Inhibition False local Area Density -1 0 num Active Columns Per Inh Area 3 stimulus Threshold 1 syn Perm Inactive Dec 0 01 syn Perm Active Inc 0 1 syn Perm Connected 0 1 min Pct Overlap Duty Cycle 0 1 duty Cycle Period 10 boost Strength 10 0 seed 42 sp Verbosity 0 data Dim in Dimdata Dim append n Runs data numpy random randint 0 2 data Dim astype 'float 32 ' for i in xrange n Runs d data[ i]active Array numpy zeros col Dim sp compute d True active Array
def profile SP sp Class sp Dim n Runs in Dim [10000 1 1]col Dim [sp Dim 1 1]sp sp Class input Dimensions in Dim column Dimensions col Dim potential Radius 3 potential Pct 0 5 global Inhibition False local Area Density -1 0 num Active Columns Per Inh Area 3 stimulus Threshold 1 syn Perm Inactive Dec 0 01 syn Perm Active Inc 0 1 syn Perm Connected 0 1 min Pct Overlap Duty Cycle 0 1 duty Cycle Period 10 boost Strength 10 0 seed 42 sp Verbosity 0 data Dim in Dimdata Dim append n Runs data numpy random randint 0 2 data Dim astype 'float 32 ' for i in xrange n Runs d data[ i]active Array numpy zeros col Dim sp compute d True active Array
@get '/scan/<taskid>/data' def scan data taskid json data message list json errors message list if taskid not in Data Store tasks logger warning '[%s] Invalidtask I Dprovidedtoscan data ' % taskid return jsonize {'success' False 'message' ' Invalidtask ID'} for status content type value in Data Store current db execute 'SELEC Tstatus content type value FRO Mdata WHER Etaskid ?ORDERB Yid ASC' taskid json data message append {'status' status 'type' content type 'value' dejsonize value } for error in Data Store current db execute 'SELEC Terror FRO Merrors WHER Etaskid ?ORDERB Yid ASC' taskid json errors message append error logger debug '[%s] Retrievedscandataanderrormessages' % taskid return jsonize {'success' True 'data' json data message 'error' json errors message}
@status ' Gettingthelistoffilesthathavebeenadded/changed' info lambda x n files str len x def changed files if not os path isdir os path join SRCDIR ' hg' sys exit 'needacheckouttogetmodifiedfiles' cmd 'hgstatus--added--modified--no-status'if mq patches applied cmd + '--revqparent'with subprocess Popen cmd split stdout subprocess PIPE as st return [x decode rstrip for x in st stdout]
def check for unavailable sdk config vars cflags config vars get 'CFLAGS' '' m re search '-isysroot\\s+ \\S+ ' cflags if m is not None sdk m group 1 if not os path exists sdk for cv in UNIVERSAL CONFIG VARS if cv in config vars and cv not in os environ flags config vars[cv]flags re sub '-isysroot\\s+\\S+ ? \\s $ ' '' flags save modified value config vars cv flags return config vars
def matplotlib fname if six PY 2 cwd os getcwdu else cwd os getcwd fname os path join cwd u'matplotlibrc' if os path exists fname return fnameif u'MATPLOTLIBRC' in os environ path os environ[u'MATPLOTLIBRC']if os path exists path if os path isfile path return pathfname os path join path u'matplotlibrc' if os path exists fname return fnameconfigdir get configdir if os path exists configdir fname os path join configdir u'matplotlibrc' if os path exists fname return fnamepath get data path fname os path join path u'matplotlibrc' if not os path exists fname warnings warn u' Couldnotfindmatplotlibrc usingdefaults' return fname
def remove property value prop predicate removed vals []removed vals filter predicate prop property Value if len removed vals len prop property Value prop parent remove Property prop name else x prop property Value css Textfor v in removed vals x x replace v css Text u'' strip prop property Value css Text xreturn bool removed vals
def remove property value prop predicate removed vals []removed vals filter predicate prop property Value if len removed vals len prop property Value prop parent remove Property prop name else x prop property Value css Textfor v in removed vals x x replace v css Text u'' strip prop property Value css Text xreturn bool removed vals
def tar file dir expression '^ +$' filenames None exclude content from None tar tarfile Tar File file 'w' try if filenames is None filenames listdir dir expression add dirs True exclude content from exclude content from for file in filenames tar add os path join dir file file False finally tar close
def md 5 sum is current src file src md 5 get md 5 sum src file src md 5 file src file + ' md 5 ' if os path exists src md 5 file with open src md 5 file 'r' as file checksum ref md 5 file checksum read return src md 5 ref md 5 return False
def md 5 sum is current src file src md 5 get md 5 sum src file src md 5 file src file + ' md 5 ' if os path exists src md 5 file with open src md 5 file 'r' as file checksum ref md 5 file checksum read return src md 5 ref md 5 return False
def create command args zone create zone args project id args name args dns name args description print ' Zone{}added ' format zone name
def test random sample different definitions a db from sequence range 50 npartitions 5 assert list a random sample 0 5 list a random sample 0 5 assert a random sample 0 5 name a random sample 0 5 name
def test random sample different definitions a db from sequence range 50 npartitions 5 assert list a random sample 0 5 list a random sample 0 5 assert a random sample 0 5 name a random sample 0 5 name
def test random sample different definitions a db from sequence range 50 npartitions 5 assert list a random sample 0 5 list a random sample 0 5 assert a random sample 0 5 name a random sample 0 5 name
def colorize msg color if DONT COLORIZE return msgelse return '{}{}{}' format COLORS[color] msg COLORS['endc']
def colorize msg color if DONT COLORIZE return msgelse return '{}{}{}' format COLORS[color] msg COLORS['endc']
def ensure dir is templated dirname if u'{{' in dirname and u'}}' in dirname return Trueelse raise Non Templated Input Dir Exception
def is python interpreter filename real filename os path realpath filename if not osp isfile real filename or encoding is text file real filename or not is python interpreter valid name filename return Falsetry proc run program filename ['-h'] output to text string proc communicate [0 ] valid ' Optionsandarguments andcorrespondingenvironmentvariables 'if 'usage ' in output and valid in output return Trueelse return Falseexcept return False
@content git object init connectdef git sha metadata content git content if not content settings['GIT SHA METADATA'] returnif not git content is committed returncontent metadata['gitsha newest'] str git content get newest commit content metadata['gitsha oldest'] str git content get oldest commit
def determine before str options now datetime datetime now today datetime datetime now year now month now day day offset options agebefore str today - datetime timedelta day offset isoformat if day offset is not None else None return before str
def backup create context values return IMPL backup create context values
def version path with settings hide 'running' 'stdout' 'warnings' warn only True res run os path join path 'bin/version sh' if res failed return Noneelse return extract tomcat version res
def non token view using request processor request context Request Context request processors [csrf] template Template '' return Http Response template render context
def non token view using request processor request context Request Context request processors [csrf] template Template '' return Http Response template render context
def non token view using request processor request context Request Context request processors [csrf] template Template '' return Http Response template render context
def get activity rights activity type activity id if activity type feconf ACTIVITY TYPE EXPLORATION return get exploration rights activity id strict False elif activity type feconf ACTIVITY TYPE COLLECTION return get collection rights activity id strict False else raise Exception ' Cannotgetactivityrightsforunknownactivitytype %s' % activity type
def get activity rights activity type activity id if activity type feconf ACTIVITY TYPE EXPLORATION return get exploration rights activity id strict False elif activity type feconf ACTIVITY TYPE COLLECTION return get collection rights activity id strict False else raise Exception ' Cannotgetactivityrightsforunknownactivitytype %s' % activity type
def get activity rights activity type activity id if activity type feconf ACTIVITY TYPE EXPLORATION return get exploration rights activity id strict False elif activity type feconf ACTIVITY TYPE COLLECTION return get collection rights activity id strict False else raise Exception ' Cannotgetactivityrightsforunknownactivitytype %s' % activity type
def course grading policy course key course retrieve course course key return Grading Policy Serializer course raw grader many True data
def adapt mismatch original matchee marker object if getattr original 'mismatched' marker is marker return mismatch matchee original describe original get details return original
def adapt mismatch original matchee marker object if getattr original 'mismatched' marker is marker return mismatch matchee original describe original get details return original
def adapt mismatch original matchee marker object if getattr original 'mismatched' marker is marker return mismatch matchee original describe original get details return original
def adapt mismatch original matchee marker object if getattr original 'mismatched' marker is marker return mismatch matchee original describe original get details return original
def sort Loops In Order Of Area is Descending loops loops sort key euclidean get Area Loop Absolute reverse is Descending
def sort Loops In Order Of Area is Descending loops loops sort key euclidean get Area Loop Absolute reverse is Descending
def get used lun id counter mapping used luns get used lun ids for mappings mapping used lun id counter collections Counter used luns return used lun id counter
def get used lun id counter mapping used luns get used lun ids for mappings mapping used lun id counter collections Counter used luns return used lun id counter
def get dev port backend instance None port os environ get get dev port var backend instance None if port return int port else return None
def human readable size sep '' divisor suffix 1 'B' for i candidate in enumerate 'B' 'KB' 'MB' 'GB' 'TB' 'PB' 'EB' if size < 1 << i + 1 * 10 divisor suffix 1 << i * 10 candidate breaksize str float size / divisor if size find ' ' > -1 size size[ size find ' ' + 2 ]if size endswith ' 0' size size[ -2 ]return size + sep + suffix
def delete subnet subnet profile None conn auth profile return conn delete subnet subnet
def delete asset course key asset key string if asset key string try asset key Asset Key from string asset key string except Invalid Key Error if '/' asset key string[ 0 ] asset key string asset key string[ 1 ]try asset key Asset Key from string asset key string except Invalid Key Error LOGGER info ' Incourse%r unabletoparseassetkey%r notattemptingtodeletesignatory ' course key asset key string returnelse LOGGER info ' Incourse%r unabletoparseassetkey%r notattemptingtodeletesignatory ' course key asset key string returntry delete asset course key asset key except Asset Not Found Exception pass
def delete asset course key asset key string if asset key string try asset key Asset Key from string asset key string except Invalid Key Error if '/' asset key string[ 0 ] asset key string asset key string[ 1 ]try asset key Asset Key from string asset key string except Invalid Key Error LOGGER info ' Incourse%r unabletoparseassetkey%r notattemptingtodeletesignatory ' course key asset key string returnelse LOGGER info ' Incourse%r unabletoparseassetkey%r notattemptingtodeletesignatory ' course key asset key string returntry delete asset course key asset key except Asset Not Found Exception pass
def s3 auth user represent id row None if row return row emailelif not id return current messages['NONE']db current dbtable db auth useruser db table id id select table email limitby 0 1 cache current s3 db cache first try return user emailexcept return current messages UNKNOWN OPT
@publicdef gcdex f g *gens **args options allowed flags args ['auto' 'polys'] try F G opt parallel poly from expr f g *gens **args except Polification Failed as exc domain a b construct domain exc exprs try s t h domain gcdex a b except Not Implemented Error raise Computation Failed 'gcdex' 2 exc else return domain to sympy s domain to sympy t domain to sympy h s t h F gcdex G auto opt auto if not opt polys return s as expr t as expr h as expr else return s t h
def cast to array dtype in 1 in 2 if numpy issubdtype in 2 dtype numpy float in 1 in 1 real astype in 2 dtype else in 1 in 1 astype in 2 dtype return in 1
@cachedef suggest query search params {u'list' u'search' u'srinfo' u'suggestion' u'srprop' u''}search params[u'srsearch'] queryraw result wiki request search params if raw result[u'query'] get u'searchinfo' return raw result[u'query'][u'searchinfo'][u'suggestion']return None
@docfillerdef sobel input axis -1 output None mode 'reflect' cval 0 0 input numpy asarray input axis ni support check axis axis input ndim output return value ni support get output output input modes ni support normalize sequence mode input ndim correlate 1 d input [ -1 0 1] axis output modes[axis] cval 0 axes [ii for ii in range input ndim if ii axis ]for ii in axes correlate 1 d output [1 2 1] ii output modes[ii] cval 0 return return value
def take iter num out []for val in iter out append val num - 1if num < 0 breakreturn out
def install cygwin name install args None override args False return install name source 'cygwin' install args install args override args override args
def get page args pages {}for arg in request args re match re findall 'page * ' arg if re match pages[re match[ 0 ]] int request args get arg return pages
def zpkbilinear z p k fs z atleast 1d z p atleast 1d p degree relative degree z p fs 2 2 * fs z z fs 2 + z / fs 2 - z p z fs 2 + p / fs 2 - p z z append z z - ones degree k z k * real prod fs 2 - z / prod fs 2 - p return z z p z k z
def gencastshapes for n in range 32 yield [n] ndim randrange 4 6 minshape 1 if randrange 100 > 80 else 2 yield [randrange minshape 5 for in range ndim ] ndim randrange 2 4 minshape 1 if randrange 100 > 80 else 2 yield [randrange minshape 5 for in range ndim ]
def test db illegal catalog db vos catalog VOS Database create empty db catalogs[u'foo'] {u'foo' u'bar'}with pytest raises VOS Error db vos catalog VOS Database db tree
def setup platform hass config add devices discovery info None username config get CONF USERNAME password config get CONF PASSWORD try hydroquebec data Hydroquebec Data username password hydroquebec data update except requests exceptions HTTP Error as error LOGGER error error return Falsename config get CONF NAME sensors []for variable in config[CONF MONITORED VARIABLES] sensors append Hydro Quebec Sensor hydroquebec data variable name add devices sensors
def update secret namespace name data apiserver url url '{ 0 }/api/v 1 /namespaces/{ 1 }/secrets/{ 2 }' format apiserver url namespace name data [{'op' 'replace' 'path' '/data' 'value' data}]ret kpatch url data if ret get 'status' 404 return " Node{ 0 }doesn'texist" format url return ret
def update secret namespace name data apiserver url url '{ 0 }/api/v 1 /namespaces/{ 1 }/secrets/{ 2 }' format apiserver url namespace name data [{'op' 'replace' 'path' '/data' 'value' data}]ret kpatch url data if ret get 'status' 404 return " Node{ 0 }doesn'texist" format url return ret
def gm constrs t x list p assert is weight p w dyad completion p tree decompose w d defaultdict lambda lu create var t size d[w] tif len x list < len w x list + [t]assert len x list len w for i p v in enumerate zip w x list if p > 0 tmp [0 ] * len w tmp[i] 1d[tuple tmp ] vconstraints []for elem children in tree items if 1 not in elem constraints + [gm d[elem] d[children[ 0 ]] d[children[ 1 ]] ]return constraints
def gm constrs t x list p assert is weight p w dyad completion p tree decompose w d defaultdict lambda lu create var t size d[w] tif len x list < len w x list + [t]assert len x list len w for i p v in enumerate zip w x list if p > 0 tmp [0 ] * len w tmp[i] 1d[tuple tmp ] vconstraints []for elem children in tree items if 1 not in elem constraints + [gm d[elem] d[children[ 0 ]] d[children[ 1 ]] ]return constraints
def trim doc string text lines text replace '\r\n' '\n' split '\n' nlines [lines pop 0 ]if lines min indent min [ len line - len line lstrip for line in lines] for line in lines nlines append line[min indent ] return '\n' join nlines
def find playlist changes orig tracks modified tracks s pairs get id pairs orig tracks d pairs get id pairs modified tracks s count Counter s pairs d count Counter d pairs to del s count - d count to add d count - s count to keep set s count & d count return to del to add to keep
def print results query results page token Nonewhile True rows total rows page token query results fetch data max results 10 page token page token for row in rows print rowif not page token break
@frappe whitelist def get module data get data module out {u'data' data}return out
@frappe whitelist def get module data get data module out {u'data' data}return out
@frappe whitelist def get module data get data module out {u'data' data}return out
def bin constructor func func argtypes [c char p c size t]func restype GEOM PT Rfunc errcheck check geomreturn func
def check ldev ldev info ldev existing ref if ldev info['sts'] NORMAL STS msg utils output log MSG INVALID LDEV FOR MANAGE raise exception Manage Existing Invalid Reference existing ref existing ref reason msg vol attr set ldev info['vol attr'] if not ldev info['vol type'] startswith 'OPEN-V' or len vol attr < 2 or not vol attr issubset PERMITTED TYPES msg utils output log MSG INVALID LDEV ATTR FOR MANAGE ldev ldev ldevtype utils NVOL LDEV TYPE raise exception Manage Existing Invalid Reference existing ref existing ref reason msg if ldev info['vol size'] % utils GIGABYTE PER BLOCK SIZE msg utils output log MSG INVALID LDEV SIZE FOR MANAGE ldev ldev raise exception Manage Existing Invalid Reference existing ref existing ref reason msg if ldev info['num port'] msg utils output log MSG INVALID LDEV PORT FOR MANAGE ldev ldev raise exception Manage Existing Invalid Reference existing ref existing ref reason msg
def check ldev ldev info ldev existing ref if ldev info['sts'] NORMAL STS msg utils output log MSG INVALID LDEV FOR MANAGE raise exception Manage Existing Invalid Reference existing ref existing ref reason msg vol attr set ldev info['vol attr'] if not ldev info['vol type'] startswith 'OPEN-V' or len vol attr < 2 or not vol attr issubset PERMITTED TYPES msg utils output log MSG INVALID LDEV ATTR FOR MANAGE ldev ldev ldevtype utils NVOL LDEV TYPE raise exception Manage Existing Invalid Reference existing ref existing ref reason msg if ldev info['vol size'] % utils GIGABYTE PER BLOCK SIZE msg utils output log MSG INVALID LDEV SIZE FOR MANAGE ldev ldev raise exception Manage Existing Invalid Reference existing ref existing ref reason msg if ldev info['num port'] msg utils output log MSG INVALID LDEV PORT FOR MANAGE ldev ldev raise exception Manage Existing Invalid Reference existing ref existing ref reason msg
def send draft copy account draft custom body recipient response on success encode draft response on success['body'] custom bodyresponse on success API Encoder jsonify response on success try sendmail client get sendmail client account sendmail client send custom draft custom body [recipient] except Send Mail Exception as exc kwargs {}if exc failures kwargs['failures'] exc failuresif exc server error kwargs['server error'] exc server errorreturn err exc http code exc message **kwargs return response on success
def raise if offline func @functools wraps func def decorator *args **kwargs if context is offline mode raise Runtime Error '%scannotbecalledwhileinofflinemode' % func name return func *args **kwargs return decorator
def filter crowd proposals roidb crowd thresh for ix entry in enumerate roidb overlaps entry['gt overlaps'] toarray crowd inds np where overlaps max axis 1 -1 [0 ]non gt inds np where entry['gt classes'] 0 [0 ]if len crowd inds 0 or len non gt inds 0 continueiscrowd [int True for in xrange len crowd inds ]crowd boxes ds utils xyxy to xywh entry['boxes'][crowd inds ] non gt boxes ds utils xyxy to xywh entry['boxes'][non gt inds ] ious COC Omask iou non gt boxes crowd boxes iscrowd bad inds np where ious max axis 1 > crowd thresh [0 ]overlaps[non gt inds[bad inds] ] -1 roidb[ix]['gt overlaps'] scipy sparse csr matrix overlaps return roidb
def create region name region cache create region region name namereturn region
def get Unique Vertexes loops vertex Dictionary {}unique Vertexes []for loop in loops for vertex Index vertex in enumerate loop vertex Tuple vertex x vertex y vertex z if vertex Tuple in vertex Dictionary loop[vertex Index] vertex Dictionary[vertex Tuple]else if vertex class Vector 3 Index loop[vertex Index] index len vertex Dictionary else loop[vertex Index] Vector 3 Index len vertex Dictionary vertex x vertex y vertex z vertex Dictionary[vertex Tuple] loop[vertex Index]unique Vertexes append loop[vertex Index] return unique Vertexes
def lemmatize word lemma nltk corpus wordnet morphy word pos nltk corpus wordnet VERB if lemma is not None return lemmareturn word
def lemmatize word lemma nltk corpus wordnet morphy word pos nltk corpus wordnet VERB if lemma is not None return lemmareturn word
def unicode dict dict r {}for k v in iteritems dict r[unicode obj k ] unicode obj v return r
def test operator type assert TPOT Select K Best type ' Selector'
def test operator type assert TPOT Select K Best type ' Selector'
def independent a b return not dependent a b
def independent a b return not dependent a b
def independent a b return not dependent a b
def independent a b return not dependent a b
@allow cross site request@non atomic requestsdef render csv request addon stats fields title None show disclaimer None ts time strftime '%c%z' context {'addon' addon 'timestamp' ts 'title' title 'show disclaimer' show disclaimer}response render request 'stats/csv header txt' context writer Unicode CSV Dict Writer response fields restval 0 extrasaction 'ignore' writer writeheader writer writerows stats fudge headers response stats response[' Content- Type'] 'text/csv charset utf- 8 'return response
def in x y try return x isin y except Attribute Error if is list like x try return y isin x except Attribute Error passreturn x in y
def num solutions user return Question objects filter solution creator user count
def format state result name result changes None comment '' if changes is None changes {'old' '' 'new' ''}return {'name' name 'result' result 'changes' changes 'comment' comment}
def build network settings **settings current network settings parse rh config RH NETWORK FILE opts parse network settings settings current network settings try template JINJA get template 'network jinja' except jinja 2 exceptions Template Not Found log error ' Couldnotloadtemplatenetwork jinja' return ''network template render opts if settings['test'] return read temp network write file network network RH NETWORK FILE return read file RH NETWORK FILE
def get resampler for grouping groupby rule how None fill method None limit None kind None **kwargs tg Time Grouper freq rule **kwargs resampler tg get resampler groupby obj kind kind r resampler get resampler for grouping groupby groupby return maybe process deprecations r how how fill method fill method limit limit
def cx Uniform Partialy Matched ind 1 ind 2 indpb size min len ind 1 len ind 2 p1 p2 [0 ] * size [0 ] * size for i in xrange size p1 [ind 1 [i]] ip 2 [ind 2 [i]] ifor i in xrange size if random random < indpb temp 1 ind 1 [i]temp 2 ind 2 [i] ind 1 [i] ind 1 [p 1 [temp 2 ]] temp 2 temp 1 ind 2 [i] ind 2 [p 2 [temp 1 ]] temp 1 temp 2 p1 [temp 1 ] p1 [temp 2 ] p1 [temp 2 ] p1 [temp 1 ] p2 [temp 1 ] p2 [temp 2 ] p2 [temp 2 ] p2 [temp 1 ] return ind 1 ind 2
def sublist reverse lst a b while b > a lst[a] lst[b] lst[b] lst[a] b - 1a + 1
def get All Transformed Vertexes transformed Vertexes xml Object for archivable Object in xml Object archivable Objects transformed Vertexes + archivable Object get Transformed Vertexes return transformed Vertexes
def test function series 2 class my function 2 Function def fdiff self argindex 1 return - sin self args[ 0 ] @classmethoddef eval cls arg arg sympify arg if arg 0 return sympify 1 assert my function 2 x series x 0 10 cos x series x 0 10
def get key if CONFIG if key in CONFIG opts return CONFIG opts[key]['value']elif key in CONFIG opts return CONFIG opts[key]['value']
def inet aton text parts text split ' ' if len parts 4 raise dns exception Syntax Errorfor part in parts if not part isdigit raise dns exception Syntax Errorif len part > 1 and part[ 0 ] '0 ' raise dns exception Syntax Errortry bytes [int part for part in parts]return struct pack 'BBBB' *bytes except raise dns exception Syntax Error
def unlock path zk hosts None identifier None max concurrency 1 ephemeral lease False if zk hosts is not None and path not in SEMAPHORE MAP zk get zk conn zk hosts SEMAPHORE MAP[path] Semaphore zk path identifier max leases max concurrency ephemeral lease ephemeral lease if path in SEMAPHORE MAP SEMAPHORE MAP[path] release del SEMAPHORE MAP[path]return Trueelse logging error ' Unabletofindleaseforpath{ 0 }' format path return False
def table extend tables keep headers True from copy import deepcopyfor ii t in enumerate tables[ ] t deepcopy t if t[ 0 ] datatype 'header' t[ 0 ][ 0 ] data t titlet[ 0 ][ 0 ] datatype Nonet[ 0 ][ 0 ] row t[ 0 ][ 1 ] rowif not keep headers and ii > 0 for c in t[ 0 ][ 1 ] c data ''if ii 0 table all telse r1 table all[ -1 ]r 1 add format 'txt' row dec below '-' table all extend t table all title Nonereturn table all
def ensure ca bundle dir global ca bundle dirif not ca bundle dir ca bundle dir os path join sublime packages path ' User' if not os path exists ca bundle dir os mkdir ca bundle dir
def fanout cast context topic msg return get impl fanout cast CONF context topic msg
def config dict handle conf mappings handler None selected config get config handle selected config add listener Sync Listener conf mappings handler update return conf mappings
def mod init low try salt ['portage config enforce nice config'] except Exception return Falsereturn True
def get variables to restore return tf get collection VARIABLES TO RESTORE [ ]
@depends HAS HDPARM def hdparm args failhard True cmd 'hdparm{ 0 }' format args result salt ['cmd run all'] cmd if result['retcode'] 0 msg '{ 0 } {1 }' format cmd result['stderr'] if failhard raise Command Execution Error msg else log warning msg return result['stdout']
def test rechunk method old 5 2 3 * 4 new 3 3 3 1 * 4 a np random uniform 0 1 10000 reshape 10 * 4 x da from array a chunks old x2 x rechunk chunks new assert x2 chunks new assert np all x2 compute a
def reset sequence model sql connection ops sequence reset sql no style [model] for cmd in sql connection cursor execute cmd
def reset sequence model sql connection ops sequence reset sql no style [model] for cmd in sql connection cursor execute cmd
@jwt required def auth jwt g user current identity
def wait for new device base expected size time limit 60 start time time time elapsed time time time - start time while elapsed time < time limit for device in list set File Path '/sys/block' children - set base device name device basename if device name startswith 'sd' 'xvd' and get device size device name expected size return File Path '/dev' child device name time sleep 0 1 elapsed time time time - start time new devices list device basename for device in set File Path '/sys/block' children - set base new devices size list get device size device name for device name in new devices NO NEW DEVICE IN OS new devices new devices new devices size new devices size expected size expected size time limit time limit write return None
def wait for new device base expected size time limit 60 start time time time elapsed time time time - start time while elapsed time < time limit for device in list set File Path '/sys/block' children - set base device name device basename if device name startswith 'sd' 'xvd' and get device size device name expected size return File Path '/dev' child device name time sleep 0 1 elapsed time time time - start time new devices list device basename for device in set File Path '/sys/block' children - set base new devices size list get device size device name for device name in new devices NO NEW DEVICE IN OS new devices new devices new devices size new devices size expected size expected size time limit time limit write return None
def get hostname server None version None instance None req servers service pb Get Hostname Request if server req set server server if version req set version version if instance if not isinstance instance basestring long int raise Type Error "'instance'argmustbeoftypebasestring longorint " req set instance '%s' % instance resp servers service pb Get Hostname Response try apiproxy stub map Make Sync Call 'servers' ' Get Hostname' req resp except apiproxy errors Application Error as e if e application error servers service pb Servers Service Error INVALID SERVER raise Invalid Server Error elif e application error servers service pb Servers Service Error INVALID INSTANCES raise Invalid Instances Error else raise Error return resp hostname
def write incron lines user lines if user 'system' ret {}ret['retcode'] write file INCRON SYSTEM TAB 'salt' '' join lines return retelse path salt utils files mkstemp with salt utils fopen path 'w+' as fp fp writelines lines if grains ['os family'] ' Solaris' and user 'root' salt ['cmd run'] 'chown{ 0 }{ 1 }' format user path python shell False ret salt ['cmd run all'] get incron cmdstr path runas user python shell False os remove path return ret
def rst 2 md text pandoc subprocess Popen ['pandoc' '--from rst' '--to markdown' '--no-wrap'] stdin subprocess PIPE stdout subprocess PIPE stderr subprocess PIPE stdout pandoc communicate text encode 'utf- 8 ' md stdout decode 'utf- 8 ' strip return re sub '^-' '-' md flags re M
def rst 2 md text pandoc subprocess Popen ['pandoc' '--from rst' '--to markdown' '--no-wrap'] stdin subprocess PIPE stdout subprocess PIPE stderr subprocess PIPE stdout pandoc communicate text encode 'utf- 8 ' md stdout decode 'utf- 8 ' strip return re sub '^-' '-' md flags re M
def create dummy vm name service instance vm folder resource pool datastore vm name 'MARVEL-' + name datastore path '[' + datastore + ']' + vm name vmx file vim vm File Info log Directory None snapshot Directory None suspend Directory None vm Path Name datastore path config vim vm Config Spec name vm name memory MB 128 num CP Us 1 files vmx file guest Id 'dos Guest' version 'vmx- 07 ' print ' Creating VM{} ' format vm name task vm folder Create VM Task config config pool resource pool tasks wait for tasks service instance [task]
def llvm jit code args expr signature callback type if callback type is None jit LLVM Jit Code signature else jit LLVM Jit Code Callback signature jit create args args jit create function base jit create param dict args strmod jit create function expr if False print 'LLVMIR' print strmod fptr jit compile function strmod return fptr
def html escape txt if any ch in txt for ch in HTML TABLE return '' join HTML TABLE get ch ch for ch in txt else return txt
def print query results print ' Query Parameters ' query results get 'query' for key value in query iteritems print '%s %s' % key value print
def inthread func @wraps func def wrapped *a **kw return threads defer To Thread func *a **kw return wrapped
def cachedir index del minion id base None base init cachedir base index file os path join base 'index p' lock file index file if os path exists index file with salt utils fopen index file 'r' as fh index msgpack load fh else returnif minion id in index del index[minion id]with salt utils fopen index file 'w' as fh msgpack dump index fh unlock file index file
def create Plugin Dummy entrypath plugin Content real plugin Module entrypath create Directory pkg entrypath child 'plugindummy' pkg create Directory if real pkg child ' init py' set Content '' plugs pkg child 'plugins' plugs create Directory if real plugs child ' init py' set Content plugin Init File plugs child plugin Module + ' py' set Content plugin Content return plugs
def test dynamically emptied directories tmpdir adir tmpdir join 'adir' ensure dir True bdir adir join 'bdir' ensure dir True some file bdir join 'afile' some file write '1234567890 ' base dir adir strpath spec parts tar partition partition base dir tar paths []for part in parts for tar info in part rel path os path relpath tar info submitted path base dir tar paths append rel path assert 'bdir' in tar paths
def test dynamically emptied directories tmpdir adir tmpdir join 'adir' ensure dir True bdir adir join 'bdir' ensure dir True some file bdir join 'afile' some file write '1234567890 ' base dir adir strpath spec parts tar partition partition base dir tar paths []for part in parts for tar info in part rel path os path relpath tar info submitted path base dir tar paths append rel path assert 'bdir' in tar paths
def test dynamically emptied directories tmpdir adir tmpdir join 'adir' ensure dir True bdir adir join 'bdir' ensure dir True some file bdir join 'afile' some file write '1234567890 ' base dir adir strpath spec parts tar partition partition base dir tar paths []for part in parts for tar info in part rel path os path relpath tar info submitted path base dir tar paths append rel path assert 'bdir' in tar paths
def test dynamically emptied directories tmpdir adir tmpdir join 'adir' ensure dir True bdir adir join 'bdir' ensure dir True some file bdir join 'afile' some file write '1234567890 ' base dir adir strpath spec parts tar partition partition base dir tar paths []for part in parts for tar info in part rel path os path relpath tar info submitted path base dir tar paths append rel path assert 'bdir' in tar paths
def test dynamically emptied directories tmpdir adir tmpdir join 'adir' ensure dir True bdir adir join 'bdir' ensure dir True some file bdir join 'afile' some file write '1234567890 ' base dir adir strpath spec parts tar partition partition base dir tar paths []for part in parts for tar info in part rel path os path relpath tar info submitted path base dir tar paths append rel path assert 'bdir' in tar paths
def one year week home away kind 'REG' started False infos search schedule year week home away kind started if not infos return Noneassert len infos 1 ' Morethanonegamematchesthegivencriteria 'return nflgame game Game infos[ 0 ]['eid']
def one year week home away kind 'REG' started False infos search schedule year week home away kind started if not infos return Noneassert len infos 1 ' Morethanonegamematchesthegivencriteria 'return nflgame game Game infos[ 0 ]['eid']
def test add item redirect update qtbot tmpdir url 'http //www example com/'hist file tmpdir / 'filled-history' hist file write '12345 {}\n' format url hist history Web History hist dir str tmpdir hist name 'filled-history' list hist async read with qtbot assert Not Emitted hist add completion item with qtbot wait Signal hist item added hist add url Q Url url redirect True atime 67890 entry history Entry url Q Url url redirect True atime 67890 title '' assert hist history dict[url] entry
def test add item redirect update qtbot tmpdir url 'http //www example com/'hist file tmpdir / 'filled-history' hist file write '12345 {}\n' format url hist history Web History hist dir str tmpdir hist name 'filled-history' list hist async read with qtbot assert Not Emitted hist add completion item with qtbot wait Signal hist item added hist add url Q Url url redirect True atime 67890 entry history Entry url Q Url url redirect True atime 67890 title '' assert hist history dict[url] entry
def isqref object return isinstance object tuple and len object 2 and isinstance object[ 0 ] basestring and isinstance object[ 1 ] basestring
@gen coroutinedef Remove Followers client obj store user id device id request request['user id'] user id yield Activity Verify Activity Id client user id device id request['activity']['activity id'] yield gen Task Operation Create And Execute client user id device id ' Remove Followers Operation Execute' request logging info 'REMOVEFOLLOWERS user %d device %d %dfollowers' % user id device id len request['remove ids'] raise gen Return {}
def tgrep tokenize tgrep string parser build tgrep parser False if isinstance tgrep string binary type tgrep string tgrep string decode return list parser parse String tgrep string
@export as apidef instruments id or symbols if isinstance id or symbols six string types return get data proxy instrument id or symbols return map get data proxy instrument id or symbols
@export as apidef instruments id or symbols if isinstance id or symbols six string types return get data proxy instrument id or symbols return map get data proxy instrument id or symbols
def extract live config config plugins live config config sections['live config'] copy del live config[' name ']parsed Config Value Parser live config parsed add spec Globals live config spec for plugin in plugins parsed add spec plugin live config return parsed
def extract live config config plugins live config config sections['live config'] copy del live config[' name ']parsed Config Value Parser live config parsed add spec Globals live config spec for plugin in plugins parsed add spec plugin live config return parsed
def supports firefox file obj apps file obj version apps all if not file obj binary components and not file obj strict compatibility return apps filter max application in SIGN FOR APPS max version int gte version int settings MIN D2 C VERSION else return apps filter max application in [amo FIREFOX id amo ANDROID id] max version int gte version int settings MIN NOT D2 C VERSION
def get redirects redirects filename redirects {}print ' Parsingthe N Tredirectfile' for l line in enumerate BZ 2 File redirects filename split line split if len split 4 print 'ignoringmalformedline ' + line continueredirects[short name split[ 0 ] ] short name split[ 2 ] if l % 1000000 0 print '[%s]line %08 d' % datetime now isoformat l print ' Computingthetransitiveclosureoftheredirectrelation' for l source in enumerate redirects keys transitive target Nonetarget redirects[source]seen set [source] while True transitive target targettarget redirects get target if target is None or target in seen breakseen add target redirects[source] transitive targetif l % 1000000 0 print '[%s]line %08 d' % datetime now isoformat l return redirects
def get redirects redirects filename redirects {}print ' Parsingthe N Tredirectfile' for l line in enumerate BZ 2 File redirects filename split line split if len split 4 print 'ignoringmalformedline ' + line continueredirects[short name split[ 0 ] ] short name split[ 2 ] if l % 1000000 0 print '[%s]line %08 d' % datetime now isoformat l print ' Computingthetransitiveclosureoftheredirectrelation' for l source in enumerate redirects keys transitive target Nonetarget redirects[source]seen set [source] while True transitive target targettarget redirects get target if target is None or target in seen breakseen add target redirects[source] transitive targetif l % 1000000 0 print '[%s]line %08 d' % datetime now isoformat l return redirects
def load editor caller key caller db multidesc editkeymatch [ind for ind tup in enumerate caller db multidesc if tup[ 0 ] key ]if match return caller db multidesc[match[ 0 ]][ 1 ]return ''
def has permission obj name principal permission access mode 'grant' obj type 'file' exact True if access mode lower not in ['grant' 'deny'] raise Salt Invocation Error ' Invalid"access mode"passed {0 }' format access mode access mode access mode lower dacl Dacl obj name obj type obj type obj type lower sid get sid principal chk flag dacl ace perms[obj type]['basic'] get permission lower dacl ace perms[obj type]['advanced'] get permission lower False if not chk flag raise Salt Invocation Error ' Invalid"permission"passed {0 }' format permission cur flag Nonefor i in range 0 dacl dacl Get Ace Count ace dacl dacl Get Ace i if ace[ 2 ] sid and dacl ace type[ace[ 0 ][ 0 ]] access mode cur flag ace[ 1 ]if not cur flag return Falseif exact return chk flag cur flag return cur flag & chk flag chk flag
def render openid request request openid request return to trust root None if trust root is None trust root getattr settings 'OPENID TRUST ROOT' request build absolute uri '/' if openid request should Send Redirect redirect url openid request redirect URL trust root return to return Http Response Redirect redirect url else form html openid request html Markup trust root return to form tag attrs {'id' 'openid message'} return Http Response form html content type 'text/html charset UTF- 8 '
@intercept errors User API Internal Error ignore errors [ User API Request Error] def set user preference requesting user preference key preference value username None existing user get authorized user requesting user username serializer create user preference serializer existing user preference key preference value validate user preference serializer serializer preference key preference value try serializer save except Exception as error raise create preference update error preference key preference value error
def test ecliptic heliobary icrs ICRS 1 * u deg 2 * u deg distance 1 5 * R sun bary icrs transform to Barycentric True Ecliptic helio icrs transform to Heliocentric True Ecliptic assert np abs bary distance - helio distance > 1 * u km helio in bary frame bary realize frame helio cartesian assert bary separation helio in bary frame > 1 * u arcmin
@frappe whitelist def get opening accounts company accounts frappe db sql list u"select\n DCTB DCTB DCTB namefromtab Account\n DCTB DCTB where\n DCTB DCTB DCTB is group 0and\n DCTB DCTB DCTB report type ' Balance Sheet'and\n DCTB DCTB DCTB ifnull warehouse '' ''and\n DCTB DCTB DCTB company %s\n DCTB DCTB orderbynameasc" company return [{u'account' a u'balance' get balance on a } for a in accounts]
def worker stop worker lbn profile 'default' return worker ctl worker lbn 's' profile
def worker stop worker lbn profile 'default' return worker ctl worker lbn 's' profile
def run network interacting from args *a **kw return retry effect with timeout run from args *a **kw timeout TIMEOUT total seconds
@cached query Subreddit Query Cache def get spam filtered links sr id return Link query Link c sr id sr id Link c spam True Link c verdict 'mod-removed' sort db sort 'new'
def get storage profile spec session storage policy profile id pbm get profile id by name session storage policy if profile id client factory session vim client factorystorage profile spec client factory create 'ns 0 Virtual Machine Defined Profile Spec' storage profile spec profile Id profile id unique Idreturn storage profile spec
def search if not auth is logged in or auth basic returnvalue request vars term or request vars q type get vars get 'type' None if value if type items person search value type else items person search value item json dumps items response headers[' Content- Type'] 'application/json'return itemreturn
def job log logger registry xml parent data top XML Sub Element xml parent 'org jenkins ci plugins jobloglogger Job Log Logger Build Wrapper' XML Sub Element top 'suppress Empty' text str data get 'suppress-empty' True lower
def job log logger registry xml parent data top XML Sub Element xml parent 'org jenkins ci plugins jobloglogger Job Log Logger Build Wrapper' XML Sub Element top 'suppress Empty' text str data get 'suppress-empty' True lower
def job log logger registry xml parent data top XML Sub Element xml parent 'org jenkins ci plugins jobloglogger Job Log Logger Build Wrapper' XML Sub Element top 'suppress Empty' text str data get 'suppress-empty' True lower
def job log logger registry xml parent data top XML Sub Element xml parent 'org jenkins ci plugins jobloglogger Job Log Logger Build Wrapper' XML Sub Element top 'suppress Empty' text str data get 'suppress-empty' True lower
def get vlan device name src dev vlan src dev p utils get interface name src dev max len n const DEVICE NAME MAX LEN - MAX VLAN POSTFIX LEN return '%s %s' % src dev vlan
def quota usage create context project id resource in use reserved until refresh return IMPL quota usage create context project id resource in use reserved until refresh
def nose tools functions module BUILDER string build textwrap dedent '\nimportunittest\n\nclass Test unittest Test Case \npass\na Test \n' try case next module['a'] infer except astroid Inference Error returnfor method in case methods if method name startswith 'assert' and ' ' not in method name pep 8 name pep 8 method name yield pep 8 name astroid Bound Method method case
def get tags vm t config get cloud config value 'tags' vm opts default '[]' search global False try tags literal eval t except Exception tags Noneif not tags or not isinstance tags list tags Nonereturn tags
def make percent align filter min percent min percent float min percent * 100 def align filter blast result if float blast result['%IDENTITY'] < min percent return Falseelse return Truereturn align filter
def make percent align filter min percent min percent float min percent * 100 def align filter blast result if float blast result['%IDENTITY'] < min percent return Falseelse return Truereturn align filter
def compare Segment Length endpoint other Endpoint if endpoint segment Length > other Endpoint segment Length return 1if endpoint segment Length < other Endpoint segment Length return -1 return 0
def compare Segment Length endpoint other Endpoint if endpoint segment Length > other Endpoint segment Length return 1if endpoint segment Length < other Endpoint segment Length return -1 return 0
def iso to javascript timestamp iso secs iso to unix time iso return secs * 1000
def make ctf comp coils info coils logger info ' Settingupcompensationdata ' comp num get current comp info if comp num is None or comp num 0 logger info ' Nocompensationset Nothingmoretodo ' return Nonen comp ch sum [ c['kind'] FIFF FIFFV MEG CH for c in info['chs']] logger info '%doutof%dchannelshavethecompensationset ' % n comp ch len coils compensator make compensator info 0 comp num True logger info ' Desiredcompensationdata %s found ' % comp num logger info ' Allcompensationchannelsfound ' logger info ' Preselectorcreated ' logger info ' Compensationdatamatrixcreated ' logger info ' Postselectorcreated ' return compensator
def remove dir if empty path ignore metadata caches False try os rmdir path except OS Error as e if e errno errno ENOTEMPTY or len os listdir path > 0 if ignore metadata caches try found Falsefor x in os listdir path if x lower in {' ds store' 'thumbs db'} found Truex os path join path x if os path isdir x import shutilshutil rmtree x else os remove x except Exception found Falseif found remove dir if empty path returnraise
def remove credits text textlines text split '\n' credits Nonefor i in 0 -1 if textlines and 'lyrics' in textlines[i] lower credits textlines pop i if credits text '\n' join textlines return text
def remove credits text textlines text split '\n' credits Nonefor i in 0 -1 if textlines and 'lyrics' in textlines[i] lower credits textlines pop i if credits text '\n' join textlines return text
def show image image return sensehat load image image
def show image image return sensehat load image image
def get recording dirs data dir filtered recording dirs []if is pupil rec dir data dir filtered recording dirs append data dir for root dirs files in os walk data dir filtered recording dirs + [os path join root d for d in dirs if not d startswith ' ' and is pupil rec dir os path join root d ]logger debug ' Filtered Recording Dirs {}' format filtered recording dirs return filtered recording dirs
def get recording dirs data dir filtered recording dirs []if is pupil rec dir data dir filtered recording dirs append data dir for root dirs files in os walk data dir filtered recording dirs + [os path join root d for d in dirs if not d startswith ' ' and is pupil rec dir os path join root d ]logger debug ' Filtered Recording Dirs {}' format filtered recording dirs return filtered recording dirs
def get recording dirs data dir filtered recording dirs []if is pupil rec dir data dir filtered recording dirs append data dir for root dirs files in os walk data dir filtered recording dirs + [os path join root d for d in dirs if not d startswith ' ' and is pupil rec dir os path join root d ]logger debug ' Filtered Recording Dirs {}' format filtered recording dirs return filtered recording dirs
def Flag Cxx 11 Features filename clean lines linenum error line clean lines elided[linenum]include Match '\\s*#\\s*include\\s+[<"] [^<"]+ [">]' line if include and include group 1 startswith 'tr 1 /' error filename linenum 'build/c++tr 1 ' 5 'C++TR 1 headerssuchas<%s>areunapproved ' % include group 1 if include and include group 1 in 'cfenv' 'condition variable' 'fenv h' 'future' 'mutex' 'thread' 'chrono' 'ratio' 'regex' 'system error' error filename linenum 'build/c++ 11 ' 5 '<%s>isanunapproved C++ 11 header ' % include group 1 if Match '\\s*#' line and not Match '\\s*#\\s*define\\b' line returnfor top name in 'alignment of' 'aligned union' if Search '\\bstd %s\\b' % top name line error filename linenum 'build/c++ 11 ' 5 'std %sisanunapproved C++ 11 classorfunction Sendc-styleanexampleofwhereitwouldmakeyourcodemorereadable andtheymayletyouuseit ' % top name
def add gradients summaries grads and vars summaries []for grad var in grads and vars if grad is not None if isinstance grad tf Indexed Slices grad values grad valueselse grad values gradsummaries append tf histogram summary var op name + ' gradient' grad values summaries append tf histogram summary var op name + ' gradient norm' tf global norm [grad values] else tf logging info ' Var%shasnogradient' var op name return summaries
def create address kwargs None call None if call 'function' raise Salt Cloud System Exit ' Thecreate addressfunctionmustbecalledwith-for--function ' if not kwargs or 'name' not in kwargs log error ' Anamemustbespecifiedwhencreatinganaddress ' return Falseif 'region' not in kwargs log error ' Aregionmustbespecifiedfortheaddress ' return Falsename kwargs['name']ex region kwargs['region']ex address kwargs get 'address' None conn get conn utils ['cloud fire event'] 'event' 'createaddress' 'salt/cloud/address/creating' args kwargs sock dir opts ['sock dir'] transport opts ['transport'] addy conn ex create address name ex region ex address utils ['cloud fire event'] 'event' 'createdaddress' 'salt/cloud/address/created' args kwargs sock dir opts ['sock dir'] transport opts ['transport'] log info ' Created GCE Address' + name return expand address addy
def test meta path before builtins class My Exception Exception passclass K def find module self name path if name 'time' return selfreturn Nonedef load module self name raise My Exceptionif 'time' in sys modules del sys modules['time']loader K sys meta path append loader try import time Assert Unreachable except My Exception passsys meta path remove loader import time
def project jnap opts T current Treturn {1 T 'JNAP- 1 Strategic Area 1 Governance' 2 T 'JNAP- 2 Strategic Area 2 Monitoring' 3 T 'JNAP- 3 Strategic Area 3 Disaster Management' 4 T 'JNAP- 4 Strategic Area 4 Risk Reductionand Climate Change Adaptation' }
def showvariables **connection args mod sys getframe f code co namelog debug '{ 0 }<--' format mod conn connect **connection args if conn is None return []rtnv do query into hash conn 'SHOWVARIABLES' conn close if len rtnv 0 rtnv append [] log debug '{ 0 }-->{ 1 }' format mod len rtnv[ 0 ] return rtnv
def add entrance exam milestone course entrance exam namespace choices get namespace choices milestone relationship types get milestone relationship types milestone namespace generate milestone namespace namespace choices get 'ENTRANCE EXAM' course id milestone add milestone {'name' ' Test Milestone' 'namespace' milestone namespace 'description' ' Testing Courseware Entrance Exam Chapter'} add course milestone unicode course id milestone relationship types['REQUIRES'] milestone add course content milestone unicode course id unicode entrance exam location milestone relationship types['FULFILLS'] milestone
def add entrance exam milestone course entrance exam namespace choices get namespace choices milestone relationship types get milestone relationship types milestone namespace generate milestone namespace namespace choices get 'ENTRANCE EXAM' course id milestone add milestone {'name' ' Test Milestone' 'namespace' milestone namespace 'description' ' Testing Courseware Entrance Exam Chapter'} add course milestone unicode course id milestone relationship types['REQUIRES'] milestone add course content milestone unicode course id unicode entrance exam location milestone relationship types['FULFILLS'] milestone
def get credit course requirement xblocks course key requirements []for category in CREDIT REQUIREMENT XBLOCK CATEGORIES requirements extend [{'namespace' block get credit requirement namespace 'name' block get credit requirement name 'display name' block get credit requirement display name 'start date' block start 'criteria' {}} for block in get xblocks course key category if is credit requirement block ] return requirements
def make task name cls addons None base name ' ' join [cls module cls name ] extra ''if addons extra ' %s' % ' ' join [str a for a in addons] return base name + extra
def group update groupname user None host None port None maintenance db None password None createdb None createroles None createuser None encrypted None inherit None login None superuser None replication None rolepassword None groups None runas None return role update groupname user user host host port port maintenance db maintenance db password password createdb createdb typ 'group' createroles createroles createuser createuser encrypted encrypted login login inherit inherit superuser superuser replication replication rolepassword rolepassword groups groups runas runas
@contextlib contextmanagerdef make contiguous context builder sig args newtys []newargs []copies []for ty val in zip sig args args if not isinstance ty types Array or ty layout in 'CF' newty newval ty val else newty ty copy layout 'C' copysig signature newty ty newval array copy context builder copysig val copies append newty newval newtys append newty newargs append newval yield signature sig return type *newtys tuple newargs for ty val in copies context nrt decref builder ty val
@register simple tagdef simple one default one two 'hi' return 'simple one default- Expectedresult %s %s' % one two
def find all soup name None attrs None recursive True text None limit None **kwargs if text is None return soup find all name attrs or {} recursive text limit **kwargs if isinstance text string types text re compile re escape text re I tags soup find all name attrs or {} recursive **kwargs rv []for tag in tags if match text text tag rv append tag if limit is not None and len rv > limit breakreturn rv
def find all soup name None attrs None recursive True text None limit None **kwargs if text is None return soup find all name attrs or {} recursive text limit **kwargs if isinstance text string types text re compile re escape text re I tags soup find all name attrs or {} recursive **kwargs rv []for tag in tags if match text text tag rv append tag if limit is not None and len rv > limit breakreturn rv
def find all soup name None attrs None recursive True text None limit None **kwargs if text is None return soup find all name attrs or {} recursive text limit **kwargs if isinstance text string types text re compile re escape text re I tags soup find all name attrs or {} recursive **kwargs rv []for tag in tags if match text text tag rv append tag if limit is not None and len rv > limit breakreturn rv
def is stable coefs verbose False A var 1 util comp matrix coefs eigs np linalg eigvals A var 1 if verbose print ' Eigenvaluesof VAR 1 rep' for val in np abs eigs print val return np abs eigs < 1 all
@csrf exempt@add p3 p headerdef lti launch request course id usage id if not settings FEATURES['ENABLE LTI PROVIDER'] return Http Response Forbidden params get required parameters request POST if not params return Http Response Bad Request params update get optional parameters request POST try lti consumer Lti Consumer get or supplement params get 'tool consumer instance guid' None params['oauth consumer key'] except Lti Consumer Does Not Exist return Http Response Forbidden if not Signature Validator lti consumer verify request return Http Response Forbidden try course key usage key parse course and usage keys course id usage id except Invalid Key Error log error ' Invalidcoursekey%sorusagekey%sfromrequest%s' course id usage id request raise Http 404 params['course key'] course keyparams['usage key'] usage keyauthenticate lti user request params['user id'] lti consumer store outcome parameters params request user lti consumer return render courseware request params['usage key']
def html to xhtml html try html html getroot except Attribute Error passprefix '{%s}' % XHTML NAMESPACE for el in html iter etree Element tag el tagif tag[ 0 ] '{' el tag prefix + tag
def html to xhtml html try html html getroot except Attribute Error passprefix '{%s}' % XHTML NAMESPACE for el in html iter etree Element tag el tagif tag[ 0 ] '{' el tag prefix + tag
def html to xhtml html try html html getroot except Attribute Error passprefix '{%s}' % XHTML NAMESPACE for el in html iter etree Element tag el tagif tag[ 0 ] '{' el tag prefix + tag
def absent name **kwargs ret {'name' name 'changes' {} 'result' False 'comment' ''}current state salt ['sysrc get'] name name **kwargs if current state is None ret['result'] Trueret['comment'] '"{ 0 }"isalreadyabsent ' format name return retif opts ['test'] is True ret['comment'] '"{ 0 }"willberemoved ' format name ret['changes'] {'old' current state 'new' '"{ 0 }"willberemoved ' format name }ret['result'] Nonereturn retnew state salt ['sysrc remove'] name name **kwargs ret['comment'] '"{ 0 }"wasremoved ' format name ret['changes'] {'old' current state 'new' new state}ret['result'] Truereturn ret
def log runtime parameter proc location start time runtime time time - start time log debug 'proccall %s %s runtime %0 4f ' % parameter proc location runtime
def http Response To Message response server url response message Message from KV Form response body if response status 400 raise Server Error from Message response message elif response status not in 200 206 fmt 'badstatuscodefromserver%s %s'error message fmt % server url response status raise fetchers HTTP Fetching Error error message return response message
def get required parameters dictionary additional params None params {}additional params additional params or [] for key in REQUIRED PARAMETERS + additional params if key not in dictionary return Noneparams[key] dictionary[key]return params
def get required parameters dictionary additional params None params {}additional params additional params or [] for key in REQUIRED PARAMETERS + additional params if key not in dictionary return Noneparams[key] dictionary[key]return params
def assert trade protocol event assert datasource protocol event assert event type DATASOURCE TYPE TRADE assert isinstance event price numbers Real assert isinstance event volume numbers Integral assert isinstance event dt datetime
def check csv option opt value if isinstance value list tuple return valuetry return splitstrip value except Value Error raise Option Value Error 'option%s invalidcsvvalue %r' % opt value
def O Auth Authorize Token CGI method parameters outfile oauth callback Get First parameters OAUTH CALLBACK PARAM '' if method 'GET' outfile write ' Status 200 \r\n' outfile write ' Content- Type text/html\r\n' outfile write '\r\n' outfile write Render Token Approval Template oauth callback elif method 'POST' if oauth callback outfile write ' Status 302 Redirectingtocallback URL\r\n' outfile write ' Location %s\r\n' % oauth callback outfile write '\r\n' else outfile write ' Status 200 \r\n' outfile write ' Content- Type text/html\r\n' outfile write '\r\n' outfile write Render Token Approved Template else outfile write ' Status 400 Unsupportedmethod\r\n'
@pytest fixturedef objects empty history stream data user data tabhistory serialize ITEMS qtutils deserialize stream stream empty history return Objects history empty history user data user data
def quotify qtype word terminate if qtype qq return qq + word replace qq '\\"' + terminate and qq or '' elif qtype q return q + word replace q "\\'" + terminate and q or '' else return re sub ' [\\"\\\'\\t\\n\\r] ' '\\\\\\ 1 ' word
@cacheitdef simplify delta expr from sympy solvers import solveif isinstance expr Kronecker Delta try slns solve expr args[ 0 ] - expr args[ 1 ] dict True if slns and len slns 1 return Mul *[ Kronecker Delta * key value for key value in slns[ 0 ] items ] except Not Implemented Error passreturn expr
@cacheitdef simplify delta expr from sympy solvers import solveif isinstance expr Kronecker Delta try slns solve expr args[ 0 ] - expr args[ 1 ] dict True if slns and len slns 1 return Mul *[ Kronecker Delta * key value for key value in slns[ 0 ] items ] except Not Implemented Error passreturn expr
def get Profile Copyright profile try if not isinstance profile Image Cms Profile profile Image Cms Profile profile return profile profile product copyright + '\n' except Attribute Error IO Error Type Error Value Error as v raise Py CMS Error v
def xl col to name col num col abs False col num + 1col str ''col abs '$' if col abs else '' while col num remainder col num % 26 if remainder 0 remainder 26 col letter chr ord 'A' + remainder - 1 col str col letter + col str col num int col num - 1 / 26 return col abs + col str
def init ret Val Falseif have Bits DLL try ret Val bits bits Init except Exception logging error 'bits init barfed ' return ret Val
def init ret Val Falseif have Bits DLL try ret Val bits bits Init except Exception logging error 'bits init barfed ' return ret Val
def init ret Val Falseif have Bits DLL try ret Val bits bits Init except Exception logging error 'bits init barfed ' return ret Val
def init ret Val Falseif have Bits DLL try ret Val bits bits Init except Exception logging error 'bits init barfed ' return ret Val
def init ret Val Falseif have Bits DLL try ret Val bits bits Init except Exception logging error 'bits init barfed ' return ret Val
def init ret Val Falseif have Bits DLL try ret Val bits bits Init except Exception logging error 'bits init barfed ' return ret Val
def get Area Vector 3 Loop Absolute loop return get Area Loop Absolute get Complex Path loop
def set access token access token global access token access token access token
def hide frame ax ax get yticks ax xaxis set ticks [] ax yaxis set ticks [] ax set frame on False
@contextlib contextmanagerdef override config name value old value getattr config name setattr config name value try yield finally setattr config name old value
@pytest fixturedef pytest request return Pytest Arg request
@pytest fixturedef pytest request return Pytest Arg request
@pytest fixturedef pytest request return Pytest Arg request
@pytest fixturedef pytest request return Pytest Arg request
@pytest fixturedef pytest request return Pytest Arg request
def setup platform hass config add devices discovery info None if discovery info is None returngateways hass data get mysensors MYSENSORS GATEWAYS if not gateways returnfor gateway in gateways pres gateway const Presentationset req gateway const Set Reqmap sv types {pres S COVER [set req V DIMMER set req V LIGHT]}if float gateway protocol version > 1 5 map sv types update {pres S COVER [set req V PERCENTAGE set req V STATUS]} devices {}gateway platform callbacks append mysensors pf callback factory map sv types devices My Sensors Cover add devices
def get email preferences user id email preferences model user models User Email Preferences Model get user id strict False if email preferences model is None return user domain User Global Prefs create default prefs else return user domain User Global Prefs email preferences model site updates email preferences model editor role notifications email preferences model feedback message notifications email preferences model subscription notifications
def find audio period aclip t min 0 1 t max 2 t res 0 01 chunksize int t res * aclip fps chunk duration 1 0 * chunksize / aclip fps v np array [ c ** 2 sum for c in aclip iter chunks chunksize ] v v - v mean corrs np correlate v v mode 'full' [ - len v ]corrs[ int t min / chunk duration ] 0corrs[int t max / chunk duration ] 0return chunk duration * np argmax corrs
@mock patch 'ckanext datastore db get fields' def test upsert with insert method and invalid data mock get fields function mock connection mock Mock mock connection execute side effect sqlalchemy exc Data Error 'statement' 'params' 'orig' connection invalidated False context {'connection' mock connection}data dict {'fields' [{'id' 'value' 'type' 'numeric'}] 'records' [{'value' 0} {'value' 1} {'value' 2} {'value' 3} {'value' ''} {'value' 5} {'value' 6} {'value' 7}] 'method' 'insert' 'resource id' 'fake-resource-id'}mock get fields function return value data dict['fields']nose tools assert raises db Invalid Data Error db upsert data context data dict
@mock patch 'ckanext datastore db get fields' def test upsert with insert method and invalid data mock get fields function mock connection mock Mock mock connection execute side effect sqlalchemy exc Data Error 'statement' 'params' 'orig' connection invalidated False context {'connection' mock connection}data dict {'fields' [{'id' 'value' 'type' 'numeric'}] 'records' [{'value' 0} {'value' 1} {'value' 2} {'value' 3} {'value' ''} {'value' 5} {'value' 6} {'value' 7}] 'method' 'insert' 'resource id' 'fake-resource-id'}mock get fields function return value data dict['fields']nose tools assert raises db Invalid Data Error db upsert data context data dict
@pytest fixturedef nobody from django contrib auth import get user modelreturn get user model objects get nobody user
def virtual interface list provider names **kwargs client get client return client extra action provider provider names names action 'virtual interface list' **kwargs
def virtual interface list provider names **kwargs client get client return client extra action provider provider names names action 'virtual interface list' **kwargs
def abstract Method raise Not Implemented Error ' Methodnotimplemented '
@expose '/about' def about request return render template 'about html'
def inputbox text x y w h from plasma lib ui inlineed import Inline Eded Inline Ed 0 0 0 text 0 [] ed screen curses newwin h w y x ret ed start view ed screen if not ret return ''return ed text
def find failing tests result images source entries []for root dirs files in os walk result images for fname in files basename ext os path splitext fname if basename endswith u'-failed-diff' path os path join root fname entry Entry path result images source entries append entry entries sort key lambda x x name return entries
def find failing tests result images source entries []for root dirs files in os walk result images for fname in files basename ext os path splitext fname if basename endswith u'-failed-diff' path os path join root fname entry Entry path result images source entries append entry entries sort key lambda x x name return entries
def parse boolean value if value in [u'true' u' 1 '] return Trueelif value in [u'false' u' 0 '] return Falseelse raise Value Error u"expected'true'or'false' got'%s'" % value
@pytest mark skipif 'not HAS YAML' def test write simple t simple table out String IO t write out format 'ascii ecsv' assert out getvalue splitlines SIMPLE LINES
def create metadata name ext version None schema None user None host None port None maintenance db None password None runas None installed ext get installed extension name user user host host port port maintenance db maintenance db password password runas runas ret [ EXTENSION NOT INSTALLED]if installed ext ret [ EXTENSION INSTALLED]if ext version is not None and pg is older ext ver installed ext get 'extversion' ext version ext version ret append EXTENSION TO UPGRADE if schema is not None and installed ext get 'extrelocatable' 'f' 't' and installed ext get 'schema name' schema schema ret append EXTENSION TO MOVE return ret
def get featured activity summary dicts language codes activity references activity services get featured activity references exploration ids collection ids activity services split by type activity references exp summary dicts get displayable exp summary dicts matching ids exploration ids col summary dicts get displayable collection summary dicts matching ids collection ids summary dicts by id {feconf ACTIVITY TYPE EXPLORATION {summary dict['id'] summary dict for summary dict in exp summary dicts} feconf ACTIVITY TYPE COLLECTION {summary dict['id'] summary dict for summary dict in col summary dicts}}featured summary dicts []for reference in activity references if reference id in summary dicts by id[reference type] summary dict summary dicts by id[reference type][reference id]if summary dict and summary dict['language code'] in language codes featured summary dicts append summary dict return featured summary dicts
def test thread delete db gmail account generic thread add fake thread db session gmail account namespace id generic message add fake message db session gmail account namespace id generic thread assert db session query Thread filter Thread id generic thread id all [generic thread] assert db session query Message filter Message id generic message id all [generic message] db session delete generic thread db session commit assert db session query Thread filter Thread id generic thread id all [] assert db session query Message filter Message id generic message id all []
def test thread delete db gmail account generic thread add fake thread db session gmail account namespace id generic message add fake message db session gmail account namespace id generic thread assert db session query Thread filter Thread id generic thread id all [generic thread] assert db session query Message filter Message id generic message id all [generic message] db session delete generic thread db session commit assert db session query Thread filter Thread id generic thread id all [] assert db session query Message filter Message id generic message id all []
def proportions chisquare pairscontrol count nobs value None multitest method 'hs' alternative 'two-sided' if value is not None or not alternative in ['two-sided' '2 s'] raise Not Implemented Errorall pairs [ 0 k for k in range 1 len count ]pvals [proportions chisquare count[list pair ] nobs[list pair ] [1 ] for pair in all pairs]return All Pairs Results pvals all pairs multitest method multitest method
def proportions chisquare pairscontrol count nobs value None multitest method 'hs' alternative 'two-sided' if value is not None or not alternative in ['two-sided' '2 s'] raise Not Implemented Errorall pairs [ 0 k for k in range 1 len count ]pvals [proportions chisquare count[list pair ] nobs[list pair ] [1 ] for pair in all pairs]return All Pairs Results pvals all pairs multitest method multitest method
def main if len sys argv > 1 write Output '' join sys argv[ 1 ] else settings start Main Loop From Constructor get New Repository
def iframe src width 650 height 365 content None link None html '<iframewidth "%s"height "%s"src "%s"frameborder "0 "allowfullscreen></iframe>' % width height src if not content return htmlif link content '<ahref "%s">%s</a>' % link content return '<figure>%s<figcaption>%s</figcaption></figure>' % html content
def regions from boto cloudtrail layer 1 import Cloud Trail Connectionreturn get regions 'cloudtrail' connection cls Cloud Trail Connection
def wait for file filename interval 10 test mode False while not exists filename if test mode raise Runtime Warningsleep interval
def get creator counts query count page creator counts query facet counts ['creator id']['terms']total len creator counts creator counts creator counts[ page - 1 * count page * count ]user ids [x['term'] for x in creator counts]results User Mapping Type search filter id in user ids values dict 'id' 'username' 'display name' 'avatar' 'twitter usernames' 'last contribution date' [ count]results User Mapping Type reshape results user lookup {}for r in results lcd r get 'last contribution date' None if lcd delta datetime now - lcd r['days since last activity'] delta dayselse r['days since last activity'] Noneuser lookup[r['id']] rfor item in creator counts item['user'] user lookup get item['term'] None return [item for item in creator counts if item['user'] is not None ] total
@slow test@testing requires testing datadef test make forward solution fwd py make forward solution fname raw fname trans fname src fname bem mindist 5 0 eeg True meg True assert true isinstance fwd py Forward fwd read forward solution fname meeg assert true isinstance fwd Forward compare forwards fwd fwd py 366 1494 meg rtol 0 001
@task@use masterdef update supported locales single id latest False **kw from mkt webapps models import Webapptry app Webapp objects get pk id except Webapp Does Not Exist log info u'[ Webapp %s] Didnotfindwebapptoupdatesupportedlocales ' % id returntry if app update supported locales latest latest log info u'[ Webapp %s] Updatedsupportedlocales ' % app id except Exception log info u'[ Webapp%s] Updatingsupportedlocalesfailed ' % app id exc info True
def send login instructions user token generate login token user login link url for security 'token login' token token external True send mail config value 'EMAIL SUBJECT PASSWORDLESS' user email 'login instructions' user user login link login link login instructions sent send app get current object user user login token token
def CAN ASSIGN OWNER article user return is staff for article article user
def CAN ASSIGN OWNER article user return is staff for article article user
def main cisco file 'cisco ipsec txt'cisco cfg Cisco Conf Parse cisco file crypto maps cisco cfg find objects wo child parentspec 'cryptomap CRYPTO' childspec 'AES' print '\n Cryptomapsnotusing AES 'for entry in crypto maps for child in entry children if 'transform' in child text match re search 'settransform-set * $' child text encryption match group 1 print '{ 0 }>>>{ 1 }' format entry text strip encryption print
def main cisco file 'cisco ipsec txt'cisco cfg Cisco Conf Parse cisco file crypto maps cisco cfg find objects wo child parentspec 'cryptomap CRYPTO' childspec 'AES' print '\n Cryptomapsnotusing AES 'for entry in crypto maps for child in entry children if 'transform' in child text match re search 'settransform-set * $' child text encryption match group 1 print '{ 0 }>>>{ 1 }' format entry text strip encryption print
def main cisco file 'cisco ipsec txt'cisco cfg Cisco Conf Parse cisco file crypto maps cisco cfg find objects wo child parentspec 'cryptomap CRYPTO' childspec 'AES' print '\n Cryptomapsnotusing AES 'for entry in crypto maps for child in entry children if 'transform' in child text match re search 'settransform-set * $' child text encryption match group 1 print '{ 0 }>>>{ 1 }' format entry text strip encryption print
def main cisco file 'cisco ipsec txt'cisco cfg Cisco Conf Parse cisco file crypto maps cisco cfg find objects wo child parentspec 'cryptomap CRYPTO' childspec 'AES' print '\n Cryptomapsnotusing AES 'for entry in crypto maps for child in entry children if 'transform' in child text match re search 'settransform-set * $' child text encryption match group 1 print '{ 0 }>>>{ 1 }' format entry text strip encryption print
def main cisco file 'cisco ipsec txt'cisco cfg Cisco Conf Parse cisco file crypto maps cisco cfg find objects wo child parentspec 'cryptomap CRYPTO' childspec 'AES' print '\n Cryptomapsnotusing AES 'for entry in crypto maps for child in entry children if 'transform' in child text match re search 'settransform-set * $' child text encryption match group 1 print '{ 0 }>>>{ 1 }' format entry text strip encryption print
def main cisco file 'cisco ipsec txt'cisco cfg Cisco Conf Parse cisco file crypto maps cisco cfg find objects wo child parentspec 'cryptomap CRYPTO' childspec 'AES' print '\n Cryptomapsnotusing AES 'for entry in crypto maps for child in entry children if 'transform' in child text match re search 'settransform-set * $' child text encryption match group 1 print '{ 0 }>>>{ 1 }' format entry text strip encryption print
def desktop lockdown name user None disable application handlers None disable command line None disable lock screen None disable log out None disable print setup None disable printing None disable save to disk None disable user switching None user administration disabled None **kwargs gnome kwargs {'user' user 'schema' 'org gnome desktop lockdown'}preferences ['disable application handlers' 'disable command line' 'disable lock screen' 'disable log out' 'disable print setup' 'disable printing' 'disable save to disk' 'disable user switching' 'user administration disabled']preferences hash {}for pref in preferences if pref in locals and locals [pref] is not None key re sub ' ' '-' pref preferences hash[key] locals [pref]return do name gnome kwargs preferences hash
def closest feasible individual feasible ind numpy array individual feasible ind numpy maximum MIN BOUND feasible ind feasible ind numpy minimum MAX BOUND feasible ind return feasible ind
def hex 2 str hexnum intsize 4 if not isinstance hexnum six string types nbits intsize * 8 hexnum '0 x%x' % hexnum + 1 << nbits % 1 << nbits s hexnum[ 2 ]if len s % 2 0 s '0 ' + s result codecs decode s 'hex' [ -1 ]return result
def test unpickle gpuarray as numpy ndarray flag 0 oldflag config experimental unpickle gpu on cpuconfig experimental unpickle gpu on cpu Falsetry testfile dir os path dirname os path realpath file fname ' Gpu Array pkl'with open os path join testfile dir fname 'rb' as fp if PY 3 u Compat Unpickler fp encoding 'latin 1 ' else u Compat Unpickler fp mat u load assert isinstance mat pygpu gpuarray Gpu Array assert numpy asarray mat [0 ] -42 0 finally config experimental unpickle gpu on cpu oldflag
def calc angle v1 v2 v3 v1 v1 - v2 v3 v3 - v2 return v1 angle v3
def calc angle v1 v2 v3 v1 v1 - v2 v3 v3 - v2 return v1 angle v3
def calc angle v1 v2 v3 v1 v1 - v2 v3 v3 - v2 return v1 angle v3
def getmodebandnames mode return Image Mode getmode mode bands
def scan video path if not os path exists path raise Value Error ' Pathdoesnotexist' if not path endswith VIDEO EXTENSIONS raise Value Error '%risnotavalidvideoextension' % os path splitext path [1 ] dirpath filename os path split path logger info ' Scanningvideo%rin%r' filename dirpath video Video fromguess path guessit path video size os path getsize path if video size > 10485760 logger debug ' Sizeis%d' video size video hashes['opensubtitles'] hash opensubtitles path video hashes['shooter'] hash shooter path video hashes['thesubdb'] hash thesubdb path video hashes['napiprojekt'] hash napiprojekt path logger debug ' Computedhashes%r' video hashes else logger warning ' Sizeislowerthan 10 MB hashesnotcomputed' return video
def set weights net model file with open model file as f print ' Loadpretrainedweightsfrom%s ' % model file model pickle load f print ' Settheweights 'lasagne layers set all param values net model trainable True
def set weights net model file with open model file as f print ' Loadpretrainedweightsfrom%s ' % model file model pickle load f print ' Settheweights 'lasagne layers set all param values net model trainable True
def find media source url while url[ 0 ] '/' url url[ 1 ]d os path dirnamen os path normpathj os path joinf os path isfileskins n j d d file 'skins' try media os path join skins settings OSQA DEFAULT SKIN url assert f media use skin settings OSQA DEFAULT SKI Nexcept try media j skins 'default' url assert f media use skin 'default'except media j skins 'common' url try assert f media use skin 'common'except logging error 'couldnotfindmediafor%s' % url use skin ''return Nonereturn use skin + '/' + url
def find media source url while url[ 0 ] '/' url url[ 1 ]d os path dirnamen os path normpathj os path joinf os path isfileskins n j d d file 'skins' try media os path join skins settings OSQA DEFAULT SKIN url assert f media use skin settings OSQA DEFAULT SKI Nexcept try media j skins 'default' url assert f media use skin 'default'except media j skins 'common' url try assert f media use skin 'common'except logging error 'couldnotfindmediafor%s' % url use skin ''return Nonereturn use skin + '/' + url
def find media source url while url[ 0 ] '/' url url[ 1 ]d os path dirnamen os path normpathj os path joinf os path isfileskins n j d d file 'skins' try media os path join skins settings OSQA DEFAULT SKIN url assert f media use skin settings OSQA DEFAULT SKI Nexcept try media j skins 'default' url assert f media use skin 'default'except media j skins 'common' url try assert f media use skin 'common'except logging error 'couldnotfindmediafor%s' % url use skin ''return Nonereturn use skin + '/' + url
def get signals signums return dict s signal getsignal s for s in signums
def purge deleted db api purge deleted CONF command age CONF command granularity CONF command project id CONF command batch size
def get close matches word possibilities n 3 cutoff 0 6 if not n > 0 raise Value Error 'nmustbe> 0 %r' % n if not 0 0 < cutoff < 1 0 raise Value Error 'cutoffmustbein[ 0 0 1 0] %r' % cutoff result []s Sequence Matcher s set seq 2 word for x in possibilities s set seq 1 x if s real quick ratio > cutoff and s quick ratio > cutoff and s ratio > cutoff result append s ratio x result heapq nlargest n result return [x for score x in result]
def get close matches word possibilities n 3 cutoff 0 6 if not n > 0 raise Value Error 'nmustbe> 0 %r' % n if not 0 0 < cutoff < 1 0 raise Value Error 'cutoffmustbein[ 0 0 1 0] %r' % cutoff result []s Sequence Matcher s set seq 2 word for x in possibilities s set seq 1 x if s real quick ratio > cutoff and s quick ratio > cutoff and s ratio > cutoff result append s ratio x result heapq nlargest n result return [x for score x in result]
def read packet sock timeout None sock settimeout timeout dlen data None None try if os name 'nt' datalen sock recv SZ dlen struct unpack 'l' datalen data ''while len data < dlen data + sock recv dlen else datalen temp fail retry socket error sock recv SZ socket MSG WAITALL if len datalen SZ dlen struct unpack 'l' datalen data temp fail retry socket error sock recv dlen socket MSG WAITALL except socket timeout raiseexcept socket error data Nonefinally sock settimeout None if data is not None try return pickle loads data except Exception if DEBUG EDITOR traceback print exc file STDERR return
def simple load icon module index as data False size ICON SIZE try large icons small icons win 32 gui Extract Icon Ex module index 10 except pywintypes error as err if err winerror winerror ERROR FILE NOT FOUND raiseprints u' File%rdoesnotexist cannotloadicon' % module returnicons large icons + small icons try if icons must use qt pixmap copy to size Qt Win from HICON icons[ 0 ] size size if as data return pixmap to data pixmap return Q Icon pixmap finally tuple map win 32 gui Destroy Icon icons
def simple load icon module index as data False size ICON SIZE try large icons small icons win 32 gui Extract Icon Ex module index 10 except pywintypes error as err if err winerror winerror ERROR FILE NOT FOUND raiseprints u' File%rdoesnotexist cannotloadicon' % module returnicons large icons + small icons try if icons must use qt pixmap copy to size Qt Win from HICON icons[ 0 ] size size if as data return pixmap to data pixmap return Q Icon pixmap finally tuple map win 32 gui Destroy Icon icons
def multi constructor pkl loader tag suffix node global additional environif tag suffix '' and tag suffix u'' raise Assertion Error ' Expectedtag suffixtobe""butitis"' + tag suffix + '" Putspacebetween pkl andthefilename ' mapping loader construct yaml str node obj serial load preprocess mapping additional environ proxy Proxy callable do not recurse positionals keywords {'value' obj} yaml src yaml serialize node return proxy
def subset dict dict keys subset partition dict dict keys [0 ]return subset
def notification sample sample def wrap cls if not getattr cls 'samples' None cls samples [sample]else cls samples append sample return clsreturn wrap
def notification sample sample def wrap cls if not getattr cls 'samples' None cls samples [sample]else cls samples append sample return clsreturn wrap
def pr get ancestors pe id s3 db current s3 dbatable s3 db pr affiliationrtable s3 db pr rolequery atable deleted True & atable role id rtable id & atable pe id pe id & rtable deleted True & rtable role type OU roles current db query select rtable id rtable pe id rtable path rtable role type paths []append paths appendfor role in roles path S3 Multi Path [role pe id] if role path is None ppath pr role rebuild path role else ppath S3 Multi Path role path path extend role pe id ppath cut pe id append path ancestors S3 Multi Path all nodes paths return ancestors
def find matching rule module secgroup remotegroup protocol module params['protocol']remote ip prefix module params['remote ip prefix']ethertype module params['ethertype']direction module params['direction']remote group id remotegroup['id']for rule in secgroup['security group rules'] if protocol rule['protocol'] and remote ip prefix rule['remote ip prefix'] and ethertype rule['ethertype'] and direction rule['direction'] and remote group id rule['remote group id'] and ports match protocol module params['port range min'] module params['port range max'] rule['port range min'] rule['port range max'] return rulereturn None
def test composite unit get format name unit 1 u Unit u'nrad/s' unit 2 u Unit u' Hz 1/ 2 ' assert str u Composite Unit 1 [unit 1 unit 2 ] [1 -1 ] u'nrad/ Hz 1/ 2 s '
def error for response klass error classes get response status code if klass is None if 400 < response status code < 500 klass Client Errorif 500 < response status code < 600 klass Server Errorreturn klass response
def delete overlay ret list old overlays list local cmd 'layman--quietness 0--delete{ 0 }' format overlay delete attempt salt ['cmd run all'] cmd python shell False if delete attempt['retcode'] 0 raise salt exceptions Command Execution Error delete attempt['stdout'] new overlays list local if len new overlays 0 srcline 'source/var/lib/layman/make conf'makeconf get makeconf if salt ['file contains'] makeconf 'layman' salt ['file sed'] makeconf srcline '' ret [overlay for overlay in old overlays if overlay not in new overlays ]return ret
def place order creator **kwargs if 'shipping method' not in kwargs kwargs['shipping method'] Free shipping charge kwargs['shipping method'] calculate kwargs['basket'] kwargs['total'] calculators Order Total Calculator calculate basket kwargs['basket'] shipping charge shipping charge kwargs['shipping charge'] shipping chargereturn creator place order **kwargs
def yaml dump data stream None dumper yaml Dumper **kwargs class Dumper dumper u' Customdumper 'if not PY 3 Dumper add representer unicode lambda dumper value dumper represent scalar u'tag yaml org 2002 str' value return yaml dump data stream Dumper **kwargs
def yaml dump data stream None dumper yaml Dumper **kwargs class Dumper dumper u' Customdumper 'if not PY 3 Dumper add representer unicode lambda dumper value dumper represent scalar u'tag yaml org 2002 str' value return yaml dump data stream Dumper **kwargs
def build exp freq mat exp freq table exp freq mat Expected Frequency Matrix alphabet exp freq table alphabet build later 1 for i in exp freq mat if i[ 0 ] i[ 1 ] exp freq mat[i] exp freq table[i[ 0 ]] ** 2 else exp freq mat[i] 2 0 * exp freq table[i[ 0 ]] * exp freq table[i[ 1 ]] return exp freq mat
def generate signed url credentials resource expiration api access endpoint '' method 'GET' content md 5 None content type None response type None response disposition None generation None expiration get expiration seconds expiration string to sign '\n' join [method content md 5 or '' content type or '' str expiration resource] query params get signed query params credentials expiration string to sign if response type is not None query params['response-content-type'] response typeif response disposition is not None query params['response-content-disposition'] response dispositionif generation is not None query params['generation'] generationreturn '{endpoint}{resource}?{querystring}' format endpoint api access endpoint resource resource querystring urlencode query params
def generate signed url credentials resource expiration api access endpoint '' method 'GET' content md 5 None content type None response type None response disposition None generation None expiration get expiration seconds expiration string to sign '\n' join [method content md 5 or '' content type or '' str expiration resource] query params get signed query params credentials expiration string to sign if response type is not None query params['response-content-type'] response typeif response disposition is not None query params['response-content-disposition'] response dispositionif generation is not None query params['generation'] generationreturn '{endpoint}{resource}?{querystring}' format endpoint api access endpoint resource resource querystring urlencode query params
def to serializables obj if isinstance obj P Record result dict obj result[ CLASS MARKER] obj class name return resultelif isinstance obj P Class result obj to dict result[ CLASS MARKER] obj class name return resultelif isinstance obj P Map return { CLASS MARKER u'P Map' u'values' dict obj items }elif isinstance obj P Set P Vector set return list obj elif isinstance obj File Path return { CLASS MARKER u' File Path' u'path' obj path decode 'utf- 8 ' }elif isinstance obj UUID return { CLASS MARKER u'UUID' 'hex' unicode obj }elif isinstance obj datetime if obj tzinfo is None raise Value Error ' Datetimewithoutatimezone {}' format obj return { CLASS MARKER u'datetime' 'seconds' timegm obj utctimetuple }return obj
def sha 512 digest instr if six PY 3 b salt utils to bytes instr return hashlib sha 512 b hexdigest return hashlib sha 512 instr hexdigest
def decode pa dict d retval cdict for k v in d items if isinstance k tuple for subk in k retval[subk] vfor k v in d items if not isinstance k tuple retval[k] vreturn retval
def get hostname with settings hide 'running' 'stdout' return run 'hostname--fqdn'
def get processtree pids pid include parent True parents get all processes pids all pids parents keys pids set [pid] while True pids new pids copy for pid in all pids if parents[ pid] in pids pids new add pid if pids new pids breakpids pids new copy if not include parent pids remove pid return list pids
def Test Generate Access Token action tester device dict auth info dict user cookie None use short token True response dict Generate Access Token action tester device dict auth info dict user cookie use short token use short token identity type value Identity Split Key auth info dict['identity'] expected digits 4 if use short token or identity type ' Phone' else 9 assert response dict['token digits'] expected digits response dictidentity tester Run Async Identity Query tester validator client auth info dict['identity'] None tester validator Validate Update DB Object Identity key auth info dict['identity'] authority ' Viewfinder' user id identity user id access token identity access token expires identity expires return identity
def Test Generate Access Token action tester device dict auth info dict user cookie None use short token True response dict Generate Access Token action tester device dict auth info dict user cookie use short token use short token identity type value Identity Split Key auth info dict['identity'] expected digits 4 if use short token or identity type ' Phone' else 9 assert response dict['token digits'] expected digits response dictidentity tester Run Async Identity Query tester validator client auth info dict['identity'] None tester validator Validate Update DB Object Identity key auth info dict['identity'] authority ' Viewfinder' user id identity user id access token identity access token expires identity expires return identity
def Get Xcode Archs Default global XCODE ARCHS DEFAULT CACH Eif XCODE ARCHS DEFAULT CACHE return XCODE ARCHS DEFAULT CACHE xcode version Xcode Version if xcode version < '0500 ' XCODE ARCHS DEFAULT CACHE Xcode Archs Default '$ ARCHS STANDARD ' Xcode Archs Variable Mapping ['i 386 '] Xcode Archs Variable Mapping ['i 386 '] Xcode Archs Variable Mapping ['armv 7 '] elif xcode version < '0510 ' XCODE ARCHS DEFAULT CACHE Xcode Archs Default '$ ARCHS STANDARD INCLUDING 64 BIT ' Xcode Archs Variable Mapping ['x 86 64 '] ['x 86 64 '] Xcode Archs Variable Mapping ['i 386 '] ['i 386 ' 'x 86 64 '] Xcode Archs Variable Mapping ['armv 7 ' 'armv 7 s'] ['armv 7 ' 'armv 7 s' 'arm 64 '] else XCODE ARCHS DEFAULT CACHE Xcode Archs Default '$ ARCHS STANDARD ' Xcode Archs Variable Mapping ['x 86 64 '] ['x 86 64 '] Xcode Archs Variable Mapping ['i 386 ' 'x 86 64 '] ['i 386 ' 'x 86 64 '] Xcode Archs Variable Mapping ['armv 7 ' 'armv 7 s' 'arm 64 '] ['armv 7 ' 'armv 7 s' 'arm 64 '] return XCODE ARCHS DEFAULT CACHE
def Get Xcode Archs Default global XCODE ARCHS DEFAULT CACH Eif XCODE ARCHS DEFAULT CACHE return XCODE ARCHS DEFAULT CACHE xcode version Xcode Version if xcode version < '0500 ' XCODE ARCHS DEFAULT CACHE Xcode Archs Default '$ ARCHS STANDARD ' Xcode Archs Variable Mapping ['i 386 '] Xcode Archs Variable Mapping ['i 386 '] Xcode Archs Variable Mapping ['armv 7 '] elif xcode version < '0510 ' XCODE ARCHS DEFAULT CACHE Xcode Archs Default '$ ARCHS STANDARD INCLUDING 64 BIT ' Xcode Archs Variable Mapping ['x 86 64 '] ['x 86 64 '] Xcode Archs Variable Mapping ['i 386 '] ['i 386 ' 'x 86 64 '] Xcode Archs Variable Mapping ['armv 7 ' 'armv 7 s'] ['armv 7 ' 'armv 7 s' 'arm 64 '] else XCODE ARCHS DEFAULT CACHE Xcode Archs Default '$ ARCHS STANDARD ' Xcode Archs Variable Mapping ['x 86 64 '] ['x 86 64 '] Xcode Archs Variable Mapping ['i 386 ' 'x 86 64 '] ['i 386 ' 'x 86 64 '] Xcode Archs Variable Mapping ['armv 7 ' 'armv 7 s' 'arm 64 '] ['armv 7 ' 'armv 7 s' 'arm 64 '] return XCODE ARCHS DEFAULT CACHE
@dodef update repo package directory target bucket target key source repo packages flocker version distribution package directory create Directory package type distribution package type yield Effect Download S 3 Key Recursively source bucket target bucket source prefix target key target path package directory filter extensions ' ' + package type value downloaded packages yield Effect Download Packages From Repository source repo source repo target path package directory packages packages flocker version flocker version distribution distribution new metadata yield Effect Create Repo repository path package directory distribution distribution yield Effect Upload To S 3 Recursively source path package directory target bucket target bucket target key target key files downloaded packages new metadata
@dodef update repo package directory target bucket target key source repo packages flocker version distribution package directory create Directory package type distribution package type yield Effect Download S 3 Key Recursively source bucket target bucket source prefix target key target path package directory filter extensions ' ' + package type value downloaded packages yield Effect Download Packages From Repository source repo source repo target path package directory packages packages flocker version flocker version distribution distribution new metadata yield Effect Create Repo repository path package directory distribution distribution yield Effect Upload To S 3 Recursively source path package directory target bucket target bucket target key target key files downloaded packages new metadata
def test install package with prefix script data prefix path script scratch path / 'prefix' result script pip 'install' '--prefix' prefix path '-f' data find links '--no-binary' 'simple' '--no-index' 'simple 1 0' if hasattr sys 'pypy version info' path script scratch / 'prefix' else path script scratch / 'prefix' / 'lib' / 'python{ 0 }' format pyversion install path path / 'site-packages' / 'simple- 1 0-py{ 0 } egg-info' format pyversion assert install path in result files created str result
@pytest fixture scope 'function' def clean system request user config path os path expanduser '~/ cookiecutterrc' user config path backup os path expanduser '~/ cookiecutterrc backup' if os path exists user config path user config found Trueshutil copy user config path user config path backup os remove user config path else user config found Falsecookiecutters dir os path expanduser '~/ cookiecutters' cookiecutters dir backup os path expanduser '~/ cookiecutters backup' cookiecutters dir found backup dir cookiecutters dir cookiecutters dir backup cookiecutter replay dir os path expanduser '~/ cookiecutter replay' cookiecutter replay dir backup os path expanduser '~/ cookiecutter replay backup' cookiecutter replay dir found backup dir cookiecutter replay dir cookiecutter replay dir backup def restore backup if user config found and os path exists user config path backup shutil copy user config path backup user config path os remove user config path backup restore backup dir cookiecutters dir cookiecutters dir backup cookiecutters dir found restore backup dir cookiecutter replay dir cookiecutter replay dir backup cookiecutter replay dir found request addfinalizer restore backup
def s3 cleanup glob path time old dry run False **runner kwargs runner EMR Job Runner **runner kwargs log info ' Deletingallfilesin%sthatareolderthan%s' % glob path time old for path in runner fs ls glob path bucket name key name parse s3 uri path bucket runner fs get bucket bucket name for key in bucket list key name last modified iso 8601 to datetime key last modified age datetime utcnow - last modified if age > time old log info ' Deleting%s is%sold' % key name age if not dry run key delete
def check write to datafiles con warning critical perf data warning warning or 20 critical critical or 40 try data get server status con writes data['dur']['write To Data Files MB']message ' Writetodatafiles % 2f MB' % writes message + performance data perf data [ '% 2f' % writes 'write to data files' warning critical ] return check levels writes warning critical message except Exception as e return exit with general critical e
def check scale scale if np isscalar scale and scale < 0 raise Value Error 'scalemustbepositive not%s' % scale
def assert matching drivers if CONF database slave connection '' returnnormal sqlalchemy engine url make url CONF database connection slave sqlalchemy engine url make url CONF database slave connection assert normal drivername slave drivername
def assert matching drivers if CONF database slave connection '' returnnormal sqlalchemy engine url make url CONF database connection slave sqlalchemy engine url make url CONF database slave connection assert normal drivername slave drivername
def assert matching drivers if CONF database slave connection '' returnnormal sqlalchemy engine url make url CONF database connection slave sqlalchemy engine url make url CONF database slave connection assert normal drivername slave drivername
def question title msg default True yes Qt Widgets Q Message Box Yesno Qt Widgets Q Message Box Nobuttons yes no if default default yeselse default noparent active window Message Box Qt Widgets Q Message Boxresult Message Box question parent title msg buttons default return result Qt Widgets Q Message Box Yes
def load Profile filename all Machines False global settings Listprofile Parser Config Parser Config Parser try profile Parser read filename except Config Parser Parsing Error returnif all Machines n 0while profile Parser has section 'profile %d' % n for set in settings List if set is Preference continuesection 'profile %d' % n if set is Alteration section 'alterations %d' % n if profile Parser has option section set get Name set set Value unicode profile Parser get section set get Name 'utf- 8 ' 'replace' n n + 1else for set in settings List if set is Preference continuesection 'profile'if set is Alteration section 'alterations'if profile Parser has option section set get Name set set Value unicode profile Parser get section set get Name 'utf- 8 ' 'replace' if get Profile Setting 'retraction combing' '1 ' put Profile Setting 'retraction combing' ' All'
def disable name stop False **kwargs if not enabled name return Falsesvc realpath get svc path name [0 ]down file os path join svc realpath 'down' if stop stop name if not os path exists down file try salt utils fopen down file 'w' close except IO Error log error ' Unabletocreatefile{ 0 }' format down file return Falsereturn True
def disable name stop False **kwargs if not enabled name return Falsesvc realpath get svc path name [0 ]down file os path join svc realpath 'down' if stop stop name if not os path exists down file try salt utils fopen down file 'w' close except IO Error log error ' Unabletocreatefile{ 0 }' format down file return Falsereturn True
def disable name stop False **kwargs if not enabled name return Falsesvc realpath get svc path name [0 ]down file os path join svc realpath 'down' if stop stop name if not os path exists down file try salt utils fopen down file 'w' close except IO Error log error ' Unabletocreatefile{ 0 }' format down file return Falsereturn True
def test scalar info c time Time '2000 001 ' cinfo c info out None assert cinfo['n bad'] 0 assert 'length' not in cinfo
def Same tool name setting type Renamed tool name name setting type
def unregister func if hasattr atexit 'unregister' atexit unregister func else handler entries [e for e in exithandlers if e[ 0 ] func ]for e in handler entries exithandlers remove e
def unregister func if hasattr atexit 'unregister' atexit unregister func else handler entries [e for e in exithandlers if e[ 0 ] func ]for e in handler entries exithandlers remove e
def unregister func if hasattr atexit 'unregister' atexit unregister func else handler entries [e for e in exithandlers if e[ 0 ] func ]for e in handler entries exithandlers remove e
@commands u'getsafeforwork' u'getsfw' @example u' getsfw[channel]' def get channel sfw bot trigger channel trigger group 2 if not channel channel trigger senderif channel is nick return bot say u' getsfwwithnochannelparamisonlypermittedinchannels' channel channel strip sfw bot db get channel value channel u'sfw' if sfw bot say u'%sisflaggedas SFW' % channel else bot say u'%sisflaggedas NSFW' % channel
def get master status **connection args mod sys getframe f code co namelog debug '{ 0 }<--' format mod conn connect **connection args if conn is None return []rtnv do query into hash conn 'SHOWMASTERSTATUS' conn close if len rtnv 0 rtnv append [] log debug '{ 0 }-->{ 1 }' format mod len rtnv[ 0 ] return rtnv[ 0 ]
def Set Pe Subsystem fd console True current pos fd tell fd seek 60 header offset struct unpack '<I' fd read 4 [0 ]subsystem offset header offset + 92 fd seek subsystem offset if console fd write '\x 03 ' else fd write '\x 02 ' fd seek current pos
def create filter predicate param predicate factory modifier param extract modifier predicate param predicates map predicate factory param split u' ' def filt x return modifier any map lambda pred pred x predicates return filt
@register inclusion tag 'filebrowser/include/ response html' takes context True def query string context add None remove None add string to dict add remove string to list remove params context['query'] copy response get query string params add remove return {'response' response}
def validate domain value if not re search u'^[a-z A-Z 0 - 9 -\\ ]+$' value raise Validation Error u'"{}"containsunexpectedcharacters' format value
def get var endog y lags trend 'c' has constant 'skip' nobs len y Z np array [y[ t - lags t][ -1 ] ravel for t in range lags nobs ] if trend 'nc' Z tsa add trend Z prepend True trend trend has constant has constant return Z
@contextmanagerdef bake in temp dir cookies *args **kwargs result cookies bake *args **kwargs try yield result finally rmtree str result project
@contextmanagerdef bake in temp dir cookies *args **kwargs result cookies bake *args **kwargs try yield result finally rmtree str result project
def random integers random state size None low 0 high 1 ndim None dtype 'int 64 ' low tensor as tensor variable low high tensor as tensor variable high ndim size bcast infer ndim bcast ndim size low high op Random Function random integers helper tensor Tensor Type dtype dtype broadcastable bcast return op random state size low high
def random integers random state size None low 0 high 1 ndim None dtype 'int 64 ' low tensor as tensor variable low high tensor as tensor variable high ndim size bcast infer ndim bcast ndim size low high op Random Function random integers helper tensor Tensor Type dtype dtype broadcastable bcast return op random state size low high
def file access rights filename rights check above False if os path exists filename return os access filename rights elif check above return os access os path dirname os path abspath filename rights else return False
def get default ca certs if not hasattr get default ca certs ' path' for path in '/etc/pki/ca-trust/extracted/openssl/ca-bundle trust crt' '/etc/ssl/certs' '/etc/ssl/certificates' if os path exists path get default ca certs path pathbreakelse get default ca certs path Nonereturn get default ca certs path
def activate csr file certificate id web server type approver email None http dc validation False **kwargs return get certificates 'namecheap ssl activate' 'SSL Activate Result' csr file certificate id web server type approver email http dc validation kwargs
def activate csr file certificate id web server type approver email None http dc validation False **kwargs return get certificates 'namecheap ssl activate' 'SSL Activate Result' csr file certificate id web server type approver email http dc validation kwargs
def default listener col attr default @event listens for col attr 'init scalar' retval True propagate True def init scalar target value dict if default is callable value default arg None elif default is scalar value default argelse raise Not Implemented Error " Can'tinvokepre-defaultfora SQL-levelcolumndefault" dict [col attr key] valuereturn value
def get dataset name split name dataset dir file pattern None reader None if name not in datasets map raise Value Error ' Nameofdatasetunknown%s' % name return datasets map[name] get split split name dataset dir file pattern reader
def check window params data window length if window length < 1 raise Window Length Not Positive window length window length if window length > data shape[ 0 ] raise Window Length Too Long nrows data shape[ 0 ] window length window length
def check window params data window length if window length < 1 raise Window Length Not Positive window length window length if window length > data shape[ 0 ] raise Window Length Too Long nrows data shape[ 0 ] window length window length
def test multiple subordinate steps are run @step ' Iruntwosubordinatesteps' def two subordinate steps step step behave as '\n When Irunthefirstsub-step\n And Irunthesecondsub-step\n' global first ranglobal second ranfirst ran Falsesecond ran False@step ' Irunthefirstsub-step$' def increment step global first ranfirst ran True@step ' Irunthesecondsub-step' def increment twice step global second ransecond ran Truerunnable step Step from string ' Given Iruntwosubordinatesteps' runnable step run True assert equals first ran second ran True True del first randel second ran
def first diff a b i -1 for i in xrange 0 len a if a[i] b[ 1 ] return iif i 255 return i
def make friedman 1 n samples 100 n features 10 noise 0 0 random state None if n features < 5 raise Value Error 'n featuresmustbeatleastfive ' generator check random state random state X generator rand n samples n features y 10 * np sin np pi * X[ 0] * X[ 1] + 20 * X[ 2] - 0 5 ** 2 + 10 * X[ 3] + 5 * X[ 4] + noise * generator randn n samples return X y
def find dir p x 'x'while x and not os path exists p p x os path split p return p
def find dir p x 'x'while x and not os path exists p p x os path split p return p
def Find Rule Trigger Files rule sources return rule get 'rule sources' []
def apply features feature func toks labeled None if labeled is None labeled toks and isinstance toks[ 0 ] tuple list if labeled def lazy func labeled token return feature func labeled token[ 0 ] labeled token[ 1 ] return Lazy Map lazy func toks else return Lazy Map feature func toks
def apply features feature func toks labeled None if labeled is None labeled toks and isinstance toks[ 0 ] tuple list if labeled def lazy func labeled token return feature func labeled token[ 0 ] labeled token[ 1 ] return Lazy Map lazy func toks else return Lazy Map feature func toks
def remove feature remove payload False restart False mgmt tools ''if salt utils version cmp grains ['osversion'] '6 2' > 0 mgmt tools '- Include Management Tools'rmv ''if remove payload rmv '- Remove'rst ''if restart rst '- Restart'cmd ' Remove- Windows Feature- Name{ 0 }{ 1 }{ 2 }{ 3 }- Error Action Silently Continue- Warning Action Silently Continue' format cmd quote feature mgmt tools rmv rst out pshell json cmd if out[' Feature Result'] return {' Exit Code' out[' Exit Code'] ' Display Name' out[' Feature Result'][ 0 ][' Display Name'] ' Restart Needed' out[' Feature Result'][ 0 ][' Restart Needed'] ' Success' out[' Success']}else return {' Exit Code' out[' Exit Code'] ' Display Name' '{ 0 } notinstalled ' format feature ' Restart Needed' False ' Success' out[' Success']}
def pwnstaller Generate Utils H method Subs code '#include"launch h"\n'code + 'voidinit launcher void \n'code + 'intget thisfile char*%s constchar*%s \n' % helpers random String helpers random String code + 'int Create Act Context char*%s char*%s \n' % helpers random String helpers random String code + 'void Release Act Context void \n'code + 'intget thisfilew LPWSTR%s \n' % helpers random String code + 'voidget homepath char*%s constchar*%s \n' % helpers random String helpers random String code + 'voidget archivefile char*%s constchar*%s \n' % helpers random String helpers random String code + 'intset environment const ARCHIVE STATUS*%s \n' % helpers random String code + 'intspawn LPWSTR%s \n' % helpers random String for m in method Subs code code replace m[ 0 ] m[ 1 ] return code
def expand ipaddress pattern string family if family not in [4 6] raise Exception ' Invalid I Paddressfamily {}' format family if family 4 regex IP 4 EXPANSION PATTER Nbase 10 else regex IP 6 EXPANSION PATTER Nbase 16 lead pattern remnant re split regex string maxsplit 1 x y pattern split '-' for i in range int x base int y base + 1 if re search regex remnant for string in expand ipaddress pattern remnant family yield '' join [lead format i 'x' if family 6 else 'd' string] else yield '' join [lead format i 'x' if family 6 else 'd' remnant]
def filter by latest downloadable changeset revision that has missing tool test components trans repository repository metadata get latest downloadable repository metadata if it includes tools trans repository if repository metadata is not None and repository metadata missing test components return repository metadata changeset revisionreturn None
def quit global qdb listener connif qdb sys settrace None qdb Noneif conn conn close conn Noneif listener listener close listener None
def to bytes obj b T Memory Buffer p T Binary Protocol b obj write p return b getvalue
def deconstructible *args **kwargs path kwargs pop 'path' None def decorator klass def new cls *args **kwargs obj super klass cls new cls obj constructor args args kwargs return objdef deconstruct obj '\n Returnsa 3 -tupleofclassimportpath positionalarguments \nandkeywordarguments \n'if path module name name path rpartition ' ' else module name obj module name obj class name module import module module name if not hasattr module name raise Value Error ' Couldnotfindobject%sin%s \n Pleasenotethatyoucannotserializethingslikeinnerclasses Pleasemovetheobjectintothemainmodulebodytousemigrations \n Formoreinformation seehttps //docs djangoproject com/en/%s/topics/migrations/#serializing-values' % name module name get docs version return path or '%s %s' % obj class module name obj constructor args[ 0 ] obj constructor args[ 1 ] klass new staticmethod new klass deconstruct deconstructreturn klassif not args return decoratorreturn decorator *args **kwargs
@mock ec 2 def test igw detach wrong vpc conn boto connect vpc u'the key' u'the secret' igw conn create internet gateway vpc 1 conn create vpc VPC CIDR vpc 2 conn create vpc VPC CIDR conn attach internet gateway igw id vpc 1 id with assert raises EC 2 Response Error as cm conn detach internet gateway igw id vpc 2 id cm exception code should equal u' Gateway Not Attached' cm exception status should equal 400 cm exception request id should not be none
def django auth setup global DJANGO AUTH CLAS Sif DJANGO AUTH CLASS is not None returnif '^model' in opts ['external auth']['django'] django model fullname opts ['external auth']['django']['^model']django model name django model fullname split ' ' [ -1 ]django module name ' ' join django model fullname split ' ' [0 -1 ] import django module name globals locals ' Salt External Auth Model' DJANGO AUTH CLASS str 'django auth module {0 }' format django model name DJANGO AUTH CLASS eval DJANGO AUTH CLASS str if django VERSION > 1 7 django setup
def make menu item menu item title **kw menu items config['routes named routes']if menu item not in menu items raise Exception 'menuitem`%s`cannotbefound' % menu item item copy copy menu items[menu item] item update kw active link active item needed item pop 'needed' for need in needed if need not in kw raise Exception 'menuitem`%s`needparameter`%s`' % menu item need link link to title menu item suppress active class True **item if active return literal '<liclass "active">' + link + literal '</li>' return literal '<li>' + link + literal '</li>'
def int To Bytes integer length None hex String '%x' % integer if length is None n len hex String else n length * 2 return binascii unhexlify hex String zfill n + n & 1
def coregistration tabbed False split True scene width 500 inst None subject None subjects dir None guess mri subject None check mayavi version from backend import check backend check backend from coreg gui import Coreg Frame make viewview make view tabbed split scene width gui Coreg Frame inst subject subjects dir guess mri subject gui configure traits view view return gui
def deterministic Pool worker doer create Memory Worker return Deterministic Thread Pool Team Lock Worker Lock local lambda worker lambda None doer
def kulsinski u v u validate vector u v validate vector v n float len u nff nft ntf ntt nbool correspond all u v return ntf + nft - ntt + n / ntf + nft + n
def delval filename keyword *args **kwargs if 'do not scale image data' not in kwargs kwargs['do not scale image data'] Trueclosed fileobj closed filename hdulist extidx getext filename 'update' *args **kwargs try del hdulist[extidx] header[keyword]finally hdulist close closed closed
def get swap transformed list if not all isinstance device Driver Swap Block Device or 'swap size' in device for device in transformed list return Nonetry return transformed list pop except Index Error return None
def get Section Number header if not header return Nonereturn domhelpers gather Text Nodes header child Nodes[ 0 ]
def toplevel func synctaskletfunc synctasklet func @utils wrapping func def add context wrapper *args **kwds ndb debug utils func info func state clear all pending ctx make default context try set context ctx return synctaskletfunc *args **kwds finally set context None ctx flush check success eventloop run return add context wrapper
def toplevel func synctaskletfunc synctasklet func @utils wrapping func def add context wrapper *args **kwds ndb debug utils func info func state clear all pending ctx make default context try set context ctx return synctaskletfunc *args **kwds finally set context None ctx flush check success eventloop run return add context wrapper
def window too small return Window Token List Control static [ Token Window Too Small u' Windowtoosmall ' ]
def window too small return Window Token List Control static [ Token Window Too Small u' Windowtoosmall ' ]
def get Circle Intersection Loops circle Intersections circle Intersection Loops []for circle Intersection in circle Intersections if not circle Intersection stepped On circle Intersection Loop [circle Intersection]circle Intersection Loops append circle Intersection Loop add Circle Intersection Loop circle Intersection Loop circle Intersections return circle Intersection Loops
def get Circle Intersection Loops circle Intersections circle Intersection Loops []for circle Intersection in circle Intersections if not circle Intersection stepped On circle Intersection Loop [circle Intersection]circle Intersection Loops append circle Intersection Loop add Circle Intersection Loop circle Intersection Loop circle Intersections return circle Intersection Loops
def enable privilege privilege name return change privilege state privilege name True
def delivery pipeline registry xml parent data pipeline XML Sub Element xml parent 'se diabol jenkins pipeline Pipeline Property' pipeline set 'plugin' 'delivery-pipeline-plugin' mapping [ 'stage' 'stage Name' '' 'task' 'task Name' '' 'description' 'description Template' '' ]helpers convert mapping to xml pipeline data mapping fail required True
def delivery pipeline registry xml parent data pipeline XML Sub Element xml parent 'se diabol jenkins pipeline Pipeline Property' pipeline set 'plugin' 'delivery-pipeline-plugin' mapping [ 'stage' 'stage Name' '' 'task' 'task Name' '' 'description' 'description Template' '' ]helpers convert mapping to xml pipeline data mapping fail required True
def get custom metric client project id custom metric type request client projects metric Descriptors list name project id filter 'metric type starts with "{}" ' format custom metric type response request execute print ' List Custom Metricsresponse 'pprint pprint response try return response['metric Descriptors']except Key Error return None
def get scanner hass config info config[DOMAIN]host info get CONF HOST username info get CONF USERNAME password info get CONF PASSWORD port info get CONF PORT scanner Netgear Device Scanner host username password port return scanner if scanner success init else None
def contains hidden files n for sub in n name sub nameif len name > 1 and name startswith ' ' return Truereturn False
def ASSIGNJS **kargs from gluon serializers import jsons ''for key value in kargs items s + 'var%s %s \n' % key json value return XML s
def ASSIGNJS **kargs from gluon serializers import jsons ''for key value in kargs items s + 'var%s %s \n' % key json value return XML s
def course and time based filename generator course id base name return u'{course prefix} {base name} {timestamp str}' format course prefix course filename prefix generator course id base name get valid filename base name timestamp str datetime now UTC strftime '%Y-%m-%d-%H%M%S'
def auto create specific service command generator run utils run command generator command generators[get name of init run ]command list [c for c in COMMANDS if c not in ['list' 'set target'] ]return Service Command Generator command generator command list
def auto create specific service command generator run utils run command generator command generators[get name of init run ]command list [c for c in COMMANDS if c not in ['list' 'set target'] ]return Service Command Generator command generator command list
def auto create specific service command generator run utils run command generator command generators[get name of init run ]command list [c for c in COMMANDS if c not in ['list' 'set target'] ]return Service Command Generator command generator command list
def local diff branch remote os getenv LOCAL REMOTE ENV branch os getenv LOCAL BRANCH ENV if remote is not None and branch is not None return '%s/%s' % remote branch
def local diff branch remote os getenv LOCAL REMOTE ENV branch os getenv LOCAL BRANCH ENV if remote is not None and branch is not None return '%s/%s' % remote branch
@require POST@login requireddef unwatch ready request product None if request LANGUAGE CODE settings WIKI DEFAULT LANGUAGE raise Http 404 kwargs {}if product is not None kwargs['product'] product Ready Revision Event stop notifying request user **kwargs return Http Response
@require POST@login requireddef unwatch ready request product None if request LANGUAGE CODE settings WIKI DEFAULT LANGUAGE raise Http 404 kwargs {}if product is not None kwargs['product'] product Ready Revision Event stop notifying request user **kwargs return Http Response
def get previous sle args for update False args[u'name'] args get u'sle' None or u'' sle get stock ledger entries args u'< ' u'desc' u'limit 1 ' for update for update return sle and sle[ 0 ] or {}
def get previous sle args for update False args[u'name'] args get u'sle' None or u'' sle get stock ledger entries args u'< ' u'desc' u'limit 1 ' for update for update return sle and sle[ 0 ] or {}
def package relationship delete context data dict model context['model']user context['user'] id id 2 rel get or bust data dict ['subject' 'object' 'type'] pkg 1 model Package get id pkg 2 model Package get id 2 if not pkg 1 raise Not Found ' Subjectpackage%rwasnotfound ' % id if not pkg 2 return Not Found ' Objectpackage%rwasnotfound ' % id 2 existing rels pkg 1 get relationships with pkg 2 rel if not existing rels raise Not Foundrelationship existing rels[ 0 ]revisioned details ' Package Relationship %s%s%s' % id rel id 2 context['relationship'] relationship check access 'package relationship delete' context data dict rev model repo new revision rev author userrev message u'RESTAPI Delete%s' % revisioned details relationship delete model repo commit
def test valid css styles ['color' 'float']eq '<pstyle "float left ">foo</p>' clean '<pstyle "float left color ">foo</p>' styles styles eq '<pstyle "">foo</p>' clean '<pstyle "color float left ">foo</p>' styles styles
def test valid css styles ['color' 'float']eq '<pstyle "float left ">foo</p>' clean '<pstyle "float left color ">foo</p>' styles styles eq '<pstyle "">foo</p>' clean '<pstyle "color float left ">foo</p>' styles styles
def phrase extraction srctext trgtext alignment max phrase length 0 srctext srctext split trgtext trgtext split srclen len srctext trglen len trgtext f aligned [j for j in alignment]max phrase length max phrase length or max srclen trglen bp set for e start in range srclen max idx min srclen e start + max phrase length for e end in range e start max idx f start f end trglen - 1 -1 for e f in alignment if e start < e < e end f start min f f start f end max f f end phrases extract f start f end e start e end alignment f aligned srctext trgtext srclen trglen max phrase length if phrases bp update phrases return bp
def phrase extraction srctext trgtext alignment max phrase length 0 srctext srctext split trgtext trgtext split srclen len srctext trglen len trgtext f aligned [j for j in alignment]max phrase length max phrase length or max srclen trglen bp set for e start in range srclen max idx min srclen e start + max phrase length for e end in range e start max idx f start f end trglen - 1 -1 for e f in alignment if e start < e < e end f start min f f start f end max f f end phrases extract f start f end e start e end alignment f aligned srctext trgtext srclen trglen max phrase length if phrases bp update phrases return bp
def setup platform hass config add entities discovery info None import pyflichost config get CONF HOST port config get CONF PORT discovery config get CONF DISCOVERY try client pyflic Flic Client host port except Connection Refused Error LOGGER error ' Failedtoconnecttoflicserver ' returndef new button callback address ' Setupnewlyverifiedbuttonasdeviceinhomeassistant 'setup button hass config add entities client address client on new verified button new button callbackif discovery start scanning config add entities client hass bus listen once EVENT HOMEASSISTANT STOP lambda event client close threading Thread target client handle events start def get info callback items ' Addentitiesforalreadyverifiedbuttons 'addresses items['bd addr of verified buttons'] or [] for address in addresses setup button hass config add entities client address client get info get info callback
def doctest skip parser func lines func doc split '\n' new lines []for line in lines match SKIP RE match line if match is None new lines append line continue code space expr match groups try if eval expr func globals code code + space + '#doctest +SKIP' except Attribute Error if eval expr func init globals code code + space + '#doctest +SKIP' new lines append code func doc '\n' join new lines return func
def doctest skip parser func lines func doc split '\n' new lines []for line in lines match SKIP RE match line if match is None new lines append line continue code space expr match groups try if eval expr func globals code code + space + '#doctest +SKIP' except Attribute Error if eval expr func init globals code code + space + '#doctest +SKIP' new lines append code func doc '\n' join new lines return func
def format issue issue ret {'id' issue get 'id' 'issue number' issue get 'number' 'state' issue get 'state' 'title' issue get 'title' 'user' issue get 'user' get 'login' 'html url' issue get 'html url' }assignee issue get 'assignee' if assignee assignee assignee get 'login' labels issue get 'labels' label names []for label in labels label names append label get 'name' milestone issue get 'milestone' if milestone milestone milestone get 'title' ret['assignee'] assigneeret['labels'] label namesret['milestone'] milestonereturn ret
def format issue issue ret {'id' issue get 'id' 'issue number' issue get 'number' 'state' issue get 'state' 'title' issue get 'title' 'user' issue get 'user' get 'login' 'html url' issue get 'html url' }assignee issue get 'assignee' if assignee assignee assignee get 'login' labels issue get 'labels' label names []for label in labels label names append label get 'name' milestone issue get 'milestone' if milestone milestone milestone get 'title' ret['assignee'] assigneeret['labels'] label namesret['milestone'] milestonereturn ret
def services *args def decorator f services ['compute' 'image' 'baremetal' 'volume' 'network' 'identity' 'object storage']for service in args if service not in services raise exceptions Invalid Service Tag '%sisnotavalidservice' % service attr type list args f @functools wraps f def wrapper self *func args **func kwargs service list get service list for service in args if not service list[service] msg ' Skippedbecausethe%sserviceisnotavailable' % service raise testtools Test Case skip Exception msg return f self *func args **func kwargs return wrapperreturn decorator
def services *args def decorator f services ['compute' 'image' 'baremetal' 'volume' 'network' 'identity' 'object storage']for service in args if service not in services raise exceptions Invalid Service Tag '%sisnotavalidservice' % service attr type list args f @functools wraps f def wrapper self *func args **func kwargs service list get service list for service in args if not service list[service] msg ' Skippedbecausethe%sserviceisnotavailable' % service raise testtools Test Case skip Exception msg return f self *func args **func kwargs return wrapperreturn decorator
def join css classes class list return '' join sorted str val for val in class list if val
def cors tool req head cherrypy request headersresp head cherrypy response headersresp head[' Access- Control- Allow- Origin'] req head get ' Origin' '*' resp head[' Access- Control- Expose- Headers'] 'GET POST'resp head[' Access- Control- Allow- Credentials'] 'true'if cherrypy request method 'OPTIONS' cherrypy serving request handler cors handler
def cors tool req head cherrypy request headersresp head cherrypy response headersresp head[' Access- Control- Allow- Origin'] req head get ' Origin' '*' resp head[' Access- Control- Expose- Headers'] 'GET POST'resp head[' Access- Control- Allow- Credentials'] 'true'if cherrypy request method 'OPTIONS' cherrypy serving request handler cors handler
def garbagecollect func def inner *args **kwargs result func *args **kwargs gc collect return resultreturn inner
def garbagecollect func def inner *args **kwargs result func *args **kwargs gc collect return resultreturn inner
def get plugin plugin if plugin in PLUGINS SERVICE return PLUGINS SERVICE[plugin]
@with sitldef test 227 connpath vehicle connect connpath wait ready True def assert commands count vehicle commands download vehicle commands wait ready assert equals len vehicle commands count assert commands 0 vehicle commands add Command 0 0 0 mavutil mavlink MAV FRAME GLOBAL RELATIVE ALT mavutil mavlink MAV CMD NAV WAYPOINT 0 0 0 0 0 0 10 10 10 vehicle flush assert commands 1
def require support permission func @wraps func def inner request *args **kwargs if has access request user 'support' 'global' return func request *args **kwargs else return Http Response Forbidden return login required inner
def require support permission func @wraps func def inner request *args **kwargs if has access request user 'support' 'global' return func request *args **kwargs else return Http Response Forbidden return login required inner
def require support permission func @wraps func def inner request *args **kwargs if has access request user 'support' 'global' return func request *args **kwargs else return Http Response Forbidden return login required inner
def event source mapping absent name Event Source Arn Function Name region None key None keyid None profile None ret {'name' None 'result' True 'comment' '' 'changes' {}}desc salt ['boto lambda describe event source mapping'] Event Source Arn Event Source Arn Function Name Function Name region region key key keyid keyid profile profile if 'error' in desc ret['result'] Falseret['comment'] ' Failedtodeleteeventsourcemapping {0 } ' format desc['error']['message'] return retif not desc get 'event source mapping' ret['comment'] ' Eventsourcemappingdoesnotexist 'return retret['name'] desc['event source mapping']['UUID']if opts ['test'] ret['comment'] ' Eventsourcemappingissettoberemoved 'ret['result'] Nonereturn retr salt ['boto lambda delete event source mapping'] Event Source Arn Event Source Arn Function Name Function Name region region key key keyid keyid profile profile if not r['deleted'] ret['result'] Falseret['comment'] ' Failedtodeleteeventsourcemapping {0 } ' format r['error']['message'] return retret['changes']['old'] descret['changes']['new'] {'event source mapping' None}ret['comment'] ' Eventsourcemappingdeleted 'return ret
def test ast valid let can compile u' let[ab] ' can compile u' let[a 1 ] ' can compile u' let[a 1 b None] '
def test ast valid let can compile u' let[ab] ' can compile u' let[a 1 ] ' can compile u' let[a 1 b None] '
def tight layout pad 1 08 h pad None w pad None rect None fig gcf fig tight layout pad pad h pad h pad w pad w pad rect rect
def wrap socket sock keyfile None certfile None server side None cert reqs None ssl version None ca certs None do handshake on connect None suppress ragged eofs None for arg in ['cert reqs' 'ssl version' 'ca certs' 'do handshake on connect' 'suppress ragged eofs'] if locals [arg] is not None raise Type Error ' Touseargument%rinstallsslpackage http //pypi python org/pypi/ssl' % arg return ssl sock keyfile keyfile certfile certfile
def Arcsin name a 0 b 1 return rv name Arcsin Distribution a b
def unarchive archive path dest if tarfile is tarfile archive path with contextlib closing tarfile open archive path 'r' as archive archive extractall dest elif is zipfile archive path with contextlib closing Zip File archive path 'r' as archive for name in archive namelist dest path os path join dest *name split '/' dirname filename os path split dest path if dirname and not os path exists dirname os makedirs dirname if filename with open dest path 'wb' as dest file dest file write archive read name else raise IO Error ' Unknownarchivetype %s' % archive path
def unarchive archive path dest if tarfile is tarfile archive path with contextlib closing tarfile open archive path 'r' as archive archive extractall dest elif is zipfile archive path with contextlib closing Zip File archive path 'r' as archive for name in archive namelist dest path os path join dest *name split '/' dirname filename os path split dest path if dirname and not os path exists dirname os makedirs dirname if filename with open dest path 'wb' as dest file dest file write archive read name else raise IO Error ' Unknownarchivetype %s' % archive path
def get references file name encoding 'utf- 8 ' text ''if file name is not None if os path exists file name try with codecs open file name 'r' encoding encoding as f text f read except print traceback format exc else print ' Couldnotfindreferencefile%s ' file name return text
def does not modify data dict validator def call and assert key data errors context None if context is None context {}original data copy deepcopy data original errors copy deepcopy errors original context copy deepcopy context result validator key data errors context context assert data original data ' Shouldnotmodifydatadictwhencalledwithkey {key} data {data} errors {errors} context {context}' format key key data original data errors original errors context original context return resultreturn call and assert
def test cache deactivated private browsing config stub tmpdir config stub data {'storage' {'cache-size' 1024 } 'general' {'private-browsing' True}}disk cache cache Disk Cache str tmpdir metadata Q Network Cache Meta Data metadata set Url Q Url 'http //www example com/' assert metadata is Valid assert disk cache prepare metadata is None
def round rectangle size radius fill width height sizerectangle Image new u'L' size 255 corner round corner radius 255 rectangle paste corner 0 0 rectangle paste corner rotate 90 0 height - radius rectangle paste corner rotate 180 width - radius height - radius rectangle paste corner rotate 270 width - radius 0 return rectangle
def has access descriptor user action descriptor course key None def can load "\n NOTE Thisdoesnotcheckthatthestudentisenrolledinthecourse\nthatcontainsthismodule Wemayormaynotwanttoallownon-enrolled\nstudentstoseemodules Ifnot viewsshouldcheckthecourse sowe\ndon'thavetohittheenrollmentstableoneverymoduleload \n"if not has group access descriptor user course key return ACCESS DENIE Dif has staff access to descriptor user descriptor course key return ACCESS GRANTE Dreturn visible to nonstaff users descriptor and can access descriptor with milestones user descriptor course key and has detached class tag descriptor or can access descriptor with start date user descriptor course key checkers {'load' can load 'staff' lambda has staff access to descriptor user descriptor course key 'instructor' lambda has instructor access to descriptor user descriptor course key }return dispatch checkers action user descriptor
def wait for func timeout first 0 0 step 1 0 text None start time time time end time time time + timeout time sleep first while time time < end time if text logging debug '%s %fsecs ' text time time - start time output func if output return outputtime sleep step return None
def typed ordered dict key type value type default return lambda setting Ordered Dict key type String Converter key value type String Converter value if value '' else default for key value in Ordered Dict setting items
def typed ordered dict key type value type default return lambda setting Ordered Dict key type String Converter key value type String Converter value if value '' else default for key value in Ordered Dict setting items
def compute wcs key challenge assert type key in [six text type six binary type] assert type challenge in [six text type six binary type] if type key six text type key key encode 'utf 8 ' if type challenge six text type challenge challenge encode 'utf 8 ' sig hmac new key challenge hashlib sha 256 digest return binascii b2 a base 64 sig strip
def clear compatversion cache on delete sender instance **kw try if not instance addon type amo ADDON EXTENSION returnexcept Object Does Not Exist returnif not kw get 'raw' instance addon invalidate d2 c versions
def get unique content type object pk name None request None ip None user agent None user None if request if request user is authenticated user request userip user agent Noneelse user Noneip request META get 'REMOTE ADDR' '' user agent request META get 'HTTP USER AGENT' '' [ 255 ]hash text '\n' join unicode x encode 'utf- 8 ' for x in content type pk object pk name or '' ip user agent user and user pk or ' None' unique hash hashlib md 5 hash text hexdigest return user ip user agent unique hash
def present dbname name owner None db user None db password None db host None db port None ret {'dbname' dbname 'name' name 'changes' {} 'result' True 'comment' ' Schema{ 0 }isalreadypresentindatabase{ 1 }' format name dbname }db args {'db user' db user 'db password' db password 'db host' db host 'db port' db port}schema attr salt ['postgres schema get'] dbname name **db args cret Noneif schema attr is None cret salt ['postgres schema create'] dbname name owner owner **db args else msg ' Schema{ 0 }alreadyexistsindatabase{ 1 }'cret Noneif cret msg ' Schema{ 0 }hasbeencreatedindatabase{ 1 }'ret['result'] Trueret['changes'][name] ' Present'elif cret is not None msg ' Failedtocreateschema{ 0 }indatabase{ 1 }'ret['result'] Falseelse msg ' Schema{ 0 }alreadyexistsindatabase{ 1 }'ret['result'] Trueret['comment'] msg format name dbname return ret
def get Changes request options None payload json loads request args['payload'][ 0 ] repo url '%s%s' % payload['canon url'] payload['repository']['absolute url'] project request args get 'project' [''] [0 ]changes []for commit in payload['commits'] changes append {'author' commit['raw author'] 'files' [f['file'] for f in commit['files']] 'comments' commit['message'] 'revision' commit['raw node'] 'when timestamp' dateparse commit['utctimestamp'] 'branch' commit['branch'] 'revlink' '%scommits/%s' % repo url commit['raw node'] 'repository' repo url 'project' project} log msg ' Newrevision %s' % commit['node'] log msg ' Received%schangesfrombitbucket' % len changes return changes payload['repository']['scm']
def get Changes request options None payload json loads request args['payload'][ 0 ] repo url '%s%s' % payload['canon url'] payload['repository']['absolute url'] project request args get 'project' [''] [0 ]changes []for commit in payload['commits'] changes append {'author' commit['raw author'] 'files' [f['file'] for f in commit['files']] 'comments' commit['message'] 'revision' commit['raw node'] 'when timestamp' dateparse commit['utctimestamp'] 'branch' commit['branch'] 'revlink' '%scommits/%s' % repo url commit['raw node'] 'repository' repo url 'project' project} log msg ' Newrevision %s' % commit['node'] log msg ' Received%schangesfrombitbucket' % len changes return changes payload['repository']['scm']
def get Changes request options None payload json loads request args['payload'][ 0 ] repo url '%s%s' % payload['canon url'] payload['repository']['absolute url'] project request args get 'project' [''] [0 ]changes []for commit in payload['commits'] changes append {'author' commit['raw author'] 'files' [f['file'] for f in commit['files']] 'comments' commit['message'] 'revision' commit['raw node'] 'when timestamp' dateparse commit['utctimestamp'] 'branch' commit['branch'] 'revlink' '%scommits/%s' % repo url commit['raw node'] 'repository' repo url 'project' project} log msg ' Newrevision %s' % commit['node'] log msg ' Received%schangesfrombitbucket' % len changes return changes payload['repository']['scm']
@gating enabled default [] def get gated content course user if has access to course user 'staff' course id return []else return [m['content id'] for m in find gating milestones course id None 'requires' {'id' user id} ]
def check dataset edition permission authorize get False def inner view func def decorate request *args **kwargs dataset kwargs get 'dataset' if dataset is not None and not authorize get and request method 'GET' Job objects can edit or exception request dataset coordinator return view func request *args **kwargs return wraps view func decorate return inner
def check dataset edition permission authorize get False def inner view func def decorate request *args **kwargs dataset kwargs get 'dataset' if dataset is not None and not authorize get and request method 'GET' Job objects can edit or exception request dataset coordinator return view func request *args **kwargs return wraps view func decorate return inner
@error context awaredef lv revert with snapshot vg name lv name lv snapshot name lv snapshot size error context ' Revertingtosnapshotandtakinganewone' logging info lv revert vg name lv name lv snapshot name lv take snapshot vg name lv name lv snapshot name lv snapshot size
@error context awaredef lv revert with snapshot vg name lv name lv snapshot name lv snapshot size error context ' Revertingtosnapshotandtakinganewone' logging info lv revert vg name lv name lv snapshot name lv take snapshot vg name lv name lv snapshot name lv snapshot size
@error context awaredef lv revert with snapshot vg name lv name lv snapshot name lv snapshot size error context ' Revertingtosnapshotandtakinganewone' logging info lv revert vg name lv name lv snapshot name lv take snapshot vg name lv name lv snapshot name lv snapshot size
@register filterdef unflag url obj slug content type Content Type objects get for model obj return reverse 'unflag' kwargs {'slug' slug 'app label' content type app label 'model' content type model 'object id' obj pk}
def prespi create container table self conn conn executescript "\n CREATETABL Econtainer \n ROWIDINTEGERPRIMARYKEYAUTOINCREMENT \nname TEXT \nput timestamp TEXT \ndelete timestamp TEXT \nobject count INTEGER \nbytes used INTEGER \ndeleted INTEGERDEFAULT 0 \n \n\n CREATEINDE Xix container deleted name ON\ncontainer deleted name \n\n CREATETRIGGE Rcontainer insert AFTERINSERTO Ncontainer\n BEGIN\n UPDAT Eaccount stat\n SE Tcontainer count container count+ 1-new deleted \nobject count object count+new object count \nbytes used bytes used+new bytes used \nhash chexor hash new name \nnew put timestamp '-' \nnew delete timestamp '-' \nnew object count '-' new bytes used \n END \n\n CREATETRIGGE Rcontainer update BEFOREUPDATEO Ncontainer\n BEGIN\n SELECTRAISE FAIL 'UPDAT Enotallowed DELET Eand INSERT' \n END \n\n\n CREATETRIGGE Rcontainer delete AFTERDELETEO Ncontainer\n BEGIN\n UPDAT Eaccount stat\n SE Tcontainer count container count- 1-old deleted \nobject count object count-old object count \nbytes used bytes used-old bytes used \nhash chexor hash old name \nold put timestamp '-' \nold delete timestamp '-' \nold object count '-' old bytes used \n END \n"
def MERGE SMALL writer segments from whoosh filedb filereading import Segment Readernewsegments []sorted segment list sorted s doc count all s for s in segments total docs 0for i count seg in enumerate sorted segment list if count > 0 total docs + countif total docs < fib i + 5 reader Segment Reader writer storage writer schema seg writer add reader reader reader close else newsegments append seg return newsegments
def build standard config module doctype info if not frappe db get value u' Module Def' module frappe throw u' Module Not Found' data []add section data u' Documents' u'fafa-star' [d for d in doctype info if d document type in u' Document' u' Transaction' ] add section data u' Setup' u'fafa-cog' [d for d in doctype info if d document type in u' Master' u' Setup' u'' ] add section data u' Standard Reports' u'fafa-list' get report list module is standard u' Yes' return data
def untested error where raise Runtime Error ' Unknown%sfailure' % where
def make long description readme path README PAT Hreadme md strip html comments read readme path history md strip html comments read HISTORY PATH license md ' License\n \n\n' + read LICENSE PATH sections [readme md history md license md]md description '\n\n' join sections md ext os path splitext readme path [1 ]md description path make temp path RST DESCRIPTION PATH new ext md ext write md description md description path rst temp path make temp path RST DESCRIPTION PATH long description convert md to rst md path md description path rst temp path rst temp path return '\n' join [RST LONG DESCRIPTION INTRO long description]
def get task logger name if name in RESERVED LOGGER NAMES raise Runtime Error u' Loggername{ 0 r}isreserved ' format name return using logger parent task logger get logger name
def merge prefix deque size if len deque 1 and len deque[ 0 ] < size returnprefix []remaining sizewhile deque and remaining > 0 chunk deque popleft if len chunk > remaining deque appendleft chunk[remaining ] chunk chunk[ remaining]prefix append chunk remaining - len chunk if prefix deque appendleft type prefix[ 0 ] join prefix if not deque deque appendleft ''
def item to changes iterator resource return Changes from api repr resource iterator zone
def set sync value return set var 'SYNC' value
def coerce put post request if request method 'PUT' if hasattr request ' post' del request postdel request filestry request method 'POST'request load post and files request method 'PUT'except Attribute Error request META['REQUEST METHOD'] 'POST'request load post and files request META['REQUEST METHOD'] 'PUT'request PUT request POST
def coerce put post request if request method 'PUT' if hasattr request ' post' del request postdel request filestry request method 'POST'request load post and files request method 'PUT'except Attribute Error request META['REQUEST METHOD'] 'POST'request load post and files request META['REQUEST METHOD'] 'PUT'request PUT request POST
def coerce put post request if request method 'PUT' if hasattr request ' post' del request postdel request filestry request method 'POST'request load post and files request method 'PUT'except Attribute Error request META['REQUEST METHOD'] 'POST'request load post and files request META['REQUEST METHOD'] 'PUT'request PUT request POST
@bdd then bdd parsers parse ' Thesessionshouldlooklike \n{expected}' def compare session request quteproc expected quteproc compare session expected
def Get Query Node Text Unicode node if node get Type Query Parser VALUE and len node children > 2 return u'' join c get Text for c in node children[ 1 ] elif node get Type Query Parser VALUE return Nonereturn node get Text
def delete peers *peers **options test options pop 'test' False commit options pop 'commit' True return salt ['net load template'] 'delete ntp peers' peers peers test test commit commit
def get scale x scales [20 50 100 200 400 600 800 1000 ]for scale in scales if x < scale return scalereturn x
def return probe from definition df types args df['args']retval type df['retval type']printf specifier type description retval type types ['printf specifier']template Template RETURN PROBE TEMPLATE mapping {' LIBRARY ' df get 'library' '' ' NAME ' df['api'] ' ARGS FORMAT STRING ' arguments format string args types ' RETVAL FORMAT SPECIFIER ' printf specifier ' ARGUMENTS ' arguments section args types ' RETVAL ' retval section retval type types ' ARGUMENTS POP FROM STACK ' pop from stack section args }return template substitute mapping
def normalize slice s start stop step s start s stop s step if start is None start 0if step is None step 1if start < 0 or step < 0 or stop is not None and stop < 0 raise Not Implemented Error return slice start stop step
def regexp 2 pattern string if type string is REGEXP T flags string flagsstring string patternif string startswith '^' string string[ 1 ]else string ' *' + string if string endswith '$' string string[ -1 ]else string + ' *'return string flags else return re escape string 0
def regexp 2 pattern string if type string is REGEXP T flags string flagsstring string patternif string startswith '^' string string[ 1 ]else string ' *' + string if string endswith '$' string string[ -1 ]else string + ' *'return string flags else return re escape string 0
def get output ids ids bcs added field corrected bc num errors added field max bc errors 1 5 enum val 1 bc corrected flag Noneif added field is None curr added field ''else curr added field added fieldif corrected bc is None curr bc ''else curr bc corrected bclog id ''if num errors > max bc errors sample id ' Unassigned %d' % enum val bc corrected flag 'not corrected'else try base sample id ids bcs added field[ curr bc curr added field ]sample id '%s %d' % base sample id enum val if corrected bc log id + '%s' % corrected bc if corrected bc and added field log id + ' 'if added field log id + '%s' % added field if log id log id + ' 'log id + '%s' % base sample id if num errors > 0 bc corrected flag 'corrected'except Key Error sample id ' Unassigned %d' % enum val return sample id log id bc corrected flag
def create tcp socket module type module SOCK STREA Mif hasattr module 'SOCK CLOEXEC' type module SOCK CLOEXE Csock module socket module AF INET type set default tcpsock options module sock return sock
def popular tags for model model count 10 content type Content Type objects get for model model return Tag objects filter taggit taggeditem items content type content type annotate item count Count u'taggit taggeditem items' order by u'-item count' [ count]
def fix local scheme home dir symlink True try import sysconfigexcept Import Error passelse if sysconfig get default scheme 'posix local' local path os path join home dir 'local' if not os path exists local path os mkdir local path for subdir name in os listdir home dir if subdir name 'local' continuecopyfile os path abspath os path join home dir subdir name os path join local path subdir name symlink
def fix local scheme home dir symlink True try import sysconfigexcept Import Error passelse if sysconfig get default scheme 'posix local' local path os path join home dir 'local' if not os path exists local path os mkdir local path for subdir name in os listdir home dir if subdir name 'local' continuecopyfile os path abspath os path join home dir subdir name os path join local path subdir name symlink
def fix local scheme home dir symlink True try import sysconfigexcept Import Error passelse if sysconfig get default scheme 'posix local' local path os path join home dir 'local' if not os path exists local path os mkdir local path for subdir name in os listdir home dir if subdir name 'local' continuecopyfile os path abspath os path join home dir subdir name os path join local path subdir name symlink
def fix local scheme home dir symlink True try import sysconfigexcept Import Error passelse if sysconfig get default scheme 'posix local' local path os path join home dir 'local' if not os path exists local path os mkdir local path for subdir name in os listdir home dir if subdir name 'local' continuecopyfile os path abspath os path join home dir subdir name os path join local path subdir name symlink
def add checks actions if FETCH in actions actions setdefault CHECK FETCH [ True] if EXTRACT in actions actions setdefault CHECK EXTRACT [ True]
@taskdef post index new index old index alias index name settings print ' Optimizing updatingsettingsandaliases ' alias ES indices optimize index new index ES indices put settings index new index body settings actions [{'add' {'index' new index 'alias' alias}}]if old index actions append {'remove' {'index' old index 'alias' alias}} ES indices update aliases body dict actions actions print ' Unflaggingthedatabase ' alias Reindexing unflag reindexing alias alias print ' Removingindex{index} ' format index old index alias if old index and ES indices exists index old index ES indices delete index old index alias output ''for indexer in INDEXERS alias ES INDEXES[indexer get mapping type name ]alias output + unicode ES indices get aliases index alias + '\n' print ' Reindexationdone Currentaliasesconfiguration {output}\n' format output alias output alias
def parse value s if not s return REMOVE THIS KE Yelif s[ 0 ] in u'"{[ 0123456789 -' or s in u'null' u'true' u'false' return json loads s else return s
def parse value s if not s return REMOVE THIS KE Yelif s[ 0 ] in u'"{[ 0123456789 -' or s in u'null' u'true' u'false' return json loads s else return s
def get Persistent RSA Key location key Size 4096 location parent makedirs ignore Existing Directory True if not location exists private Key rsa generate private key public exponent 65537 key size key Size backend default backend pem private Key private bytes encoding serialization Encoding PEM format serialization Private Format Traditional Open SSL encryption algorithm serialization No Encryption location set Content pem with location open 'rb' as key File private Key serialization load pem private key key File read password None backend default backend return Key private Key
def numeric n return isinstance n salt ext six integer types + float
def Int 2 AP num val a2 p [] 'ABCDEFGHIJKLMNOP' num int abs num while num num mod divmod num 16 val insert 0 a2 p[mod] return '' join val
def get color dict l **kwargs cs Color Spiral **kwargs colors cs get colors len l dict {}for item in l dict[item] next colors return dict
def relabel nodes G mapping copy True if not hasattr mapping ' getitem ' m dict n mapping n for n in G else m mappingif copy return relabel copy G m else return relabel inplace G m
def expand db html html for editor False def replace a tag m attrs extract attrs m group 1 if u'linktype' not in attrs return m group 0 handler get link handler attrs[u'linktype'] return handler expand db attributes attrs for editor def replace embed tag m attrs extract attrs m group 1 handler get embed handler attrs[u'embedtype'] return handler expand db attributes attrs for editor html FIND A TAG sub replace a tag html html FIND EMBED TAG sub replace embed tag html return html
def wait on app port retries math ceil START APP TIMEOUT / BACKOFF TIME private ip appscale info get private ip url 'http //' + private ip + ' ' + str port + FETCH PATH while retries > 0 try opener urllib 2 build opener No Redirection response opener open url if response code HTTP OK logging warning '{}returned{} Headers {}' format url response code response headers headers return Trueexcept IO Error retries - 1time sleep BACKOFF TIME logging error ' Applicationdidnotcomeupon{}after{}seconds' format url START APP TIMEOUT return False
def evaluate marker text extra None try marker packaging markers Marker text return marker evaluate except packaging markers Invalid Marker as e raise Syntax Error e
def to trace component db component if not isinstance component basestring dict print type component raise Value Error ' Expectedcomponenttobestrordict' object id component if isinstance component basestring else component['id'] ref component get 'ref' '' if isinstance component dict else '' caused by component get 'caused by' {} if isinstance component dict else {} return Trace Component DB object id object id ref ref caused by caused by
def test bad setv cant compile u' setvif* 1 ' cant compile u' setv ab [12 ] '
def test bad setv cant compile u' setvif* 1 ' cant compile u' setv ab [12 ] '
def test bad setv cant compile u' setvif* 1 ' cant compile u' setv ab [12 ] '
def vhosts cmd '{ 0 }-S' format detect os ret {}namevhost ''out salt ['cmd run'] cmd for line in out splitlines if not line continuecomps line split if 'isa Name Virtual Host' in line namevhost comps[ 0 ]ret[namevhost] {}else if comps[ 0 ] 'default' ret[namevhost]['default'] {}ret[namevhost]['default']['vhost'] comps[ 2 ]ret[namevhost]['default']['conf'] re sub '\\ \\ ' '' comps[ 3 ] if comps[ 0 ] 'port' ret[namevhost][comps[ 3 ]] {}ret[namevhost][comps[ 3 ]]['vhost'] comps[ 3 ]ret[namevhost][comps[ 3 ]]['conf'] re sub '\\ \\ ' '' comps[ 4 ] ret[namevhost][comps[ 3 ]]['port'] comps[ 1 ]return ret
def query sql query vars None processed False if vars is None vars {}db cursor ctx db cursor if not processed sql query vars reparam sql query vars ctx db execute db cursor sql query vars if db cursor description names [x[ 0 ] for x in db cursor description]def iterwrapper row db cursor fetchone while row yield Storage dict zip names row row db cursor fetchone out iterbetter iterwrapper out len lambda int db cursor rowcount out list lambda [ Storage dict zip names x for x in db cursor fetchall ] else out db cursor rowcountif not ctx db transaction ctx db commit return out
def identification field factory label error required return forms Char Field label label widget forms Text Input attrs attrs dict max length 75 error messages {u'required' error required}
def identification field factory label error required return forms Char Field label label widget forms Text Input attrs attrs dict max length 75 error messages {u'required' error required}
def avg Found After decreasing Target Values lists Of Actual Values batch Size 1 use Median False from scipy import sumnum Lists len lists Of Actual Values longest max list map len lists Of Actual Values res [[ 0 ] for in range num Lists ]for tval in decreasing Target Values for li l in enumerate lists Of Actual Values lres res[li]found Falsefor i in range lres[ -1 ] len l if l[i] < tval lres append i found Truebreakif not found lres append longest tmp array res if use Median resx median tmp axis 0 [1 ]else resx sum tmp axis 0 [1 ] / float num Lists return resx * batch Size
def stop container container id try subprocess check output 'dockerstop%s' % container id shell True except subprocess Called Process Error as cpe print 'w 3 afcontainerfailedtostop "%s"' % cpe sys exit 1
def test can create all resources session create session for service name in session get available resources yield test create resource session service name
def generate crc 16 table result []for byte in range 256 crc 0for in range 8 if byte ^ crc & 1 crc crc >> 1 ^ 40961 else crc >> 1byte >> 1result append crc return result
@world absorbdef wait for visible css selector index 0 timeout GLOBAL WAIT FOR TIMEOUT wait for func lambda css visible css selector index timeout timeout timeout msg ' Timedoutwaitingfor{}tobevisible ' format css selector
def find head bem subject subjects dir high res False fnames high res head fnames if high res else head fnames for fname in fnames path fname format subjects dir subjects dir subject subject if os path exists path return path
def connect to autoscale region None return create client ep name 'autoscale' region region
def eventlog request event 0 if not test user authenticated request return login request next '/cobbler web/eventlog/%s' % str event expired True event info remote get events if event not in event info return Http Response 'eventnotfound' data event info[event]eventname data[ 0 ]eventtime data[ 1 ]eventstate data[ 2 ]eventlog remote get event log event t get template 'eventlog tmpl' vars {'eventlog' eventlog 'eventname' eventname 'eventstate' eventstate 'eventid' event 'eventtime' eventtime 'version' remote extended version request session['token'] ['version'] 'username' username}html t render Request Context request vars return Http Response html
def is Valid HMAC hmac 1 hmac 2 key assert len hmac 1 len hmac 2 double Hmac 1 mycrypto HMAC SHA 256 128 key hmac 1 double Hmac 2 mycrypto HMAC SHA 256 128 key hmac 2 if double Hmac 1 double Hmac 2 return Falselog debug ' Thecomputed HMA Cisvalid ' return True
def build output stream args env request response output options req h OUT REQ HEAD in output options req b OUT REQ BODY in output options resp h OUT RESP HEAD in output options resp b OUT RESP BODY in output options req req h or req b resp resp h or resp b output [] Stream get stream type env args if req output append Stream msg HTTP Request request with headers req h with body req b if req b and resp output append ['\n\n'] if resp output append Stream msg HTTP Response response with headers resp h with body resp b if env stdout isatty and resp b output append ['\n\n'] return chain *output
def build output stream args env request response output options req h OUT REQ HEAD in output options req b OUT REQ BODY in output options resp h OUT RESP HEAD in output options resp b OUT RESP BODY in output options req req h or req b resp resp h or resp b output [] Stream get stream type env args if req output append Stream msg HTTP Request request with headers req h with body req b if req b and resp output append ['\n\n'] if resp output append Stream msg HTTP Response response with headers resp h with body resp b if env stdout isatty and resp b output append ['\n\n'] return chain *output
def convert search search if not search search ''else search search replace '*' '%' replace '' '%' if search and search startswith '^' search search replace '^' '' search + '%'elif search and search endswith '$' search search replace '$' '' search '%' + search else search '%' + search + '%' return search
def convert search search if not search search ''else search search replace '*' '%' replace '' '%' if search and search startswith '^' search search replace '^' '' search + '%'elif search and search endswith '$' search search replace '$' '' search '%' + search else search '%' + search + '%' return search
def inverse data impulse response None filter params {} max gain 2 predefined filter None assert nD data 2 'data' if predefined filter is None filt LPI Filter 2 D impulse response **filter params else filt predefined filter F G filt prepare data min limit F F 1 / F mask np abs F > max gain F[mask] np sign F[mask] * max gain return centre np abs ifftshift np dual ifftn G * F data shape
def inverse data impulse response None filter params {} max gain 2 predefined filter None assert nD data 2 'data' if predefined filter is None filt LPI Filter 2 D impulse response **filter params else filt predefined filter F G filt prepare data min limit F F 1 / F mask np abs F > max gain F[mask] np sign F[mask] * max gain return centre np abs ifftshift np dual ifftn G * F data shape
def get filename filename if os path isabs filename basedir os path abspath os path join os path dirname file ' ' ' ' common path os path commonprefix [basedir filename] if common path filename filename[len common path ] lstrip '/' return filename
def rax find server module rax module server cs rax module cloudserverstry UUID server server cs servers get server except Value Error servers cs servers list search opts dict name '^%s$' % server if not servers module fail json msg ' No Serverwasmatchedbyname tryusingthe Server I Dinstead' if len servers > 1 module fail json msg ' Multipleserversmatchedbyname tryusingthe Server I Dinstead' server servers[ 0 ]return server
def nearest intersection line 0 line 1 Pa Pb intersection dist nearest intersection points line 0 line 1 if Pa is not None n Point Pa - Pb return Pb + n Point * 0 5 intersection dist else return None None
def register type cffi type numba type tm type map tm[cffi type] numba type
def bptrs a return pycuda gpuarray arange a ptr a ptr + a shape[ 0 ] * a strides[ 0 ] a strides[ 0 ] dtype cublas ctypes c void p
@receiver post save sender Course User Group def cohort added sender **kwargs instance kwargs['instance']if kwargs['created'] and instance group type Course User Group COHORT tracker emit 'edx cohort created' {'cohort id' instance id 'cohort name' instance name}
@receiver post save sender Course User Group def cohort added sender **kwargs instance kwargs['instance']if kwargs['created'] and instance group type Course User Group COHORT tracker emit 'edx cohort created' {'cohort id' instance id 'cohort name' instance name}
def warn msg html False write msg 'WARN' html
def warn msg html False write msg 'WARN' html
def generate adjlist G delimiter '' directed G is directed seen set for s nbrs in G adjacency line make str s + delimiter for t data in nbrs items if not directed and t in seen continueif G is multigraph for d in data values line + make str t + delimiter else line + make str t + delimiter if not directed seen add s yield line[ - len delimiter ]
def download signed request uuid **kwargs extension get object or 404 Extension objects without deleted public uuid uuid version get object or 404 extension versions without deleted public pk kwargs['version id'] log info ' Downloadingpublicadd-on %sversion%sfrom%s' % extension pk version pk version signed file path return download request extension version version signed file path
def relevant issues issues after logging info 'findingrelevantissuesafter{} ' format after seen set for issue in issues if relevent issue issue after and issue['title'] not in seen seen add issue['title'] yield issue
def get value from system metadata instance key type default value instance system metadata get key default try return type value except Value Error LOG warning LW ' Metadatavalue% value sfor% key sisnotoftype% type s Usingdefaultvalue% default s ' {'value' value 'key' key 'type' type 'default' default} instance instance return default
def remove samples path RE SAMPLE re compile sample match re I for root dirs files in os walk path for file in files if RE SAMPLE search file path os path join root file try logging info ' Removingunwantedsamplefile%s' path os remove path except logging error T ' Removing%sfailed' clip path path logging info ' Traceback ' exc info True
def get random id from random import randomfrom time import timetry from hashlib import sha 1 as shaexcept Import Error import shasha sha newreturn sha '%s %s' % random time hexdigest
def bc adjust shape strides context builder shapes strides target shape bc shapes []bc strides []zero context get constant types uintp 0 one context get constant types uintp 1 mismatch [builder icmp signed ' ' tar old for tar old in zip target shape shapes ]src is one [builder icmp signed ' ' old one for old in shapes]preds [builder and x y for x y in zip mismatch src is one ]bc shapes [builder select p tar old for p tar old in zip preds target shape shapes ]bc strides [builder select p zero old for p old in zip preds strides ]return bc shapes bc strides
def create container with mbytes and specific cpus name mbytes cpus None root SUPER ROOT io {} move in True timeout 0 need mem containers if not container exists root raise error Autotest Error ' Parentcontainer"%s"doesnotexist' % root if cpus is None cpus get cpus root else cpus set cpus if not cpus raise error Autotest Error ' Creatingcontainerwithnocpus' name os path join root name if os path exists full path name raise error Autotest Error ' Container%salreadyexists' % name create container directly name mbytes cpus set io controls name **io if move in move self into container name return name
def create container with mbytes and specific cpus name mbytes cpus None root SUPER ROOT io {} move in True timeout 0 need mem containers if not container exists root raise error Autotest Error ' Parentcontainer"%s"doesnotexist' % root if cpus is None cpus get cpus root else cpus set cpus if not cpus raise error Autotest Error ' Creatingcontainerwithnocpus' name os path join root name if os path exists full path name raise error Autotest Error ' Container%salreadyexists' % name create container directly name mbytes cpus set io controls name **io if move in move self into container name return name
def create container with mbytes and specific cpus name mbytes cpus None root SUPER ROOT io {} move in True timeout 0 need mem containers if not container exists root raise error Autotest Error ' Parentcontainer"%s"doesnotexist' % root if cpus is None cpus get cpus root else cpus set cpus if not cpus raise error Autotest Error ' Creatingcontainerwithnocpus' name os path join root name if os path exists full path name raise error Autotest Error ' Container%salreadyexists' % name create container directly name mbytes cpus set io controls name **io if move in move self into container name return name
def get review by repository id changeset revision user id app repository id changeset revision user id sa session app model context currentreturn sa session query app model Repository Review filter and app model Repository Review repository id app security decode id repository id app model Repository Review changeset revision changeset revision app model Repository Review user id app security decode id user id first
@ refresh mine cache@ api version 1 12 @ ensure existsdef unpause name orig state state name if orig state 'stopped' return {'result' False 'state' {'old' orig state 'new' orig state} 'comment' " Container'{ 0 }'isstopped cannotunpause" format name }return change state name 'unpause' 'running'
def Student T name nu return rv name Student T Distribution nu
def marshal data fields envelope None def make cls if isinstance cls type return cls return clsif isinstance data list tuple return Ordered Dict [ envelope [marshal d fields for d in data] ] if envelope else [marshal d fields for d in data] items k marshal data v if isinstance v dict else make v output k data for k v in fields items return Ordered Dict [ envelope Ordered Dict items ] if envelope else Ordered Dict items
def marshal data fields envelope None def make cls if isinstance cls type return cls return clsif isinstance data list tuple return Ordered Dict [ envelope [marshal d fields for d in data] ] if envelope else [marshal d fields for d in data] items k marshal data v if isinstance v dict else make v output k data for k v in fields items return Ordered Dict [ envelope Ordered Dict items ] if envelope else Ordered Dict items
def calculator counter type def set calculator func counter type calculators[counter type] funcreturn funcreturn set calculator
def test cache deactivated update metadata config stub tmpdir config stub data {'storage' {'cache-size' 1024 } 'general' {'private-browsing' True}}url 'http //qutebrowser org'disk cache cache Disk Cache str tmpdir metadata Q Network Cache Meta Data metadata set Url Q Url url assert metadata is Valid assert disk cache update Meta Data metadata is None
def create lrouter cluster tenant id display name nexthop tags [{'tag' tenant id 'scope' 'os tid'}]display name check and truncate name display name lrouter obj {'display name' display name 'tags' tags 'routing config' {'default route next hop' {'gateway ip address' nexthop 'type' ' Router Next Hop'} 'type' ' Single Default Route Implicit Routing Config'} 'type' ' Logical Router Config'}try return json loads do single request HTTP POST build uri path LROUTER RESOURCE json dumps lrouter obj cluster cluster except Nvp Api Client Nvp Api Exception LOG exception ' Anexceptionoccuredwhilecommunicatingwiththe NV Pcontrollerforcluster %s' cluster name raise
def create lrouter cluster tenant id display name nexthop tags [{'tag' tenant id 'scope' 'os tid'}]display name check and truncate name display name lrouter obj {'display name' display name 'tags' tags 'routing config' {'default route next hop' {'gateway ip address' nexthop 'type' ' Router Next Hop'} 'type' ' Single Default Route Implicit Routing Config'} 'type' ' Logical Router Config'}try return json loads do single request HTTP POST build uri path LROUTER RESOURCE json dumps lrouter obj cluster cluster except Nvp Api Client Nvp Api Exception LOG exception ' Anexceptionoccuredwhilecommunicatingwiththe NV Pcontrollerforcluster %s' cluster name raise
def log *args for v in args sys stderr write str v sys stderr write '\n'
def add namespace to cmd cmd namespace None return ['ip' 'netns' 'exec' namespace] + cmd if namespace else cmd
def generate fake facilities names ' Wilson Elementary' facilities []for name in names found facilities Facility objects filter name name if found facilities facility found facilities[ 0 ]logging info " Retrievedfacility'%s'" % name else facility Facility name name facility save logging info " Createdfacility'%s'" % name facilities append facility return facilities
def normalize html data try data lxml html tostring lxml html fromstring data encoding 'unicode' except passreturn '< DOCTYP Ehtml>\n' + data
def normalize html data try data lxml html tostring lxml html fromstring data encoding 'unicode' except passreturn '< DOCTYP Ehtml>\n' + data
@receiver COURSE CERT AWARDED sender Generated Certificate def create course group badge sender user course key status **kwargs course group check user course key
@receiver COURSE CERT AWARDED sender Generated Certificate def create course group badge sender user course key status **kwargs course group check user course key
def partition node node host nodeport 27017 idx node rfind ' ' if idx -1 host port node[ idx] int node[ idx + 1 ] if host startswith '[' host host[ 1 -1 ]return host port
def partition node node host nodeport 27017 idx node rfind ' ' if idx -1 host port node[ idx] int node[ idx + 1 ] if host startswith '[' host host[ 1 -1 ]return host port
def format Route Body data schema store base Substitutions {u'DOMAIN' u'example com' u'NODE 0' u'cf 0 f 0346 - 17 b 2 - 4812 -beca- 1434997 d 6 c 3 f' u'NODE 1' u' 7 ec 3 c 4 eb- 6 b 1 c- 43 da- 8015 -a 163 f 7 d 15244 '}for line in data['description'] yield line if 'input' in data for line in format Actual Schema data['input schema'] '+ Request JSON Schema' schema store yield line if 'output' in data for line in format Actual Schema data['output schema'] '+ Response JSON Schema' schema store yield line for example in data['examples'] substitutions base Substitutions copy for line in format Example example substitutions yield line if 'input' in data for line in format Schema data['input'] True yield line if 'output' in data for line in format Schema data['output'] False yield line
def movavg x n w np empty n dtype float w[ ] 1 0 / n return np convolve x w mode u'valid'
def apply adjustments rgba adjustments if not adjustments return rgbafor adjustment in adjustments name args adjustment[ 0 ] adjustment[ 1 ] if name 'threshold' rgba apply threshold adjustment rgba *args elif name 'curves' rgba apply curves adjustment rgba *args elif name 'curves 2 ' rgba apply curves 2 adjustment rgba *args else raise Known Unknown ' Unrecognizedcompositeadjustment "%s"withargs%s' % name repr args return rgba
def naughty strings filepath FILEPATH strings []with open filepath 'r' as f strings f readlines strings [x strip u'\n' for x in strings]strings [x for x in strings if x and not x startswith u'#' ]strings insert 0 u'' return strings
def verify Third Party File url checksum fname name os path basename fname if os path exists fname print ' Usinglocalcopyof%s' % name else print ' Didnotfindlocalcopyof%s' % name print ' Downloading%s' % name download URL url fname print ' Archivefor%sstoredas%s' % name fname if os system 'MD 5 $ opensslmd 5 %s test"${MD 5 ##* }" "%s"' % shell Quote fname checksum fatal 'MD 5 checksummismatchforfile%s' % fname
def underscore value return value replace u' ' u' '
@register assignment tag takes context True def assignment params and context context arg return 'assignment params and context- Expectedresult contextvalue %s %s' % context['value'] arg
def invert f x y x domain S Complexes x sympify x if not x is Symbol raise Value Error 'xmustbeasymbol' f x sympify f x if not f x has x raise Value Error " Inverseofconstantfunctiondoesn'texist" y sympify y if y has x raise Value Error 'yshouldbeindependentofx' if domain is subset S Reals x s invert real f x Finite Set y x else x s invert complex f x Finite Set y x return x s intersection domain if isinstance s Finite Set else s
def get suite import doctestimport sysreturn doctest Doc Test Suite sys modules[ name ]
def link target link to assert isinstance target str assert os path exists target assert isinstance link to str abs path os path dirname os path abspath link to if not os path isdir abs path os makedirs abs path chmod target os symlink target link to
def create populated cluster ctxt num services num down svcs 0 **values up time timeutils utcnow down time up time - datetime timedelta seconds CONF service down time + 1 cluster create cluster ctxt **values svcs [db service create ctxt {'cluster name' cluster name 'host' 'host' + str i 'updated at' down time if i < num down svcs else up time } for i in range num services ]return cluster svcs
def external login email get form Resend Confirmation Form request form session get session if not session is external first login raise HTTP Error http UNAUTHORIZED external id provider session data['auth user external id provider']return {'form' form 'external id provider' external id provider}
def external login email get form Resend Confirmation Form request form session get session if not session is external first login raise HTTP Error http UNAUTHORIZED external id provider session data['auth user external id provider']return {'form' form 'external id provider' external id provider}
def add Gradient List To Docstring def dec fn if fn doc is not None fn doc fn doc + str Gradients keys strip '[' strip ']' return fnreturn dec
def symmath check simple expect ans adict {} symtab None extra options None options {' MATRIX ' False ' ABC ' False ' LOWER ' False}if extra options options update extra options for op in options if op in expect expect expect replace op '' options[op] Trueexpect expect replace ' OR ' ' or ' if options[' LOWER '] expect expect lower ans ans lower try ret check expect ans matrix options[' MATRIX '] abcsym options[' ABC '] symtab symtab except Exception as err return {'ok' False 'msg' ' Error%s<br/> Failedinevaluatingcheck %s %s ' % err expect ans }return ret
def symmath check simple expect ans adict {} symtab None extra options None options {' MATRIX ' False ' ABC ' False ' LOWER ' False}if extra options options update extra options for op in options if op in expect expect expect replace op '' options[op] Trueexpect expect replace ' OR ' ' or ' if options[' LOWER '] expect expect lower ans ans lower try ret check expect ans matrix options[' MATRIX '] abcsym options[' ABC '] symtab symtab except Exception as err return {'ok' False 'msg' ' Error%s<br/> Failedinevaluatingcheck %s %s ' % err expect ans }return ret
def ancestors node results []try current node parent except Attribute Error return resultswhile current results append current current current parent return results
def get tests from fs parent dir control pattern add noncompliant False tests {}profilers Falseif 'client/profilers' in parent dir profilers Truefor dir in [parent dir] files recursive walk dir control pattern for file in files if ' init py' in file or ' svn' in file continueif not profilers if not add noncompliant try found test control data parse control file raise warnings True tests[file] found testexcept control data Control Variable Exception as e logging warn ' Skipping%s\n%s' file e except Exception as e logging error ' Bad%s\n%s' file e else found test control data parse control file tests[file] found testelse tests[file] compiler parse File file docreturn tests
def get tests from fs parent dir control pattern add noncompliant False tests {}profilers Falseif 'client/profilers' in parent dir profilers Truefor dir in [parent dir] files recursive walk dir control pattern for file in files if ' init py' in file or ' svn' in file continueif not profilers if not add noncompliant try found test control data parse control file raise warnings True tests[file] found testexcept control data Control Variable Exception as e logging warn ' Skipping%s\n%s' file e except Exception as e logging error ' Bad%s\n%s' file e else found test control data parse control file tests[file] found testelse tests[file] compiler parse File file docreturn tests
def get Folders directory archive make Directory directory directory Listing []try directory Listing os listdir directory except OS Error print ' Skeinforgecannotlistthedirectory 'print directoryprint 'sogiveitread/writepermissionforthatdirectory 'folders []for file Name in directory Listing if os path isdir os path join directory file Name folders append file Name return folders
def match Set Contribution match set target set index contribution 0 0for t in target set match - float 'inf' id -1 for i m in enumerate match set v match Strength m t if v > match match vid iif id index contribution + matchreturn contribution / len target set
def Erlang name k l return rv name Gamma Distribution k 1 / l
def css gradient gradient stop final Stop gradient start gradient final Stop x1 y1 x2 y2 stop x stop y final Stop x final Stop y stops gradient stops stops '\n' join 'stop {0 f}{ 1 }' format stop color name for stop color in stops return 'qlineargradient \nx 1 {x 1 } y1 {y 1 } x2 {x 1 } y2 {y 2 } \n{stops} ' format x1 x1 y1 y1 x2 x2 y2 y2 stops stops
@pytest fixture scope 'session' def unicode encode err return Unicode Encode Error 'ascii' '' 0 2 'fakeexception'
def test events are condensed api client message ts int time time + 22 cursor get cursor api client ts message id api client get data '/messages/' [0 ]['id']message path '/messages/{}' format message id api client put data message path {'unread' True} api client put data message path {'unread' False} api client put data message path {'unread' True} sync data api client get data '/delta?cursor {}' format cursor deltas sync data['deltas']message deltas [d for d in deltas if d['object'] 'message' ]assert len message deltas 1 delta message deltas[ 0 ]assert delta['object'] 'message' and delta['event'] 'modify' assert delta['attributes']['unread'] is True
def test events are condensed api client message ts int time time + 22 cursor get cursor api client ts message id api client get data '/messages/' [0 ]['id']message path '/messages/{}' format message id api client put data message path {'unread' True} api client put data message path {'unread' False} api client put data message path {'unread' True} sync data api client get data '/delta?cursor {}' format cursor deltas sync data['deltas']message deltas [d for d in deltas if d['object'] 'message' ]assert len message deltas 1 delta message deltas[ 0 ]assert delta['object'] 'message' and delta['event'] 'modify' assert delta['attributes']['unread'] is True
def has override value val name return BACKEND has override value val name
def trigger emails settings frappe get doc u' Daily Work Summary Settings' for d in settings companies if frappe utils nowtime split u' ' [0 ] d send emails at split u' ' [0 ] emails get employee emails d company if emails daily work summary frappe get doc dict doctype u' Daily Work Summary' company d company insert daily work summary send mails settings emails
def trigger emails settings frappe get doc u' Daily Work Summary Settings' for d in settings companies if frappe utils nowtime split u' ' [0 ] d send emails at split u' ' [0 ] emails get employee emails d company if emails daily work summary frappe get doc dict doctype u' Daily Work Summary' company d company insert daily work summary send mails settings emails
def test alnum arr for element in arr if not element isalnum return Falsereturn True
@only cidef generate requirements txt failed deps req file file REQUIREMENTS TXT 'w' if failed deps for pkg in failed deps if pkg is git req file write '%s\n' % pkg git src else req file write '%s %s\n' % pkg package name pkg package version req file close return REQUIREMENTS TXT
def put response to local cache url our resp without content False if parse method 'GET' or our resp status code 200 returndbgprint ' Putting Cache ' url 'without content ' without content if without content our resp copy copy our resp our resp response Noneobj size 0else our resp our respobj size len parse remote response content last modified parse remote response headers get ' Last- Modified' None cache put obj url our resp expires get expire from mime parse mime obj size obj size last modified last modified info dict {'without content' without content 'last modified' last modified}
@register inclusion tag 'utilities/render custom fields html' def render custom fields form return {'form' form}
@register inclusion tag 'utilities/render custom fields html' def render custom fields form return {'form' form}
def test suggestions keyhint key config stub key config stub set bindings for 'normal' Ordered Dict [ 'aa' 'cmd-aa' 'ab' 'cmd-ab' 'aba' 'cmd-aba' 'abb' 'cmd-abb' 'xd' 'cmd-xd' 'xe' 'cmd-xe' ] keyhint update keyhint 'normal' 'a' assert keyhint text expected text 'a' 'yellow' 'a' 'cmd-aa' 'a' 'yellow' 'b' 'cmd-ab' 'a' 'yellow' 'ba' 'cmd-aba' 'a' 'yellow' 'bb' 'cmd-abb'
def set Unjellyable Factory For Class classname copy Factory global unjellyable Factory Registryclassname maybe Class classname unjellyable Factory Registry[classname] copy Factoryglobal Security allow Types classname
def set Unjellyable Factory For Class classname copy Factory global unjellyable Factory Registryclassname maybe Class classname unjellyable Factory Registry[classname] copy Factoryglobal Security allow Types classname
def convert minutes seconds timeout in seconds False return timeout if in seconds else timeout * 60
def rot axis 3 theta ct cos theta st sin theta lil ct st 0 - st ct 0 0 0 1 return Matrix lil
def Check Status status if status code search service pb Search Service Error OK if status code in ERROR MAP raise ERROR MAP[status code ] status error detail else raise Internal Error status error detail
def Check Status status if status code search service pb Search Service Error OK if status code in ERROR MAP raise ERROR MAP[status code ] status error detail else raise Internal Error status error detail
def get source sum source hash file path saltenv ret dict schemes u'salt' u'http' u'https' u'ftp' u'swift' u's 3 ' u'file' invalid hash msg u" Sourcehash'{ 0 }'formatisinvalid Itmustbeintheformat<hashtype> <hash>" format source hash source hash str source hash source hash scheme urlparse source hash schemeif source hash scheme in schemes cached hash file salt [u'cp cache file'] source hash saltenv if not cached hash file raise Command Execution Error u' Sourcehashfile{ 0 }notfound' format source hash ret salt [u'file extract hash'] cached hash file u'' file path if ret is None raise Salt Invocation Error invalid hash msg else items source hash split u' ' 1 if len items 2 invalid hash msg u'{ 0 } oritmustbeasupportedprotocol {1 }' format invalid hash msg u' ' join schemes raise Salt Invocation Error invalid hash msg ret[u'hash type'] ret[u'hsum'] [item strip lower for item in items]return ret
def redefined by decorator node if node decorators for decorator in node decorators nodes if isinstance decorator astroid Getattr and getattr decorator expr 'name' None node name return Truereturn False
def rewrite exception data exc data data get 'sentry interfaces Exception' if not exc data return Falserv Falsefor exc in exc data['values'] for processor in six itervalues error processors try if processor try process exc rv Truebreakexcept Exception as e logger error ' Failedtorunprocessor"%s" %s' processor vendor e exc info True return rv
def valid method call check resources resource method for name in resource keys valid method call check resource name method
def is callable obj if not callable obj raise Value Error ' Valuemustbeacallable' return True
def compute mne loc coil loc loc np zeros 12 if np linalg norm coil loc['inner coil'] 0 and np linalg norm coil loc['outer coil'] 0 return locloc[ 0 3] coil loc['inner coil'] / 39 370078 z axis coil loc['outer coil'] - coil loc['inner coil'] R rotation 3 d align z axis z axis loc[ 3 13 ] R T reshape 9 return loc
def event return events with get serv events commit True as cur for event in events tag event get 'tag' '' data event get 'data' '' sql 'INSERTINTO`salt events` `tag` `data` `master id` \n VALUES %s %s %s 'cur execute sql tag json dumps data opts ['id']
def parse with bindops sentence grammar None trace 0 if not grammar grammar 'grammars/book grammars/storage fcfg'parser load parser grammar trace trace chart class Instantiate Vars Chart tokens sentence split return list parser parse tokens
def reset config app user factories Sysadmin env {'REMOTE USER' user['name'] encode 'ascii' }app post url url for controller 'admin' action 'reset config' extra environ env
def task id eq task id body message return body[u'id'] task id
def Enabled return not Global Process Is Default
def Enabled return not Global Process Is Default
def make camera cam type *args **kwargs cam types { None Base Camera}for cam Type in Base Camera Pan Zoom Camera Perspective Camera Turntable Camera Fly Camera Arcball Camera cam types[cam Type name [ -6 ] lower ] cam Typetry return cam types[cam type] *args **kwargs except Key Error raise Key Error ' Unknowncameratype"%s" Optionsare %s' % cam type cam types keys
def make camera cam type *args **kwargs cam types { None Base Camera}for cam Type in Base Camera Pan Zoom Camera Perspective Camera Turntable Camera Fly Camera Arcball Camera cam types[cam Type name [ -6 ] lower ] cam Typetry return cam types[cam type] *args **kwargs except Key Error raise Key Error ' Unknowncameratype"%s" Optionsare %s' % cam type cam types keys
def make camera cam type *args **kwargs cam types { None Base Camera}for cam Type in Base Camera Pan Zoom Camera Perspective Camera Turntable Camera Fly Camera Arcball Camera cam types[cam Type name [ -6 ] lower ] cam Typetry return cam types[cam type] *args **kwargs except Key Error raise Key Error ' Unknowncameratype"%s" Optionsare %s' % cam type cam types keys
@pytest fixturedef import fake monkeypatch fake Import Fake monkeypatch setattr 'builtins import ' fake fake import monkeypatch setattr 'qutebrowser utils version importlib import module' fake fake importlib import return fake
def shared dataset data xy borrow True data x data y data xyshared x theano shared np asarray data x dtype theano config float X borrow borrow shared y theano shared np asarray data y dtype theano config float X borrow borrow return shared x T cast shared y 'int 32 '
def shared dataset data xy borrow True data x data y data xyshared x theano shared np asarray data x dtype theano config float X borrow borrow shared y theano shared np asarray data y dtype theano config float X borrow borrow return shared x T cast shared y 'int 32 '
def shared dataset data xy borrow True data x data y data xyshared x theano shared np asarray data x dtype theano config float X borrow borrow shared y theano shared np asarray data y dtype theano config float X borrow borrow return shared x T cast shared y 'int 32 '
def shared dataset data xy borrow True data x data y data xyshared x theano shared np asarray data x dtype theano config float X borrow borrow shared y theano shared np asarray data y dtype theano config float X borrow borrow return shared x T cast shared y 'int 32 '
def read handle record Nonetry line next handle record Record read names record line line next handle read threshold record line line next handle read lengths record line line next handle read profilewidth record line line next handle read scores record line except Stop Iteration if not record raise Value Error ' Norecordfoundinhandle' else raise Value Error ' Unexpectedendofstream ' for line in handle if not line strip continue read query alignment record line try line next handle read positive alignment record line line next handle read hit alignment record line except Stop Iteration raise Value Error ' Unexpectedendofstream ' return record
def read handle record Nonetry line next handle record Record read names record line line next handle read threshold record line line next handle read lengths record line line next handle read profilewidth record line line next handle read scores record line except Stop Iteration if not record raise Value Error ' Norecordfoundinhandle' else raise Value Error ' Unexpectedendofstream ' for line in handle if not line strip continue read query alignment record line try line next handle read positive alignment record line line next handle read hit alignment record line except Stop Iteration raise Value Error ' Unexpectedendofstream ' return record
def gemset create ruby gemset runas None return rvm do ruby ['rvm' 'gemset' 'create' gemset] runas runas
def setup platform hass config add devices discovery info None devs []for device in INSTEON devices if device Device Category ' Switched Lighting Control' devs append Insteon Toggle Device device if device Device Category ' Dimmable Lighting Control' devs append Insteon Toggle Device device add devices devs
def is binary value binary chars None if binary chars is None binary chars BINARY CHAR Sfor binary char in binary chars if binary char in value return Truereturn False
def Property Type Name value if value class in PROPERTY MEANINGS meaning PROPERTY MEANINGS[value class ]name entity pb Property Meaning NAMES[meaning]return name lower replace ' ' ' ' elif isinstance value basestring return 'string'elif isinstance value users User return 'user'elif isinstance value long return 'int'elif value is None return 'null'else return typename value lower
def get user username None if username user models User objects get login username else user models User current user return user
def edns to text flags return to text flags edns by value edns flags order
def a product x y z 1 return x * y * z
def edxnotes cls if 'edxnotes' in sys modules from edxnotes decorators import edxnotes as notesreturn notes cls else return cls
def edxnotes cls if 'edxnotes' in sys modules from edxnotes decorators import edxnotes as notesreturn notes cls else return cls
def Collect Object I Ds ids obj if id obj in ids returnids add id obj if isinstance obj list tuple set frozenset for e in obj Collect Object I Ds ids e elif isinstance obj dict for k v in obj items Collect Object I Ds ids k Collect Object I Ds ids v return len ids
def Collect Object I Ds ids obj if id obj in ids returnids add id obj if isinstance obj list tuple set frozenset for e in obj Collect Object I Ds ids e elif isinstance obj dict for k v in obj items Collect Object I Ds ids k Collect Object I Ds ids v return len ids
def compute n patches i h i w p h p w max patches None n h i h - p h + 1 n w i w - p w + 1 all patches n h * n w if max patches if isinstance max patches numbers Integral and max patches < all patches return max patcheselif isinstance max patches numbers Real and 0 < max patches < 1 return int max patches * all patches else raise Value Error ' Invalidvalueformax patches %r' % max patches else return all patches
def get stay open return stay open
def s3 role required T current Tgtable current auth settings table grouprepresent S3 Represent lookup 'auth group' fields ['role'] f S3 Reusable Field 'role required' gtable sortby 'role' requires IS EMPTY OR IS ONE OF current db 'auth group id' represent zero T ' Public' represent represent label T ' Role Required' comment DIV class 'tooltip' title '%s %s' % T ' Role Required' T ' Ifthisrecordshouldberestrictedthenselectwhichroleisrequiredtoaccesstherecordhere ' ondelete 'RESTRICT' return f
def get program types user None catalog integration Catalog Integration current if catalog integration enabled user get service user user catalog integration service username if not user return []api create catalog api client user catalog integration cache key '{base} program types' format base catalog integration CACHE KEY return get edx api data catalog integration user 'program types' cache key cache key if catalog integration is cache enabled else None api api else return []
def Throttle Rate throttle dict max count time period now Get Current Timestamp if not throttle dict or now > throttle dict['start time'] + time period throttle dict {'start time' now 'count' 0}else throttle dict {'start time' throttle dict['start time'] 'count' throttle dict['count']}if throttle dict['count'] > max count return throttle dict True throttle dict['count'] + 1return throttle dict False
@pytest mark parametrize 'env id' test envs def test smoke env id gym undo logger setup logging get Logger set Level logging INFO env gym make env id env wrappers Unvectorize env if os environ get 'FORCE LATEST UNIVERSE DOCKER RUNTIMES' configure with latest docker runtime tag env else env configure remotes 1 env reset rollout env timestep limit 60 * 30
@pytest mark parametrize 'env id' test envs def test smoke env id gym undo logger setup logging get Logger set Level logging INFO env gym make env id env wrappers Unvectorize env if os environ get 'FORCE LATEST UNIVERSE DOCKER RUNTIMES' configure with latest docker runtime tag env else env configure remotes 1 env reset rollout env timestep limit 60 * 30
def test oldclass newclass construction class nc object passclass oc passnew Type type oc new type oc 'foo' nc oc {} Are Equal type new Type type
def detect django path module path result []for parent in traverse parents module path with common ignored IO Error with open parent + os path sep + 'manage py' debug dbg ' Founddjangopath %s' module path result append parent return result
def badges enabled return settings FEATURES get 'ENABLE OPENBADGES' False
@core helperdef resource view is iframed resource view view plugin datapreview get view plugin resource view['view type'] return view plugin info get 'iframed' True
@core helperdef resource view is iframed resource view view plugin datapreview get view plugin resource view['view type'] return view plugin info get 'iframed' True
def parse Bool Value value fail on errors True preserve none False if not isinstance value string type if preserve none and value is None return valuereturn bool value elif preserve none and value lower u'none' return Noneelif value lower in u'true' u'yes' u'y' u'on' u' 1 ' return Trueelif value lower in u'false' u'no' u'n' u'off' u' 0 ' u'none' return Falseelif fail on errors raise Value Error u' Cannotparseboolvalue %r' % value
def setup platform hass config add devices discovery info None data Sense Hat Data dev []for variable in config[CONF DISPLAY OPTIONS] dev append Sense Hat Sensor data variable add devices dev
def resize quota delta context new flavor old flavor sense compare def quota delta resource return sense * new flavor[resource] - old flavor[resource] deltas {}if compare * quota delta 'vcpus' > 0 deltas['cores'] quota delta 'vcpus' if compare * quota delta 'memory mb' > 0 deltas['ram'] quota delta 'memory mb' return deltas
def df 2 idf docfreq totaldocs log base 2 0 add 0 0 return add + math log 1 0 * totaldocs / docfreq log base
def df 2 idf docfreq totaldocs log base 2 0 add 0 0 return add + math log 1 0 * totaldocs / docfreq log base
def mapping get index doc type hosts None profile None es get instance hosts profile try ret es indices get mapping index index doc type doc type return retexcept elasticsearch exceptions Not Found Error return Nonereturn None
def sorting score start advertised start announcement announcement start now sorting dates start advertised start announcement scale 300 0if announcement days now - announcement daysscore - exp - days / scale else days now - start daysscore exp days / scale return score
def sorting score start advertised start announcement announcement start now sorting dates start advertised start announcement scale 300 0if announcement days now - announcement daysscore - exp - days / scale else days now - start daysscore exp days / scale return score
def apply Filter normalized uri xrd data flt None flt mk Filter flt et parse XRDS xrd data endpoints []for service element in iter Services et endpoints extend flt get Service Endpoints normalized uri service element return endpoints
def create digest traverser cloudtrail client s3 client provider trail arn trail source region None on invalid None on gap None on missing None bucket None prefix None assert cloudtrail arn is valid trail arn account id get account id from arn trail arn if bucket is None trail info get trail by arn cloudtrail client trail arn LOG debug ' Loadedtrailinfo %s' trail info bucket trail info['S 3 Bucket Name']prefix trail info get 'S 3 Key Prefix' None trail region trail arn split ' ' [3 ]trail name trail arn split '/' [ -1 ]digest provider Digest Provider account id account id trail name trail name s3 client provider s3 client provider trail source region trail source region trail home region trail region return Digest Traverser digest provider digest provider starting bucket bucket starting prefix prefix on invalid on invalid on gap on gap on missing on missing public key provider Public Key Provider cloudtrail client
def verify query segregation query auth project None auth project auth project or rbac get limited to project pecan request headers if not auth project returnfor q in query if q field in 'project' 'project id' and auth project q value raise base Project Not Authorized q value
def test b wien from import b wienfrom import units as ut 5778 * u K w b wien / t to u nm assert round w value 502
def test b wien from import b wienfrom import units as ut 5778 * u K w b wien / t to u nm assert round w value 502
def Parse Key Filtered Query filters orders remaining filters []key range Value Range key prop datastore types KEY SPECIAL PROPERT Yfor f in filters op f op if not f property size 1 and f property 0 name key prop and not op datastore pb Query Filter IN or op datastore pb Query Filter EXISTS remaining filters append f continueval f property 0 value Check val has referencevalue ' key kindmustbecomparedtoakey' limit datastore types From Reference Property val key range Update op limit remaining orders []for o in orders if not o direction datastore pb Query Order ASCENDING and o property datastore types KEY SPECIAL PROPERTY remaining orders append o else break Check not remaining filters ' Onlycomparisonfilterson' + key prop + 'supported' Check not remaining orders ' Onlyascendingorderon' + key prop + 'supported' return key range
def Parse Key Filtered Query filters orders remaining filters []key range Value Range key prop datastore types KEY SPECIAL PROPERT Yfor f in filters op f op if not f property size 1 and f property 0 name key prop and not op datastore pb Query Filter IN or op datastore pb Query Filter EXISTS remaining filters append f continueval f property 0 value Check val has referencevalue ' key kindmustbecomparedtoakey' limit datastore types From Reference Property val key range Update op limit remaining orders []for o in orders if not o direction datastore pb Query Order ASCENDING and o property datastore types KEY SPECIAL PROPERTY remaining orders append o else break Check not remaining filters ' Onlycomparisonfilterson' + key prop + 'supported' Check not remaining orders ' Onlyascendingorderon' + key prop + 'supported' return key range
def get object info env app path None swift source None version account container obj split path path or env['PATH INFO'] 4 4 True info get object info app env account container obj swift source swift source if info info deepcopy info else info headers to object info {} 0 for field in 'length' if info get field is None info[field] 0else info[field] int info[field] return info
def modelform factory model form Model Form fields None exclude None formfield callback None widgets None attrs {u'model' model}if fields is not None attrs[u'fields'] fieldsif exclude is not None attrs[u'exclude'] excludeif widgets is not None attrs[u'widgets'] widgetsparent object if hasattr form u' Meta' parent form Meta object Meta type str u' Meta' parent attrs class name model name + str u' Form' form class attrs {u' Meta' Meta u'formfield callback' formfield callback}return type form class name form form class attrs
def modelform factory model form Model Form fields None exclude None formfield callback None widgets None attrs {u'model' model}if fields is not None attrs[u'fields'] fieldsif exclude is not None attrs[u'exclude'] excludeif widgets is not None attrs[u'widgets'] widgetsparent object if hasattr form u' Meta' parent form Meta object Meta type str u' Meta' parent attrs class name model name + str u' Form' form class attrs {u' Meta' Meta u'formfield callback' formfield callback}return type form class name form form class attrs
def Record name object import gencacheobject gencache Ensure Dispatch object module sys modules[object class module ]package gencache Get Module For Typelib module CLSID module LCID module Major Version module Minor Version try struct guid package Record Map[name]except Key Error raise Value Error " Thestructure'%s'isnotdefinedinmodule'%s'" % name package return pythoncom Get Record From Guids module CLSID module Major Version module Minor Version module LCID struct guid
def test main test function names gl test constant names gl
def text dialog text title parent qtutils active window label Qt Widgets Q Label parent label set Font qtutils diff font label set Text text label set Text Interaction Flags Qt No Text Interaction widget Qt Widgets Q Dialog parent widget set Window Modality Qt Window Modal widget set Window Title title layout qtutils hbox defs margin defs spacing label widget set Layout layout qtutils add action widget N u' Close' widget accept Qt Key Question Qt Key Enter Qt Key Return widget show return widget
def text dialog text title parent qtutils active window label Qt Widgets Q Label parent label set Font qtutils diff font label set Text text label set Text Interaction Flags Qt No Text Interaction widget Qt Widgets Q Dialog parent widget set Window Modality Qt Window Modal widget set Window Title title layout qtutils hbox defs margin defs spacing label widget set Layout layout qtutils add action widget N u' Close' widget accept Qt Key Question Qt Key Enter Qt Key Return widget show return widget
def addbroadcast x *axes rval Rebroadcast *[ axis True for axis in axes] x return theano tensor opt apply rebroadcast opt rval
def get sorcery ver module cmd sorcery '%s--version' % SORCERY['sorcery'] rc stdout stderr module run command cmd sorcery if rc 0 or not stdout module fail json msg 'unabletoget Sorceryversion' return stdout strip
def split s keep False lexer Shell Lexer s lexer keep keeptokens list lexer if not tokens return []out []spaces ''log shlexer vdebug '{ r}->{ r}' format s tokens for t in tokens if t isspace spaces + telse out append spaces + t spaces ''if spaces out append spaces return out
def loop active timeout None use poll False err Count 0if timeout is None timeout Utils DEFAULT SLEEP TIM Epoll asyncore pollif use poll and asyncore poll 2 and hasattr asyncore select 'poll' log Sys debug ' Serverlistener select usespoll' timeout float timeout / 1000 poll asyncore poll 2 while active try poll timeout if err Count err Count - 1except Exception as e if not active breakerr Count + 1if err Count < 20 if e args[ 0 ] in errno ENOTCONN errno EBADF log Sys info ' Serverconnectionwasclosed %s' str e else log Sys error ' Serverconnectionwasclosed %s' str e elif err Count 20 log Sys info ' Toomanyerrors-stoploggingconnectionerrors' log Sys exception e
def loop active timeout None use poll False err Count 0if timeout is None timeout Utils DEFAULT SLEEP TIM Epoll asyncore pollif use poll and asyncore poll 2 and hasattr asyncore select 'poll' log Sys debug ' Serverlistener select usespoll' timeout float timeout / 1000 poll asyncore poll 2 while active try poll timeout if err Count err Count - 1except Exception as e if not active breakerr Count + 1if err Count < 20 if e args[ 0 ] in errno ENOTCONN errno EBADF log Sys info ' Serverconnectionwasclosed %s' str e else log Sys error ' Serverconnectionwasclosed %s' str e elif err Count 20 log Sys info ' Toomanyerrors-stoploggingconnectionerrors' log Sys exception e
def get aliases context data dict res id data dict['resource id']alias sql sqlalchemy text u'SELEC Tname FROM" table metadata"WHER Ealias of id' results context['connection'] execute alias sql id res id fetchall return [x[ 0 ] for x in results]
def egquery **keywds cgi 'https //eutils ncbi nlm nih gov/entrez/eutils/egquery fcgi'variables {}variables update keywds return open cgi variables
def egquery **keywds cgi 'https //eutils ncbi nlm nih gov/entrez/eutils/egquery fcgi'variables {}variables update keywds return open cgi variables
@open file 1 mode 'wt' def write sparse 6 G path nodes None header True path write generate sparse 6 G nodes nodes header header path write '\n'
def handle nan value if isinstance value float if value float 'inf' return '<inf>'if value float '-inf' return '<-inf>'if value value return '<nan>'return value
def get chance level scorer y train if scorer name 'accuracy score' chance np max [np mean y train c for c in np unique y train ] elif scorer name 'roc auc score' chance 0 5else chance np nanwarn ' Cannotfindchancelevelfrom%s specifychancelevel' % scorer name return chance
def secure cookie return request environ['wsgi url scheme'] 'https'
def secure cookie return request environ['wsgi url scheme'] 'https'
def json to dict x if x find 'callback' > -1 pos lb x find '{' pos rb x find '}' x x[pos lb pos rb + 1 ]try if type x str x x decode 'utf- 8 ' return json loads x encoding 'utf- 8 ' except return x
def json to dict x if x find 'callback' > -1 pos lb x find '{' pos rb x find '}' x x[pos lb pos rb + 1 ]try if type x str x x decode 'utf- 8 ' return json loads x encoding 'utf- 8 ' except return x
def json to dict x if x find 'callback' > -1 pos lb x find '{' pos rb x find '}' x x[pos lb pos rb + 1 ]try if type x str x x decode 'utf- 8 ' return json loads x encoding 'utf- 8 ' except return x
def json to dict x if x find 'callback' > -1 pos lb x find '{' pos rb x find '}' x x[pos lb pos rb + 1 ]try if type x str x x decode 'utf- 8 ' return json loads x encoding 'utf- 8 ' except return x
def color style if not supports color style no style else DJANGO COLORS os environ get 'DJANGO COLORS' '' color settings termcolors parse color setting DJANGO COLORS if color settings class dummy passstyle dummy for role in termcolors PALETTES[termcolors NOCOLOR PALETTE] format color settings get role {} setattr style role termcolors make style **format style ERROR OUTPUT style ERRO Relse style no style return style
def error msg text msg colorize ' Error ' + str text 'red'
def reset notifier global notifier notifier None
def provider name def wrapper cls def wrapped init def wrapped init self *args **kwargs ' Initializethewrappedobjectandaddittotheregistry 'init self *args **kwargs REGISTRY[name] selfreturn wrapped init cls init wrapped cls init return clsreturn wrapper
def print tag tag decode outstream sys stdout outstream write ' Tagger ' + decode tag tagger + '\n' outstream write ' Date ' + decode tag tag time + '\n' outstream write '\n' outstream write decode tag message + '\n' outstream write '\n'
def waic trace model None n eff False pointwise False model modelcontext model log py log post trace trace model lppd i logsumexp log py axis 0 b 1 0 / log py shape[ 0 ] vars lpd np var log py axis 0 if np any vars lpd > 0 4 warnings warn ' Foroneormoresamplestheposteriorvarianceofthe\nlogpredictivedensitiesexceeds 0 4 Thiscouldbeindicationof\n WAI Cstartingtofailseehttp //arxiv org/abs/ 1507 04544 fordetails\n' waic i -2 * lppd i - vars lpd waic se np sqrt len waic i * np var waic i waic np sum waic i p waic np sum vars lpd if n eff return waic waic se p waic elif pointwise return waic waic se waic i p waic else return waic waic se
def get meta module cf container src dest c get container module cf container objs Noneif src and dest module fail json msg ' Error ambiguousinstructions filestobedeletedhavebeenspecifiedonbothsrcanddestargs' elif dest objs destelse objs srcif objs objs objs split ' ' objs map str strip objs else objs c get object names results dict for obj in objs try meta c get object obj get metadata except Exception as e module fail json msg e message else results[obj] dict for k v in meta items meta key k split META PREFIX [ -1 ]results[obj][meta key] vEXIT DICT['container'] c nameif results EXIT DICT['meta results'] results EXIT DICT['success'] Truemodule exit json **EXIT DICT
def Open Document Chart doc Open Document 'application/vnd oasis opendocument chart' doc chart Chart doc body add Element doc chart return doc
def test basic call on method registering without decorator coroutine class API object def init self hug call self hello world method @asyncio coroutinedef hello world method self return ' Hello World 'api instance API assert loop run until complete api instance hello world method ' Hello World ' assert hug test get api '/hello world method' data ' Hello World '
def get array section has problem course id course modulestore get course course id depth 4 b section has problem [ False] * len course get children i 0for section in course get children for subsection in section get children for unit in subsection get children for child in unit get children if child location category 'problem' b section has problem[i] Truebreakif b section has problem[i] breakif b section has problem[i] breaki + 1return b section has problem
def set output volume volume cmd 'osascript-e"setvolumeoutputvolume{ 0 }"' format volume call salt ['cmd run all'] cmd output loglevel 'debug' python shell False check cmd call return get output volume
def usergroup create name **connection args conn args login **connection args try if conn args method 'usergroup create'params {'name' name}params params extend params **connection args ret query method params conn args['url'] conn args['auth'] return ret['result']['usrgrpids']else raise Key Errorexcept Key Error return ret
def virtual if 'rbac profile list' in salt and 'user list users' in salt and grains ['kernel'] ' Sun OS' return Trueelse return False '{ 0 }statemodulecanonlybeloadedon Solaris' format virtualname
def clear actions name location '\\' if name not in list tasks location return '{ 0 }notfoundin{ 1 }' format name location pythoncom Co Initialize task service win 32 com client Dispatch ' Schedule Service' task service Connect task folder task service Get Folder location task definition task folder Get Task name Definitionactions task definition Actionsactions Clear return save task definition name name task folder task folder task definition task definition user name task definition Principal User ID password None logon type task definition Principal Logon Type
def test shared cudandarray a cuda shared constructor cuda Cuda Ndarray zeros 2 3 assert isinstance a type tcn Cuda Ndarray Type
def test preserve refs text u'laphilologiem&#x 00 e 8 neaupire'assert strip tags text u'laphilologiem\xe 8 neaupire' text u'laphilologiem&# 232 neaupire'assert strip tags text u'laphilologiem\xe 8 neaupire' text u'veer&amp wander'assert strip tags text 'veer&wander'
def binary partitions n from math import ceil logpow int 2 ** ceil log n 2 sum 0partition []while pow if sum + pow < n partition append pow sum + powpow >> 1last num len partition - 1 - n & 1 while last num > 0 yield partition if partition[last num] 2 partition[last num] 1partition append 1 last num - 1continuepartition append 1 partition[last num] >> 1x partition[ last num + 1 ] partition[last num]last num + 1while x > 1 if x < len partition - last num - 1 del partition[ - x + 1 ]last num + 1partition[last num] xelse x >> 1 yield [1 ] * n
def we Are Frozen return hasattr sys 'frozen'
def results extractor train obj return DD
def PPI Guess Payload Class p **kargs if len p > 4 t pfh len struct unpack '<HH' p[ 4] cls get PPI Type t 'default' pfh len + 4out cls p[ pfh len] **kargs if out payload out payload conf raw layer out payload load if len p > pfh len out payload payload conf padding layer p[pfh len ] elif len p > pfh len out payload conf padding layer p[pfh len ] else out conf raw layer p **kargs return out
def PPI Guess Payload Class p **kargs if len p > 4 t pfh len struct unpack '<HH' p[ 4] cls get PPI Type t 'default' pfh len + 4out cls p[ pfh len] **kargs if out payload out payload conf raw layer out payload load if len p > pfh len out payload payload conf padding layer p[pfh len ] elif len p > pfh len out payload conf padding layer p[pfh len ] else out conf raw layer p **kargs return out
def test album info *args **kwargs track info Track Info title u'newtitle' track id u'trackid' index 0 album info Album Info artist u'artist' album u'album' tracks [track info] album id u'albumid' artist id u'artistid' return iter [album info]
def normalizeargs sequence output None if output is None output []cls sequence class if Interface Class in cls mro or Implements in cls mro output append sequence else for v in sequence normalizeargs v output return output
def normalizeargs sequence output None if output is None output []cls sequence class if Interface Class in cls mro or Implements in cls mro output append sequence else for v in sequence normalizeargs v output return output
def delete name force False region None key None keyid None profile None conn get conn region region key key keyid keyid profile profile try conn delete auto scaling group name force msg ' Deletedautoscalegroup{ 0 } ' format name log info msg return Trueexcept boto exception Boto Server Error as e log debug e msg ' Failedtodeleteautoscalegroup{ 0 }' format name log error msg return False
def edit sheet open with editor path sheet
def fmt highlights raw value value unit if unit is None return valuehighlights highlight string raw value unit start search 0for highlight in highlights htext escape force text highlight[ 2 ] find highlight value find htext start search if find highlight > 0 newpart HL CHECK format htext next part value[ find highlight + len htext ]value value[ find highlight] + newpart + next part start search find highlight + len newpart return value
def find missing input list total len input list * len input list + 1 / 2 summed 0for element in input list summed + elementmissing total - summed return missing
def divmod by constant builder val divisor assert divisor > 0 divisor val type divisor one val type 1 quot alloca once builder val type with builder if else is neg int builder val as if neg if pos with if pos quot val builder sdiv val divisor builder store quot val quot with if neg val plus one builder add val one quot val builder sdiv val plus one divisor builder store builder sub quot val one quot quot val builder load quot rem val builder sub val builder mul quot val divisor return quot val rem val
def attach issue custom attributes queryset as field 'issue custom attributes attr' model queryset modelsql '\n SELEC Tjson agg \nrow to json custom attributes issuecustomattribute \n ORDERB Ycustom attributes issuecustomattribute order\n \n FRO Mcustom attributes issuecustomattribute\n WHER Ecustom attributes issuecustomattribute project id {tbl} id\n'sql sql format tbl model meta db table queryset queryset extra select {as field sql} return queryset
def bellman ford predecessor and distance G source target None cutoff None weight 'weight' if source not in G raise nx Node Not Found ' Node%sisnotfoundinthegraph' % source weight weight function G weight if any weight u v d < 0 for u v d in G selfloop edges data True raise nx Network X Unbounded ' Negativecostcycledetected ' dist {source 0}pred {source [ None]}if len G 1 return pred dist weight weight function G weight return pred bellman ford G [source] weight pred pred dist dist cutoff cutoff target target
def bellman ford predecessor and distance G source target None cutoff None weight 'weight' if source not in G raise nx Node Not Found ' Node%sisnotfoundinthegraph' % source weight weight function G weight if any weight u v d < 0 for u v d in G selfloop edges data True raise nx Network X Unbounded ' Negativecostcycledetected ' dist {source 0}pred {source [ None]}if len G 1 return pred dist weight weight function G weight return pred bellman ford G [source] weight pred pred dist dist cutoff cutoff target target
@command 'save' def save last if g last opened open save view 'save' g last opened else saveas ''if g model saveas g model[ 0 ] title[ 18 ] strip saveas re sub '[^-\\w]' '-' saveas re UNICODE post 0while g userpl get saveas post + 1saveas g model[ 0 ] title[ 18 ] strip + '-' + str post saveas saveas lstrip '0123456789 ' open save view 'save' saveas
@pytest fixturedef admin from django contrib auth import get user modelreturn get user model objects get username 'admin'
def libvlc video get teletext p mi f Cfunctions get 'libvlc video get teletext' None or Cfunction 'libvlc video get teletext' 1 None ctypes c int Media Player return f p mi
def iter Modules return the System Path iter Modules
def iter Modules return the System Path iter Modules
def test resize qtbot label Text Base qtbot add widget label long string ' Helloworld ' * 20 label set Text long string with qtbot wait Exposed label label show text 1 label elided textlabel resize 20 50 text 2 label elided textassert text 1 text 2
def setup platform hass config add devices discovery info None name config get CONF NAME plex user config get CONF USERNAME plex password config get CONF PASSWORD plex server config get CONF SERVER plex host config get CONF HOST plex port config get CONF PORT plex url 'http //{} {}' format plex host plex port add devices [ Plex Sensor name plex url plex user plex password plex server ]
def mk Filter parts if parts is None parts [ Basic Service Endpoint]try parts list parts except Type Error return mk Compound Filter [parts] else return mk Compound Filter parts
def resolve obj path if path for name in path split ' ' obj getattr obj name None return obj
def dlimport workdir basedir return tempfile mkdtemp dir basedir
def get Interior Overhang Radians element Node return math radians get Interior Overhang Angle element Node
def get First Translator File Name Unmodified file Name if file Name '' return file Nameunmodified get GNU Translator Files Unmodified if len unmodified 0 print ' Therearenounmodifiedgcodefilesinthisfolder 'return ''return unmodified[ 0 ]
def get First Translator File Name Unmodified file Name if file Name '' return file Nameunmodified get GNU Translator Files Unmodified if len unmodified 0 print ' Therearenounmodifiedgcodefilesinthisfolder 'return ''return unmodified[ 0 ]
def hold Acknowledge a Tp Pd pd 3 b Message Type mes Type 25 packet a / b return packet
@pytest mark parametrize 'parallel' [ True False] def test rstrip whitespace parallel read basic text '1 2 DCTB 3\n A DCTB B C DCTB DCTB \n DCTB a b c\n'table read basic text delimiter ' ' parallel parallel expected Table [['A' 'a'] ['B' 'b'] ['C' 'c']] names '1 ' '2 ' '3 ' assert table equal table expected
def filter services services filtered services services[ ]for service name in services mod import 'services ' + service name globals globals locals locals fromlist [' Service'] level -1 service mod Serviceif service required features is not None and bs 4 builder registry lookup *service required features is None logger warning u' Service%snotavailable noneofavailablefeaturescouldbeused Oneof%rrequired' % service name service required features filtered services remove service name return filtered services
@open file 0 mode 'rb' def read gpickle path return pickle load path
def functest builder method func def do test self method self func return do test
def makescript filename compiler dirname os path split filename [0 ]if not os access dirname os X OK os mkdir dirname 493 fp open filename 'w' fp write SCRIPT % compiler fp close os chmod filename 493 print 'fixapplepython 23 Created' filename
def get external workers worker worker that blocked task collections defaultdict set get work response history worker get work response historyfor get work response in get work response history if get work response['task id'] is None for running task in get work response['running tasks'] other worker id running task['worker']other task id running task['task id']other task worker scheduled tasks get other task id if other worker id worker id or not other task continueworker that blocked task[other worker id] add other task return worker that blocked task
@pytest fixturedef it tutorial po po directory settings italian tutorial return require store italian tutorial settings POOTLE TRANSLATION DIRECTORY 'tutorial po'
def Find Register Python Exe exe Alias search Paths actual File Names None import regutil string fname ok Find Python Exe exe Alias actual File Names search Paths if not ok regutil Register Python Exe fname exe Alias return fname
def db init db conn name global db readyif db ready count conn name < 1 db execute 'createtableifnotexistsseen user name time quote chan host primarykey name chan ' db commit db ready append conn name
def db init db conn name global db readyif db ready count conn name < 1 db execute 'createtableifnotexistsseen user name time quote chan host primarykey name chan ' db commit db ready append conn name
def read float 32 f return np float 32 struct unpack '>f' f read 4 [0 ]
@main command @click option '-b' '--bundle' default 'quantopian-quandl' metavar 'BUNDLE-NAME' show default True help ' Thedatabundletoingest ' @click option '--assets-version' type int multiple True help ' Versionoftheassetsdbtowhichtodowngrade ' @click option '--show-progress/--no-show-progress' default True help ' Printprogressinformationtotheterminal ' def ingest bundle assets version show progress bundles module ingest bundle os environ pd Timestamp utcnow assets version show progress
def generate settings dev False context {'secret key' generate secret key 'debug flag' dev 'mail backend' 'console' if dev else 'smtp' }py load config template DEFAULT SETTINGS OVERRIDE 'default' % context yaml load config template DEFAULT SETTINGS CONF 'default' % context return py yaml
def create gs thumbnail layer overwrite False params {'layers' layer typename encode 'utf- 8 ' 'format' 'image/png 8 ' 'width' 200 'height' 150 'TIME' '- 99999999999 - 01 - 01 T 00 00 00 0Z/ 99999999999 - 01 - 01 T 00 00 00 0Z'}if None not in layer bbox params['bbox'] layer bbox stringp '&' join '%s %s' % item for item in params items thumbnail remote url ogc server settings PUBLIC LOCATION + 'wms/reflect?' + p thumbnail create url ogc server settings LOCATION + 'wms/reflect?' + p create thumbnail layer thumbnail remote url thumbnail create url ogc client http client overwrite overwrite
def find Biggest root if root right is None return rootelse return find Biggest root right
def compile fnclex context codegen context codegen library codegen create library 'kb 982107 ' ir mod '\ndefinevoid@fnclex {\ncallvoidasmsideeffect"fnclex" "" \nretvoid\n}\n'll initialize native asmparser library add llvm module ll parse assembly ir mod library finalize return library
def single spectrum helper x mode Fs None window None pad to None sides None if mode is None or mode u'psd' or mode u'default' raise Value Error u' single spectrum helperdoesnotworkwith%smode' % mode if pad to is None pad to len x spec freqs spectral helper x x y None NFFT len x Fs Fs detrend func detrend none window window noverlap 0 pad to pad to sides sides scale by freq False mode mode if mode u'complex' spec spec realif spec ndim 2 and spec shape[ 1 ] 1 spec spec[ 0]return spec freqs
def babel locale locale return locale replace '-' ' '
def django to webob request django request return Django Webob Request django request
def django to webob request django request return Django Webob Request django request
@pytest fixturedef fake keyconfig bindings dict BINDINGS fake keyconfig mock Mock spec ['get bindings for'] fake keyconfig get bindings for side effect lambda s bindings[s] objreg register 'key-config' fake keyconfig yield bindings objreg delete 'key-config'
def end recording status firepython set extension data None if firepython set extension data is not None warnings warn ' Firepythonisnolongersupported' rec recorder proxy get for current request recorder proxy clear for current request if config DEBUG logging debug ' Clearedrecorder' if rec is not None try rec record http status status rec save finally memcache delete lock key namespace config KEY NAMESPACE
def end recording status firepython set extension data None if firepython set extension data is not None warnings warn ' Firepythonisnolongersupported' rec recorder proxy get for current request recorder proxy clear for current request if config DEBUG logging debug ' Clearedrecorder' if rec is not None try rec record http status status rec save finally memcache delete lock key namespace config KEY NAMESPACE
def end recording status firepython set extension data None if firepython set extension data is not None warnings warn ' Firepythonisnolongersupported' rec recorder proxy get for current request recorder proxy clear for current request if config DEBUG logging debug ' Clearedrecorder' if rec is not None try rec record http status status rec save finally memcache delete lock key namespace config KEY NAMESPACE
def clear static cache path fully qualified path os path join django conf settings WEB ROOT path try new temp path tempfile mkdtemp dir django conf settings WEB ROOT + '/' except OS Error as e if e errno 28 shutil rmtree fully qualified path returntry os rename fully qualified path os path join new temp path 'old' except OS Error as e if e errno 2 passelse raiseshutil rmtree new temp path
@taskdef build docs with cd '/home/vagrant/repos/sympy' run 'mkdir-pdist' venv '/home/vagrant/docs-virtualenv'make virtualenv venv dependencies ['sphinx 1 1 3' 'numpy' 'mpmath'] with virtualenv venv with cd '/home/vagrant/repos/sympy/doc' run 'makeclean' run 'makehtml-errors' run 'makeman' with cd '/home/vagrant/repos/sympy/doc/ build' run 'mvhtml{html-nozip}' format **tarball formatter run 'zip- 9 lr{html}{html-nozip}' format **tarball formatter run 'cp{html} / /dist/' format **tarball formatter run 'makeclean' run 'makelatex' with cd '/home/vagrant/repos/sympy/doc/ build/latex' run 'make' run 'cp{pdf-orig} / / /dist/{pdf}' format **tarball formatter
def use wildcard certificate bench path ret from bench config common site config import get configconfig get config bench path bench path wildcard config get 'wildcard' if not wildcard returndomain wildcard['domain']ssl certificate wildcard['ssl certificate']ssl certificate key wildcard['ssl certificate key']if domain startswith '* ' domain domain[ 1 ]else domain ' ' + domain for site in ret if site get 'ssl certificate' continueif site get 'domain' or site['name'] endswith domain site['ssl certificate'] ssl certificatesite['ssl certificate key'] ssl certificate keysite['wildcard'] 1
def simplify mul tree neg inputs treeif isinstance inputs list s inputs []for s i in imap simplify mul inputs if s i[ 1 ] is None neg ^ s i[ 0 ]else s inputs append s i if not s inputs rval [neg None]elif len s inputs 1 s inputs[ 0 ][ 0 ] ^ negrval s inputs[ 0 ]else rval [neg s inputs]else rval treereturn rval
def start interactive mode result debuggers result debuggersdescrs result error descrs + result fail descrs if len debuggers 1 debuggers[ 0 ] start else while True testindex 0print ' Chooseatesttodebug ' print '\n' join [ ' DCTB %s %s' % i descr for i descr in enumerate descrs ] print " Type'exit' or^D toquit" print try todebug input ' Enteratestname ' if todebug strip lower 'exit' print breakelse try testindex int todebug debugger debuggers[descrs[testindex][ 0 ]]except Value Error Index Error print 'ERROR invalidtestnumber%r' % todebug else debugger start except EOF Error Keyboard Interrupt print break
def set default sld tld opts salt utils namecheap get opts 'namecheap domains dns set Default' opts['SLD'] sldopts['TLD'] tldresponse xml salt utils namecheap post request opts if response xml is None return Falsednsresult response xml get Elements By Tag Name ' Domain DNS Set Default Result' [0 ]return salt utils namecheap string to value dnsresult get Attribute ' Updated'
def common bytes blocks 1 blocks 2 if len blocks 1 > len blocks 2 blocks 1 blocks 2 blocks 2 blocks 1 score 0for block count 1 in blocks 1 items count 2 blocks 2 get block if count 2 score + min count 1 count 2 return score
def common bytes blocks 1 blocks 2 if len blocks 1 > len blocks 2 blocks 1 blocks 2 blocks 2 blocks 1 score 0for block count 1 in blocks 1 items count 2 blocks 2 get block if count 2 score + min count 1 count 2 return score
def get image properties image immin immax np min image np max image imtype image dtype typetry lo hi dtypes dtype range[imtype]except Key Error lo hi immin immax signed immin < 0 out of range float np issubdtype image dtype np float and immin < lo or immax > hi low data range immin immax and is low contrast image unsupported dtype image dtype not in dtypes supported types return Image Properties signed out of range float low data range unsupported dtype
def run With Warnings Suppressed suppressed Warnings f *args **kwargs with warnings catch warnings for a kw in suppressed Warnings warnings filterwarnings *a **kw return f *args **kwargs
def nmea Float degrees minutes return '%i% 0 3f' % degrees minutes
def nmea Float degrees minutes return '%i% 0 3f' % degrees minutes
def find directive directives directive name if not directives or isinstance directives str or len directives 0 return Noneif directives[ 0 ] directive name return directivesmatches find directive line directive name for line in directives return next m for m in matches if m is not None None
def test scenario has name feature Feature from string FEATURE 1 assert isinstance feature Feature expect feature name to equal ' Rentmovies'
def safe no dnn algo bwd algo if algo raise Runtime Error ' Theoption`dnn conv algo bwd`hasbeenremovedandshouldnotbeusedanymore Pleaseusetheoptions`dnn conv algo bwd filter`and`dnn conv algo bwd data`instead ' return True
def safe no dnn algo bwd algo if algo raise Runtime Error ' Theoption`dnn conv algo bwd`hasbeenremovedandshouldnotbeusedanymore Pleaseusetheoptions`dnn conv algo bwd filter`and`dnn conv algo bwd data`instead ' return True
def safe no dnn algo bwd algo if algo raise Runtime Error ' Theoption`dnn conv algo bwd`hasbeenremovedandshouldnotbeusedanymore Pleaseusetheoptions`dnn conv algo bwd filter`and`dnn conv algo bwd data`instead ' return True
def safe no dnn algo bwd algo if algo raise Runtime Error ' Theoption`dnn conv algo bwd`hasbeenremovedandshouldnotbeusedanymore Pleaseusetheoptions`dnn conv algo bwd filter`and`dnn conv algo bwd data`instead ' return True
@frappe whitelist def delete doctype name frappe delete doc doctype name
def setup platform hass config add devices discovery info None add devices [ Demo Climate ' Heat Pump' 68 TEMP FAHRENHEIT None 77 ' Auto Low' None None ' Auto' 'heat' None None None Demo Climate ' Hvac' 21 TEMP CELSIUS True 22 ' On High' 67 54 ' Off' 'cool' False None None Demo Climate ' Ecobee' None TEMP CELSIUS None 23 ' Auto Low' None None ' Auto' 'auto' None 24 21 ]
def init args if args backend 'webengine' from qutebrowser browser webengine import webenginesettingswebenginesettings init args else from qutebrowser browser webkit import webkitsettingswebkitsettings init args
def top down once rule fns basic fns return do one rule lambda expr sall top down rule fns fns expr
def read element unicode stream size return read stream size decode 'utf- 8 '
def virtual if 'logrotate show conf' in salt return virtualname return False
def Skip Length Delimited buffer pos end size pos Decode Varint buffer pos pos + sizeif pos > end raise Decode Error ' Truncatedmessage ' return pos
def load provider feature feature providers features []for provider in providers mod import provider fromlist [feature] features getattr mod feature features return features
def Get All Posts posts [{'content' str row[ 1 ] 'time' str row[ 0 ] } for row in DB]posts sort key lambda row row['time'] reverse True return posts
def get account policy name cmd 'pwpolicy-u{ 0 }-getpolicy' format name try ret salt utils mac utils execute return result cmd except Command Execution Error as exc if ' Error user<{ 0 }>notfound' format name in exc strerror raise Command Execution Error ' Usernotfound {0 }' format name raise Command Execution Error ' Unknownerror {0 }' format exc strerror try policy list ret split '\n' [1 ] split '' policy dict {}for policy in policy list if ' ' in policy key value policy split ' ' policy dict[key] valuereturn policy dictexcept Index Error return {}
def split stem sentence sentence re sub ' [a-z] [A-Z] ' u'\\ 1 \\ 2 ' sentence return sentence split
def split stem sentence sentence re sub ' [a-z] [A-Z] ' u'\\ 1 \\ 2 ' sentence return sentence split
def connect socket host port start time time while True try return try connect host port except sc exceptions Socket Connection Refused if time time - start > constants SOCKET CONNECT TIMEOUT raise sc exceptions Connection Timeout Exception host host port port
def get default role request global DEFAULT ROL Edefault getattr settings 'OPENSTACK KEYSTONE DEFAULT ROLE' None if default and DEFAULT ROLE is None try roles keystoneclient request admin True roles list except roles []exceptions handle request for role in roles if role id default or role name default DEFAULT ROLE rolebreakreturn DEFAULT ROLE
def get comment callback comment data thread id parent id def callback request uri headers '\n Simulatethecommentcreationorupdateendpointasdescribedabove \n'response data make minimal cs comment comment data response data['thread id'] thread idresponse data['parent id'] parent idfor key val list in request parsed body items val val list[ 0 ]if key in ['anonymous' 'anonymous to peers' 'endorsed'] response data[key] val ' True' else response data[key] valreturn 200 headers json dumps response data return callback
def get comment callback comment data thread id parent id def callback request uri headers '\n Simulatethecommentcreationorupdateendpointasdescribedabove \n'response data make minimal cs comment comment data response data['thread id'] thread idresponse data['parent id'] parent idfor key val list in request parsed body items val val list[ 0 ]if key in ['anonymous' 'anonymous to peers' 'endorsed'] response data[key] val ' True' else response data[key] valreturn 200 headers json dumps response data return callback
@dec onlyif lambda sys platform 'win 32 ' or has pywin 32 ' Thistestrunsonposixorinwin 32 withwin 32 apiinstalled' def test find cmd fail nt assert raises Find Cmd Error find cmd 'asdfasdf'
@dec onlyif lambda sys platform 'win 32 ' or has pywin 32 ' Thistestrunsonposixorinwin 32 withwin 32 apiinstalled' def test find cmd fail nt assert raises Find Cmd Error find cmd 'asdfasdf'
def time to epoch t if isinstance t int return telif isinstance t tuple or isinstance t time struct time return int time mktime t elif hasattr t 'timetuple' return int time mktime t timetuple elif hasattr t 'strftime' return int t strftime '%s' elif isinstance t str or isinstance t unicode try if t startswith '+' return time time + int t[ 1 ] return int t except Value Error try return time strptime t except Value Error as ex debug ' Failedtoparsedatewithstrptime %s' ex passraise S3 Exceptions Parameter Error " Unabletoconvert%rtoanepochtime Passanepochtime Try`date-d'now+ 1 year'+%%s` shell ortime mktime Python " % t
def time to epoch t if isinstance t int return telif isinstance t tuple or isinstance t time struct time return int time mktime t elif hasattr t 'timetuple' return int time mktime t timetuple elif hasattr t 'strftime' return int t strftime '%s' elif isinstance t str or isinstance t unicode try if t startswith '+' return time time + int t[ 1 ] return int t except Value Error try return time strptime t except Value Error as ex debug ' Failedtoparsedatewithstrptime %s' ex passraise S3 Exceptions Parameter Error " Unabletoconvert%rtoanepochtime Passanepochtime Try`date-d'now+ 1 year'+%%s` shell ortime mktime Python " % t
def time to epoch t if isinstance t int return telif isinstance t tuple or isinstance t time struct time return int time mktime t elif hasattr t 'timetuple' return int time mktime t timetuple elif hasattr t 'strftime' return int t strftime '%s' elif isinstance t str or isinstance t unicode try if t startswith '+' return time time + int t[ 1 ] return int t except Value Error try return time strptime t except Value Error as ex debug ' Failedtoparsedatewithstrptime %s' ex passraise S3 Exceptions Parameter Error " Unabletoconvert%rtoanepochtime Passanepochtime Try`date-d'now+ 1 year'+%%s` shell ortime mktime Python " % t
@pytest fixturedef en tutorial ts english tutorial ts directory from pootle format models import Formatenglish tutorial project filetypes add Format objects get name 'ts' return store require store english tutorial ts directory 'tutorial ts'
def libvlc media player release p mi f Cfunctions get 'libvlc media player release' None or Cfunction 'libvlc media player release' 1 None None Media Player return f p mi
def libvlc media player release p mi f Cfunctions get 'libvlc media player release' None or Cfunction 'libvlc media player release' 1 None None Media Player return f p mi
def get credit provider info request provider id credit provider Credit Provider get credit provider provider id provider id credit provider data {}if credit provider credit provider data {'provider id' credit provider provider id 'display name' credit provider display name 'provider url' credit provider provider url 'provider status url' credit provider provider status url 'provider description' credit provider provider description 'enable integration' credit provider enable integration 'fulfillment instructions' credit provider fulfillment instructions 'thumbnail url' credit provider thumbnail url}return Json Response credit provider data
def get credit provider info request provider id credit provider Credit Provider get credit provider provider id provider id credit provider data {}if credit provider credit provider data {'provider id' credit provider provider id 'display name' credit provider display name 'provider url' credit provider provider url 'provider status url' credit provider provider status url 'provider description' credit provider provider description 'enable integration' credit provider enable integration 'fulfillment instructions' credit provider fulfillment instructions 'thumbnail url' credit provider thumbnail url}return Json Response credit provider data
def get all entries obj try words getattr obj ' all ' except return []return [cast unicode py 2 w for w in words if isinstance w str ]
def join leftkey leftseq rightkey rightseq left default no default right default no default if not callable leftkey leftkey getter leftkey if not callable rightkey rightkey getter rightkey d groupby leftkey leftseq seen keys set left default is no default left default no default for item in rightseq key rightkey item seen keys add key try left matches d[key]for match in left matches yield match item except Key Error if not left default is no default yield left default item if right default no default for key matches in d items if key not in seen keys for match in matches yield match right default
def get cuda memory if not cuda capable warn 'CUD Anotenabled returningzeroformemory' mem 0else from pycuda driver import mem get infomem mem get info [0 ]return sizeof fmt mem
def delta seconds before after delta after - before try return delta total seconds except Attribute Error return delta days * 24 * 3600 + delta seconds + float delta microseconds / 10 ** 6
def p statement assign t names[t[ 1 ]] t[ 3 ]
def fill and one pad stride stride n try return 1 + fill shape stride n + 1 except Type Error raise base Incompatible Shape Error 'strideis{} {} mustbeeitheranintegeroraniterableofintegersofsize{}' format stride type stride n
def fill and one pad stride stride n try return 1 + fill shape stride n + 1 except Type Error raise base Incompatible Shape Error 'strideis{} {} mustbeeitheranintegeroraniterableofintegersofsize{}' format stride type stride n
def Put Signing Keyset io loop secret Get Secrets Manager Put Secret secret json dumps secrets Create Signing Keyset secret io loop stop
def proxying engine conn cls DBAPI Proxy Connection cursor cls DBAPI Proxy Cursor def mock conn return conn cls config db cursor cls return testing engine options {'creator' mock conn}
def proxying engine conn cls DBAPI Proxy Connection cursor cls DBAPI Proxy Cursor def mock conn return conn cls config db cursor cls return testing engine options {'creator' mock conn}
def proxying engine conn cls DBAPI Proxy Connection cursor cls DBAPI Proxy Cursor def mock conn return conn cls config db cursor cls return testing engine options {'creator' mock conn}
def check phylip reject duplicate handle String IO sequences [ Seq Record Seq 'AAAA' id 'longsequencename 1 ' Seq Record Seq 'AAAA' id 'longsequencename 2 ' Seq Record Seq 'AAAA' id 'other sequence' ]alignment Multiple Seq Alignment sequences try Align IO write alignment handle 'phylip' assert False ' Duplicate I Dsaftertruncationarenotallowed 'except Value Error as e assert " Repeatedname'longsequen'" in str e
def clean filename fn return re sub '[^ 0 - 9 a-z A-Z]+' '-' fn
def clean filename fn return re sub '[^ 0 - 9 a-z A-Z]+' '-' fn
def pgcalc sa session id dryrun False sql calc 'SELECTCOALESCE SUM total size 0 \n FROM SELECTDISTINCTON d id d total size d id\n FRO Mhistory dataset associationhda\n JOI Nhistoryh O Nh id hda history id\n JOI Ndatasetd O Nhda dataset id d id\n WHER Eh user id id\n AN Dh purged false\n AN Dhda purged false\n AN Dd purged false\n AN Dd id NOTIN SELEC Tdataset id\n FRO Mlibrary dataset dataset association \n sizes'sql update 'UPDAT Egalaxy user\n SE Tdisk usage %s \n WHER Eid id\n RETURNIN Gdisk usage ' % sql calc if dryrun r sa session execute sql calc {'id' id} else r sa session execute sql update {'id' id} return r fetchone [0 ]
def pgcalc sa session id dryrun False sql calc 'SELECTCOALESCE SUM total size 0 \n FROM SELECTDISTINCTON d id d total size d id\n FRO Mhistory dataset associationhda\n JOI Nhistoryh O Nh id hda history id\n JOI Ndatasetd O Nhda dataset id d id\n WHER Eh user id id\n AN Dh purged false\n AN Dhda purged false\n AN Dd purged false\n AN Dd id NOTIN SELEC Tdataset id\n FRO Mlibrary dataset dataset association \n sizes'sql update 'UPDAT Egalaxy user\n SE Tdisk usage %s \n WHER Eid id\n RETURNIN Gdisk usage ' % sql calc if dryrun r sa session execute sql calc {'id' id} else r sa session execute sql update {'id' id} return r fetchone [0 ]
def random distribution min -5 0 max 5 0 total items 50 num items random randrange 5 total items all info []for item in range num items new item random uniform min max all info append new item return all info
def distro release info return distro distro release info
def service present name service type description None profile None **connection args ret {'name' name 'changes' {} 'result' True 'comment' ' Service"{ 0 }"alreadyexists' format name }role salt ['keystone service get'] name name profile profile **connection args if ' Error' not in role return retelse if opts get 'test' ret['result'] Noneret['comment'] ' Service"{ 0 }"willbeadded' format name return ret salt ['keystone service create'] name service type description profile profile **connection args ret['comment'] ' Service"{ 0 }"hasbeenadded' format name ret['changes'][' Service'] ' Created'return ret
def delete resource obj resource instance params dry run decorator '[dryrun]' if dry run else '' print '{decorator}DELETE{name}[{time}]FROM{params}' format decorator decorator name resource instance get 'name' time determine timestamp resource instance params params if dry run returnresource obj delete **params execute
def diff replication group current desired if current get ' Automatic Failover' is not None current[' Automatic Failover Enabled'] True if current[' Automatic Failover'] in 'enabled' 'enabling' else False modifiable {' Automatic Failover Enabled' ' Automatic Failover Enabled' ' Auto Minor Version Upgrade' None ' Cache Node Type' None ' Cache Parameter Group Name' None ' Cache Security Group Names' None ' Engine Version' None ' Notification Topic Arn' None ' Notification Topic Status' None ' Preferred Maintenance Window' None ' Primary Cluster Id' None ' Replication Group Description' ' Description' ' Security Group Ids' None ' Snapshot Retention Limit' ' Snapshot Retention Limit' ' Snapshotting Cluster Id' ' Snapshotting Cluster Id' ' Snapshot Window' ' Snapshot Window'}need update {}for m o in modifiable items if m in desired if not o need update[m] desired[m]elif m in current if current[m] desired[m] need update[m] desired[m]return need update
def diff replication group current desired if current get ' Automatic Failover' is not None current[' Automatic Failover Enabled'] True if current[' Automatic Failover'] in 'enabled' 'enabling' else False modifiable {' Automatic Failover Enabled' ' Automatic Failover Enabled' ' Auto Minor Version Upgrade' None ' Cache Node Type' None ' Cache Parameter Group Name' None ' Cache Security Group Names' None ' Engine Version' None ' Notification Topic Arn' None ' Notification Topic Status' None ' Preferred Maintenance Window' None ' Primary Cluster Id' None ' Replication Group Description' ' Description' ' Security Group Ids' None ' Snapshot Retention Limit' ' Snapshot Retention Limit' ' Snapshotting Cluster Id' ' Snapshotting Cluster Id' ' Snapshot Window' ' Snapshot Window'}need update {}for m o in modifiable items if m in desired if not o need update[m] desired[m]elif m in current if current[m] desired[m] need update[m] desired[m]return need update
def diff replication group current desired if current get ' Automatic Failover' is not None current[' Automatic Failover Enabled'] True if current[' Automatic Failover'] in 'enabled' 'enabling' else False modifiable {' Automatic Failover Enabled' ' Automatic Failover Enabled' ' Auto Minor Version Upgrade' None ' Cache Node Type' None ' Cache Parameter Group Name' None ' Cache Security Group Names' None ' Engine Version' None ' Notification Topic Arn' None ' Notification Topic Status' None ' Preferred Maintenance Window' None ' Primary Cluster Id' None ' Replication Group Description' ' Description' ' Security Group Ids' None ' Snapshot Retention Limit' ' Snapshot Retention Limit' ' Snapshotting Cluster Id' ' Snapshotting Cluster Id' ' Snapshot Window' ' Snapshot Window'}need update {}for m o in modifiable items if m in desired if not o need update[m] desired[m]elif m in current if current[m] desired[m] need update[m] desired[m]return need update
def radius neighbors graph X radius mode 'connectivity' metric 'minkowski' p 2 metric params None include self False n jobs 1 if not isinstance X Radius Neighbors Mixin X Nearest Neighbors radius radius metric metric p p metric params metric params n jobs n jobs fit X else check params X metric p metric params query query include self X include self return X radius neighbors graph query radius mode
def is public ip ipstr addr ipstr split ' ' [0 ]addr int addr 16 byte 1 addr & 255 byte 2 addr >> 8 & 255 if byte 1 in 10 0 127 return Falseif byte 1 172 and byte 2 > 16 return Falseif byte 1 192 and byte 2 168 return Falsereturn True
def webpack asset path asset paths asset paths debug settings DEBUG MODE if not asset paths logger warn 'webpack-assets jsonhasnotyetbeengenerated Fallingbacktonon-cache-bustedassets' return pathif not debug key path replace base static path '' replace ' js' '' hash path asset paths[key]return os path join base static path hash path else return path
def unpick search sort allowed fields None total None sorts []split sort sort split ' ' for part in split sort split part part strip split field split part[ 0 ]if len split part > 1 order split part[ 1 ] lower else order 'asc'if allowed fields if field not in allowed fields raise Validation Error ' Cannotsortbyfield`%s`' % field if order not in ['asc' 'desc'] raise Validation Error ' Invalidsortdirection`%s`' % order sorts append field order if total and len sorts > total raise Validation Error ' Toomanysortcriteriaprovidedonly%sallowed' % total return sorts
def get Window Analyze File Given Text file Name gcode Text skein Comment Skein skein parse Gcode gcode Text archive write File Message End ' comment gcode' file Name skein output getvalue ' Thecommentedfileissavedas'
def match Strength No Noise x y n return sum xi yi for xi yi ni in zip x y n if ni '#'
def get local ip s socket socket socket AF INET socket SOCK DGRAM s connect 'google com' 80 ip s getsockname [0 ]s close return ip
def format RAR Version field return '%u %u' % divmod field value 10
def format RAR Version field return '%u %u' % divmod field value 10
def format RAR Version field return '%u %u' % divmod field value 10
def ensure minimal setup package manager if package manager in 'dnf' 'yum' return run network interacting from args ['su' 'root' '-c' [package manager '-y' 'install' 'sudo']] elif package manager 'apt' return sequence [run network interacting from args ['su' 'root' '-c' ['apt-get' 'update']] run network interacting from args ['su' 'root' '-c' ['apt-get' '-y' 'install' 'sudo']] ] else raise Unsupported Distribution
def show br None return os dispatch 'brshow' br
def het white resid exog retres False x np asarray exog y np asarray resid if x ndim 1 raise Value Error 'xshouldhaveconstantandatleastonemorevariable' nobs nvars 0 x shape i0 i1 np triu indices nvars 0 exog x[ i0 ] * x[ i1 ] nobs nvars exog shapeassert nvars nvars 0 * nvars 0 - 1 / 2 0 + nvars 0 resols OLS y ** 2 exog fit fval resols fvaluefpval resols f pvaluelm nobs * resols rsquared assert resols df model np matrix rank exog - 1 lmpval stats chi 2 sf lm resols df model return lm lmpval fval fpval
def het white resid exog retres False x np asarray exog y np asarray resid if x ndim 1 raise Value Error 'xshouldhaveconstantandatleastonemorevariable' nobs nvars 0 x shape i0 i1 np triu indices nvars 0 exog x[ i0 ] * x[ i1 ] nobs nvars exog shapeassert nvars nvars 0 * nvars 0 - 1 / 2 0 + nvars 0 resols OLS y ** 2 exog fit fval resols fvaluefpval resols f pvaluelm nobs * resols rsquared assert resols df model np matrix rank exog - 1 lmpval stats chi 2 sf lm resols df model return lm lmpval fval fpval
def checks run recently request ten mins datetime utcnow replace tzinfo utc - timedelta minutes 10 most recent Status Check Result objects filter time complete gte ten mins if most recent exists return Http Response ' Checksrunning' return Http Response ' Checksnotrunning'
def get ext comm subtype type high return ext comm subtypes classes get type high {}
def present name definition None if definition is None definition {}ret {'name' name 'changes' {} 'result' True 'comment' ''}index template exists salt ['elasticsearch index template exists'] name name if not index template exists if opts ['test'] ret['comment'] ' Indextemplate{ 0 }willbecreated' format name ret['result'] Noneelse ret['result'] salt ['elasticsearch index template create'] name name body definition if ret['result'] ret['comment'] ' Createdindextemplate{ 0 }successfully' format name elif index template exists ret['comment'] ' Indextemplate{ 0 }isalreadypresent' format name else ret['comment'] ' Failedtodeterminewhetherindextemplate{ 0 }ispresent see Minionlogformoreinformation' format name ret['result'] Falsereturn ret
@receiver models signals post save sender Verification Status @receiver models signals post delete sender Verification Status def invalidate verification status cache sender instance **kwargs cache key Verification Status cache key name instance user id unicode instance checkpoint course id cache delete cache key
def srvmgr func as json False command ' Import- Module Web Administration 'if as json command '{ 0 } Convert To- Json- Compress- Depth 4 - Input Object@ {1 } ' format command func else command '{ 0 }{ 1 }' format command func cmd ret salt ['cmd run all'] command shell 'powershell' python shell True if cmd ret['retcode'] 0 LOG error ' Unabletoexecutecommand %s\n Error %s' command cmd ret['stderr'] return cmd ret
@app after requestdef after response print 'andherewehavetheresponseobjectinstead ' response return response
@app after requestdef after response print 'andherewehavetheresponseobjectinstead ' response return response
def set lcd filter filt library get handle error FT Library Set Lcd Filter library filt if error raise FT Exception error
def tags for cls model instance None **extra filters kwargs extra filters or {} if instance is not None kwargs update { '%s content object' % cls tag relname instance} return cls tag model objects filter **kwargs kwargs update { '%s content object isnull' % cls tag relname False} return cls tag model objects filter **kwargs distinct
def tags for cls model instance None **extra filters kwargs extra filters or {} if instance is not None kwargs update { '%s content object' % cls tag relname instance} return cls tag model objects filter **kwargs kwargs update { '%s content object isnull' % cls tag relname False} return cls tag model objects filter **kwargs distinct
@event u'manager before config validate' def process variables config manager env params {u'block start string' u'^^disabled^^' u'block end string' u'^^disabled^^' u'variable start string' u'{?' u'variable end string' u'?}'}if u'variables' not in config or config get u'variables' is False returnenv Environment **env params if isinstance config[u'variables'] bool log debug u'tryingtoloadvariablesfrom DB' variables variables from db else log debug u'tryingtoloadvariablesfromfile' variables variables from file manager config base config[u'variables'] log debug u'updating D Bwithvariablefilecontents' variables to db variables env globals variables process config env return config
def trim Lens lens min Len index 0for i in range len lens if lens[i] < min Len index + 1else breakreturn lens[index len lens ]
def generate accepted kwargs function *named arguments if hasattr function ' code ' and takes kwargs function function takes kwargs Truefunction takes arguments []else function takes kwargs Falsefunction takes arguments takes arguments function *named arguments def accepted kwargs kwargs if function takes kwargs return kwargselif function takes arguments return {key value for key value in kwargs items if key in function takes arguments }else return {}return accepted kwargs
def generate accepted kwargs function *named arguments if hasattr function ' code ' and takes kwargs function function takes kwargs Truefunction takes arguments []else function takes kwargs Falsefunction takes arguments takes arguments function *named arguments def accepted kwargs kwargs if function takes kwargs return kwargselif function takes arguments return {key value for key value in kwargs items if key in function takes arguments }else return {}return accepted kwargs
def drop missing Y X None axis 1 Y np asarray Y if Y ndim 1 Y Y[ None]if X is not None X np array X if X ndim 1 X X[ None]keepidx np logical and ~ np isnan Y any axis ~ np isnan X any axis return Y[keepidx] X[keepidx] else keepidx ~ np isnan Y any axis return Y[keepidx]
def drop missing Y X None axis 1 Y np asarray Y if Y ndim 1 Y Y[ None]if X is not None X np array X if X ndim 1 X X[ None]keepidx np logical and ~ np isnan Y any axis ~ np isnan X any axis return Y[keepidx] X[keepidx] else keepidx ~ np isnan Y any axis return Y[keepidx]
def drop missing Y X None axis 1 Y np asarray Y if Y ndim 1 Y Y[ None]if X is not None X np array X if X ndim 1 X X[ None]keepidx np logical and ~ np isnan Y any axis ~ np isnan X any axis return Y[keepidx] X[keepidx] else keepidx ~ np isnan Y any axis return Y[keepidx]
def daemonize if opts if 'salt-call' in sys argv[ 0 ] returnif not opts get 'multiprocessing' True returnif sys platform startswith 'win' returndaemonize False
def daemonize if opts if 'salt-call' in sys argv[ 0 ] returnif not opts get 'multiprocessing' True returnif sys platform startswith 'win' returndaemonize False
@login requireddef display person edit name do request user request usernew first request POST['first name']new last request POST['last name']user first name new firstuser last name new lastuser save return Http Response Redirect '/people/%s' % urllib quote user username
@login requireddef display person edit name do request user request usernew first request POST['first name']new last request POST['last name']user first name new firstuser last name new lastuser save return Http Response Redirect '/people/%s' % urllib quote user username
def Urn String To Hunt Id urn if urn startswith AFF 4 PREFIX urn urn[len AFF 4 PREFIX ]components urn split '/' if len components 2 or components[ 0 ] 'hunts' raise Value Error ' Invalidhunt URN %s' urn return components[ -1 ]
def response controller arg return response controller normalize arg
def numpy cupy array less err msg '' verbose True name 'xp' type check True accept error False def check func x y array assert array less x y err msg verbose return make decorator check func name type check accept error
def final status statuses return sorted statuses key itemgetter 'updated at' [ -1 ]
def generate oauth authorization url token next None hd DEFAULT DOMAIN hl None btmpl None auth server OAUTH AUTHORIZE URL uri atom http core Uri parse uri auth server uri query['oauth token'] tokenuri query['hd'] hdif next is not None uri query['oauth callback'] str next if hl is not None uri query['hl'] hlif btmpl is not None uri query['btmpl'] btmplreturn uri
def idle priority 0 hub get hub watcher hub loop idle if priority watcher priority priorityhub wait watcher
def get user icons user user perms User Permissions user user perms build permissions from frappe boot import get allowed pagesallowed pages get allowed pages icons []for icon in get desktop icons user add Trueif icon hidden in standard add Falseif not icon custom if icon module name u' Learn' passelif icon type u'page' and icon link not in allowed pages add Falseelif icon type u'module' and icon module name not in user perms allow modules add Falseif add icons append icon return icons
@core helperdef build nav main *args output ''for item in args menu item title item[ 2]if len item 3 and not check access item[ 2 ] continueoutput + make menu item menu item title return output
def get dir time suffix dirfmt '% 4 d-% 02 d-% 02 d %02 d% 02 d% 02 d'now time localtime [0 6]dirname dirfmt % now return dirname
def raise if deadlock error operational error engine name re DEADLOCK RE DB get engine name if re is None returnm re match operational error message if not m returnraise exception DB Deadlock operational error
def raise if deadlock error operational error engine name re DEADLOCK RE DB get engine name if re is None returnm re match operational error message if not m returnraise exception DB Deadlock operational error
def build instance Model data db obj Model **data if obj pk is None and hasattr Model 'natural key' and hasattr Model default manager 'get by natural key' natural key obj natural key try obj pk Model default manager db manager db get by natural key *natural key pkexcept Model Does Not Exist passreturn obj
def include d e return d [f for f in glob glob '%s/%s' % d e if os path isfile f ]
def do reverse value if isinstance value string types return value[ -1 ]try return reversed value except Type Error try rv list value rv reverse return rvexcept Type Error raise Filter Argument Error 'argumentmustbeiterable'
def do reverse value if isinstance value string types return value[ -1 ]try return reversed value except Type Error try rv list value rv reverse return rvexcept Type Error raise Filter Argument Error 'argumentmustbeiterable'
def Parse Task Age Limit age limit age limit age limit strip if not age limit raise Malformed Queue Configuration ' Task Age Limitmustnotbeempty ' unit age limit[ -1 ]if unit not in 'smhd' raise Malformed Queue Configuration ' Task Age Limitmustbeins seconds m minutes h hours ord days ' try number float age limit[ 0 -1 ] if unit 's' return int number if unit 'm' return int number * 60 if unit 'h' return int number * 3600 if unit 'd' return int number * 86400 except Value Error raise Malformed Queue Configuration ' Task Age Limit"%s"isinvalid ' % age limit
def test write invalid toplevel meta ipac table ascii get reader Reader ascii Ipac data table read 't/no data ipac dat' data meta['blah'] 'extra'with catch warnings Astropy Warning as A Swarn out String IO data write out format 'ascii ipac' assert len A Swarn 1 assert 'werenotwritten' in str A Swarn[ 0 ] message
def test write invalid toplevel meta ipac table ascii get reader Reader ascii Ipac data table read 't/no data ipac dat' data meta['blah'] 'extra'with catch warnings Astropy Warning as A Swarn out String IO data write out format 'ascii ipac' assert len A Swarn 1 assert 'werenotwritten' in str A Swarn[ 0 ] message
def test write invalid toplevel meta ipac table ascii get reader Reader ascii Ipac data table read 't/no data ipac dat' data meta['blah'] 'extra'with catch warnings Astropy Warning as A Swarn out String IO data write out format 'ascii ipac' assert len A Swarn 1 assert 'werenotwritten' in str A Swarn[ 0 ] message
def check negative indices *nodes for node in nodes if node is None or not isinstance node constant result py int types and not isinstance node constant result float continueif node constant result < 0 warning node pos "theresultofusingnegativeindicesinsideofcodesectionsmarkedas'wraparound False'isundefined" level 1
def check negative indices *nodes for node in nodes if node is None or not isinstance node constant result py int types and not isinstance node constant result float continueif node constant result < 0 warning node pos "theresultofusingnegativeindicesinsideofcodesectionsmarkedas'wraparound False'isundefined" level 1
def check negative indices *nodes for node in nodes if node is None or not isinstance node constant result py int types and not isinstance node constant result float continueif node constant result < 0 warning node pos "theresultofusingnegativeindicesinsideofcodesectionsmarkedas'wraparound False'isundefined" level 1
def makedirs path if not path returnif os path exists path if not os path isdir path raise OS Error u' Path{ 0 }alreadyexistsandisnotafolder ' format path else returntry os makedirs path returnexcept Exception if os path isdir path returnraise
def find best blas type arrays dtype None dtype np dtype dtype prefer fortran Falseif arrays dtypes [ar dtype for ar in arrays]dtype np find common type dtypes try index dtypes index dtype except Value Error index 0if arrays[index] flags['FORTRAN'] prefer fortran Trueprefix type conv get dtype char 'd' if dtype char 'G' dtype np dtype 'D' elif dtype char not in 'fd FD' dtype np dtype 'd' return prefix dtype prefer fortran
def test weights iris clf 1 Logistic Regression random state 123 clf 2 Random Forest Classifier random state 123 clf 3 Gaussian NB eclf Voting Classifier estimators [ 'lr' clf 1 'rf' clf 2 'gnb' clf 3 ] voting 'soft' weights [1 2 10 ] scores cross val score eclf X y cv 5 scoring 'accuracy' assert almost equal scores mean 0 93 decimal 2
@taskdef release options sdist options python version '2 7'bdist superpack options options python version '3 4'bdist superpack options write release and log
def create ikepolicy name profile None **kwargs conn auth profile return conn create ikepolicy name **kwargs
def directory path use sudo False owner '' group '' mode '' func use sudo and run as root or run if not is dir path func 'mkdir-p"% path s"' % locals if owner and owner path use sudo owner or group and group path use sudo group func 'chown% owner s % group s"% path s"' % locals if mode and mode path use sudo mode func 'chmod% mode s"% path s"' % locals
def parse query part part query classes {} prefixes {} default class query Substring Query part part strip match PARSE QUERY PART REGEX match part assert matchkey match group 1 term match group 2 replace '\\ ' ' ' for pre query class in prefixes items if term startswith pre return key term[len pre ] query class query class query classes get key default class return key term query class
def get app revision environ None if environ is None environ os environif 'CURRENT VERSION ID' in environ return environ['CURRENT VERSION ID'] split ' ' [1 ]
def repeat last axis array count return as strided array array shape + count array strides + 0
def get language name language code try lang dict get current babel locale languagesexcept Attribute Error Value Error return language codefor option in language code str language code replace '-' ' ' if option in lang dict return lang dict[option]return language code
def get language name language code try lang dict get current babel locale languagesexcept Attribute Error Value Error return language codefor option in language code str language code replace '-' ' ' if option in lang dict return lang dict[option]return language code
@skip if on windows@pytest mark parametrize 'cmd fmt exp' [ 'pwd' None lambda os getcwd + '\n' 'echo WORKING' None 'WORKING\n' 'ls-f' lambda out out splitlines sort os listdir sort ] def test single command cmd fmt exp out err rtn run xonsh cmd stderr sp DEVNULL if callable fmt out fmt out if callable exp exp exp assert out exp assert rtn 0
def test merge new merge log err packages {'pack 1' {'light' [{'platform' 'one'}]} 'pack 11 ' {'input select' {'ib 1 ' None}} 'pack 2' {'light' {'platform' 'one'} 'panel custom' {'pan 1 ' None} 'api' {}}}config {config util CONF CORE {config util CONF PACKAGES packages}}config util merge packages config config packages assert merge log err call count 0 assert 'api' in config assert len config 5 assert len config['light'] 2 assert len config['panel custom'] 1
def get token http service account 'default' token json get http 'instance/service-accounts/{ 0 }/token' format service account token expiry client UTCNOW + datetime timedelta seconds token json['expires in'] return token json['access token'] token expiry
def get token http service account 'default' token json get http 'instance/service-accounts/{ 0 }/token' format service account token expiry client UTCNOW + datetime timedelta seconds token json['expires in'] return token json['access token'] token expiry
def cla Model Control Enable TP Learning Cb cla Model assert isinstance cla Model CLA Model cla Model get TP Region set Parameter 'learning Mode' True return
def cla Model Control Enable TP Learning Cb cla Model assert isinstance cla Model CLA Model cla Model get TP Region set Parameter 'learning Mode' True return
def get mor by property service instance object type property value property name 'name' container ref None object list get mors with properties service instance object type property list [property name] container ref container ref for obj in object list obj id str obj get 'object' '' strip '\'"' if obj[property name] property value or property value obj id return obj['object']return None
def get mor by property service instance object type property value property name 'name' container ref None object list get mors with properties service instance object type property list [property name] container ref container ref for obj in object list obj id str obj get 'object' '' strip '\'"' if obj[property name] property value or property value obj id return obj['object']return None
@treeio login required@handle response formatdef item add typed request type id response format 'html' item type get object or 404 Item Type pk type id if not request user profile has permission item type mode 'x' return user denied request message " Youdon'thaveaccesstocreate" + unicode item type response format response format if request POST if 'cancel' not in request POST form Item Form request user profile item type request POST files request FILES if form is valid item form save request return Http Response Redirect reverse 'infrastructure item view' args [item id] else return Http Response Redirect reverse 'infrastructure index' else form Item Form request user profile item type context get default context request context update {'item type' item type 'form' form} return render to response 'infrastructure/item add typed' context context instance Request Context request response format response format
def ensure sep sep s n 2 return s + sep * n - s count sep
@positional 1 def get package for module module if isinstance module basestring try module sys modules[module]except Key Error return Nonetry return unicode module package except Attribute Error if module name ' main ' try file name module file except Attribute Error passelse base name os path basename file name split name os path splitext base name if len split name 1 return unicode base name else return u' ' join split name[ -1 ] return unicode module name
def index hydrate params container cli type key value if ' Index Field' not in params params[' Index Field'] {}if ' Index Field Type' not in params[' Index Field'] raise Runtime Error ' Youmustpassthe--typeoption ' type params[' Index Field'][' Index Field Type'] type '' join [i capitalize for i in type split '-' ] if type ' Latlon' type ' Lat Lon'if key split SEP [ -1 ] ' Default Value' value DEFAULT VALUE TYPE MAP get type lambda x x value if type + ' Options' not in params[' Index Field'] params[' Index Field'][ type + ' Options' ] {}params[' Index Field'][ type + ' Options' ][key split SEP [ -1 ]] value
def index hydrate params container cli type key value if ' Index Field' not in params params[' Index Field'] {}if ' Index Field Type' not in params[' Index Field'] raise Runtime Error ' Youmustpassthe--typeoption ' type params[' Index Field'][' Index Field Type'] type '' join [i capitalize for i in type split '-' ] if type ' Latlon' type ' Lat Lon'if key split SEP [ -1 ] ' Default Value' value DEFAULT VALUE TYPE MAP get type lambda x x value if type + ' Options' not in params[' Index Field'] params[' Index Field'][ type + ' Options' ] {}params[' Index Field'][ type + ' Options' ][key split SEP [ -1 ]] value
def is nthpow residue bign a n m if primitive root m is None for prime power in factorint m items if not is nthpow residue bign prime power a n prime power return Falsereturn Truef totient m k f // igcd f n return pow a k m 1
def generate proto go source target source env source source[ 0 ]global proto import reimport protos proto import re findall source get text contents parameters 'import prefix %s/' % env['PROTOBUFGOPATH'] if import protos proto mappings []for proto in import protos dir os path dirname proto name os path basename proto proto mappings append 'M%s %s' % proto os path join dir name replace ' ' ' ' parameters + ' %s' % ' ' join proto mappings cmd '%s--proto path --plugin protoc-gen-go %s-I %s-I %s--go out %s %s%s' % env['PROTOC'] env['PROTOCGOPLUGIN'] env['PROTOBUFINCS'] os path dirname str source parameters env['BUILDDIR'] source return echospawn args [cmd] env os environ sh None cmd None escape None
def fill stmt iterable fill len fill len + 1overflow Noneit iter iterable while True buffer []total len 0if overflow buffer append overflow total len + len overflow + 1 overflow Nonewhile total len < fill len try new item it next buffer append new item total len + len new item + 1 except Stop Iteration if buffer breakif overflow yield overflow returnif total len > fill len overflow buffer pop total len - len overflow - 1 ret '' join buffer assert len ret < fill len yield ret
def complement func return compose operator not func
def get max workspace size return max workspace size
def compute precision tp fp precision tp / T maximum 1 0 tp + fp return precision
def fixup internal links config soups reverse directory {}for d s in config[u'sources'] items reverse directory[s] dfor name soup in soups items old src dir os path dirname config[u'sources'][name] for tag in soup find all True if not u'href' in tag attrs continueold rel path tag[u'href'] split u'#' [0 ]old dst os path normpath os path join old src dir old rel path if not old dst in reverse directory continuenew dst reverse directory[old dst] + u' html' new rel path rel href name new dst tag[u'href'] tag[u'href'] replace old rel path new rel path 1
def set Cache Capacity capacity DEFAULT CACHE CAPACITY enable Cache entity Cache set Capacity capacity
def add retry host filter properties host node retry filter properties get 'retry' None if not retry returnhosts retry['hosts']hosts append [host node]
@verbosedef psd multitaper inst fmin 0 fmax np inf tmin None tmax None bandwidth None adaptive False low bias True normalization 'length' picks None proj False n jobs 1 verbose None data sfreq check psd data inst tmin tmax picks proj return psd multitaper data sfreq fmin fmin fmax fmax bandwidth bandwidth adaptive adaptive low bias low bias normalization normalization n jobs n jobs
def set color codes palette 'deep' if palette 'reset' colors [ 0 0 0 0 1 0 0 0 0 5 0 0 1 0 0 0 0 0 0 75 0 75 0 0 0 75 0 75 0 0 0 0 0 75 0 75 0 0 0 0 0 0 ]else colors SEABORN PALETTES[palette] + [ 0 1 0 1 0 1 ] for code color in zip 'bgrmyck' colors rgb mpl colors color Converter to rgb color mpl colors color Converter colors[code] rgbmpl colors color Converter cache[code] rgb
def check header magic bytes file obj file obj seek 0 0 magic file obj read 4 return magic 'PAR 1 '
def sentence chrf reference hypothesis min len 1 max len 6 beta 3 0 return corpus chrf [reference] [hypothesis] min len max len beta beta
def sentence chrf reference hypothesis min len 1 max len 6 beta 3 0 return corpus chrf [reference] [hypothesis] min len max len beta beta
def sentence chrf reference hypothesis min len 1 max len 6 beta 3 0 return corpus chrf [reference] [hypothesis] min len max len beta beta
def cliques containing node G nodes None cliques None if cliques is None cliques list find cliques G if nodes is None nodes list G nodes if not isinstance nodes list v nodesvcliques [c for c in cliques if v in c ]else vcliques {}for v in nodes vcliques[v] [c for c in cliques if v in c ]return vcliques
@skip 'multiple execute' def test no clr attributes class x passfor stuff in [object int float bool str long complex dict set None Not Implemented Ellipsis type test no clr attributes classmethod staticmethod frozenset property sys Base Exception type zip slice buffer enumerate file range xrange type x type x ] for dir stuff in dir stuff if dir stuff[ 1] isalpha Assert dir stuff[ 1] islower '%sshouldnotbeanattributeof%s' % dir stuff str stuff
@skip 'multiple execute' def test no clr attributes class x passfor stuff in [object int float bool str long complex dict set None Not Implemented Ellipsis type test no clr attributes classmethod staticmethod frozenset property sys Base Exception type zip slice buffer enumerate file range xrange type x type x ] for dir stuff in dir stuff if dir stuff[ 1] isalpha Assert dir stuff[ 1] islower '%sshouldnotbeanattributeof%s' % dir stuff str stuff
def norm encoding encoding try return codecs lookup encoding nameexcept Lookup Error return encoding
def norm encoding encoding try return codecs lookup encoding nameexcept Lookup Error return encoding
def norm encoding encoding try return codecs lookup encoding nameexcept Lookup Error return encoding
def norm encoding encoding try return codecs lookup encoding nameexcept Lookup Error return encoding
def make timestamp range start end start timestamp op None end timestamp op None ts range {}if start if start timestamp op 'gt' start timestamp op '$gt'else start timestamp op '$gte'ts range[start timestamp op] startif end if end timestamp op 'le' end timestamp op '$lte'else end timestamp op '$lt'ts range[end timestamp op] endreturn ts range
def make timestamp range start end start timestamp op None end timestamp op None ts range {}if start if start timestamp op 'gt' start timestamp op '$gt'else start timestamp op '$gte'ts range[start timestamp op] startif end if end timestamp op 'le' end timestamp op '$lte'else end timestamp op '$lt'ts range[end timestamp op] endreturn ts range
def history remove completed logging info ' Scheduledremovalofallcompletedjobs' history db History DB history db remove completed history db close del history db
def sh chebyu n monic False base sh jacobi n 2 0 1 5 monic monic if monic return basefactor 4 ** n base scale factor return base
def write drawing worksheet if worksheet charts or worksheet images rel Relationship type 'drawing' target '' worksheet rels append rel drawing Related drawing id 'r Id%s' % len worksheet rels return drawing to tree 'drawing'
@pytest fixture params DISABLED PROJECT URL PARAMS keys def dp view urls request view types kwargs DISABLED PROJECT URL PARAMS[request param] copy view name kwargs pop 'view name' view name '%s-%s' % view name view types return reverse view name kwargs kwargs
def theano leapfrog integrator H q p **theano kwargs epsilon tt dscalar 'epsilon' epsilon tag test value 1n steps tt iscalar 'n steps' n steps tag test value 2 q new p new leapfrog H q p epsilon n steps energy new energy H q new p new f theano function [q p epsilon n steps] [q new p new energy new] **theano kwargs f trust input Truereturn f
def theano leapfrog integrator H q p **theano kwargs epsilon tt dscalar 'epsilon' epsilon tag test value 1n steps tt iscalar 'n steps' n steps tag test value 2 q new p new leapfrog H q p epsilon n steps energy new energy H q new p new f theano function [q p epsilon n steps] [q new p new energy new] **theano kwargs f trust input Truereturn f
def export users path prefix '/' region None key None keyid None profile None conn get conn region region key key keyid keyid profile profile if not conn return Noneresults odict Ordered Dict users get all users path prefix region key keyid profile for user in users name user user name policies conn get all user policies name max items 100 policies policies list user policies response list user policies result policy namespolicies {}for policy name in policies policy conn get user policy name policy name policy json loads unquote policy get user policy response get user policy result policy document policies[policy name] policyuser sls []user sls append {'name' name} user sls append {'policies' policies} user sls append {'path' user path} results[ 'manageuser' + name ] {'boto iam user present' user sls}return safe dump results
def port standard standard annotations sel sample extractors new annotations []for annotation in standard annotations if not annotation get 'tagid' continueelement find element annotation sel if element is None continueselector find generalized css selector element sel if not selector continueannotation['accept selectors'] [selector]annotation['selector'] selectorannotation['reject selectors'] []annotation add annotation data annotation sample extractors for id data in annotation get 'data' {} items a copy deepcopy annotation a['id'] gen predictable id id a['id'] a['data'] {gen predictable id a['id'] 1 data}new annotations append a return new annotations
def read valuation s encoding None if encoding is not None s s decode encoding statements []for linenum line in enumerate s splitlines line line strip if line startswith u'#' or line u'' continuetry statements append read valuation line line except Value Error raise Value Error u' Unabletoparseline%s %s' % linenum line return Valuation statements
def upgrade migrate engine if migrate engine name 'mysql' if not utils index exists migrate engine SYS META TABLE NAME INDEX NAME utils add index migrate engine SYS META TABLE NAME INDEX NAME INDEX COLUMNS
def upgrade migrate engine if migrate engine name 'mysql' if not utils index exists migrate engine SYS META TABLE NAME INDEX NAME utils add index migrate engine SYS META TABLE NAME INDEX NAME INDEX COLUMNS
def upgrade migrate engine if migrate engine name 'mysql' if not utils index exists migrate engine SYS META TABLE NAME INDEX NAME utils add index migrate engine SYS META TABLE NAME INDEX NAME INDEX COLUMNS
def phabricator registry xml parent data root XML Sub Element xml parent 'com uber jenkins phabricator Phabricator Notifier' if 'comment-on-success' in data XML Sub Element root 'comment On Success' text str data get 'comment-on-success' lower if 'uberalls-enabled' in data XML Sub Element root 'uberalls Enabled' text str data get 'uberalls-enabled' lower if 'comment-file' in data XML Sub Element root 'comment File' text data get 'comment-file' if 'comment-size' in data XML Sub Element root 'comment Size' text str data get 'comment-size' if 'comment-with-console-link-on-failure' in data XML Sub Element root 'comment With Console Link On Failure' text str data get 'comment-with-console-link-on-failure' lower
def read bin filepath try with open filepath 'rb' as bin reader data bin reader read return dataexcept Exception as e sys stderr write ' Error Unabletoreadfile' + filepath + ' ' + str e
def read bin filepath try with open filepath 'rb' as bin reader data bin reader read return dataexcept Exception as e sys stderr write ' Error Unabletoreadfile' + filepath + ' ' + str e
def update repo uri with Repo repo uri as repo repo pull
def volume attach name server name device '/dev/xvdb' profile None timeout 300 conn auth profile return conn volume attach name server name device timeout
def volume attach name server name device '/dev/xvdb' profile None timeout 300 conn auth profile return conn volume attach name server name device timeout
def remove credit requirement status username course key req namespace req name req to remove Credit Requirement get course requirements course key namespace req namespace name req name if not req to remove log error u' Couldnotremovecreditrequirementincourse"%s"withnamespace"%s"andname"%s"becausetherequirementdoesnotexist ' unicode course key req namespace req name return Credit Requirement Status remove requirement status username req to remove
def find ref chain obj predicate max depth 20 extra ignore return find chain obj predicate gc get referents max depth max depth extra ignore extra ignore [ -1 ]
def pre Build site pass
def get mask ipv 6 bits if bits > 128 or bits < 0 raise Value Error ' Amaskcanonlybe 0 - 128 bits got%i' % bits elif bits 128 return FULL I Pv 6 MAS Kmask bin get binary 2 ** bits - 1 128 [ -1 ]groupings [mask bin[ 16 * i 16 * i + 1 ] for i in range 8 ]return ' ' join [ '% 04 x' % int group 2 for group in groupings] upper
def create atom id resource path authority name None date string None if authority name is None authority name config get 'ckan feeds authority name' '' strip if not authority name site url config get 'ckan site url' '' strip authority name urlparse urlparse site url netlocif not authority name log warning ' Noauthority nameavailableforfeedgeneration Generatedfeedwillbeinvalid ' if date string is None date string config get 'ckan feeds date' '' if not date string log warning ' Nodate stringavailableforfeedgeneration Pleasesetthe"ckan feeds date"configvalue ' site url config get 'ckan site url' '' return '/' join [site url resource path] tagging entity ' ' join [authority name date string] return ' ' join ['tag' tagging entity resource path]
def has isoinfo return has userland tool 'isoinfo'
def has isoinfo return has userland tool 'isoinfo'
def has isoinfo return has userland tool 'isoinfo'
def has isoinfo return has userland tool 'isoinfo'
def retrieve config DEBUG Truenet devices Network Device objects all for a device in net devices if 'ssh' in a device device class if DEBUG print ' Retrievedeviceconfiguration {}{}\n' format a device device name a device device class ssh connect SSH Connection a device ssh connect enable mode output ssh connect send command 'showrun\n' file name a device device name + ' txt' full path CFGS DIR + file name if DEBUG print ' Writingconfigurationfiletofilesystem\n'with open full path 'w' as f f write output
def get outgoing url url if not settings REDIRECT URL return urlparsed url urlparse url url netloc parsed url netlocif parsed url scheme not in ['http' 'https'] return '/'if url netloc urlparse settings REDIRECT URL netloc or url netloc in settings REDIRECT URL ALLOW LIST return urlurl force bytes jinja 2 utils Markup url unescape sig hmac new settings REDIRECT SECRET KEY msg url digestmod hashlib sha 256 hexdigest return '/' join [settings REDIRECT URL rstrip '/' sig urllib quote url safe '/& ' ]
def open filename sc Shortcut sc load filename return sc
def xorg name ret {'name' name 'changes' {} 'result' None 'comment' ''}if salt ['keyboard get x'] name ret['result'] Trueret['comment'] 'X Orglayout{ 0 }alreadyset' format name return retif opts ['test'] ret['comment'] 'X Orglayout{ 0 }needstobeset' format name return retif salt ['keyboard set x'] name ret['changes'] {'layout' name}ret['result'] Trueret['comment'] ' Set X Orgkeyboardlayout{ 0 }' format name return retelse ret['result'] Falseret['comment'] ' Failedtoset X Orgkeyboardlayout'return ret
def check precisions precisions covariance type n components n features precisions check array precisions dtype [np float 64 np float 32 ] ensure 2d False allow nd covariance type 'full' precisions shape {'full' n components n features n features 'tied' n features n features 'diag' n components n features 'spherical' n components } check shape precisions precisions shape[covariance type] '%sprecision' % covariance type check precisions {'full' check precisions full 'tied' check precision matrix 'diag' check precision positivity 'spherical' check precision positivity} check precisions[covariance type] precisions covariance type return precisions
def replace subcircuit circuit subcircuit replace None pos 0 if pos < 0 pos 0if isinstance circuit Mul circuit circuit argsif isinstance subcircuit Mul subcircuit subcircuit argsif isinstance replace Mul replace replace argselif replace is None replace loc find subcircuit circuit subcircuit start pos if loc > -1 left circuit[ 0 loc]right circuit[ loc + len subcircuit len circuit ]circuit left + replace + right return circuit
def replace subcircuit circuit subcircuit replace None pos 0 if pos < 0 pos 0if isinstance circuit Mul circuit circuit argsif isinstance subcircuit Mul subcircuit subcircuit argsif isinstance replace Mul replace replace argselif replace is None replace loc find subcircuit circuit subcircuit start pos if loc > -1 left circuit[ 0 loc]right circuit[ loc + len subcircuit len circuit ]circuit left + replace + right return circuit
def dummy sparse groups from scipy import sparseindptr np arange len groups + 1 data np ones len groups dtype np int 8 indi sparse csr matrix data g indptr return indi
def gce from configuration cluster id project None zone None credentials None if project is None project get machine project if zone is None zone get machine zone gce credentials gce credentials from config credentials compute discovery build 'compute' 'v 1 ' credentials gce credentials return GCE Block Device API operations GCE Operations compute compute project unicode project zone unicode zone cluster id unicode cluster id
def gce from configuration cluster id project None zone None credentials None if project is None project get machine project if zone is None zone get machine zone gce credentials gce credentials from config credentials compute discovery build 'compute' 'v 1 ' credentials gce credentials return GCE Block Device API operations GCE Operations compute compute project unicode project zone unicode zone cluster id unicode cluster id
def dir suffix '' prefix 'tmp' parent None return tempfile mkdtemp suffix prefix parent
def run config path source None config name None config data None config data source None script parameters None salt env 'base' ret compile config path path source source config name config name config data config data config data source config data source script parameters script parameters salt env salt env if ret get ' Exists' config path os path dirname ret[' Full Name'] return apply config config path else return False
@require POST@login requireddef watch forum request forum slug forum get object or 404 Forum slug forum slug if not forum allows viewing by request user raise Http 404 if request POST get 'watch' 'yes' New Thread Event notify request user forum statsd incr 'forums watches forum' else New Thread Event stop notifying request user forum return Http Response Redirect reverse 'forums threads' args [forum slug]
def destroy instances client get client info client destroy instances return info
def test no truncate using compare w wcs WCS naxis 3 w wcs crval [240 9303333333 50 212345678000 0]w wcs cdelt [0 001 0 001 100000000 0]w wcs ctype [u'RA---TAN' u'DEC--TAN' u'FREQ']w wcs set w2 wcs WCS w to header w wcs compare w2 wcs
def conn has method conn method name if method name in dir conn return Truelog error " Method'{ 0 }'notyetsupported " format method name return False
def wipe device cmd 'wipefs-a{ 0 }' format device try out salt ['cmd run all'] cmd python shell False except subprocess Called Process Error as err return Falseif out['retcode'] 0 return Trueelse log error ' Errorwipingdevice{ 0 } {1 }' format device out['stderr'] return False
def gluster cmd return gluster ok gluster xml cmd
def gluster cmd return gluster ok gluster xml cmd
def cleanup sys modules directories cleaned []for modname module in list sys modules items modfile getattr module ' file ' None if modfile for directory in directories if modfile startswith directory cleaned append modname del sys modules[modname]breakreturn cleaned
@handle dashboard error@require POST@ensure csrf cookie@cache control no cache True no store True must revalidate True @require level 'staff' @require post params 'url' def show unit extensions request course id course get course by id Slash Separated Course Key from deprecated string course id unit find unit course request POST get 'url' return Json Response dump module extensions course unit
@handle dashboard error@require POST@ensure csrf cookie@cache control no cache True no store True must revalidate True @require level 'staff' @require post params 'url' def show unit extensions request course id course get course by id Slash Separated Course Key from deprecated string course id unit find unit course request POST get 'url' return Json Response dump module extensions course unit
def strip raw ansi string parser ANSI PARSER return parser strip raw codes string
def get preferred file name encoding return sys getfilesystemencoding or locale getpreferredencoding or u'utf- 8 '
@frappe whitelist def get stock balance item code warehouse posting date None posting time None with valuation rate False from erpnext stock stock ledger import get previous sleif not posting date posting date nowdate if not posting time posting time nowtime last entry get previous sle {u'item code' item code u'warehouse' warehouse u'posting date' posting date u'posting time' posting time} if with valuation rate return last entry qty after transaction last entry valuation rate if last entry else 0 0 0 0 else return last entry qty after transaction or 0 0
@frappe whitelist def get stock balance item code warehouse posting date None posting time None with valuation rate False from erpnext stock stock ledger import get previous sleif not posting date posting date nowdate if not posting time posting time nowtime last entry get previous sle {u'item code' item code u'warehouse' warehouse u'posting date' posting date u'posting time' posting time} if with valuation rate return last entry qty after transaction last entry valuation rate if last entry else 0 0 0 0 else return last entry qty after transaction or 0 0
@frappe whitelist def get stock balance item code warehouse posting date None posting time None with valuation rate False from erpnext stock stock ledger import get previous sleif not posting date posting date nowdate if not posting time posting time nowtime last entry get previous sle {u'item code' item code u'warehouse' warehouse u'posting date' posting date u'posting time' posting time} if with valuation rate return last entry qty after transaction last entry valuation rate if last entry else 0 0 0 0 else return last entry qty after transaction or 0 0
@click command u'show-pending-jobs' @click option u'--site' help u'sitename' @pass contextdef show pending jobs context site None from frappe utils doctor import pending jobs as pending jobsif not site site get site context with frappe init site site pending jobs pending jobs site site return pending jobs
def frozen *args raise nx Network X Error " Frozengraphcan'tbemodified"
def get top state rule answers exploration id state name rule str list return get top state rule answers multi [ exploration id state name ] rule str list [0 ]
def get top state rule answers exploration id state name rule str list return get top state rule answers multi [ exploration id state name ] rule str list [0 ]
def get soap accessor db ip appscale info get db master ip bindport constants UA SERVER POR Treturn SOA Ppy SOAP Proxy 'https //{ 0 } {1 }' format db ip bindport
def solve explike DE f x DE g k from sympy solvers import rsolvefor t in Add make args DE coeff d t as independent g if coeff free symbols return RE exp re DE g k init {}for i in range len Add make args RE if i f f diff x init[g k subs k i ] f limit x 0 sol rsolve RE g k init if sol return sol / factorial k S Zero S Zero
def shortest path digr s nodes explored set [s] nodes unexplored DFS digr s nodes unexplored remove s dist {s 0}node heap []for n in nodes unexplored min compute min dist digr n nodes explored dist heapq heappush node heap min n while len node heap > 0 min dist nearest node heapq heappop node heap dist[nearest node] min distnodes explored add nearest node nodes unexplored remove nearest node for v in digr neighbors nearest node if v in nodes unexplored for i in range len node heap if node heap[i][ 1 ] v node heap[i] compute min dist digr v nodes explored dist v heapq heapify node heap return dist
def lookup Null name timeout None return get Resolver lookup Null name timeout
def rm env user name lst list tab user ret 'absent'rm Nonefor ind in range len lst['env'] if name lst['env'][ind]['name'] rm indif rm is not None lst['env'] pop rm ret 'removed'comdat write cron lines user render tab lst if comdat['retcode'] return comdat['stderr']return ret
def remove datasource jboss config name profile None log debug ' MODULEFUNCTION jboss 7 remove datasource name %s profile %s' name profile operation '/subsystem datasources/data-source {name} remove' format name name if profile is not None operation '/profile "{profile}"' format profile profile + operation return salt ['jboss 7 cli run operation'] jboss config operation fail on error False
def remove interface suffix interface return interface partition '@' [0 ]
def stop args [] sys exit True try kill pid get pid [0 ] os unlink PID FILE except Not Running as e sys stderr write ' Alreadystopped Statuswas {000 s}\n' format status codes[e status code] killed with force Falseif e status code STATUS NOT RESPONDING sys stderr write ' Notresponding killingwithforce\n' try pid read pid file PID FILE kill pid pid killed with force Trueexcept Value Error sys stderr write ' Couldnotfind PI Din pidfile\n' except OS Error sys stderr write ' Couldnotread pidfile\n' if not killed with force if sys exit sys exit -1 returnsys stderr write 'kalitestopped\n' if sys exit sys exit 0
def service enable s name **connection args ret Trueservice service get s name **connection args if service is None return Falsenitro connect **connection args if nitro is None return Falsetry NS Service enable nitro service except NS Nitro Error as error log debug 'netscalermoduleerror-NS Service enable failed {0 }' format error ret False disconnect nitro return ret
def inject field overrides blocks course user Override Field Data provider classes Nonefor block in blocks block field data Override Field Data wrap user course block field data
def inject field overrides blocks course user Override Field Data provider classes Nonefor block in blocks block field data Override Field Data wrap user course block field data
def inject field overrides blocks course user Override Field Data provider classes Nonefor block in blocks block field data Override Field Data wrap user course block field data
def overrides disabled return bool OVERRIDES DISABLED disabled
def discover static files base path sub path '' js files discover files base path sub path sub path ext ' js' trim base path True sources mocks specs sort js files js files html files discover files base path sub path sub path ext ' html' trim base path True p path join base path sub path log sources ' Java Scriptsource' p log mocks ' Java Scriptmock' p log specs ' Java Scriptspec' p log html files 'HTM Ltemplate' p return sources mocks specs html files
def discover static files base path sub path '' js files discover files base path sub path sub path ext ' js' trim base path True sources mocks specs sort js files js files html files discover files base path sub path sub path ext ' html' trim base path True p path join base path sub path log sources ' Java Scriptsource' p log mocks ' Java Scriptmock' p log specs ' Java Scriptspec' p log html files 'HTM Ltemplate' p return sources mocks specs html files
def virtual if not salt utils is darwin return False 'mac portsonlyavailableon Mac OS' if not salt utils which 'port' return False 'mac portsrequiresthe"port"binary' return virtualname
def assert shielding raw sss erm power shielding factor meg 'mag' picks pick types raw sss info meg meg ref meg False if isinstance erm power Base Raw picks erm pick types raw sss info meg meg ref meg False assert allclose picks picks erm erm power np sqrt erm power[picks erm][ 0 ] ** 2 sum sss power raw sss[picks][ 0 ] ravel sss power np sqrt np sum sss power * sss power factor erm power / sss power assert true factor > shielding factor ' Shieldingfactor% 0 3f<% 0 3f' % factor shielding factor
def clean savepoints using None get connection using clean savepoints
def clean savepoints using None get connection using clean savepoints
def clean savepoints using None get connection using clean savepoints
def clean savepoints using None get connection using clean savepoints
def regions from boto glacier layer 2 import Layer 2 return get regions 'glacier' connection cls Layer 2
def iso to plotly time string iso string if iso string split '-' [ 3] is '00 00 ' or iso string split '+' [0 ] is '00 00 ' raise Exception " Plotlywon'taccepttimestringswithtimezoneinfo \n Alltimestringsareassumedtobein UTC " iso string iso string replace '- 00 00 ' '' replace '+ 00 00 ' '' if iso string endswith 'T 00 00 00 ' return iso string replace 'T 00 00 00 ' '' else return iso string replace 'T' ''
def iso to plotly time string iso string if iso string split '-' [ 3] is '00 00 ' or iso string split '+' [0 ] is '00 00 ' raise Exception " Plotlywon'taccepttimestringswithtimezoneinfo \n Alltimestringsareassumedtobein UTC " iso string iso string replace '- 00 00 ' '' replace '+ 00 00 ' '' if iso string endswith 'T 00 00 00 ' return iso string replace 'T 00 00 00 ' '' else return iso string replace 'T' ''
def fixup for packaged if exists join ROOT 'PKG-INF Ovi' if '--build-js' in sys argv or '--install-js' in sys argv print SDIST BUILD WARNING if '--build-js' in sys argv sys argv remove '--build-js' if '--install-js' in sys argv sys argv remove '--install-js' if '--existing-js' not in sys argv sys argv append '--existing-js'
def shift series s s0 s copy s0 s0 shift 1 s0 iloc[ 0 ] 0 0return s0
def get backend configuration backend name config stanzas CONF list all sections if backend name not in config stanzas msg ' Couldnotfindbackendstanza% backend name sinconfiguration Availablestanzasare% stanzas s' params {'stanzas' config stanzas 'backend name' backend name}raise exception Config Not Found message msg % params config configuration Configuration driver volume opts config group backend name config append config values na opts netapp proxy opts config append config values na opts netapp connection opts config append config values na opts netapp transport opts config append config values na opts netapp basicauth opts config append config values na opts netapp provisioning opts config append config values na opts netapp cluster opts config append config values na opts netapp san opts config append config values na opts netapp replication opts return config
def make lsq full matrix x y t k 3 x y t map np asarray x y t m x sizen t size - k - 1 A np zeros m n dtype np float for j in range m xval x[j]if xval t[k] left kelse left np searchsorted t xval - 1 bb bspl evaluate all bspl t k xval left A[j left - k left + 1 ] bb B np dot A T A Y np dot A T y c sl solve B Y return c A Y
def nochange function function NO CHANGE Truereturn function
def nochange function function NO CHANGE Truereturn function
def nochange function function NO CHANGE Truereturn function
def test reason monkeypatch def has reason ids force reason assert reason 'expiry' monkeypatch setattr SIGN ADDONS has reason call command 'sign addons' 123 reason 'expiry'
@sync performerdef perform update s3 error page dispatcher intent s3 boto connect s3 bucket s3 get bucket intent bucket config bucket get website configuration obj new error key intent error keyold error key config error keyif old error key new error key return Noneelse config error key new error keybucket set website configuration config return old error key
def cs output func argtypes func argtypes argtypesfunc restype CS PT Rfunc errcheck check cs ptrreturn func
def vm action name kwargs None call None if call 'action' raise Salt Cloud System Exit ' Thevm actionfunctionmustbecalledwith-aor--action ' if kwargs is None kwargs {}action kwargs get 'action' None if action is None raise Salt Cloud System Exit " Thevm actionfunctionmusthavean'action'provided " server user password get xml rpc auth ' ' join [user password] vm id int get vm id kwargs {'name' name} response server one vm action auth action vm id data {'action' 'vm action ' + str action 'actioned' response[ 0 ] 'vm id' response[ 1 ] 'error code' response[ 2 ]}return data
def orbit transversal degree generators alpha pairs af False tr [ alpha list range degree ]used [ False] * degree used[alpha] Truegens [x array form for x in generators]for x px in tr for gen in gens temp gen[x]if used[temp] False tr append temp af rmul gen px used[temp] Trueif pairs if not af tr [ x af new y for x y in tr]return trif af return [y for y in tr]return [ af new y for y in tr]
def horcmgr synchronized func @functools wraps func def wrap self *args **kwargs ' Synchronize CC Ioperationsper CC Iinstance '@coordination synchronized self lock[args[ 0 ]] def func locked * args ** kwargs ' Executethewrappedfunctioninasynchronizedsection 'return func * args ** kwargs return func locked self *args **kwargs return wrap
def horcmgr synchronized func @functools wraps func def wrap self *args **kwargs ' Synchronize CC Ioperationsper CC Iinstance '@coordination synchronized self lock[args[ 0 ]] def func locked * args ** kwargs ' Executethewrappedfunctioninasynchronizedsection 'return func * args ** kwargs return func locked self *args **kwargs return wrap
def has wildcard pattern match wildcard check pattern search pattern return match is not None
def get attr cmd if u' ' in cmd method frappe get attr cmd else method globals [cmd]frappe log u'method ' + cmd return method
def main description project id day month year hours minutes source bucket sink bucket credentials Google Credentials get application default storagetransfer discovery build 'storagetransfer' 'v 1 ' credentials credentials transfer job {'description' description 'status' 'ENABLED' 'project Id' project id 'schedule' {'schedule Start Date' {'day' day 'month' month 'year' year} 'start Time Of Day' {'hours' hours 'minutes' minutes}} 'transfer Spec' {'gcs Data Source' {'bucket Name' source bucket} 'gcs Data Sink' {'bucket Name' sink bucket} 'object Conditions' {'min Time Elapsed Since Last Modification' '2592000 s'} 'transfer Options' {'delete Objects From Source After Transfer' 'true'}}}result storagetransfer transfer Jobs create body transfer job execute print ' Returnedtransfer Job {}' format json dumps result indent 4
def proxied attribute local attr proxied attr doc def fget self return getattr getattr self local attr proxied attr def fset self value setattr getattr self local attr proxied attr value def fdel self delattr getattr self local attr proxied attr return property fget fset fdel doc
def proxied attribute local attr proxied attr doc def fget self return getattr getattr self local attr proxied attr def fset self value setattr getattr self local attr proxied attr value def fdel self delattr getattr self local attr proxied attr return property fget fset fdel doc
def Compute OTP secret t h hmac new base 64 b32 decode secret struct pack '>Q' t hashlib sha 1 hash h digest offset struct unpack 'B' hash[ -1 ] [0 ] & 15 truncated hash struct unpack '>I' hash[offset offset + 4 ] [0 ]truncated hash & 2147483647 truncated hash % VERIFY MODULU Sreturn truncated hash
def main if len sys argv > 1 write Output '' join sys argv[ 1 ] else settings start Main Loop From Constructor get New Repository
def import vul csv part 2 job id request post vars jobif not job id return " Error No Job ID'sprovided"output s3 rest controller 'vulnerability' 'data' csv stylesheet 'data xsl' total Records output[ 0 ]total Errors output[ 1 ]total Ignored output[ 2 ]from gluon serializers import json as jsonsresponse headers[' Content- Type'] 'application/json'return jsons {'total Records' total Records 'total Errors' total Errors 'total Ignored' total Ignored}
def locate profile profile 'default' from I Python core profiledir import Profile Dir Profile Dir Errortry pd Profile Dir find profile dir by name get ipython dir profile except Profile Dir Error raise IO Error " Couldn'tfindprofile%r" % profile return pd location
def resolve I Pv 6 ip port return socket getaddrinfo ip port 0 0 0 NUMERIC ONLY [0 ][ 4 ]
def example certificates status course key return Example Certificate Set latest status course key
def normalize pos size flip y False width height sizex pos[ 0 ]y pos[ 1 ]x / float width y / float height if flip y return x 1 - y return x y
def dummy deepcopy *arg return None
def dummy deepcopy *arg return None
def dummy deepcopy *arg return None
def get Version String version result '%s%s' % version package version short return result
def get security default from hadoop import clustercluster cluster get cluster conf for job submission return cluster SECURITY ENABLED get
def modeladmin register modeladmin class instance modeladmin class instance register with wagtail
def initialise bot Bridge Instance bot 'samplebridge' Incoming Messages
def setup ssl options config dir src dest option path os path join config dir dest shutil copyfile src option path return option path
def fnmatch all names patterns for name in names matches Falsefor pattern in patterns matches fnmatch fnmatch name pattern if matches breakif not matches return Falsereturn True
def Get Module For CLSID clsid clsid str str clsid try typelib CLSID lcid major minor clsid To Typelib[clsid str]except Key Error return Nonetry mod Get Module For Typelib typelib CLSID lcid major minor except Import Error mod Noneif mod is not None sub mod mod CLSID To Package Map get clsid str if sub mod is None sub mod mod V Tables To Package Map get clsid str if sub mod is not None sub mod name mod name + ' ' + sub mod try import sub mod name except Import Error info typelib CLSID lcid major minor if info in demand Generated Type Libraries info demand Generated Type Libraries[info]import makepymakepy Generate Child From Type Lib Spec sub mod info mod sys modules[sub mod name]return mod
def item to subscription for topic iterator subscription path subscription name subscription name from path subscription path iterator client project return Subscription subscription name iterator topic
def load key bindings for prompt **kw kw setdefault u'enable abort and exit bindings' True kw setdefault u'enable search' True kw setdefault u'enable auto suggest bindings' True return load key bindings **kw
def setup platform hass config add devices discovery info None hosts []if discovery info and discovery info in KNOWN HOSTS returnif discovery info is not None LOGGER debug ' Discovered Roku %s' discovery info[ 0 ] hosts append discovery info[ 0 ] elif CONF HOST in config hosts append config get CONF HOST rokus []for host in hosts new roku Roku Device host if new roku name is None LOGGER error ' Unabletoinitializerokuat%s' host else rokus append Roku Device host KNOWN HOSTS append host add devices rokus
def write bem solution fname bem check bem size bem['surfs'] with start file fname as fid start block fid FIFF FIFFB BEM write int fid FIFF FIFF BEM COORD FRAME bem['surfs'][ 0 ]['coord frame'] write bem surfaces block fid bem['surfs'] if 'solution' in bem if bem['bem method'] FIFF FWD BEM LINEAR COLL raise Runtime Error ' Onlylinearcollocationsupported' write int fid FIFF FIFF BEM APPROX FIFF FIFFV BEM APPROX LINEAR write float matrix fid FIFF FIFF BEM POT SOLUTION bem['solution'] end block fid FIFF FIFFB BEM end file fid
def color print *args **kwargs file kwargs get u'file' get stdout end kwargs get u'end' u'\n' write file writeif isatty file and conf use color for i in range 0 len args 2 msg args[i]if i + 1 len args color u''else color args[ i + 1 ]if color msg color text msg color if six PY 2 and isinstance msg bytes msg decode preferred encoding msg write write with fallback msg write file write end else for i in range 0 len args 2 msg args[i]if six PY 2 and isinstance msg bytes msg decode preferred encoding msg write msg write end
def color print *args **kwargs file kwargs get u'file' get stdout end kwargs get u'end' u'\n' write file writeif isatty file and conf use color for i in range 0 len args 2 msg args[i]if i + 1 len args color u''else color args[ i + 1 ]if color msg color text msg color if six PY 2 and isinstance msg bytes msg decode preferred encoding msg write write with fallback msg write file write end else for i in range 0 len args 2 msg args[i]if six PY 2 and isinstance msg bytes msg decode preferred encoding msg write msg write end
def make abstract dist req to install if req to install editable return Is S Dist req to install elif req to install link and req to install link is wheel return Is Wheel req to install else return Is S Dist req to install
def strip formatted string str return re sub '\\s\\s+' '' str strip
def strip formatted string str return re sub '\\s\\s+' '' str strip
@require chanmsg@require privilege OP u' Youarenotachanneloperator ' @commands u'kick' @priority u'high' def kick bot trigger if bot privileges[trigger sender][bot nick] < HALFOP return bot reply u"I'mnotachanneloperator " text trigger group split argc len text if argc < 2 returnopt Identifier text[ 1 ] nick optchannel trigger senderreasonidx 2if not opt is nick if argc < 3 returnnick text[ 2 ]channel optreasonidx 3reason u'' join text[reasonidx ] if nick bot config core nick bot write [u'KICK' channel nick] reason
def ros sort df observations censorship warn False censored sort values df[df[censorship]] observations axis 0 uncensored sort values df[ ~ df[censorship] ] observations axis 0 if censored[observations] max > uncensored[observations] max censored censored[ censored[observations] < uncensored[observations] max ]if warn msg ' Droppingcensoredobservationsgreaterthanthemaxuncensoredobservation 'warnings warn msg return censored append uncensored [[observations censorship]] reset index drop True
def read byte f return np uint 8 struct unpack '>B' f read 4 [ 1] [0 ]
def axapi enabled disabled flag if flag 'enabled' return 1else return 0
def axapi enabled disabled flag if flag 'enabled' return 1else return 0
def is a b msg None assert a is b msg or '%risnot%r' % a b
def get instance uuid by ec 2 id context ec 2 id return IMPL get instance uuid by ec 2 id context ec 2 id
def get instance uuid by ec 2 id context ec 2 id return IMPL get instance uuid by ec 2 id context ec 2 id
def init log global logorig logger cls logging get Logger Class logging set Logger Class Astropy Logger try log logging get Logger 'astropy' log set defaults finally logging set Logger Class orig logger cls return log
def init log global logorig logger cls logging get Logger Class logging set Logger Class Astropy Logger try log logging get Logger 'astropy' log set defaults finally logging set Logger Class orig logger cls return log
def init log global logorig logger cls logging get Logger Class logging set Logger Class Astropy Logger try log logging get Logger 'astropy' log set defaults finally logging set Logger Class orig logger cls return log
def get eth link vif ifc num link id vif get 'devname' if not link id link id 'interface%d' % ifc num if vif get 'type' 'ethernet' nic type 'phy'else nic type vif get 'type' link {'id' link id 'vif id' vif['id'] 'type' nic type 'mtu' vif['network']['meta'] get 'mtu' 'ethernet mac address' vif get 'address' }return link
def shlex split s if not six PY 2 or isinstance s bytes return shlex split s elif isinstance s six text type bs s encode 'utf- 8 ' return [c decode 'utf- 8 ' for c in shlex split bs ]else raise Type Error u'shlex splitcalledwithnon-string'
def lombscargle pdf z N normalization dH 1 dK 3 if dK - dH 2 raise Not Implemented Error ' Degreesoffreedom 2' Nk N - dK if normalization 'psd' return np exp - z elif normalization 'standard' return 0 5 * Nk * 1 + z ** -0 5 * Nk - 1 elif normalization 'model' return 0 5 * Nk * 1 - z ** 0 5 * Nk - 1 elif normalization 'log' return 0 5 * Nk * np exp -0 5 * Nk * z else raise Value Error "normalization '{ 0 }'isnotrecognized" format normalization
def lombscargle pdf z N normalization dH 1 dK 3 if dK - dH 2 raise Not Implemented Error ' Degreesoffreedom 2' Nk N - dK if normalization 'psd' return np exp - z elif normalization 'standard' return 0 5 * Nk * 1 + z ** -0 5 * Nk - 1 elif normalization 'model' return 0 5 * Nk * 1 - z ** 0 5 * Nk - 1 elif normalization 'log' return 0 5 * Nk * np exp -0 5 * Nk * z else raise Value Error "normalization '{ 0 }'isnotrecognized" format normalization
def find documentation module data start line -1 mod ast tree ast parse module data for child in mod ast tree body if isinstance child ast Assign for target in child targets if target id 'DOCUMENTATION' start line child lineno - 1 breakreturn start line
def arbitrary element iterable if is iterator iterable raise Value Error 'cannotreturnanarbitraryitemfromaniterator' return next iter iterable
@lower constant types Record def constant record context builder ty pyval lty ir Array Type ir Int Type 8 pyval nbytes val lty bytearray pyval tostring return cgutils alloca once value builder val
@functools lru cache maxsize None def is language prefix patterns used urlconf for url pattern in get resolver urlconf url patterns if isinstance url pattern Locale Regex URL Resolver return True url pattern prefix default language return False False
@functools lru cache maxsize None def is language prefix patterns used urlconf for url pattern in get resolver urlconf url patterns if isinstance url pattern Locale Regex URL Resolver return True url pattern prefix default language return False False
def enabled name ret {'name' name 'result' True 'comment' '' 'changes' {}}is enabled salt ['apache check site enabled'] name if not is enabled if opts ['test'] msg ' Apachesite{ 0 }issettobeenabled ' format name ret['comment'] msgret['changes']['old'] Noneret['changes']['new'] nameret['result'] Nonereturn retstatus salt ['apache a2 ensite'] name [' Status']if isinstance status string types and 'enabled' in status ret['result'] Trueret['changes']['old'] Noneret['changes']['new'] nameelse ret['result'] Falseret['comment'] ' Failedtoenable{ 0 } Apachesite' format name if isinstance status string types ret['comment'] ret['comment'] + ' {0 } ' format status return retelse ret['comment'] '{ 0 }alreadyenabled ' format name return ret
def jobconf from env variable default None name variable replace ' ' ' ' if name in os environ return os environ[name]for var in JOBCONF MAP get variable {} values name var replace ' ' ' ' if name in os environ return os environ[name]return default
def get print name node simple form True name node fullnameif hasattr node u' interface' pkglist node interface class module split u' ' interface node interface class name destclass u''if len pkglist > 2 destclass u' %s' % pkglist[ 2 ] if simple form name node fullname + destclass else name u' ' join [node fullname interface] + destclass if simple form parts name split u' ' if len parts > 2 return u' ' join parts[ 1 ] + u' ' elif len parts 2 return parts[ 1 ]return name
def handle sigusr 1 signal number stack frame handlers logging get Logger Class manager root handlersreopen log files handlers handlers
def handle sigusr 1 signal number stack frame handlers logging get Logger Class manager root handlersreopen log files handlers handlers
def handle sigusr 1 signal number stack frame handlers logging get Logger Class manager root handlersreopen log files handlers handlers
def handle sigusr 1 signal number stack frame handlers logging get Logger Class manager root handlersreopen log files handlers handlers
def get Preference Colour name color String get Preference name return [ float int color String[ 1 3] 16 / 255 float int color String[ 3 5] 16 / 255 float int color String[ 5 7] 16 / 255 1 0]
def get Preference Colour name color String get Preference name return [ float int color String[ 1 3] 16 / 255 float int color String[ 3 5] 16 / 255 float int color String[ 5 7] 16 / 255 1 0]
def find address range addresses it iter addresses first last next it for ip in it if ip ip last ip + 1 yield first last first iplast ip yield first last
def all bases valid seq valid bases ['a' 'A' 'c' 'C' 'g' 'G' 't' 'T' 'N']for base in seq if base not in valid bases return Falsereturn True
def get brick var return get annotation var Brick
def get brick var return get annotation var Brick
def test ajd n times n channels 10 3 seed np random Random State 0 diags 2 0 + 0 1 * seed randn n times n channels A 2 * seed rand n channels n channels - 1 A / np atleast 2d np sqrt np sum A ** 2 1 Tcovmats np empty n times n channels n channels for i in range n times covmats[i] np dot np dot A np diag diags[i] A T V D ajd pham covmats V matlab [[ -3 507280775058041 -5 498189967306344 7 720624541198574 ] [0 69468901323461 0 775690358505945 -1 162043086446043 ] [ -0 592603135588066 -0 59899692569626 1 009550086271192 ]]assert array almost equal V V matlab
def test ajd n times n channels 10 3 seed np random Random State 0 diags 2 0 + 0 1 * seed randn n times n channels A 2 * seed rand n channels n channels - 1 A / np atleast 2d np sqrt np sum A ** 2 1 Tcovmats np empty n times n channels n channels for i in range n times covmats[i] np dot np dot A np diag diags[i] A T V D ajd pham covmats V matlab [[ -3 507280775058041 -5 498189967306344 7 720624541198574 ] [0 69468901323461 0 775690358505945 -1 162043086446043 ] [ -0 592603135588066 -0 59899692569626 1 009550086271192 ]]assert array almost equal V V matlab
def dzip exact *dicts if not same *map viewkeys dicts raise Value Error 'dictkeysnotallequal \n\n%s' % format unequal keys dicts return {k tuple d[k] for d in dicts for k in dicts[ 0 ]}
def semanage port get ports seport setype proto records seport get all by type if setype proto in records return records[ setype proto ]else return []
def semanage port get ports seport setype proto records seport get all by type if setype proto in records return records[ setype proto ]else return []
def process static urls text replacement function data dir None def wrap part extraction match '\n Unwrapsamatchgroupforthecapturesspecifiedin url replace regex\nandforwardthemonasfunctionarguments\n'original match group 0 prefix match group 'prefix' quote match group 'quote' rest match group 'rest' full url prefix + rest starts with static url full url startswith unicode settings STATIC URL starts with prefix full url startswith XBLOCK STATIC RESOURCE PREFIX contains prefix XBLOCK STATIC RESOURCE PREFIX in full url if starts with prefix or starts with static url and contains prefix return originalreturn replacement function original prefix quote rest return re sub url replace regex u' ? {static url} /static/ ? {data dir} ' format static url settings STATIC URL data dir data dir wrap part extraction text
def process static urls text replacement function data dir None def wrap part extraction match '\n Unwrapsamatchgroupforthecapturesspecifiedin url replace regex\nandforwardthemonasfunctionarguments\n'original match group 0 prefix match group 'prefix' quote match group 'quote' rest match group 'rest' full url prefix + rest starts with static url full url startswith unicode settings STATIC URL starts with prefix full url startswith XBLOCK STATIC RESOURCE PREFIX contains prefix XBLOCK STATIC RESOURCE PREFIX in full url if starts with prefix or starts with static url and contains prefix return originalreturn replacement function original prefix quote rest return re sub url replace regex u' ? {static url} /static/ ? {data dir} ' format static url settings STATIC URL data dir data dir wrap part extraction text
def conv 1 d sc input filters image shape None filter shape None border mode 'valid' subsample 1 filter flip True if border mode not in 'valid' 0 0 raise Runtime Error ' Unsupportedborder modeforconv 1 d sc %s' % border mode if image shape is None image shape sc Noneelse image shape sc image shape[ 0 ] 1 image shape[ 1 ] image shape[ 2 ] if filter shape is None filter shape sc Noneelse filter shape sc filter shape[ 0 ] 1 filter shape[ 1 ] filter shape[ 2 ] input sc input dimshuffle 0 'x' 1 2 filters sc filters dimshuffle 0 'x' 1 2 [ -1 ]conved T nnet conv 2 d input sc filters sc image shape sc filter shape sc subsample 1 subsample[ 0 ] filter flip filter flip return conved[ 0 ]
def standalone view func def inner request *args **kwargs response view func request *args **kwargs if isinstance response Http Response response standalone Truereturn responsereturn wraps view func inner
def mkfs device fs type validate device device if fs type not in set ['ext 2 ' 'fat 32 ' 'fat 16 ' 'linux-swap' 'reiserfs' 'hfs' 'hfs+' 'hfsx' 'NTFS' 'ufs'] raise Command Execution Error ' Invalidfs typepassedtopartition mkfs' if fs type is 'linux-swap' mkfs cmd 'mkswap'else mkfs cmd 'mkfs {0 }' format fs type if not salt utils which mkfs cmd return ' Error {0 }isunavailable 'cmd '{ 0 }{ 1 }' format mkfs cmd device out salt ['cmd run'] cmd splitlines return out
def load formula mk client paths []for ext in 'yaml' 'json' source url salt utils url create formula + '/defaults ' + ext paths append source url defaults files context ['cp fileclient'] cache files paths for file in defaults files if not file continuesuffix file rsplit ' ' 1 [ -1 ]if suffix 'yaml' loader yamlelif suffix 'json' loader jsonelse log debug ' Failedtodetermineloaderfor%r' file continueif os path exists file log debug ' Readingdefaultsfrom%r' file with salt utils fopen file as fhr defaults loader load fhr log debug ' Readdefaults%r' defaults return defaults or {}
def test cons correct can compile u' consab '
def is running container try infos get container infos container return infos get ' State' {} get ' Running' except Exception return False
def is running container try infos get container infos container return infos get ' State' {} get ' Running' except Exception return False
def Format Service Health Report report assert report get 'status' 'ALERT' message ''sub messages []alerts report get 'alerts' if len alerts > 1 message + ' %d Alerts ' % len alerts for a in alerts sub message '' + a get 'description' a get 'name' if a get 'cluster' False sub message + ' Cluster 'else sub message + ' %dmachines ' % a get 'count' sub messages append sub message return message + ' ' join sub messages
def call blink *args **kwargs devices get lights pause kwargs get 'pause' 0 res dict for dev id in 'id' not in kwargs and sorted devices keys or get devices kwargs state devices[str dev id ]['state']['on'] set dev id state and Const LAMP OFF or Const LAMP ON if pause time sleep pause res[dev id] set dev id not state and Const LAMP OFF or Const LAMP ON return res
def test should support both meta sequence and constructor exclude class Sequenced Table tables Table a tables Column b tables Column c tables Column class Meta sequence u'a' u' ' table Sequenced Table [] exclude u'c' table as html request
def test should support both meta sequence and constructor exclude class Sequenced Table tables Table a tables Column b tables Column c tables Column class Meta sequence u'a' u' ' table Sequenced Table [] exclude u'c' table as html request
def service get by host and topic context host topic return IMPL service get by host and topic context host topic
def get full pci id pci id cmd "lspci-D awk'/%s/{print$ 1 }'" % pci id status full id commands getstatusoutput cmd if status 0 return Nonereturn full id
def Chi Squared name k return rv name Chi Squared Distribution k
def follow log module le path logs name None logtype None followed count 0for log in logs if query log status module le path log continueif module check mode module exit json changed True cmd [le path 'follow' log]if name cmd extend ['--name' name] if logtype cmd extend ['--type' logtype] rc out err module run command '' join cmd if not query log status module le path log module fail json msg "failedtofollow'%s' %s" % log err strip followed count + 1if followed count > 0 module exit json changed True msg 'followed%dlog s ' % followed count module exit json changed False msg 'logs s alreadyfollowed'
def make extension name files *args **kwargs ext Delayed Extension name files *args **kwargs for dir in get base dirs include dir os path join dir 'include' if os path exists include dir ext include dirs append include dir for lib in 'lib' 'lib 64 ' lib dir os path join dir lib if os path exists lib dir ext library dirs append lib dir ext include dirs append ' ' return ext
def is unicode combining u i ord u for r in COMBINING RANGES if r[ 0 ] < i < r[ 1 ] return Truereturn False
def is unicode combining u i ord u for r in COMBINING RANGES if r[ 0 ] < i < r[ 1 ] return Truereturn False
def autolabel rectangles for rect in rectangles height rect get height ax text rect get x + rect get width / 2 0 1 05 * height '% 4f' % height ha 'center' va 'bottom'
def set seed x node names list six iterkeys tf get default graph nodes by name if len node names > 0 and node names ['keras learning phase'] raise Runtime Error ' Seedingisnotsupportedafterinitializingpartofthegraph Pleasemoveset seedtothebeginningofyourcode ' np random seed x tf set random seed x
def write Document new Filename cloned Node make Sure Directory Exists new Filename f open new Filename 'w' f write cloned Node toxml 'utf- 8 ' f close
@utils synchronized SERIAL LOCK def acquire port host start stop get port range for port in six moves range start stop if host port in ALLOCATED PORTS continuetry verify port host port ALLOCATED PORTS add host port return portexcept exception Socket Port In Use Exception as e LOG warning e format message raise exception Socket Port Range Exhausted Exception host host
def setup platform hass config add devices discovery info None add devices [ Zig Bee Binary Sensor hass Zig Bee Digital In Config config ]
def set remote login enable state salt utils mac utils validate enabled enable cmd 'systemsetup-f-setremotelogin{ 0 }' format state salt utils mac utils execute return success cmd return salt utils mac utils confirm updated state get remote login normalize ret True
def set remote login enable state salt utils mac utils validate enabled enable cmd 'systemsetup-f-setremotelogin{ 0 }' format state salt utils mac utils execute return success cmd return salt utils mac utils confirm updated state get remote login normalize ret True
@contextmanagerdef start worker thread app concurrency 1 pool u'solo' loglevel WORKER LOGLEVEL logfile None Work Controller Test Work Controller **kwargs setup app for worker app loglevel logfile assert u'celery ping' in app tasks with app connection as conn conn default channel queue declareworker Work Controller app app concurrency concurrency hostname anon nodename pool pool loglevel loglevel logfile logfile ready callback None without heartbeat True without mingle True without gossip True **kwargs t threading Thread target worker start t start worker ensure started set task join will block False yield worker from celery worker import statestate should terminate 0t join 10 state should terminate None
def volume detach name profile None timeout 300 conn auth profile return conn volume detach name timeout
def volume detach name profile None timeout 300 conn auth profile return conn volume detach name timeout
@pytest mark parametrize 'sep' [ None 'sep'] def test str cat sep if sep is None expr t str cat name str cat t str cat comment expected '\n SELEC Taccounts 2 name accounts 2 comment\n A Sanon 1FRO Maccounts 2 \n'else expr t str cat name str cat t str cat comment sep sep expected '\n SELEC Taccounts 2 name name 1 accounts 2 comment\n A Sanon 1FRO Maccounts 2 \n'result str compute expr s str cat return type 'native' assert normalize result normalize expected
def read config file with io open config file u'rb' as filehandle return filehandle read
def calculate Nonce realm algorithm MD 5 global SUPPORTED ALGORITHM DIGEST AUTH ENCODER Sassert algorithm in SUPPORTED ALGORITHM try encoder DIGEST AUTH ENCODERS[algorithm]except Key Error raise Not Implemented Error ' Thechosenalgorithm %s doesnothaveanimplementationyet' % algorithm return encoder '%d %s' % time time realm
def calculate Nonce realm algorithm MD 5 global SUPPORTED ALGORITHM DIGEST AUTH ENCODER Sassert algorithm in SUPPORTED ALGORITHM try encoder DIGEST AUTH ENCODERS[algorithm]except Key Error raise Not Implemented Error ' Thechosenalgorithm %s doesnothaveanimplementationyet' % algorithm return encoder '%d %s' % time time realm
def get decimal 128 data position dummy 0 dummy 1 dummy 2 end position + 16 return Decimal 128 from bid data[position end] end
def get label flip labels label vertidx src from label import label sign fliplabel flip list for label vertidx in zip labels label vertidx if label hemi 'both' raise Value Error ' Bi Hemi Labelnotsupportedwhenusingsign-flip' if vertidx is not None flip label sign flip label src [ None]else flip Nonelabel flip append flip return label flip
def version with settings hide 'running' 'stdout' 'warnings' warn only True res run 'java-version' if res failed return Noneelse return extract jdk version res
def cigame registry xml parent data XML Sub Element xml parent 'hudson plugins cigame Game Publisher'
def cigame registry xml parent data XML Sub Element xml parent 'hudson plugins cigame Game Publisher'
def cigame registry xml parent data XML Sub Element xml parent 'hudson plugins cigame Game Publisher'
def p boolean sliding window texts segmented topics dictionary window size top ids ret top ids segmented topics window id 0per topic postings {}token 2 id dict dictionary token 2 iddef add topic posting top ids window per topic postings window id token 2 id dict for word in window word id token 2 id dict[word]if word id in top ids if word id in per topic postings per topic postings[word id] add window id else per topic postings[word id] set [window id] window id + 1return window id per topic postings for document in texts it iter document window tuple islice it window size window id per topic postings add topic posting top ids window per topic postings window id token 2 id dict for elem in it window window[ 1 ] + elem window id per topic postings add topic posting top ids window per topic postings window id token 2 id dict return per topic postings window id
def check fill values data assert true data['a'] mask [ False False] all assert true data['a'] [' 1 ' 'a'] all assert true data['b'] mask [ False True] all assert true data['b'] [2 -999 ] all data['b'] mask Falseassert true data['b'] [2 1] all
def remove file source if os path isdir source shutil rmtree source elif os path isfile source or os path islink source os remove source
def warp coords coord map shape dtype np float 64 shape safe as int shape rows cols shape[ 0 ] shape[ 1 ] coords shape [len shape rows cols]if len shape 3 coords shape append shape[ 2 ] coords np empty coords shape dtype dtype tf coords np indices cols rows dtype dtype reshape 2 -1 Ttf coords coord map tf coords tf coords tf coords T reshape -1 cols rows swapaxes 1 2 stackcopy coords[ 1 ] tf coords[ 0 ] stackcopy coords[ 0 ] tf coords[ 1 ] if len shape 3 coords[ 2 ] range shape[ 2 ] return coords
def config value key app None default None app app or current app return get config app get key upper default
def lfsr autocorrelation L P k if not isinstance L list raise Type Error 'L %s mustbealist' % L P int P k int k L0 L[ P]L 1 L0 + L0 [ k] L2 [ -1 ** L1 [i] to int + L1 [ i + k ] to int for i in range P ]tot sum L2 return Rational tot P
def purge name delete key True quiet False path None data do names name 'destroy' path path if data is False return dataif delete key skey salt key Key opts skey delete key name if data is None returnif not quiet jid event fire event {'data' data 'outputter' 'lxc purge'} 'progress' return data
def templated docstring **docs def decorator f f doc format docstring f name f doc docs return freturn decorator
def set hostname new hostname global hostnamehostname new hostname
def select Dialect protocol dialect protocol select Dialect dialect
def current metadata items assert itemslikelies {}consensus {}fields ['artist' 'album' 'albumartist' 'year' 'disctotal' 'mb albumid' 'label' 'catalognum' 'country' 'media' 'albumdisambig']for field in fields values [item[field] for item in items if item] likelies[field] freq plurality values consensus[field] freq len values if consensus['albumartist'] and likelies['albumartist'] likelies['artist'] likelies['albumartist']return likelies consensus
def load Json Value From File input File Path with open input File Path as file Obj value json load file Obj return value
def calculate distance between colors color 1 color 2 return color 1 [ 0 ] + color 2 [ 0 ] / 2 color 1 [ 1 ] + color 2 [ 1 ] / 2 color 1 [ 2 ] + color 2 [ 2 ] / 2
def calculate distance between colors color 1 color 2 return color 1 [ 0 ] + color 2 [ 0 ] / 2 color 1 [ 1 ] + color 2 [ 1 ] / 2 color 1 [ 2 ] + color 2 [ 2 ] / 2
def calculate distance between colors color 1 color 2 return color 1 [ 0 ] + color 2 [ 0 ] / 2 color 1 [ 1 ] + color 2 [ 1 ] / 2 color 1 [ 2 ] + color 2 [ 2 ] / 2
@core helperdef roles translated return authz roles trans
def set locale cls request force None locales cls app config get 'locales' if not locales return Nonelocale forceif locale not in locales locale cls request get 'hl' None if locale not in locales locale cls request cookies get 'hl' None if locale not in locales locale get locale from accept header cls request if locale not in locales territory get country code request or 'ZZ' locale str Locale negotiate territory locales if locale not in locales locale i18 n get store default localei 18 n get i18 n set locale locale cls response set cookie 'hl' locale max age 15724800 return locale
@must be logged indef personal access token detail auth **kwargs id kwargs get ' id' try record Api O Auth 2 Personal Token find one Q ' id' 'eq' id except No Results Found raise HTTP Error http NOT FOUND if record owner auth user raise HTTP Error http FORBIDDEN if record is active is False raise HTTP Error http GONE token detail url api v2 url 'tokens/{}/' format id return {'token list url' '' 'token detail url' token detail url 'scope options' get available scopes }
def add permission Function Name Statement Id Action Principal Source Arn None Source Account None Qualifier None region None key None keyid None profile None try conn get conn region region key key keyid keyid profile profile kwargs {}for key in ' Source Arn' ' Source Account' ' Qualifier' if locals [key] is not None kwargs[key] str locals [key] conn add permission Function Name Function Name Statement Id Statement Id Action Action Principal str Principal **kwargs return {'updated' True}except Client Error as e return {'updated' False 'error' salt utils boto 3 get error e }
def approve files files with review type for file review type in files with review type version file versionaddon version addonhelper Review Helper request None addon addon version file version helper set data {'addon files' [file ] 'comments' u'bulkapproval'} if review type 'full' helper handler process public log info u' File%s addon%s approved' file pk addon pk else log info u' File%s addon%s notapproved addonstatus %s filestatus %s' file pk addon pk addon status file status
def get resume recommendations user request final get most recent incomplete item user if final content get content item language request language channel getattr final 'channel' 'khan' content id final get 'id' return [content] if content else [] else return []
def approx point little src dest xy src read 2 * 8 dest write '\x 00 \x 00 \x 00 ' dest write xy[ -13 -8 ] dest write '\x 00 \x 00 \x 00 ' dest write xy[ -5 ]
def trace view request if request method upper 'TRACE' return Http Response Not Allowed 'TRACE' elif request body return Http Response Bad Request 'TRAC Erequests MUSTNO Tincludeanentity' else protocol request META['SERVER PROTOCOL']t Template '{{method}}{{uri}}{{version}}' name 'TRACE Template' c Context {'method' request method 'uri' request path 'version' protocol} return Http Response t render c
def trace view request if request method upper 'TRACE' return Http Response Not Allowed 'TRACE' elif request body return Http Response Bad Request 'TRAC Erequests MUSTNO Tincludeanentity' else protocol request META['SERVER PROTOCOL']t Template '{{method}}{{uri}}{{version}}' name 'TRACE Template' c Context {'method' request method 'uri' request path 'version' protocol} return Http Response t render c
def get from url url import urllib 2 try return urllib 2 urlopen url read except return None
def get Bytes From File filename offset num Bytes if not isinstance offset int or not isinstance num Bytes int return -1 ' Theoffsetandthenumberofbytesmustbeintegers' if os path exists filename file Size os path getsize filename bytes File open filename 'rb' bytes File seek offset if offset + num Bytes > file Size bytes bytes File read else bytes bytes File read num Bytes bytes File close return 0 bytes else return -1 ' Filedoesnotexist'
def eglob pattern directory ' ' pieces pathsplit pattern return find matches pieces directory
def eglob pattern directory ' ' pieces pathsplit pattern return find matches pieces directory
def eglob pattern directory ' ' pieces pathsplit pattern return find matches pieces directory
def get token username opts get 'rallydev' {} get 'username' None password opts get 'rallydev' {} get 'password' None path 'https //rally 1 rallydev com/slm/webservice/v 2 0/security/authorize'result salt utils http query path decode True decode type 'json' text True status True username username password password cookies True persist session True opts opts if 'dict' not in result return Nonereturn result['dict'][' Operation Result'][' Security Token']
def to bytes msg return to bytes impl msg
def pot for column cls column summary False if summary return 'flavor'elif column info get 'ripped' return 'ripped'elif column name endswith 'effect' return 'effects'else return 'misc'
def submit detailed enrollment features csv request course key task type 'detailed enrollment report'task class enrollment report features csvtask input {}task key ''return submit task request task type task class course key task input task key
def set environment env settings environment env
def extract lsq problems problems Ordered Dict for name problem class in inspect getmembers sys modules[ name ] inspect isclass if name 'LSQ Benchmark Problem' and issubclass problem class LSQ Benchmark Problem and hasattr problem class 'INITIAL GUESSES' for i x0 in enumerate problem class INITIAL GUESSES if len problem class INITIAL GUESSES > 1 key name '{ 0 } {1 }' format name i else key name nameproblems[key name] problem class x0 return problems
def extract lsq problems problems Ordered Dict for name problem class in inspect getmembers sys modules[ name ] inspect isclass if name 'LSQ Benchmark Problem' and issubclass problem class LSQ Benchmark Problem and hasattr problem class 'INITIAL GUESSES' for i x0 in enumerate problem class INITIAL GUESSES if len problem class INITIAL GUESSES > 1 key name '{ 0 } {1 }' format name i else key name nameproblems[key name] problem class x0 return problems
def test json camelcase test data {'under score' 'values can' 'be converted' [{'to camelcase' 'value'} 'wont be convert']}output hug output format json camelcase test data decode 'utf 8 ' assert 'under Score' in output assert 'values can' in output assert 'be Converted' in output assert 'to Camelcase' in output assert 'value' in output assert 'wont be convert' in output
def setglobal name value global dict local dict get twill glocals global dict[name] value
def setglobal name value global dict local dict get twill glocals global dict[name] value
@require GE Tdef ajax status request if not request user is authenticated raise Permission Deniedqs User Preference objects filter user request user key NOTIFICATION PREF KEY return Http Response json dumps {'status' len qs } content type 'application/json'
def domain url match r domain search url if match domain strip www match group 1 else domain urlreturn domain lower
def match all string trie matches []for i in range len string substr string[ i + 1 ]if not trie has prefix substr breakif substr in trie matches append substr return matches
def match all string trie matches []for i in range len string substr string[ i + 1 ]if not trie has prefix substr breakif substr in trie matches append substr return matches
@testing requires testing datadef test acqparser averaging raw read raw fif fname raw elekta preload True acqp Acq Parser FIF raw info for cat in acqp categories cond acqp get condition raw cat eps Epochs raw baseline -0 05 0 **cond ev eps average ev ref read evokeds fname ave elekta cat['comment'] baseline -0 05 0 proj False ev mag ev copy ev mag pick channels ['MEG 0111 '] ev grad ev copy ev grad pick channels ['MEG 2643 ' 'MEG 1622 '] ev ref mag ev ref copy ev ref mag pick channels ['MEG 0111 '] ev ref grad ev ref copy ev ref grad pick channels ['MEG 2643 ' 'MEG 1622 '] assert allclose ev mag data ev ref mag data rtol 0 atol 1e- 15 assert allclose ev grad data ev ref grad data rtol 0 atol 1e- 13
def get versions string result []for version in get versions list result append '*%s%s' % version[ 0 ] version[ 2 ] return '\n' join result
def gf trace map a b c n f p K u gf compose mod a b f p K v bif n & 1 U gf add a u p K V belse U aV cn >> 1while n u gf add u gf compose mod u v f p K p K v gf compose mod v v f p K if n & 1 U gf add U gf compose mod u V f p K p K V gf compose mod v V f p K n >> 1return gf compose mod a V f p K U
def gf trace map a b c n f p K u gf compose mod a b f p K v bif n & 1 U gf add a u p K V belse U aV cn >> 1while n u gf add u gf compose mod u v f p K p K v gf compose mod v v f p K if n & 1 U gf add U gf compose mod u V f p K p K V gf compose mod v V f p K n >> 1return gf compose mod a V f p K U
def set custom selection params chs params['fig selection'] lasso selectionif len chs 0 returnlabels [l text for l in params['fig selection'] radio labels]inds np in 1 d params['raw'] ch names chs params['selections'][' Custom'] np where inds [0 ] set radio button labels index ' Custom' params params
def set custom selection params chs params['fig selection'] lasso selectionif len chs 0 returnlabels [l text for l in params['fig selection'] radio labels]inds np in 1 d params['raw'] ch names chs params['selections'][' Custom'] np where inds [0 ] set radio button labels index ' Custom' params params
def unindent dict docdict can dict {}for name dstr in docdict items can dict[name] unindent string dstr return can dict
def unindent dict docdict can dict {}for name dstr in docdict items can dict[name] unindent string dstr return can dict
def Laplace name mu b return rv name Laplace Distribution mu b
@register simple tag takes context True def render product context product if not product return ''names [ 'catalogue/partials/product/upc-%s html' % product upc 'catalogue/partials/product/class-%s html' % product get product class slug 'catalogue/partials/product html']template select template names context['product'] productreturn template render context
@register simple tag takes context True def render product context product if not product return ''names [ 'catalogue/partials/product/upc-%s html' % product upc 'catalogue/partials/product/class-%s html' % product get product class slug 'catalogue/partials/product html']template select template names context['product'] productreturn template render context
def inbox if not auth s3 logged in session error T ' Requires Login ' redirect URL c 'default' f 'user' args 'login' table s3 db msg messages 3 filter table inbound True table inbound readable Falsetablename 'msg message's 3 crud strings[tablename] Storage title display T ' Message Details' title list T ' In Box' label list button T ' View In Box' label delete button T ' Delete Message' msg record deleted T ' Messagedeleted' msg list empty T ' No Messagescurrentlyin In Box' s3 db configure tablename editable False insertable False list fields ['id' 'date' 'channel id' 'from address' 'body'] return s3 rest controller module 'message'
def get application call var return get annotation var Application Call
def get application call var return get annotation var Application Call
def test column params should be preserved under inheritance class My Table A My Table u'\nhavinganempty`class Meta`shouldnotundotheexplicitdefinition\nofcolumnitem 1 in My Table \n'class Meta My Table Meta passclass My Table B My Table u'\nhavinganon-empty`class Meta`shouldnotundotheexplicitdefinition\nofcolumnitem 1 in My Table \n'class Meta My Table Meta per page 22 table My Table My Model objects all table A My Table A My Model objects all table B My Table B My Model objects all assert table columns[u'item 1 '] verbose name u' Nicecolumnname' assert table A columns[u'item 1 '] verbose name u' Nicecolumnname' assert table B columns[u'item 1 '] verbose name u' Nicecolumnname'
@pytest fixture scope 'session' def dcos launchpad dcos api session if 'AWS STACK NAME' not in os environ pytest skip ' Mustusea AWS Cloudformationtoruntest' stack name os environ['AWS STACK NAME']aws region os environ['AWS REGION']aws access key id os environ['AWS ACCESS KEY ID']aws secret access key os environ['AWS SECRET ACCESS KEY']bw test util aws Boto Wrapper aws region aws access key id aws secret access key return test util aws Dcos Cf Simple stack name bw
@pytest fixture scope 'session' def dcos launchpad dcos api session if 'AWS STACK NAME' not in os environ pytest skip ' Mustusea AWS Cloudformationtoruntest' stack name os environ['AWS STACK NAME']aws region os environ['AWS REGION']aws access key id os environ['AWS ACCESS KEY ID']aws secret access key os environ['AWS SECRET ACCESS KEY']bw test util aws Boto Wrapper aws region aws access key id aws secret access key return test util aws Dcos Cf Simple stack name bw
def get cache dir subdir None cache dir os environ get 'NEON CACHE DIR' if cache dir is None cache dir appdirs user cache dir 'neon' 'neon' if subdir subdir subdir if isinstance subdir list else [subdir] cache dir os path join cache dir *subdir if not os path exists cache dir os makedirs cache dir return cache dir
def rand alnum length 0 jibber '' join [letters digits] return '' join choice jibber for in xrange length or randint 10 30
def to class path cls return ' ' join [cls module cls name ]
def fake pgettext translations def pgettext context text return translations get context text text return pgettext
def inv a return Inv a
def updating writer a log debug 'updatingthecontext' context a[ 0 ]register 3slave id 0address 16 values context[slave id] get Values register address count 5 values [ v + 1 for v in values]log debug 'newvalues ' + str values context[slave id] set Values register address values
def get Geometry Path sub Name '' return get Joined Path get Fabmetheus Utilities Path 'geometry' sub Name
@publicdef together expr deep False def together expr if isinstance expr Basic if expr is Atom or expr is Function and not deep return exprelif expr is Add return gcd terms list map together Add make args expr elif expr is Pow base together expr base if deep exp together expr exp else exp expr expreturn expr class base exp else return expr class *[ together arg for arg in expr args] elif iterable expr return expr class [ together ex for ex in expr] return exprreturn together sympify expr
def get preamble latex preamble rc Params get u'pgf preamble' u'' if type latex preamble list latex preamble u'\n' join latex preamble return latex preamble
def coordinate to tuple coordinate col row coordinate from string coordinate return row COL STRING CACHE[col]
def strftime fmt t None if not fmt return u''if t is None t time localtime if hasattr t 'timetuple' t t timetuple early year t[ 0 ] < 1900 if early year replacement 1900 if t[ 0 ] % 4 0 else 1901 fmt fmt replace '%Y' ' earlyyearhack##' t list t orig year t[ 0 ]t[ 0 ] replacementans Noneif iswindows if isinstance fmt unicode fmt fmt encode 'mbcs' fmt fmt replace '%e' '%#d' ans plugins['winutil'][ 0 ] strftime fmt t else ans time strftime fmt t decode preferred encoding 'replace' if early year ans ans replace ' earlyyearhack##' str orig year return ans
def strftime fmt t None if not fmt return u''if t is None t time localtime if hasattr t 'timetuple' t t timetuple early year t[ 0 ] < 1900 if early year replacement 1900 if t[ 0 ] % 4 0 else 1901 fmt fmt replace '%Y' ' earlyyearhack##' t list t orig year t[ 0 ]t[ 0 ] replacementans Noneif iswindows if isinstance fmt unicode fmt fmt encode 'mbcs' fmt fmt replace '%e' '%#d' ans plugins['winutil'][ 0 ] strftime fmt t else ans time strftime fmt t decode preferred encoding 'replace' if early year ans ans replace ' earlyyearhack##' str orig year return ans
def strftime fmt t None if not fmt return u''if t is None t time localtime if hasattr t 'timetuple' t t timetuple early year t[ 0 ] < 1900 if early year replacement 1900 if t[ 0 ] % 4 0 else 1901 fmt fmt replace '%Y' ' earlyyearhack##' t list t orig year t[ 0 ]t[ 0 ] replacementans Noneif iswindows if isinstance fmt unicode fmt fmt encode 'mbcs' fmt fmt replace '%e' '%#d' ans plugins['winutil'][ 0 ] strftime fmt t else ans time strftime fmt t decode preferred encoding 'replace' if early year ans ans replace ' earlyyearhack##' str orig year return ans
def clocktime to millisecond value return value // Gst MSECOND
def offset or limit clause asint clause attrname if clause is None return Nonetry value clause limit offset valueexcept Attribute Error raise exc Compile Error ' This SELEC Tstructuredoesnotuseasimpleintegervaluefor%s' % attrname else return util asint value
def optimize p gets set puts []prevpos Nonefor opcode arg pos in genops p if prevpos is not None puts append prevarg prevpos pos prevpos Noneif 'PUT' in opcode name prevarg prevpos arg pos elif 'GET' in opcode name gets add arg s []i 0for arg start stop in puts j stop if arg in gets else start s append p[i j] i stops append p[i ] return '' join s
def optimize p gets set puts []prevpos Nonefor opcode arg pos in genops p if prevpos is not None puts append prevarg prevpos pos prevpos Noneif 'PUT' in opcode name prevarg prevpos arg pos elif 'GET' in opcode name gets add arg s []i 0for arg start stop in puts j stop if arg in gets else start s append p[i j] i stops append p[i ] return '' join s
def optimize p gets set puts []prevpos Nonefor opcode arg pos in genops p if prevpos is not None puts append prevarg prevpos pos prevpos Noneif 'PUT' in opcode name prevarg prevpos arg pos elif 'GET' in opcode name gets add arg s []i 0for arg start stop in puts j stop if arg in gets else start s append p[i j] i stops append p[i ] return '' join s
def optimize p gets set puts []prevpos Nonefor opcode arg pos in genops p if prevpos is not None puts append prevarg prevpos pos prevpos Noneif 'PUT' in opcode name prevarg prevpos arg pos elif 'GET' in opcode name gets add arg s []i 0for arg start stop in puts j stop if arg in gets else start s append p[i j] i stops append p[i ] return '' join s
@pytest mark parametrize 'parallel' [ True False] def test commented header parallel read commented header text '\n#ABC\n 123 \n 456 \n't 1 read commented header text parallel parallel expected Table [[ 1 4] [2 5] [3 6]] names 'A' 'B' 'C' assert table equal t1 expected text '#firstcommentedline\n#secondcommentedline\n\n' + text t2 read commented header text header start 2 data start 0 parallel parallel assert table equal t2 expected t3 read commented header text header start -1 data start 0 parallel parallel assert table equal t3 expected text + '789 't 4 read commented header text header start 2 data start 2 parallel parallel expected Table [[ 7 ] [8 ] [9 ]] names 'A' 'B' 'C' assert table equal t4 expected with pytest raises Parameter Error read commented header text header start -1 data start -1 parallel parallel
@pytest mark parametrize 'parallel' [ True False] def test commented header parallel read commented header text '\n#ABC\n 123 \n 456 \n't 1 read commented header text parallel parallel expected Table [[ 1 4] [2 5] [3 6]] names 'A' 'B' 'C' assert table equal t1 expected text '#firstcommentedline\n#secondcommentedline\n\n' + text t2 read commented header text header start 2 data start 0 parallel parallel assert table equal t2 expected t3 read commented header text header start -1 data start 0 parallel parallel assert table equal t3 expected text + '789 't 4 read commented header text header start 2 data start 2 parallel parallel expected Table [[ 7 ] [8 ] [9 ]] names 'A' 'B' 'C' assert table equal t4 expected with pytest raises Parameter Error read commented header text header start -1 data start -1 parallel parallel
@pytest mark parametrize 'parallel' [ True False] def test commented header parallel read commented header text '\n#ABC\n 123 \n 456 \n't 1 read commented header text parallel parallel expected Table [[ 1 4] [2 5] [3 6]] names 'A' 'B' 'C' assert table equal t1 expected text '#firstcommentedline\n#secondcommentedline\n\n' + text t2 read commented header text header start 2 data start 0 parallel parallel assert table equal t2 expected t3 read commented header text header start -1 data start 0 parallel parallel assert table equal t3 expected text + '789 't 4 read commented header text header start 2 data start 2 parallel parallel expected Table [[ 7 ] [8 ] [9 ]] names 'A' 'B' 'C' assert table equal t4 expected with pytest raises Parameter Error read commented header text header start -1 data start -1 parallel parallel
def scour Length length length SVG Length length return scour Unitless Length length value + Unit str length units
def get video from youtube id youtube id for channel language in available content databases video get video from youtube id channel channel language language youtube id youtube id if video return video
def missing node cache prov dir node list provider opts cached nodes []for node in os listdir prov dir cached nodes append os path splitext node [0 ] for node in cached nodes if node not in node list delete minion cachedir node provider opts if 'diff cache events' in opts and opts['diff cache events'] fire event 'event' 'cachednodemissingfromprovider' 'salt/cloud/{ 0 }/cache node missing' format node args {'missingnode' node} sock dir opts get 'sock dir' os path join opts ['sock dir'] 'master' transport opts get 'transport' 'zeromq'
def missing node cache prov dir node list provider opts cached nodes []for node in os listdir prov dir cached nodes append os path splitext node [0 ] for node in cached nodes if node not in node list delete minion cachedir node provider opts if 'diff cache events' in opts and opts['diff cache events'] fire event 'event' 'cachednodemissingfromprovider' 'salt/cloud/{ 0 }/cache node missing' format node args {'missingnode' node} sock dir opts get 'sock dir' os path join opts ['sock dir'] 'master' transport opts get 'transport' 'zeromq'
def makedirs path user None group None mode None path os path expanduser path dirname os path normpath os path dirname path if os path isdir dirname msg " Directory'{ 0 }'alreadyexists" format dirname log debug msg return msgif os path exists dirname msg " Thepath'{ 0 }'alreadyexistsandisnotadirectory" format dirname log debug msg return msgdirectories to create []while True if os path isdir dirname breakdirectories to create append dirname current dirname dirnamedirname os path dirname dirname if current dirname dirname raise Salt Invocation Error " Recursivecreationforpath'{ 0 }'wouldresultinaninfiniteloop Pleaseuseanabsolutepath " format dirname directories to create reverse for directory to create in directories to create log debug ' Creatingdirectory %s' directory to create mkdir directory to create user user group group mode mode
def jarque bera x x np asarray x n float x size if n 0 raise Value Error ' Atleastoneobservationisrequired ' mu x mean diffx x - mu skewness 1 / n * np sum diffx ** 3 / 1 / n * np sum diffx ** 2 ** 3 / 2 0 kurtosis 1 / n * np sum diffx ** 4 / 1 / n * np sum diffx ** 2 ** 2 jb value n / 6 * skewness ** 2 + kurtosis - 3 ** 2 / 4 p 1 - distributions chi 2 cdf jb value 2 return jb value p
def jarque bera x x np asarray x n float x size if n 0 raise Value Error ' Atleastoneobservationisrequired ' mu x mean diffx x - mu skewness 1 / n * np sum diffx ** 3 / 1 / n * np sum diffx ** 2 ** 3 / 2 0 kurtosis 1 / n * np sum diffx ** 4 / 1 / n * np sum diffx ** 2 ** 2 jb value n / 6 * skewness ** 2 + kurtosis - 3 ** 2 / 4 p 1 - distributions chi 2 cdf jb value 2 return jb value p
def attach is fan queryset user as field 'is fan attr' model queryset modelif user is None or user is anonymous sql 'SELEC Tfalse'else sql "\n SELECTCOUNT likes like id >0 \n FRO Mlikes like\n INNERJOI Ndjango content type O Nlikes like content type id django content type id\n WHER Edjango content type model 'project'AND\ndjango content type app label 'projects'AND\nlikes like user id {user id}AND\nlikes like object id {tbl} id\n"sql sql format tbl model meta db table user id user id queryset queryset extra select {as field sql} return queryset
def attach is fan queryset user as field 'is fan attr' model queryset modelif user is None or user is anonymous sql 'SELEC Tfalse'else sql "\n SELECTCOUNT likes like id >0 \n FRO Mlikes like\n INNERJOI Ndjango content type O Nlikes like content type id django content type id\n WHER Edjango content type model 'project'AND\ndjango content type app label 'projects'AND\nlikes like user id {user id}AND\nlikes like object id {tbl} id\n"sql sql format tbl model meta db table user id user id queryset queryset extra select {as field sql} return queryset
def uninstall global task task stop task None
def get changes for svn txn repo path txn id changes subproc check output ['svnlook' 'changed' repo path '-t' txn id] for line in String IO changes yield line[ 0 ] line[ 4 -1 ]
def delete api deployment rest Api Id deployment Id region None key None keyid None profile None try conn get conn region region key key keyid keyid profile profile conn delete deployment rest Api Id rest Api Id deployment Id deployment Id return {'deleted' True}except Client Error as e return {'deleted' False 'error' salt utils boto 3 get error e }
def delete api deployment rest Api Id deployment Id region None key None keyid None profile None try conn get conn region region key key keyid keyid profile profile conn delete deployment rest Api Id rest Api Id deployment Id deployment Id return {'deleted' True}except Client Error as e return {'deleted' False 'error' salt utils boto 3 get error e }
@pytest fixturedef english from pootle language models import Languagereturn Language objects get code 'en'
def get Process Output And Value executable args env {} path None reactor None return call Protocol With Deferred Everything Getter executable args env path reactor
def clean Query query ret Val queryfor sql Statements in SQL STATEMENTS values for sql Statement in sql Statements sql Statement Esc sql Statement replace ' ' '\\ ' query Match re search ' %s ' % sql Statement Esc query re I if query Match and 'sys exec' not in query ret Val ret Val replace query Match group 1 sql Statement upper return ret Val
def fix error editor self filename linenum column msg warnings warn '\n`fix error editor`ispendingdeprecationasof I Python 5 0andwillberemoved\ninfutureversions Itappearstobeusedonlyforautomaticallyfixingsyntax\nerrorthathasbeenbrokenforafewyearsandhasthusbeenremoved Ifyou\nhappendtousethisfunctionandstillneeditpleasemakeyourvoiceheardon\nthemailinglistipython-dev@scipy org oronthe Git Hub Issuetracker \nhttps //github com/ipython/ipython/issues/ 9649 ' User Warning def vim quickfix file t tempfile Named Temporary File t write '%s %d %d %s\n' % filename linenum column msg t flush return tif os path basename self editor 'vim' self hooks editor filename linenum returnt vim quickfix file try if os system 'vim--cmd"seterrorformat %f %l %c %m"-q' + t name raise Try Next finally t close
def handle cputime metric common props sample cputime samples []wallclock key u'--WALL--'for data in sample['value'] itervalues wall time data[wallclock key]for process value in data iteritems if process wallclock key cputime sample dict common props cputime sample['process'] processcputime sample['value'] valuecputime sample['wallclock'] wall timecputime samples append cputime sample return cputime samples
def report nodes not run notrun if notrun logger info u'***********************************' for info in notrun logger error u'couldnotrunnode %s' % u' ' join info[u'node'] hierarchy info[u'node'] id logger info u'crashfile %s' % info[u'crashfile'] logger debug u' Thefollowingdependentnodeswerenotrun' for subnode in info[u'dependents'] logger debug subnode id logger info u'***********************************' raise Runtime Error u' Workflowdidnotexecutecleanly Checklogfordetails'
def report nodes not run notrun if notrun logger info u'***********************************' for info in notrun logger error u'couldnotrunnode %s' % u' ' join info[u'node'] hierarchy info[u'node'] id logger info u'crashfile %s' % info[u'crashfile'] logger debug u' Thefollowingdependentnodeswerenotrun' for subnode in info[u'dependents'] logger debug subnode id logger info u'***********************************' raise Runtime Error u' Workflowdidnotexecutecleanly Checklogfordetails'
def report nodes not run notrun if notrun logger info u'***********************************' for info in notrun logger error u'couldnotrunnode %s' % u' ' join info[u'node'] hierarchy info[u'node'] id logger info u'crashfile %s' % info[u'crashfile'] logger debug u' Thefollowingdependentnodeswerenotrun' for subnode in info[u'dependents'] logger debug subnode id logger info u'***********************************' raise Runtime Error u' Workflowdidnotexecutecleanly Checklogfordetails'
def report nodes not run notrun if notrun logger info u'***********************************' for info in notrun logger error u'couldnotrunnode %s' % u' ' join info[u'node'] hierarchy info[u'node'] id logger info u'crashfile %s' % info[u'crashfile'] logger debug u' Thefollowingdependentnodeswerenotrun' for subnode in info[u'dependents'] logger debug subnode id logger info u'***********************************' raise Runtime Error u' Workflowdidnotexecutecleanly Checklogfordetails'
@pytest mark django dbdef test add store fs by store po directory english fs path '/some/fs/example store po'project Project DB Factory source language english language Language DB Factory tp Translation Project Factory project project language language store Store DB Factory translation project tp parent tp directory name 'example store po' conf config get tp project class instance tp project conf set config 'pootle fs fs type' 'localfs' conf set config 'pootle fs fs url' 'foo' store fs Store FS objects create store store path fs path assert store fs project project assert store fs store store assert store fs pootle path store pootle path assert store fs path fs path assert store fs last sync hash is None assert store fs last sync mtime is None assert store fs last sync revision is None
def sdm spoly f g O K phantom None if not f or not g return sdm zero LM 1 sdm LM f LM 2 sdm LM g if LM 1 [ 0 ] LM 2 [ 0 ] return sdm zero LM 1 LM 1 [ 1 ]LM 2 LM 2 [ 1 ]lcm monomial lcm LM 1 LM 2 m1 monomial div lcm LM 1 m2 monomial div lcm LM 2 c K quo - sdm LC f K sdm LC g K r1 sdm add sdm mul term f m1 K one O K sdm mul term g m2 c O K O K if phantom is None return r1 r 2 sdm add sdm mul term phantom[ 0 ] m1 K one O K sdm mul term phantom[ 1 ] m2 c O K O K return r1 r2
def absent name region user None opts False ret {'name' name 'result' True 'comment' '' 'changes' {}}does exist salt ['aws sqs queue exists'] name region opts user if does exist if opts ['test'] ret['result'] Noneret['comment'] 'AWSSQ Squeue{ 0 }issettoberemoved' format name return retremoved salt ['aws sqs delete queue'] name region opts user if removed['retcode'] 0 ret['changes']['removed'] removed['stdout']else ret['result'] Falseret['comment'] removed['stderr']else ret['comment'] u'{ 0 }doesnotexistin{ 1 }' format name region return ret
def info msg html False also console False write msg 'INFO' html if also console console msg
def pattern matches pattern target if not isinstance pattern Pattern pattern compile pattern pattern return pattern matches target
def randrange n vmin vmax return vmax - vmin * np random rand n + vmin
def randrange n vmin vmax return vmax - vmin * np random rand n + vmin
def upgrade migrate engine meta Meta Data meta bind migrate enginevolume type projects Table 'volume type projects' meta autoload True if migrate engine name 'postgresql' sql 'ALTERTABL Evolume type projects ALTERCOLUM Ndeleted' + 'TYPEINTEGERUSIN Gdeleted integer' migrate engine execute sql else volume type projects c deleted alter Integer
def setup logging log setup CONF 'keystone' logging capture Warnings True
def get default version server None req servers service pb Get Default Version Request if server req set server server resp servers service pb Get Default Version Response try apiproxy stub map Make Sync Call 'servers' ' Get Default Version' req resp except apiproxy errors Application Error as e if e application error servers service pb Servers Service Error INVALID SERVER raise Invalid Server Error if e application error servers service pb Servers Service Error INVALID VERSION raise Invalid Version Error else raise Error return resp version
def get menu class for instance menu class instance attrs {'instance' instance}class name menu class name meta class type menu class return meta class class name menu class attrs
def get menu class for instance menu class instance attrs {'instance' instance}class name menu class name meta class type menu class return meta class class name menu class attrs
def attachment sequence attachments if len attachments 2 and isinstance attachments[ 0 ] basestring return attachments return attachments
def get std icon name size None if not name startswith 'SP ' name 'SP ' + name icon Q Widget style standard Icon getattr Q Style name if size is None return iconelse return Q Icon icon pixmap size size
def load stream Loader Loader loader Loader stream try r loader get single data return r loader haserrors finally loader dispose
def load stream Loader Loader loader Loader stream try r loader get single data return r loader haserrors finally loader dispose
@apply to maskdef even size clip w h clip sizeif w % 2 0 and h % 2 0 return clipif w % 2 0 and h % 2 0 fl image lambda a a[ -1 -1 ] elif w % 2 0 fl image lambda a a[ -1 ] else fl image lambda a a[ -1 ] return clip fl image fl image
def clone Host individual clone individual class individual clone fitness values individual fitness valuesreturn clone
def clone Host individual clone individual class individual clone fitness values individual fitness valuesreturn clone
def get runnertype by name runnertype name try runnertypes Runner Type query name runnertype name except Value Error Validation Error as e LOG error ' Databaselookupforname "%s"resultedinexception %s' runnertype name e raise Stack Storm DB Object Not Found Error ' Unabletofindrunnertypewithname "%s"' % runnertype name if not runnertypes raise Stack Storm DB Object Not Found Error ' Unabletofind Runner Typewithname "%s"' % runnertype name if len runnertypes > 1 LOG warning ' Morethanone Runner Typereturnedfrom D Blookupbyname Resultlistis %s' runnertypes return runnertypes[ 0 ]
def get solidity if get compiler path is None return Nonereturn solc wrapper
def get solidity if get compiler path is None return Nonereturn solc wrapper
def test no nans np random seed 1 image 0 5 + 1e- 09 * np random normal size 20 20 template np ones 6 6 template[ 3 ] 0result match template image template assert not np any np isnan result
def test no nans np random seed 1 image 0 5 + 1e- 09 * np random normal size 20 20 template np ones 6 6 template[ 3 ] 0result match template image template assert not np any np isnan result
def test no nans np random seed 1 image 0 5 + 1e- 09 * np random normal size 20 20 template np ones 6 6 template[ 3 ] 0result match template image template assert not np any np isnan result
def native set to python list typ payload c nitems payload usedlistobj c pyapi list new nitems ok cgutils is not null c builder listobj with c builder if then ok likely True index cgutils alloca once value c builder ir Constant nitems type 0 with payload iterate as loop i c builder load index item loop entry keyitemobj c box typ dtype item c pyapi list setitem listobj i itemobj i c builder add i ir Constant i type 1 c builder store i index return ok listobj
def async runner timeout async factory Async Runner make factory timeout timeout total seconds suppress twisted logging False store twisted logs False return retry flaky async factory
def find host search host inventory host attribs inventory get search host {} print json dumps host attribs
def decode Generator params return Generic Batch Generator
def decode Generator params return Generic Batch Generator
def find appropriate compiler config vars if 'CC' in os environ return config varscc oldcc config vars['CC'] split [0 ]if not find executable cc cc find build tool 'clang' elif os path basename cc startswith 'gcc' data read output "'%s'--version" % cc replace "'" '\'"\'"\'' if data and 'llvm-gcc' in data cc find build tool 'clang' if not cc raise System Error ' Cannotlocateworkingcompiler' if cc oldcc for cv in COMPILER CONFIG VARS if cv in config vars and cv not in os environ cv split config vars[cv] split cv split[ 0 ] cc if cv 'CXX' else cc + '++' save modified value config vars cv '' join cv split return config vars
def pnio rtc guess payload class pkt underlayer None *args **kargs config pnio get config underlayer if isinstance config list cur index - len pkt for index cls params in config if cur index index return cls pkt config params *args **kargs return PNIO Real Time I Ox S pkt *args **kargs else return PNIO Real Time Raw Data pkt config {'length' len pkt } *args **kargs
def pnio rtc guess payload class pkt underlayer None *args **kargs config pnio get config underlayer if isinstance config list cur index - len pkt for index cls params in config if cur index index return cls pkt config params *args **kargs return PNIO Real Time I Ox S pkt *args **kargs else return PNIO Real Time Raw Data pkt config {'length' len pkt } *args **kargs
def assign obj **kwargs obj dict update kwargs
def remove items headers condition removed {}keys filter condition headers removed update key headers pop key for key in keys return removed
def remove items headers condition removed {}keys filter condition headers removed update key headers pop key for key in keys return removed
@receiver REGISTER USER def email marketing register user sender user None profile None **kwargs email config Email Marketing Configuration current if not email config enabled returnif user is anonymous returnupdate user delay create sailthru user vars user user profile user email site get current site new user True
def dotrig a b return a func b func and a has Trigonometric Function and b has Trigonometric Function or a has Hyperbolic Function and b has Hyperbolic Function
def dotrig a b return a func b func and a has Trigonometric Function and b has Trigonometric Function or a has Hyperbolic Function and b has Hyperbolic Function
def encode table pieces table table table or {} length index len pieces pieces append None tablesize 0for key value in table items tablesize + encode short string pieces key tablesize + encode value pieces value pieces[length index] struct pack '>I' tablesize return tablesize + 4
def encode table pieces table table table or {} length index len pieces pieces append None tablesize 0for key value in table items tablesize + encode short string pieces key tablesize + encode value pieces value pieces[length index] struct pack '>I' tablesize return tablesize + 4
def to sql frame name con flavor None schema None if exists 'fail' index True index label None chunksize None dtype None if if exists not in 'fail' 'replace' 'append' raise Value Error "'{ 0 }'isnotvalidforif exists" format if exists pandas sql pandas SQL builder con schema schema flavor flavor if isinstance frame Series frame frame to frame elif not isinstance frame Data Frame raise Not Implemented Error "'frame'argumentshouldbeeithera Seriesora Data Frame" pandas sql to sql frame name if exists if exists index index index label index label schema schema chunksize chunksize dtype dtype
def assert desired datasets case deployer desired manifestations local datasets local applications additional node config set expected datasets leases Leases calculator Recording Calculator NOTHING TO DO deployer deployer set calculator calculator cluster configuration Deployment nodes { Node uuid deployer node uuid hostname deployer hostname manifestations {manifestation dataset dataset id manifestation for manifestation in desired manifestations} } additional node config leases leases local state Block Device Deployer Local State node uuid deployer node uuid hostname deployer hostname datasets {dataset dataset id dataset for dataset in local datasets} node state nonmanifest datasets local state shared state changes cluster state Deployment State nodes {node state set applications local applications } nonmanifest datasets nonmanifest datasets datasets deployer calculate changes configuration cluster configuration cluster state cluster state local state local state case assert Equal {dataset dataset id dataset for dataset in expected datasets} calculator desired datasets
@handle dashboard error@require POST@ensure csrf cookie@cache control no cache True no store True must revalidate True @require level 'staff' @require post params 'student' 'url' def reset due date request course id course get course by id Slash Separated Course Key from deprecated string course id student require student from identifier request POST get 'student' unit find unit course request POST get 'url' set due date extension course unit student None if not getattr unit 'due' None return Json Response ' Successfullyremovedinvalidduedateextension unithasnoduedate ' original due date str unit due strftime '%Y-%m-%d%H %M' return Json Response ' Successfullyresetduedateforstudent{ 0 }for{ 1 }to{ 2 }' format student profile name display unit unit original due date str
def get nat gateways client subnet id None nat gateway id None states None check mode False params dict err msg ''gateways retrieved Falseexisting gateways list if not states states ['available' 'pending']if nat gateway id params[' Nat Gateway Ids'] [nat gateway id]else params[' Filter'] [{' Name' 'subnet-id' ' Values' [subnet id]} {' Name' 'state' ' Values' states}]try if not check mode gateways client describe nat gateways **params [' Nat Gateways']if gateways for gw in gateways existing gateways append convert to lower gw gateways retrieved Trueelse gateways retrieved Trueif nat gateway id if DRY RUN GATEWAYS[ 0 ]['nat gateway id'] nat gateway id existing gateways DRY RUN GATEWAY Selif subnet id if DRY RUN GATEWAYS[ 0 ]['subnet id'] subnet id existing gateways DRY RUN GATEWAY Serr msg '{ 0 } Retrievinggateways' format DRY RUN MSGS except botocore exceptions Client Error as e err msg str e return gateways retrieved err msg existing gateways
def entity from response type feature type results detected objects []if feature type FACE ANNOTATIONS detected objects extend Face from api repr face for face in results elif feature type IMAGE PROPERTIES ANNOTATION return Image Properties Annotation from api repr results elif feature type SAFE SEARCH ANNOTATION return Safe Search Annotation from api repr results else for result in results detected objects append Entity Annotation from api repr result return detected objects
def get user bootinfo bootinfo user frappe get user load user
def quote windows value value list 2 cmdline [value] return value
def get combination hash from variable mapping parent variables mapping {}for variable identifier value identifier in variables items variable Product Variation Variable objects get or create product parent identifier force text variable identifier value Product Variation Variable Value objects get or create variable variable identifier force text value identifier mapping[variable] valuereturn hash combination mapping
def setup platform hass config add devices callback discovery info None def run setup event ' Delaythesetupuntil Home Assistantisfullyinitialized \n\n Thisallowsanyentitiestobecreatedalready\n'options config get CONF OPTIONS if options get 'units' is None options['units'] hass config units nametravel mode config get CONF TRAVEL MODE mode options get CONF MODE if travel mode is not None wstr ' Google Travel Time travel modeisdeprecated pleaseaddmodetotheoptionsdictionaryinstead ' LOGGER warning wstr if mode is None options[CONF MODE] travel modetitled mode options get CONF MODE title formatted name '{}-{}' format DEFAULT NAME titled mode name config get CONF NAME formatted name api key config get CONF API KEY origin config get CONF ORIGIN destination config get CONF DESTINATION sensor Google Travel Time Sensor hass name api key origin destination options if sensor valid api connection add devices callback [sensor] hass bus listen once EVENT HOMEASSISTANT START run setup
def stub verify conn cert errno errdepth code return True
def stub verify conn cert errno errdepth code return True
def stub verify conn cert errno errdepth code return True
def stub verify conn cert errno errdepth code return True
def tunnel connection socket addr server keyfile None password None paramiko None timeout 60 new url tunnel open tunnel addr server keyfile keyfile password password paramiko paramiko timeout timeout socket connect new url return tunnel
@bp route '/delete' methods ['GET' 'POST'] @require logindef delete return 'notready'
@command ' mv sw \\s* \\d{ 1 4} \\s*[\\s ]\\s* \\d{ 1 4} ' def songlist mv sw action a b i j int a - 1 int b - 1 if action 'mv' g model songs insert j g model songs pop i g message util F 'songmove' % g model[j] title b elif action 'sw' g model[i] g model[j] g model[j] g model[i] g message util F 'songsw' % min a b max a b g content content generate songlist display
@command ' mv sw \\s* \\d{ 1 4} \\s*[\\s ]\\s* \\d{ 1 4} ' def songlist mv sw action a b i j int a - 1 int b - 1 if action 'mv' g model songs insert j g model songs pop i g message util F 'songmove' % g model[j] title b elif action 'sw' g model[i] g model[j] g model[j] g model[i] g message util F 'songsw' % min a b max a b g content content generate songlist display
def xblock local resource url block uri xblock class getattr block class 'unmixed class' block class if settings PIPELINE ENABLED or not settings REQUIRE DEBUG return staticfiles storage url 'xblock/resources/{package name}/{path}' format package name xblock class module path uri else return reverse 'xblock resource url' kwargs {'block type' block scope ids block type 'uri' uri}
def cas key value old value store load if key not in store return Falseif store[key] old value return Falsestore[key] valuedump store return True
def status name sig None cmd 'svstat{ 0 }' format service path name out salt ['cmd run stdout'] cmd python shell False try pid re search '\\ pid \\d+ \\ ' out group 1 except Attribute Error pid ''return pid
def batch shuffle index array batch size batch count int len index array / batch size last batch index array[ batch count * batch size ]index array index array[ batch count * batch size ]index array index array reshape batch count batch size np random shuffle index array index array index array flatten return np append index array last batch
def set Blocking fd flags fcntl fcntl fd fcntl F GETFL flags flags & ~ os O NONBLOCK fcntl fcntl fd fcntl F SETFL flags
def report config interaction modified modifiers if isinstance modified str modified modified if isinstance modifiers str modifiers modifiers for var in modified VAR MODIFIERS setdefault var set update modifiers
def exists storage indexname None if indexname is None indexname DEF INDEX NAM Etry ix storage open index indexname gen ix latest generation ix close return gen > -1 except Empty Index Error passreturn False
def register make cls assert cls nxm headers is not None assert cls nxm headers is not [] for nxm header in cls nxm headers assert nxm header not in MF FIELDS MF FIELDS[nxm header] cls makereturn cls
def test install folder using relative path script script scratch path join 'initools' mkdir script scratch path join 'initools' 'mock' mkdir pkg path script scratch path / 'initools' / 'mock' pkg path join 'setup py' write mock 100 setup py result script pip 'install' Path 'initools' / 'mock' egg folder script site packages / 'mock- 100 1-py%s egg-info' % pyversion assert egg folder in result files created str result
@app route '/v 1 /repositories/<path repository>/' methods ['DELETE'] @app route '/v 1 /repositories/<path repository>/tags' methods ['DELETE'] @toolkit parse repository name@toolkit requires authdef delete repository namespace repository logger debug '[delete repository]namespace {0 } repository {1 }' format namespace repository try for tag name tag content in get tags namespace namespace repository repository items delete tag namespace namespace repository repository tag tag name store remove store repository path namespace namespace repository repository except exceptions File Not Found Error return toolkit api error ' Repositorynotfound' 404 else sender flask current app get current object signals repository deleted send sender namespace namespace repository repository return toolkit response
def kaiserord ripple width A abs ripple if A < 8 raise Value Error ' Requestedmaximumrippleattentuation%fistoosmallforthe Kaiserformula ' % A beta kaiser beta A numtaps A - 7 95 / 2 285 / np pi * width + 1 return int ceil numtaps beta
def kaiserord ripple width A abs ripple if A < 8 raise Value Error ' Requestedmaximumrippleattentuation%fistoosmallforthe Kaiserformula ' % A beta kaiser beta A numtaps A - 7 95 / 2 285 / np pi * width + 1 return int ceil numtaps beta
def nt to cw cur enc cur nt return array map int '' join [INT TO BS[cur enc[x]] for x in cur nt]
def nt to cw cur enc cur nt return array map int '' join [INT TO BS[cur enc[x]] for x in cur nt]
def nt to cw cur enc cur nt return array map int '' join [INT TO BS[cur enc[x]] for x in cur nt]
def chain names sg id sg name prefix sg label sg id sg name in chain name prefix + SUFFIX IN out chain name prefix + SUFFIX OUT return {'in' in chain name 'out' out chain name}
def column index from string column fast False column column upper clen len column if not fast and not all 'A' < char < 'Z' for char in column msg ' Columnstringmustcontainonlycharacters A-Z got%s' % column raise Column String Index Exception msg if clen 1 return ord column[ 0 ] - 64 elif clen 2 return 1 + ord column[ 0 ] - 65 * 26 + ord column[ 1 ] - 64 elif clen 3 return 1 + ord column[ 0 ] - 65 * 676 + 1 + ord column[ 1 ] - 65 * 26 + ord column[ 2 ] - 64 elif clen > 3 raise Column String Index Exception ' Columnstringindexcannotbelongerthan 3 characters' else raise Column String Index Exception ' Columnstringindexcannotbeempty'
def column index from string column fast False column column upper clen len column if not fast and not all 'A' < char < 'Z' for char in column msg ' Columnstringmustcontainonlycharacters A-Z got%s' % column raise Column String Index Exception msg if clen 1 return ord column[ 0 ] - 64 elif clen 2 return 1 + ord column[ 0 ] - 65 * 26 + ord column[ 1 ] - 64 elif clen 3 return 1 + ord column[ 0 ] - 65 * 676 + 1 + ord column[ 1 ] - 65 * 26 + ord column[ 2 ] - 64 elif clen > 3 raise Column String Index Exception ' Columnstringindexcannotbelongerthan 3 characters' else raise Column String Index Exception ' Columnstringindexcannotbeempty'
def column index from string column fast False column column upper clen len column if not fast and not all 'A' < char < 'Z' for char in column msg ' Columnstringmustcontainonlycharacters A-Z got%s' % column raise Column String Index Exception msg if clen 1 return ord column[ 0 ] - 64 elif clen 2 return 1 + ord column[ 0 ] - 65 * 26 + ord column[ 1 ] - 64 elif clen 3 return 1 + ord column[ 0 ] - 65 * 676 + 1 + ord column[ 1 ] - 65 * 26 + ord column[ 2 ] - 64 elif clen > 3 raise Column String Index Exception ' Columnstringindexcannotbelongerthan 3 characters' else raise Column String Index Exception ' Columnstringindexcannotbeempty'
def test continue on collection errors maxfail testdir testdir makepyfile **COLLECTION ERROR PY FILES res testdir runpytest '--continue-on-collection-errors' '--maxfail 3' assert res ret 2 res stdout fnmatch lines ['collected 2 items/ 2 errors' '* Interrupted stoppingafter 3 failures*' '* 1 failed 2error*']
def add enrollment student id course id is active True mode 'honor' enrollment {'created' datetime datetime now 'mode' mode 'is active' is active 'course' get fake course info course id 'student' student id} ENROLLMENTS append enrollment return enrollment
def get principal name ret {}cmd execute kadmin 'get principal{ 0 }' format name if cmd['retcode'] 0 or cmd['stderr'] ret['comment'] cmd['stderr'] splitlines [ -1 ]ret['result'] Falsereturn retfor i in cmd['stdout'] splitlines [1 ] prop val i split ' ' 1 ret[prop] valreturn ret
def cost tour graph tour steps zip tour[ 0 -1 ] tour[ 1 ] cost sum [graph[ step from step to ] for step from step to in steps] return cost
def cost tour graph tour steps zip tour[ 0 -1 ] tour[ 1 ] cost sum [graph[ step from step to ] for step from step to in steps] return cost
def get pending domain join vname ' Default 'base key 'SYSTEM\\ Current Control Set\\ Services\\ Netlogon'avoid key '{ 0 }\\ Avoid Spn Set' format base key join key '{ 0 }\\ Join Domain' format base key avoid reg ret salt ['reg read value'] 'HKLM' avoid key vname if avoid reg ret['success'] log debug ' Foundkey %s' avoid key return Trueelse log debug ' Unabletoaccesskey %s' avoid key join reg ret salt ['reg read value'] 'HKLM' join key vname if join reg ret['success'] log debug ' Foundkey %s' join key return Trueelse log debug ' Unabletoaccesskey %s' join key return False
def cliques graph threshold 3 a []for n in graph nodes c clique graph n id if len c > threshold c sort if c not in a a append c return a
def skip for dialect dialect def dec fn def wrap self *args **kwargs if self db engine dialect name dialect raise unittest Skip Test " Notsupportedondialect'%s'" % dialect return fn self *args **kwargs return wrapreturn dec
def test local repo typo tmpdir template path os path join 'tests' 'unknown-repo' with pytest raises exceptions Repository Not Found as err repository determine repo dir template path abbreviations {} clone to dir str tmpdir checkout None no input True assert str err value ' Avalidrepositoryfor"{}"couldnotbefoundinthefollowinglocations \n{}' format template path '\n' join [template path str tmpdir / 'tests/unknown-repo' ]
def test local repo typo tmpdir template path os path join 'tests' 'unknown-repo' with pytest raises exceptions Repository Not Found as err repository determine repo dir template path abbreviations {} clone to dir str tmpdir checkout None no input True assert str err value ' Avalidrepositoryfor"{}"couldnotbefoundinthefollowinglocations \n{}' format template path '\n' join [template path str tmpdir / 'tests/unknown-repo' ]
def prepare data filename tmp prefix dbargs osm 2 pgsql projection args osm 2 pgsql split + ['--create' '--merc' '--prefix' tmp prefix] for flag key in [ '-d' 'database' '-U' 'user' '-W' 'password' '-H' 'host' ] if key in dbargs args + flag dbargs[key] args + [filename]create Popen args stderr PIPE stdout PIPE create wait assert create returncode 0 " It'simportantthatosm 2 pgsqlactuallyworked " + create stderr read
def num plugins cached return len plugin PLUGIN CACHE keys
def check cli module cli name module params['pn name']show cli + 'trunk-showformatswitch nameno-show-headers' show shlex split show out module run command show [1 ]out out split global TRUNK EXIST Sif name in out TRUNK EXISTS Trueelse TRUNK EXISTS False
def get service hass config discovery info None from pushbullet import Push Bulletfrom pushbullet import Invalid Key Errortry pushbullet Push Bullet config[CONF API KEY] except Invalid Key Error LOGGER error ' Wrong AP Ikeysupplied Getitathttps //www pushbullet com/account' return Nonereturn Push Bullet Notification Service pushbullet
@open tabdef interact page data socket event json dumps data get 'interaction' {} try socket tab evaljs 'window live Portia Page send Event %s ' % event except Js Error as e print ecookies socket
@open tabdef interact page data socket event json dumps data get 'interaction' {} try socket tab evaljs 'window live Portia Page send Event %s ' % event except Js Error as e print ecookies socket
@open tabdef interact page data socket event json dumps data get 'interaction' {} try socket tab evaljs 'window live Portia Page send Event %s ' % event except Js Error as e print ecookies socket
@cronjobs registerdef reindex users that contributed yesterday if settings STAGE returntoday datetime now yesterday today - timedelta days 1 user ids list Answer objects filter created gte yesterday created lt today values list 'creator id' flat True user ids + list Revision objects filter created gte yesterday created lt today values list 'creator id' flat True user ids + list Revision objects filter reviewed gte yesterday reviewed lt today values list 'reviewer id' flat True index task delay User Mapping Type list set user ids
@cronjobs registerdef reindex users that contributed yesterday if settings STAGE returntoday datetime now yesterday today - timedelta days 1 user ids list Answer objects filter created gte yesterday created lt today values list 'creator id' flat True user ids + list Revision objects filter created gte yesterday created lt today values list 'creator id' flat True user ids + list Revision objects filter reviewed gte yesterday reviewed lt today values list 'reviewer id' flat True index task delay User Mapping Type list set user ids
def Has Class clsid return clsid in map CLSID To Class
def css *args return '\n' join [stylesheet link url for '/static/style/%s css?v %s' % name server starttime for name in args]
def css *args return '\n' join [stylesheet link url for '/static/style/%s css?v %s' % name server starttime for name in args]
def create user username password email code "username '{username}' password '{password}' email '{email}' fromdjango contrib auth modelsimport User User objects filter username username delete User objects create superuser username email password "code code format username username password password email email shell cmd 'foremanrun-econf/production envpythonmanage pyshell'with prefix 'source~ubuntu/venv/bin/activate' with cd '~ubuntu/cabot' sudo 'printf"{ 0 }" {1 }' format code shell cmd
def weight mean color graph src dst n diff graph node[dst]['meancolor'] - graph node[n]['meancolor'] diff np linalg norm diff return {'weight' diff}
def log traceback severity logging ERROR debug False cherrypy log '' 'HTTP' severity severity traceback True
def unique values values com asarray tuplesafe values f lambda htype caster unique object values htype caster return hashtable algo f values
def unique values values com asarray tuplesafe values f lambda htype caster unique object values htype caster return hashtable algo f values
def setup platform hass config add devices discovery info None hostname config get CONF HOST port config get CONF PORT login config get CONF USERNAME password config get CONF PASSWORD monitored variables config get CONF MONITORED VARIABLES name config get CONF NAME try hp ilo data Hp Ilo Data hostname port login password except Value Error as error LOGGER error error return Falsedevices []for ilo type in monitored variables new device Hp Ilo Sensor hp ilo data hp ilo data sensor type SENSOR TYPES get ilo type client name name devices append new device add devices devices
def get collections return do mb query 'collection' ''
def truncate words cutlength stems {}for word in words stem word[ cutlength]try stems[stem] update [word] except Key Error stems[stem] set [word] return stems
def get prefix ctx args search True if getattr args u'name' None if u'/' in args name raise Conda Value Error u"'/'notallowedinenvironmentname %s" % args name getattr args u'json' False if args name ROOT ENV NAME return ctx root dirif search return locate prefix by name ctx args name else return join ctx envs dirs[ 0 ] args name elif getattr args u'prefix' None return abspath expanduser args prefix else return ctx default prefix
def get prefix ctx args search True if getattr args u'name' None if u'/' in args name raise Conda Value Error u"'/'notallowedinenvironmentname %s" % args name getattr args u'json' False if args name ROOT ENV NAME return ctx root dirif search return locate prefix by name ctx args name else return join ctx envs dirs[ 0 ] args name elif getattr args u'prefix' None return abspath expanduser args prefix else return ctx default prefix
def get prefix ctx args search True if getattr args u'name' None if u'/' in args name raise Conda Value Error u"'/'notallowedinenvironmentname %s" % args name getattr args u'json' False if args name ROOT ENV NAME return ctx root dirif search return locate prefix by name ctx args name else return join ctx envs dirs[ 0 ] args name elif getattr args u'prefix' None return abspath expanduser args prefix else return ctx default prefix
def get prefix ctx args search True if getattr args u'name' None if u'/' in args name raise Conda Value Error u"'/'notallowedinenvironmentname %s" % args name getattr args u'json' False if args name ROOT ENV NAME return ctx root dirif search return locate prefix by name ctx args name else return join ctx envs dirs[ 0 ] args name elif getattr args u'prefix' None return abspath expanduser args prefix else return ctx default prefix
def refresh db if 'eix sync' in salt return salt ['eix sync'] if 'makeconf features contains' in salt and salt ['makeconf features contains'] 'webrsync-gpg' cmd 'emerge-webrsync-q'if salt utils which 'emerge-delta-webrsync' cmd 'emerge-delta-webrsync-q'return salt ['cmd retcode'] cmd python shell False 0 else if salt ['cmd retcode'] 'emerge--askn--quiet--sync' python shell False 0 return Truecmd 'emerge-webrsync-q'if salt utils which 'emerge-delta-webrsync' cmd 'emerge-delta-webrsync-q'return salt ['cmd retcode'] cmd python shell False 0
@pipeline mutator stagedef apply choices session task if task skip returnif task apply task apply metadata plugins send 'import task apply' session session task task task add session lib
def pressure network flow rates Qtot k P k * flow rates ** 2 F np hstack P[ 1 ] - P[ 0 ] flow rates sum - Qtot return F
def pressure network flow rates Qtot k P k * flow rates ** 2 F np hstack P[ 1 ] - P[ 0 ] flow rates sum - Qtot return F
def pressure network flow rates Qtot k P k * flow rates ** 2 F np hstack P[ 1 ] - P[ 0 ] flow rates sum - Qtot return F
def payment accepted order id auth amount currency decision try order Order objects get id order id except Order Does Not Exist raise CC Processor Data Exception ' Thepaymentprocessoracceptedanorderwhosenumberisnotinoursystem ' if decision 'ACCEPT' if auth amount order total cost and currency lower order currency lower return {'accepted' True 'amt charged' auth amount 'currency' currency 'order' order}else ex CC Processor Wrong Amount Exception u' Theamountchargedbytheprocessor{charged amount}{charged amount currency}isdifferentthanthetotalcostoftheorder{total cost}{total cost currency} ' format charged amount auth amount charged amount currency currency total cost order total cost total cost currency order currency ex order orderraise exelse return {'accepted' False 'amt charged' 0 'currency' 'usd' 'order' order}
def load host keys filename from paramiko hostkeys import Host Keysreturn Host Keys filename
def test not browsing error hist with pytest raises Value Error as error 1 hist nextitem assert str error 1 value ' Currentlynotbrowsinghistory' with pytest raises Value Error as error 2 hist previtem assert str error 2 value ' Currentlynotbrowsinghistory'
@pytest mark networkdef test no clean option blocks cleaning after install script data build script base path / 'pip-build' script pip 'install' '--no-clean' '--no-index' '--build' build '--find-links %s' % data find links 'simple' assert exists build
def read pack header read header read 12 if not header return None None if header[ 4] 'PACK' raise Assertion Error ' Invalidpackheader%r' % header version unpack from '>L' header 4 if version not in 2 3 raise Assertion Error ' Versionwas%d' % version num objects unpack from '>L' header 8 return version num objects
def exception handler type value tb msg u''if hasattr value u'filename' and value filename is not None msg value filename + u' ' if hasattr value u'strerror' and value strerror is not None msg + value strerrorelse msg + six text type value if len msg error msg qt msg
def exception handler type value tb msg u''if hasattr value u'filename' and value filename is not None msg value filename + u' ' if hasattr value u'strerror' and value strerror is not None msg + value strerrorelse msg + six text type value if len msg error msg qt msg
def encode region name for tag language region iso 639 iso 3166 in LANGUAGE REGION items if region name capitalize return iso 3166
def donate import webbrowserwebbrowser open u'https //donate wikimedia org/w/index php?title Special Fundraiser Landing Page' new 2
@utils no 4byte paramsdef metadef object create context namespace name object dict session None session session or get session return metadef object api create context namespace name object dict session
def sinch x x2 x * x if abs x < 0 0135 return 1 + x2 / 6 0 * 1 + x2 / 20 0 * 1 + x2 / 42 0 else return np sinh x / x
def get Each Word Capitalized name with Spaces name lower replace ' ' '' words with Spaces split '' capitalized Strings []for word in words capitalized Strings append word capitalize return '' join capitalized Strings
def fix bad data django obj dirty if isinstance django obj models Node if django obj title strip u'' django obj title u' Blank Title'dirty Trueif isinstance django obj models Embargo if django obj state u'active' django obj state u'completed'dirty Trueelif django obj state u'cancelled' django obj state u'rejected'dirty Trueif isinstance django obj models Retraction if django obj state u'cancelled' django obj state u'rejected'dirty Trueif django obj state u'retracted' django obj state u'completed'dirty Trueif django obj state u'pending' django obj state u'unapproved'dirty Truereturn django obj dirty
def fix bad data django obj dirty if isinstance django obj models Node if django obj title strip u'' django obj title u' Blank Title'dirty Trueif isinstance django obj models Embargo if django obj state u'active' django obj state u'completed'dirty Trueelif django obj state u'cancelled' django obj state u'rejected'dirty Trueif isinstance django obj models Retraction if django obj state u'cancelled' django obj state u'rejected'dirty Trueif django obj state u'retracted' django obj state u'completed'dirty Trueif django obj state u'pending' django obj state u'unapproved'dirty Truereturn django obj dirty
def is conflict exception exception string str exception return any s in exception string for s in CONFLICT INDICATORS
def is conflict exception exception string str exception return any s in exception string for s in CONFLICT INDICATORS
def object id validator key activity dict errors context activity type activity dict[ 'activity type' ]if object id validators has key activity type object id activity dict[ 'object id' ]return object id validators[activity type] object id context else raise Invalid ' Thereisnoobject idvalidatorforactivitytype"%s"' % activity type
def get state rules stats exploration id state name exploration exp services get exploration by id exploration id state exploration states[state name]rule keys []for group in state interaction answer groups for rule in group rule specs rule keys append OLD SUBMIT HANDLER NAME rule stringify classified rule if state interaction default outcome rule keys append OLD SUBMIT HANDLER NAME exp domain DEFAULT RULESPEC STR answer logs stats domain State Rule Answer Log get multi exploration id [{'state name' state name 'rule str' rule key[ 1 ]} for rule key in rule keys] results {}for ind answer log in enumerate answer logs results[' ' join rule keys[ind] ] {'answers' answer log get top answers 5 'rule hits' answer log total answer count}return results
def cycle logfile logfile logfile old logfile + ' old' if os path exists logfile if os path exists logfile old os remove logfile old os rename logfile logfile old
def cycle logfile logfile logfile old logfile + ' old' if os path exists logfile if os path exists logfile old os remove logfile old os rename logfile logfile old
def synchronize *klasses if threadmodule is not None for klass in klasses for method Name in klass synchronized hook add Pre klass method Name synch Pre hook add Post klass method Name synch Post
def log stats resource None stats source None log level DEFAULT LOG LEVEL **kwargs if stats source is not None kwargs stats source if stats resource is None if RESOURCE ID not in kwargs or RESOURCE NAME not in kwargs raise Value Error ' Missingrequiredstatslabels ' else if not hasattr stats resource Conf With Id ID and hasattr stats resource Conf With Id NAME raise Value Error ' Givenstatssourceismissingidornameattributes ' kwargs[RESOURCE ID] stats resource idkwargs[RESOURCE NAME] stats resource nameif TIMESTAMP not in kwargs kwargs[TIMESTAMP] datetime datetime utcfromtimestamp time time strftime '%Y-%m-%d T%H %M %S %f Z' STATS LOGGER log log level json dumps kwargs
def attempt to acquire lock s3 fs lock uri sync wait time job key mins to expiration None key lock acquire step 1 s3 fs lock uri job key mins to expiration if key is None return Falsetime sleep sync wait time return lock acquire step 2 key job key
def attempt to acquire lock s3 fs lock uri sync wait time job key mins to expiration None key lock acquire step 1 s3 fs lock uri job key mins to expiration if key is None return Falsetime sleep sync wait time return lock acquire step 2 key job key
def epoch 2 datetime epoch if epoch is not None return datetime datetime fromtimestamp epoch tz UTC
def get properties obj if hasattr obj 'keys' return obj keys elif hasattr obj ' dict ' return obj dict keys return []
def disabled funs ret [] disabled salt ['grains get'] 'state runs disabled' for state in funs for state in disabled if ' *' in state target state state split ' ' [0 ]target state target state + ' ' if not target state endswith ' ' else target state if state startswith target state err ' Thestatefile"{ 0 }"iscurrentlydisabledby"{ 1 }" tore-enable runstate enable{ 1 } ' format state state ret append err continueelif state state err ' Thestatefile"{ 0 }"iscurrentlydisabled tore-enable runstate enable{ 0 } ' format state ret append err continuereturn ret
def get patched ast source sorted children False return patch ast ast parse source source sorted children
def find module modname modpath os path join os path dirname os path dirname file ' Lib' return imp load module modname *imp find module modname [modpath]
@pytest fixturedef record xml property request request node warn code 'C 3 ' message 'record xml propertyisanexperimentalfeature' xml getattr request config ' xml' None if xml is not None node reporter xml node reporter request node nodeid return node reporter add propertyelse def add property noop name value passreturn add property noop
@pytest fixturedef record xml property request request node warn code 'C 3 ' message 'record xml propertyisanexperimentalfeature' xml getattr request config ' xml' None if xml is not None node reporter xml node reporter request node nodeid return node reporter add propertyelse def add property noop name value passreturn add property noop
def true Values T R discount Factor assert discount Factor < 1 distr T copy res dot T R for i in range 1 int 10 / 1 0 - discount Factor distr dot distr T res + discount Factor ** i * dot distr R return res
def main ip addr raw input ' Enter I Paddress ' username 'pyclass'port 22 ssh conn pexpect spawn 'ssh-l{}{}-p{}' format username ip addr port ssh conn timeout 3login ssh conn prompt find prompt ssh conn ssh conn sendline 'terminallength 0 ' ssh conn expect prompt ssh conn sendline 'showipintbrief' ssh conn expect prompt print '\n>>>>'print ssh conn beforeprint '>>>>\n'
def installed name default False user None ret {'name' name 'result' None 'comment' '' 'changes' {}}if opts ['test'] ret['comment'] ' Ruby{ 0 }issettobeinstalled' format name return retret check rvm ret user if ret['result'] is False if not salt ['rvm install'] runas user ret['comment'] 'RV Mfailedtoinstall 'return retelse return check and install ruby ret name default user user else return check and install ruby ret name default user user
def has leading dir paths common prefix Nonefor path in paths prefix rest split leading dir path if not prefix return Falseelif common prefix is None common prefix prefixelif prefix common prefix return Falsereturn True
def has leading dir paths common prefix Nonefor path in paths prefix rest split leading dir path if not prefix return Falseelif common prefix is None common prefix prefixelif prefix common prefix return Falsereturn True
def seq exceeds homopolymers curr seq max len 6 for base in 'ATGC' curr base * max len + 1 if curr in curr seq return Truereturn False
def seq exceeds homopolymers curr seq max len 6 for base in 'ATGC' curr base * max len + 1 if curr in curr seq return Truereturn False
def main import logginglogging basic Config level logging DEBUG tvdb instance Tvdb interactive True cache False print tvdb instance[' Lost']['seriesname']print tvdb instance[' Lost'][ 1 ][ 4 ]['episodename']
def get Name obj def sanitize name return name replace ' ' '/' if isinstance obj Build Step Factory klass obj factoryelse klass type obj name ''klasses klass + inspect getmro klass for klass in klasses if hasattr klass ' module ' and klass module startswith 'buildbot ' return sanitize name + klass module + ' ' + klass name else name + '>'return sanitize type obj name
def Relay State Helper manager delay return internet Timer Service delay check State manager
def Relay State Helper manager delay return internet Timer Service delay check State manager
def vg absent name ret {'changes' {} 'comment' '' 'name' name 'result' True}if not salt ['lvm vgdisplay'] name ret['comment'] ' Volume Group{ 0 }alreadyabsent' format name elif opts ['test'] ret['comment'] ' Volume Group{ 0 }issettoberemoved' format name ret['result'] Nonereturn retelse changes salt ['lvm vgremove'] name if not salt ['lvm vgdisplay'] name ret['comment'] ' Removed Volume Group{ 0 }' format name ret['changes']['removed'] changeselse ret['comment'] ' Failedtoremove Volume Group{ 0 }' format name ret['result'] Falsereturn ret
def slaac value query '' try vtype ipaddr value 'type' if vtype 'address' v ipaddr value 'cidr' elif vtype 'network' v ipaddr value 'subnet' if ipaddr value 'version' 6 return Falsevalue netaddr IP Network v except return Falseif not query return Falsetry mac hwaddr query alias 'slaac' eui netaddr EUI mac except return Falsereturn eui ipv 6 value network
def for int dtypes name 'dtype' no bool False if no bool return for dtypes int dtypes name name else return for dtypes int bool dtypes name name
def irc logins full load pkt user search re match irc user re full load pass search re match irc pw re full load pass search 2 re search irc pw re 2 full load lower if user search msg 'IR Cnick %s' % user search group 1 return msgif pass search msg 'IR Cpass %s' % pass search group 1 return msgif pass search 2 msg 'IR Cpass %s' % pass search 2 group 1 return msg
def reconstruct interp matrix idx proj if is real proj return backend idd reconint idx + 1 proj else return backend idz reconint idx + 1 proj
@anonymous user requireddef forgot password form class security forgot password formif request json form form class Multi Dict request json else form form class if form validate on submit send reset password instructions form user if request json is None do flash *get message 'PASSWORD RESET REQUEST' email form user email if request json return render json form include user False return security render template config value 'FORGOT PASSWORD TEMPLATE' forgot password form form ** ctx 'forgot password'
def get public ip return file io read constants PUBLIC IP LOC rstrip
def parse time str return parse iso time str
def refresh modules async True try if async ret salt ['event fire'] {} 'module refresh' else eventer salt utils event get event 'minion' opts opts listen True ret salt ['event fire'] {'notify' True} 'module refresh' log trace 'refresh moduleswaitingformodulerefreshtocomplete' eventer get event tag '/salt/minion/minion mod complete' wait 30 except Key Error log error ' Eventmodulenotavailable Modulerefreshfailed ' ret Falsereturn ret
@pytest mark django dbdef test data tp bad with pytest raises Integrity Error TP Data objects create
@pytest mark django dbdef test data tp bad with pytest raises Integrity Error TP Data objects create
def test language portuguese lang Language 'pt-br' assert equals lang code u'pt-br' assert equals lang name u' Portuguese' assert equals lang native u' Portugu\xeas' assert equals lang feature u' Funcionalidade' assert equals lang scenario u' Cen\xe 1 rio Cenario' assert equals lang examples u' Exemplos Cen\xe 1 rios' assert equals lang scenario outline u' Esquemado Cen\xe 1 rio Esquemado Cenario'
def get task runner local task job if TASK RUNNER ' Bash Task Runner' return Bash Task Runner local task job elif TASK RUNNER ' Cgroup Task Runner' from airflow contrib task runner cgroup task runner import Cgroup Task Runnerreturn Cgroup Task Runner local task job else raise Airflow Exception ' Unknowntaskrunnertype{}' format TASK RUNNER
def get task runner local task job if TASK RUNNER ' Bash Task Runner' return Bash Task Runner local task job elif TASK RUNNER ' Cgroup Task Runner' from airflow contrib task runner cgroup task runner import Cgroup Task Runnerreturn Cgroup Task Runner local task job else raise Airflow Exception ' Unknowntaskrunnertype{}' format TASK RUNNER
def get task runner local task job if TASK RUNNER ' Bash Task Runner' return Bash Task Runner local task job elif TASK RUNNER ' Cgroup Task Runner' from airflow contrib task runner cgroup task runner import Cgroup Task Runnerreturn Cgroup Task Runner local task job else raise Airflow Exception ' Unknowntaskrunnertype{}' format TASK RUNNER
def get swap size vm return config get cloud config value 'swap' vm opts default 128
def query tags return read url get tags url
def setup platform hass config add devices discovery info None value template config get CONF VALUE TEMPLATE if value template is not None value template hass hassadd devices [ Mqtt Lock hass config get CONF NAME config get CONF STATE TOPIC config get CONF COMMAND TOPIC config get CONF QOS config get CONF RETAIN config get CONF PAYLOAD LOCK config get CONF PAYLOAD UNLOCK config get CONF OPTIMISTIC value template ]
def centos 7 install commands version installable version get installable version flocker version return sequence [run command 'yumcleanall' run command 'yuminstall-y{}' format get repository url distribution 'centos- 7 ' flocker version installable version run from args ['yum' 'install'] + get repo options installable version + ['-y' 'clusterhq-flocker-node' + version ] ]
def vgextend vgname devices if not vgname or not devices return ' Error vgnameanddevice s arebothrequired'if isinstance devices six string types devices devices split ' ' cmd ['vgextend' vgname]for device in devices cmd append device out salt ['cmd run'] cmd python shell False splitlines vgdata {' Outputfromvgextend' out[ 0 ] strip }return vgdata
def get features return get var 'FEATURES'
def Comma Separated Tokenizer return Regex Tokenizer '[^ ]+' Strip Filter
def makelist inlist listchar '' stringify False escape False encoding None if stringify inlist list stringify inlist listdict {'[' '[%s]' ' ' ' %s ' '' '%s'}outline []if len inlist < 2 listchar listchar or '[' for item in inlist if not isinstance item list tuple if escape item quote escape item outline append elem quote item encoding encoding else outline append makelist item listchar or '[' stringify escape encoding return listdict[listchar] % ' ' join outline
def p enumerator 2 t pass
def generate patch base x y base 0 0 x x valuesy y valuesy 0 np insert y 0 base y0 np append y0 base x0 np insert x 0 x[ 0 ] x0 np append x0 x0 [ -1 ] return x0 y0
def generate all classes modules list [] launcher [] redirect x False mipav hacks False all code {}for module in modules list print u' ' * 80 print u' Generating Definitionformodule{ 0 }' format module print u'^' * 80 package code module generate class module launcher redirect x redirect x mipav hacks mipav hacks cur package all codemodule name package strip split u'' [0 ] split u' ' [ -1 ]for package in package strip split u'' [0 ] split u' ' [ -1 ] if package not in cur package cur package[package] {}cur package cur package[package]if module name not in cur package cur package[module name] {}cur package[module name][module] codeif os path exists u' init py' os unlink u' init py' crawl code struct all code os getcwd
def generate all classes modules list [] launcher [] redirect x False mipav hacks False all code {}for module in modules list print u' ' * 80 print u' Generating Definitionformodule{ 0 }' format module print u'^' * 80 package code module generate class module launcher redirect x redirect x mipav hacks mipav hacks cur package all codemodule name package strip split u'' [0 ] split u' ' [ -1 ]for package in package strip split u'' [0 ] split u' ' [ -1 ] if package not in cur package cur package[package] {}cur package cur package[package]if module name not in cur package cur package[module name] {}cur package[module name][module] codeif os path exists u' init py' os unlink u' init py' crawl code struct all code os getcwd
def generate all classes modules list [] launcher [] redirect x False mipav hacks False all code {}for module in modules list print u' ' * 80 print u' Generating Definitionformodule{ 0 }' format module print u'^' * 80 package code module generate class module launcher redirect x redirect x mipav hacks mipav hacks cur package all codemodule name package strip split u'' [0 ] split u' ' [ -1 ]for package in package strip split u'' [0 ] split u' ' [ -1 ] if package not in cur package cur package[package] {}cur package cur package[package]if module name not in cur package cur package[module name] {}cur package[module name][module] codeif os path exists u' init py' os unlink u' init py' crawl code struct all code os getcwd
def generate all classes modules list [] launcher [] redirect x False mipav hacks False all code {}for module in modules list print u' ' * 80 print u' Generating Definitionformodule{ 0 }' format module print u'^' * 80 package code module generate class module launcher redirect x redirect x mipav hacks mipav hacks cur package all codemodule name package strip split u'' [0 ] split u' ' [ -1 ]for package in package strip split u'' [0 ] split u' ' [ -1 ] if package not in cur package cur package[package] {}cur package cur package[package]if module name not in cur package cur package[module name] {}cur package[module name][module] codeif os path exists u' init py' os unlink u' init py' crawl code struct all code os getcwd
def verify user user if not user email raise Validation Error " Youcannotverifyanaccountwithnoemailset Youcansetthisuser'semailwith'pootleupdate user email%s EMAIL'" % user username try validate email unique user email user except Validation Error raise Validation Error " Thisuser'semailisnotunique Youcanfindduplicateemailswith'pootlefind duplicate emails'" existing primary Email Address objects filter user user primary True if existing primary exists existing primary existing primary first if not existing primary verified existing primary verified Trueexisting primary save returnelse raise Value Error " User'%s'isalreadyverified" % user username sync user email addresses user email address Email Address objects filter user user email iexact user email order by 'primary' first email address verified Trueemail address primary Trueemail address save
def verify user user if not user email raise Validation Error " Youcannotverifyanaccountwithnoemailset Youcansetthisuser'semailwith'pootleupdate user email%s EMAIL'" % user username try validate email unique user email user except Validation Error raise Validation Error " Thisuser'semailisnotunique Youcanfindduplicateemailswith'pootlefind duplicate emails'" existing primary Email Address objects filter user user primary True if existing primary exists existing primary existing primary first if not existing primary verified existing primary verified Trueexisting primary save returnelse raise Value Error " User'%s'isalreadyverified" % user username sync user email addresses user email address Email Address objects filter user user email iexact user email order by 'primary' first email address verified Trueemail address primary Trueemail address save
def get datasource name orgname None profile 'grafana' data get datasources orgname orgname profile profile for datasource in data if datasource['name'] name return datasourcereturn None
def scrub headers headers if isinstance headers dict headers headers items headers [ parse header string key parse header string val for key val in headers]if not logger settings get 'redact sensitive headers' True return dict headers if logger settings get 'reveal sensitive prefix' 16 < 0 logger settings['reveal sensitive prefix'] 16 return {key safe value key val for key val in headers}
def scrub headers headers if isinstance headers dict headers headers items headers [ parse header string key parse header string val for key val in headers]if not logger settings get 'redact sensitive headers' True return dict headers if logger settings get 'reveal sensitive prefix' 16 < 0 logger settings['reveal sensitive prefix'] 16 return {key safe value key val for key val in headers}
def get Scrollbar Canvas Portion scrollbar scrollbar Begin End scrollbar get return scrollbar Begin End[ 1 ] - scrollbar Begin End[ 0 ]
def decipher shift msg key symbols None return encipher shift msg - key symbols
def decipher shift msg key symbols None return encipher shift msg - key symbols
def sum signs exprs is pos all [expr is positive for expr in exprs] is neg all [expr is negative for expr in exprs] return is pos is neg
@task name 'geonode tasks update create document thumbnail' queue 'update' def create document thumbnail object id try document Document objects get id object id except Document Does Not Exist returnimage document render thumbnail filename 'document-%s-thumb png' % document uuid document save thumbnail filename image
def lookup path parent None user None exists None url build url RESOURCE route 'lookup' params make params path path parent parent user user exists exists return request 'get' url params params
def check nfft n n fft n overlap n fft n if n fft > n else n fft n overlap n fft - 1 if n overlap > n fft else n overlap return n fft n overlap
def group add asset group asset id None asset ip None if asset id asset get object Asset id asset id else asset get object Asset ip asset ip if asset group asset set add asset
def group add asset group asset id None asset ip None if asset id asset get object Asset id asset id else asset get object Asset ip asset ip if asset group asset set add asset
def deflate and base 64 encode string val return base 64 b64 encode zlib compress string val [2 -4 ]
def relative days current wday wday dir if current wday wday return 7 * dir if dir 1 return wday + 7 - current wday % 7 else return current wday + 7 - wday % 7 * -1
@require contextdef to device obj stream 0 copy True to None if to is None to new devicearray auto device obj stream stream copy copy return toif copy to copy to device obj stream stream return to
@require contextdef to device obj stream 0 copy True to None if to is None to new devicearray auto device obj stream stream copy copy return toif copy to copy to device obj stream stream return to
def check status try ret salt utils http query 'https //api random org/' status True return ret['status'] 200 except return False
def get default user superusers get user model objects filter is superuser True order by 'id' if superusers count > 0 return superusers[ 0 ]else raise Geo Node Exception ' Youmusthaveanadminaccountconfiguredbeforeimportingdata Try django-admin pycreatesuperuser'
def select iterables elements return itertools chain *[c select iterable for c in elements]
def rand url randbits str random randint 1 2147483647 return 'https //url-' + randbits + ' com'
def item field getters funcs {}for plugin in find plugins if plugin template fields funcs update plugin template fields return funcs
def item field getters funcs {}for plugin in find plugins if plugin template fields funcs update plugin template fields return funcs
def item field getters funcs {}for plugin in find plugins if plugin template fields funcs update plugin template fields return funcs
def merge insert ins chunks doc unbalanced start balanced unbalanced end split unbalanced ins chunks doc extend unbalanced start if doc and not doc[ -1 ] endswith '' doc[ -1 ] + ''doc append '<ins>' if balanced and balanced[ -1 ] endswith '' balanced[ -1 ] balanced[ -1 ][ -1 ]doc extend balanced doc append '</ins>' doc extend unbalanced end
def set version db apps schema editor db alias schema editor connection alias Version apps get model u'reversion' u' Version' content types Version objects using db alias order by values list u'content type id' u'content type app label' u'content type model' distinct model dbs defaultdict list for content type id app label model name in content types try model live apps get model app label model name except Lookup Error db u'default'else db router db for write model model dbs[db] append content type id if DEFAULT DB ALIAS in model dbs and len model dbs 1 Version objects using db alias update db DEFAULT DB ALIAS else for db content type ids in model dbs items Version objects using db alias filter content type in content type ids update db db
def set version db apps schema editor db alias schema editor connection alias Version apps get model u'reversion' u' Version' content types Version objects using db alias order by values list u'content type id' u'content type app label' u'content type model' distinct model dbs defaultdict list for content type id app label model name in content types try model live apps get model app label model name except Lookup Error db u'default'else db router db for write model model dbs[db] append content type id if DEFAULT DB ALIAS in model dbs and len model dbs 1 Version objects using db alias update db DEFAULT DB ALIAS else for db content type ids in model dbs items Version objects using db alias filter content type in content type ids update db db
@region cache on arguments expiration time REFINER EXPIRATION TIME def get series episode series id season episode result tvdb client query series episodes series id aired season season aired episode episode if result return tvdb client get episode result['data'][ 0 ]['id']
def s3 rheader resource r vars r get varsif 'viewing' in vars try tablename record id vars viewing rsplit ' ' 1 db current dbrecord db[tablename][record id]except tablename r tablenamerecord r recordelse tablename r tablenamerecord r recordreturn tablename record
def main try s Shell cmds s process args sys argv[ 1 ] if len cmds 0 s cmdloop except v sys exc info [1 ]if getattr v ' handle exception saw this' False passelse import tracebacktraceback print exc sys exit 1
def infer unit value from apcaccess status import ALL UNIT Sfor unit in ALL UNITS if value endswith unit return value[ - len unit ] INFERRED UNITS get unit unit strip return value None
def base 64 unicode value as bytes base 64 b64 encode value return as bytes decode 'ascii'
def subplots nrows 1 ncols 1 sharex False sharey False squeeze True subplot kw None gridspec kw None **fig kw fig figure **fig kw axs fig subplots nrows nrows ncols ncols sharex sharex sharey sharey squeeze squeeze subplot kw subplot kw gridspec kw gridspec kw return fig axs
def subplots nrows 1 ncols 1 sharex False sharey False squeeze True subplot kw None gridspec kw None **fig kw fig figure **fig kw axs fig subplots nrows nrows ncols ncols sharex sharex sharey sharey squeeze squeeze subplot kw subplot kw gridspec kw gridspec kw return fig axs
def subplots nrows 1 ncols 1 sharex False sharey False squeeze True subplot kw None gridspec kw None **fig kw fig figure **fig kw axs fig subplots nrows nrows ncols ncols sharex sharex sharey sharey squeeze squeeze subplot kw subplot kw gridspec kw gridspec kw return fig axs
def external auth intercept request mode if mode 'login' return external auth login request elif mode 'register' return external auth register request
def read directory changes handle recursive event buffer ctypes create string buffer BUFFER SIZE nbytes ctypes wintypes DWORD try Read Directory Changes W handle ctypes byref event buffer len event buffer recursive WATCHDOG FILE NOTIFY FLAGS ctypes byref nbytes None None except Windows Error as e if e winerror ERROR OPERATION ABORTED return [] 0 raise etry int class longexcept Name Error int class intreturn event buffer raw int class nbytes value
def get help return stem interpreter msg 'msg help' address DEFAULT ARGS['control address'] port DEFAULT ARGS['control port'] socket DEFAULT ARGS['control socket']
def with backing lock method def wrapped method self *args **dargs already have lock self backing file lock is not None if not already have lock self lock backing file try return method self *args **dargs finally if not already have lock self unlock backing file wrapped method name method name wrapped method doc method doc return wrapped method
def listen description factory default None from twisted internet import reactor name args kw parse description factory default return getattr reactor 'listen' + name *args **kw
def recv arrays socket headers socket recv json if 'stop' in headers raise Stop Iterationarrays []for header in headers data socket recv buf buffer data array numpy frombuffer buf dtype numpy dtype header['descr'] array shape header['shape']if header['fortran order'] array shape header['shape'][ -1 ]array array transpose arrays append array return arrays
def js escaped string string for js if string for js is None string for js ''string for js decode utf 8 string for js string for js escapejs string for js return string for js
def joined name host user 'rabbit' ram node None runas 'root' ret {'name' name 'result' True 'comment' '' 'changes' {}}status salt ['rabbitmq cluster status'] if '{ 0 }@{ 1 }' format user host in status ret['comment'] ' Alreadyincluster'return retif not opts ['test'] result salt ['rabbitmq join cluster'] host user ram node runas runas if ' Error' in result ret['result'] Falseret['comment'] result[' Error']return retelif ' Join' in result ret['comment'] result[' Join']ret['changes'] {'old' '' 'new' '{ 0 }@{ 1 }' format user host }if opts ['test'] ret['result'] Noneret['comment'] ' Nodeissettojoincluster{ 0 }@{ 1 }' format user host return ret
def joined name host user 'rabbit' ram node None runas 'root' ret {'name' name 'result' True 'comment' '' 'changes' {}}status salt ['rabbitmq cluster status'] if '{ 0 }@{ 1 }' format user host in status ret['comment'] ' Alreadyincluster'return retif not opts ['test'] result salt ['rabbitmq join cluster'] host user ram node runas runas if ' Error' in result ret['result'] Falseret['comment'] result[' Error']return retelif ' Join' in result ret['comment'] result[' Join']ret['changes'] {'old' '' 'new' '{ 0 }@{ 1 }' format user host }if opts ['test'] ret['result'] Noneret['comment'] ' Nodeissettojoincluster{ 0 }@{ 1 }' format user host return ret
def in random order data indexes [i for i in enumerate data ]random shuffle indexes for i in indexes yield data[i]
def in random order data indexes [i for i in enumerate data ]random shuffle indexes for i in indexes yield data[i]
def setup logging handler excluded loggers EXCLUDED LOGGER DEFAULTS log level logging INFO all excluded loggers set excluded loggers + EXCLUDED LOGGER DEFAULTS logger logging get Logger logger set Level log level logger add Handler handler logger add Handler logging Stream Handler for logger name in all excluded loggers logger logging get Logger logger name logger propagate Falselogger add Handler logging Stream Handler
def setup logging handler excluded loggers EXCLUDED LOGGER DEFAULTS log level logging INFO all excluded loggers set excluded loggers + EXCLUDED LOGGER DEFAULTS logger logging get Logger logger set Level log level logger add Handler handler logger add Handler logging Stream Handler for logger name in all excluded loggers logger logging get Logger logger name logger propagate Falselogger add Handler logging Stream Handler
def setup logging handler excluded loggers EXCLUDED LOGGER DEFAULTS log level logging INFO all excluded loggers set excluded loggers + EXCLUDED LOGGER DEFAULTS logger logging get Logger logger set Level log level logger add Handler handler logger add Handler logging Stream Handler for logger name in all excluded loggers logger logging get Logger logger name logger propagate Falselogger add Handler logging Stream Handler
def setup logging handler excluded loggers EXCLUDED LOGGER DEFAULTS log level logging INFO all excluded loggers set excluded loggers + EXCLUDED LOGGER DEFAULTS logger logging get Logger logger set Level log level logger add Handler handler logger add Handler logging Stream Handler for logger name in all excluded loggers logger logging get Logger logger name logger propagate Falselogger add Handler logging Stream Handler
def main description project id day month year hours minutes source bucket access key secret access key sink bucket credentials Google Credentials get application default storagetransfer discovery build 'storagetransfer' 'v 1 ' credentials credentials transfer job {'description' description 'status' 'ENABLED' 'project Id' project id 'schedule' {'schedule Start Date' {'day' day 'month' month 'year' year} 'schedule End Date' {'day' day 'month' month 'year' year} 'start Time Of Day' {'hours' hours 'minutes' minutes}} 'transfer Spec' {'aws S 3 Data Source' {'bucket Name' source bucket 'aws Access Key' {'access Key Id' access key 'secret Access Key' secret access key}} 'gcs Data Sink' {'bucket Name' sink bucket}}}result storagetransfer transfer Jobs create body transfer job execute print ' Returnedtransfer Job {}' format json dumps result indent 4
def delay exponential base growth factor attempts if base 'rand' base random random elif base < 0 raise Value Error " The'base'parammustbegreaterthan 0 got %s" % base time to sleep base * growth factor ** attempts - 1 return time to sleep
def add extension name ext languages []for language in registered languages for generator in language html generators if name generator name language extension patterns append ext
def difftrap function interval numtraps if numtraps < 0 raise Value Error 'numtrapsmustbe> 0 indifftrap ' elif numtraps 1 return 0 5 * function interval[ 0 ] + function interval[ 1 ] else numtosum numtraps / 2 h float interval[ 1 ] - interval[ 0 ] / numtosum lox interval[ 0 ] + 0 5 * h points lox + h * np arange numtosum s np sum function points axis 0 return s
def get minibatches idx n minibatch size shuffle False idx list numpy arange n dtype 'int 32 ' if shuffle numpy random shuffle idx list minibatches []minibatch start 0for i in range n // minibatch size minibatches append idx list[minibatch start minibatch start + minibatch size ] minibatch start + minibatch sizeif minibatch start n minibatches append idx list[minibatch start ] return zip range len minibatches minibatches
def get minibatches idx n minibatch size shuffle False idx list numpy arange n dtype 'int 32 ' if shuffle numpy random shuffle idx list minibatches []minibatch start 0for i in range n // minibatch size minibatches append idx list[minibatch start minibatch start + minibatch size ] minibatch start + minibatch sizeif minibatch start n minibatches append idx list[minibatch start ] return zip range len minibatches minibatches
def next datetime with utc hour table name utc hour today datetime date today start date time datetime datetime year today year month today month day today day hour utc hour minute get deterministic value for table name table name 60 second get deterministic value for table name table name 60 if start date time < datetime datetime utcnow one day datetime timedelta days 1 start date time + one dayreturn start date time
def relative time d other None ndigits 0 drt unit decimal relative time d other ndigits cardinalize True phrase 'ago'if drt < 0 phrase 'fromnow'return '%g%s%s' % abs drt unit phrase
def test read user dict default value mocker mock prompt mocker patch u'cookiecutter prompt click prompt' autospec True return value u'default' val read user dict u'name' {u'project slug' u'pytest-plugin'} assert mock prompt call args mocker call u'name' type click STRING default u'default' value proc process json assert val {u'project slug' u'pytest-plugin'}
def test read user dict default value mocker mock prompt mocker patch u'cookiecutter prompt click prompt' autospec True return value u'default' val read user dict u'name' {u'project slug' u'pytest-plugin'} assert mock prompt call args mocker call u'name' type click STRING default u'default' value proc process json assert val {u'project slug' u'pytest-plugin'}
def get stream type env args if not env stdout isatty and not args prettify Stream partial Raw Stream chunk size Raw Stream CHUNK SIZE BY LINE if args stream else Raw Stream CHUNK SIZE elif args prettify Stream partial Pretty Stream if args stream else Buffered Pretty Stream env env conversion Conversion formatting Formatting env env groups args prettify color scheme args style explicit json args json else Stream partial Encoded Stream env env return Stream
@require GE Tdef wiki rows request readout slug product get product request readout kb readout request readout slug READOUTS locale request GET get 'locale' mode smart int request GET get 'mode' None product product max rows smart int request GET get 'max' fallback None return Http Response readout render max rows max rows
def csr obtain cert config le client csr typ config actual csr certr chain le client obtain certificate from csr config domains csr typ if config dry run logger debug ' Dryrun skippingsavingcertificateto%s' config cert path else cert path cert fullchain le client save certificate certr chain config cert path config chain path config fullchain path report new cert config cert path cert fullchain
def csr obtain cert config le client csr typ config actual csr certr chain le client obtain certificate from csr config domains csr typ if config dry run logger debug ' Dryrun skippingsavingcertificateto%s' config cert path else cert path cert fullchain le client save certificate certr chain config cert path config chain path config fullchain path report new cert config cert path cert fullchain
def csr obtain cert config le client csr typ config actual csr certr chain le client obtain certificate from csr config domains csr typ if config dry run logger debug ' Dryrun skippingsavingcertificateto%s' config cert path else cert path cert fullchain le client save certificate certr chain config cert path config chain path config fullchain path report new cert config cert path cert fullchain
def csr obtain cert config le client csr typ config actual csr certr chain le client obtain certificate from csr config domains csr typ if config dry run logger debug ' Dryrun skippingsavingcertificateto%s' config cert path else cert path cert fullchain le client save certificate certr chain config cert path config chain path config fullchain path report new cert config cert path cert fullchain
def csr obtain cert config le client csr typ config actual csr certr chain le client obtain certificate from csr config domains csr typ if config dry run logger debug ' Dryrun skippingsavingcertificateto%s' config cert path else cert path cert fullchain le client save certificate certr chain config cert path config chain path config fullchain path report new cert config cert path cert fullchain
def csr obtain cert config le client csr typ config actual csr certr chain le client obtain certificate from csr config domains csr typ if config dry run logger debug ' Dryrun skippingsavingcertificateto%s' config cert path else cert path cert fullchain le client save certificate certr chain config cert path config chain path config fullchain path report new cert config cert path cert fullchain
def csr obtain cert config le client csr typ config actual csr certr chain le client obtain certificate from csr config domains csr typ if config dry run logger debug ' Dryrun skippingsavingcertificateto%s' config cert path else cert path cert fullchain le client save certificate certr chain config cert path config chain path config fullchain path report new cert config cert path cert fullchain
def csr obtain cert config le client csr typ config actual csr certr chain le client obtain certificate from csr config domains csr typ if config dry run logger debug ' Dryrun skippingsavingcertificateto%s' config cert path else cert path cert fullchain le client save certificate certr chain config cert path config chain path config fullchain path report new cert config cert path cert fullchain
@ File System in directory current directory 'django' 'couves' def test django agains couves status out run scenario expect ' Couvesbeforeall' to be within out expect ' Couvesafterall' to be within out
def require valid version version from payload exploration version if version from payload is None raise base Base Handler Invalid Input Exception ' Invalid POS Trequest aversionmustbespecified ' if version from payload exploration version raise base Base Handler Invalid Input Exception ' Tryingtoupdateversion%sofexplorationfromversion%s whichistooold Pleasereloadthepageandtryagain ' % exploration version version from payload
def clean flags args caller flags ''if args is None return flagsallowed 'a' 'B' 'h' 'H' 'i' 'k' 'l' 'P' 't' 'T' 'x' 'v' for flag in args if flag in allowed flags + flagelse raise Command Execution Error ' Invalidflagpassedto{ 0 }' format caller return flags
def assert rpm content test case expected paths package path output check output ['rpm' '--query' '--list' '--package' package path path] actual paths set map File Path output splitlines test case assert Equal expected paths actual paths
def test list with newlines t ascii read ['abc' '123 \n' '456 \n' '\n' '\n'] assert t colnames ['abc'] assert len t 2 assert t[ 0 ][ 0 ] 123 assert t[ 1 ][ 0 ] 456
def get free range parent range excluded ranges size PRIMARY VIP RANGE SIZE free cidrs netaddr IP Set [parent range] - netaddr IP Set excluded ranges for cidr in free cidrs iter cidrs if cidr prefixlen < size return '%s/%s' % cidr network size raise Value Error ' Networkofsize% size s from I Prange% parent range sexcluding I Pranges% excluded ranges swasnotfound ' % {'size' size 'parent range' parent range 'excluded ranges' excluded ranges}
def bound state log lik X initial bound precs means covariance type n components n features means shapen samples X shape[ 0 ]bound np empty n samples n components bound[ ] initial boundif covariance type in ['diag' 'spherical'] for k in range n components d X - means[k] bound[ k] - 0 5 * np sum d * d * precs[k] axis 1 elif covariance type 'tied' for k in range n components bound[ k] - 0 5 * sym quad form X means[k] precs elif covariance type 'full' for k in range n components bound[ k] - 0 5 * sym quad form X means[k] precs[k] return bound
def build dataset n samples 50 n features 200 n informative features 10 n targets 1 random state np random Random State 0 if n targets > 1 w random state randn n features n targets else w random state randn n features w[n informative features ] 0 0X random state randn n samples n features y np dot X w X test random state randn n samples n features y test np dot X test w return X y X test y test
def build dataset n samples 50 n features 200 n informative features 10 n targets 1 random state np random Random State 0 if n targets > 1 w random state randn n features n targets else w random state randn n features w[n informative features ] 0 0X random state randn n samples n features y np dot X w X test random state randn n samples n features y test np dot X test w return X y X test y test
def sokalmichener u v u validate vector u v validate vector v if u dtype bool ntt u & v sum nff ~ u & ~ v sum else ntt u * v sum nff 1 0 - u * 1 0 - v sum nft ntf nbool correspond ft tf u v return float 2 0 * ntf + nft / float ntt + nff + 2 0 * ntf + nft
def date lookup for field field date if isinstance field models Date Time Field date range datetime datetime combine date datetime time min datetime datetime combine date datetime time max return { '%s range' % field name date range}else return {field name date}
def date lookup for field field date if isinstance field models Date Time Field date range datetime datetime combine date datetime time min datetime datetime combine date datetime time max return { '%s range' % field name date range}else return {field name date}
def labels inertia precompute dense X x squared norms centers distances n samples X shape[ 0 ] labels mindist pairwise distances argmin min X X Y centers metric 'euclidean' metric kwargs {'squared' True} labels labels astype np int 32 if n samples distances shape[ 0 ] distances[ ] mindistinertia mindist sum return labels inertia
def oauth dance app name consumer key consumer secret token filename None open browser True print " Hithere We'regonnagetyouallsetuptouse%s " % app name twitter Twitter auth O Auth '' '' consumer key consumer secret format '' api version None oauth token oauth token secret parse oauth tokens twitter oauth request token oauth callback 'oob' oauth url 'https //api twitter com/oauth/authorize?oauth token ' + oauth token oauth verifier get oauth pin oauth url open browser twitter Twitter auth O Auth oauth token oauth token secret consumer key consumer secret format '' api version None oauth token oauth token secret parse oauth tokens twitter oauth access token oauth verifier oauth verifier if token filename write token file token filename oauth token oauth token secret print print " That'sit Yourauthorizationkeyshavebeenwrittento%s " % token filename return oauth token oauth token secret
def oauth dance app name consumer key consumer secret token filename None open browser True print " Hithere We'regonnagetyouallsetuptouse%s " % app name twitter Twitter auth O Auth '' '' consumer key consumer secret format '' api version None oauth token oauth token secret parse oauth tokens twitter oauth request token oauth callback 'oob' oauth url 'https //api twitter com/oauth/authorize?oauth token ' + oauth token oauth verifier get oauth pin oauth url open browser twitter Twitter auth O Auth oauth token oauth token secret consumer key consumer secret format '' api version None oauth token oauth token secret parse oauth tokens twitter oauth access token oauth verifier oauth verifier if token filename write token file token filename oauth token oauth token secret print print " That'sit Yourauthorizationkeyshavebeenwrittento%s " % token filename return oauth token oauth token secret
def parse headers content disposition content disposition content disposition decode 'iso- 8859 - 1 ' content disposition normalize ws content disposition parsed peg parse content disposition Content Disposition Value return Content Disposition disposition parsed dtype assocs parsed params
def send message sock message s message Serialize To String packed len struct pack '>L' len s packed message packed len + s sock send packed message
def get default parser usage '%prog[options]<start stop status>' parser Option Parser usage usage parser add option '--debug' action 'store true' help ' Runintheforeground logtostdout' parser add option '--syslog' action 'store true' help ' Writelogstosyslog' parser add option '--nodaemon' action 'store true' help ' Runintheforeground' parser add option '--profile' help ' Recordperformanceprofiledatatothegivenfile' parser add option '--profiler' help ' Specifytheprofilertouse' parser add option '--pidfile' default None help ' Writepidtothegivenfile' parser add option '--umask' default None help ' Usethegivenumaskwhencreatingfiles' parser add option '--config' default None help ' Usethegivenconfigfile' parser add option '--whitelist' default None help ' Usethegivenwhitelistfile' parser add option '--blacklist' default None help ' Usethegivenblacklistfile' parser add option '--logdir' default None help ' Writelogsinthegivendirectory' parser add option '--instance' default 'a' help ' Manageaspecificcarboninstance' return parser
def test sample wrong X dft ratio cc Cluster Centroids random state RND SEED cc fit X Y assert raises Runtime Error cc sample np random random 100 40 np array [0 ] * 50 + [1 ] * 50
def test sample wrong X dft ratio cc Cluster Centroids random state RND SEED cc fit X Y assert raises Runtime Error cc sample np random random 100 40 np array [0 ] * 50 + [1 ] * 50
def cluster remove version name 'main' stop False cmd [salt utils which 'pg dropcluster' ]if stop cmd + ['--stop']cmd + [version name]cmdstr '' join [pipes quote c for c in cmd] ret salt ['cmd run all'] cmdstr python shell False if ret get 'retcode' 0 0 log error ' Errorremovinga Postgresqlcluster{ 0 }/{ 1 }' format version name else ret['changes'] ' Successfullyremovedcluster{ 0 }/{ 1 }' format version name return ret
def local extra dirs func def wraps self *args **kwargs if kwargs get 'base dir' None is None return func self *args **kwargs else for c in self class mro if c name ' Disk Object Store' return getattr c func name self *args **kwargs raise Exception " Couldnotcall Disk Object Store's%smethod doesyour Object Storeplugininheritfrom Disk Object Store?" % func name return wraps
def local extra dirs func def wraps self *args **kwargs if kwargs get 'base dir' None is None return func self *args **kwargs else for c in self class mro if c name ' Disk Object Store' return getattr c func name self *args **kwargs raise Exception " Couldnotcall Disk Object Store's%smethod doesyour Object Storeplugininheritfrom Disk Object Store?" % func name return wraps
def get resources dests resources root rules def get rel path base path base base replace os path sep '/' path path replace os path sep '/' assert path startswith base return path[len base ] lstrip '/' destinations {}for base suffix dest in rules prefix os path join resources root base for abs base in iglob prefix abs glob os path join abs base suffix for abs path in iglob abs glob resource file get rel path resources root abs path if dest is None destinations pop resource file None else rel path get rel path abs base abs path rel dest dest replace os path sep '/' rstrip '/' destinations[resource file] rel dest + '/' + rel path return destinations
def search software target search results {}software dict get reg software items for key value in six iteritems software if key is not None if target lower in key lower search results[key] valuereturn search results
def search software target search results {}software dict get reg software items for key value in six iteritems software if key is not None if target lower in key lower search results[key] valuereturn search results
def salt cloud force ascii exc if not isinstance exc Unicode Encode Error Unicode Translate Error raise Type Error " Can'thandle{ 0 }" format exc unicode trans {u'\xa 0 ' u'' u'\u 2013 ' u'-'}if exc object[exc start exc end] in unicode trans return unicode trans[exc object[exc start exc end]] exc end raise exc
def salt cloud force ascii exc if not isinstance exc Unicode Encode Error Unicode Translate Error raise Type Error " Can'thandle{ 0 }" format exc unicode trans {u'\xa 0 ' u'' u'\u 2013 ' u'-'}if exc object[exc start exc end] in unicode trans return unicode trans[exc object[exc start exc end]] exc end raise exc
def salt cloud force ascii exc if not isinstance exc Unicode Encode Error Unicode Translate Error raise Type Error " Can'thandle{ 0 }" format exc unicode trans {u'\xa 0 ' u'' u'\u 2013 ' u'-'}if exc object[exc start exc end] in unicode trans return unicode trans[exc object[exc start exc end]] exc end raise exc
def salt cloud force ascii exc if not isinstance exc Unicode Encode Error Unicode Translate Error raise Type Error " Can'thandle{ 0 }" format exc unicode trans {u'\xa 0 ' u'' u'\u 2013 ' u'-'}if exc object[exc start exc end] in unicode trans return unicode trans[exc object[exc start exc end]] exc end raise exc
def salt cloud force ascii exc if not isinstance exc Unicode Encode Error Unicode Translate Error raise Type Error " Can'thandle{ 0 }" format exc unicode trans {u'\xa 0 ' u'' u'\u 2013 ' u'-'}if exc object[exc start exc end] in unicode trans return unicode trans[exc object[exc start exc end]] exc end raise exc
def salt cloud force ascii exc if not isinstance exc Unicode Encode Error Unicode Translate Error raise Type Error " Can'thandle{ 0 }" format exc unicode trans {u'\xa 0 ' u'' u'\u 2013 ' u'-'}if exc object[exc start exc end] in unicode trans return unicode trans[exc object[exc start exc end]] exc end raise exc
def salt cloud force ascii exc if not isinstance exc Unicode Encode Error Unicode Translate Error raise Type Error " Can'thandle{ 0 }" format exc unicode trans {u'\xa 0 ' u'' u'\u 2013 ' u'-'}if exc object[exc start exc end] in unicode trans return unicode trans[exc object[exc start exc end]] exc end raise exc
def salt cloud force ascii exc if not isinstance exc Unicode Encode Error Unicode Translate Error raise Type Error " Can'thandle{ 0 }" format exc unicode trans {u'\xa 0 ' u'' u'\u 2013 ' u'-'}if exc object[exc start exc end] in unicode trans return unicode trans[exc object[exc start exc end]] exc end raise exc
def salt cloud force ascii exc if not isinstance exc Unicode Encode Error Unicode Translate Error raise Type Error " Can'thandle{ 0 }" format exc unicode trans {u'\xa 0 ' u'' u'\u 2013 ' u'-'}if exc object[exc start exc end] in unicode trans return unicode trans[exc object[exc start exc end]] exc end raise exc
def salt cloud force ascii exc if not isinstance exc Unicode Encode Error Unicode Translate Error raise Type Error " Can'thandle{ 0 }" format exc unicode trans {u'\xa 0 ' u'' u'\u 2013 ' u'-'}if exc object[exc start exc end] in unicode trans return unicode trans[exc object[exc start exc end]] exc end raise exc
def active mounts freebsd ret for line in salt ['cmd run stdout'] 'mount-p' split '\n' comps re sub '\\s+' '' line split ret[comps[ 1 ]] {'device' comps[ 0 ] 'fstype' comps[ 2 ] 'opts' resolve user group names comps[ 3 ] split ' ' }return ret
def parse iso timestamp entry if not isinstance entry str str type raise Value Error 'parse iso timestamp inputmustbeastr gota%s' % type entry if ' ' in entry timestamp str microseconds entry split ' ' else timestamp str microseconds entry '000000 ' if len microseconds 6 or not microseconds isdigit raise Value Error "timestamp'smicrosecondsshouldbesixdigits" if timestamp str[ 10 ] 'T' timestamp str timestamp str[ 10 ] + '' + timestamp str[ 11 ] else raise Value Error "timestampdidn'tcontaindelimeter'T'betweendateandtime" timestamp parse timestamp timestamp str return timestamp + datetime timedelta microseconds int microseconds
def get non private exploration summaries return get exploration summaries from models exp models Exp Summary Model get non private
def test ast unicode strings def compile string s hy s Hy String s hy s start line hy s end line 0hy s start column hy s end column 0code hy compile [hy s] u' main ' return code body[ 0 ] value sassert compile string u'test' u'test' assert compile string u'\u 03 b 1 \u 03 b 2 ' u'\u 03 b 1 \u 03 b 2 ' assert compile string u'\xc 3 \xa 9 ' u'\xc 3 \xa 9 '
def op abs tmul lin op value if lin op type is lo NEG result valueelif lin op type is lo MUL coeff mul lin op data {} True if np isscalar coeff result coeff * value else result coeff T * value elif lin op type is lo DIV divisor mul lin op data {} True result value / divisor elif lin op type is lo CONV result conv mul lin op value True True else result op tmul lin op value return result
def make edge table bt data asarray [d for d in bt iter data axis 'observation' dense True ] oids asarray bt ids axis 'observation' header '# Sample DCTB OTU DCTB Abundance'lines [header]for sample in bt ids sample ind bt index sample 'sample' otu ids oids[data[ sample ind] nonzero [0 ]]otu abs data[ sample ind][data[ sample ind] nonzero [0 ]]connections [ '%s DCTB %s DCTB %s' % sample otu ab for otu ab in zip otu ids otu abs ]lines extend connections return lines
def make edge table bt data asarray [d for d in bt iter data axis 'observation' dense True ] oids asarray bt ids axis 'observation' header '# Sample DCTB OTU DCTB Abundance'lines [header]for sample in bt ids sample ind bt index sample 'sample' otu ids oids[data[ sample ind] nonzero [0 ]]otu abs data[ sample ind][data[ sample ind] nonzero [0 ]]connections [ '%s DCTB %s DCTB %s' % sample otu ab for otu ab in zip otu ids otu abs ]lines extend connections return lines
def make edge table bt data asarray [d for d in bt iter data axis 'observation' dense True ] oids asarray bt ids axis 'observation' header '# Sample DCTB OTU DCTB Abundance'lines [header]for sample in bt ids sample ind bt index sample 'sample' otu ids oids[data[ sample ind] nonzero [0 ]]otu abs data[ sample ind][data[ sample ind] nonzero [0 ]]connections [ '%s DCTB %s DCTB %s' % sample otu ab for otu ab in zip otu ids otu abs ]lines extend connections return lines
def read data filename with zipfile Zip File filename as f data tf compat as str f read f namelist [0 ] split return data
def get namespace name os environ get ENV CURRENT NAMESPACE None if name is None name config default namespace for request if name is not None set namespace name if name is None name ''return name
def is dir info if hasattr info u'isdir' return info isdir else base os path basename info filename return not base
def region codes for country code country code regions COUNTRY CODE TO REGION CODE get country code None if regions is None return else return regions
def region codes for country code country code regions COUNTRY CODE TO REGION CODE get country code None if regions is None return else return regions
def get template from request request obj None no current page False template Noneif len get cms setting 'TEMPLATES' 1 return get cms setting 'TEMPLATES' [0 ][ 0 ]if hasattr request 'POST' and 'template' in request POST template request POST['template']elif hasattr request 'GET' and 'template' in request GET template request GET['template']if not template and obj is not None template obj get template if not template and not no current page and hasattr request 'current page' current page request current pageif hasattr current page 'get template' template current page get template if template is not None and template in dict get cms setting 'TEMPLATES' keys if template constants TEMPLATE INHERITANCE MAGIC and obj return obj get template return templatereturn get cms setting 'TEMPLATES' [0 ][ 0 ]
def create body url build url RESOURCE return request 'post' url json body
def qcut x q labels None retbins False precision 3 duplicates 'raise' x is series series index name x preprocess for cut x x dtype coerce to type x if is integer q quantiles np linspace 0 1 q + 1 else quantiles qbins algos quantile x quantiles fac bins bins to cuts x bins labels labels precision precision include lowest True dtype dtype duplicates duplicates return postprocess for cut fac bins retbins x is series series index name
@ ensure existsdef reboot name kill False if sd version > 219 if state name 'running' ret machinectl 'reboot{ 0 }' format name else return start name else cmd 'systemctlstopsystemd-nspawn@{ 0 }' format name ret salt ['cmd run all'] cmd python shell False if ret['retcode'] 0 context ['retcode'] salt defaults exitcodes EX UNAVAILABL Ereturn Falsecmd 'systemctlstartsystemd-nspawn@{ 0 }' format name ret salt ['cmd run all'] cmd python shell False if ret['retcode'] 0 context ['retcode'] salt defaults exitcodes EX UNAVAILABL Ereturn Falsereturn True
def connect client trig queue t0 time time while time time - t0 < max wait and server is None or not server running time sleep 0 01 assert true server is not None and server running stim client Stim Client 'localhost' port 4218 t0 time time while time time - t0 < max wait and not have put in trigger time sleep 0 01 assert true have put in trigger trig queue put stim client get trigger stim client close
def list monitor data kwargs None call None if call 'function' raise Salt Cloud System Exit ' Thelist monitor datamustbecalledwith-for--function ' if not isinstance kwargs dict kwargs {}ret {}params {' Action' ' Get Monitor Data' ' Region Id' get location }if 'name' in kwargs params[' Instance Id'] kwargs['name']items query params params monitor Data items[' Monitor Data']for data in monitor Data[' Instance Monitor Data'] ret[data[' Instance Id']] {}for item in data ret[data[' Instance Id']][item] str data[item] return ret
def initialize db configure db
def init once path os getenv 'LIBCLOUD DEBUG' if path mode 'a'from libcloud utils py 3 import PY 3 if path in ['/dev/stderr' '/dev/stdout'] and PY 3 mode 'w'fo codecs open path mode encoding 'utf 8 ' enable debug fo if have paramiko paramiko common logging basic Config level paramiko common DEBUG
def suite suite unittest Test Suite suite add Test unittest make Suite Test Markdown suite add Test unittest make Suite Test Block Parser suite add Test unittest make Suite Test Block Parser State suite add Test unittest make Suite Test Html Stash suite add Test unittest make Suite Test Ordered Dict for filename in os listdir 'markdown/extensions' if filename endswith ' py' module 'markdown extensions %s' % filename[ -3 ] try suite add Test Doc Test Suite module except Value Errorreturn suite
def concatenate 2 arrays axes [] if isinstance arrays Iterator arrays list arrays if not isinstance arrays list tuple return arraysif len axes > 1 arrays [ concatenate 2 a axes axes[ 1 ] for a in arrays]return np concatenate arrays axis axes[ 0 ]
def test http header encoding mocked socket mock Magic Mock mocked socket sendall mock Magic Mock mocked request mock Magic Mock response Response mocked request mocked socket None response headers append 'foo' u'h\xe 4 der' with pytest raises Unicode Encode Error response send headers tosend response default headers tosend extend [ '%s %s\r\n' % k v for k v in response headers] header str '%s\r\n' % '' join tosend with pytest raises Unicode Encode Error mocked socket sendall util to bytestring header str 'ascii'
def set restart freeze enabled state salt utils mac utils validate enabled enabled cmd 'systemsetup-setrestartfreeze{ 0 }' format state salt utils mac utils execute return success cmd return salt utils mac utils confirm updated state get restart freeze True
def set subnet name name cmd 'systemsetup-setlocalsubnetname"{ 0 }"' format name salt utils mac utils execute return success cmd return salt utils mac utils confirm updated name get subnet name
def virtual if not salt utils is windows return False ' Moduleonlyavailableon Windows' return virtualname
def unsafe inline enabled response non report only policies retrieve csp policies response report only policies retrieve csp policies response True policies all merge policies dict non report only policies report only policies if len policies all > 0 for directive name in policies all if directive name lower CSP DIRECTIVE SCRIPT and directive name lower CSP DIRECTIVE STYLE continuefor directive value in policies all[directive name] if directive value strip lower CSP DIRECTIVE VALUE UNSAFE INLINE return Truereturn False
@transaction non atomic requests@require POST@ensure csrf cookie@cache control no cache True no store True must revalidate True @require level 'staff' def export ora 2 data request course id course key Slash Separated Course Key from deprecated string course id try lms djangoapps instructor task api submit export ora 2 data request course key success status ' The OR Adatareportisbeinggenerated ' return Json Response {'status' success status} except Already Running Error already running status " An OR Adatareportgenerationtaskisalreadyinprogress Checkthe' Pending Tasks'tableforthestatusofthetask Whencompleted thereportwillbeavailablefordownloadinthetablebelow " return Json Response {'status' already running status}
@transaction non atomic requests@require POST@ensure csrf cookie@cache control no cache True no store True must revalidate True @require level 'staff' def export ora 2 data request course id course key Slash Separated Course Key from deprecated string course id try lms djangoapps instructor task api submit export ora 2 data request course key success status ' The OR Adatareportisbeinggenerated ' return Json Response {'status' success status} except Already Running Error already running status " An OR Adatareportgenerationtaskisalreadyinprogress Checkthe' Pending Tasks'tableforthestatusofthetask Whencompleted thereportwillbeavailablefordownloadinthetablebelow " return Json Response {'status' already running status}
def get random id id ''for n in range 6 letter random choice letter choices id + letterreturn id
@transaction atomicdef mass get or create model class base queryset id field default dict global defaults current instances list base queryset current ids set [unicode getattr c id field for c in current instances] given ids map unicode default dict keys new ids [g for g in given ids if g not in current ids ]prepared models []for new id in new ids defaults default dict[new id]defaults[id field] new iddefaults update global defaults model instance model class **defaults prepared models append model instance if hasattr model class objects 'bulk create' model class objects bulk create prepared models else [m save for m in prepared models]inserted model instances prepared modelsreturn current instances inserted model instances
@transaction atomicdef mass get or create model class base queryset id field default dict global defaults current instances list base queryset current ids set [unicode getattr c id field for c in current instances] given ids map unicode default dict keys new ids [g for g in given ids if g not in current ids ]prepared models []for new id in new ids defaults default dict[new id]defaults[id field] new iddefaults update global defaults model instance model class **defaults prepared models append model instance if hasattr model class objects 'bulk create' model class objects bulk create prepared models else [m save for m in prepared models]inserted model instances prepared modelsreturn current instances inserted model instances
@transaction atomicdef mass get or create model class base queryset id field default dict global defaults current instances list base queryset current ids set [unicode getattr c id field for c in current instances] given ids map unicode default dict keys new ids [g for g in given ids if g not in current ids ]prepared models []for new id in new ids defaults default dict[new id]defaults[id field] new iddefaults update global defaults model instance model class **defaults prepared models append model instance if hasattr model class objects 'bulk create' model class objects bulk create prepared models else [m save for m in prepared models]inserted model instances prepared modelsreturn current instances inserted model instances
@transaction atomicdef mass get or create model class base queryset id field default dict global defaults current instances list base queryset current ids set [unicode getattr c id field for c in current instances] given ids map unicode default dict keys new ids [g for g in given ids if g not in current ids ]prepared models []for new id in new ids defaults default dict[new id]defaults[id field] new iddefaults update global defaults model instance model class **defaults prepared models append model instance if hasattr model class objects 'bulk create' model class objects bulk create prepared models else [m save for m in prepared models]inserted model instances prepared modelsreturn current instances inserted model instances
def fasthash string md 4 hashlib new 'md 4 ' md 4 update string return md 4 hexdigest
def group snapshot get all context filters None return IMPL group snapshot get all context filters
def context factory and credential path host port ca Certificate load PEM path child 'cluster crt' get Content node credential Node Credential from path path 'node' policy Control Service Policy ca certificate ca client credential node credential credential return TLS Context context factory policy creator For Netloc host port node credential node credential
def context factory and credential path host port ca Certificate load PEM path child 'cluster crt' get Content node credential Node Credential from path path 'node' policy Control Service Policy ca certificate ca client credential node credential credential return TLS Context context factory policy creator For Netloc host port node credential node credential
def credit course requirements course key student if not settings FEATURES get 'ENABLE CREDIT ELIGIBILITY' False and is credit course course key return Noneenrollment Course Enrollment get enrollment student course key if enrollment and enrollment mode not in REQUIREMENTS DISPLAY MODES return Nonenon eligible statuses ['failed' 'declined']requirement statuses get credit requirement status course key student username if is user eligible for credit student username course key eligibility status 'eligible'elif any requirement['status'] in non eligible statuses for requirement in requirement statuses eligibility status 'not eligible'else eligibility status 'partial eligible'return {'eligibility status' eligibility status 'requirements' requirement statuses}
def rs swap a b d {}for rsa in a d[rsa] [rsb for rsb in b if rsa symbol rsb symbol ][ 0 ]return d
def check for int x try y int x except Overflow Error Value Error passelse if x x and y x return yreturn x
def hilbert x N None axis -1 x asarray x if iscomplexobj x raise Value Error 'xmustbereal ' if N is None N x shape[axis]if N < 0 raise Value Error ' Nmustbepositive ' Xf fftpack fft x N axis axis h zeros N if N % 2 0 h[ 0 ] h[ N // 2 ] 1h[ 1 N // 2 ] 2else h[ 0 ] 1h[ 1 N + 1 // 2 ] 2if x ndim > 1 ind [newaxis] * x ndim ind[axis] slice None h h[ind]x fftpack ifft Xf * h axis axis return x
def get folder info folder folder info ''if folder and folder parent folder info get folder info folder parent folder info + '%s%s' % folder name replace ' Unnamedfolder' '' folder description or '' return folder info
def run discovery entry points iter cached False reg cache {}if cached reg cache cache registry cache discovery Qt Widget Discovery cached descriptions reg cache registry Qt Widget Registry discovery found category connect registry register category discovery found widget connect registry register widget discovery run if cached cache save registry cache reg cache return registry
def expand substates states def nbits n 'numberofbitssetinnbase 2 'nb 0while n n rem divmod n 2 nb + remreturn nbstatelist []for state in states substates list set state & x for x in states substates sort key nbits reverse True statelist append substates return statelist
def get collection snapshots metadata collection id collection get collection by id collection id current version collection versionversion nums range 1 current version + 1 return collection models Collection Model get snapshots metadata collection id version nums
def Make Cron List Into Yaml cron list statements ['cron ']for cron in cron list statements + cron To Yaml return '\n' join statements + '\n'
def Make Cron List Into Yaml cron list statements ['cron ']for cron in cron list statements + cron To Yaml return '\n' join statements + '\n'
def build bounding box lookup bounding box file lines tf gfile Fast G File bounding box file 'r' readlines images to bboxes {}num bbox 0num image 0for l in lines if l parts l split ' ' assert len parts 5 ' Failedtoparse %s' % l filename parts[ 0 ]xmin float parts[ 1 ] ymin float parts[ 2 ] xmax float parts[ 3 ] ymax float parts[ 4 ] box [xmin ymin xmax ymax]if filename not in images to bboxes images to bboxes[filename] []num image + 1images to bboxes[filename] append box num bbox + 1print ' Successfullyread%dboundingboxesacross%dimages ' % num bbox num image return images to bboxes
def build bounding box lookup bounding box file lines tf gfile Fast G File bounding box file 'r' readlines images to bboxes {}num bbox 0num image 0for l in lines if l parts l split ' ' assert len parts 5 ' Failedtoparse %s' % l filename parts[ 0 ]xmin float parts[ 1 ] ymin float parts[ 2 ] xmax float parts[ 3 ] ymax float parts[ 4 ] box [xmin ymin xmax ymax]if filename not in images to bboxes images to bboxes[filename] []num image + 1images to bboxes[filename] append box num bbox + 1print ' Successfullyread%dboundingboxesacross%dimages ' % num bbox num image return images to bboxes
def simple paginate request queryset per page 20 p paginator Simple Paginator queryset per page page p page request GET get 'page' 1 page url build paged url request return page
def adjust string original length if not length > 0 raise Assertion Errorresulting string originalif len resulting string > length unit db resulting string endswith 'd B' and resulting string find ' ' -1 if len resulting string strip > length and unit db resulting string resulting string[ -2 ]if len resulting string > length for char in '' ' ' 'i' 'o' 'u' 'e' 'a' offset 0 if char '' else 1 while len resulting string > length and resulting string rfind char offset > 0 char pos resulting string rfind char offset resulting string resulting string[ char pos] + resulting string[ char pos + 1 ] resulting string resulting string[ length]resulting string len resulting string < length and resulting string ljust length return resulting string
def test str mlp MLP nvis 2 layers [ Linear 2 'h 0 ' irange 0 Linear 2 'h 1 ' irange 0 ] s str mlp assert isinstance s six string types
def get branch head branch return '%s@head' % branch
def setup platform hass config add devices discovery info None import xmltodictname config get CONF NAME station config get CONF STATION try response requests get RESOURCE timeout 5 if any str station location get '@ Str Nr' for location in xmltodict parse response text ['AKT Data'][' Mes Par'] is False LOGGER error ' Thegivenstationdoesnotexist %s' station return Falseexcept requests exceptions Connection Error LOGGER error ' The UR Lisnotaccessible' return Falsedata Hydrological Data station add devices [ Swiss Hydrological Data Sensor name data ]
@hook command 'wordrandom' 'randomword' autohelp False def random word if not api key return ' Thiscommandrequiresan AP Ikeyfromwordnik com 'url API URL + 'words json/random Word' params {'api key' api key 'has Dictionarydef' 'true' 'vulgar' 'true'}json requests get url params params json if json word json['word']return ' Yourrandomwordis\x 02 {}\x 02 ' format word else return ' Therewasaproblemcontactingthe Wordnik API '
@ File System in directory current directory 'django' 'alfaces' def test django agains alfaces status out commands getstatusoutput 'pythonmanage pyharvest--verbosity 3--no-color' assert equals status 0 out assert ' Testthedjangoapp DONOTHING' in out assert ' Testthedjangoapp FOOBAR' in out
@ File System in directory current directory 'django' 'alfaces' def test django agains alfaces status out commands getstatusoutput 'pythonmanage pyharvest--verbosity 3--no-color' assert equals status 0 out assert ' Testthedjangoapp DONOTHING' in out assert ' Testthedjangoapp FOOBAR' in out
def erase menu stdscr menu y stdscr move menu y 0 stdscr clrtoeol stdscr move menu y + 1 0 stdscr clrtoeol
def erase menu stdscr menu y stdscr move menu y 0 stdscr clrtoeol stdscr move menu y + 1 0 stdscr clrtoeol
def ALL REGIONS WITH CONTENT RATINGS return [x for x in ALL REGIONS if x ratingsbody]
def ALL REGIONS WITH CONTENT RATINGS return [x for x in ALL REGIONS if x ratingsbody]
def create user username password permissions users None uids set if users is None users list users if username in users log warning "'{ 0 }'alreadyexists" format username return Falsefor idx in six iterkeys users uids add users[idx]['index'] uid sorted list set range 2 12 - uids reverse True pop if not execute cmd 'config-gcfg User Admin-ocfg User Admin User Name-i{ 0 }{ 1 }' format uid username delete user username uid return Falseif not set permissions username permissions uid log warning 'unabletosetuserpermissions' delete user username uid return Falseif not change password username password uid log warning 'unabletosetuserpassword' delete user username uid return Falseif not execute cmd 'config-gcfg User Admin-ocfg User Admin Enable-i{ 0 } 1 ' format uid delete user username uid return Falsereturn True
def title to url title max length 50 title force unicode title title rx whitespace sub ' ' title title rx notsafe sub '' title title rx underscore sub ' ' title title title strip ' ' title title lower if len title > max length title title[ max length]last word title rfind ' ' if last word > 0 title title[ last word]return title or ' '
def country timezones iso 3166 code iso 3166 code iso 3166 code upper if not country timezones cache zone tab open resource 'zone tab' for line in zone tab if line startswith '#' continue code coordinates zone line split None 4 [ 3]try country timezones cache[code] append zone except Key Error country timezones cache[code] [zone]return country timezones cache[iso 3166 code]
def country timezones iso 3166 code iso 3166 code iso 3166 code upper if not country timezones cache zone tab open resource 'zone tab' for line in zone tab if line startswith '#' continue code coordinates zone line split None 4 [ 3]try country timezones cache[code] append zone except Key Error country timezones cache[code] [zone]return country timezones cache[iso 3166 code]
def vm disk save name kwargs None call None if call 'action' raise Salt Cloud System Exit ' Thevm disk saveactionmustbecalledwith-aor--action ' if kwargs is None kwargs {}disk id kwargs get 'disk id' None image name kwargs get 'image name' None image type kwargs get 'image type' '' snapshot id int kwargs get 'snapshot id' '- 1 ' if disk id is None or image name is None raise Salt Cloud System Exit " Thevm disk savefunctionrequiresa'disk id'andan'image name'tobeprovided " server user password get xml rpc auth ' ' join [user password] vm id int get vm id kwargs {'name' name} response server one vm disksave auth vm id int disk id image name image type snapshot id data {'action' 'vm disksave' 'saved' response[ 0 ] 'image id' response[ 1 ] 'error code' response[ 2 ]}return data
def vm disk save name kwargs None call None if call 'action' raise Salt Cloud System Exit ' Thevm disk saveactionmustbecalledwith-aor--action ' if kwargs is None kwargs {}disk id kwargs get 'disk id' None image name kwargs get 'image name' None image type kwargs get 'image type' '' snapshot id int kwargs get 'snapshot id' '- 1 ' if disk id is None or image name is None raise Salt Cloud System Exit " Thevm disk savefunctionrequiresa'disk id'andan'image name'tobeprovided " server user password get xml rpc auth ' ' join [user password] vm id int get vm id kwargs {'name' name} response server one vm disksave auth vm id int disk id image name image type snapshot id data {'action' 'vm disksave' 'saved' response[ 0 ] 'image id' response[ 1 ] 'error code' response[ 2 ]}return data
def vm disk save name kwargs None call None if call 'action' raise Salt Cloud System Exit ' Thevm disk saveactionmustbecalledwith-aor--action ' if kwargs is None kwargs {}disk id kwargs get 'disk id' None image name kwargs get 'image name' None image type kwargs get 'image type' '' snapshot id int kwargs get 'snapshot id' '- 1 ' if disk id is None or image name is None raise Salt Cloud System Exit " Thevm disk savefunctionrequiresa'disk id'andan'image name'tobeprovided " server user password get xml rpc auth ' ' join [user password] vm id int get vm id kwargs {'name' name} response server one vm disksave auth vm id int disk id image name image type snapshot id data {'action' 'vm disksave' 'saved' response[ 0 ] 'image id' response[ 1 ] 'error code' response[ 2 ]}return data
def find best app module from import Flaskfor attr name in 'app' 'application' app getattr module attr name None if app is not None and isinstance app Flask return appmatches [v for k v in iteritems module dict if isinstance v Flask ]if len matches 1 return matches[ 0 ]raise No App Exception ' Failedtofindapplicationinmodule"%s" Areyousureitcontainsa Flaskapplication? Maybeyouwrappeditina WSG Imiddlewareoryouareusingafactoryfunction ' % module name
def find best app module from import Flaskfor attr name in 'app' 'application' app getattr module attr name None if app is not None and isinstance app Flask return appmatches [v for k v in iteritems module dict if isinstance v Flask ]if len matches 1 return matches[ 0 ]raise No App Exception ' Failedtofindapplicationinmodule"%s" Areyousureitcontainsa Flaskapplication? Maybeyouwrappeditina WSG Imiddlewareoryouareusingafactoryfunction ' % module name
def find guest agent base dir if CONF xenserver disable agent return Falseagent rel path CONF xenserver agent pathagent path os path join base dir agent rel path if os path isfile agent path LOG info LI ' Xen Servertoolsinstalledinthisimagearecapableofnetworkinjection Networkingfileswillnotbemanipulated' return Truexe daemon filename os path join base dir 'usr' 'sbin' 'xe-daemon' if os path isfile xe daemon filename LOG info LI ' Xen Servertoolsarepresentinthisimagebutarenotcapableofnetworkinjection' else LOG info LI ' Xen Servertoolsarenotinstalledinthisimage' return False
@pytest mark parametrize 'parallel' [ True False] def test lstrip whitespace parallel read basic text '\n 1 2 DCTB 3\n A DCTB DCTB B C\na b c\n' + '\n' table read basic text delimiter ' ' parallel parallel expected Table [['A' 'a'] ['B' 'b'] ['C' 'c']] names '1 ' '2 ' '3 ' assert table equal table expected
@pytest mark django dbdef test directory create bad root with pytest raises Validation Error Directory objects create name 'name' parent None with pytest raises Validation Error Directory objects create name '' parent root
def find monitor type cs vtype return utils find resource cs monitor types vtype
def make app app name test path name os chdir '%s/applications/%s' % os environ['WEB 2 PY PATH'] app name sys path append '%s/applications/%s' % os environ['WEB 2 PY PATH'] app name os mkdir 'private' os mkdir 'databases' os mkdir 'models' os mkdir 'controllers' os mkdir 'cron' os mkdir 'languages' os mkdir 'cache' os mkdir 'modules' os mkdir 'static' os mkdir 'views' models path os path join os getcwd 'models' src os listdir test path name for files in src file path os path join test path name files if os path isfile file path shutil copy file path models path
def path to string path return ' ' join path
def excview tween factory handler registry def excview tween request attrs request dict try response handler request except Exception as exc attrs['exc info'] sys exc info attrs['exception'] excif 'response' in attrs del attrs['response']request iface attrs get 'request iface' I Request provides provided By exc try response call view registry request exc provides '' view classifier I Exception View Classifier request iface request iface combined except Predicate Mismatch response Noneif response is None reraise *attrs['exc info'] return responsereturn excview tween
def excview tween factory handler registry def excview tween request attrs request dict try response handler request except Exception as exc attrs['exc info'] sys exc info attrs['exception'] excif 'response' in attrs del attrs['response']request iface attrs get 'request iface' I Request provides provided By exc try response call view registry request exc provides '' view classifier I Exception View Classifier request iface request iface combined except Predicate Mismatch response Noneif response is None reraise *attrs['exc info'] return responsereturn excview tween
def excview tween factory handler registry def excview tween request attrs request dict try response handler request except Exception as exc attrs['exc info'] sys exc info attrs['exception'] excif 'response' in attrs del attrs['response']request iface attrs get 'request iface' I Request provides provided By exc try response call view registry request exc provides '' view classifier I Exception View Classifier request iface request iface combined except Predicate Mismatch response Noneif response is None reraise *attrs['exc info'] return responsereturn excview tween
def excview tween factory handler registry def excview tween request attrs request dict try response handler request except Exception as exc attrs['exc info'] sys exc info attrs['exception'] excif 'response' in attrs del attrs['response']request iface attrs get 'request iface' I Request provides provided By exc try response call view registry request exc provides '' view classifier I Exception View Classifier request iface request iface combined except Predicate Mismatch response Noneif response is None reraise *attrs['exc info'] return responsereturn excview tween
def argrelmax data axis 0 order 1 mode 'clip' return argrelextrema data np greater axis order mode
def set block scalar indent Token Class def callback lexer match context text match group context block scalar indent Noneif not text returnincrement match group 1 if increment current indent max context indent 0 increment int increment context block scalar indent current indent + increment if text yield match start Token Class text context pos match end return callback
def upload folder cf folder container ttl None headers None total bytes 0for root dirs files in os walk folder for fname in files full path os path join root fname obj name os path relpath full path folder obj size os path getsize full path cf upload file container full path obj name obj name return none True ttl ttl headers headers total bytes + obj sizereturn total bytes
def files contains file 1 file 2 attributes None local file open file 1 'U' readlines history data open file 2 'U' read lines diff int attributes get 'lines diff' 0 line diff count 0while local file contains local file pop 0 rstrip '\n\r' if contains not in history data line diff count + 1if line diff count > lines diff raise Assertion Error " Failedtofind'%s'inhistorydata lines diff %i \n" % contains lines diff
def files contains file 1 file 2 attributes None local file open file 1 'U' readlines history data open file 2 'U' read lines diff int attributes get 'lines diff' 0 line diff count 0while local file contains local file pop 0 rstrip '\n\r' if contains not in history data line diff count + 1if line diff count > lines diff raise Assertion Error " Failedtofind'%s'inhistorydata lines diff %i \n" % contains lines diff
def files contains file 1 file 2 attributes None local file open file 1 'U' readlines history data open file 2 'U' read lines diff int attributes get 'lines diff' 0 line diff count 0while local file contains local file pop 0 rstrip '\n\r' if contains not in history data line diff count + 1if line diff count > lines diff raise Assertion Error " Failedtofind'%s'inhistorydata lines diff %i \n" % contains lines diff
def new post mails reply users and watches post url add utm reply get absolute url 'kbforums-post' c {'post' reply content 'post html' reply content parsed 'author' reply creator 'host' Site objects get current domain 'thread' reply thread title 'forum' reply thread document title 'post url' post url}return emails with users and watches subject lazy u' Re {forum}-{thread}' text template 'kbforums/email/new post ltxt' html template 'kbforums/email/new post html' context vars c users and watches users and watches
def setup module try ret call ['sphinx-build' '--help'] stdout PIPE stderr PIPE except OS Error pytest skip ' Needsphinx-buildonpathforthesetests' if ret 0 raise Runtime Error 'sphinx-builddoesnotreturn 0 '
def get options return {'host' opts get 'couchbase host' 'salt' 'port' opts get 'couchbase port' 8091 'bucket' opts get 'couchbase bucket' 'salt' 'password' opts get 'couchbase password' '' }
def get user path follow symlinks True return uid to user get uid path follow symlinks
def get user path follow symlinks True return uid to user get uid path follow symlinks
def test Agent path agent port DEFAULT PORT agent adapt Agent Object Benchmarking Agent agent experiment RLC Experiment path str port experiment start client Agent Client Agent agent client Agent connect DEFAULT HOST port CLIENT TIMEOUT logging info ' Agentconnected' client Agent run Agent Event Loop client Agent close logging info ' Agentfinished' experiment stop return agent agent benchmark
def test Agent path agent port DEFAULT PORT agent adapt Agent Object Benchmarking Agent agent experiment RLC Experiment path str port experiment start client Agent Client Agent agent client Agent connect DEFAULT HOST port CLIENT TIMEOUT logging info ' Agentconnected' client Agent run Agent Event Loop client Agent close logging info ' Agentfinished' experiment stop return agent agent benchmark
def track closed cls class Tracking Closed cls def init self *a **kw super Tracking Closed self init *a **kw self closed Falsedef close self super Tracking Closed self close self closed Truereturn Tracking Closed
@np deprecate new name 'expm' def expm 3 A q 20 A asarray square A n A shape[ 0 ]t A dtype charif t not in ['f' 'F' 'd' 'D'] A A astype 'd' t 'd'e A np identity n dtype t trm np identity n dtype t castfunc cast[t]for k in range 1 q trm[ ] trm dot A / castfunc k eA + trmreturn eA
def node state id states int {0 'RUNNING' 1 'REBOOTING' 2 'TERMINATED' 3 'PENDING' 4 'UNKNOWN' 5 'STOPPED' 6 'SUSPENDED' 7 'ERROR' 8 'PAUSED'}states str {'running' 'RUNNING' 'rebooting' 'REBOOTING' 'starting' 'STARTING' 'terminated' 'TERMINATED' 'pending' 'PENDING' 'unknown' 'UNKNOWN' 'stopping' 'STOPPING' 'stopped' 'STOPPED' 'suspended' 'SUSPENDED' 'error' 'ERROR' 'paused' 'PAUSED' 'reconfiguring' 'RECONFIGURING'}return states str[id ] if isinstance id string types else states int[id ]
def portal maintenance now time time reason ' Idletimeoutexceeded disconnecting 'for session in [sess for sess in PORTAL SESSIONS values if now - sess cmd last > IDLE TIMEOUT ] session disconnect reason reason PORTAL SESSIONS disconnect session
def set bundle properties bundle root namespace bundle name root get 'name'
@verbosedef fit sphere to headshape info dig kinds 'auto' units 'm' verbose None if not isinstance units string types or units not in 'm' 'mm' raise Value Error 'unitsmustbea"m"or"mm"' radius origin head origin device fit sphere to headshape info dig kinds if units 'mm' radius * 1000 0origin head * 1000 0origin device * 1000 0return radius origin head origin device
@verbosedef fit sphere to headshape info dig kinds 'auto' units 'm' verbose None if not isinstance units string types or units not in 'm' 'mm' raise Value Error 'unitsmustbea"m"or"mm"' radius origin head origin device fit sphere to headshape info dig kinds if units 'mm' radius * 1000 0origin head * 1000 0origin device * 1000 0return radius origin head origin device
@core helperdef get request param parameter name default None return request params get parameter name default
@core helperdef get request param parameter name default None return request params get parameter name default
def sanitize timeout timeout if timeout > 30 * 24 * 60 * 60 timeout + time time return timeout
def sanitize timeout timeout if timeout > 30 * 24 * 60 * 60 timeout + time time return timeout
def get n jobs n jobs if n jobs < 0 return max cpu count + 1 + n jobs 1 elif n jobs 0 raise Value Error ' Parametern jobs 0hasnomeaning ' else return n jobs
def elu x return theano tensor switch x > 0 x theano tensor exp x - 1
def arity rel if len rel 0 return 0return len list rel [0 ]
def simulate head app path **kwargs return simulate request app 'HEAD' path **kwargs
@contextmanagerdef isolate lru cache lru cache object lru cache object cache clear try yield finally lru cache object cache clear
def compute cluster state node state additional node states nonmanifest datasets return Deployment State nodes {node state} additional node states nonmanifest datasets {dataset dataset id dataset for dataset in nonmanifest datasets}
def get repository in tool shed app id return get repository query app get app security decode id id
def generate secret key return get random string
def get credential storage filename client id user agent scope warn on readonly True filename os path realpath os path expanduser filename multistores lock acquire try multistore multistores setdefault filename Multi Store filename warn on readonly finally multistores lock release if type scope is list scope '' join scope return multistore get storage client id user agent scope
def team absent name profile 'github' **kwargs ret {'name' name 'changes' {} 'result' None 'comment' ''}target salt ['github get team'] name profile profile **kwargs if not target ret['comment'] ' Team{ 0 }doesnotexist' format name ret['result'] Truereturn retelse if opts ['test'] ret['comment'] ' Team{ 0 }willbedeleted' format name ret['result'] Nonereturn retresult salt ['github remove team'] name profile profile **kwargs if result ret['comment'] ' Deletedteam{ 0 }' format name ret['changes'] setdefault 'old' ' Team{ 0 }exists' format name ret['changes'] setdefault 'new' ' Team{ 0 }deleted' format name ret['result'] Trueelse ret['comment'] ' Failedtodelete{ 0 }' format name ret['result'] Falsereturn ret
def merge pr num pr gh api get pull request gh project num repo pr['head']['repo']['clone url']branch pr['head']['ref']mergeable merge branch repo repo branch branch if not mergeable cmd 'gitpull' + repo + '' + branch not merged[str num ] cmdprint ' 'print ' Somethingwentwrongmergingthisbranch youcantryitmanuallybyrunngin 'print cmdprint ' '
def merge pr num pr gh api get pull request gh project num repo pr['head']['repo']['clone url']branch pr['head']['ref']mergeable merge branch repo repo branch branch if not mergeable cmd 'gitpull' + repo + '' + branch not merged[str num ] cmdprint ' 'print ' Somethingwentwrongmergingthisbranch youcantryitmanuallybyrunngin 'print cmdprint ' '
def find option with arg argv short opts None long opts None for i arg in enumerate argv if arg startswith u'-' if long opts and arg startswith u'--' name sep val arg partition u' ' if name in long opts return val if sep else argv[ i + 1 ] if short opts and arg in short opts return argv[ i + 1 ]raise Key Error u' ' join short opts or [] + long opts or []
def poll until predicate steps sleep None if sleep is None sleep time sleepfor step in steps result predicate if result return resultsleep step result predicate if result return resultraise Loop Exceeded predicate result
def ansible group init ansible inv group name ansible inv[group name] {}ansible inv[group name]['hosts'] []ansible inv[group name]['vars'] {}
@declareddef perf obj ref metric name obj get object obj ref p Perf Datas obj perf data if metric name in p logger debug '[trigger] Ifoundtheperfdata' return p[metric name] valuelogger debug '[trigger] Iaminperfcommand' return None
def show snapshot kwargs None call None if call 'function' raise Salt Cloud System Exit ' Theshow snapshotfunctionmustbecalledwith-for--function ' if not kwargs or 'name' not in kwargs log error ' Mustspecifyname ' return Falseconn get conn return expand item conn ex get snapshot kwargs['name']
def x server test f cond msg if isinstance f type types Class Type if not cond f unittest skip Truef unittest skip why msgreturn felse @unittest skip If not cond msg def wrapped fn *args **kwargs return f *args **kwargs return wrapped fn
def greedy partition counts n buckets [[] for i in range n ]fill levels [0 for i in range n ]for key in sorted counts reverse True key lambda c counts[c] smallest fill levels index min fill levels buckets[smallest] append key fill levels[smallest] + counts[key]return buckets fill levels
def greedy partition counts n buckets [[] for i in range n ]fill levels [0 for i in range n ]for key in sorted counts reverse True key lambda c counts[c] smallest fill levels index min fill levels buckets[smallest] append key fill levels[smallest] + counts[key]return buckets fill levels
def find subdirectories package try subdirectories next os walk package to path package [1 ]except Stop Iteration subdirectories []return subdirectories
def thrift 2 json tft if isinstance tft type None return Noneif isinstance tft float int long complex basestring return tftif isinstance tft dict d {}for key val in tft iteritems d[key] thrift 2 json val return dif isinstance tft list return [thrift 2 json x for x in tft]if isinstance tft set return dict x True for x in tft json {}d {}if hasattr tft ' dict ' d tft dict elif hasattr tft ' slots ' d tft slots else return {}for k in d v getattr tft k json[k] thrift 2 json v return json
def thrift 2 json tft if isinstance tft type None return Noneif isinstance tft float int long complex basestring return tftif isinstance tft dict d {}for key val in tft iteritems d[key] thrift 2 json val return dif isinstance tft list return [thrift 2 json x for x in tft]if isinstance tft set return dict x True for x in tft json {}d {}if hasattr tft ' dict ' d tft dict elif hasattr tft ' slots ' d tft slots else return {}for k in d v getattr tft k json[k] thrift 2 json v return json
def datetime from timestamp timestamp dt DATETIME EPOC + datetime timedelta seconds timestamp return dt
def init tab completion log completion debug ' Initializingtabcompletion ' with debug log time log completion 'tabcompletioninit' model miscmodels Tab Completion Model instances[usertypes Completion tab] model
def s3 include debug css request current requestfolder request folderappname request applicationsettings current deployment settingstheme settings get theme location current response s3 theme locationcss cfg '%s/modules/templates/%s%s/css cfg' % folder location theme try f open css cfg 'r' except raise HTTP 500 ' Themeconfigurationfilemissing modules/templates/%s%s/css cfg' % location theme files f readlines files files[ -1 ]include ''for file in files if file[ 0 ] '#' include '%s\n<linkhref "/%s/static/styles/%s"rel "stylesheet"type "text/css"/>' % include appname file[ -1 ] f close return XML include
def task track request info task info event type event page None full event dict event **task info with eventtracker get tracker context 'edx course task' contexts course context from url page event {'username' request info get 'username' 'unknown' 'ip' request info get 'ip' 'unknown' 'event source' 'task' 'event type' event type 'event' full event 'agent' request info get 'agent' 'unknown' 'page' page 'time' datetime datetime utcnow 'host' request info get 'host' 'unknown' 'context' eventtracker get tracker resolve context }log event event
def task track request info task info event type event page None full event dict event **task info with eventtracker get tracker context 'edx course task' contexts course context from url page event {'username' request info get 'username' 'unknown' 'ip' request info get 'ip' 'unknown' 'event source' 'task' 'event type' event type 'event' full event 'agent' request info get 'agent' 'unknown' 'page' page 'time' datetime datetime utcnow 'host' request info get 'host' 'unknown' 'context' eventtracker get tracker resolve context }log event event
def tridi inverse iteration d e w x0 None rtol 1e- 08 eig diag d - w if x0 is None x0 np random randn len d x prev np zeros like x0 norm x np linalg norm x0 x0 / norm xwhile np linalg norm np abs x0 - np abs x prev > rtol x prev x0 copy tridisolve eig diag e x0 norm x np linalg norm x0 x0 / norm xreturn x0
def links dev return info dev get 'S' None
def set serv parms service args import winreguargs []for arg in args uargs append unicoder arg try key winreg Create Key winreg HKEY LOCAL MACHINE SERVICE KEY + service winreg Set Value Ex key SERVICE PARM None winreg REG MULTI SZ uargs winreg Close Key key except Windows Error return Falsereturn True
def write trees file format **kwargs if isinstance trees Base Tree Tree Base Tree Clade trees [trees]with File as handle file 'w+' as fp n getattr supported formats[format] 'write' trees fp **kwargs return n
@taskdef server ctx host None port 5000 debug True gitlogs False if os environ get 'WERKZEUG RUN MAIN' 'true' or not debug if os environ get 'WEB REMOTE DEBUG' None import pydevdremote parts os environ get 'WEB REMOTE DEBUG' split ' ' pydevd settrace remote parts[ 0 ] port int remote parts[ 1 ] suspend False stdout To Server True stderr To Server True if gitlogs git logs ctx from website app import init appos environ['DJANGO SETTINGS MODULE'] 'api base settings'app init app set backends True routes True settings API SERVER PORT portelse from framework flask import appcontext Noneif settings SECURE MODE context settings OSF SERVER CERT settings OSF SERVER KEY app run host host port port debug debug threaded debug extra files [settings ASSET HASH PATH] ssl context context
def state description vm state shutdown terminate name STATE DESCRIPTION MAP get vm state vm state return {'code' inst state name to code name 'name' name}
def libvlc media player get state p mi f Cfunctions get 'libvlc media player get state' None or Cfunction 'libvlc media player get state' 1 None State Media Player return f p mi
def setup platform hass config add devices discovery info None import eiscpfrom eiscp import eISC Phost config get CONF HOST hosts []if CONF HOST in config and host not in KNOWN HOSTS try hosts append Onkyo Device eiscp eISCP host config get CONF SOURCES name config get CONF NAME KNOWN HOSTS append host except OS Error LOGGER error ' Unabletoconnecttoreceiverat%s ' host else for receiver in eISCP discover if receiver host not in KNOWN HOSTS hosts append Onkyo Device receiver config get CONF SOURCES KNOWN HOSTS append receiver host add devices hosts
def set file name source template None context None defaults None **kwargs ret {'name' name 'changes' {} 'result' True 'comment' ''}if context is None context {}elif not isinstance context dict ret['result'] Falseret['comment'] ' Contextmustbeformedasadict'return retif defaults is None defaults {}elif not isinstance defaults dict ret['result'] Falseret['comment'] ' Defaultsmustbeformedasadict'return retif opts ['test'] ret['result'] Noneret['comment'] ' Debconfselectionswouldhavebeenset 'return retif template result salt ['debconf set template'] source template context defaults **kwargs else result salt ['debconf set file'] source **kwargs if result ret['comment'] ' Debconfselectionswereset 'else ret['result'] Falseret['comment'] ' Unabletosetdebconfselectionsfromfile 'return ret
def init signals import signalimport threadimport sysprev handler signal getsignal signal SIGINT def thread interrupt handler signum frame thread do terminate threads if callable prev handler prev handler signum frame raise Keyboard Interrupt try signal signal signal SIGINT thread interrupt handler except Value Error print >>sys stderr ' Failedtosetupthread-interrupthandler Thisisusuallynotcritical'
def init signals import signalimport threadimport sysprev handler signal getsignal signal SIGINT def thread interrupt handler signum frame thread do terminate threads if callable prev handler prev handler signum frame raise Keyboard Interrupt try signal signal signal SIGINT thread interrupt handler except Value Error print >>sys stderr ' Failedtosetupthread-interrupthandler Thisisusuallynotcritical'
def add wildcards arg if not arg startswith u'*' arg u'*' + arg if not arg endswith u'*' arg arg + u'*' return arg
def add wildcards arg if not arg startswith u'*' arg u'*' + arg if not arg endswith u'*' arg arg + u'*' return arg
def add wildcards arg if not arg startswith u'*' arg u'*' + arg if not arg endswith u'*' arg arg + u'*' return arg
def get service service profile if isinstance profile dict and 'service' in profile return profile['service']return service
def H Box *args **kwargs return Row *args **kwargs
@require POS Tdef send recovery email request form User Recovery Email Form data request POST if form is valid form save request request return redirect 'users recovery email sent' else return Http Response Bad Request ' Invalidrequest '
@command 'url file\\s \\S+ ' def yt url file file name try with open file name 'r' as fo output '' join [line strip for line in fo if line strip ] except IO Error g message c r + ' Errorwhileopeningthefile checkthevalidityofthepath' + c w g content g content or content generate songlist display zeromsg g message returnyt url output
@command 'url file\\s \\S+ ' def yt url file file name try with open file name 'r' as fo output '' join [line strip for line in fo if line strip ] except IO Error g message c r + ' Errorwhileopeningthefile checkthevalidityofthepath' + c w g content g content or content generate songlist display zeromsg g message returnyt url output
@copydoc Str Cat def cat lhs rhs sep None if not isstring rhs dshape raise Type Error 'canonlyconcatstringcolumns' validate optional sep 'sep' basestring 'string' return Str Cat lhs rhs sep sep
def Default Controller name controllers Default Controllers **kwargs controller find Controller controllers if not controller raise Exception ' Couldnotfindadefault Open Flowcontroller' return controller name **kwargs
def Default Controller name controllers Default Controllers **kwargs controller find Controller controllers if not controller raise Exception ' Couldnotfindadefault Open Flowcontroller' return controller name **kwargs
@cleanupdef test Event Collection get color coll props generate Event Collection plot np testing assert array equal props[u'color'] coll get color check allprop array coll get colors props[u'color']
@cleanupdef test Event Collection get color coll props generate Event Collection plot np testing assert array equal props[u'color'] coll get color check allprop array coll get colors props[u'color']
@memoizedef selection model return Selection Model
def autoload global APPLICATIONS LOADE Dif APPLICATIONS LOADED return Falsefrom django assets conf import settingsfor app in settings INSTALLED APPS try app path import module app path except Attribute Error continuetry imp find module 'assets' app path except Import Error continueimport module '%s assets' % app APPLICATIONS LOADED True
def normalize Unicode value return unicodedata normalize 'NFKD' value encode 'ascii' 'ignore' if isinstance value unicode else value
def build image data cmap 'gray' import matplotlib pyplot as pltfrom matplotlib figure import Figurefrom matplotlib backends backend agg import Figure Canvas Agg as Figure Canvasfigsize data shape[ -1 ]if figsize[ 0 ] 1 figsize tuple figsize[ 1 ] data data[ 0]fig Figure figsize figsize dpi 1 0 frameon False Figure Canvas fig cmap getattr plt cm cmap plt cm gray fig figimage data cmap cmap output Bytes IO fig savefig output dpi 1 0 format 'png' return base 64 b64 encode output getvalue decode 'ascii'
def build image data cmap 'gray' import matplotlib pyplot as pltfrom matplotlib figure import Figurefrom matplotlib backends backend agg import Figure Canvas Agg as Figure Canvasfigsize data shape[ -1 ]if figsize[ 0 ] 1 figsize tuple figsize[ 1 ] data data[ 0]fig Figure figsize figsize dpi 1 0 frameon False Figure Canvas fig cmap getattr plt cm cmap plt cm gray fig figimage data cmap cmap output Bytes IO fig savefig output dpi 1 0 format 'png' return base 64 b64 encode output getvalue decode 'ascii'
def compare Area Ascending loop Area other Loop Area if loop Area area < other Loop Area area return -1 return int loop Area area > other Loop Area area
def compare Area Ascending loop Area other Loop Area if loop Area area < other Loop Area area return -1 return int loop Area area > other Loop Area area
def get default entrance exam minimum pct entrance exam minimum score pct float settings ENTRANCE EXAM MIN SCORE PCT if entrance exam minimum score pct is integer entrance exam minimum score pct entrance exam minimum score pct / 100 return entrance exam minimum score pct
def get default entrance exam minimum pct entrance exam minimum score pct float settings ENTRANCE EXAM MIN SCORE PCT if entrance exam minimum score pct is integer entrance exam minimum score pct entrance exam minimum score pct / 100 return entrance exam minimum score pct
@cache permissiondef can accept suggestion user translation return can edit user translation 'trans accept suggestion'
def product iter a iter b for a in iter a for b in iter b yield a b
def product iter a iter b for a in iter a for b in iter b yield a b
def product iter a iter b for a in iter a for b in iter b yield a b
def create executable dist Distribution name 'spyder'ver spyder version try imp find module ' Py Qt 4 ' python qt 'pyqt'except Import Error python qt 'pyside'dist setup name ' Spyder' version ver script 'spyder/spyder py' description ' Scientific P Ython Development Envi Ronment' target name '%s exe' % name icon '%s ico' % name target dir '%s-win 32 -%s-sa-%s' % name python qt ver spyder add to distribution dist dist add modules 'matplotlib' 'h 5 py' 'scipy io' 'guidata' 'pygments' try import guiqwtdist add modules 'guiqwt' except Import Error passdist includes + ['spyder scientific startup' 'spyder widgets externalshell sitecustomize']dist excludes + ['sphinx' 'zmq' 'I Python']if osp isfile ' Spyderdoc chm' dist add data file ' Spyderdoc chm' dist add data file osp join 'rope' 'base' 'default config py' dist build 'cx Freeze'
@pytest mark django dbdef test data store tp 0 store Store DB Factory name 'foo po' parent tp 0 directory translation project tp 0 assert repr store data '< Store Data %s>' % store pootle path
@pytest mark django dbdef test data store tp 0 store Store DB Factory name 'foo po' parent tp 0 directory translation project tp 0 assert repr store data '< Store Data %s>' % store pootle path
def update resource zone resource type resource selector **kwargs return resource 'update' zone resource type resource selector **kwargs
def rm stored dir dir path storage default storage empty dirs []for root dirs files in walk storage dir path for fn in files storage delete '%s/%s' % root fn empty dirs insert 0 root empty dirs append dir path for dn in empty dirs storage delete dn
def rm stored dir dir path storage default storage empty dirs []for root dirs files in walk storage dir path for fn in files storage delete '%s/%s' % root fn empty dirs insert 0 root empty dirs append dir path for dn in empty dirs storage delete dn
def get page self suffix try return int self REQUEST[ 'page%s' % suffix ] except Key Error Value Error Type Error return 1
def get page self suffix try return int self REQUEST[ 'page%s' % suffix ] except Key Error Value Error Type Error return 1
def error summary error dict def prettify field name field name re sub ' ?< \\w [ Uu]rl ? \\w ' 'URL' field name replace ' ' '' capitalize return field name replace ' ' '' summary {}for key error in error dict iteritems if key 'resources' summary[ ' Resources' ] ' Packageresource s invalid' elif key 'extras' summary[ ' Extras' ] ' Missing Value' elif key 'extras validation' summary[ ' Extras' ] error[ 0 ]else summary[ prettify key ] error[ 0 ]return summary
def error summary error dict def prettify field name field name re sub ' ?< \\w [ Uu]rl ? \\w ' 'URL' field name replace ' ' '' capitalize return field name replace ' ' '' summary {}for key error in error dict iteritems if key 'resources' summary[ ' Resources' ] ' Packageresource s invalid' elif key 'extras' summary[ ' Extras' ] ' Missing Value' elif key 'extras validation' summary[ ' Extras' ] error[ 0 ]else summary[ prettify key ] error[ 0 ]return summary
def customize compiler config vars find appropriate compiler config vars remove unsupported archs config vars override all archs config vars return config vars
def makedirs path try os makedirs path except OS Error logging error "OS Errorwhilecreatingdir'{ 0 }'" format path return Falsereturn True
def xframe options exempt view func def wrapped view *args **kwargs resp view func *args **kwargs resp xframe options exempt Truereturn respreturn wraps view func wrapped view
def xframe options exempt view func def wrapped view *args **kwargs resp view func *args **kwargs resp xframe options exempt Truereturn respreturn wraps view func wrapped view
def xframe options exempt view func def wrapped view *args **kwargs resp view func *args **kwargs resp xframe options exempt Truereturn respreturn wraps view func wrapped view
def xframe options exempt view func def wrapped view *args **kwargs resp view func *args **kwargs resp xframe options exempt Truereturn respreturn wraps view func wrapped view
def xframe options exempt view func def wrapped view *args **kwargs resp view func *args **kwargs resp xframe options exempt Truereturn respreturn wraps view func wrapped view
def xframe options exempt view func def wrapped view *args **kwargs resp view func *args **kwargs resp xframe options exempt Truereturn respreturn wraps view func wrapped view
@register filterdef thumbnailer obj relative name None return get thumbnailer obj relative name relative name
def test iterator x csr matrix [[ 1 2 0] [0 0 3] [4 0 5]] ds Sparse Dataset from scipy sparse dataset x it ds iterator mode 'sequential' batch size 1 it next
def apply special queries query specials for i in specials query FILTERS LIST[i] specials[i] query return query
def patch environ case key value old environ os environ copy def cleanup os environ clear os environ update old environ os environ[key] valuecase add Cleanup cleanup
def get course info section request user course section key info module get course info section module request user course section key html ''if info module is not None try html info module render STUDENT VIEW contentexcept Exception html render to string 'courseware/error-message html' None log exception u' Errorrenderingcourse id %s section key %s' unicode course id section key return html
def get course info section request user course section key info module get course info section module request user course section key html ''if info module is not None try html info module render STUDENT VIEW contentexcept Exception html render to string 'courseware/error-message html' None log exception u' Errorrenderingcourse id %s section key %s' unicode course id section key return html
def get unknown opttrans attr path path attrs path pathattr mapunknown opt tran attrs {}for attr in path attrs items if isinstance attr BGP Path Attribute Unknown and attr flags & BGP ATTR FLAG OPTIONAL BGP ATTR FLAG TRANSITIVE or isinstance attr BGP Path Attribute As 4 Path or isinstance attr BGP Path Attribute As 4 Aggregator unknown opt tran attrs[attr type] attrreturn unknown opt tran attrs
def test correct pip version script result script pip '--version' dir re match 'pip\\d \\ [\\d] + \\ ? rc dev pre post \\d+ ?from * \\ python\\d [\\d] +\\ $' result stdout group 4 pip folder join SRC DIR 'pip' pip folder outputed join dir 'pip' diffs filecmp dircmp pip folder pip folder outputed mismatch py [x for x in diffs left only + diffs right only + diffs diff files if x endswith ' py' ]assert not mismatch py 'mismatchedsourcefilesin%rand%r %r' % pip folder pip folder outputed mismatch py
def test correct pip version script result script pip '--version' dir re match 'pip\\d \\ [\\d] + \\ ? rc dev pre post \\d+ ?from * \\ python\\d [\\d] +\\ $' result stdout group 4 pip folder join SRC DIR 'pip' pip folder outputed join dir 'pip' diffs filecmp dircmp pip folder pip folder outputed mismatch py [x for x in diffs left only + diffs right only + diffs diff files if x endswith ' py' ]assert not mismatch py 'mismatchedsourcefilesin%rand%r %r' % pip folder pip folder outputed mismatch py
def set selinux context path user None role None type None range None if not any user role type range return Falsecmd ['chcon']if user cmd extend ['-u' user] if role cmd extend ['-r' role] if type cmd extend ['-t' type] if range cmd extend ['-l' range] cmd append path ret not salt ['cmd retcode'] cmd python shell False if ret return get selinux context path else return ret
def get headers data extra headers None response headers {' Content- Length' str len data }if extra headers response headers update extra headers return list response headers items
def get headers data extra headers None response headers {' Content- Length' str len data }if extra headers response headers update extra headers return list response headers items
def get elem at rank rank data n negative n zeros if rank < n negative return data[rank]if rank - n negative < n zeros return 0return data[ rank - n zeros ]
def get Read Craft Sequence return skeinforge profile get Craft Type Plugin Module get Craft Sequence
def set Video Mode video Mode if have Bits DLL return bits bits Set Video Mode video Mode else return 1
def domain config finder conf dir LOG info LI ' Scanning%rfordomainconfigfiles' conf dir for r d f in os walk conf dir for fname in f if fname startswith DOMAIN CONF FHEAD and fname endswith DOMAIN CONF FTAIL if fname count ' ' > 2 domain name fname[len DOMAIN CONF FHEAD - len DOMAIN CONF FTAIL ] yield os path join r fname domain name continue LOG warning LW ' Ignoringfile %s whilescanningdomainconfigdirectory' fname
def color style if not supports color style no style else SPIDER COLORS os environ get 'SPIDER COLORS' '' color settings termcolors parse color setting SPIDER COLORS if color settings class dummy passstyle dummy for role in termcolors PALETTES[termcolors NOCOLOR PALETTE] format color settings get role {} setattr style role termcolors make style **format style ERROR OUTPUT style ERRO Relse style no style return style
def mapk actual predicted k 10 return np mean [apk a p k for a p in zip actual predicted ]
def check T 1 s T1 files cw 256 False import sysimport nibabel as nibfrom nipype utils filemanip import filename to list T 1 files filename to list T1 files if len T1 files 0 print "ERROR No T 1 's Given"sys exit -1 shape nib load T1 files[ 0 ] shapefor t1 in T1 files[ 1 ] if nib load t1 shape shape print 'ERROR T1 snotthesamesize Cannotprocess{ 0 }and{ 1 }together' format T1 files[ 0 ] t1 sys exit -1 origvol names ['{ 0 03 d} mgz' format i + 1 for i in range len T1 files ]if not cw 256 and any dim > 256 for dim in shape print ' Setting MRI Converttocropimagesto 256 FOV'cw 256 Trueresample type 'cubic' if len T1 files > 1 else 'interpolate' return T1 files cw 256 resample type origvol names
def override setuptools req if req project name 'setuptools' if not len req specs return Truefor comparator version in req specs if comparator in [' ' '> ' '>'] if '0 7' in version return Falsereturn Truereturn False
def override setuptools req if req project name 'setuptools' if not len req specs return Truefor comparator version in req specs if comparator in [' ' '> ' '>'] if '0 7' in version return Falsereturn Truereturn False
def override setuptools req if req project name 'setuptools' if not len req specs return Truefor comparator version in req specs if comparator in [' ' '> ' '>'] if '0 7' in version return Falsereturn Truereturn False
def cr method method api 'cr'return method
def create datacenter dcname None service instance None folder None if len dcname > 79 raise Value Error ' Thenameofthedatacentermustbeunder 80 characters ' if folder is None folder service instance content root Folderif folder is not None and isinstance folder vim Folder dc moref folder Create Datacenter name dcname return dc moref
def recall score y true y pred labels None pos label 1 average 'binary' sample weight None r precision recall fscore support y true y pred labels labels pos label pos label average average warn for 'recall' sample weight sample weight return r
def role get name user None host None port None maintenance db None password None runas None return password False all users user list user user host host port port maintenance db maintenance db password password runas runas return password return password try return all users get name None except Attribute Error log error ' Couldnotretrieve Postgresrole Is Postgresrunning?' return None
def sparse v for f w in list v items if w 0 del v[f]return v
def sparse v for f w in list v items if w 0 del v[f]return v
def main run it tools Control setup ORIGINAL CAPTION state dict {c MAIN MENU main menu Menu c LOAD SCREEN load screen Load Screen c TIME OUT load screen Time Out c GAME OVER load screen Game Over c LEVEL 1 level 1 Level 1 }run it setup states state dict c MAIN MENU run it main
def make pass decorator object type ensure False def decorator f def new func *args **kwargs ctx get current context if ensure obj ctx ensure object object type else obj ctx find object object type if obj is None raise Runtime Error ' Managedtoinvokecallbackwithoutacontextobjectoftype%rexisting' % object type name return ctx invoke f obj *args[ 1 ] **kwargs return update wrapper new func f return decorator
def make pass decorator object type ensure False def decorator f def new func *args **kwargs ctx get current context if ensure obj ctx ensure object object type else obj ctx find object object type if obj is None raise Runtime Error ' Managedtoinvokecallbackwithoutacontextobjectoftype%rexisting' % object type name return ctx invoke f obj *args[ 1 ] **kwargs return update wrapper new func f return decorator
def my update subtask status entry id current task id new subtask status entry Instructor Task objects get pk entry id subtask dict json loads entry subtasks subtask status info subtask dict['status']current subtask status Subtask Status from dict subtask status info[current task id] current retry count current subtask status get retry count new retry count new subtask status get retry count if current retry count < new retry count update subtask status entry id current task id new subtask status
def my update subtask status entry id current task id new subtask status entry Instructor Task objects get pk entry id subtask dict json loads entry subtasks subtask status info subtask dict['status']current subtask status Subtask Status from dict subtask status info[current task id] current retry count current subtask status get retry count new retry count new subtask status get retry count if current retry count < new retry count update subtask status entry id current task id new subtask status
def get Local Android Path client args local Path os path join args local Output Folder '{ 0 }-{ 1 }' format client conn modules['pupydroid utils'] get Android ID client desc['user'] if not os path exists local Path logging info ' Creating{ 0 }folderlocally' format local Path os makedirs local Path return local Path
def get Local Android Path client args local Path os path join args local Output Folder '{ 0 }-{ 1 }' format client conn modules['pupydroid utils'] get Android ID client desc['user'] if not os path exists local Path logging info ' Creating{ 0 }folderlocally' format local Path os makedirs local Path return local Path
def sha 256 digest instr if six PY 3 b salt utils to bytes instr return hashlib sha 256 b hexdigest return hashlib sha 256 instr hexdigest
def is mutating status if not status return Falsemutating set [u'insert' u'update' u'delete'] return status split None 1 [0 ] lower in mutating
@depends HAS PYVMOMI def list non ssds host username password protocol None port None host names None service instance salt utils vmware get service instance host host username username password password protocol protocol port port host names check hosts service instance host host names ret {}names []for host name in host names host ref get host ref service instance host host name host name disks get host non ssds host ref for disk in disks names append disk canonical Name ret update {host name names} return ret
def get request api cpu usage if apiproxy return apiproxy Get Request Api Cpu Usage return 0
def create simple binding jboss config binding name value profile None log debug ' MODULEFUNCTION jboss 7 create simple binding binding name %s value %s profile %s' binding name value profile operation '/subsystem naming/binding "{binding name}" add binding-type simple value "{value}" ' format binding name binding name value escape binding value value if profile is not None operation '/profile "{profile}"' format profile profile + operation return salt ['jboss 7 cli run operation'] jboss config operation
def create simple binding jboss config binding name value profile None log debug ' MODULEFUNCTION jboss 7 create simple binding binding name %s value %s profile %s' binding name value profile operation '/subsystem naming/binding "{binding name}" add binding-type simple value "{value}" ' format binding name binding name value escape binding value value if profile is not None operation '/profile "{profile}"' format profile profile + operation return salt ['jboss 7 cli run operation'] jboss config operation
def create simple binding jboss config binding name value profile None log debug ' MODULEFUNCTION jboss 7 create simple binding binding name %s value %s profile %s' binding name value profile operation '/subsystem naming/binding "{binding name}" add binding-type simple value "{value}" ' format binding name binding name value escape binding value value if profile is not None operation '/profile "{profile}"' format profile profile + operation return salt ['jboss 7 cli run operation'] jboss config operation
def copy constr constr func expr func constr expr return type constr expr constr constr id constr size
def image volume cache create context host cluster name image id image updated at volume id size return IMPL image volume cache create context host cluster name image id image updated at volume id size
def apply android specific fixes font font data delete from cmap font [8419 8593 8595 ] for table in ['LTSH' 'hdmx' 'VDMX' 'gasp'] if table in font del font[table]glyph set font get Glyph Set ellipsis glyph set['ellipsis'] glyphfor component in ellipsis components component flags & ~ 1 << 2
def presence table s3 db pr presencetable pe id readable Truetable pe id label ' Name'table pe id represent s3 db pr person id representtable observer readable Falsetable presence condition readable Falsereturn s3 rest controller
def presence table s3 db pr presencetable pe id readable Truetable pe id label ' Name'table pe id represent s3 db pr person id representtable observer readable Falsetable presence condition readable Falsereturn s3 rest controller
def add lowess ax lines idx 0 frac 0 2 **lowess kwargs y0 ax get lines [lines idx] yx 0 ax get lines [lines idx] xlres lowess y0 x0 frac frac **lowess kwargs ax plot lres[ 0] lres[ 1] 'r' lw 1 5 return ax figure
def get connection string raw ips file io read RABBITMQ LOCATION FILE ips raw ips split '\n' rabbitmq ip ips[ 0 ]return 'amqp //guest guest@' + rabbitmq ip + ' ' + str RABBITMQ PORT + '//'
def test export tpot obj TPOT Classifier try tpot obj export 'test export py' assert Falseexcept Value Error pass
def localpath *args plist [ROOT] + list args return os path abspath pjoin *plist
def valid max age number if isinstance number basestring try number long number except Value Error Type Error return Falseif number > 0 and number % 1 0 return Truereturn False
def get icon icon name if icon name pixmap get pixmap icon name if pixmap is None return Q Icon I icon name else return Q Icon pixmap return Q Icon
def extract dicts def extract value data if 'k' in data and 'v' in data return data['k'] data['v'] return k extract v for k v in data items if hasattr dicts 'items' return dict extract value dicts extracted {}for d in dicts extracted update extract d return extracted
def greenthread yield dbapi con con record greenthread sleep 0
def greenthread yield dbapi con con record greenthread sleep 0
def len guards M if int M M or M < 0 raise Value Error ' Windowlength Mmustbeanon-negativeinteger' return M < 1
@contextmanagerdef dummy yield
@with sessiondef log once message logger logging get Logger u'log once' once level logging INFO suppressed level f logger VERBOSE session None from flexget manager import managerif not manager log warning u'D Bnotinitialized log oncewillnotworkproperly ' logger log once level message returndigest hashlib md 5 digest update message encode u'latin 1 ' u'replace' md 5 sum digest hexdigest if session query Log Message filter by md 5 sum md 5 sum first logger log suppressed level message return Falserow Log Message md 5 sum session add row logger log once level message return True
def tolerate Errors wrapped def info Callback connection where ret try return wrapped connection where ret except f Failure log err f ' Errorduringinfo callback' connection get app data fail Verification f return info Callback
def get language from request request check path False if check path lang code get language from path request path info if lang code is not None return lang codesupported lang codes get languages if hasattr request 'session' lang code request session get LANGUAGE SESSION KEY if lang code in supported lang codes and lang code is not None and check for language lang code return lang codelang code request COOKIES get settings LANGUAGE COOKIE NAME try return get supported language variant lang code except Lookup Error passaccept request META get 'HTTP ACCEPT LANGUAGE' '' for accept lang unused in parse accept lang header accept if accept lang '*' breakif not language code re search accept lang continuetry return get supported language variant accept lang except Lookup Error continuetry return get supported language variant settings LANGUAGE CODE except Lookup Error return settings LANGUAGE CODE
def get language from request request check path False if check path lang code get language from path request path info if lang code is not None return lang codesupported lang codes get languages if hasattr request 'session' lang code request session get LANGUAGE SESSION KEY if lang code in supported lang codes and lang code is not None and check for language lang code return lang codelang code request COOKIES get settings LANGUAGE COOKIE NAME try return get supported language variant lang code except Lookup Error passaccept request META get 'HTTP ACCEPT LANGUAGE' '' for accept lang unused in parse accept lang header accept if accept lang '*' breakif not language code re search accept lang continuetry return get supported language variant accept lang except Lookup Error continuetry return get supported language variant settings LANGUAGE CODE except Lookup Error return settings LANGUAGE CODE
def approx jacobian x func epsilon *args x0 asfarray x f0 atleast 1d func * x0 + args jac zeros [len x0 len f0 ] dx zeros len x0 for i in range len x0 dx[i] epsilonjac[i] func * x0 + dx + args - f0 / epsilon dx[i] 0 0return jac transpose
def run parallel map providers query data queue None reinit crypto cloud Cloud data['opts'] try with context func globals inject cloud clouds[data['fun']] active provider name ' ' join [data['alias'] data['driver']] return data['alias'] data['driver'] salt utils simple types filter cloud clouds[data['fun']] except Exception as err log debug " Failedtoexecute'{ 0 } 'whilequeryingforrunningnodes {1 }" format data['fun'] err exc info on loglevel logging DEBUG return data['alias'] data['driver']
def Encode Rsp File List args if not args return ''if args[ 0 ] startswith 'call' call program args[ 0 ] split '' 1 program call + '' + os path normpath program else program os path normpath args[ 0 ] return program + '' + '' join Quote For Rsp File arg for arg in args[ 1 ]
def pwd Get By Name username if pwd is None return Nonereturn pwd getpwnam username
def pwd Get By Name username if pwd is None return Nonereturn pwd getpwnam username
def pwd Get By Name username if pwd is None return Nonereturn pwd getpwnam username
def settings closed events params params['fig options'] None
def ordered Set iterable res []for el in iterable if el not in res res append el return res
def ordered Set iterable res []for el in iterable if el not in res res append el return res
def csvheader parent nodelist header ''for subnode in nodelist if subnode node Type subnode ELEMENT NODE header header + ' ' + parent + ' ' + subnode tag Name return header[ 1 ] + '\n'
def spawn collector col LOG info '%s interval %d needstobespawned' col name col interval try col proc subprocess Popen col filename stdout subprocess PIPE stderr subprocess PIPE close fds True preexec fn os setsid except OS Error as e LOG error ' Failedtospawncollector%s %s' % col filename e returncol lastspawn int time time col last datapoint col lastspawnset nonblocking col proc stdout fileno set nonblocking col proc stderr fileno if col proc pid > 0 col dead False LOG info 'spawned%s pid %d ' col name col proc pid return LOG error 'failedtospawncollector %s' col filename
def spawn collector col LOG info '%s interval %d needstobespawned' col name col interval try col proc subprocess Popen col filename stdout subprocess PIPE stderr subprocess PIPE close fds True preexec fn os setsid except OS Error as e LOG error ' Failedtospawncollector%s %s' % col filename e returncol lastspawn int time time col last datapoint col lastspawnset nonblocking col proc stdout fileno set nonblocking col proc stderr fileno if col proc pid > 0 col dead False LOG info 'spawned%s pid %d ' col name col proc pid return LOG error 'failedtospawncollector %s' col filename
def supported uri schemes uri schemes supported schemes set registry Gst Registry get for factory in registry get feature list Gst Element Factory for uri in factory get uri protocols if uri in uri schemes supported schemes add uri return supported schemes
def supported uri schemes uri schemes supported schemes set registry Gst Registry get for factory in registry get feature list Gst Element Factory for uri in factory get uri protocols if uri in uri schemes supported schemes add uri return supported schemes
def create datasource orgname None profile 'grafana' **kwargs if isinstance profile string types profile salt ['config option'] profile if orgname switch org orgname profile response requests post '{ 0 }/api/datasources' format profile['grafana url'] json kwargs auth get auth profile headers get headers profile timeout profile get 'grafana timeout' 3 if response status code > 400 response raise for status return response json
def get thread and context request thread id retrieve kwargs None retrieve kwargs retrieve kwargs or {} try if 'with responses' not in retrieve kwargs retrieve kwargs['with responses'] Falseif 'mark as read' not in retrieve kwargs retrieve kwargs['mark as read'] Falsecc thread Thread id thread id retrieve **retrieve kwargs course key Course Key from string cc thread['course id'] course get course course key request user context get context course request cc thread if not context['is requester privileged'] and cc thread['group id'] and is commentable cohorted course id cc thread['commentable id'] requester cohort get cohort id request user course id if requester cohort is not None and cc thread['group id'] requester cohort raise Thread Not Found Error ' Threadnotfound ' return cc thread context except Comment Client Request Error raise Thread Not Found Error ' Threadnotfound '
def find shallow store heads depth parents {}def get parents sha result parents get sha None if not result result store[sha] parentsparents[sha] resultreturn resulttodo []for head sha in heads obj store peel sha head sha if isinstance obj Commit todo append obj id 1 not shallow set shallow set while todo sha cur depth todo pop if cur depth < depth not shallow add sha new depth cur depth + 1 todo extend p new depth for p in get parents sha else shallow add sha return shallow not shallow
def configure cache client test name client http client cache test name test namecache name client http client get cache file name if options get value 'clearcache' 'true' client http client delete session cache name client http client use cached session cache name
def adjust recursive directory permissions pre existing dir new directory list module directory args changed if len new directory list > 0 working dir os path join pre existing dir new directory list pop 0 directory args['path'] working dirchanged module set fs attributes if different directory args changed changed adjust recursive directory permissions working dir new directory list module directory args changed return changed
def set sff trimpoints sff dir technical lengths for lib id sff fp in get per lib sff fps sff dir try readlength technical lengths[lib id]except Key Error continuesff data parse binary sff open sff fp True clipped header clipped reads set clip qual left sff data readlength fd temp fp mkstemp dir sff dir close fd with open temp fp 'w' as f write binary sff f clipped header clipped reads move temp fp sff fp
def set sff trimpoints sff dir technical lengths for lib id sff fp in get per lib sff fps sff dir try readlength technical lengths[lib id]except Key Error continuesff data parse binary sff open sff fp True clipped header clipped reads set clip qual left sff data readlength fd temp fp mkstemp dir sff dir close fd with open temp fp 'w' as f write binary sff f clipped header clipped reads move temp fp sff fp
def common params task instance task cls if not isinstance task cls task Register raise Type Error 'task clsmustbeanuninstantiated Task' task instance param names dict task instance get params keys task cls params dict dict task cls get params task cls param names task cls params dict keys common param names set task instance param names intersection set task cls param names common param vals [ key task cls params dict[key] for key in common param names]common kwargs dict key task instance param kwargs[key] for key in common param names vals dict task instance get param values common param vals [] common kwargs return vals
def common params task instance task cls if not isinstance task cls task Register raise Type Error 'task clsmustbeanuninstantiated Task' task instance param names dict task instance get params keys task cls params dict dict task cls get params task cls param names task cls params dict keys common param names set task instance param names intersection set task cls param names common param vals [ key task cls params dict[key] for key in common param names]common kwargs dict key task instance param kwargs[key] for key in common param names vals dict task instance get param values common param vals [] common kwargs return vals
def get Python Containers meth containers []containers append meth im class module Name meth im class module while module Name is not None module sys modules get module Name None if module is None module import module Name containers append module module Name getattr module ' module ' None return containers
def kendall v1 v2 v1 v2 array v1 array v2 if not v1 size v2 size > 1 raise Value Error " Oneormorevectorsisn'tlongenoughtocorrelateortheyhaveunequallengths " return kendalltau v1 v2 [0 ]
def kendall v1 v2 v1 v2 array v1 array v2 if not v1 size v2 size > 1 raise Value Error " Oneormorevectorsisn'tlongenoughtocorrelateortheyhaveunequallengths " return kendalltau v1 v2 [0 ]
def get Dictionary String dictionary output c String IO String IO keys dictionary keys keys sort for key in keys add Value To Output 0 key output dictionary[key] return output getvalue
def impute df observations censorship transform in transform out uncensored mask df[censorship] False censored mask df[censorship] True fit params stats linregress df[' Zprelim'][uncensored mask] transform in df[observations][uncensored mask] slope intercept fit params[ 2]df loc[ 'estimated'] transform out slope * df[' Zprelim'][censored mask] + intercept df loc[ 'final'] numpy where df[censorship] df['estimated'] df[observations] return df
def n deep obj names for name in names try obj getattr obj name except Key Error raise API Error ' Thisobjectismissingthe%sattribute ' % name obj return obj
def ensure dir exists dirname try os makedirs dirname except OS Error as e if e errno errno EEXIST raise
def recognize derivative a d DE z None flag True a d a cancel d include True q r a div d Np Sp splitfactor sqf d DE coefficient D True z z j 1for s i in Sp delta a delta d H laurent series r d s j DE g gcd d H[ -1 ] as poly if g is not d flag Falsebreakj j + 1 return flag
def create Struct Format format {BIG ENDIAN {} LITTLE ENDIAN {}}for struct format in 'BHILQ' try size calcsize struct format format[BIG ENDIAN][size] '>%s' % struct format format[LITTLE ENDIAN][size] '<%s' % struct format except struct error passreturn format
def split line s parts out {}start 0for name length in parts out[name] s[start start + length ] strip start + lengthdel out[' ']return out
def remove unsupported archs config vars if 'CC' in os environ return config varsif re search '-arch\\s+ppc' config vars['CFLAGS'] is not None status os system "echo'intmain{} ' '%s'-c-archppc-xc-o/dev/null/dev/null 2 >/dev/null" % config vars['CC'] replace "'" '\'"\'"\'' if status for cv in UNIVERSAL CONFIG VARS if cv in config vars and cv not in os environ flags config vars[cv]flags re sub '-arch\\s+ppc\\w*\\s' '' flags save modified value config vars cv flags return config vars
def get delete id list user site check global True use cache True page ids get page ids for action user user site site action 'delete page' check global check global use cache use cache return page ids
def get delete id list user site check global True use cache True page ids get page ids for action user user site site action 'delete page' check global check global use cache use cache return page ids
def register mode name mode if name in predefined modes raise Value Error ' Modenamealreadytaken %s' % name predefined modes[name] mode
def update collection status in search collection id rights rights manager get collection rights collection id if rights status rights manager ACTIVITY STATUS PRIVATE delete documents from search index [collection id] else patch collection search document rights id collection rights to search dict rights
@register simple tag takes context True def escape explicit context return escape ' Hello{ 0 } ' format context['name']
def rss mail feed jobs parm {'amount' len jobs 'feed' feed 'jobs' jobs}return send with template 'rss' parm
def signal to exception signum frame if signum signal SIGALRM raise SIGALRM Exception if signum signal SIGHUP raise SIGHUP Exception if signum signal SIGUSR 1 raise SIGUSR 1 Exception if signum signal SIGUSR 2 raise SIGUSR 2 Exception raise Signal Exception signum
def module versions lines []modules collections Ordered Dict [ 'sip' ['SIP VERSION STR'] 'colorama' ['VERSION' ' version '] 'pypeg 2 ' [' version '] 'jinja 2 ' [' version '] 'pygments' [' version '] 'yaml' [' version '] 'cssutils' [' version '] 'typing' [] ' Py Qt 5 Qt Web Engine Widgets' [] ] for name attributes in modules items try module importlib import module name except Import Error text '{} no' format name else for attr in attributes try text '{} {}' format name getattr module attr except Attribute Error passelse breakelse text '{} yes' format name lines append text return lines
def permission blacked out course role names permission name return not course forum posts allowed and role names {FORUM ROLE STUDENT} and any [permission name startswith prefix for prefix in ['edit' 'update' 'create']]
def permission blacked out course role names permission name return not course forum posts allowed and role names {FORUM ROLE STUDENT} and any [permission name startswith prefix for prefix in ['edit' 'update' 'create']]
def dscl cmd ctype 'create' if grains ['osrelease info'] < 10 8 source noderoot ' ' '' else source noderoot 'localhost' '/ Local/ Default' if noderoot cmd[ 0 ] noderoot + cmd[ 0 ] return salt ['cmd run all'] ['dscl' source '-' + ctype ] + cmd output loglevel 'quiet' if ctype 'passwd' else 'debug' python shell False
def gen batches n batch size start 0for in range int n // batch size end start + batch size yield slice start end start endif start < n yield slice start n
def gen batches n batch size start 0for in range int n // batch size end start + batch size yield slice start end start endif start < n yield slice start n
@evalcontextfilterdef do tojson eval ctx value indent None policies eval ctx environment policiesdumper policies['json dumps function']options policies['json dumps kwargs']if indent is not None options dict options options['indent'] indentreturn htmlsafe json dumps value dumper dumper **options
def delete context namespace name resource type name namespace id resource type id session db rec get context namespace name resource type name namespace id resource type id session session delete db rec session flush return db rec to dict
def angle axis 2 quat theta vector is normalized False vector np array vector if not is normalized vector vector / math sqrt np dot vector vector t2 theta / 2 0 st 2 math sin t2 return np concatenate [math cos t2 ] vector * st 2
def clear old snapshots logging info ' Removingold Cassandrasnapshots ' try subprocess check call [NODE TOOL 'clearsnapshot'] except Called Process Error as error logging error ' Errorwhiledeletingold Cassandrasnapshots Error {0 }' format str error
def clear old snapshots logging info ' Removingold Cassandrasnapshots ' try subprocess check call [NODE TOOL 'clearsnapshot'] except Called Process Error as error logging error ' Errorwhiledeletingold Cassandrasnapshots Error {0 }' format str error
def clear old snapshots logging info ' Removingold Cassandrasnapshots ' try subprocess check call [NODE TOOL 'clearsnapshot'] except Called Process Error as error logging error ' Errorwhiledeletingold Cassandrasnapshots Error {0 }' format str error
def get Path edges path Indexes loop z path []for path Index Index in xrange len path Indexes path Index path Indexes[path Index Index]edge edges[path Index]carve Intersection get Carve Intersection From Edge edge loop z path append carve Intersection return path
def prompt user variable var name default value return click prompt var name default default value
@blueprint route '/<job id> json' methods ['GET'] @blueprint route '/<job id>' methods ['GET'] def show job id job scheduler get job job id if job is None raise werkzeug exceptions Not Found ' Jobnotfound' related jobs scheduler get related jobs job if request wants json return flask jsonify job json dict True elif isinstance job model images Image Classification Model Job return model images classification views show job related jobs related jobs elif isinstance job model images Generic Image Model Job return model images generic views show job related jobs related jobs else raise werkzeug exceptions Bad Request ' Invalidjobtype'
def add file file path db content['files'] append file path
def attach handlers app settings if settings USE POSTGRES add handlers app django handlers handlers else add handlers app mongo handlers handlers add handlers app celery task handlers handlers add handlers app transaction handlers handlers add handlers app postcommit handlers handlers add handlers app {'before request' framework sessions prepare private key} add handlers app {'before request' framework sessions before request 'after request' framework sessions after request} return app
def add reload hook fn reload hooks append fn
def add reload hook fn reload hooks append fn
def libvlc media player get rate p mi f Cfunctions get 'libvlc media player get rate' None or Cfunction 'libvlc media player get rate' 1 None ctypes c float Media Player return f p mi
def make get public certificates call rpc request app identity service pb Get Public Certificate For App Request response app identity service pb Get Public Certificate For App Response def get certs result rpc ' Checksuccess handleexceptions andreturnconverted RP Cresult \n\n Thismethodwaitsforthe RP Cifithasnotyetfinished andcallsthe\npost-callhooksonthefirstinvocation \n\n Args \nrpc A User RP Cobject \n\n Returns \n Alistof Public Certificateobject \n'assert rpc service APP IDENTITY SERVICE NAME repr rpc service assert rpc method GET CERTS METHOD NAME repr rpc method try rpc check success except apiproxy errors Application Error as err raise to app identity error err result []for cert in response public certificate list list result append Public Certificate cert key name cert x509 certificate pem return resultrpc make call GET CERTS METHOD NAME request response get certs result
def session config salt ['config option'] 'zenoss' session requests session session auth config get 'username' config get 'password' session verify Falsesession headers update {' Content-type' 'application/json charset utf- 8 '} return session
def session config salt ['config option'] 'zenoss' session requests session session auth config get 'username' config get 'password' session verify Falsesession headers update {' Content-type' 'application/json charset utf- 8 '} return session
def partial project endog exog x1 x2 endog exog params np linalg pinv x2 dot x1 predicted x2 dot params residual x1 - predicted res Bunch params params fittedvalues predicted resid residual return res
def partial project endog exog x1 x2 endog exog params np linalg pinv x2 dot x1 predicted x2 dot params residual x1 - predicted res Bunch params params fittedvalues predicted resid residual return res
def partial project endog exog x1 x2 endog exog params np linalg pinv x2 dot x1 predicted x2 dot params residual x1 - predicted res Bunch params params fittedvalues predicted resid residual return res
def authenticate func c expose request False if not python callable func raise Type Error 'funcmustbecallable' if not python callable c raise Type Error ' Authenticatormustbecallable' attr funcif isinstance func types Unbound Method Type attr func im funcif expose request is True c globals ['expose request'] c setattr attr ' pyamf authenticator' c return func
def install templates translations generator if 'JINJA ENVIRONMENT' in generator settings jinja extensions generator settings['JINJA ENVIRONMENT'] get 'extensions' [] else jinja extensions generator settings['JINJA EXTENSIONS']if 'jinja 2 ext i18 n' in jinja extensions domain generator settings get 'I 18 N GETTEXT DOMAIN' 'messages' localedir generator settings get 'I 18 N GETTEXT LOCALEDIR' if localedir is None localedir os path join generator theme 'translations' current lang generator settings['DEFAULT LANG']if current lang generator settings get 'I 18 N TEMPLATES LANG' MAIN LANG translations gettext Null Translations else langs [current lang]try translations gettext translation domain localedir langs except IO Error OS Error LOGGER error " Cannotfindtranslationsforlanguage'{}'in'{}'withdomain'{}' Installing Null Translations " format langs[ 0 ] localedir domain translations gettext Null Translations newstyle generator settings get 'I 18 N GETTEXT NEWSTYLE' True generator env install gettext translations translations newstyle
def install templates translations generator if 'JINJA ENVIRONMENT' in generator settings jinja extensions generator settings['JINJA ENVIRONMENT'] get 'extensions' [] else jinja extensions generator settings['JINJA EXTENSIONS']if 'jinja 2 ext i18 n' in jinja extensions domain generator settings get 'I 18 N GETTEXT DOMAIN' 'messages' localedir generator settings get 'I 18 N GETTEXT LOCALEDIR' if localedir is None localedir os path join generator theme 'translations' current lang generator settings['DEFAULT LANG']if current lang generator settings get 'I 18 N TEMPLATES LANG' MAIN LANG translations gettext Null Translations else langs [current lang]try translations gettext translation domain localedir langs except IO Error OS Error LOGGER error " Cannotfindtranslationsforlanguage'{}'in'{}'withdomain'{}' Installing Null Translations " format langs[ 0 ] localedir domain translations gettext Null Translations newstyle generator settings get 'I 18 N GETTEXT NEWSTYLE' True generator env install gettext translations translations newstyle
def make sparse spd matrix dim 1 alpha 0 95 norm diag False smallest coef 0 1 largest coef 0 9 random state None random state check random state random state chol - np eye dim aux random state rand dim dim aux[ aux < alpha ] 0aux[ aux > alpha ] smallest coef + largest coef - smallest coef * random state rand np sum aux > alpha aux np tril aux k -1 permutation random state permutation dim aux aux[permutation] T[permutation]chol + auxprec np dot chol T chol if norm diag d np diag prec reshape 1 prec shape[ 0 ] d 1 0 / np sqrt d prec * dprec * d Treturn prec
def test On Sequence Data module dataset target dataset get Field 'target' output Module Validator calculate Module Output module dataset ends Sequence Helper get Sequence Ends dataset summed output zeros dataset outdim class output []class target []for j in range len output summed output + output[j]if j in ends class output append argmax summed output class target append argmax target[j] summed output zeros dataset outdim class output array class output class target array class target return Validator classification Performance class output class target
def test On Sequence Data module dataset target dataset get Field 'target' output Module Validator calculate Module Output module dataset ends Sequence Helper get Sequence Ends dataset summed output zeros dataset outdim class output []class target []for j in range len output summed output + output[j]if j in ends class output append argmax summed output class target append argmax target[j] summed output zeros dataset outdim class output array class output class target array class target return Validator classification Performance class output class target
def auto configure disk session vdi ref new gb with vdi attached here session vdi ref read only False as dev partitions get partitions dev if len partitions 1 return num start old sectors ptype partitions[ 0 ]if ptype in 'ext 3 ' 'ext 4 ' new sectors new gb * 1024 * 1024 * 1024 / SECTOR SIZE resize part and fs dev start old sectors new sectors
def hookspath return [curdir]
def get Loops In Order Of Area compare Area Function loops loop Areas []for loop in loops loop Area Loop Area loop loop Areas append loop Area loop Areas sort compare Area Function loops In Descending Order Of Area []for loop Area in loop Areas loops In Descending Order Of Area append loop Area loop return loops In Descending Order Of Area
def neighbors neighbor None return proxy ['napalm call'] 'get bgp neighbors detail' **{'neighbor address' neighbor}
def neighbors neighbor None return proxy ['napalm call'] 'get bgp neighbors detail' **{'neighbor address' neighbor}
def neighbors neighbor None return proxy ['napalm call'] 'get bgp neighbors detail' **{'neighbor address' neighbor}
def neighbors neighbor None return proxy ['napalm call'] 'get bgp neighbors detail' **{'neighbor address' neighbor}
def nl 2 br string return unicodifier string replace u'\n' u'<br>\n'
def nl 2 br string return unicodifier string replace u'\n' u'<br>\n'
def get stock information html supplier product stock Stock Count objects filter product product supplier supplier first context {'div id' get stock information div id supplier product 'sales decimals' product sales unit decimals if product sales unit else 0 'sales unit' product sales unit short name if product sales unit else '' 'stock' stock}if 'shuup notify' in settings INSTALLED APPS context['alert limit'] Truereturn render to string 'shuup/simple supplier/admin/stock information jinja' context
def get stock information html supplier product stock Stock Count objects filter product product supplier supplier first context {'div id' get stock information div id supplier product 'sales decimals' product sales unit decimals if product sales unit else 0 'sales unit' product sales unit short name if product sales unit else '' 'stock' stock}if 'shuup notify' in settings INSTALLED APPS context['alert limit'] Truereturn render to string 'shuup/simple supplier/admin/stock information jinja' context
def get stock information html supplier product stock Stock Count objects filter product product supplier supplier first context {'div id' get stock information div id supplier product 'sales decimals' product sales unit decimals if product sales unit else 0 'sales unit' product sales unit short name if product sales unit else '' 'stock' stock}if 'shuup notify' in settings INSTALLED APPS context['alert limit'] Truereturn render to string 'shuup/simple supplier/admin/stock information jinja' context
def uses shib course return course enrollment domain and course enrollment domain startswith settings SHIBBOLETH DOMAIN PREFIX
def uses shib course return course enrollment domain and course enrollment domain startswith settings SHIBBOLETH DOMAIN PREFIX
def uses shib course return course enrollment domain and course enrollment domain startswith settings SHIBBOLETH DOMAIN PREFIX
def uses shib course return course enrollment domain and course enrollment domain startswith settings SHIBBOLETH DOMAIN PREFIX
def push img if not isinstance img np ndarray raise Value Error ' Canonlypushndarraystotheimagestack ' image stack append img
def symlink src link if sys getwindowsversion major < 6 raise Salt Invocation Error ' Symlinksareonlysupportedon Windows Vistaorlater ' if not os path exists src raise Salt Invocation Error ' Thegivensourcepathdoesnotexist ' if not os path isabs src raise Salt Invocation Error ' Filepathmustbeabsolute ' src os path normpath src link os path normpath link is dir os path isdir src try win 32 file Create Symbolic Link link src int is dir return Trueexcept pywinerror as exc raise Command Execution Error " Couldnotcreate'{ 0 }'-[{ 1 }]{ 2 }" format link exc winerror exc strerror
def symlink src link if sys getwindowsversion major < 6 raise Salt Invocation Error ' Symlinksareonlysupportedon Windows Vistaorlater ' if not os path exists src raise Salt Invocation Error ' Thegivensourcepathdoesnotexist ' if not os path isabs src raise Salt Invocation Error ' Filepathmustbeabsolute ' src os path normpath src link os path normpath link is dir os path isdir src try win 32 file Create Symbolic Link link src int is dir return Trueexcept pywinerror as exc raise Command Execution Error " Couldnotcreate'{ 0 }'-[{ 1 }]{ 2 }" format link exc winerror exc strerror
def has beta version dev releases return version in [re search ' \\d+\\ +\\d+' s group 0 for s in dev releases keys ]
def test no translation old lang translation get language try translation activate 'pt-br' with no translation assert translation get language lower settings LANGUAGE CODE lower assert translation get language 'pt-br' with no translation 'es' assert translation get language 'es' assert translation get language 'pt-br' finally translation activate old lang
def test no translation old lang translation get language try translation activate 'pt-br' with no translation assert translation get language lower settings LANGUAGE CODE lower assert translation get language 'pt-br' with no translation 'es' assert translation get language 'es' assert translation get language 'pt-br' finally translation activate old lang
def test no translation old lang translation get language try translation activate 'pt-br' with no translation assert translation get language lower settings LANGUAGE CODE lower assert translation get language 'pt-br' with no translation 'es' assert translation get language 'es' assert translation get language 'pt-br' finally translation activate old lang
def write record pair read 1 read 2 fileobj rec pair u'@%s\n%s\n+\n%s\n' * 2 rec pair no qual u'>%s\n%s\n' * 2 if hasattr read 1 u'quality' assert hasattr read 2 u'quality' recstr rec pair % read 1 name read 1 sequence read 1 quality read 2 name read 2 sequence read 2 quality else recstr rec pair no qual % read 1 name read 1 sequence read 2 name read 2 sequence try fileobj write bytes recstr u'ascii' except Type Error fileobj write recstr
def test cli roles override decorator roles @roles 'r 1 ' def command passeq effective roles command ['r 2 '] cli roles ['r 2 '] env {'roledefs' fake roles}
def Test Auth Facebook User action tester user dict device dict None user cookie None ident dict {'key' ' Facebook Graph %s' % user dict['id'] 'authority' ' Facebook' 'access token' 'access token'}if device dict device dict pop 'device uuid' None device dict pop 'test udid' None with mock patch 'tornado httpclient Async HTTP Client' Mock Async HTTP Client as mock client mock client map 'https //graph facebook com/oauth/access token' 'access token %s&expires 3600 ' % ident dict['access token'] auth test Add Mock JSON Response mock client 'https //graph facebook com/me\\?' user dict auth test Add Mock JSON Response mock client 'https //graph facebook com/me/photos\\?' {'data' []} auth test Add Mock JSON Response mock client 'https //graph facebook com/me/friends\\?' {'data' []} response auth test Auth Facebook Or Google User tester action user dict ident dict device dict user cookie return auth test Validate Auth User tester action user dict ident dict device dict user cookie response
def make traceback exc info source hint None exc type exc value tb exc infoif isinstance exc value Template Syntax Error exc info translate syntax error exc value source hint initial skip 0else initial skip 1return translate exception exc info initial skip
def imdisplay imarray screen None a pg surfarray make surface imarray swapaxes 0 1 if screen is None screen pg display set mode imarray shape[ 2][ -1 ] screen blit a 0 0 pg display flip
def imdisplay imarray screen None a pg surfarray make surface imarray swapaxes 0 1 if screen is None screen pg display set mode imarray shape[ 2][ -1 ] screen blit a 0 0 pg display flip
def set debug function func cb debug print to stdout warnings True notices True speed True debug debug function func cbdebug enable warning warningsdebug enable notice noticesdebug enable speed speed
def set debug function func cb debug print to stdout warnings True notices True speed True debug debug function func cbdebug enable warning warningsdebug enable notice noticesdebug enable speed speed
def test feature max length on step sentence feature Feature from string FEATURE 4 assert equals feature max length 55
def validate files pelican for dirpath filenames in os walk pelican settings['OUTPUT PATH'] for name in filenames if should validate name filepath os path join dirpath name validate filepath
def get permission types return PERMISSION TYPES keys
@lru cache def system start time start time parameter time time 'systemstarttime' btime line get line '/proc/stat' 'btime' parameter try result float btime line strip split [1 ] log runtime parameter '/proc/stat[btime]' start time return resultexcept exc IO Error 'unabletoparsethe/proc/statbtimeentry %s' % btime line log failure parameter exc raise exc
def l2 regularizer weight 1 0 scope None def regularizer tensor with tf name scope scope 'L 2 Regularizer' [tensor] l2 weight tf convert to tensor weight dtype tensor dtype base dtype name 'weight' return tf multiply l2 weight tf nn l2 loss tensor name 'value' return regularizer
def extended lookup connection project key pbs missing None deferred None eventual False transaction id None if missing is not None and missing [] raise Value Error 'missingmustbe Noneoranemptylist' if deferred is not None and deferred [] raise Value Error 'deferredmustbe Noneoranemptylist' results []loop num 0while loop num < MAX LOOPS loop num + 1 results found missing found deferred found connection lookup project project key pbs key pbs eventual eventual transaction id transaction id results extend results found if missing is not None missing extend missing found if deferred is not None deferred extend deferred found breakif len deferred found 0 breakkey pbs deferred foundreturn results
def html unescape t return encode decode htmldecode t
def clean salt variables params variable prefix ' ' list list map params pop [k for k in params if k startswith variable prefix ] return params
def sort torrent fulltext data set norm num seeders normalize data dict data set 'num seeders' 'infohash' norm neg votes normalize data dict data set 'neg votes' 'infohash' norm subscriptions normalize data dict data set 'subscriptions' 'infohash' for data in data set score 0 8 * norm num seeders[data get 'infohash' ] - 0 1 * norm neg votes[data get 'infohash' ] + 0 1 * norm subscriptions[data get 'infohash' ] data get 'relevance score' [ -1 ] scoredata set sort key lambda d d get 'relevance score' reverse True
@contextlib contextmanagerdef create file backed module code with create tempfile as temp module test utils build module code module file temp yield module
def check status try ret salt utils http query 'https //rubygems org' status True except Exception return Falsereturn ret['status'] 200
def premetadata create account stat table self conn put timestamp conn executescript "\n CREATETABL Eaccount stat \naccount TEXT \ncreated at TEXT \nput timestamp TEXTDEFAULT' 0 ' \ndelete timestamp TEXTDEFAULT' 0 ' \ncontainer count INTEGER \nobject count INTEGERDEFAULT 0 \nbytes used INTEGERDEFAULT 0 \nhash TEX Tdefault' 00000000000000000000000000000000 ' \nid TEXT \nstatus TEXTDEFAULT'' \nstatus changed at TEXTDEFAULT' 0 '\n \n\n INSERTINT Oaccount stat container count VALUES 0 \n" conn execute '\n UPDAT Eaccount stat SE Taccount ? created at ? id ? \nput timestamp ?\n' self account Timestamp time internal str uuid 4 put timestamp
def interpret conf limits conf name prefix info None conf limits []for conf key in conf if conf key startswith name prefix cont size int conf key[len name prefix ] rate float conf[conf key] conf limits append cont size rate conf limits sort ratelimits []conf limits info list conf limits while conf limits cur size cur rate conf limits pop 0 if conf limits next size next rate conf limits[ 0 ]slope float next rate - float cur rate / next size - cur size def new scope cur size slope cur rate return lambda x x - cur size * slope + cur rate line func new scope cur size slope cur rate else line func lambda x cur rate ratelimits append cur size cur rate line func if info is None return ratelimitselse return ratelimits conf limits info
def get exc from name name exc Nonetry return rc exc cache[name]except Key Error m rc exc regex match name if m base m group 1 rc or sig name m group 2 if base ' Signal Exception' try rc - int rc or sig name except Value Error rc - getattr signal rc or sig name else rc int rc or sig name exc get rc exc rc return exc
def sync table model keyspaces None connections None context get context keyspaces connections for connection keyspace in context with query Context Query model keyspace keyspace as m sync table m connection connection
def local Ssl Fixup host ssl Context if not ssl Context and host in ['localhost' '127 0 0 1' ' 1'] import sslif hasattr ssl ' create unverified context' ssl Context ssl create unverified context return ssl Context
def local Ssl Fixup host ssl Context if not ssl Context and host in ['localhost' '127 0 0 1' ' 1'] import sslif hasattr ssl ' create unverified context' ssl Context ssl create unverified context return ssl Context
def local Ssl Fixup host ssl Context if not ssl Context and host in ['localhost' '127 0 0 1' ' 1'] import sslif hasattr ssl ' create unverified context' ssl Context ssl create unverified context return ssl Context
def local Ssl Fixup host ssl Context if not ssl Context and host in ['localhost' '127 0 0 1' ' 1'] import sslif hasattr ssl ' create unverified context' ssl Context ssl create unverified context return ssl Context
def combine similar molecules molecules list new guys start idx 0while new guys start idx < len molecules list combined [ False] * len molecules list new guys []for j in xrange new guys start idx len molecules list for i in xrange 0 j if combined[i] continue g1 m1 g2 m2 molecules list[i] molecules list[j] js jaccard similarity g1 g2 if js > JACCARD THRESHOLD new guys append g1 union g2 m1 union m2 combined[i] combined[j] True True breakmolecules list [molecule for molecule was combined in zip molecules list combined if not was combined ]new guys start idx len molecules list molecules list extend new guys return molecules list
def find compound unit numerator unit denominator unit locale LC NUMERIC locale Locale parse locale numerator unit find unit pattern numerator unit locale locale denominator unit find unit pattern denominator unit locale locale if not numerator unit and denominator unit return Nonebare numerator unit numerator unit split '-' 1 [ -1 ]bare denominator unit denominator unit split '-' 1 [ -1 ]return find unit pattern '%s-per-%s' % bare numerator unit bare denominator unit locale locale
@comm guard Free Variable ANY TYPE def unify walk fv o U v Bound Variable '?' o return U merge v fv
@comm guard Free Variable ANY TYPE def unify walk fv o U v Bound Variable '?' o return U merge v fv
def translate formula out []for part in re split ' \\w+ ? \\w+ ? ' formula m re match '^ [A-Z]+ [1 - 9 ][ 0 - 9 ]* ? [A-Z]+ [1 - 9 ][ 0 - 9 ]* ?$' part if m is None out append part else x1 y1 x2 y2 m groups x1 colname 2 num x1 if x2 is None s 'cell %s %s ' % x1 y1 else x2 colname 2 num x2 s 'cells %s %s %s %s ' % x1 y1 x2 y2 out append s return '' join out
def violin stats X method points 100 vpstats []X reshape 2D X for x in X stats {}min val np min x max val np max x coords np linspace min val max val points stats[u'vals'] method x coords stats[u'coords'] coordsstats[u'mean'] np mean x stats[u'median'] np median x stats[u'min'] min valstats[u'max'] max valvpstats append stats return vpstats
def violin stats X method points 100 vpstats []X reshape 2D X for x in X stats {}min val np min x max val np max x coords np linspace min val max val points stats[u'vals'] method x coords stats[u'coords'] coordsstats[u'mean'] np mean x stats[u'median'] np median x stats[u'min'] min valstats[u'max'] max valvpstats append stats return vpstats
def firebase patch path value None response content get http request path method 'PATCH' body value return json loads content
def firebase patch path value None response content get http request path method 'PATCH' body value return json loads content
def firebase patch path value None response content get http request path method 'PATCH' body value return json loads content
def Strip Separators value return re sub '[]*' '' re sub WORD SEPARATOR RE '' value
def rmsdiff 2011 im 1 im 2 diff Image Chops difference im 1 im 2 h diff histogram sq value * idx ** 2 for idx value in enumerate h sum of squares sum sq rms math sqrt sum of squares / float im 1 size[ 0 ] * im 1 size[ 1 ] return rms
def call Multiple In Thread tuple List from twisted internet import reactorreactor call In Thread run Multiple tuple List
def plugins update for env in Plugin Globals env registry values for service in env services copy if service class not in PLUGINS CLASS service deactivate import ckan config environment as environmentenvironment update config
def plugins update for env in Plugin Globals env registry values for service in env services copy if service class not in PLUGINS CLASS service deactivate import ckan config environment as environmentenvironment update config
def plugins update for env in Plugin Globals env registry values for service in env services copy if service class not in PLUGINS CLASS service deactivate import ckan config environment as environmentenvironment update config
def plugins update for env in Plugin Globals env registry values for service in env services copy if service class not in PLUGINS CLASS service deactivate import ckan config environment as environmentenvironment update config
def plugins update for env in Plugin Globals env registry values for service in env services copy if service class not in PLUGINS CLASS service deactivate import ckan config environment as environmentenvironment update config
def count discussions handler sender **kwargs if kwargs get 'instance' and kwargs get 'created' returncomment 'comment' in kwargs and kwargs['comment'] or kwargs['instance'] entry comment content objectif isinstance entry Entry entry comment count entry comments count entry pingback count entry pingbacks count entry trackback count entry trackbacks count entry save update fields ['comment count' 'pingback count' 'trackback count']
def map wms request mapid map obj resolve map request mapid 'base view resourcebase' PERMISSION MSG VIEW if request method 'PUT' try layer Group Name map obj publish layer group response dict layer Group Name layer Group Name ows getattr ogc server settings 'ows' '' return Http Response json dumps response content type 'application/json' except return Http Response Server Error if request method 'GET' response dict layer Group Name getattr map obj layer group 'name' '' ows getattr ogc server settings 'ows' '' return Http Response json dumps response content type 'application/json' return Http Response Not Allowed ['PUT' 'GET']
def map wms request mapid map obj resolve map request mapid 'base view resourcebase' PERMISSION MSG VIEW if request method 'PUT' try layer Group Name map obj publish layer group response dict layer Group Name layer Group Name ows getattr ogc server settings 'ows' '' return Http Response json dumps response content type 'application/json' except return Http Response Server Error if request method 'GET' response dict layer Group Name getattr map obj layer group 'name' '' ows getattr ogc server settings 'ows' '' return Http Response json dumps response content type 'application/json' return Http Response Not Allowed ['PUT' 'GET']
def map wms request mapid map obj resolve map request mapid 'base view resourcebase' PERMISSION MSG VIEW if request method 'PUT' try layer Group Name map obj publish layer group response dict layer Group Name layer Group Name ows getattr ogc server settings 'ows' '' return Http Response json dumps response content type 'application/json' except return Http Response Server Error if request method 'GET' response dict layer Group Name getattr map obj layer group 'name' '' ows getattr ogc server settings 'ows' '' return Http Response json dumps response content type 'application/json' return Http Response Not Allowed ['PUT' 'GET']
def permitted func @functools wraps func def wrapper request *args **kwargs '\n Wrapperfortheviewthatonlycallstheviewiftheuserisauthorized \n'def fetch content '\n Extracttheforumobjectfromthekeywordargumentstotheview \n'if 'thread id' in kwargs content cc Thread find kwargs['thread id'] to dict elif 'comment id' in kwargs content cc Comment find kwargs['comment id'] to dict elif 'commentable id' in kwargs content cc Commentable find kwargs['commentable id'] to dict else content Nonereturn contentcourse key Course Key from string kwargs['course id'] if check permissions by view request user course key fetch content request view name return func request *args **kwargs else return Json Error 'unauthorized' status 401 return wrapper
def auto through field return not field rel through or getattr getattr field rel through ' meta' None 'auto created' False
def auto through field return not field rel through or getattr getattr field rel through ' meta' None 'auto created' False
def st mode to octal mode try return oct mode [ -4 ]except Type Error Index Error return ''
def namignizer iterator names counts batch size num steps epoch size name distribution counts / counts sum for i in range epoch size data np zeros batch size * num steps + 1 samples np random choice names size batch size * num steps // 2 replace True p name distribution data index 0for sample in samples if data index > batch size * num steps breakfor letter in map letter to number sample + [ EON] if data index > batch size * num steps breakdata[data index] letterdata index + 1x data[ batch size * num steps ] reshape batch size num steps y data[ 1 batch size * num steps + 1 ] reshape batch size num steps yield x y
def get blocks with unallocated module cp driver lb driver network domain total unallocated ips 0all blocks list public ip blocks module cp driver network domain unalloc blocks []unalloc addresses []for block in all blocks d blocks get block allocation module cp driver lb driver network domain block i 0for addr in d blocks['addresses'] if addr['allocated'] is False if i 0 unalloc blocks append d blocks unalloc addresses append addr['address'] total unallocated ips + 1i + 1return {'unallocated count' total unallocated ips 'ip blocks' unalloc blocks 'unallocated addresses' unalloc addresses}
def convert kvp str to list data kvp [x strip for x in data split ' ' 1 ]if len kvp 2 and kvp[ 0 ] return kvpmsg "'%s'isnotoftheform<key> [value]" % data raise q exc Invalid Input error message msg
def valid value value quote default cookie quote unquote default unquote if value is None return Falseencoded encode cookie value value quote quote decoded parse string encoded unquote unquote decoded normalized normalize 'NFKD' decoded if not isinstance decoded bytes else decoded value normalized normalize 'NFKD' value if not isinstance value bytes else value if decoded normalized value normalized return Truereturn False
def reset name runas None return prlctl 'reset' sdecode name runas runas
def reset name runas None return prlctl 'reset' sdecode name runas runas
def get drivers global driversif drivers is None drivers []for notification driver in CONF list notifier drivers try drivers append importutils import module notification driver except Import Error as e drivers append Import Failure Notifier e return drivers
def rsentence length 4 return '' join rword random randint 4 9 for i in range length
def glob list obj *args **kwargs return obj glob list *args **kwargs
def glob list obj *args **kwargs return obj glob list *args **kwargs
def select Some strings requiredsubstrings [] require All True if len requiredsubstrings 0 return stringsres []for s in strings if require All bad Falsefor rs in requiredsubstrings if s find rs < 0 bad Truebreakif not bad res append s else for rs in requiredsubstrings if s find rs > 0 res append s breakreturn res
def get theme paths themes theme dirs theme paths []for theme in themes theme base dirs get theme base dirs theme theme dirs if not theme base dirs print "\x 1 b[ 91 m\n Skipping'{theme}' \n Theme {theme} notfoundinanyofthethemedirs {theme dirs} \x 1 b[ 00 m" format theme theme theme dirs ' ' join theme dirs theme paths extend theme base dirs return theme paths
def user absent name ret {'name' name 'result' False 'changes' {} 'comment' ''}old user salt ['nxos cmd'] 'get user' username name if not old user ret['result'] Trueret['comment'] ' Userdoesnotexist'return retif opts ['test'] is True and old user ret['result'] Noneret['comment'] ' Userwillberemoved'ret['changes']['old'] old userret['changes']['new'] ''return ret salt ['nxos cmd'] 'remove user' username name if salt ['nxos cmd'] 'get user' username name ret['comment'] ' Failedtoremoveuser'else ret['result'] Trueret['comment'] ' Userremoved'ret['changes']['old'] old userret['changes']['new'] ''return ret
def Rule Inputs And Outputs rule trigger file raw inputs Fix Paths rule get 'inputs' [] raw outputs Fix Paths rule get 'outputs' [] inputs Ordered Set outputs Ordered Set inputs add trigger file for i in raw inputs inputs add Rule Expand Path i trigger file for o in raw outputs outputs add Rule Expand Path o trigger file return inputs outputs
def survey get All Questions For Template template id s3 db current s3 dbsectable s3 db survey sectionq ltable s3 db survey question listqsntable s3 db survey questionquery q ltable template id template id & q ltable section id sectable id & q ltable question id qsntable id rows current db query select qsntable id qsntable code qsntable name qsntable type sectable name q ltable posn orderby q ltable posn questions []for row in rows question {}question row row survey questionquestion['qstn id'] question row idquestion['code'] question row codequestion['name'] s3 db survey qstn name represent question row name question['type'] question row typequestion['posn'] row survey question list posnquestion['section'] row survey section namequestions append question return questions
def duplicate hits generator timestamps **kwargs while True yield generate hits timestamps **kwargs
def find matching button category component type buttons world css find 'div new-component-{}button' format category matched buttons [btn for btn in buttons if btn text component type ]assert equal len matched buttons 1 return matched buttons[ 0 ]
def get time time tzinfo None if time is None time datetime utcnow elif isinstance time number types time datetime utcfromtimestamp time if time tzinfo is None time time replace tzinfo UTC if isinstance time datetime if tzinfo is not None time time astimezone tzinfo if hasattr tzinfo 'normalize' time tzinfo normalize time time time timetz elif tzinfo is not None time time replace tzinfo tzinfo return time
def print actions actions sys stdout write dumps actions encode 'utf- 8 ' + '\n'
def http content security policy http server return "default-src'self''unsafe-inline''unsafe-eval' img-src'self'data "
def apply units string units inter None final float blank reg BLANK RE value reg VALUE RE if inter is None inter finalfstring BLANK RE sub '' string if not fstring and VALIDATION RE match fstring raise Value Error ' Invalidunitstring %r ' % string values []for match in value reg finditer fstring dic match groupdict lit unit dic['value'] dic get 'unit' value inter lit if unit is not None try value * units[unit lower ]except Key Error raise Key Error 'invalidunit%s validunitsare%s' % unit units keys values append value return final sum values
def apply units string units inter None final float blank reg BLANK RE value reg VALUE RE if inter is None inter finalfstring BLANK RE sub '' string if not fstring and VALIDATION RE match fstring raise Value Error ' Invalidunitstring %r ' % string values []for match in value reg finditer fstring dic match groupdict lit unit dic['value'] dic get 'unit' value inter lit if unit is not None try value * units[unit lower ]except Key Error raise Key Error 'invalidunit%s validunitsare%s' % unit units keys values append value return final sum values
@world absorbdef css contains text css selector partial text index 0 if partial text wait for lambda css html css selector index index timeout 8 actual text css html css selector index index return partial text in actual text
@world absorbdef css contains text css selector partial text index 0 if partial text wait for lambda css html css selector index index timeout 8 actual text css html css selector index index return partial text in actual text
def single source bellman ford G source target None cutoff None weight 'weight' if source target return {source 0} {source [source]} weight weight function G weight paths {source [source]}return bellman ford G [source] weight paths paths cutoff cutoff target target paths
def get admin info command host None core name None url format url 'admin/{ 0 }' format command host core name core name resp http request url return resp
def get admin info command host None core name None url format url 'admin/{ 0 }' format command host core name core name resp http request url return resp
def check estimator Estimator name Estimator name check parameters default constructible name Estimator for check in yield all checks name Estimator try check name Estimator except Skip Test as message warnings warn message Skip Test Warning
def check estimator Estimator name Estimator name check parameters default constructible name Estimator for check in yield all checks name Estimator try check name Estimator except Skip Test as message warnings warn message Skip Test Warning
def combine common sections data sections []sections dict {}for each in data if each[u'label'] not in sections dict sections dict[each[u'label']] eachsections append each else sections dict[each[u'label']][u'items'] + each[u'items']return sections
def get size conn vm size config get cloud config value 'size' vm opts default 'n 1 -standard- 1 ' search global False return conn ex get size size get location conn vm
def get size conn vm size config get cloud config value 'size' vm opts default 'n 1 -standard- 1 ' search global False return conn ex get size size get location conn vm
def get size conn vm size config get cloud config value 'size' vm opts default 'n 1 -standard- 1 ' search global False return conn ex get size size get location conn vm
def htmldiff tokens html 1 tokens html 2 tokens s Insensitive Sequence Matcher a html 1 tokens b html 2 tokens commands s get opcodes result []for command i1 i2 j1 j2 in commands if command 'equal' result extend expand tokens html 2 tokens[j 1 j2 ] equal True continueif command 'insert' or command 'replace' ins tokens expand tokens html 2 tokens[j 1 j2 ] merge insert ins tokens result if command 'delete' or command 'replace' del tokens expand tokens html 1 tokens[i 1 i2 ] merge delete del tokens result result cleanup delete result return result
def cluster has pending steps steps return any step status state 'PENDING' for step in steps
def create ma deg f deg g row 1 row 2 col num if deg g - deg f > 1 print ' Reversedegrees' returnm zeros deg f - deg g + 2 col num for i in range deg f - deg g + 1 m[i ] rotate r row 1 i m[ deg f - deg g + 1 ] row 2 return m
def group path use sudo False func use sudo and run as root or run with settings hide 'running' 'stdout' warn only True result func 'stat-c%%G"% path s"' % locals if result failed and 'stat illegaloption' in result return func 'stat-f%% Sg"% path s"' % locals else return result
def Cluster Controller *args **kwargs controller Controller *args **kwargs Intf 'eth 0 ' node controller update IP return controller
def Cluster Controller *args **kwargs controller Controller *args **kwargs Intf 'eth 0 ' node controller update IP return controller
def add ngram sequences token indice ngram range 2 new sequences []for input list in sequences new list input list[ ]for i in range len new list - ngram range + 1 for ngram value in range 2 ngram range + 1 ngram tuple new list[i i + ngram value ] if ngram in token indice new list append token indice[ngram] new sequences append new list return new sequences
def block device mapping get all by volume id context volume id columns to join None return IMPL block device mapping get all by volume id context volume id columns to join
def drop empty translationprojects apps schema editor Directory apps get model u'pootle app Directory' TP apps get model u'pootle translationproject Translation Project' for tp in TP objects all if not Directory objects filter pootle path tp pootle path exists tp delete
def setup platform hass config add devices discovery info None from panasonic viera import Remote Controlmac config get CONF MAC name config get CONF NAME port config get CONF PORT if discovery info LOGGER debug '%s' discovery info vals discovery info split ' ' if len vals > 1 port vals[ 1 ]host vals[ 0 ]remote Remote Control host port add devices [ Panasonic Viera TV Device mac name remote ] return Truehost config get CONF HOST remote Remote Control host port add devices [ Panasonic Viera TV Device mac name remote ] return True
def restore disks job restore False disk list None if restore and disk list is not None prepare disks job 'ext 2 /-q-i 20480 -m 1 //restore ext 2 ' disk 1 only False disk list disk list
def restore disks job restore False disk list None if restore and disk list is not None prepare disks job 'ext 2 /-q-i 20480 -m 1 //restore ext 2 ' disk 1 only False disk list disk list
def delete connect spec dn l connect connect spec log info 'deletingentry dn {0 }' format repr dn try l c delete s dn except ldap LDAP Error as e convert exception e return True
@preprocess engine coerce string to eng def downgrade engine desired version with engine begin as conn metadata sa Meta Data conn metadata reflect version info table metadata tables['version info']starting version sa select version info table c version scalar if starting version < desired version raise Asset DB Impossible Downgrade db version starting version desired version desired version if starting version desired version returnctx Migration Context configure conn op Operations ctx downgrade keys range desired version starting version [ -1 ] pragma foreign keys conn False for downgrade key in downgrade keys downgrade methods[downgrade key] op conn version info table pragma foreign keys conn True
def add extra output destination writeable object important level 0 name None global extra print destsextra print dests append {'dest' writeable object 'name' name 'important level' important level}
def record played exploration in collection context user id collection id exploration id progress model user models Collection Progress Model get or create user id collection id if exploration id not in progress model completed explorations progress model completed explorations append exploration id progress model put
def record played exploration in collection context user id collection id exploration id progress model user models Collection Progress Model get or create user id collection id if exploration id not in progress model completed explorations progress model completed explorations append exploration id progress model put
def assert rpm headers test case expected headers rpm path output check output ['rpm' '--query' '--info' '--package' rpm path path] actual headers parse colon dict output assert dict contains test case expected headers actual headers ' Missing RPM Headers '
def list remove repeat l None l2 [][l 2 append i for i in l if not i in l2 ]return l2
def merge file feature layers coord layers []for layer in feature layers layers append get feature layer layer['name'] layer['features'] data mapbox vector tile encode layers file write data
def keys match attribute def key match invariant pmap if pmap is None return True '' for key value in pmap items if key getattr value attribute return False '{}isnotcorrectkeyfor{}' format key value return True '' return key match invariant
def keys match attribute def key match invariant pmap if pmap is None return True '' for key value in pmap items if key getattr value attribute return False '{}isnotcorrectkeyfor{}' format key value return True '' return key match invariant
def camelcase to snakecase string to convert s1 re sub ' [A-Z][a-z]+ ' '\\ 1 \\ 2 ' string to convert return re sub ' [a-z 0 - 9 ] [A-Z] ' '\\ 1 \\ 2 ' s1 lower
def camelcase to snakecase string to convert s1 re sub ' [A-Z][a-z]+ ' '\\ 1 \\ 2 ' string to convert return re sub ' [a-z 0 - 9 ] [A-Z] ' '\\ 1 \\ 2 ' s1 lower
def Create User Secret user secret base 64 b32 encode os urandom SECRET BYTES secrets Put Secret Secret Name user secret Display User Secret user
def recursive set rng kwarg expr rng None if rng is None rng np random Random State lrng as apply rng for node in dfs expr if node name in implicit stochastic symbols for ii name arg in enumerate list node named args if name 'rng' node named args[ii] 'rng' lrng breakelse node named args append 'rng' lrng return expr
def recursive set rng kwarg expr rng None if rng is None rng np random Random State lrng as apply rng for node in dfs expr if node name in implicit stochastic symbols for ii name arg in enumerate list node named args if name 'rng' node named args[ii] 'rng' lrng breakelse node named args append 'rng' lrng return expr
def recursive set rng kwarg expr rng None if rng is None rng np random Random State lrng as apply rng for node in dfs expr if node name in implicit stochastic symbols for ii name arg in enumerate list node named args if name 'rng' node named args[ii] 'rng' lrng breakelse node named args append 'rng' lrng return expr
def get default support url request None force is admin False siteconfig Site Configuration objects get current if siteconfig get u'send support usage stats' support data serialize support data request force is admin else support data u''return settings DEFAULT SUPPORT URL % {u'support data' support data}
def extract files to lint file diffs if not file diffs return []lint files [f name for f in file diffs if f status upper in 'ACMRT' ]return lint files
def extract files to lint file diffs if not file diffs return []lint files [f name for f in file diffs if f status upper in 'ACMRT' ]return lint files
def expand tabs file 0 str file contents open file 0 'rb' read str pep contents str file contents replace ' DCTB ' 4 * '' open file 0 'wb' write str pep contents return None
def test hashed install failure script data tmpdir with requirements file 'simple 2 1 0--hash sha 256 9336 af 72 ca 661 e 6336 eb 87 bc 7 de 3 e 8844 d 853 e 3848 c 2 b 9 bbd 2 e 8 bf 01 db 88 c 2 c\n' tmpdir as reqs file result script pip install local '-r' reqs file abspath expect error True assert len result files created 0
def test hashed install failure script data tmpdir with requirements file 'simple 2 1 0--hash sha 256 9336 af 72 ca 661 e 6336 eb 87 bc 7 de 3 e 8844 d 853 e 3848 c 2 b 9 bbd 2 e 8 bf 01 db 88 c 2 c\n' tmpdir as reqs file result script pip install local '-r' reqs file abspath expect error True assert len result files created 0
def wait for scrub path http httplib 2 Http wait for 300 check every 15 for in xrange wait for / check every time sleep check every response content http request path 'HEAD' if response['x-image-meta-status'] 'deleted' and response['x-image-meta-deleted'] ' True' breakelse continueelse self fail 'imagewasneverscrubbed'
def wait for scrub path http httplib 2 Http wait for 300 check every 15 for in xrange wait for / check every time sleep check every response content http request path 'HEAD' if response['x-image-meta-status'] 'deleted' and response['x-image-meta-deleted'] ' True' breakelse continueelse self fail 'imagewasneverscrubbed'
def wait for scrub path http httplib 2 Http wait for 300 check every 15 for in xrange wait for / check every time sleep check every response content http request path 'HEAD' if response['x-image-meta-status'] 'deleted' and response['x-image-meta-deleted'] ' True' breakelse continueelse self fail 'imagewasneverscrubbed'
def synchronized func def caller *params **kparams lock acquire True try return func *params **kparams finally lock release return caller
def synchronized func def caller *params **kparams lock acquire True try return func *params **kparams finally lock release return caller
def get Functions With String By File Name file Name search String file Text archive get File Text file Name functions []lines archive get Text Lines file Text for line in lines line Stripped line strip if line Stripped startswith 'def' and search String in line Stripped if ' self ' not in line Stripped or line Stripped count ' ' > 1 functions append line Stripped[len 'def' ] strip functions sort return functions
@transaction non atomic requests@require POST@ensure csrf cookie@cache control no cache True no store True must revalidate True @require level 'staff' def problem grade report request course id course key Slash Separated Course Key from deprecated string course id try lms djangoapps instructor task api submit problem grade report request course key success status ' Theproblemgradereportisbeingcreated Toviewthestatusofthereport see Pending Tasksbelow ' return Json Response {'status' success status} except Already Running Error already running status ' Aproblemgradereportisalreadybeinggenerated Toviewthestatusofthereport see Pending Tasksbelow Youwillbeabletodownloadthereportwhenitiscomplete ' return Json Response {'status' already running status}
@transaction non atomic requests@require POST@ensure csrf cookie@cache control no cache True no store True must revalidate True @require level 'staff' def problem grade report request course id course key Slash Separated Course Key from deprecated string course id try lms djangoapps instructor task api submit problem grade report request course key success status ' Theproblemgradereportisbeingcreated Toviewthestatusofthereport see Pending Tasksbelow ' return Json Response {'status' success status} except Already Running Error already running status ' Aproblemgradereportisalreadybeinggenerated Toviewthestatusofthereport see Pending Tasksbelow Youwillbeabletodownloadthereportwhenitiscomplete ' return Json Response {'status' already running status}
def update cache slug cache slug get unique id with open 'cache slug yaml' 'r' as f content f read os remove 'cache slug yaml' content content replace 'default' cache slug with open 'cache slug yaml' 'w+' as d d write content
def enable api key api Key region None key None keyid None profile None try conn get conn region region key key keyid keyid profile profile response api key patch replace conn api Key '/enabled' ' True' return {'api Key' convert datetime str response }except Client Error as e return {'error' salt utils boto 3 get error e }
def from file f if sys hexversion > 33751040 str type basestringopts 'r U'else str type stropts 'r'if isinstance f str type f file f opts want close Trueelse want close Falsetry m from text f finally if want close f close return m
def setup platform hass config add devices discovery info None import steam as steamodsteamod api key set config get CONF API KEY add devices [ Steam Sensor account steamod for account in config get CONF ACCOUNTS ]
def get trash interval return get conf get CNF TRASH INTERVAL
def get trash interval return get conf get CNF TRASH INTERVAL
def partition estimators n estimators n jobs n jobs min get n jobs n jobs n estimators n estimators per job n estimators // n jobs * np ones n jobs dtype np int n estimators per job[ n estimators % n jobs ] + 1starts np cumsum n estimators per job return n jobs n estimators per job tolist [0 ] + starts tolist
def detect range line None if '[' in line return Trueelse return False
def is meta resource type mutable context meta resource type if context is admin return Trueif context owner is None return Falseif meta resource type namespace return meta resource type namespace owner context owner else return False
def resample to csv bar Feed frequency csv File assert frequency > 0 ' Invalidfrequency'resample impl bar Feed frequency csv File
def resample to csv bar Feed frequency csv File assert frequency > 0 ' Invalidfrequency'resample impl bar Feed frequency csv File
def istextfile fp blocksize 512 int 2 byte lambda x bytes x if six PY 3 else chr text characters '' join int 2 byte i for i in range 32 127 + '\n\r DCTB \x 0 c\x 08 ' try block fp read blocksize except Attribute Error try with fopen fp 'rb' as fp 2 block fp 2 read blocksize except IO Error return Falseif '\x 00 ' in block return Falseelif not block return Truetry block decode 'utf- 8 ' return Trueexcept Unicode Decode Error passnontext block translate None text characters return float len nontext / len block < 0 3
def istextfile fp blocksize 512 int 2 byte lambda x bytes x if six PY 3 else chr text characters '' join int 2 byte i for i in range 32 127 + '\n\r DCTB \x 0 c\x 08 ' try block fp read blocksize except Attribute Error try with fopen fp 'rb' as fp 2 block fp 2 read blocksize except IO Error return Falseif '\x 00 ' in block return Falseelif not block return Truetry block decode 'utf- 8 ' return Trueexcept Unicode Decode Error passnontext block translate None text characters return float len nontext / len block < 0 3
def get issues list project auth False **params params setdefault 'state' 'closed' url 'https //api github com/repos/{project}/issues' format project project if auth headers make auth header else headers Nonepages get paged request url headers headers **params return pages
def animal pre save check signal sender instance **kwargs pre save checks append ' Count %s %s ' % instance count type instance count ' Weight %s %s ' % instance weight type instance weight
def animal pre save check signal sender instance **kwargs pre save checks append ' Count %s %s ' % instance count type instance count ' Weight %s %s ' % instance weight type instance weight
def Skip Varint buffer pos end while ord buffer[pos] & 128 pos + 1pos + 1if pos > end raise Decode Error ' Truncatedmessage ' return pos
def get voted user or id model obj type apps get model 'contenttypes' ' Content Type' objects get for model model conditions 'votes vote content type id %s' '%s id votes vote object id' % model meta db table 'votes vote user id %s' if isinstance user or id get user model user id user or id idelse user id user or idreturn model objects extra where conditions tables 'votes vote' params obj type id user id
def script names dist script name is gui if dist in usersite dist bin dir bin userelse bin dir bin pyexe name os path join bin dir script name paths to remove [exe name]if WINDOWS paths to remove append exe name + ' exe' paths to remove append exe name + ' exe manifest' if is gui paths to remove append exe name + '-script pyw' else paths to remove append exe name + '-script py' return paths to remove
def get ha 1 dict plain user password dict def get ha 1 realm username password user password dict get username if password return md 5 hex '%s %s %s' % username realm password return Nonereturn get ha 1
def config read reseller options conf defaults reseller prefix opt conf get 'reseller prefix' 'AUTH' split ' ' reseller prefixes []for prefix in [pre strip for pre in reseller prefix opt if pre strip ] if prefix "''" prefix ''prefix append underscore prefix if prefix not in reseller prefixes reseller prefixes append prefix if len reseller prefixes 0 reseller prefixes append '' associated options {}for prefix in reseller prefixes associated options[prefix] dict defaults associated options[prefix] update config read prefixed options conf '' defaults prefix name prefix if prefix '' else "''" associated options[prefix] update config read prefixed options conf prefix name defaults return reseller prefixes associated options
def plot Histogram freq Counts title ' On- Times Histogram' x Label ' On- Time' import pylabpylab ion pylab figure pylab bar numpy arange len freq Counts - 0 5 freq Counts pylab title title pylab xlabel x Label
def plot Histogram freq Counts title ' On- Times Histogram' x Label ' On- Time' import pylabpylab ion pylab figure pylab bar numpy arange len freq Counts - 0 5 freq Counts pylab title title pylab xlabel x Label
def plot Histogram freq Counts title ' On- Times Histogram' x Label ' On- Time' import pylabpylab ion pylab figure pylab bar numpy arange len freq Counts - 0 5 freq Counts pylab title title pylab xlabel x Label
def collect command host command dest path logging info " Collecting'%s' " command devnull open '/dev/null' 'w' try result host run command stdout tee devnull stdoututils open write close dest path result except Exception as e logging warning " Collectionof'%s'failed \n%s" command e finally devnull close
def make null event date events all sids timestamp return pd Data Frame {'sid' all sids 'timestamp' timestamp 'event date' pd Timestamp ' Na T' 'float' -9999 0 'int' -9999 'datetime' pd Timestamp '1980 ' 'string' 'shouldbeignored'}
def get expr params operator if operator type lo PARAM return operator data parameters else params []for arg in operator args params + get expr params arg if isinstance operator data lo Lin Op params + get expr params operator data return params
@decorators memoizedef get version xpath check xbps version string salt ['cmd run'] '{ 0 }--version' format xpath output loglevel 'trace' if version string is None return False VERSION MATCH re compile ' ? XBPS [\\s]+ [\\d ]+ ? [\\s]+ * ' version match VERSION MATCH search version string if not version match return Falsereturn version match group 1 split ' '
def Build Campaign Criterion Operations campaign operations criterion operations [{'xsi type' ' Campaign Criterion Operation' 'operand' {'xsi type' ' Negative Campaign Criterion' 'campaign Id' campaign operation['operand']['id'] 'criterion' {'xsi type' ' Keyword' 'match Type' 'BROAD' 'text' 'venus'}} 'operator' 'ADD'} for campaign operation in campaign operations]return criterion operations
def open logfile filename mode 'a' filename os path expanduser filename filename os path abspath filename dirname os path dirname filename if not os path exists dirname os makedirs dirname exists os path exists filename log fp open filename mode if exists log fp write '%s\n' % '-' * 60 log fp write '%srunon%s\n' % sys argv[ 0 ] time strftime '%c' return log fp
def open logfile filename mode 'a' filename os path expanduser filename filename os path abspath filename dirname os path dirname filename if not os path exists dirname os makedirs dirname exists os path exists filename log fp open filename mode if exists log fp write '%s\n' % '-' * 60 log fp write '%srunon%s\n' % sys argv[ 0 ] time strftime '%c' return log fp
def expand node node ret {}ret update node dict try del ret['extra']['boot disk']except Exception passzone ret['extra']['zone']ret['extra']['zone'] {}ret['extra']['zone'] update zone dict return ret
def validate cls instance or dict trusted data None partial False strict False convert True context None **kwargs context context or get validation context partial partial strict strict convert convert errors {}try data import loop cls instance or dict trusted data trusted data context context **kwargs except Data Error as exc errors exc messagesdata exc partial dataerrors update validate model cls data context if errors raise Data Error errors data return data
def validate cls instance or dict trusted data None partial False strict False convert True context None **kwargs context context or get validation context partial partial strict strict convert convert errors {}try data import loop cls instance or dict trusted data trusted data context context **kwargs except Data Error as exc errors exc messagesdata exc partial dataerrors update validate model cls data context if errors raise Data Error errors data return data
def translate x y rv eye 3 rv[ 2 0 ] xrv[ 2 1 ] yreturn rv
def translate x y rv eye 3 rv[ 2 0 ] xrv[ 2 1 ] yreturn rv
@dec onlyif has pywin 32 ' Thistestrequireswin 32 apitorun' def test find cmd pythonw path find cmd 'pythonw' assert path lower endswith 'pythonw exe' path
def make simple equity info sids start date end date symbols None num assets len sids if symbols is None symbols list ascii uppercase[ num assets] return pd Data Frame {'symbol' list symbols 'start date' pd to datetime [start date] * num assets 'end date' pd to datetime [end date] * num assets 'exchange' 'TEST' 'exchange full' 'TESTFULL'} index sids columns 'start date' 'end date' 'symbol' 'exchange' 'exchange full'
def make simple equity info sids start date end date symbols None num assets len sids if symbols is None symbols list ascii uppercase[ num assets] return pd Data Frame {'symbol' list symbols 'start date' pd to datetime [start date] * num assets 'end date' pd to datetime [end date] * num assets 'exchange' 'TEST' 'exchange full' 'TESTFULL'} index sids columns 'start date' 'end date' 'symbol' 'exchange' 'exchange full'
def make simple equity info sids start date end date symbols None num assets len sids if symbols is None symbols list ascii uppercase[ num assets] return pd Data Frame {'symbol' list symbols 'start date' pd to datetime [start date] * num assets 'end date' pd to datetime [end date] * num assets 'exchange' 'TEST' 'exchange full' 'TESTFULL'} index sids columns 'start date' 'end date' 'symbol' 'exchange' 'exchange full'
def get non generated file lines lines to copy []flag found Falsewith open ' /plotly/graph objs/graph objs py' 'r' as f for line to copy in f if line to copy startswith FLAG flag found Truebreaklines to copy append line to copy if not flag found raise Value Error ' Failedtofindflag \n"{}"\ningraph objs tools py ' format FLAG return lines to copy
def get non generated file lines lines to copy []flag found Falsewith open ' /plotly/graph objs/graph objs py' 'r' as f for line to copy in f if line to copy startswith FLAG flag found Truebreaklines to copy append line to copy if not flag found raise Value Error ' Failedtofindflag \n"{}"\ningraph objs tools py ' format FLAG return lines to copy
def force implementation modname global implementationfor name spec in [ e[ 0 ] e for e in modules] if name modname implementation Json Implementation spec returnraise Import Error ' Nomodulenamed %s' % modname
def force implementation modname global implementationfor name spec in [ e[ 0 ] e for e in modules] if name modname implementation Json Implementation spec returnraise Import Error ' Nomodulenamed %s' % modname
def create api model rest Api Id model Name model Description schema content Type 'application/json' region None key None keyid None profile None try schema json json dumps schema if isinstance schema dict else schema conn get conn region region key key keyid keyid profile profile model conn create model rest Api Id rest Api Id name model Name description model Description schema schema json content Type content Type return {'created' True 'model' convert datetime str model }except Client Error as e return {'created' False 'error' salt utils boto 3 get error e }
def create api model rest Api Id model Name model Description schema content Type 'application/json' region None key None keyid None profile None try schema json json dumps schema if isinstance schema dict else schema conn get conn region region key key keyid keyid profile profile model conn create model rest Api Id rest Api Id name model Name description model Description schema schema json content Type content Type return {'created' True 'model' convert datetime str model }except Client Error as e return {'created' False 'error' salt utils boto 3 get error e }
def create api model rest Api Id model Name model Description schema content Type 'application/json' region None key None keyid None profile None try schema json json dumps schema if isinstance schema dict else schema conn get conn region region key key keyid keyid profile profile model conn create model rest Api Id rest Api Id name model Name description model Description schema schema json content Type content Type return {'created' True 'model' convert datetime str model }except Client Error as e return {'created' False 'error' salt utils boto 3 get error e }
def get block types from json file xblock json file if not os path isfile xblock json file print 'x Blockconfigurationfiledoesnotexist %s' % xblock json file sys exit 2 with open xblock json file 'r' as json file type set set try json data json loads json file read except Value Error as e print 'x Blockconfigurationfiledoesnotmatchtheexpectedlayoutandismissing"data"list %s' % xblock json file sys exit e message if 'data' in json data xblock type list json data['data']for xblock in xblock type list type set add xblock['name'] return type setelse print 'x Blockconfigurationfiledoesnotmatchtheexpectedlayoutandismissing"data"list %s' % xblock json file sys exit 2
def get public task data request task id try task state info get task data task id except Task Not Found raise Task No Permission task id if not hasattr task 'check permission' raise Task No Permission task id context info get 'context' {} if not task check permission request state context raise Task No Permission task id public name task public namereturn public name state info get 'public data' {} info get 'error' None
def get public task data request task id try task state info get task data task id except Task Not Found raise Task No Permission task id if not hasattr task 'check permission' raise Task No Permission task id context info get 'context' {} if not task check permission request state context raise Task No Permission task id public name task public namereturn public name state info get 'public data' {} info get 'error' None
def get public task data request task id try task state info get task data task id except Task Not Found raise Task No Permission task id if not hasattr task 'check permission' raise Task No Permission task id context info get 'context' {} if not task check permission request state context raise Task No Permission task id public name task public namereturn public name state info get 'public data' {} info get 'error' None
def is running from reloader return os environ get 'WERKZEUG RUN MAIN' 'true'
def can browse repository reviews app user repository if user for review in repository reviews for component review in review component reviews if app security agent user can browse component review app repository component review user return Truereturn False
def can browse repository reviews app user repository if user for review in repository reviews for component review in review component reviews if app security agent user can browse component review app repository component review user return Truereturn False
def remove arg args arg has param False for idx found arg in enumerate args if found arg arg if has param slice idx idx + 2 else slice idx idx + 1 args args[ idx] + args[slice idx ] breakreturn args
def count from 1 index collection return index + 1
def create tip index tree if hasattr tree ' tip index' returnelse tree tip index {n Name n for n in tree tips }
def generate gjrgarch nobs ar ma mu 1 0 scale 0 1 varinnovation None if varinnovation is None eta scale * np random randn nobs else eta varinnovationetax np empty nobs 3 etax[ 0] muetax[ 1 ] eta ** 2 [ None]etax[ eta > 0 2 ] 0h miso lfilter ar ma etax [0 ]err np sqrt h[ len eta ] * eta return err h etax
def generate gjrgarch nobs ar ma mu 1 0 scale 0 1 varinnovation None if varinnovation is None eta scale * np random randn nobs else eta varinnovationetax np empty nobs 3 etax[ 0] muetax[ 1 ] eta ** 2 [ None]etax[ eta > 0 2 ] 0h miso lfilter ar ma etax [0 ]err np sqrt h[ len eta ] * eta return err h etax
def train student dataset nb teachers assert input create dir if needed FLAGS train dir stdnt dataset prepare student data dataset nb teachers save True stdnt data stdnt labels stdnt test data stdnt test labels stdnt datasetif FLAGS deeper ckpt path FLAGS train dir + '/' + str dataset + ' ' + str nb teachers + ' student deeper ckpt' else ckpt path FLAGS train dir + '/' + str dataset + ' ' + str nb teachers + ' student ckpt' assert deep cnn train stdnt data stdnt labels ckpt path ckpt path final ckpt path + '-' + str FLAGS max steps - 1 student preds deep cnn softmax preds stdnt test data ckpt path final precision metrics accuracy student preds stdnt test labels print ' Precisionofstudentaftertraining ' + str precision return True
def train student dataset nb teachers assert input create dir if needed FLAGS train dir stdnt dataset prepare student data dataset nb teachers save True stdnt data stdnt labels stdnt test data stdnt test labels stdnt datasetif FLAGS deeper ckpt path FLAGS train dir + '/' + str dataset + ' ' + str nb teachers + ' student deeper ckpt' else ckpt path FLAGS train dir + '/' + str dataset + ' ' + str nb teachers + ' student ckpt' assert deep cnn train stdnt data stdnt labels ckpt path ckpt path final ckpt path + '-' + str FLAGS max steps - 1 student preds deep cnn softmax preds stdnt test data ckpt path final precision metrics accuracy student preds stdnt test labels print ' Precisionofstudentaftertraining ' + str precision return True
def Validate Actions In Target target target dict build file target name target dict get 'target name' actions target dict get 'actions' [] for action in actions action name action get 'action name' if not action name raise Gyp Error " Anonymousactionintarget%s Anactionmusthavean'action name'field " % target name inputs action get 'inputs' None if inputs is None raise Gyp Error ' Actionintarget%shasnoinputs ' % target name action command action get 'action' if action command and not action command[ 0 ] raise Gyp Error ' Emptyactionascommandintarget%s ' % target name
def sort sample ids by mapping value mapping file field field type f float data headers comments parse mapping file mapping file try column headers index field except Value Error raise Value Error ' Column %s notfoundinmappingfileheaders \n%s' % field '' join headers results [ e[ 0 ] field type f e[column] for e in data]results sort key itemgetter 1 return results
@task@timeitdef add short links doc ids base url 'https //{ 0 }%s' format Site objects get current domain docs Document objects filter id in doc ids try pin this thread for doc in docs endpoint django reverse 'wiki document' args [doc slug] doc update share link generate short url base url % endpoint statsd incr 'wiki add short links success' except Bitly Rate Limit Exception statsd incr 'wiki add short links rate limited' passfinally unpin this thread
def test nested iteration t table Table [[ 0 1]] names ['a'] out []for r1 in t for r2 in t out append r1 ['a'] r2 ['a'] assert out [ 0 0 0 1 1 0 1 1 ]
def test nested iteration t table Table [[ 0 1]] names ['a'] out []for r1 in t for r2 in t out append r1 ['a'] r2 ['a'] assert out [ 0 0 0 1 1 0 1 1 ]
def absent name user None maintenance db None db password None db host None db port None db user None ret {'name' name 'changes' {} 'result' True 'comment' ''}db args {'maintenance db' maintenance db 'runas' user 'host' db host 'user' db user 'port' db port 'password' db password}if salt ['postgres user exists'] name **db args if opts ['test'] ret['result'] Noneret['comment'] ' Group{ 0 }issettoberemoved' format name return retif salt ['postgres group remove'] name **db args ret['comment'] ' Group{ 0 }hasbeenremoved' format name ret['changes'][name] ' Absent'return retelse ret['comment'] ' Group{ 0 }isnotpresent soitcannotberemoved' format name return ret
def absent name user None maintenance db None db password None db host None db port None db user None ret {'name' name 'changes' {} 'result' True 'comment' ''}db args {'maintenance db' maintenance db 'runas' user 'host' db host 'user' db user 'port' db port 'password' db password}if salt ['postgres user exists'] name **db args if opts ['test'] ret['result'] Noneret['comment'] ' Group{ 0 }issettoberemoved' format name return retif salt ['postgres group remove'] name **db args ret['comment'] ' Group{ 0 }hasbeenremoved' format name ret['changes'][name] ' Absent'return retelse ret['comment'] ' Group{ 0 }isnotpresent soitcannotberemoved' format name return ret
def allocate pixels buffer width height return c uint * width * height * 4
def allocate pixels buffer width height return c uint * width * height * 4
def detail device '/dev/md 0 ' ret {}ret['members'] {}if not os path exists device msg " Device{ 0 }doesn'texist "raise Command Execution Error msg format device cmd ['mdadm' '--detail' device]for line in salt ['cmd run stdout'] cmd python shell False splitlines if line startswith device continueif '' not in line continueif ' ' not in line if '/dev/' in line comps line split state comps[ 4 -1 ]ret['members'][comps[ 0 ]] {'device' comps[ -1 ] 'major' comps[ 1 ] 'minor' comps[ 2 ] 'number' comps[ 0 ] 'raiddevice' comps[ 3 ] 'state' '' join state }continuecomps line split ' ' comps[ 0 ] comps[ 0 ] lower comps[ 0 ] comps[ 0 ] strip comps[ 0 ] comps[ 0 ] replace '' ' ' ret[comps[ 0 ]] comps[ 1 ] strip return ret
def nova to osvif subnet subnet dnsaddrs [ip['address'] for ip in subnet['dns']]obj objects subnet Subnet dns dnsaddrs ips nova to osvif ips subnet['ips'] routes nova to osvif routes subnet['routes'] if subnet['cidr'] is not None obj cidr subnet['cidr']if subnet['gateway'] is not None and subnet['gateway']['address'] is not None obj gateway subnet['gateway']['address']return obj
def tuple eval source node ast parse source '<source>' mode 'eval' if not isinstance node body ast Tuple raise Value Error '%risnotatupleliteral' % source if not all isinstance el ast Str ast Num or isinstance el ast Unary Op and isinstance el op ast U Add ast U Sub and isinstance el operand ast Num for el in node body elts raise Value Error ' Canonlycontainnumbersorstrings' return literal eval source
def tuple eval source node ast parse source '<source>' mode 'eval' if not isinstance node body ast Tuple raise Value Error '%risnotatupleliteral' % source if not all isinstance el ast Str ast Num or isinstance el ast Unary Op and isinstance el op ast U Add ast U Sub and isinstance el operand ast Num for el in node body elts raise Value Error ' Canonlycontainnumbersorstrings' return literal eval source
def get meta entry dist name meta get dist meta dist return meta get name
def fix encoding ret Trueif sys platform 'win 32 ' ret & fix win codec ret & fix default encoding if sys platform 'win 32 ' encoding sys getdefaultencoding ret & fix win sys argv encoding ret & fix win console encoding return ret
def leaves tree branches attrgetter 'branches' return node for node in postorder tree branches if node is leaf
def leaves tree branches attrgetter 'branches' return node for node in postorder tree branches if node is leaf
def disabled name ret {'name' name 'result' True 'comment' '' 'changes' {}}is enabled salt ['apache check site enabled'] name if is enabled if opts ['test'] msg ' Apachesite{ 0 }issettobedisabled ' format name ret['comment'] msgret['changes']['old'] nameret['changes']['new'] Noneret['result'] Nonereturn retstatus salt ['apache a2 dissite'] name [' Status']if isinstance status string types and 'disabled' in status ret['result'] Trueret['changes']['old'] nameret['changes']['new'] Noneelse ret['result'] Falseret['comment'] ' Failedtodisable{ 0 } Apachesite' format name if isinstance status string types ret['comment'] ret['comment'] + ' {0 } ' format status return retelse ret['comment'] '{ 0 }alreadydisabled ' format name return ret
def add server protocol None service address None server address None packet forward method 'dr' weight 1 **kwargs cmd '{ 0 }-a{ 1 }' format detect os build cmd protocol protocol service address service address server address server address packet forward method packet forward method weight weight **kwargs out salt ['cmd run all'] cmd python shell False if out['retcode'] ret out['stderr'] strip else ret Truereturn ret
def get codon alphabet alphabet gap '-' stop '*' from Bio Alphabet import Nucleotide Alphabetif isinstance alphabet Nucleotide Alphabet alpha alphabetif gap alpha Gapped alpha gap char gap if stop alpha Has Stop Codon alpha stop symbol stop else raise Type Error ' Only Nuclteotide Alphabetisaccepted ' return alpha
def get ancestors x collection None if collection is None collection random variables node dict {node value node for node in collection}output set [] nodes set [x] while nodes node nodes pop if isinstance node Random Variable node node value candidate node node dict get node None if candidate node and candidate node x output add candidate node nodes update node op inputs return list output
def lookup Nameservers name timeout None return get Resolver lookup Nameservers name timeout
def test idempotent dirty u'<span>invalid&</span><extrahttp //link com<em>'clean bleach clean dirty eq clean bleach clean clean linked bleach linkify dirty eq linked bleach linkify linked
def test idempotent dirty u'<span>invalid&</span><extrahttp //link com<em>'clean bleach clean dirty eq clean bleach clean clean linked bleach linkify dirty eq linked bleach linkify linked
def test idempotent dirty u'<span>invalid&</span><extrahttp //link com<em>'clean bleach clean dirty eq clean bleach clean clean linked bleach linkify dirty eq linked bleach linkify linked
def test idempotent dirty u'<span>invalid&</span><extrahttp //link com<em>'clean bleach clean dirty eq clean bleach clean clean linked bleach linkify dirty eq linked bleach linkify linked
def emit via redis event message room r get redis server try r publish u'events' frappe as json {u'event' event u'message' message u'room' room} except redis exceptions Connection Error pass
def mc 2 mnc mc n len mc mean mc[ 0 ]mc [1 ] + list mc mc[ 1 ] 0mnc [1 mean]for nn m in enumerate mc[ 2 ] n nn + 2 mnc append 0 for k in range n + 1 mnc[n] + comb n k exact 1 * mc[k] * mean ** n - k return mnc[ 1 ]
def mc 2 mnc mc n len mc mean mc[ 0 ]mc [1 ] + list mc mc[ 1 ] 0mnc [1 mean]for nn m in enumerate mc[ 2 ] n nn + 2 mnc append 0 for k in range n + 1 mnc[n] + comb n k exact 1 * mc[k] * mean ** n - k return mnc[ 1 ]
def device writer queue while True device value queue get scaled rescale value value[ 0 ] log debug ' Write %s %s' % device value if not device continue
def device writer queue while True device value queue get scaled rescale value value[ 0 ] log debug ' Write %s %s' % device value if not device continue
def device writer queue while True device value queue get scaled rescale value value[ 0 ] log debug ' Write %s %s' % device value if not device continue
def device writer queue while True device value queue get scaled rescale value value[ 0 ] log debug ' Write %s %s' % device value if not device continue
def uuid bin to str uuid block 1 block 2 block 3 struct unpack '<LHH' uuid[ 8] block 4 block 5 block 6 struct unpack '>HHL' uuid[ 8 16 ] return '% 08 x-% 04 x-% 04 x-% 04 x-% 04 x% 08 x' % block 1 block 2 block 3 block 4 block 5 block 6
def build locale table filename or file from xml dom minidom import parsedom parse filename or file reps dom get Elements By Tag Name 'representation' locs map lambda r r child Nodes[ 0 ] data reps locale map {}for loc in locs lang reg loc partition ' ' lang map locale map setdefault lang {'regs' [] 'default' reg} lang map['regs'] append reg locale map['en']['default'] 'US'locale map['es']['default'] 'LA'locale map['zh']['default'] 'CN'locale map['fr']['default'] 'FR'locale map['pt']['default'] 'PT'return locale map
def setup pid file config odoo tools configif not odoo evented and config['pidfile'] pid os getpid with open config['pidfile'] 'w' as fd fd write str pid atexit register rm pid file pid
def trial division n prime factors []if n < 2 return prime factorsfor p in eratosthenes int n ** 0 5 + 1 if p * p > n breakwhile n % p 0 prime factors append p n // pif n > 1 prime factors append n return prime factors
def trial division n prime factors []if n < 2 return prime factorsfor p in eratosthenes int n ** 0 5 + 1 if p * p > n breakwhile n % p 0 prime factors append p n // pif n > 1 prime factors append n return prime factors
def apply Filter data b a padding 100 bidir True try import scipy signalexcept Import Error raise Exception 'apply Filter requiresthepackagescipy signal ' d1 data view np ndarray if padding > 0 d1 np hstack [d 1 [ padding] d1 d1 [ - padding ]] if bidir d1 scipy signal lfilter b a scipy signal lfilter b a d1 [ -1 ] [ -1 ]else d1 scipy signal lfilter b a d1 if padding > 0 d1 d1 [padding - padding ]if hasattr data 'implements' and data implements ' Meta Array' return Meta Array d1 info data info Copy else return d1
def print Decoder Briefs decoders printfor d in decoders values print ' Modulename ' d nameprint ' ' * 20 if d longdescription print d longdescriptionelse print d descriptionprint ' Defaultfilter %s' % d filter return
def accepts request media type accept parse accept header request META get 'HTTP ACCEPT' '' return media type in [t for t p q in accept]
@db api retry if session inactive def remove provisioning component context object id object type entity standard attr id None with context session begin subtransactions True standard attr id standard attr id or get standard attr id context object id object type if not standard attr id return Falserecord context session query pb model Provisioning Block filter by standard attr id standard attr id entity entity first if record context session delete record return Truereturn False
def get error statistics return get statistics 'E'
def create folder folder Name add init file True if os path exists folder Name raise Ninja IO Exception u' Thefolderalreadyexist' os makedirs folder Name if add init file create init file folder Name
@core helperdef get pkg dict extra pkg dict key default None extras pkg dict['extras'] if 'extras' in pkg dict else [] for extra in extras if extra['key'] key return extra['value']return default
def get conn host None username None password None if not HAS IMPACKET return Falseconn impacket smbconnection SMB Connection remote Name '*SMBSERVER' remote Host host conn login user username password password return conn
def expand sig sig if isinstance sig tuple if len sig 3 num pos only func keyword only sigassert isinstance sig[ -1 ] tuple else num pos only func sigkeyword only sigspec signature or spec func else func sigsigspec signature or spec func num pos only num pos args sigspec keyword only keyword exclude get exclude keywords num pos only sigspec return num pos only func keyword only + keyword exclude sigspec
def expand sig sig if isinstance sig tuple if len sig 3 num pos only func keyword only sigassert isinstance sig[ -1 ] tuple else num pos only func sigkeyword only sigspec signature or spec func else func sigsigspec signature or spec func num pos only num pos args sigspec keyword only keyword exclude get exclude keywords num pos only sigspec return num pos only func keyword only + keyword exclude sigspec
def page title breadcrumbs *crumbs **kwargs platform name get value 'platform name' settings PLATFORM NAME separator kwargs get 'separator' ' ' crumbs [c for c in crumbs if c is not None ]if crumbs return u'{}{}{}' format separator join crumbs separator platform name else return platform name
def page title breadcrumbs *crumbs **kwargs platform name get value 'platform name' settings PLATFORM NAME separator kwargs get 'separator' ' ' crumbs [c for c in crumbs if c is not None ]if crumbs return u'{}{}{}' format separator join crumbs separator platform name else return platform name
def parse repo file filename repos {}header ''repo ''with salt utils fopen filename 'r' as rfile for line in rfile if line startswith '[' repo line strip replace '[' '' replace ']' '' repos[repo] {}if not line if not repo header + lineif line startswith '#' if not repo header + lineelse if 'comments' not in repos[repo] repos[repo]['comments'] []repos[repo]['comments'] append line strip continueif ' ' in line try comps line strip split ' ' repos[repo][comps[ 0 ] strip ] ' ' join comps[ 1 ] except Key Error log error " Failedtoparselinein%s offendinglinewas'%s'" filename line rstrip if comps[ 0 ] strip 'enabled' repos[repo]['disabled'] comps[ 1 ] '1 ' return header repos
def welcome osf 4 m email from website files models import Osf Storage File Nodeif email user date last login if email user date last login > timezone now - settings WELCOME OSF 4 M WAIT TIME GRACE return Falseupload Osf Storage File Node load email data['fid'] if upload email data['downloads'] upload get download count else email data['downloads'] 0email save return True
def welcome osf 4 m email from website files models import Osf Storage File Nodeif email user date last login if email user date last login > timezone now - settings WELCOME OSF 4 M WAIT TIME GRACE return Falseupload Osf Storage File Node load email data['fid'] if upload email data['downloads'] upload get download count else email data['downloads'] 0email save return True
def is prereg admin user if user is not None return PREREG ADMIN TAG in getattr user 'system tags' [] return False
def get cython version import Cython Compiler Mainmatch re search '^ [0 - 9 ]+ \\ [0 - 9 ]+ ' Cython Compiler Main Version version try return map int match groups except Attribute Error raise Import Error
def get cython version import Cython Compiler Mainmatch re search '^ [0 - 9 ]+ \\ [0 - 9 ]+ ' Cython Compiler Main Version version try return map int match groups except Attribute Error raise Import Error
def user addmedia userids active mediatypeid period sendto severity **connection args conn args login **connection args try if conn args method 'user addmedia'params {'users' []}if not isinstance userids list userids [userids]for user in userids params['users'] append {'userid' user} params['medias'] [{'active' active 'mediatypeid' mediatypeid 'period' period 'sendto' sendto 'severity' severity}]ret query method params conn args['url'] conn args['auth'] return ret['result']['mediaids']else raise Key Errorexcept Key Error return ret
def get default domain request get name True domain id request session get 'domain context' None domain name request session get 'domain context name' None if VERSIONS active > 3 and domain id is None domain id request user user domain iddomain name request user user domain nameif get name and not request user is federated try domain domain get request domain id domain name domain nameexcept exceptions Not Authorized LOG debug ' Cannotretrievedomaininformationforuser %s thatdoesnothaveanadminroleonproject %s ' % request user username request user project name except Exception LOG warning ' Unabletoretrieve Domain %s' % domain id domain base API Dict Wrapper {'id' domain id 'name' domain name} return domain
def run executor sql join False expanded False pgspecial None exception formatter None results executor run sql pgspecial exception formatter formatted []for title rows headers status sql success in results formatted extend format output title rows headers status 'psql' dcmlfmt 'd' floatfmt 'g' expanded expanded if join formatted '\n' join formatted return formatted
def list custom images call None if call 'function' raise Salt Cloud System Exit ' Thelist vlansfunctionmustbecalledwith-for--function ' ret {}conn get conn ' Soft Layer Account' response conn get Block Device Template Groups for image in response if 'global Identifier' not in image continueret[image['name']] {'id' image['id'] 'name' image['name'] 'global Identifier' image['global Identifier']}if 'note' in image ret[image['name']]['note'] image['note']return ret
def locate Nodes node List key value no Nesting 1 return List []if not isinstance node List type [] return locate Nodes node List child Nodes key value no Nesting for child Node in node List if not hasattr child Node 'get Attribute' continueif str child Node get Attribute key value return List append child Node if no Nesting continuereturn List extend locate Nodes child Node key value no Nesting return return List
def locate Nodes node List key value no Nesting 1 return List []if not isinstance node List type [] return locate Nodes node List child Nodes key value no Nesting for child Node in node List if not hasattr child Node 'get Attribute' continueif str child Node get Attribute key value return List append child Node if no Nesting continuereturn List extend locate Nodes child Node key value no Nesting return return List
def fit eval rd B B2 fwd svd None fwd data None whitener None if fwd svd is None fwd dipole forwards fwd data whitener rd[np newaxis ] [0 ] uu sing vv linalg svd fwd overwrite a True full matrices False else uu sing vv fwd svdgof dipole gof uu sing vv B B2 [0 ]return 1 0 - gof
def cosh x np import module 'numpy' if isinstance x int float return interval np cosh x np cosh x elif isinstance x interval if x start < 0 and x end > 0 end max np cosh x start np cosh x end return interval 1 end is valid x is valid else start np cosh x start end np cosh x end return interval start end is valid x is valid else raise Not Implemented Error
def start standalone config args logger info ' Startstandalonemode' global standalonefrom glances standalone import Glances Standalonestandalone Glances Standalone config config args args standalone serve forever
def find nodes with matching text page xpath regex xpath matches page xpath xpath results []for xp in xpath matches if re search regex xp text content results append xp return results
def create filters model filters from dict partial from dictionary model filters map from dict filters return map methodcaller 'to expression' filters
def rotate axes xs ys zs zdir if zdir u'x' return ys zs xs elif zdir u'-x' return zs xs ys elif zdir u'y' return zs xs ys elif zdir u'-y' return ys zs xs else return xs ys zs
def add service port service port if service not in get services permanent True raise Command Execution Error ' Theservicedoesnotexist ' cmd '--permanent--service {0 }--add-port {1 }' format service port return firewall cmd cmd
def libvlc get fullscreen p mi f Cfunctions get 'libvlc get fullscreen' None or Cfunction 'libvlc get fullscreen' 1 None ctypes c int Media Player return f p mi
def test close process when exception exc Exception 'boom' with pytest raises Exception as e with pipeline get cat pipeline pipeline PIPE pipeline PIPE as pl assert len pl commands 1 assert pl commands[ 0 ] process poll is None raise excassert e value is exc pipeline wait pl
def clear memo if available cupy clear memo
def prepare rows as nested dicts query nested dict column names all dicts []for row in query select related row dict row get object dict for column in nested dict column names if row dict[column] is not None row dict[column] getattr row column get object dict all dicts append row dict return prepare for serialization all dicts
def tessellate sphere surf level rad 1 0 rr tris tessellate sphere level npt len rr ntri len tris nn rr copy rr * rads dict rr rr np npt tris tris use tris tris ntri ntri nuse np nn nn inuse np ones npt int return s
def project info result project path str result project project slug os path split project path [ -1 ]project dir os path join project path project slug return project path project slug project dir
def shor N a random randrange N - 2 + 2 if igcd N a 1 print 'gotluckywithrand' return igcd N a print 'a ' a print 'N ' N r period find a N print 'r ' r if r % 2 1 print 'risnoteven beginagain' shor N answer igcd a ** r / 2 - 1 N igcd a ** r / 2 + 1 N return answer
def shor N a random randrange N - 2 + 2 if igcd N a 1 print 'gotluckywithrand' return igcd N a print 'a ' a print 'N ' N r period find a N print 'r ' r if r % 2 1 print 'risnoteven beginagain' shor N answer igcd a ** r / 2 - 1 N igcd a ** r / 2 + 1 N return answer
def shor N a random randrange N - 2 + 2 if igcd N a 1 print 'gotluckywithrand' return igcd N a print 'a ' a print 'N ' N r period find a N print 'r ' r if r % 2 1 print 'risnoteven beginagain' shor N answer igcd a ** r / 2 - 1 N igcd a ** r / 2 + 1 N return answer
def shor N a random randrange N - 2 + 2 if igcd N a 1 print 'gotluckywithrand' return igcd N a print 'a ' a print 'N ' N r period find a N print 'r ' r if r % 2 1 print 'risnoteven beginagain' shor N answer igcd a ** r / 2 - 1 N igcd a ** r / 2 + 1 N return answer
def caller name skip 2 stack inspect stack start 0 + skip if len stack < start + 1 return ''parentframe stack[start][ 0 ]name []module inspect getmodule parentframe if module name append module name if 'self' in parentframe f locals name append parentframe f locals['self'] class name codename parentframe f code co nameif codename '<module>' name append codename del parentframereturn ' ' join name
def get user partition groups course key user partitions user partition groups {}for partition in user partitions group partition scheme get group for user course key user partition if group is not None partition groups[partition id] groupreturn partition groups
def filesystem absent name force False recursive False return absent name 'filesystem' force recursive
def xor input key output '' join [chr ord c ^ key for c in input] return output
@require contextdef volume get query context session None project only False joined load True if not joined load return model query context models Volume session session project only project only if is admin context context return model query context models Volume session session project only project only options joinedload 'volume metadata' options joinedload 'volume admin metadata' options joinedload 'volume type' options joinedload 'volume attachment' options joinedload 'consistencygroup' options joinedload 'group' else return model query context models Volume session session project only project only options joinedload 'volume metadata' options joinedload 'volume type' options joinedload 'volume attachment' options joinedload 'consistencygroup' options joinedload 'group'
def backwards apps schema editor certificate html view configuration model apps get model u'certificates' u' Certificate Html View Configuration' certificate html view configuration model objects all delete
def test correctness model MLP layers [ Linear dim 10 layer name 'linear' irange 1 0 Softmax n classes 2 layer name 'softmax' irange 1 0 ] batch size 10 nvis 10 cost Lp Penalty variables model get params p 2 penalty cost expr model None penalty function theano function inputs [] outputs penalty p penalty function actual p 0for param in model get params actual p + numpy sum param get value ** 2 assert numpy allclose p actual p
def test correctness model MLP layers [ Linear dim 10 layer name 'linear' irange 1 0 Softmax n classes 2 layer name 'softmax' irange 1 0 ] batch size 10 nvis 10 cost Lp Penalty variables model get params p 2 penalty cost expr model None penalty function theano function inputs [] outputs penalty p penalty function actual p 0for param in model get params actual p + numpy sum param get value ** 2 assert numpy allclose p actual p
def do format value *args **kwargs if args and kwargs raise Filter Argument Error "can'thandlepositionalandkeywordargumentsatthesametime" return soft unicode value % kwargs or args
def Central Moment xs k mean Raw Moment xs 1 return sum x - mean ** k for x in xs / len xs
def get host ref for vm session instance vm ref get vm ref session instance return session call method vutil 'get object property' vm ref 'runtime host'
def write cache entries stream extension data None Sha Stream Cls Index File SHA 1 Writer stream Sha Stream Cls stream tell stream tellwrite stream writeversion 2write 'DIRC' write pack '>LL' version len entries for entry in entries beginoffset tell write entry[ 4 ] write entry[ 5 ] path entry[ 3 ]path force bytes path encoding defenc plen len path & CE NAMEMASK assert plen len path ' Path%stoolongtofitintoindex' % entry[ 3 ] flags plen entry[ 2 ] & CE NAMEMASK INV write pack '>LLLLLL 20 s H' entry[ 6 ] entry[ 7 ] entry[ 0 ] entry[ 8 ] entry[ 9 ] entry[ 10 ] entry[ 1 ] flags write path real size tell - beginoffset + 8 & ~ 7 write '\x 00 ' * beginoffset + real size - tell if extension data is not None stream write extension data stream write sha
@constructordef sum input axis None dtype None keepdims False acc dtype None out elemwise Sum axis axis dtype dtype acc dtype acc dtype input if keepdims out make Keep Dims input out axis return out
def site def prep r if r representation 'json' and r method not in 'search ac' 'search address ac' 'site contact person' return Falses 3 db gis location filter r return Trues 3 prep prepreturn s3 rest controller
def site def prep r if r representation 'json' and r method not in 'search ac' 'search address ac' 'site contact person' return Falses 3 db gis location filter r return Trues 3 prep prepreturn s3 rest controller
def site def prep r if r representation 'json' and r method not in 'search ac' 'search address ac' 'site contact person' return Falses 3 db gis location filter r return Trues 3 prep prepreturn s3 rest controller
def site def prep r if r representation 'json' and r method not in 'search ac' 'search address ac' 'site contact person' return Falses 3 db gis location filter r return Trues 3 prep prepreturn s3 rest controller
def call tadm args if isinstance args compat string types raise Type Error u'argsshouldbealistofstrings' if tadm bin is None config tadm cmd [ tadm bin] + args p subprocess Popen cmd stdout sys stdout stdout stderr p communicate if p returncode 0 print print stderr raise OS Error u'tadmcommandfailed '
@pytest mark skipif "sys platform 'win 32 '" @pytest mark networkdef test check submodule addition script module path submodule path create test package with submodule script install result script pip 'install' '-e' 'git+' + module path + '#egg version pkg' assert script venv / 'src/version-pkg/testpkg/static/testfile' in install result files created change test package submodule script submodule path pull in submodule changes to module script module path update result script pip 'install' '-e' 'git+' + module path + '#egg version pkg' '--upgrade' expect error True assert script venv / 'src/version-pkg/testpkg/static/testfile 2 ' in update result files created
@pytest mark skipif "sys platform 'win 32 '" @pytest mark networkdef test check submodule addition script module path submodule path create test package with submodule script install result script pip 'install' '-e' 'git+' + module path + '#egg version pkg' assert script venv / 'src/version-pkg/testpkg/static/testfile' in install result files created change test package submodule script submodule path pull in submodule changes to module script module path update result script pip 'install' '-e' 'git+' + module path + '#egg version pkg' '--upgrade' expect error True assert script venv / 'src/version-pkg/testpkg/static/testfile 2 ' in update result files created
@pytest mark skipif "sys platform 'win 32 '" @pytest mark networkdef test check submodule addition script module path submodule path create test package with submodule script install result script pip 'install' '-e' 'git+' + module path + '#egg version pkg' assert script venv / 'src/version-pkg/testpkg/static/testfile' in install result files created change test package submodule script submodule path pull in submodule changes to module script module path update result script pip 'install' '-e' 'git+' + module path + '#egg version pkg' '--upgrade' expect error True assert script venv / 'src/version-pkg/testpkg/static/testfile 2 ' in update result files created
def delete network acl network acl id None network acl name None disassociate False region None key None keyid None profile None if disassociate network acl get resource 'network acl' name network acl name region region key key keyid keyid profile profile if network acl and network acl associations subnet id network acl associations[ 0 ] subnet idtry conn get conn region region key key keyid keyid profile profile conn disassociate network acl subnet id except Boto Server Error passreturn delete resource resource 'network acl' name network acl name resource id network acl id region region key key keyid keyid profile profile
def delete network acl network acl id None network acl name None disassociate False region None key None keyid None profile None if disassociate network acl get resource 'network acl' name network acl name region region key key keyid keyid profile profile if network acl and network acl associations subnet id network acl associations[ 0 ] subnet idtry conn get conn region region key key keyid keyid profile profile conn disassociate network acl subnet id except Boto Server Error passreturn delete resource resource 'network acl' name network acl name resource id network acl id region region key key keyid keyid profile profile
def long to datetime x days x // 86400000000 x - days * 86400000000 seconds x // 1000000 x - seconds * 1000000 return datetime min + timedelta days days seconds seconds microseconds x
def long to datetime x days x // 86400000000 x - days * 86400000000 seconds x // 1000000 x - seconds * 1000000 return datetime min + timedelta days days seconds seconds microseconds x
def is entrance exams enabled return settings FEATURES get 'ENTRANCE EXAMS'
def is entrance exams enabled return settings FEATURES get 'ENTRANCE EXAMS'
def is entrance exams enabled return settings FEATURES get 'ENTRANCE EXAMS'
def process autosummary toc app doctree env app builder envcrawled {}def crawl toc node depth 1 crawled[node] Truefor j subnode in enumerate node try if isinstance subnode autosummary toc and isinstance subnode[ 0 ] addnodes toctree env note toctree env docname subnode[ 0 ] continueexcept Index Error continueif not isinstance subnode nodes section continueif subnode not in crawled crawl toc subnode depth + 1 crawl toc doctree
def preseed package pkg name preseed for q name in preseed items q type q answer run as root 'echo"% pkg name s% q name s% q type s% q answer s" debconf-set-selections' % locals
def sub labels axis subs fmt axis get minor formatter minor tlocs axis get minorticklocs fmt set locs minor tlocs coefs minor tlocs / 10 ** np floor np log 10 minor tlocs label expected [ np round c in subs for c in coefs]label test [ fmt x u'' for x in minor tlocs]assert label test label expected
def init n workers 1 global workersif n workers 0 n workers 1for i in range n workers worker Style Transfer 'googlenet' use pbar False workers update { Lock worker}
def write block summary report course data block summary counts unique course counts get block summary totals course data with open 'xblock summary counts csv' 'wb' as csvfile summary writer csv writer csvfile delimiter ' ' quotechar '"' quoting csv QUOTE MINIMAL summary writer writerow ['XBLOCK NAME' 'UNIQUE COURSES' 'NUM TOTAL INSTANCES'] for block type in sorted block summary counts block count block summary counts get block type summary writer writerow [block type str unique course counts[block type] str block count ] csvfile close
def write block summary report course data block summary counts unique course counts get block summary totals course data with open 'xblock summary counts csv' 'wb' as csvfile summary writer csv writer csvfile delimiter ' ' quotechar '"' quoting csv QUOTE MINIMAL summary writer writerow ['XBLOCK NAME' 'UNIQUE COURSES' 'NUM TOTAL INSTANCES'] for block type in sorted block summary counts block count block summary counts get block type summary writer writerow [block type str unique course counts[block type] str block count ] csvfile close
def footer css urls request package name package settings PIPELINE CSS get package name {} paths [package['output filename']] if not settings DEBUG else package['source filenames'] return [ footer static url request path for path in paths]
def get year book return int book['date'] split [1 ]
def get year book return int book['date'] split [1 ]
def get year book return int book['date'] split [1 ]
def cmp by origin path 1 path 2 def get origin pref origin if origin value BGP ATTR ORIGIN IGP return 3elif origin value BGP ATTR ORIGIN EGP return 2elif origin value BGP ATTR ORIGIN INCOMPLETE return 1else LOG error ' Invalidoriginvalueencountered%s ' origin return 0origin 1 path 1 get pattr BGP ATTR TYPE ORIGIN origin 2 path 2 get pattr BGP ATTR TYPE ORIGIN assert origin 1 is not None and origin 2 is not None if origin 1 value origin 2 value return Noneorigin 1 get origin pref origin 1 origin 2 get origin pref origin 2 if origin 1 origin 2 return Noneelif origin 1 > origin 2 return path 1 return path 2
def dihedral n if n 1 yield Permutation [0 1] yield Permutation [1 0] elif n 2 yield Permutation [0 1 2 3] yield Permutation [1 0 3 2] yield Permutation [2 3 0 1] yield Permutation [3 2 1 0] else gen list range n for i in range n yield Permutation gen yield Permutation gen[ -1 ] gen rotate left gen 1
@ assure identitydef auth with token token tenant id None tenant name None region None global regions servicesidentity auth with token token tenant id tenant id tenant name tenant name regions tuple identity regions services tuple identity services keys connect to services region region
def security group exists context project id group name return IMPL security group exists context project id group name
def get actor tr chamber actor tr[ 0 ] text content strip if actor startswith 'H' or actor startswith 'S' actor actor[ 0 ]return {'H' 'lower' 'S' 'upper'}[actor]else h or s tr xpath 'ancestor table[ 1 ]/preceding-sibling ' + 'table/tr/td/b[contains text "TRANSMITTO" ]' if h or s h or s h or s[ -1 ] text content strip actor 'upper' if h or s endswith 'SENATE ' else 'lower' else actor chamberreturn actor
def parse file descriptor file is bridge False validate False **kwargs while True if not is bridge extrainfo content read until keywords 'router-signature' descriptor file block end prefix PGP BLOCK END split '' 1 [0 ]extrainfo content + read until keywords block end prefix descriptor file True else extrainfo content read until keywords 'router-digest' descriptor file True if extrainfo content if extrainfo content[ 0 ] startswith '@type' extrainfo content extrainfo content[ 1 ]if is bridge yield Bridge Extra Info Descriptor bytes join '' extrainfo content validate **kwargs else yield Relay Extra Info Descriptor bytes join '' extrainfo content validate **kwargs else break
@depends HAS PYVMOMI def get vmotion enabled host username password protocol None port None host names None service instance salt utils vmware get service instance host host username username password password protocol protocol port port host names check hosts service instance host host names ret {}for host name in host names host ref get host ref service instance host host name host name vmotion vnic host ref config Manager vmotion System net Config selected Vnicif vmotion vnic ret update {host name {'V Motion Enabled' True}} else ret update {host name {'V Motion Enabled' False}} return ret
def get conf tpls image name kube annotations None kube pod name None kube container name None return [ x y for x y in copy deepcopy Test Service Discovery mock templates get image name [0 ] ]
def update session auth hash request user request session cycle key if hasattr user 'get session auth hash' and request user user request session[HASH SESSION KEY] user get session auth hash
def update session auth hash request user request session cycle key if hasattr user 'get session auth hash' and request user user request session[HASH SESSION KEY] user get session auth hash
def has access error desc user action descriptor course key def check for staff return has staff access to descriptor user descriptor course key checkers {'load' check for staff 'staff' check for staff 'instructor' lambda has instructor access to descriptor user descriptor course key }return dispatch checkers action user descriptor
def has access error desc user action descriptor course key def check for staff return has staff access to descriptor user descriptor course key checkers {'load' check for staff 'staff' check for staff 'instructor' lambda has instructor access to descriptor user descriptor course key }return dispatch checkers action user descriptor
def fisher z transform r if abs r > 1 return nanreturn 0 5 * log 1 0 + r / 1 0 - r
def get network timezone network if network is None return sr timezonetry return tz gettz network dict[network] or sr timezone except Exception return sr timezone
def gjrconvertparams self params nar nma p q nar nma ar np concatenate [1 ] params[ p] ma np zeros q + 1 3 ma[ 0 0 ] params[ -1 ]ma[ 1] np concatenate [0 ] params[p p + q ] ma[ 2] np concatenate [0 ] params[ p + q p + 2 * q ] mu params[ -1 ]params 2 ar ma return paramsclass
def gjrconvertparams self params nar nma p q nar nma ar np concatenate [1 ] params[ p] ma np zeros q + 1 3 ma[ 0 0 ] params[ -1 ]ma[ 1] np concatenate [0 ] params[p p + q ] ma[ 2] np concatenate [0 ] params[ p + q p + 2 * q ] mu params[ -1 ]params 2 ar ma return paramsclass
def write tfrs fname tfr overwrite False out []if not isinstance tfr list tuple tfr [tfr]for ii tfr in enumerate tfr comment ii if tfr comment is None else tfr comment out append prepare write tfr tfr condition comment write hdf 5 fname out overwrite overwrite title 'mnepython'
def twitter inbox if not auth s3 logged in session error T ' Requires Login ' redirect URL c 'default' f 'user' args 'login' tablename 'msg twitter'table s3 db msg twitters 3 filter table inbound True table inbound readable Falses 3 crud strings[tablename] Storage title display T ' Tweet Details' title list T ' Twitter In Box' label list button T ' View Twitter In Box' label delete button T ' Delete Tweet' msg record deleted T ' Tweetdeleted' msg list empty T ' No Tweetscurrentlyin In Box' s3 db configure tablename editable False insertable False list fields ['id' 'date' 'from address' 'body'] return s3 rest controller module 'twitter'
def natural ipv 4 netmask ip fmt 'prefixlen' bits ipv 4 to bits ip if bits startswith '11 ' mask '24 'elif bits startswith '1 ' mask '16 'else mask '8 'if fmt 'netmask' return cidr to ipv 4 netmask mask else return '/' + mask
def is writable path if os path isfile path return bool os stat path st mode & stat S IWUSR else return True
def make comparison tests klass kwargs 1 kwargs 2 def instance kwargs if isinstance kwargs dict return klass **kwargs return klass **kwargs class Tests Test Case def test equality self '\n Instanceswiththesameargumentsareequal \n'self assert True instance kwargs 1 instance kwargs 1 self assert False instance kwargs 1 instance kwargs 2 def test notequality self '\n Instancewithdifferentargumentsarenotequal \n'self assert True instance kwargs 1 instance kwargs 2 self assert False instance kwargs 1 instance kwargs 1 Tests name klass name + ' Comparison Tests' return Tests
def ec 2 id to id ec 2 id try return int ec 2 id split '-' [ -1 ] 16 except Value Error raise exception Invalid Ec 2 Id ec 2 id ec 2 id
def check dns name bucket name if ' ' in bucket name return Falsen len bucket name if n < 3 or n > 63 return Falseif n 1 if not bucket name isalnum return Falsematch LABEL RE match bucket name if match is None or match end len bucket name return Falsereturn True
def absent name export False force False ret {'name' name 'changes' {} 'result' None 'comment' ''}log debug 'zpool absent {0 } config force {1 }' format name force log debug 'zpool absent {0 } config export {1 }' format name export if salt ['zpool exists'] name ret['result'] Falseif export if opts ['test'] ret['result'] Trueelse ret['result'] salt ['zpool export'] name force force ret['result'] ret['result'] get name 'exported' elif opts ['test'] ret['result'] Trueelse ret['result'] salt ['zpool destroy'] name force force ret['result'] ret['result'] get name 'destroyed' if ret['result'] ret['changes'][name] 'exported' if export else 'destroyed' ret['comment'] 'storagepool{ 0 }was{ 1 }' format name ret['changes'][name] else ret['result'] Trueret['comment'] 'storagepool{ 0 }isabsent' format name return ret
def generate next dates start date offset 0 start offset * 7 for i in itertools count start yield start date + timedelta i
def Get Nodes node match tag return child for child in node getchildren if Get Tag child match tag
def solc parse output compiler output result yaml safe load compiler output ['contracts']if 'bin' in tuple result values [0 ] for value in result values value['bin hex'] value['bin']try value['bin'] decode hex value['bin hex'] except Type Error passfor json data in 'abi' 'devdoc' 'userdoc' if json data not in tuple result values [0 ] continuefor value in result values value[json data] yaml safe load value[json data] return result
def migrate print green '%s Performing Migration' % env host with cd '/home/web 2 py' run 'sudo-H-uweb 2 pypythonweb 2 py py-N- Seden-M- Rapplications/eden/static/scripts/tools/noop py' pty True
def has handshake pyrit target capfile if not program exists 'pyrit' return Falsecmd ['pyrit' '-r' capfile 'analyze']proc Popen cmd stdout PIPE stderr DN proc wait hit essid Falsefor line in proc communicate [0 ] split '\n' if line '' or line None continueif line find ' Access Point' -1 hit essid line find " '" + target ssid + "' " -1 and line lower find target bssid lower -1 elif hit essid and line find ' good ' -1 or line find ' workable ' -1 return Truereturn False
def attachment upload to instance filename now datetime now return 'attachments/% date s/% id s/% md 5 s/% filename s' % {'date' now strftime '%Y/%m/%d' 'id' instance attachment id 'md 5 ' hashlib md 5 str now hexdigest 'filename' filename}
def set channel access channel 14 access update mode 'non volatile' alerting False per msg auth False user level auth False access mode 'always' privilege update mode 'non volatile' privilege level 'administrator' **kwargs with Ipmi Command **kwargs as s return s set channel access channel access update mode alerting per msg auth user level auth access mode privilege update mode privilege level
def get checksum content encoding 'utf 8 ' block size 8192 md hashlib md 5 def safe update txt try md update txt except Unicode Encode Error md update txt encode encoding try isfile os path isfile content except Type Error isfile Falseif isfile with open content 'rb' as ff txt ff read block size while txt safe update txt txt ff read block size elif hasattr content 'read' pos content tell content seek 0 txt content read block size while txt safe update txt txt content read block size content seek pos else safe update content return md hexdigest
def direct get account node part account marker None limit None prefix None delimiter None conn timeout 5 response timeout 15 end marker None reverse None path '/' + account return get direct account container path ' Account' node part marker marker limit limit prefix prefix delimiter delimiter end marker end marker reverse reverse conn timeout conn timeout response timeout response timeout
def Expand Xcode Variables string expansions matches xcode variable re findall string if matches None return stringmatches reverse for match in matches to replace variable matchif not variable in expansions continuereplacement expansions[variable]string re sub re escape to replace replacement string return string
def Expand Xcode Variables string expansions matches xcode variable re findall string if matches None return stringmatches reverse for match in matches to replace variable matchif not variable in expansions continuereplacement expansions[variable]string re sub re escape to replace replacement string return string
def Expand Xcode Variables string expansions matches xcode variable re findall string if matches None return stringmatches reverse for match in matches to replace variable matchif not variable in expansions continuereplacement expansions[variable]string re sub re escape to replace replacement string return string
def get current db from calibre gui 2 ui import get guigui get gui if gui is not None and gui current db is not None return gui current dbfrom calibre library import dbreturn db
def get current db from calibre gui 2 ui import get guigui get gui if gui is not None and gui current db is not None return gui current dbfrom calibre library import dbreturn db
def get current db from calibre gui 2 ui import get guigui get gui if gui is not None and gui current db is not None return gui current dbfrom calibre library import dbreturn db
def config to kodi MASTER SETTINGS config extracted settings for kodi {}for setting protocols in MASTER SETTINGS iteritems value general config get config **protocols extracted settings for kodi[setting] valuereturn extracted settings for kodi
def config to kodi MASTER SETTINGS config extracted settings for kodi {}for setting protocols in MASTER SETTINGS iteritems value general config get config **protocols extracted settings for kodi[setting] valuereturn extracted settings for kodi
def config to kodi MASTER SETTINGS config extracted settings for kodi {}for setting protocols in MASTER SETTINGS iteritems value general config get config **protocols extracted settings for kodi[setting] valuereturn extracted settings for kodi
def have socket rds try s socket socket socket PF RDS socket SOCK SEQPACKET 0 except Attribute Error OS Error return Falseelse s close return True
def track voted event request course obj vote value undo vote False if isinstance obj cc Thread obj type 'thread'else obj type 'response'event name EVENT NAME TEMPLATE format obj type obj type action name 'voted' event data {'commentable id' obj commentable id 'target username' obj get 'username' 'undo vote' undo vote 'vote value' vote value}track forum event request event name course obj event data
def build single handler application path argv None argv argv or [] path os path abspath path if os path isdir path handler Directory Handler filename path argv argv elif path endswith ' ipynb' handler Notebook Handler filename path argv argv elif path endswith ' py' if path endswith 'main py' warnings warn DIRSTYLE MAIN WARNING handler Script Handler filename path argv argv else raise Value Error " Expecteda' py'scriptor' ipynb'notebook got '%s'" % path if handler failed raise Runtime Error ' Errorloading%s \n\n%s\n%s' % path handler error handler error detail application Application handler return application
def reblock 2x 2 B if not isinstance B Block Matrix or not all d > 2 for d in B blocks shape return BBM Block Matrixreturn BM [[B blocks[ 0 0 ] BM B blocks[ 0 1 ] ] [BM B blocks[ 1 0] BM B blocks[ 1 1 ] ]]
def reblock 2x 2 B if not isinstance B Block Matrix or not all d > 2 for d in B blocks shape return BBM Block Matrixreturn BM [[B blocks[ 0 0 ] BM B blocks[ 0 1 ] ] [BM B blocks[ 1 0] BM B blocks[ 1 1 ] ]]
@utils arg 'server' metavar '<server>' help ' Nameor I Dofserver ' @utils arg 'console type' metavar '<console-type>' help ' Typeofrdpconsole "rdp-html 5 " ' def do get rdp console cs args server find server cs args server data server get rdp console args console type print console cs data
def random variables return tf get collection RANDOM VARIABLE COLLECTION
def zap target None **kwargs if target is not None log warning ' Depricateduseoffunction usekwargs' target kwargs get 'dev' target kwargs['dev'] targetreturn ceph cfg zap **kwargs
def totals cls interval time points get time points interval q Session query cls date sum cls pageview count label 'sum' filter cls interval interval filter cls date in time points filter cls codename startswith Link type prefix group by cls date order by desc cls date return fill gaps time points q 'sum'
def iter modules path import osimport pkgutilif hasattr pkgutil 'iter modules' for importer modname ispkg in pkgutil iter modules path yield modname ispkg returnfrom inspect import getmodulenamefrom pydoc import ispackagefound set for path in path for filename in os listdir path p os path join path filename modname getmodulename filename if modname and modname ' init ' if modname not in found found add modname yield modname ispackage modname
def asnumpy a stream None if isinstance a ndarray return a get stream stream else return numpy asarray a
def asnumpy a stream None if isinstance a ndarray return a get stream stream else return numpy asarray a
def xframe allow whitelisted view func def wrapped view request *args **kwargs ' Modifytheresponsewiththecorrect X- Frame- Options 'resp view func request *args **kwargs x frame option 'DENY'if settings FEATURES['ENABLE THIRD PARTY AUTH'] referer request META get 'HTTP REFERER' if referer is not None parsed url urlparse referer hostname parsed url hostnameif LTI Provider Config objects current set filter lti hostname hostname enabled True exists x frame option 'ALLOW'resp['X- Frame- Options'] x frame optionreturn respreturn wraps view func assigned available attrs view func wrapped view
def trivial gcd f g ring f ringif not f or g return ring zero ring zero ring zero elif not f if g LC < ring domain zero return - g ring zero - ring one else return g ring zero ring one elif not g if f LC < ring domain zero return - f - ring one ring zero else return f ring one ring zero return None
def graded scorable blocks to header course key scorable blocks map Ordered Dict grading context grading context for course course key for assignment type name subsection infos in grading context['all graded subsections by type'] iteritems for subsection index subsection info in enumerate subsection infos start 1 for scorable block in subsection info['scored descendants'] header name u'{assignment type}{subsection index} {subsection name}-{scorable block name}' format scorable block name scorable block display name assignment type assignment type name subsection index subsection index subsection name subsection info['subsection block'] display name scorable blocks map[scorable block location] [ header name + ' Earned ' header name + ' Possible ' ]return scorable blocks map
def graded scorable blocks to header course key scorable blocks map Ordered Dict grading context grading context for course course key for assignment type name subsection infos in grading context['all graded subsections by type'] iteritems for subsection index subsection info in enumerate subsection infos start 1 for scorable block in subsection info['scored descendants'] header name u'{assignment type}{subsection index} {subsection name}-{scorable block name}' format scorable block name scorable block display name assignment type assignment type name subsection index subsection index subsection name subsection info['subsection block'] display name scorable blocks map[scorable block location] [ header name + ' Earned ' header name + ' Possible ' ]return scorable blocks map
def get account id from arn trail arn return trail arn split ' ' [4 ]
def send suggestion email exploration title exploration id author id recipient list email subject ' Newsuggestionfor"%s"' % exploration title email body template ' Hi%s <br>%shassubmittedanewsuggestionforyour Oppiaexploration <ahref "https //www oppia org/create/%s">"%s"</a> <br> Youcanacceptorrejectthissuggestionbyvisitingthe<ahref "https //www oppia org/create/%s#/feedback">feedbackpage</a>foryourexploration <br><br> Thanks <br>- The Oppia Team<br><br>%s'if not feconf CAN SEND EMAILS log new error ' Thisappcannotsendemailstousers ' returnif not feconf CAN SEND FEEDBACK MESSAGE EMAILS log new error ' Thisappcannotsendfeedbackmessageemailstousers ' returnauthor settings user services get user settings author id can users receive email can users receive thread email recipient list exploration id True for index recipient id in enumerate recipient list recipient user settings user services get user settings recipient id if can users receive email[index] email body email body template % recipient user settings username author settings username exploration id exploration title exploration id EMAIL FOOTER value send email recipient id feconf SYSTEM COMMITTER ID feconf EMAIL INTENT SUGGESTION NOTIFICATION email subject email body feconf NOREPLY EMAIL ADDRESS
def send suggestion email exploration title exploration id author id recipient list email subject ' Newsuggestionfor"%s"' % exploration title email body template ' Hi%s <br>%shassubmittedanewsuggestionforyour Oppiaexploration <ahref "https //www oppia org/create/%s">"%s"</a> <br> Youcanacceptorrejectthissuggestionbyvisitingthe<ahref "https //www oppia org/create/%s#/feedback">feedbackpage</a>foryourexploration <br><br> Thanks <br>- The Oppia Team<br><br>%s'if not feconf CAN SEND EMAILS log new error ' Thisappcannotsendemailstousers ' returnif not feconf CAN SEND FEEDBACK MESSAGE EMAILS log new error ' Thisappcannotsendfeedbackmessageemailstousers ' returnauthor settings user services get user settings author id can users receive email can users receive thread email recipient list exploration id True for index recipient id in enumerate recipient list recipient user settings user services get user settings recipient id if can users receive email[index] email body email body template % recipient user settings username author settings username exploration id exploration title exploration id EMAIL FOOTER value send email recipient id feconf SYSTEM COMMITTER ID feconf EMAIL INTENT SUGGESTION NOTIFICATION email subject email body feconf NOREPLY EMAIL ADDRESS
def remove result ranges diffs result list file dict result diff dict dict {}for original result in result list mod file dict copy deepcopy file dict source ranges []previous Nonefor source range in sorted original result affected code reverse True if previous is not None and source range overlaps previous combined sr Source Range join previous source range previous combined srelif previous is None previous source rangeelse source ranges append previous previous source rangeif previous source ranges append previous for source range in source ranges file name source range filenew file remove range mod file dict[file name] source range mod file dict[file name] new filediff dict {}for file name in file dict diff dict[file name] Diff from string arrays file dict[file name] mod file dict[file name] result diff dict dict[original result] diff dictreturn result diff dict dict
def remove result ranges diffs result list file dict result diff dict dict {}for original result in result list mod file dict copy deepcopy file dict source ranges []previous Nonefor source range in sorted original result affected code reverse True if previous is not None and source range overlaps previous combined sr Source Range join previous source range previous combined srelif previous is None previous source rangeelse source ranges append previous previous source rangeif previous source ranges append previous for source range in source ranges file name source range filenew file remove range mod file dict[file name] source range mod file dict[file name] new filediff dict {}for file name in file dict diff dict[file name] Diff from string arrays file dict[file name] mod file dict[file name] result diff dict dict[original result] diff dictreturn result diff dict dict
def remove result ranges diffs result list file dict result diff dict dict {}for original result in result list mod file dict copy deepcopy file dict source ranges []previous Nonefor source range in sorted original result affected code reverse True if previous is not None and source range overlaps previous combined sr Source Range join previous source range previous combined srelif previous is None previous source rangeelse source ranges append previous previous source rangeif previous source ranges append previous for source range in source ranges file name source range filenew file remove range mod file dict[file name] source range mod file dict[file name] new filediff dict {}for file name in file dict diff dict[file name] Diff from string arrays file dict[file name] mod file dict[file name] result diff dict dict[original result] diff dictreturn result diff dict dict
def get info for reshard stream details min hash key 0max hash key 0stream details[' Open Shards'] []for shard in stream details[' Shards'] shard id shard[' Shard Id']if ' Ending Sequence Number' in shard[' Sequence Number Range'] log debug 'skippingclosedshard{ 0 }' format shard id continuestream details[' Open Shards'] append shard shard[' Hash Key Range'][' Starting Hash Key'] long int shard[' Hash Key Range'][' Starting Hash Key'] shard[' Hash Key Range'][' Ending Hash Key'] long int shard[' Hash Key Range'][' Ending Hash Key'] if shard[' Hash Key Range'][' Starting Hash Key'] < min hash key min hash key shard[' Hash Key Range'][' Starting Hash Key']if shard[' Hash Key Range'][' Ending Hash Key'] > max hash key max hash key shard[' Hash Key Range'][' Ending Hash Key']stream details[' Open Shards'] sort key lambda shard long int shard[' Hash Key Range'][' Starting Hash Key'] return min hash key max hash key stream details
def logging level runlevel if runlevel return LOG VALUES[runlevel]else return logging FATAL + 5
def get deployment engine class provider engine path PROVIDER MAPPING get provider None logger debug ' Loading Deployment Enginefor%s %s' provider engine path if engine path is None return None module engine engine path rsplit ' ' 1 try mod import module fromlist [engine] except Import Error as e logger error ' Unabletoimportrequestedengine %s forprovider%s' engine provider logger error ' Arequiredlibrarywasmissing %s' e message logger error ' Pleaseinstallthelibraryandtryagain' else return getattr mod engine
def return traceback in unhandled exceptions global get fault string from exceptionimport tracebackdef get fault string from exception e return traceback format exc get fault string from exception get fault string from exception
def sha encode t s hashlib sha 1 t return s hexdigest
def approx fprime helper xk f epsilon args f0 None if f0 is None f0 f * xk + args grad numpy zeros len xk float ei numpy zeros len xk float for k in range len xk ei[k] 1 0d epsilon * ei grad[k] f * xk + d + args - f0 / d[k] ei[k] 0 0return grad
def substitute indices t *index tuples if not isinstance t Tens Expr return tfree t freefree 1 []for j ipos cpos in free for i v in index tuples if i name j name and i tensortype j tensortype if i is up j is up free 1 append v ipos cpos else free 1 append - v ipos cpos breakelse free 1 append j ipos cpos t Tens Mul from data t coeff t components free 1 t dum return t
def substitute indices t *index tuples if not isinstance t Tens Expr return tfree t freefree 1 []for j ipos cpos in free for i v in index tuples if i name j name and i tensortype j tensortype if i is up j is up free 1 append v ipos cpos else free 1 append - v ipos cpos breakelse free 1 append j ipos cpos t Tens Mul from data t coeff t components free 1 t dum return t
def test defn cant compile u' defnif*[] 1 ' cant compile u' defn"hy"[] 1 ' cant compile u' defn hy[] 1 ' can compile u' defn&hy[] 1 '
def for dtypes combination types names 'dtype' full None if full is None full int os environ get 'CUPY TEST FULL COMBINATION' '0 ' 0 if full combination parameterized product {name types for name in names} else ts []for in range len names t list types random shuffle t ts append t combination [dict zip names typs for typs in zip *ts ]def decorator impl @functools wraps impl def test func self *args **kw for dtypes in combination kw copy kw copy kw copy update dtypes try impl self *args **kw copy except Exception print dtypes raisereturn test funcreturn decorator
def test find number false exponent s '2 e'r find number s assert s[r[ 0 ] r[ 1 ]] '2 ' s[r[ 0 ] r[ 1 ]]
def test find number false exponent s '2 e'r find number s assert s[r[ 0 ] r[ 1 ]] '2 ' s[r[ 0 ] r[ 1 ]]
def test find number false exponent s '2 e'r find number s assert s[r[ 0 ] r[ 1 ]] '2 ' s[r[ 0 ] r[ 1 ]]
def edmonds karp G s t capacity 'capacity' residual None value only False cutoff None R edmonds karp impl G s t capacity residual cutoff R graph['algorithm'] 'edmonds karp'return R
def edmonds karp G s t capacity 'capacity' residual None value only False cutoff None R edmonds karp impl G s t capacity residual cutoff R graph['algorithm'] 'edmonds karp'return R
def all bit strings bits dtype 'uint 8 ' return np array [[int x for x in np binary repr i width bits ] for i in xrange 0 2 ** bits ] dtype dtype
def median absolute deviation x x asarray x median x median x median abs deviation median abs x - median x return median abs deviation median x
def initialize report report type start date end date start letter None end letter None for item in REPORT TYPES if report type in item return item[ 1 ] start date end date start letter end letter raise Report Type Does Not Exist Exception
def load coverage F header length 6 dtype np int 16 header [F readline for i in range header length ]make tuple lambda t t split [0 ] float t split [1 ] header dict [make tuple line for line in header] M np loadtxt F dtype dtype nodata int header['NODATA value'] if nodata -9999 M[nodata] -9999 return M
def load coverage F header length 6 dtype np int 16 header [F readline for i in range header length ]make tuple lambda t t split [0 ] float t split [1 ] header dict [make tuple line for line in header] M np loadtxt F dtype dtype nodata int header['NODATA value'] if nodata -9999 M[nodata] -9999 return M
def stop container timeout 10 client get client status base status copy try dcontainer get container infos container [' Id']if is running dcontainer client stop dcontainer timeout timeout if not is running dcontainer valid status comment ' Container{ 0 }wasstopped' format container id container else invalid status else valid status comment ' Container{ 0 }wasalreadystopped' format container id container except Exception invalid status id container out traceback format exc comment ' Anexceptionoccurredwhilestoppingyourcontainer{ 0 }' format container salt ['mine send'] 'dockerng ps' verbose True all True host True return status
def setup platform hass config add devices discovery info None import myuspstry cookie hass config path COOKIE session myusps get session config get CONF USERNAME config get CONF PASSWORD cookie path cookie except myusps USPS Error LOGGER exception ' Couldnotconnectto My USPS' return Falseadd devices [USPS Sensor session config get CONF UPDATE INTERVAL ]
def timeit func before time time res func return time time - before res
def get leaking objects objects None if objects is None gc collect objects gc get objects try ids set id i for i in objects for i in objects ids difference update id j for j in gc get referents i return [i for i in objects if id i in ids ]finally del objects i
def get leaking objects objects None if objects is None gc collect objects gc get objects try ids set id i for i in objects for i in objects ids difference update id j for j in gc get referents i return [i for i in objects if id i in ids ]finally del objects i
def get leaking objects objects None if objects is None gc collect objects gc get objects try ids set id i for i in objects for i in objects ids difference update id j for j in gc get referents i return [i for i in objects if id i in ids ]finally del objects i
def OS Version flavor urlbase path basename iso UR Ls get flavor 'unknown' return path splitext urlbase [0 ]
def setup platform hass config add devices discovery info None if discovery info is None or zwave NETWORK is None returnnode zwave NETWORK nodes[discovery info[zwave const ATTR NODE ID]]value node values[discovery info[zwave const ATTR VALUE ID]]if not node has command class zwave const COMMAND CLASS SWITCH BINARY returnif value type zwave const TYPE BOOL or value genre zwave const GENRE USER returnvalue set change verified False add devices [ Zwave Switch value ]
def imread qt filename qtimg Q Image if not qtimg load filename raise IO Error ' Unabletoloadfile%s' % filename if qtimg depth 1 raise IO Error '1 -bitimagescurrentlynotsupported' arrayptr qtimg bits bytes per pixel qtimg depth // 8 pixels per line qtimg bytes Per Line // bytes per pixel img size pixels per line * qtimg height * bytes per pixel arrayptr setsize img size img np array arrayptr if bytes per pixel > 1 img img reshape qtimg height pixels per line bytes per pixel img img[ qtimg width ]else img img reshape qtimg height pixels per line img img[ qtimg width ]if bytes per pixel 4 and not qtimg has Alpha Channel img img[ 2 -1 ]elif bytes per pixel 4 img[ 0 3] img[ 2 -1 ]return img
def imread qt filename qtimg Q Image if not qtimg load filename raise IO Error ' Unabletoloadfile%s' % filename if qtimg depth 1 raise IO Error '1 -bitimagescurrentlynotsupported' arrayptr qtimg bits bytes per pixel qtimg depth // 8 pixels per line qtimg bytes Per Line // bytes per pixel img size pixels per line * qtimg height * bytes per pixel arrayptr setsize img size img np array arrayptr if bytes per pixel > 1 img img reshape qtimg height pixels per line bytes per pixel img img[ qtimg width ]else img img reshape qtimg height pixels per line img img[ qtimg width ]if bytes per pixel 4 and not qtimg has Alpha Channel img img[ 2 -1 ]elif bytes per pixel 4 img[ 0 3] img[ 2 -1 ]return img
def example number region code return example number for type region code Phone Number Type FIXED LINE
def create txt response name txt records return dns rrset from text list name 60 'IN' 'TXT' txt records
def create txt response name txt records return dns rrset from text list name 60 'IN' 'TXT' txt records
def preprocess on cluster sff fps log fp fasta fp None out fp '/tmp/' squeeze False verbose False primer STANDARD BACTERIAL PRIMER cmd 'denoiser preprocess py-i%s-l%s-o%s' % ' ' join sff fps log fp out fp if fasta fp cmd + '-f%s' % fasta fp if squeeze cmd + '-s'if verbose cmd + '-v'if primer cmd + '-p%s' % primer submit jobs [cmd] 'pp ' + make tmp name 6 wait for file out fp + '/prefix mapping txt' 10
def preprocess on cluster sff fps log fp fasta fp None out fp '/tmp/' squeeze False verbose False primer STANDARD BACTERIAL PRIMER cmd 'denoiser preprocess py-i%s-l%s-o%s' % ' ' join sff fps log fp out fp if fasta fp cmd + '-f%s' % fasta fp if squeeze cmd + '-s'if verbose cmd + '-v'if primer cmd + '-p%s' % primer submit jobs [cmd] 'pp ' + make tmp name 6 wait for file out fp + '/prefix mapping txt' 10
def preprocess on cluster sff fps log fp fasta fp None out fp '/tmp/' squeeze False verbose False primer STANDARD BACTERIAL PRIMER cmd 'denoiser preprocess py-i%s-l%s-o%s' % ' ' join sff fps log fp out fp if fasta fp cmd + '-f%s' % fasta fp if squeeze cmd + '-s'if verbose cmd + '-v'if primer cmd + '-p%s' % primer submit jobs [cmd] 'pp ' + make tmp name 6 wait for file out fp + '/prefix mapping txt' 10
def assert Undefined Comparison test Case s1 s2 test Case assert False s1 s2 test Case assert False s1 < s2 test Case assert False s1 < s2 test Case assert False s1 > s2 test Case assert False s1 > s2
def ems diff data 0 data 1 return np mean data 0 axis 0 - np mean data 1 axis 0
def obtain proxy if not isproxy proxy raise Type Error 'objectmustbeaproxy' if isinstance proxy function globals getconn proxy local namespacereturn load function dump function proxy globals else return pickle loads getconn proxy modules c Pickle dumps proxy pickle HIGHEST PROTOCOL
def osf storage root addon config node settings auth **kwargs node node settings ownerroot rubeus build addon root node settings node settings name u'' permissions auth user auth user node Url node url node Api Url node api url return [root]
def format track track show url True out track['title']out + 'by\x 02 {}\x 02 ' format track['user']['username'] if track['genre'] out + '-\x 02 {}\x 02 ' format track['genre'] out + '-\x 02 { }\x 02 plays \x 02 { }\x 02 favorites \x 02 { }\x 02 comments' format track['playback count'] track['favoritings count'] track['comment count'] if show url out + '-{}' format web try shorten track['permalink url'] return out
def refresh db full False if full return salt ['cmd retcode'] '/bin/pkgrefresh--full' 0 else return salt ['cmd retcode'] '/bin/pkgrefresh' 0
def parse ml headers headers attrs {}attrs[' List- Archive'] headers get ' List- Archive' attrs[' List- Help'] headers get ' List- Help' attrs[' List- Id'] headers get ' List- Id' attrs[' List- Owner'] headers get ' List- Owner' attrs[' List- Post'] headers get ' List- Post' attrs[' List- Subscribe'] headers get ' List- Subscribe' attrs[' List- Unsubscribe'] headers get ' List- Unsubscribe' return attrs
def parse ml headers headers attrs {}attrs[' List- Archive'] headers get ' List- Archive' attrs[' List- Help'] headers get ' List- Help' attrs[' List- Id'] headers get ' List- Id' attrs[' List- Owner'] headers get ' List- Owner' attrs[' List- Post'] headers get ' List- Post' attrs[' List- Subscribe'] headers get ' List- Subscribe' attrs[' List- Unsubscribe'] headers get ' List- Unsubscribe' return attrs
def get fontconfig fonts fontext 'ttf' try import commandsexcept Import Error return {}fontext get fontext synonyms fontext fontfiles {} status output commands getstatusoutput 'fc-listfile' if status 0 for line in output split '\n' fname line split ' ' [0 ]if os path splitext fname [1 ][ 1 ] in fontext and os path exists fname fontfiles[fname] 1return fontfiles
def get fontconfig fonts fontext 'ttf' try import commandsexcept Import Error return {}fontext get fontext synonyms fontext fontfiles {} status output commands getstatusoutput 'fc-listfile' if status 0 for line in output split '\n' fname line split ' ' [0 ]if os path splitext fname [1 ][ 1 ] in fontext and os path exists fname fontfiles[fname] 1return fontfiles
@no debug modedef train yaml yaml file train yaml parse load yaml file train main loop
def get presser fig callbacks fig canvas callbacks callbacks['button press event']func Nonefor key val in callbacks items if val func class name 'partial' func val funcbreakassert func is not None return func
def load fips ecdsa key pair vectors vector data vectors []key data Nonefor line in vector data line line strip if not line or line startswith '#' continueif line[ 1 -1 ] in ECDSA CURVE NAMES curve name ECDSA CURVE NAMES[line[ 1 -1 ]]elif line startswith 'd ' if key data is not None vectors append key data key data {'curve' curve name 'd' int line split ' ' [1 ] 16 }elif key data is not None if line startswith ' Qx ' key data['x'] int line split ' ' [1 ] 16 elif line startswith ' Qy ' key data['y'] int line split ' ' [1 ] 16 assert key data is not None vectors append key data return vectors
def crc string return '% 08 x' % binascii crc 32 string encode 'utf- 8 ' & 4294967295
def setdefaulttimeout timeout if timeout is None timeout -1 0 else try timeout 0 0 + timeout except Type Error raise Type Error 'afloatisrequired' if timeout < 0 0 raise Value Error ' Timeoutvalueoutofrange' global GLOBAL TIMEOUT VALUE GLOBAL TIMEOUT VALUE timeout
def build single handler applications paths argvs None applications {}argvs {} or argvs for path in paths application build single handler application path argvs get path [] route application handlers[ 0 ] url path if not route if '/' in applications raise Runtime Error " Don'tknowthe UR Lpathtousefor%s" % path route '/'applications[route] applicationreturn applications
@register filterdef to js value return mark safe 'JSON parse "%s" ' % escapejs jsonify value
def create files paths chroot dirs files set set for path in paths path osp join chroot path filename osp basename path if filename '' dirs add path else dirs add osp dirname path files add path for dirpath in dirs if not osp isdir dirpath os makedirs dirpath for filepath in files open filepath 'w' close
def build tool dependencies select field app tool shed repository name multiple True display 'checkboxes' uninstalled only False tool dependencies select field Select Field name name multiple multiple display display for tool dependency in tool shed repository tool dependencies if uninstalled only if tool dependency status not in [app install model Tool Dependency installation status NEVER INSTALLED app install model Tool Dependency installation status UNINSTALLED] continueelif tool dependency status in [app install model Tool Dependency installation status NEVER INSTALLED app install model Tool Dependency installation status UNINSTALLED] continueoption label '%sversion%s' % str tool dependency name str tool dependency version option value app security encode id tool dependency id tool dependencies select field add option option label option value return tool dependencies select field
def multi params schema return {'type' 'array' 'items' schema}
def render file file request file restat False if file type is None file type file encoding get Type And Encoding file basename file content Types file content Encodings file default Type if not file exists return file child Not Found render request if file isdir return file redirect request request set Header 'accept-ranges' 'bytes' try file For Reading file open For Reading except IO Error as e import errnoif e[ 0 ] errno EACCES return Forbidden Resource render request else raiseproducer file make Producer request file For Reading if request method 'HEAD' return ''producer start return NOT DONE YET
def render file file request file restat False if file type is None file type file encoding get Type And Encoding file basename file content Types file content Encodings file default Type if not file exists return file child Not Found render request if file isdir return file redirect request request set Header 'accept-ranges' 'bytes' try file For Reading file open For Reading except IO Error as e import errnoif e[ 0 ] errno EACCES return Forbidden Resource render request else raiseproducer file make Producer request file For Reading if request method 'HEAD' return ''producer start return NOT DONE YET
def add user permission doctype name user with message False if name not in frappe defaults get user permissions user get doctype [] if not frappe db exists doctype name frappe throw u'{ 0 }{ 1 }notfound' format doctype name frappe Does Not Exist Error frappe defaults add default doctype name user u' User Permission' elif with message msgprint u' Permissionalreadyset'
def get current kernel arch return platform machine
def run child process test info test info start server sys exit 0
def run child process test info test info start server sys exit 0
def clear Node node node child Nodes[ ] []
def make commodity future info first sid root symbols years month codes None nineteen days pd Timedelta days 19 one year pd Timedelta days 365 return make future info first sid first sid root symbols root symbols years years notice date func lambda dt dt - Month Begin 2 + nineteen days expiration date func lambda dt dt - Month Begin 1 + nineteen days start date func lambda dt dt - one year month codes month codes
def make commodity future info first sid root symbols years month codes None nineteen days pd Timedelta days 19 one year pd Timedelta days 365 return make future info first sid first sid root symbols root symbols years years notice date func lambda dt dt - Month Begin 2 + nineteen days expiration date func lambda dt dt - Month Begin 1 + nineteen days start date func lambda dt dt - one year month codes month codes
def make commodity future info first sid root symbols years month codes None nineteen days pd Timedelta days 19 one year pd Timedelta days 365 return make future info first sid first sid root symbols root symbols years years notice date func lambda dt dt - Month Begin 2 + nineteen days expiration date func lambda dt dt - Month Begin 1 + nineteen days start date func lambda dt dt - one year month codes month codes
def make commodity future info first sid root symbols years month codes None nineteen days pd Timedelta days 19 one year pd Timedelta days 365 return make future info first sid first sid root symbols root symbols years years notice date func lambda dt dt - Month Begin 2 + nineteen days expiration date func lambda dt dt - Month Begin 1 + nineteen days start date func lambda dt dt - one year month codes month codes
def create permission grant for resource db role db resource db permission types permission types validate permission types resource db resource db permission types permission types resource uid resource db get uid resource type resource db get resource type result create permission grant role db role db resource uid resource uid resource type resource type permission types permission types return result
def test pickle globals def f x return np sin x + np cos x assert set ['np' ' builtins '] set loads dumps f globals keys
def test pickle globals def f x return np sin x + np cos x assert set ['np' ' builtins '] set loads dumps f globals keys
def walk modules path load False mods []mod import path {} {} [''] mods append mod if hasattr mod ' path ' for subpath ispkg in iter modules mod path fullpath path + ' ' + subpath if ispkg mods + walk modules fullpath else submod import fullpath {} {} [''] mods append submod return mods
def home directory name with settings hide 'running' 'stdout' return run 'echo~' + name
def validate *simple vals **param vals def val fn @wraps fn def newfn self *a **env try kw make validated kw fn simple vals param vals env except Reddit Error as err self on validation error err for err in c errors self on validation error c errors[err] try return fn self *a **kw except Reddit Error as err self on validation error err set api docs newfn simple vals param vals newfn handles csrf validators handle csrf simple vals param vals return newfnreturn val
def validate *simple vals **param vals def val fn @wraps fn def newfn self *a **env try kw make validated kw fn simple vals param vals env except Reddit Error as err self on validation error err for err in c errors self on validation error c errors[err] try return fn self *a **kw except Reddit Error as err self on validation error err set api docs newfn simple vals param vals newfn handles csrf validators handle csrf simple vals param vals return newfnreturn val
def write Element Node derivation file Names target xml Object target xml Objectif xml Object None print ' Warning write Targetinwritecouldnotgetxml Objectfor 'print targetprint derivation element Nodereturnparser Directory os path dirname derivation element Node get Owner Document file Name absolute Folder Directory os path abspath os path join parser Directory derivation folder Name if '/models' not in absolute Folder Directory print ' Warning models/wasnotintheabsolutefilepath soforsecuritynothingwillbedonefor 'print derivation element Nodeprint ' Forwhichtheabsolutefolderpathis 'print absolute Folder Directoryprint ' Thewritetoolcanonlywriteafilewhichhasmodels/inthefilepath 'print ' Towritethefile movethefileintoafoldercalledmodel/orasubfolderwhichisinsidethemodelfoldertree 'returnquantity evaluate get Evaluated Int 1 target 'quantity' for item Index in xrange quantity write XML Object absolute Folder Directory derivation file Names target xml Object
def login user sender user request **kwargs backend get backends [0 ]user backend '%s %s' % backend module backend class name login request user request session['REGISTRATION AUTO LOGIN'] Truerequest session modified True
def Chi Noncentral name k l return rv name Chi Noncentral Distribution k l
def get vm by name name all Details False vms get resources vms include Config all Details if name in vms return vms[name]log info 'V Mwithname"{ 0 }"couldnotbefound ' format name return False
def get vm by name name all Details False vms get resources vms include Config all Details if name in vms return vms[name]log info 'V Mwithname"{ 0 }"couldnotbefound ' format name return False
def get vm by name name all Details False vms get resources vms include Config all Details if name in vms return vms[name]log info 'V Mwithname"{ 0 }"couldnotbefound ' format name return False
def test scenario matches tags excluding when scenario has no tags scenario Scenario from string SCENARIO 1 original string SCENARIO 1 strip assert scenario matches tags ['-nope' '-neither']
def extrema input labels None index None dims numpy array numpy asarray input shape dim prod numpy cumprod [1 ] + list dims[ 0 -1 ] [ -1 ] minimums min positions maximums max positions select input labels index find min True find max True find min positions True find max positions True if numpy isscalar minimums return minimums maximums tuple min positions // dim prod % dims tuple max positions // dim prod % dims min positions [tuple v for v in min positions reshape -1 1 // dim prod % dims ]max positions [tuple v for v in max positions reshape -1 1 // dim prod % dims ]return minimums maximums min positions max positions
def setup platform hass config add devices discovery info None known devices hass data get KNOWN DEVICES KEY if known devices is None known devices set hass data[KNOWN DEVICES KEY] known devicesif config get CONF HOST is not None host config get CONF HOST port config get CONF PORT name config get CONF NAME timeout config get CONF TIMEOUT elif discovery info is not None tv name model host discovery infoname '{} {} ' format tv name model port DEFAULT POR Ttimeout DEFAULT TIMEOU Telse LOGGER warning ' Internalerroronsamsungtvcomponent Cannotdeterminedevice' returnip addr socket gethostbyname host if ip addr not in known devices known devices add ip addr add devices [ Samsung TV Device host port name timeout ] LOGGER info " Samsung TV%s %daddedas'%s'" host port name else LOGGER info ' Ignoringduplicate Samsung TV%s %d' host port
def run le auto venv dir base url **kwargs env environ copy d dict XDG DATA HOME venv dir LE AUTO JSON URL base url + 'certbot/json' LE AUTO DIR TEMPLATE base url + '%s/' LE AUTO PUBLIC KEY '-----BEGINPUBLICKEY-----\n MIIB Ij AN Bgkqhki G 9 w 0 BAQEFAAOCAQ 8 AMIIB Cg KCAQE As Mo Sz LYQ 7 E 1 sd S Okwelg\ntz K Ih 2 qi 3 bp Xu Ytcf FC 0 Xrv Wig 071 Nw Ij+d Zi T 0 OLZ 2 h Pisp EH 0 B 7 I Suu Wg 1 ll 7 G\nh FW 0 Vdbx L 6 Jd Gz S 2 Sh N Wk X 9 h E 9 z+j 8 Vqw DPO Bn 3 Z Hm 03 qwp Yk B Dw Qib 3 Kq Od Yb TT\nu Ut Jmm Gcuk 3 a 9 Aq/s CT 6 Ddfm T Sd P 5 asd Q Yw Ica Qre Dr Oosa S 84 DTWI 3 IU+UYJ Vgl\n Ls IVP Buy 9 Icg Hid UQ 96 h Jno Ps DC Ws Hw X 62495 QK Earauy K Qr Jz Fes 0 EY 95 or DM 47 \n Z 5 o/N Di QB 11 m 91 y NB 0 Mm PYY 9 Q Sbn OA 9 j 7 Iaa C 97 Aw R Luw XY+/R 2 abl Tcxur Wou 68 \ni QIDAQAB\n-----ENDPUBLICKEY-----' **kwargs env update d return out and err join venv dir 'letsencrypt-auto' + '--version' shell True env env
def find boundaries subpixel label img ndim label img ndimmax label np iinfo label img dtype maxlabel img expanded np zeros [ 2 * s - 1 for s in label img shape] label img dtype pixels [slice None None 2 ] * ndim label img expanded[pixels] label imgedges np ones label img expanded shape dtype bool edges[pixels] Falselabel img expanded[edges] max labelwindows view as windows np pad label img expanded 1 mode 'constant' constant values 0 3 * ndim boundaries np zeros like edges for index in np ndindex label img expanded shape if edges[index] values np unique windows[index] ravel if len values > 2 boundaries[index] Truereturn boundaries
def wl Pen wl l1 400 l 2 700 hue np clip l2 - l1 - wl - l1 * 0 8 / l2 - l1 0 0 8 val 1 0if wl > 700 val 1 0 * 700 - wl / 700 0 + 1 elif wl < 400 val wl * 1 0 / 400 0 color pg hsv Color hue 1 0 val pen pg mk Pen color return pen
def wl Pen wl l1 400 l 2 700 hue np clip l2 - l1 - wl - l1 * 0 8 / l2 - l1 0 0 8 val 1 0if wl > 700 val 1 0 * 700 - wl / 700 0 + 1 elif wl < 400 val wl * 1 0 / 400 0 color pg hsv Color hue 1 0 val pen pg mk Pen color return pen
def check state result running recurse False if not isinstance running dict return Falseif not running return Falseret Truefor state result in six itervalues running if not recurse and not isinstance state result dict ret Falseif ret and isinstance state result dict result state result get 'result' empty if result is False ret Falseelif result is empty and isinstance state result dict and ret ret check state result state result recurse True if not ret breakreturn ret
def stonith create stonith id stonith device type stonith device options None cibfile None return item create item 'stonith' item id stonith id item type stonith device type extra args stonith device options cibfile cibfile
def stonith create stonith id stonith device type stonith device options None cibfile None return item create item 'stonith' item id stonith id item type stonith device type extra args stonith device options cibfile cibfile
def generate Cookie Secret return base 64 b64 encode uuid uuid 4 bytes + uuid uuid 4 bytes
def get markdown extensions return markdown extensions
def source hashed source filename prepared options thumbnail extension **kwargs source sha hashlib sha 1 source filename encode u'utf- 8 ' digest source hash base 64 urlsafe b64 encode source sha[ 9] decode u'utf- 8 ' parts u' ' join prepared options[ 1 ] parts sha hashlib sha 1 parts encode u'utf- 8 ' digest options hash base 64 urlsafe b64 encode parts sha[ 6] decode u'utf- 8 ' return u'%s %s %s %s' % source hash prepared options[ 0 ] options hash thumbnail extension
def checked response status code int response['status'][ 3] if status code 401 raise Unauthorizedif status code 406 raise No Sessionif status code 407 raise Download Limit Reachedif status code 413 raise Invalid Imdbidif status code 414 raise Unknown User Agentif status code 415 raise Disabled User Agentif status code 503 raise Service Unavailableif status code 200 raise Open Subtitles Error response['status'] return response
def checked response status code int response['status'][ 3] if status code 401 raise Unauthorizedif status code 406 raise No Sessionif status code 407 raise Download Limit Reachedif status code 413 raise Invalid Imdbidif status code 414 raise Unknown User Agentif status code 415 raise Disabled User Agentif status code 503 raise Service Unavailableif status code 200 raise Open Subtitles Error response['status'] return response
def get permalink path self try first permalink id self get permalink ids iter next except Stop Iteration return Nonereturn '/{settings[PERMALINK PATH]}/{first permalink}' format settings self settings first permalink first permalink id
def ord char if isinstance char unicode T return builtin ord char return builtin ord to unicode char 'utf- 8 '
def get uuid prefix '' if settings DEBUG return prefix + str uuid uuid 4 return str uuid uuid 4
def get next downloadable changeset revision repository repo after changeset revision changeset revisions [revision[ 1 ] for revision in get metadata revisions repository repo ]if len changeset revisions 1 changeset revision changeset revisions[ 0 ]if changeset revision after changeset revision return after changeset revisionfound after changeset revision Falsefor changeset in repo changelog changeset revision str repo changectx changeset if found after changeset revision if changeset revision in changeset revisions return changeset revisionelif not found after changeset revision and changeset revision after changeset revision found after changeset revision Truereturn None
def get next downloadable changeset revision repository repo after changeset revision changeset revisions [revision[ 1 ] for revision in get metadata revisions repository repo ]if len changeset revisions 1 changeset revision changeset revisions[ 0 ]if changeset revision after changeset revision return after changeset revisionfound after changeset revision Falsefor changeset in repo changelog changeset revision str repo changectx changeset if found after changeset revision if changeset revision in changeset revisions return changeset revisionelif not found after changeset revision and changeset revision after changeset revision found after changeset revision Truereturn None
def get next downloadable changeset revision repository repo after changeset revision changeset revisions [revision[ 1 ] for revision in get metadata revisions repository repo ]if len changeset revisions 1 changeset revision changeset revisions[ 0 ]if changeset revision after changeset revision return after changeset revisionfound after changeset revision Falsefor changeset in repo changelog changeset revision str repo changectx changeset if found after changeset revision if changeset revision in changeset revisions return changeset revisionelif not found after changeset revision and changeset revision after changeset revision found after changeset revision Truereturn None
def get extension srcurl if 'youtu' in srcurl return 'video/youtube'else disassembled urlparse srcurl file ext splitext basename disassembled path [1 ]return 'video/' + file ext replace ' ' ''
def flowgram id to seq id map seqs result {}for id seq in seqs fields id split seq id id flowgram id fields[ 1 ]result[flowgram id] seq idreturn result
def linspace start stop num 50 chunks None dtype None num int num if chunks is None raise Value Error ' Mustsupplyachunks keywordargument' chunks normalize chunks chunks num range stop - start space float range / num - 1 if dtype is None dtype np linspace 0 1 1 dtypename 'linspace-' + tokenize start stop num chunks dtype dsk {}blockstart startfor i bs in enumerate chunks[ 0 ] blockstop blockstart + bs - 1 * space task partial np linspace dtype dtype blockstart blockstop bs blockstart blockstart + space * bs dsk[ name i ] taskreturn Array dsk name chunks dtype dtype
def ext functest builder method func def do test self if not isinstance func types Builtin Function Type raise Skip Test '%sextensionnotfound' % func method self func return do test
def ext functest builder method func def do test self if not isinstance func types Builtin Function Type raise Skip Test '%sextensionnotfound' % func method self func return do test
def requires nltk corpus func @wraps func def decorated *args **kwargs try return func *args **kwargs except Lookup Error as err print errraise Missing Corpus Error return decorated
@world absorbdef css click css selector index 0 wait time GLOBAL WAIT FOR TIMEOUT dismiss alert False wait for clickable css selector timeout wait time wait for visible css selector index index timeout wait time assert true css visible css selector index index msg ' Element{}[{}]ispresentbutnotvisible' format css selector index retry on exception lambda css find css selector [index] click if dismiss alert world browser get alert accept wait for js to load return True
def get Horizontal Segment Lists From Loop Lists already Filled Arounds front number Of Lines rotated Fill Loops width x Intersection Index Lists []y List []front Over Width get Front Over Width Add X List Y List front already Filled Arounds number Of Lines x Intersection Index Lists width y List add X Intersection Indexes From Loops front Over Width rotated Fill Loops -1 x Intersection Index Lists width y List horizontal Segment Lists []for x Intersection Index List Index in xrange len x Intersection Index Lists x Intersection Index List x Intersection Index Lists[x Intersection Index List Index]line Segments get Segments From X Intersection Indexes x Intersection Index List y List[x Intersection Index List Index] horizontal Segment Lists append line Segments return horizontal Segment Lists
def parse hl lines expr if not expr return []try return list map int expr split except Value Error return []
def link to text *args **kwargs assert len args < 2 ' Toomanyunnamedarguments'def link class kwargs 'createsclassesforthelink tocalls'suppress active class kwargs pop 'suppress active class' False if not suppress active class and link active kwargs active 'active'else active ''kwargs pop 'highlight actions' '' return kwargs pop 'class ' '' + active or None def create link text text **kwargs ' Updatelinktexttoaddaiconorspanifspecifiedinthe\nkwargs'if kwargs pop 'inner span' None text literal '<span>' + text + literal '</span>' if icon text literal '<iclass "icon-%s"></i>' % icon + text return texticon kwargs pop 'icon' None class link class kwargs return tags link to create link text text **kwargs url for *args **kwargs class class
def link to text *args **kwargs assert len args < 2 ' Toomanyunnamedarguments'def link class kwargs 'createsclassesforthelink tocalls'suppress active class kwargs pop 'suppress active class' False if not suppress active class and link active kwargs active 'active'else active ''kwargs pop 'highlight actions' '' return kwargs pop 'class ' '' + active or None def create link text text **kwargs ' Updatelinktexttoaddaiconorspanifspecifiedinthe\nkwargs'if kwargs pop 'inner span' None text literal '<span>' + text + literal '</span>' if icon text literal '<iclass "icon-%s"></i>' % icon + text return texticon kwargs pop 'icon' None class link class kwargs return tags link to create link text text **kwargs url for *args **kwargs class class
def xstrip filename while xisabs filename if re match '\\w [\\\\/]' filename filename re sub '^\\w+ [\\\\/]+' '' filename elif re match '[\\\\/]' filename filename re sub '^[\\\\/]+' '' filename return filename
def xstrip filename while xisabs filename if re match '\\w [\\\\/]' filename filename re sub '^\\w+ [\\\\/]+' '' filename elif re match '[\\\\/]' filename filename re sub '^[\\\\/]+' '' filename return filename
@click command @click option '-f' '--filename' help ' Fixtures JSO Npath' default ' /etc/fixtures/initial data json' @click option '-b' '--baseurl' help 'baseurltouse' default None @click option '--reset/--no-reset' default False def populate filename baseurl None reset False populator Populate db filepath filename baseurl baseurl app app if not reset try populator except Runtime Error with app test request context base url baseurl or 'http //localhost 5000 /' populator else populator reset
@contextlib contextmanagerdef captured cuda stdout sys stdout flush if config ENABLE CUDASIM with captured stdout as stream yield Python Text Capture stream else from numba import cudafd sys stdout fileno with redirect fd fd as stream yield CUDA Text Capture stream cuda synchronize
@contextlib contextmanagerdef captured cuda stdout sys stdout flush if config ENABLE CUDASIM with captured stdout as stream yield Python Text Capture stream else from numba import cudafd sys stdout fileno with redirect fd fd as stream yield CUDA Text Capture stream cuda synchronize
def match Only At Col n def verify Col strg locn toks if col locn strg n raise Parse Exception strg locn 'matchedtokennotatcolumn%d' % n return verify Col
def match Only At Col n def verify Col strg locn toks if col locn strg n raise Parse Exception strg locn 'matchedtokennotatcolumn%d' % n return verify Col
def max heapify seq i n l 2 * i + 1 r 2 * i + 2 if l < n and seq[l] > seq[i] largest lelse largest iif r < n and seq[r] > seq[largest] largest rif largest i seq[i] seq[largest] seq[largest] seq[i] max heapify seq largest n
def max heapify seq i n l 2 * i + 1 r 2 * i + 2 if l < n and seq[l] > seq[i] largest lelse largest iif r < n and seq[r] > seq[largest] largest rif largest i seq[i] seq[largest] seq[largest] seq[i] max heapify seq largest n
def max heapify seq i n l 2 * i + 1 r 2 * i + 2 if l < n and seq[l] > seq[i] largest lelse largest iif r < n and seq[r] > seq[largest] largest rif largest i seq[i] seq[largest] seq[largest] seq[i] max heapify seq largest n
def max heapify seq i n l 2 * i + 1 r 2 * i + 2 if l < n and seq[l] > seq[i] largest lelse largest iif r < n and seq[r] > seq[largest] largest rif largest i seq[i] seq[largest] seq[largest] seq[i] max heapify seq largest n
def dup integrate f m K if m < 0 or not f return fg [K zero] * m for i c in enumerate reversed f n i + 1 for j in range 1 m n * i + j + 1 g insert 0 K exquo c K n return g
def rename node graph node id copy id graph add node silent copy id graph node[copy id] graph node[node id]for nbr in graph neighbors node id wt graph[node id][nbr]['weight']graph add edge nbr copy id {'weight' wt} graph remove node node id
def rename node graph node id copy id graph add node silent copy id graph node[copy id] graph node[node id]for nbr in graph neighbors node id wt graph[node id][nbr]['weight']graph add edge nbr copy id {'weight' wt} graph remove node node id
def analyze modules project task handle taskhandle Null Task Handle resources project get python files job set task handle create jobset ' Analyzing Modules' len resources for resource in resources job set started job resource path analyze module project resource job set finished job
def repolist status '' media None manager MANAGE Rwith settings hide 'running' 'stdout' if media repos run as root "% manager srepolist% status s sed'$d' sed-n'/repoid/ $p'" % locals else repos run as root "% manager srepolist% status s sed'/ Media\\ Debug/d' sed'$d' sed-n'/repoid/ $p'" % locals return map lambda line line split '' [0 ] repos splitlines [1 ]
@raise eventdef send response resource response if isinstance response Response return responseelse return prepare response resource * response if response else [ None]
def abcd normalize A None B None C None D None A B C D map atleast 2d or none A B C D MA NA shape or none A MB NB shape or none B MC NC shape or none C MD ND shape or none D p choice not none MA MB NC q choice not none NB ND r choice not none MC MD if p is None or q is None or r is None raise Value Error ' Notenoughinformationonthesystem ' A B C D map none to empty 2d A B C D A restore A p p B restore B p q C restore C r p D restore D r q return A B C D
def Named Tuple Row cursor from collections import namedtupleattr names [x[ 0 ] for x in cursor Col Buffer List]class Row namedtuple ' Row' attr names rename True cursor description cursor descriptiondef new cls iterable return super Row cls new cls *iterable return Row
def Named Tuple Row cursor from collections import namedtupleattr names [x[ 0 ] for x in cursor Col Buffer List]class Row namedtuple ' Row' attr names rename True cursor description cursor descriptiondef new cls iterable return super Row cls new cls *iterable return Row
def Named Tuple Row cursor from collections import namedtupleattr names [x[ 0 ] for x in cursor Col Buffer List]class Row namedtuple ' Row' attr names rename True cursor description cursor descriptiondef new cls iterable return super Row cls new cls *iterable return Row
def relaxed average var name suffix rx step relaxed vars []for l in xrange rx step with tf variable scope 'RX%d' % l reuse True try relaxed vars append tf get variable var name suffix except Value Error passdsum tf add n relaxed vars avg dsum / len relaxed vars diff [ v - avg for v in relaxed vars]davg tf add n [ d * d for d in diff] return avg tf reduce sum davg
def relaxed average var name suffix rx step relaxed vars []for l in xrange rx step with tf variable scope 'RX%d' % l reuse True try relaxed vars append tf get variable var name suffix except Value Error passdsum tf add n relaxed vars avg dsum / len relaxed vars diff [ v - avg for v in relaxed vars]davg tf add n [ d * d for d in diff] return avg tf reduce sum davg
def relaxed average var name suffix rx step relaxed vars []for l in xrange rx step with tf variable scope 'RX%d' % l reuse True try relaxed vars append tf get variable var name suffix except Value Error passdsum tf add n relaxed vars avg dsum / len relaxed vars diff [ v - avg for v in relaxed vars]davg tf add n [ d * d for d in diff] return avg tf reduce sum davg
def chunks l n for i in range 0 len l n yield l[i i + n ]
def direct to template request template extra context None **kwargs context extra context or {} context[u'params'] kwargsfor key value in context items if callable value context[key] value return Template Response request template context
def direct to template request template extra context None **kwargs context extra context or {} context[u'params'] kwargsfor key value in context items if callable value context[key] value return Template Response request template context
def direct to template request template extra context None **kwargs context extra context or {} context[u'params'] kwargsfor key value in context items if callable value context[key] value return Template Response request template context
def receive message sock operation request id max message size MAX MESSAGE SIZE header receive data on socket sock 16 length UNPACK INT header[ 4] [0 ]actual op UNPACK INT header[ 12 ] [0 ]if operation actual op raise Protocol Error ' Gotopcode%rbutexpected%r' % actual op operation if request id is not None response id UNPACK INT header[ 8 12 ] [0 ]if request id response id raise Protocol Error ' Gotresponseid%rbutexpected%r' % response id request id if length < 16 raise Protocol Error ' Messagelength %r notlongerthanstandardmessageheadersize 16 ' % length if length > max message size raise Protocol Error ' Messagelength %r islargerthanservermaxmessagesize %r ' % length max message size return receive data on socket sock length - 16
def list master symlinks saltenv 'base' prefix '' return context ['fileclient'] symlink list saltenv prefix
def Remove Link Dependencies From None Targets targets for target name target dict in targets iteritems for dependency key in dependency sections dependencies target dict get dependency key [] if dependencies for t in dependencies if target dict get 'type' None 'none' if targets[t] get 'variables' {} get 'link dependency' 0 target dict[dependency key] Filter target dict[dependency key] t
def remove markup html return HTML bleach clean html tags [] strip True
def chess pgn graph pgn file 'chess masters WCC pgn bz 2 ' import bz 2 G nx Multi Di Graph game {}datafile bz 2 BZ 2 File pgn file lines line decode rstrip '\r\n' for line in datafile for line in lines if line startswith '[' tag value line[ 1 -1 ] split '' 1 game[str tag ] value strip '"' elif game white game pop ' White' black game pop ' Black' G add edge white black **game game {}return G
def chess pgn graph pgn file 'chess masters WCC pgn bz 2 ' import bz 2 G nx Multi Di Graph game {}datafile bz 2 BZ 2 File pgn file lines line decode rstrip '\r\n' for line in datafile for line in lines if line startswith '[' tag value line[ 1 -1 ] split '' 1 game[str tag ] value strip '"' elif game white game pop ' White' black game pop ' Black' G add edge white black **game game {}return G
def chess pgn graph pgn file 'chess masters WCC pgn bz 2 ' import bz 2 G nx Multi Di Graph game {}datafile bz 2 BZ 2 File pgn file lines line decode rstrip '\r\n' for line in datafile for line in lines if line startswith '[' tag value line[ 1 -1 ] split '' 1 game[str tag ] value strip '"' elif game white game pop ' White' black game pop ' Black' G add edge white black **game game {}return G
def Set Help Menu Other Help main Menu global help ID Mapif help ID Map is None help ID Map {}cmd ID win 32 ui ID HELP OTHE Rexclude List [' Main Python Documentation' ' Pythonwin Reference']first List List All Help Files exclude Fnames []for desc fname in first List if desc in exclude List exclude Fnames append fname help Descs []for desc fname in first List if fname not in exclude Fnames help ID Map[cmd ID] desc fname win 32 ui Get Main Frame Hook Command Handle Help Other Command cmd ID cmd ID cmd ID + 1 help Menu main Menu Get Sub Menu main Menu Get Menu Item Count - 1 other Help Menu Pos 2other Menu help Menu Get Sub Menu other Help Menu Pos while other Menu Get Menu Item Count other Menu Delete Menu 0 win 32 con MF BYPOSITION if help ID Map for id desc fname in help ID Map iteritems other Menu Append Menu win 32 con MF ENABLED win 32 con MF STRING id desc else help Menu Enable Menu Item other Help Menu Pos win 32 con MF BYPOSITION win 32 con MF GRAYED
def redirect post save redirect obj if post save redirect return Http Response Redirect post save redirect % obj dict elif hasattr obj 'get absolute url' return Http Response Redirect obj get absolute url else raise Improperly Configured ' No UR Ltoredirectto Eitherpassapost save redirectparametertothegenericviewordefineaget absolute urlmethodonthe Model '
def redirect post save redirect obj if post save redirect return Http Response Redirect post save redirect % obj dict elif hasattr obj 'get absolute url' return Http Response Redirect obj get absolute url else raise Improperly Configured ' No UR Ltoredirectto Eitherpassapost save redirectparametertothegenericviewordefineaget absolute urlmethodonthe Model '
def write fft fft features fn base fn ext os path splitext fn data fn base fn + ' fft' np save data fn fft features print ' Written' % data fn
def get osarch ret subprocess Popen 'rpm--eval"%{ host cpu}"' shell True close fds True stdout subprocess PIPE stderr subprocess PIPE communicate [0 ]return ret or 'unknown'
def package minifest request if not settings MARKETPLACE GUID return Http Response Not Found return mini manifest request settings MARKETPLACE GUID
def render template context None **kwargs renderer Renderer return renderer render template context **kwargs
def serialize rules rules result [ rule name str rule for rule name rule in rules items ]return sorted result key lambda rule rule[ 0 ]
def serialize rules rules result [ rule name str rule for rule name rule in rules items ]return sorted result key lambda rule rule[ 0 ]
def fix return node if isinstance node datetime datetime node value str node elif isinstance node list node value [fix return item for item in node]elif isinstance node dict node value dict [ item fix return node[item] for item in node keys ] else node value nodereturn node value
def add lock packages **kwargs locks list locks added []try packages list salt ['pkg resource parse targets'] packages [0 ] keys except Minion Error as exc raise Command Execution Error exc for pkg in packages if not locks get pkg added append pkg if added zypper call 'al' *added return {'added' len added 'packages' added}
def allcap differential words is different Falseallcap words 0for word in words if word isupper allcap words + 1cap differential len words - allcap words if cap differential > 0 and cap differential < len words is different Truereturn is different
@after each scenariodef stop stubs scenario for name in SERVICES keys stub server getattr world name None if stub server is not None stub server shutdown
def filter bultins module name module name return not name startswith 'django contrib' and name 'lettuce django'
def filter bultins module name module name return not name startswith 'django contrib' and name 'lettuce django'
def filter bultins module name module name return not name startswith 'django contrib' and name 'lettuce django'
def get name levels node visitor Node Name Collector ast walk node visitor return visitor names
@simple decoratordef check local site access view func def check request local site name None *args **kwargs if local site name if not request local site raise Http 404 local site request local siteif not local site is accessible by request user if local site public or request user is authenticated response render to response 'permission denied html' Request Context request response status code 403 return responseelse return Http Response Redirect '%s?next page %s' % reverse 'login' request get full path else local site Nonereturn view func request local site local site *args **kwargs return check
def get Last Message acc path os path expanduser '~/ Library/ Application Support/ Skype/' + get User Name + '/main db' with contextlib closing sqlite 3 connect path cursor as db db execute 'SELEC Ttimestamp body xml FROM Messages WHER Eauthor ?ORDERB Ytimestamp DESCLIMIT 1 ' acc return db fetchone
def render link tag url rel u'stylesheet' media None attrs {u'href' url u'rel' rel}if media attrs[u'media'] mediareturn render tag u'link' attrs attrs close False
def str From Date date return time strftime '%Y %m %d%H %M' date
def Escape Make Variable Expansion s return s replace '$' '$$'
def Escape Make Variable Expansion s return s replace '$' '$$'
def Escape Make Variable Expansion s return s replace '$' '$$'
def group def prep r if r interactive or r representation 'aadata' resource r resourcelist fields ['name' 'description' 'team status team status id' 'comments']resource configure list fields list fields if r interactive from s3 import S3 SQL Custom Form S3 SQL Inline Componentcrud fields ['name' 'description' S3 SQL Inline Component 'team status team' fields [ '' 'status id' ] label T ' Status' multiple False 'comments']crud form S3 SQL Custom Form *crud fields r resource configure crud form crud form return Trues 3 prep prepreturn s3 rest controller 'pr' 'group'
def save Name Cache To Db cache db con db DB Connection 'cache db' for name indexer id in name Cache iteritems cache db con action 'INSERTORREPLACEINT Oscene names indexer id name VALUES ? ? ' [indexer id name]
def read hc directory fname make ctf name directory 'hc' raise error False if fname is None logger info 'hcdatanotpresent' return Nones list with open fname 'rb' as fid while True p read one coil point fid if p is None if len s 0 logger info 'hcfileempty nodatapresent' return Nonelogger info 'hcdataread ' return sif p['valid'] s append p
def read hc directory fname make ctf name directory 'hc' raise error False if fname is None logger info 'hcdatanotpresent' return Nones list with open fname 'rb' as fid while True p read one coil point fid if p is None if len s 0 logger info 'hcfileempty nodatapresent' return Nonelogger info 'hcdataread ' return sif p['valid'] s append p
def get Distance To Line begin end point point Minus Begin point - begin if begin end return abs point Minus Begin end Minus Begin end - begin return abs end Minus Begin cross point Minus Begin / abs end Minus Begin
def run traffic step emr connection step jobflow name wait True sleeptime 60 retries 1 **jobflow kw jobflowid add step emr connection step jobflow name **jobflow kw if not wait returnattempts 1exit state wait for step emr connection step jobflowid sleeptime while attempts < retries and exit state COMPLETED jobflowid add step emr connection step jobflow name **jobflow kw exit state wait for step emr connection step jobflowid sleeptime attempts + 1if exit state COMPLETED msg '%sfailed exit %s ' % step name exit state if retries msg + 'retried%stimes' % retries raise Emr Exception msg
def cms to token cms text start delim '-----BEGINCMS-----'end delim '-----ENDCMS-----'signed text cms textsigned text signed text replace '/' '-' signed text signed text replace start delim '' signed text signed text replace end delim '' signed text signed text replace '\n' '' return signed text
def is int s if not s return Truetry int s return Trueexcept Value Error return False
def get conn socket '/var/run/haproxy sock' assert os path exists socket '{ 0 }doesnotexist ' format socket issock os stat socket st modeassert stat S ISSOCK issock '{ 0 }isnotasocket ' format socket ha conn haproxy conn Ha P Conn socket return ha conn
def lint citations tool xml lint ctx root tool xml getroot citations root findall 'citations' if len citations > 1 lint ctx error ' Morethanonecitationsectionfound behaviorundefined ' returnif len citations 0 lint ctx warn ' Nocitationsfound consideraddingcitationstoyourtool ' returnvalid citations 0for citation in citations[ 0 ] if citation tag 'citation' lint ctx warn ' Unknowntagdiscoveredincitationsblock[%s] willbeignored ' % citation tag if 'type' in citation attrib citation type citation attrib get 'type' if citation type not in ['doi' 'bibtex'] lint ctx warn ' Unknowncitationtypediscovered[%s] willbeignored ' citation type else valid citations + 1if valid citations > 0 lint ctx valid ' Found%dlikelyvalidcitations ' valid citations
def get snapshot artifactory url repository group id artifact id packaging version snapshot version None target dir '/tmp' target file None classifier None username None password None log debug ' MODULEFUNCTION artifactory get snapshot artifactory url %s repository %s group id %s artifact id %s packaging %s version %s target dir %s classifier %s ' artifactory url repository group id artifact id packaging version target dir classifier headers {}if username and password headers[' Authorization'] ' Basic{ 0 }' format base 64 encodestring '{ 0 } {1 }' format username password replace '\n' '' snapshot url file name get snapshot url artifactory url artifactory url repository repository group id group id artifact id artifact id version version packaging packaging snapshot version snapshot version classifier classifier headers headers target file resolve target file file name target dir target file return save artifact snapshot url target file headers
def returns None function def call and assert *args **kwargs original args copy deepcopy args original kwargs copy deepcopy kwargs result function *args **kwargs assert result is None ' Shouldreturn Nonewhencalledwithargs {args}andkwargs {kwargs}' format args original args kwargs original kwargs return resultreturn call and assert
def delete demo exploration id if not exp domain Exploration is demo exploration id exploration id raise Exception ' Invaliddemoexplorationid%s' % exploration id exploration get exploration by id exploration id strict False if not exploration logging info ' Explorationwithid%swasnotdeleted becauseitdoesnotexist ' % exploration id else delete exploration feconf SYSTEM COMMITTER ID exploration id force deletion True
def hypersimp f k f sympify f g f subs k k + 1 / f g g rewrite gamma g expand func g g powsimp g deep True combine 'exp' if g is rational function k return simplify g ratio S Infinity else return None
def setup platform hass config add devices discovery info None from xboxapi import xbox apiapi xbox api Xbox Api config get CONF API KEY devices []for xuid in config get CONF XUID new device Xbox Sensor hass api xuid if new device success init devices append new device if len devices > 0 add devices devices else return False
@contextlib contextmanagerdef refcounting type gc collect refcount len objgraph by type type yield refcount gc collect assert len objgraph by type type < refcount ' More{ 0 r}objectsstillinmemorythanbefore '
def exception handler type value tb msg ''if hasattr value 'filename' and value filename None msg value filename + ' ' if hasattr value 'strerror' and value strerror None msg + value strerrorelse msg + str value if len msg error msg qt msg
def exception handler type value tb msg ''if hasattr value 'filename' and value filename None msg value filename + ' ' if hasattr value 'strerror' and value strerror None msg + value strerrorelse msg + str value if len msg error msg qt msg
def lombscargle cdf z N normalization dH 1 dK 3 if dK - dH 2 raise Not Implemented Error ' Degreesoffreedom 2' Nk N - dK if normalization 'psd' return 1 - np exp - z elif normalization 'standard' return 1 - 1 + z ** -0 5 * Nk elif normalization 'model' return 1 - 1 - z ** 0 5 * Nk elif normalization 'log' return 1 - np exp -0 5 * Nk * z else raise Value Error "normalization '{ 0 }'isnotrecognized" format normalization
def lombscargle cdf z N normalization dH 1 dK 3 if dK - dH 2 raise Not Implemented Error ' Degreesoffreedom 2' Nk N - dK if normalization 'psd' return 1 - np exp - z elif normalization 'standard' return 1 - 1 + z ** -0 5 * Nk elif normalization 'model' return 1 - 1 - z ** 0 5 * Nk elif normalization 'log' return 1 - np exp -0 5 * Nk * z else raise Value Error "normalization '{ 0 }'isnotrecognized" format normalization
def test close process when normal with pipeline get cat pipeline pipeline PIPE pipeline PIPE as pl assert len pl commands 1 assert pl commands[ 0 ] process poll is None pipeline wait pl
def test close process when normal with pipeline get cat pipeline pipeline PIPE pipeline PIPE as pl assert len pl commands 1 assert pl commands[ 0 ] process poll is None pipeline wait pl
def test close process when normal with pipeline get cat pipeline pipeline PIPE pipeline PIPE as pl assert len pl commands 1 assert pl commands[ 0 ] process poll is None pipeline wait pl
def deprecated Deferred Generator f return run With Warnings Suppressed [SUPPRESS message 'twisted internet defer deferred Generatorwasdeprecated' ] deferred Generator f
def value for key tuple of tuples key for t in tuple of tuples if t[ 0 ] key return t[ 1 ]else return key
def memory usage pid if pid 0 return 0 0 start time parameter time time 'memoryusage' status path '/proc/%s/status' % pid mem lines get lines status path ' Vm RSS ' ' Vm Size ' parameter try resident Size int mem lines[' Vm RSS '] split [1 ] * 1024 virtual Size int mem lines[' Vm Size '] split [1 ] * 1024 log runtime parameter '%s[ Vm RSS Vm Size]' % status path start time return resident Size virtual Size except exc IO Error 'unabletoparsethe%s Vm RS Sand Vm Sizeentries %s' % status path ' ' join mem lines log failure parameter exc raise exc
def convert background to jpg background url file path get path of temp url background url im Image open file path out im file path replace 'png' 'jpg' bg Image new 'RGB' im size 255 255 255 bg paste im 0 0 im bg save out im quality 55 return out im
def convert background to jpg background url file path get path of temp url background url im Image open file path out im file path replace 'png' 'jpg' bg Image new 'RGB' im size 255 255 255 bg paste im 0 0 im bg save out im quality 55 return out im
def convert background to jpg background url file path get path of temp url background url im Image open file path out im file path replace 'png' 'jpg' bg Image new 'RGB' im size 255 255 255 bg paste im 0 0 im bg save out im quality 55 return out im
def clean dir directory sh 'find{dir}-typef-delete' format dir directory
def gaussian x mean stddev tmp -0 5 * sum x - mean / stddev ** 2 return np exp tmp / np power 2 0 * np pi 0 5 * len x * stddev
def ls dir None recurse False indent 0 dir dir or os getcwd fns os listdir dir fns sort for fn in fns full os path join dir fn if os path isdir full fn fn + '/' print '' * indent + fn if os path isdir full and recurse ls dir full recurse True indent indent + 2
def get user return store user
def get file name type test platform None return ' ' join get platform string platform type module get class name type test + ' log'
def virtual if salt utils is sunos and check fmadm and check fmdump return virtualname return False '{ 0 }modulecanonlybeloadedon Solariswiththefaultmanagementinstalled' format virtualname
def gidcounter global GCOUNTGCOUNT + 1return '%s-%s' % time strftime DATESTRING GCOUNT
def log to file filename level DEBUG l logging get Logger 'paramiko' if len l handlers > 0 returnl set Level level f open filename 'w' lh logging Stream Handler f lh set Formatter logging Formatter '% levelname - 3s[% asctime s % msecs 03 d]thr % threadid -3 d% name s % message s' '%Y%m%d-%H %M %S' l add Handler lh
def make Line Numbers how Many width len str how Many labels [ '%*d' % width i for i in range 1 how Many + 1 ]p dom Element 'p' p set Attribute 'class' 'py-linenumber' t dom Text t data '\n' join labels + '\n' p append Child t return p
def model Control Finish Learning Cb model model finish Learning return
def resample obj kind None **kwds tg Time Grouper **kwds return tg get resampler obj kind kind
def resample obj kind None **kwds tg Time Grouper **kwds return tg get resampler obj kind kind
def server enable s name **connection args ret Trueserver server get s name **connection args if server is None return Falseif server get state 'ENABLED' return Truenitro connect **connection args if nitro is None return Falsetry NS Server enable nitro server except NS Nitro Error as error log debug 'netscalermoduleerror-NS Server enable failed {0 }' format error ret False disconnect nitro return ret
def linesearch powell func p xi tol 0 001 def myfunc alpha return func p + alpha * xi alpha min fret iter num brent myfunc full output 1 tol tol xi alpha min * xi return squeeze fret p + xi xi
def linesearch powell func p xi tol 0 001 def myfunc alpha return func p + alpha * xi alpha min fret iter num brent myfunc full output 1 tol tol xi alpha min * xi return squeeze fret p + xi xi
def stop Touch App if Event Loop is None returnif Event Loop status 'started' return Logger info ' Base Leavingapplicationinprogress ' Event Loop close
def stop Touch App if Event Loop is None returnif Event Loop status 'started' return Logger info ' Base Leavingapplicationinprogress ' Event Loop close
def show hc kwargs None call None if call 'function' raise Salt Cloud System Exit ' Theshow hcfunctionmustbecalledwith-for--function ' if not kwargs or 'name' not in kwargs log error ' Mustspecifynameofhealthcheck ' return Falseconn get conn return expand item conn ex get healthcheck kwargs['name']
def get default keychain user None domain 'user' cmd 'securitydefault-keychain-d{ 0 }' format domain return salt ['cmd run'] cmd runas user
def get default keychain user None domain 'user' cmd 'securitydefault-keychain-d{ 0 }' format domain return salt ['cmd run'] cmd runas user
def get default keychain user None domain 'user' cmd 'securitydefault-keychain-d{ 0 }' format domain return salt ['cmd run'] cmd runas user
def wrapper orig pre '' post '' err None run args None **kwargs ret ''cmd cmd **kwargs cmd str '' join [x for x in pre cmd post orig ] if run args and isinstance run args dict res salt ['cmd run all'] cmd str **run args else res salt ['cmd run all'] cmd str if isinstance err dict for k v in six itermitems res err [k] vif 'retcode' in res and res['retcode'] 0 msg '' join [x for x in res['stdout'] res['stderr'] if x] ret ' Unabletorun"{ 0 }"withrun args "{ 1 }" Error {2 }' format cmd str run args msg log error ret else try ret res['stdout']except Key Error log error "cmd run alldidnotreturnadictionarywithakeynamed'stdout'" return ret
def test nvidia driver 3 var cuda fvector f theano function [var] var + 1 mode mode with gpu profile False topo f maker fgraph toposort assert any [isinstance node op cuda Gpu Elemwise for node in topo] assert theano sandbox cuda use device number is not None
def test nvidia driver 3 var cuda fvector f theano function [var] var + 1 mode mode with gpu profile False topo f maker fgraph toposort assert any [isinstance node op cuda Gpu Elemwise for node in topo] assert theano sandbox cuda use device number is not None
@app route '/hello' def hello response make response json dumps {'hello' current app config['HELLO']} response headers[' Content- Type'] 'application/json'return response
@app route '/hello' def hello response make response json dumps {'hello' current app config['HELLO']} response headers[' Content- Type'] 'application/json'return response
def rogerstanimoto u v u validate vector u v validate vector v nff nft ntf ntt nbool correspond all u v return float 2 0 * ntf + nft / float ntt + nff + 2 0 * ntf + nft
def boot time time format None try b time int psutil boot time except Attribute Error b time int psutil boot time if time format b time datetime datetime fromtimestamp b time try return b time strftime time format except Type Error as exc raise Salt Invocation Error ' Invalidformatstring {0 }' format exc return b time
def boot time time format None try b time int psutil boot time except Attribute Error b time int psutil boot time if time format b time datetime datetime fromtimestamp b time try return b time strftime time format except Type Error as exc raise Salt Invocation Error ' Invalidformatstring {0 }' format exc return b time
def find files root dir should include paths []is module lambda path path endswith ' py' for dir path dir names file names in os walk root dir new paths [os path join dir path file name for file name in file names]new paths filter is module new paths new paths filter should include new paths paths extend new paths return paths
def notify about aggregate update context event suffix aggregate payload aggregate identifier aggregate payload get 'aggregate id' None if not aggregate identifier aggregate identifier aggregate payload get 'name' None if not aggregate identifier LOG debug ' Noaggregateidornamespecifiedforthisnotificationanditwillbeignored' returnnotifier rpc get notifier service 'aggregate' host aggregate identifier notifier info context 'aggregate %s' % event suffix aggregate payload
@register inclusion tag 'zinnia/tags/dummy html' takes context True def get categories tree context template 'zinnia/tags/categories tree html' return {'template' template 'categories' Category objects all annotate count entries Count 'entries' 'context category' context get 'category' }
def get configuration dict name default None default default or {} output default copy output update get configuration value name {} or {} return output
def random objs objs album number 1 time None equal chance False if equal chance perm equal chance permutation objs else perm objsrandom shuffle perm if time return take time perm time * 60 album else return take perm number
def to full path item path prefix if not item return itemreturn item[ 0 ] item[ 1 ] path prefix + item[ 2 ]
def letter form to array form array form group a list array form[ ] new array []n 1symbols group symbolsfor i in range len a if i len a - 1 if a[i] a[ i - 1 ] if - a[i] in symbols new array append - a[i] - n else new array append a[i] n elif - a[i] in symbols new array append - a[i] -1 else new array append a[i] 1 return new arrayelif a[i] a[ i + 1 ] n + 1else if - a[i] in symbols new array append - a[i] - n else new array append a[i] n n 1
def letter form to array form array form group a list array form[ ] new array []n 1symbols group symbolsfor i in range len a if i len a - 1 if a[i] a[ i - 1 ] if - a[i] in symbols new array append - a[i] - n else new array append a[i] n elif - a[i] in symbols new array append - a[i] -1 else new array append a[i] 1 return new arrayelif a[i] a[ i + 1 ] n + 1else if - a[i] in symbols new array append - a[i] - n else new array append a[i] n n 1
def create ssh wrapper ssh wrapper ssh file SSH WRAPPER with open ssh wrapper u'w' as handle handle write SSH WRAPPER TEMPLATE format known hosts ssh file KNOWN HOSTS identity ssh file RSA KEY os chmod ssh wrapper 493
def hostname dnsname if not isinstance dnsname basestring raise CX ' Invalidinput dnsnamemustbeastring' else dnsname dnsname strip if dnsname '' return dnsnameif not RE HOSTNAME match dnsname raise CX ' Invalidhostnameformat %s ' % dnsname return dnsname
def Rekall String Renderer x try return x['str']except Key Error return x['b 64 ']
def energy H q p return H pot energy p - H logp q
def get login failed count name ret get account policy data value name 'failed Login Count' return salt utils mac utils parse return ret
def list bindings site ret dict sites list sites if site not in sites LOG warning ' Sitenotfound %s' site return retret sites[site]['bindings']if not ret LOG warning ' Nobindingsfoundforsite %s' site return ret
def protected resource scopes None validator cls O Auth 2 Validator server cls Server scopes scopes or [] def decorator view func @wraps view func def validate request *args **kwargs validator validator cls core O Auth Lib Core server cls validator valid oauthlib req core verify request request scopes scopes if valid request resource owner oauthlib req userreturn view func request *args **kwargs return Http Response Forbidden return validatereturn decorator
def cpu times procfs path get procfs path set scputimes ntuple procfs path with open binary '%s/stat' % procfs path as f values f readline split fields values[ 1 len scputimes fields + 1 ]fields [ float x / CLOCK TICKS for x in fields]return scputimes *fields
def cpu times procfs path get procfs path set scputimes ntuple procfs path with open binary '%s/stat' % procfs path as f values f readline split fields values[ 1 len scputimes fields + 1 ]fields [ float x / CLOCK TICKS for x in fields]return scputimes *fields
def cpu times procfs path get procfs path set scputimes ntuple procfs path with open binary '%s/stat' % procfs path as f values f readline split fields values[ 1 len scputimes fields + 1 ]fields [ float x / CLOCK TICKS for x in fields]return scputimes *fields
def cpu times procfs path get procfs path set scputimes ntuple procfs path with open binary '%s/stat' % procfs path as f values f readline split fields values[ 1 len scputimes fields + 1 ]fields [ float x / CLOCK TICKS for x in fields]return scputimes *fields
def cpu times procfs path get procfs path set scputimes ntuple procfs path with open binary '%s/stat' % procfs path as f values f readline split fields values[ 1 len scputimes fields + 1 ]fields [ float x / CLOCK TICKS for x in fields]return scputimes *fields
def create module name module new module name sys modules[name] modulereturn module
def is unresponsive url host urlparse url hostnamereturn host in unresponsive hosts
def numeric collator global numeric collatorif numeric collator is None numeric collator collator clone numeric collator strength icu UCOL SECONDARY numeric collator numeric Truereturn numeric collator
def numeric collator global numeric collatorif numeric collator is None numeric collator collator clone numeric collator strength icu UCOL SECONDARY numeric collator numeric Truereturn numeric collator
def encode text name value dummy 0 dummy 1 value utf 8 encode value [0 ]return '\x 02 ' + name + PACK INT len value + 1 + value + '\x 00 '
def generate task families task class n ret {}for i in range n class name '{} {}' format task class task family i ret[class name] type class name task class {} return ret
def get corrected exif image original if 'exif' in original info image exif image info get 'exif' piexif dump {} original exif original info['exif']image exif update exif orientation image exif get exif orientation original exif return image exif
def save to disk db ids root opts None callback None root opts length sanitize args root opts failures []for x in ids tb ''try failed id title save book to disk x db root opts length tb ' Requestedformatsnotavailable' except failed id title True x db title x index is id True tb traceback format exc if failed failures append id title tb if callable callback if not callback int id title failed tb breakreturn failures
def asmodule module if isinstance module types Module Type return moduleelif isinstance module str return import module fromlist [''] else raise Type Error type module
def test suffix formatter hug output format suffix {' js' hug output format json ' html' hug output format text} class Fake Request object path 'endpoint js'request Fake Request response Fake Request converted hug input format json formatter Bytes IO hug output format json {'name' 'name'} request response assert converted {'name' 'name'} request path 'endpoint html'assert formatter 'hi' request response 'hi' with pytest raises hug HTTP Not Acceptable request path 'undefined always'formatter 'hi' request response
def test suffix formatter hug output format suffix {' js' hug output format json ' html' hug output format text} class Fake Request object path 'endpoint js'request Fake Request response Fake Request converted hug input format json formatter Bytes IO hug output format json {'name' 'name'} request response assert converted {'name' 'name'} request path 'endpoint html'assert formatter 'hi' request response 'hi' with pytest raises hug HTTP Not Acceptable request path 'undefined always'formatter 'hi' request response
def transcribe dna if isinstance dna Seq return dna transcribe elif isinstance dna Mutable Seq return dna toseq transcribe else return dna replace 'T' 'U' replace 't' 'u'
def get Boolean value return bool value
@contextmanagerdef temporary file root dir None cleanup True suffix u'' permissions None with tempfile Named Temporary File suffix suffix dir root dir delete False as fd try if permissions is not None os chmod fd name permissions yield fd finally if cleanup safe delete fd name
def get scanner hass config for cls in [ Tplink 4 Device Scanner Tplink 3 Device Scanner Tplink 2 Device Scanner Tplink Device Scanner] scanner cls config[DOMAIN] if scanner success init return scannerreturn None
def enable monitor mode iface global RUN CONFI Gprint GR + '[+]' + W + 'enablingmonitormodeon%s ' % G + iface + W stdout flush call ['airmon-ng' 'start' iface] stdout DN stderr DN print 'done'RUN CONFIG IFACE TO TAKE DOWN get iface if RUN CONFIG TX POWER > 0 print GR + '[+]' + W + 'setting Txpowerto%s%s%s ' % G RUN CONFIG TX POWER W call ['iw' 'reg' 'set' 'BO'] stdout OUTLOG stderr ERRLOG call ['iwconfig' iface 'txpower' RUN CONFIG TX POWER] stdout OUTLOG stderr ERRLOG print 'done'return RUN CONFIG IFACE TO TAKE DOWN
def enable monitor mode iface global RUN CONFI Gprint GR + '[+]' + W + 'enablingmonitormodeon%s ' % G + iface + W stdout flush call ['airmon-ng' 'start' iface] stdout DN stderr DN print 'done'RUN CONFIG IFACE TO TAKE DOWN get iface if RUN CONFIG TX POWER > 0 print GR + '[+]' + W + 'setting Txpowerto%s%s%s ' % G RUN CONFIG TX POWER W call ['iw' 'reg' 'set' 'BO'] stdout OUTLOG stderr ERRLOG call ['iwconfig' iface 'txpower' RUN CONFIG TX POWER] stdout OUTLOG stderr ERRLOG print 'done'return RUN CONFIG IFACE TO TAKE DOWN
def Get Mime Type file name extension index file name rfind ' ' if extension index -1 extension ''else extension file name[ extension index + 1 ] lower if extension in EXTENSION BLACKLIST raise Invalid Attachment Type Error ' Extension%sisnotsupported ' % extension mime type EXTENSION MIME MAP get extension None if mime type is None mime type 'application/octet-stream'return mime type
def test sobel horizontal i j np mgrid[ -5 6 -5 6]image i > 0 astype float result filters sobel image * np sqrt 2 i[ np abs j 5 ] 10000 assert allclose result[ i 0 ] 1 assert np all result[ np abs i > 1 ] 0
def setup hass config conf config[DOMAIN]token conf get CONF TOKEN le wh '{}{}' format DEFAULT HOST token def logentries event listener event ' Listenfornewmessagesonthebusandsendsthemto Logentries 'state event data get 'new state' if state is None returntry state state helper state as number state except Value Error state state statejson body [{'domain' state domain 'entity id' state object id 'attributes' dict state attributes 'time' str event time fired 'value' state}]try payload {'host' le wh 'event' json body}requests post le wh data json dumps payload timeout 10 except requests exceptions Request Exception as error LOGGER exception ' Errorsendingto Logentries %s' error hass bus listen EVENT STATE CHANGED logentries event listener return True
def partition entropy by inputs attribute partitions partition by inputs attribute return partition entropy partitions values
def upgrade migrate engine if migrate engine name in 'sqlite' 'postgresql' for table name index name column names in INDEXES ensure index exists migrate engine table name index name column names elif migrate engine name 'mysql' ensure index removed migrate engine 'dns domains' 'project id' ensure index exists migrate engine 'dns domains' 'dns domains project id idx' ['project id'] ensure index removed migrate engine 'virtual interfaces' 'network id' ensure index exists migrate engine 'virtual interfaces' 'virtual interfaces network id idx' ['network id']
def upgrade migrate engine if migrate engine name in 'sqlite' 'postgresql' for table name index name column names in INDEXES ensure index exists migrate engine table name index name column names elif migrate engine name 'mysql' ensure index removed migrate engine 'dns domains' 'project id' ensure index exists migrate engine 'dns domains' 'dns domains project id idx' ['project id'] ensure index removed migrate engine 'virtual interfaces' 'network id' ensure index exists migrate engine 'virtual interfaces' 'virtual interfaces network id idx' ['network id']
def run Test Slow test name mode output errors ec run one command mode test name return ec errors
def inject **k return Injection Factory k
def inject **k return Injection Factory k
def inject **k return Injection Factory k
def inject **k return Injection Factory k
def inject **k return Injection Factory k
def push location source None version None force False cmd ['bzr' 'push']if source cmd extend ['-d' source] if version cmd extend ['-r' version] if force cmd extend ['--create-prefix' '--use-existing-dir' '--overwrite'] cmd append location cmd '' join cmd local cmd
def risch DE fa fd ga gd DE fa fd weak normalizer fa fd DE a ba bd ca cd hn normal denom fa fd ga gd DE A B C hs special denom a ba bd ca cd DE try n bound degree A B C DE except Not Implemented Error n oo B C m alpha beta spde A B C n DE if C is zero y Celse y solve poly rde B C m DE return alpha * y + beta hn * hs
def is mounted mount path source None try check cmd ['findmnt' '--target' mount path]if source check cmd extend ['--source' source] utils execute *check cmd return Trueexcept processutils Process Execution Error return Falseexcept OS Error as exc if exc errno errno ENOENT LOG info LI 'findmnttoolisnotinstalled' return False
def is mounted mount path source None try check cmd ['findmnt' '--target' mount path]if source check cmd extend ['--source' source] utils execute *check cmd return Trueexcept processutils Process Execution Error return Falseexcept OS Error as exc if exc errno errno ENOENT LOG info LI 'findmnttoolisnotinstalled' return False
@task@timeddef i18 n clean sh 'gitclean-fd Xconf/locale'
def test install package conflict prefix and user script data prefix path script scratch path / 'prefix' result script pip 'install' '-f' data find links '--no-index' '--user' '--prefix' prefix path 'simple 1 0' expect error True quiet True assert " Cannotcombine'--user'and'--prefix'" in result stderr
def get request and user id from framework sessions import get sessionreq get cache key user id Noneif isinstance req Flask Request session get session user id session data get 'auth user id' elif hasattr req 'user' user id getattr req user ' id' None return req user id
def get request and user id from framework sessions import get sessionreq get cache key user id Noneif isinstance req Flask Request session get session user id session data get 'auth user id' elif hasattr req 'user' user id getattr req user ' id' None return req user id
def authenticate lti user request lti user id lti consumer try lti user Lti User objects get lti user id lti user id lti consumer lti consumer except Lti User Does Not Exist lti user create lti user lti user id lti consumer if not request user is authenticated and request user lti user edx user switch user request lti user lti consumer
def authenticate lti user request lti user id lti consumer try lti user Lti User objects get lti user id lti user id lti consumer lti consumer except Lti User Does Not Exist lti user create lti user lti user id lti consumer if not request user is authenticated and request user lti user edx user switch user request lti user lti consumer
def eigvalsh a b None lower True overwrite a False overwrite b False turbo True eigvals None type 1 check finite True return eigh a b b lower lower eigvals only True overwrite a overwrite a overwrite b overwrite b turbo turbo eigvals eigvals type type check finite check finite
def conflict bail VC err version conflict tmpl textwrap dedent "\n Therequiredversionofsetuptools > {version} isnotavailable \nandcan'tbeinstalledwhilethisscriptisrunning Please\ninstallamorerecentversionfirst using\n'easy install- Usetuptools' \n\n Currentlyusing{VC err args[ 0 ] r} \n" msg conflict tmpl format **locals sys stderr write msg sys exit 2
def get color scheme name name name lower scheme {}for key in COLOR SCHEME KEYS try scheme[key] CONF get 'color schemes' name + '/' + key except scheme[key] CONF get 'color schemes' 'spyder/' + key return scheme
def add traits base names trait type None if trait type is None trait type traits Anyundefined traits {}for key in names base add trait key trait type undefined traits[key] Undefinedbase trait set trait change notify False **undefined traits for key in names getattr base key return base
def lastsave host None port None db None password None server connect host port db password return int server lastsave strftime '%s'
def lastsave host None port None db None password None server connect host port db password return int server lastsave strftime '%s'
@receiver post save sender Release def promote latest release sender instance **kwargs if kwargs get 'raw' False returnif instance is latest Release objects filter version instance version exclude pk instance pk update is latest False
def create message request message assert hasattr request 'session' "django-session-messagesrequiressessionmiddlewaretobeinstalled Edityour MIDDLEWARE CLASSE Ssettingtoinsert'django contrib sessions middleware Session Middleware' "try request session['messages'] append message except Key Error request session['messages'] [message]
def create profile images image file profile image names storage get profile image storage original Image open image file image set color mode to rgb original image crop image to square image for size name in profile image names items scaled scale image image size exif get corrected exif scaled original with closing create image file scaled exif as scaled image file storage save name scaled image file
def create profile images image file profile image names storage get profile image storage original Image open image file image set color mode to rgb original image crop image to square image for size name in profile image names items scaled scale image image size exif get corrected exif scaled original with closing create image file scaled exif as scaled image file storage save name scaled image file
def virtual if grains get 'init' 'runit' if grains ['os'] ' Void' add svc avail path '/etc/sv' return virtualname return False
def test flattener layer state separation for softmax soft 1 Softmax 5 'sf 1 ' 0 1 soft 2 Softmax 5 'sf 2 ' 0 1 mlp MLP layers [ Flattener Layer Composite Layer 'comp' [soft 1 soft 2 ] ] nvis 2 X np random rand 20 2 astype theano config float X y np random rand 20 10 astype theano config float X dataset Dense Design Matrix X X y y train Train dataset mlp SGD 0 1 batch size 5 monitoring dataset dataset train algorithm termination criterion Epoch Counter 1 train main loop
def stash registry xml parent data top XML Sub Element xml parent 'org jenkinsci plugins stash Notifier Stash Notifier' XML Sub Element top 'stash Server Base Url' text data get 'url' '' if data get 'credentials-id' is not None XML Sub Element top 'credentials Id' text str data get 'credentials-id' else XML Sub Element top 'stash User Name' text helpers get value from yaml or config file 'username' 'stash' data registry jjb config XML Sub Element top 'stash User Password' text helpers get value from yaml or config file 'password' 'stash' data registry jjb config XML Sub Element top 'ignore Unverified SSL Peer' text str data get 'ignore-ssl' False lower XML Sub Element top 'commit Sha 1 ' text data get 'commit-sha 1 ' '' XML Sub Element top 'include Build Number In Key' text str data get 'include-build-number' False lower
def systemctl status name contextkey 'systemd systemctl status %s' % name if contextkey in context return context [contextkey] context [contextkey] salt ['cmd run all'] systemctl cmd 'status' name python shell False redirect stderr True ignore retcode True return context [contextkey]
def systemctl status name contextkey 'systemd systemctl status %s' % name if contextkey in context return context [contextkey] context [contextkey] salt ['cmd run all'] systemctl cmd 'status' name python shell False redirect stderr True ignore retcode True return context [contextkey]
def generate completions event b event current bufferif b complete state b complete next else event cli start completion insert common part True select first False
def get self href response data jsonutils loads response body for link in data['versions'][ 0 ]['links'] if link['rel'] 'self' return link['href']return ''
def twobyte val assert isinstance val int return divmod val 256
def reverse lex ustring newstr ''for ii in ustring ordinance ord ii new byte 255 - ordinance char chr new byte newstr + charreturn newstr
def reverse lex ustring newstr ''for ii in ustring ordinance ord ii new byte 255 - ordinance char chr new byte newstr + charreturn newstr
def assert dict contains test case expected actual message '' missing items []mismatch items []no value object for key expected value in expected items actual value actual get key no value if actual value is no value missing items append key elif actual value expected value mismatch items append '{} {} {}' format key expected value actual value if missing items or mismatch items test case fail '{}\n Missingitems {}\n Mismatchitems {}\n Actualitems {}' format message missing items mismatch items actual
@receiver post migrate def sync create groups sender **kwargs if sender label u'accounts' create groups False
def parse process statistics statistics if statistics is None statistics DEFAULT STATISTIC Sstatistics util listify statistics statistics [ tuplize statistic for in statistics]for statistic in statistics if statistic[ 0 ] not in STATISTIC TYPES raise Exception ' Unknownstatistictypeencountered%s' % statistic[ 0 ] if statistic[ 1 ] not in PROCESS COLUMNS raise Exception ' Unknownprocesscolumnencountered%s' % statistic[ 1 ] return statistics
def parse process statistics statistics if statistics is None statistics DEFAULT STATISTIC Sstatistics util listify statistics statistics [ tuplize statistic for in statistics]for statistic in statistics if statistic[ 0 ] not in STATISTIC TYPES raise Exception ' Unknownstatistictypeencountered%s' % statistic[ 0 ] if statistic[ 1 ] not in PROCESS COLUMNS raise Exception ' Unknownprocesscolumnencountered%s' % statistic[ 1 ] return statistics
def parse process statistics statistics if statistics is None statistics DEFAULT STATISTIC Sstatistics util listify statistics statistics [ tuplize statistic for in statistics]for statistic in statistics if statistic[ 0 ] not in STATISTIC TYPES raise Exception ' Unknownstatistictypeencountered%s' % statistic[ 0 ] if statistic[ 1 ] not in PROCESS COLUMNS raise Exception ' Unknownprocesscolumnencountered%s' % statistic[ 1 ] return statistics
def getpackage filename src file src filename if os path isdir src file or not src file endswith ' py' and not ispackage src file return None base ext os path splitext os path basename src file if base ' init ' mod parts []else mod parts [base] path part os path split os path split src file [0 ] while part if ispackage os path join path part mod parts append part else break path part os path split path mod parts reverse return ' ' join mod parts
def adapt obj obj blob sqlite 3 Binary c Pickle dumps obj if len blob > config max blob size warnings warn 'largeobjectsstoredin SQ Lite' + LARGE BLOB WARNING format type obj len blob warnings filterwarnings 'ignore' 'largeobjects *' return blob
def clean tmp sfn if sfn startswith os path join tempfile gettempdir salt utils files TEMPFILE PREFIX all roots itertools chain from iterable six itervalues opts ['file roots'] in roots any sfn startswith root for root in all roots if os path exists sfn and not in roots os remove sfn
def set output fp import commands browsercommands OUT browser OUT fp
def flatten seq for x in seq if isinstance x types Generator Type list tuple for y in flatten x yield smart str y else yield smart str x
def bilinear kernel 1D ratio normalize True T theano tensorhalf kern T arange 1 ratio + 1 dtype theano config float X kern T concatenate [half kern half kern[ -2 -1 ]] if normalize kern / ratioreturn kern
def find review request object review request id local site q Review Request objects all if local site q q filter local site local site local id review request id else q q filter pk review request id try q q select related u'submitter' u'repository' return q get except Review Request Does Not Exist raise Http 404
def test adjust gamma greater one image np arange 0 255 4 np uint 8 reshape 8 8 expected np array [[ 0 0 0 0 1 1 2 3] [4 5 6 7 9 10 12 14 ] [16 18 20 22 25 27 30 33 ] [36 39 42 45 49 52 56 60 ] [64 68 72 76 81 85 90 95 ] [100 105 110 116 121 127 132 138 ] [144 150 156 163 169 176 182 189 ] [196 203 211 218 225 233 241 249 ]] dtype np uint 8 result exposure adjust gamma image 2 assert array equal result expected
def generate clone url for installed repository app repository tool shed url get tool shed url from tool shed registry app str repository tool shed return util build url tool shed url pathspec ['repos' str repository owner str repository name ]
def headers url generator resp fuzzable req resp headers resp get headers for parser header names in URL HEADERS iteritems for header name in header names header value resp headers iget header name None if header value is not None header value smart unicode header value encoding resp charset for ref in parser resp header name header value yield ref fuzzable req resp False
def item to entry iterator resource loggers return entry from resource resource iterator client loggers
def manual search session task artist input u' Artist ' strip name input u' Album ' if task is album else u' Track ' strip if task is album prop autotag tag album task items artist name return propelse return autotag tag item task item artist name
def delete stream client stream name wait False wait timeout 300 check mode False success Falsechanged Falseerr msg ''results dict stream found stream msg current stream find stream client stream name check mode check mode if stream found success err msg stream action client stream name action 'delete' check mode check mode if success changed Trueif wait success err msg results wait for status client stream name 'DELETING' wait timeout check mode check mode err msg ' Stream{ 0 }deletedsuccessfully' format stream name if not success return success True err msg results else err msg ' Stream{ 0 }isintheprocessofbeingdeleted' format stream name else success Truechanged Falseerr msg ' Stream{ 0 }doesnotexist' format stream name return success changed err msg results
def get site profile self local site if not hasattr self u' site profiles' self site profiles {}if local site pk not in self site profiles site profile Local Site Profile objects get user self local site local site site profile user selfsite profile local site local siteself site profiles[local site pk] site profilereturn self site profiles[local site pk]
def create prereqs cache dir try os makedirs PREREQS STATE DIR except OS Error if not os path isdir PREREQS STATE DIR raise
def webapp add wsgi middleware app app I18 n Middleware app return app
def get all bears from coalib settings Section import Sectionprinter Log Printer Null Printer local bears global bears collect bears Section '' bear dirs ['**'] [BEAR KIND LOCAL BEAR KIND GLOBAL] printer warn if unused glob False return list itertools chain local bears global bears
def oo collect data attribute None filters None if not isinstance data list raise errors Ansible Filter Error ' failedexpectstofilterona List' if not attribute raise errors Ansible Filter Error ' failedexpectsattributetobeset' if filters is not None if not isinstance filters dict raise errors Ansible Filter Error ' failedexpectsfiltertobeadict' retval [get attr d attribute for d in data if all [ d get key None filters[key] for key in filters] ]else retval [get attr d attribute for d in data]retval [val for val in retval if val is not None ]return retval
def oo collect data attribute None filters None if not isinstance data list raise errors Ansible Filter Error ' failedexpectstofilterona List' if not attribute raise errors Ansible Filter Error ' failedexpectsattributetobeset' if filters is not None if not isinstance filters dict raise errors Ansible Filter Error ' failedexpectsfiltertobeadict' retval [get attr d attribute for d in data if all [ d get key None filters[key] for key in filters] ]else retval [get attr d attribute for d in data]retval [val for val in retval if val is not None ]return retval
def test grad X T matrix y X sum G T grad y [X] assert isinstance G list G T grad y X assert not isinstance G list
def test grad X T matrix y X sum G T grad y [X] assert isinstance G list G T grad y X assert not isinstance G list
def make overload attribute template typ attr overload func base Overload Attribute Template assert isinstance typ types Type or issubclass typ types Type name ' Overload Template %s %s' % typ attr dct dict key typ attr attr impl cache {} overload func staticmethod overload func return type base name base dct
def prefixed userid request authn type getattr request 'authn type' None if authn type is not None return authn type + ' ' + request selected userid
def is git repo sourcepath os path realpath os path join os path dirname nipype file os path pardir gitpathgit os path join sourcepath u' git' if os path exists gitpathgit return Trueelse return False
def is git repo sourcepath os path realpath os path join os path dirname nipype file os path pardir gitpathgit os path join sourcepath u' git' if os path exists gitpathgit return Trueelse return False
def tag *tags def decorate f if not hasattr f 'tags' f tags []f tags + tagsreturn freturn decorate
def contract creation exceptions return {sa Column [ '%s binding index' % ROUTER L3 AGENT BINDING ]}
def contract creation exceptions return {sa Column [ '%s binding index' % ROUTER L3 AGENT BINDING ]}
def snapshot get all for volume context volume id return IMPL snapshot get all for volume context volume id
def enable merge strategies *merge strategies return Enable Merge Strategies *merge strategies
def assert no validation errors validation if hasattr validation 'task error' error validation task errorelse error validation['error']if error print '-' * 70 print errorprint '-' * 70 raise Assertion Error ' Unexpectedtaskerror %s' % error rstrip split '\n' [ -1 ]
def assert no validation errors validation if hasattr validation 'task error' error validation task errorelse error validation['error']if error print '-' * 70 print errorprint '-' * 70 raise Assertion Error ' Unexpectedtaskerror %s' % error rstrip split '\n' [ -1 ]
def assert no validation errors validation if hasattr validation 'task error' error validation task errorelse error validation['error']if error print '-' * 70 print errorprint '-' * 70 raise Assertion Error ' Unexpectedtaskerror %s' % error rstrip split '\n' [ -1 ]
def get prompt tokens cli now datetime datetime now return [ Token Prompt u'%s %s %s' % now hour now minute now second Token Prompt u' Entersomething ' ]
def normalize time unit s s s lower strip if s in units return sif s in unit aliases return unit aliases[s]if s[ -1 ] 's' return normalize time unit s rstrip 's' raise Value Error ' Donotunderstandtimeunit%s' % s
def process emerge err stdout stderr ret {}rexp re compile '^[<> ][^]+/[^]+[^\\n]+' re M slot conflicts re compile '^[^\\n]+/[^]+ [^]' re M findall stderr if slot conflicts ret['slotconflicts'] slot conflictsblocked re compile ' ?m ^\\[blocks +\\] [^]+/[^]+-[ 0 - 9 ]+[^]+ *$' findall stdout unsatisfied re compile ' Error Theabovepackagelistcontains' findall stderr if blocked and unsatisfied ret['blocked'] blockedsections re split '\n\n' stderr for section in sections if ' Thefollowingkeywordchanges' in section ret['keywords'] rexp findall section elif ' Thefollowinglicensechanges' in section ret['license'] rexp findall section elif ' Thefollowing US Echanges' in section ret['use'] rexp findall section elif ' Thefollowingmaskchanges' in section ret['mask'] rexp findall section return ret
def process emerge err stdout stderr ret {}rexp re compile '^[<> ][^]+/[^]+[^\\n]+' re M slot conflicts re compile '^[^\\n]+/[^]+ [^]' re M findall stderr if slot conflicts ret['slotconflicts'] slot conflictsblocked re compile ' ?m ^\\[blocks +\\] [^]+/[^]+-[ 0 - 9 ]+[^]+ *$' findall stdout unsatisfied re compile ' Error Theabovepackagelistcontains' findall stderr if blocked and unsatisfied ret['blocked'] blockedsections re split '\n\n' stderr for section in sections if ' Thefollowingkeywordchanges' in section ret['keywords'] rexp findall section elif ' Thefollowinglicensechanges' in section ret['license'] rexp findall section elif ' Thefollowing US Echanges' in section ret['use'] rexp findall section elif ' Thefollowingmaskchanges' in section ret['mask'] rexp findall section return ret
def facility geojson s3 db org facility geojson
def facility geojson s3 db org facility geojson
def set dags paused state is paused session settings Session dms session query Dag Model filter Dag Model dag id in DAG IDS for dm in dms logging info ' Setting DAG {}is paused {}' format dm is paused dm is paused is pausedsession commit
def find changes accounts monitor names debug True for account name in accounts monitors get monitors account name monitor names debug for mon in monitors cw mon watcher items exception map cw slurp cw find changes current items exception map exception map cw save audit changes accounts monitor names False debug db session close
def hostinterface update interfaceid **connection args conn args login **connection args try if conn args method 'hostinterface update'params {'interfaceid' interfaceid}params params extend params **connection args ret query method params conn args['url'] conn args['auth'] return ret['result']['interfaceids']else raise Key Errorexcept Key Error return ret
def get nginx configurator config path config dir work dir version 1 6 2 backups os path join work dir 'backups' with mock patch 'certbot nginx configurator Nginx Configurator config test' with mock patch 'certbot nginx configurator util exe exists' as mock exe exists mock exe exists return value Trueconfig configurator Nginx Configurator config mock Magic Mock nginx server root config path le vhost ext '-le-ssl conf' config dir config dir work dir work dir backup dir backups temp checkpoint dir os path join work dir 'temp checkpoints' in progress dir os path join backups 'IN PROGRESS' server 'https //acme-server org 443 /new' tls sni 01 port 5001 name 'nginx' version version config prepare nsconfig configuration Namespace Config config config zope component provide Utility nsconfig return config
def critical title message None details None if message is None message titlembox Resizeable Message Box active window mbox set Window Title title mbox set Text Format Qt Plain Text mbox set Text message mbox set Icon Qt Widgets Q Message Box Critical mbox set Standard Buttons Qt Widgets Q Message Box Close mbox set Default Button Qt Widgets Q Message Box Close if details mbox set Detailed Text details mbox exec
def get Path By List vertex List if len vertex List < 1 return Vector 3 if vertex List[ 0 ] class list vertex List [vertex List]path []for float List in vertex List vector 3 get Vector 3 By Float List float List Vector 3 path append vector 3 return path
def read po fileobj locale None domain None ignore obsolete False charset None catalog Catalog locale locale domain domain charset charset parser Po File Parser catalog ignore obsolete parser parse fileobj return catalog
def rotate 90 clockwise request fileobjects transpose image request fileobjects 4
def register deep copy op c code typ code version Deep Copy Op c code and version[typ] code version
def Include Utilities In User Agent value with UTILITY LOCK utility registry Set Enabled value
def check header match 180 or later header 1 header 2 header 1 header 1 split ' ' header 2 header 2 split ' ' for e1 e2 in zip header 1 header 2 if e1 split '' [0 ] e2 split '' [0 ] return Falsereturn True
def Unregister Module mod Name try win 32 api Reg Delete Key Get Root Key Build Default Python Key + '\\ Modules\\%s' % mod Name except win 32 api error as code fn desc import winerrorif code winerror ERROR FILE NOT FOUND raise win 32 api error code fn desc
def eigvals banded a band lower False overwrite a band False select 'a' select range None check finite True return eig banded a band lower lower eigvals only 1 overwrite a band overwrite a band select select select range select range check finite check finite
def build text msg message LOGGER debug ' Buildingplaintextemail' return MIME Text message
def sort nicely l l sort key alphanum key
def update epoch data params start params['t start']n epochs params['n epochs']end start + n epochs * len params['epochs'] times data params['orig data'][ start end]types params['types']for pick ind in enumerate params['inds'] params['data'][pick] data[ind] / params['scalings'][types[pick]] params['plot fun']
def function simple a b c return a b c
def returner ret opts get options {} try with salt utils flopen opts['filename'] 'a' as logfile logfile write str ret + '\n' except log error ' Couldnotwritetorawdata jsonfile{ 0 }' format opts['filename'] raise
def scan Network devices []for remote Address in range 2 6 print ' Tryingaddress' + str remote Address p snap Packet remote Address snap local Address 0 1 [CMD GETMODULETYPE] p send rep p get Reply print 'dev' remote Addresstime sleep 0 5 for d in devices print 'device' d
def resolve one media file id resource file app media get file id resource if file if config RETURN MEDIA AS BASE 64 STRING ret file base 64 encodestring file read elif config RETURN MEDIA AS URL prefix config MEDIA BASE URL if config MEDIA BASE URL is not None else app api prefix ret file '%s/%s/%s' % prefix config MEDIA ENDPOINT file id else ret file Noneif config EXTENDED MEDIA INFO ret {'file' ret file}for attribute in config EXTENDED MEDIA INFO if hasattr file attribute ret update {attribute getattr file attribute } else abort 500 description debug error message ' Invalidextendedmediaattributerequested' return retelse return ret fileelse return None
def Start servers None print 'inbabysitter'options parse command line babysitter admin server Admin Server handlers [ '/' Main Handler ] port options options babysitter port print 'connecttobabysitterviahttps //{ 0 } {1 }/' format 'localhost' options options babysitter port ioloop IO Loop instance start
def Start servers None print 'inbabysitter'options parse command line babysitter admin server Admin Server handlers [ '/' Main Handler ] port options options babysitter port print 'connecttobabysitterviahttps //{ 0 } {1 }/' format 'localhost' options options babysitter port ioloop IO Loop instance start
def nopackage pkg name if is installed pkg name uninstall pkg name
def get info file filename data ''errors re compile '\\b error fail failed \\b' re IGNORECASE if os path isfile filename f open '%s' % filename 'r' lines f readlines f close rx re compile ' \' " ' for line in lines new line rx sub '' line errors found errors findall new line if len errors found > 0 data + '<fontcolor red>%s</font><br>' % str new line else data + '%s<br>' % str new line if not data data ' No Information Found <br>'else data ' Filenotfound <br>'return data
def qflags key base value add base False klass None if klass is None klass value class if klass int raise Type Error " Can'tguessenumclassofanint " bits []names []mask 1value int value while mask < value if value & mask bits append mask mask << 1for bit in bits names append qenum key base klass bit add base return ' ' join names
def get all types ctxt None inactive False filters None if ctxt is None ctxt context get admin context inst types db instance type get all ctxt inactive inactive filters filters inst type dict {}for inst type in inst types inst type dict[inst type['name']] inst typereturn inst type dict
def get Double For Letter letter split Line return get Double After First Letter split Line[get Index Of Starting With Second letter split Line ]
def main prepare to run failed modules 0modules get modules for module in modules try run module tests module except Failed System Test Module failed modules + 1sys exit failed modules
def fit Line pts n len pts if n < 1 return 0 0 0 0 a np zeros n - 1 2 for i in range n - 1 v pts[i] - pts[ i + 1 ] a[i] v / np linalg norm v direction np mean a[ 1 -1 ] axis 0 start np mean pts[ 1 -1 ] axis 0 return start start + direction
def fit Line pts n len pts if n < 1 return 0 0 0 0 a np zeros n - 1 2 for i in range n - 1 v pts[i] - pts[ i + 1 ] a[i] v / np linalg norm v direction np mean a[ 1 -1 ] axis 0 start np mean pts[ 1 -1 ] axis 0 return start start + direction
def fit Line pts n len pts if n < 1 return 0 0 0 0 a np zeros n - 1 2 for i in range n - 1 v pts[i] - pts[ i + 1 ] a[i] v / np linalg norm v direction np mean a[ 1 -1 ] axis 0 start np mean pts[ 1 -1 ] axis 0 return start start + direction
def fit Line pts n len pts if n < 1 return 0 0 0 0 a np zeros n - 1 2 for i in range n - 1 v pts[i] - pts[ i + 1 ] a[i] v / np linalg norm v direction np mean a[ 1 -1 ] axis 0 start np mean pts[ 1 -1 ] axis 0 return start start + direction
def Validate Contacts contact dicts for contact in contact dicts if 'identity' in contact Identity Validate Key contact['identity']
def Validate Contacts contact dicts for contact in contact dicts if 'identity' in contact Identity Validate Key contact['identity']
def p boolean document corpus segmented topics top ids ret top ids segmented topics per topic postings {}for id in top ids id list set for n document in enumerate corpus if id in frozenset x[ 0 ] for x in document id list add n per topic postings[id] id listnum docs len corpus return per topic postings num docs
def die signal frame os exit 1
def iter tracebacks logdir crash files sorted glob op join logdir '* pkl*' for cf in crash files yield cf load pklz traceback cf
def iter tracebacks logdir crash files sorted glob op join logdir '* pkl*' for cf in crash files yield cf load pklz traceback cf
def group type specs delete context group type id key return IMPL group type specs delete context group type id key
def maybe reset index data if data index equals Index lrange 1 len data + 1 data data reset index drop True return data
def maybe reset index data if data index equals Index lrange 1 len data + 1 data data reset index drop True return data
def image description shape colormaped False **metadata if colormaped shape shape + 3 metadata update {'shape' shape} return json dumps metadata encode 'utf- 8 '
def test start detached error fake proc message mock caplog argv ['foo' 'bar']fake proc proc start Detached return value False 0 fake proc proc error return value ' Errormessage'with caplog at level logging ERROR fake proc start detached *argv msg message mock getmsg usertypes Message Level error assert msg text ' Errorwhilespawningtestprocess Errormessage '
@ Local Contextdef line raw bytes *a **kw return encode raw bytes expr re whitespace *a **kw
@ Local Contextdef line raw bytes *a **kw return encode raw bytes expr re whitespace *a **kw
@contextlib contextmanagerdef Mock Vim Buffers buffers current buffer cursor position 1 1 if current buffer not in buffers raise Runtime Error u' Currentbuffermustbepartofthebufferslist ' with patch u'vim buffers' buffers with patch u'vim current buffer' current buffer with patch u'vim current window cursor' cursor position yield
@contextlib contextmanagerdef Mock Vim Buffers buffers current buffer cursor position 1 1 if current buffer not in buffers raise Runtime Error u' Currentbuffermustbepartofthebufferslist ' with patch u'vim buffers' buffers with patch u'vim current buffer' current buffer with patch u'vim current window cursor' cursor position yield
@contextlib contextmanagerdef Mock Vim Buffers buffers current buffer cursor position 1 1 if current buffer not in buffers raise Runtime Error u' Currentbuffermustbepartofthebufferslist ' with patch u'vim buffers' buffers with patch u'vim current buffer' current buffer with patch u'vim current window cursor' cursor position yield
def minkowski distance x y p 2 x np asarray x y np asarray y if p np inf or p 1 return minkowski distance p x y p else return minkowski distance p x y p ** 1 0 / p
def command method Name cmd Class Wrapper Command def wrapper obj journal *args **kwargs return journal execute Command cmd Class method Name obj args kwargs return wrapper
def require Attrs obj *attributes missing [name for name in attributes if not hasattr obj name ]return skip With Client If missing "don'thave" + ' ' join name for name in missing
@docfillerdef generic filter 1 d input function filter size axis -1 output None mode 'reflect' cval 0 0 origin 0 extra arguments extra keywords None if extra keywords is None extra keywords {}input numpy asarray input if numpy iscomplexobj input raise Type Error ' Complextypenotsupported' output return value ni support get output output input if filter size < 1 raise Runtime Error 'invalidfiltersize' axis ni support check axis axis input ndim if filter size // 2 + origin < 0 or filter size // 2 + origin > filter size raise Value Error 'invalidorigin' mode ni support extend mode to code mode nd image generic filter 1 d input function filter size axis output mode cval origin extra arguments extra keywords return return value
def format slice key val dim if isinstance key val slice key val slice to int key val start to int key val stop to int key val step return key valelse key val to int key val key val wrap neg index key val dim if 0 < key val < dim return slice key val key val + 1 1 else raise Index Error ' Index/sliceoutofbounds '
def get Craft Type Plugin Module craft Type Name '' if craft Type Name '' craft Type Name get Craft Type Name profile Plugins Directory Path get Plugins Directory Path return archive get Module With Directory Path profile Plugins Directory Path craft Type Name
@content git object init connectdef git permalink content git content if not content settings['GIT GENERATE PERMALINK'] returnif not string to bool content metadata get 'git permalink' 'yes' returnif not git content is committed returnpermalink hash hashlib sha 1 permalink hash update str git content get oldest commit permalink hash update str git content get oldest filename git permalink id base 64 urlsafe b64 encode permalink hash digest permalink id metadata key content settings['PERMALINK ID METADATA KEY']if permalink id metadata key in content metadata content metadata[permalink id metadata key] ' ' join content metadata[permalink id metadata key] git permalink id else content metadata[permalink id metadata key] git permalink id
def create verifier for pss signature hash method public key mgf padding MGF 1 hash method salt length padding PSS MAX LENGT Hreturn public key verifier signature padding PSS mgf mgf salt length salt length hash method
def create verifier for pss signature hash method public key mgf padding MGF 1 hash method salt length padding PSS MAX LENGT Hreturn public key verifier signature padding PSS mgf mgf salt length salt length hash method
def put content path log content filter identity return Effect Put content content path path log content filter log content filter
def moderator required function None def decorator request *args **kwargs group get object or 404 Group slug kwargs['slug'] if request user is anonymous return Http Response Redirect reverse 'django contrib auth views login' if Group Member objects is moderator group request user return function request *args **kwargs else raise Http 404 return decorator
def send birthday reminders if int frappe db get single value u'HR Settings' u'stop birthday reminders' or 0 returnfrom frappe utils user import get enabled system usersusers Nonebirthdays get employees who are born today if birthdays if not users users [ u email id or u name for u in get enabled system users ]for e in birthdays frappe sendmail recipients filter lambda u u not in e company email e personal email e user id users subject u' Birthday Reminderfor{ 0 }' format e employee name message u" Todayis{ 0 }'sbirthday " format e employee name reply to e company email or e personal email or e user id
def process message notification request messages path if not messages path returnglobal MESSAGES CACH Eglobal MESSAGES MTIM Eif MESSAGES CACHE is None or MESSAGES MTIME os path getmtime messages path MESSAGES CACHE get processed messages messages path MESSAGES MTIME os path getmtime messages path for msg in MESSAGES CACHE msg send message request
def process message notification request messages path if not messages path returnglobal MESSAGES CACH Eglobal MESSAGES MTIM Eif MESSAGES CACHE is None or MESSAGES MTIME os path getmtime messages path MESSAGES CACHE get processed messages messages path MESSAGES MTIME os path getmtime messages path for msg in MESSAGES CACHE msg send message request
def chinese remainder reconstruction univariate hp hq p q n hp degree x hp ring gens[ 0 ]hpq hp ring zerofor i in range n + 1 hpq[ i ] crt [p q] [hp coeff x ** i hq coeff x ** i ] symmetric True [0 ]hpq strip zero return hpq
def wait share timeout 0 0 delay 0 01 start time time while True msg receive share if msg return msgtime sleep delay if timeout > 0 0 and time time - start > timeout return None
def wait share timeout 0 0 delay 0 01 start time time while True msg receive share if msg return msgtime sleep delay if timeout > 0 0 and time time - start > timeout return None
def machines return [name for name state in status ]
def initialize scheduler from headphones import updater searcher librarysync postprocessor torrentfinishedwith SCHED LOCK start jobs not len SCHED get jobs minutes CONFIG SEARCH INTERVA Lschedule job searcher searchforalbum ' Searchfor Wanted' hours 0 minutes minutes minutes CONFIG DOWNLOAD SCAN INTERVA Lschedule job postprocessor check Folder ' Download Scan' hours 0 minutes minutes hours CONFIG LIBRARYSCAN INTERVA Lschedule job librarysync library Scan ' Library Scan' hours hours minutes 0 hours CONFIG UPDATE DB INTERVA Lschedule job updater db Update ' Music Brainz Update' hours hours minutes 0 if CONFIG CHECK GITHUB if CONFIG CHECK GITHUB INTERVAL minutes CONFIG CHECK GITHUB INTERVA Lelse minutes 0schedule job versioncheck check Github ' Check Git Hubforupdates' hours 0 minutes minutes minutes CONFIG TORRENT REMOVAL INTERVA Lschedule job torrentfinished check Torrent Finished ' Torrentremovalcheck' hours 0 minutes minutes if start jobs and len SCHED get jobs try SCHED start except Exception as e logger info e
def list nodes full kwargs None call None if call 'action' raise Salt Cloud System Exit ' Thelist nodes fullfunctionmustbecalledwith-for--function ' machines {}for machine in vb list machines name machine get 'name' if name machines[name] treat machine dict machine del machine['name']return machines
def join nonshared inputs xs vars shared make shared False joined tt concatenate [var ravel for var in vars] if not make shared tensor type joined typeinarray tensor type 'inarray' else inarray theano shared joined tag test value 'inarray' ordering Array Ordering vars inarray tag test value joined tag test valueget var {var name var for var in vars}replace {get var[var] reshape t inarray[slc] shp astype dtyp for var slc shp dtyp in ordering vmap}replace update shared xs special [theano clone x replace strict False for x in xs]return xs special inarray
def join nonshared inputs xs vars shared make shared False joined tt concatenate [var ravel for var in vars] if not make shared tensor type joined typeinarray tensor type 'inarray' else inarray theano shared joined tag test value 'inarray' ordering Array Ordering vars inarray tag test value joined tag test valueget var {var name var for var in vars}replace {get var[var] reshape t inarray[slc] shp astype dtyp for var slc shp dtyp in ordering vmap}replace update shared xs special [theano clone x replace strict False for x in xs]return xs special inarray
def override bytes from content type listing dict logger None listing dict['content type'] swift bytes extract swift bytes listing dict['content type'] if swift bytes is not None try listing dict['bytes'] int swift bytes except Value Error if logger logger exception ' Invalidswift bytes'
def property name property index statuses ['' '' ' Open' ' Pending' ' Resolved' ' Closed' ' Waitingon Customer' ' Job Application' ' Monthly']priorities ['' ' Low' ' Medium' ' High' ' Urgent']if property 'status' return statuses[index] if index < len statuses else str index elif property 'priority' return priorities[index] if index < len priorities else str index else raise Value Error ' Unknownproperty'
def find apple crash report referenced images binary images threads image map {}for image in binary images image map[image['image addr']] image['uuid']to load set for thread in threads if 'backtrace' not in thread continuefor frame in thread['backtrace']['contents'] img uuid image map get frame['object addr'] if img uuid is not None to load add img uuid return list to load
def get chimeras from Nast aligned seqs fp ref db aligned fp None ref db fasta fp None HALT EXEC False min div ratio None keep intermediates False files to remove []seqs fp str seqs fp seqs fp seqs fp rstrip '"' seqs fp seqs fp lstrip '"' seqs dir new seqs fp split seqs fp if seqs dir '' seqs dir ' /'params {'--query NAST' new seqs fp '--exec dir' seqs dir}if ref db aligned fp is None and ref db fasta fp is None passelse if not ref db fasta fp ref db fasta fp write degapped fasta to file parse fasta open ref db aligned fp files to remove append ref db fasta fp params update {'--db NAST' abspath ref db aligned fp '--db FASTA' abspath ref db fasta fp } if min div ratio is not None params update {'-R' min div ratio} app Chimera Slayer params params HALT EXEC HALT EXEC app results app chimeras parse CPS file app results['CPS'] if not keep intermediates app remove intermediate files remove files files to remove return chimeras
def get chimeras from Nast aligned seqs fp ref db aligned fp None ref db fasta fp None HALT EXEC False min div ratio None keep intermediates False files to remove []seqs fp str seqs fp seqs fp seqs fp rstrip '"' seqs fp seqs fp lstrip '"' seqs dir new seqs fp split seqs fp if seqs dir '' seqs dir ' /'params {'--query NAST' new seqs fp '--exec dir' seqs dir}if ref db aligned fp is None and ref db fasta fp is None passelse if not ref db fasta fp ref db fasta fp write degapped fasta to file parse fasta open ref db aligned fp files to remove append ref db fasta fp params update {'--db NAST' abspath ref db aligned fp '--db FASTA' abspath ref db fasta fp } if min div ratio is not None params update {'-R' min div ratio} app Chimera Slayer params params HALT EXEC HALT EXEC app results app chimeras parse CPS file app results['CPS'] if not keep intermediates app remove intermediate files remove files files to remove return chimeras
def get instance info identity boto utils get instance identity ['document']return identity['instance Id'] identity['region']
def test dummy function
def test dummy function
def get latest repository metadata if it includes invalid tools trans repository repository metadata get latest repository metadata trans repository if repository metadata is not None metadata repository metadata metadataif metadata is not None and 'invalid tools' in metadata return repository metadatareturn None
def casoratian seqs n zero True from dense import Matrixseqs list map sympify seqs if not zero f lambda i j seqs[j] subs n n + i else f lambda i j seqs[j] subs n i k len seqs return Matrix k k f det
def casoratian seqs n zero True from dense import Matrixseqs list map sympify seqs if not zero f lambda i j seqs[j] subs n n + i else f lambda i j seqs[j] subs n i k len seqs return Matrix k k f det
def drop n seq return itertools islice seq n None
def filename match filename patterns default True if not patterns return defaultreturn any fnmatch filename pattern for pattern in patterns
def filename match filename patterns default True if not patterns return defaultreturn any fnmatch filename pattern for pattern in patterns
def snapshot domain name None suffix None if name and name lower domain lower raise Command Execution Error ' Virtual Machine{name}isalreadydefined Pleasechooseanothernameforthesnapshot' format name name if not name name '{domain}-{tsnap}' format domain domain tsnap time strftime '%Y%m%d-%H%M%S' time localtime if suffix name '{name}-{suffix}' format name name suffix suffix doc Element Tree Element 'domainsnapshot' n name Element Tree Sub Element doc 'name' n name text name get domain domain snapshot Create XML Element Tree tostring doc return {'name' name}
def libvlc video set spu p mi i spu f Cfunctions get 'libvlc video set spu' None or Cfunction 'libvlc video set spu' 1 1 None ctypes c int Media Player ctypes c int return f p mi i spu
def UINT value if value is None raise Value Error u' Noneisnotavalidinteger' if not value isdigit raise Value Error u' Onlypositivenumbersareallowed' return int value
def get precision doctype fieldname currency None doc None from frappe model meta import get field precisionreturn get field precision get meta doctype get field fieldname doc currency
def Get User Secret user secret secrets Get Secret Secret Name user if not secret raise Lookup Error 'nosecrethasbeencreatedfor{ 0 }' format user return secret
def colorize ansi msg color None style None if color is None and style is None return msgescape code get ansi code color style if escape code return '%s%s%s' % escape code msg ANSI RESET return msg
def colorize ansi msg color None style None if color is None and style is None return msgescape code get ansi code color style if escape code return '%s%s%s' % escape code msg ANSI RESET return msg
@jingo register functiondef showing query pager format opts pager start index pager end index pager paginator count query escape query if query showing u' Showing{ 0 }-{ 1 }of{ 2 }resultsfor<strong>{ 3 }</strong>' format * format opts + query else showing u' Showing{ 0 }-{ 1 }of{ 2 }results' format *format opts return jinja 2 Markup showing
@jingo register functiondef showing query pager format opts pager start index pager end index pager paginator count query escape query if query showing u' Showing{ 0 }-{ 1 }of{ 2 }resultsfor<strong>{ 3 }</strong>' format * format opts + query else showing u' Showing{ 0 }-{ 1 }of{ 2 }results' format *format opts return jinja 2 Markup showing
def vode banded jac wrapper jacfunc ml jac params def jac wrapper t y jac asarray jacfunc t y *jac params padded jac vstack jac zeros ml jac shape[ 1 ] return padded jacreturn jac wrapper
def metadef tag count context namespace name session None session session or get session return metadef tag api count context namespace name session
def split on groups string groups if not groups return [string]boundaries sorted set functools reduce lambda l x l + list x groups [] if boundaries[ 0 ] 0 boundaries insert 0 0 if boundaries[ -1 ] len string boundaries append len string groups [string[start end] for start end in zip boundaries[ -1 ] boundaries[ 1 ] ]return [g for g in groups if g]
def test threading limit db folder sync engine monkeypatch from inbox models import Message Thread MAX THREAD LENGTH 10 monkeypatch setattr 'inbox mailsync backends imap generic MAX THREAD LENGTH' MAX THREAD LENGTH namespace id folder sync engine namespace idmsg Mock Raw Message [] for i in range 3 * MAX THREAD LENGTH m Message m namespace id namespace idm received date datetime datetime utcnow m references []m size 0m body ''m from addr [ ' Karim Hamidou' 'karim@nilas com' ]m to addr [ ' Eben Freeman' 'eben@nilas com' ]m snippet ''m subject 'uniquesubject'db session add m folder sync engine add message to thread db session m msg db session commit new threads db session query Thread filter Thread subject 'uniquesubject' all assert len new threads 3 assert all len thread messages MAX THREAD LENGTH for thread in new threads
def test threading limit db folder sync engine monkeypatch from inbox models import Message Thread MAX THREAD LENGTH 10 monkeypatch setattr 'inbox mailsync backends imap generic MAX THREAD LENGTH' MAX THREAD LENGTH namespace id folder sync engine namespace idmsg Mock Raw Message [] for i in range 3 * MAX THREAD LENGTH m Message m namespace id namespace idm received date datetime datetime utcnow m references []m size 0m body ''m from addr [ ' Karim Hamidou' 'karim@nilas com' ]m to addr [ ' Eben Freeman' 'eben@nilas com' ]m snippet ''m subject 'uniquesubject'db session add m folder sync engine add message to thread db session m msg db session commit new threads db session query Thread filter Thread subject 'uniquesubject' all assert len new threads 3 assert all len thread messages MAX THREAD LENGTH for thread in new threads
def test threading limit db folder sync engine monkeypatch from inbox models import Message Thread MAX THREAD LENGTH 10 monkeypatch setattr 'inbox mailsync backends imap generic MAX THREAD LENGTH' MAX THREAD LENGTH namespace id folder sync engine namespace idmsg Mock Raw Message [] for i in range 3 * MAX THREAD LENGTH m Message m namespace id namespace idm received date datetime datetime utcnow m references []m size 0m body ''m from addr [ ' Karim Hamidou' 'karim@nilas com' ]m to addr [ ' Eben Freeman' 'eben@nilas com' ]m snippet ''m subject 'uniquesubject'db session add m folder sync engine add message to thread db session m msg db session commit new threads db session query Thread filter Thread subject 'uniquesubject' all assert len new threads 3 assert all len thread messages MAX THREAD LENGTH for thread in new threads
def equal fields matchdict field return equal m[field] for m in matchdict values
def sysrq vm action 'nmi' key 'uuid' ret {}vmadm check vmadm if key not in ['uuid' 'alias' 'hostname'] ret[' Error'] ' Keymustbeeitheruuid aliasorhostname'return retif action not in ['nmi' 'screenshot'] ret[' Error'] ' Actionmustbeeithernmiorscreenshot'return retvm lookup '{ 0 } {1 }' format key vm one True if ' Error' in vm return vmcmd '{vmadm}sysrq{uuid}{action}' format vmadm vmadm uuid vm action action res salt ['cmd run all'] cmd retcode res['retcode']if retcode 0 ret[' Error'] res['stderr'] if 'stderr' in res else exit status retcode return retreturn True
def Any But s ranges chars to ranges s ranges insert 0 - maxint ranges append maxint result Code Ranges ranges result str ' Any But %s ' % repr s return result
def unit propagate clauses symbol output []for c in clauses if c func Or output append c continuefor arg in c args if arg ~ symbol output append Or *[x for x in c args if x ~ symbol ] breakif arg symbol breakelse output append c return output
def unit propagate clauses symbol output []for c in clauses if c func Or output append c continuefor arg in c args if arg ~ symbol output append Or *[x for x in c args if x ~ symbol ] breakif arg symbol breakelse output append c return output
def extract components from tuple repository components tuple toolshed repository components tuple[ 0 ]name repository components tuple[ 1 ]owner repository components tuple[ 2 ]changeset revision repository components tuple[ 3 ]components list [toolshed name owner changeset revision]if len repository components tuple 5 toolshed name owner changeset revision prior installation required repository components tuplecomponents list [toolshed name owner changeset revision prior installation required]elif len repository components tuple 6 toolshed name owner changeset revision prior installation required only if compiling contained td repository components tuplecomponents list [toolshed name owner changeset revision prior installation required only if compiling contained td]return components list
def extract components from tuple repository components tuple toolshed repository components tuple[ 0 ]name repository components tuple[ 1 ]owner repository components tuple[ 2 ]changeset revision repository components tuple[ 3 ]components list [toolshed name owner changeset revision]if len repository components tuple 5 toolshed name owner changeset revision prior installation required repository components tuplecomponents list [toolshed name owner changeset revision prior installation required]elif len repository components tuple 6 toolshed name owner changeset revision prior installation required only if compiling contained td repository components tuplecomponents list [toolshed name owner changeset revision prior installation required only if compiling contained td]return components list
def get doctypes for user permissions return list set [p parent for p in get valid perms if p set user permissions]
def get doctypes for user permissions return list set [p parent for p in get valid perms if p set user permissions]
def get doctypes for user permissions return list set [p parent for p in get valid perms if p set user permissions]
def absolute symlink source path target path if not os path isabs source path raise Value Error u' Pathforsource {}mustbeabsolute' format source path if not os path isabs target path raise Value Error u' Pathforlink {}mustbeabsolute' format target path if source path target path raise Value Error u' Pathforlinkisidenticaltosource {}' format source path try if os path lexists target path if os path islink target path or os path isfile target path os unlink target path else shutil rmtree target path safe mkdir for target path os symlink source path target path except OS Error as e if not e errno errno EEXIST or e errno errno ENOENT raise
def absolute symlink source path target path if not os path isabs source path raise Value Error u' Pathforsource {}mustbeabsolute' format source path if not os path isabs target path raise Value Error u' Pathforlink {}mustbeabsolute' format target path if source path target path raise Value Error u' Pathforlinkisidenticaltosource {}' format source path try if os path lexists target path if os path islink target path or os path isfile target path os unlink target path else shutil rmtree target path safe mkdir for target path os symlink source path target path except OS Error as e if not e errno errno EEXIST or e errno errno ENOENT raise
def srs output func argtypes func argtypes argtypesfunc restype c void pfunc errcheck check srsreturn func
def srs output func argtypes func argtypes argtypesfunc restype c void pfunc errcheck check srsreturn func
def set Default Fetcher fetcher wrap exceptions True global default fetcherif fetcher is None or not wrap exceptions default fetcher fetcherelse default fetcher Exception Wrapping Fetcher fetcher
def remove wsgi intercept host port key host port if wsgi intercept has key key del wsgi intercept[key]
def virtual if get configured provider is False return Falsereturn virtualname
def Create RPC return RPC
def get year and month format locale return locale year and month formats get locale language lower u'MM My'
def get year and month format locale return locale year and month formats get locale language lower u'MM My'
def estimate beta ridge x y alpha beta initial [random random for x i in x[ 0 ]]return minimize stochastic partial squared error ridge alpha alpha partial squared error ridge gradient alpha alpha x y beta initial 0 001
@ignore warningsdef test sensitivity specificity ignored labels y true [1 1 2 3]y pred [1 3 3 3]specificity 13 partial specificity score y true y pred labels [1 3] specificity all partial specificity score y true y pred labels None assert allclose [1 0 0 33 ] specificity 13 average None rtol R TOL assert allclose np mean [1 0 0 33 ] specificity 13 average 'macro' rtol R TOL assert allclose np average [1 0 0 33 ] weights [2 0 1 0] specificity 13 average 'weighted' rtol R TOL assert allclose 3 0 / 3 0 + 2 0 specificity 13 average 'micro' rtol R TOL for average in ['macro' 'weighted' 'micro'] assert not equal specificity 13 average average specificity all average average
def gauss chebyshev u n n digits xi []w []for i in range 1 n + 1 xi append cos i / n + S One * S Pi n n digits w append S Pi / n + S One * sin i * S Pi / n + S One ** 2 n n digits return xi w
def write pnm file width height pixels meta bitdepth meta['bitdepth']maxval 2 ** bitdepth - 1 planes meta['planes']assert planes in 1 2 3 4 if planes in 1 3 if 1 planes fmt 'P 5 'else fmt 'P 6 'file write '%s%d%d%d\n' % fmt width height maxval if planes in 2 4 if 2 planes tupltype 'GRAYSCALE ALPHA'else tupltype 'RGB ALPHA'file write 'P 7 \n WIDTH%d\n HEIGHT%d\n DEPTH%d\n MAXVAL%d\n TUPLTYPE%s\n ENDHDR\n' % width height planes maxval tupltype vpr planes * width fmt '>%d' % vpr if maxval > 255 fmt fmt + 'H' else fmt fmt + 'B' for row in pixels file write struct pack fmt *row file flush
def create access port network switch port name vlan debug Falsenew port Switch Port objects get or create port name port name mode 'access' access vlan vlan network switch network switch if debug print new port
def maybe s to ms v return int float v * 1000 0 if v is not None else v
def vector add v w return [ v i + w i for v i w i in zip v w ]
def get terminal size tput try cols int subprocess check call shlex split 'tputcols' rows int subprocess check call shlex split 'tputlines' return cols rows except pass
def get terminal size tput try cols int subprocess check call shlex split 'tputcols' rows int subprocess check call shlex split 'tputlines' return cols rows except pass
def get terminal size tput try cols int subprocess check call shlex split 'tputcols' rows int subprocess check call shlex split 'tputlines' return cols rows except pass
def decode preferred encoding s enc locale getpreferredencoding try try return s decode enc except Lookup Error enc DEFAULT ENCODIN Greturn s decode enc except Unicode Decode Error return s decode u'latin- 1 '
def matrix tensor product *product if isinstance product[ 0 ] Matrix return sympy tensor product *product elif isinstance product[ 0 ] numpy ndarray return numpy tensor product *product elif isinstance product[ 0 ] scipy sparse matrix return scipy sparse tensor product *product
@hug post def post here body return body
def build profile map parsed ini config parsed config copy deepcopy parsed ini config profiles {}final config {}for key values in parsed config items if key startswith 'profile' try parts shlex split key except Value Error continueif len parts 2 profiles[parts[ 1 ]] valueselif key 'default' profiles[key] valueselse final config[key] valuesfinal config['profiles'] profilesreturn final config
def test zookeeper client logged in client client click id 'ccs-zookeeper-menu' client waits for Element classname 'CCS-zookeeper' timeout '2000 '
@pytest mark networkdef test upgrade vcs req with dist found script req '%s#egg pretend' % 'git+git //github com/alex/pretend@e 7 f 26 ad 7 dbcb 4 a 02 a 4995 aade 4743 aad 47656 b 27 ' script pip 'install' req expect stderr True result script pip 'install' '-U' req expect stderr True assert 'pypi python org' not in result stdout result stdout
@pytest mark networkdef test upgrade vcs req with dist found script req '%s#egg pretend' % 'git+git //github com/alex/pretend@e 7 f 26 ad 7 dbcb 4 a 02 a 4995 aade 4743 aad 47656 b 27 ' script pip 'install' req expect stderr True result script pip 'install' '-U' req expect stderr True assert 'pypi python org' not in result stdout result stdout
def warning for deprecated user based rules rules for rule in rules if [resource for resource in USER BASED RESOURCES if resource in rule[ 0 ] ] continueif 'user id' in KEY EXPR findall rule[ 1 ] LOG warning LW " Theuser idattributeisn'tsupportedintherule'%s' Alltheuser idbasedpolicyenforcementwillberemovedinthefuture " rule[ 0 ]
def warning for deprecated user based rules rules for rule in rules if [resource for resource in USER BASED RESOURCES if resource in rule[ 0 ] ] continueif 'user id' in KEY EXPR findall rule[ 1 ] LOG warning LW " Theuser idattributeisn'tsupportedintherule'%s' Alltheuser idbasedpolicyenforcementwillberemovedinthefuture " rule[ 0 ]
def make decreasing ohlc open high low close dates **kwargs flat decrease x flat decrease y text decrease OHLC open high low close dates get decrease kwargs setdefault 'line' dict color DEFAULT DECREASING COLOR width 1 kwargs setdefault 'text' text decrease kwargs setdefault 'showlegend' False kwargs setdefault 'name' ' Decreasing' ohlc decr dict type 'scatter' x flat decrease x y flat decrease y mode 'lines' **kwargs return ohlc decr
def make decreasing ohlc open high low close dates **kwargs flat decrease x flat decrease y text decrease OHLC open high low close dates get decrease kwargs setdefault 'line' dict color DEFAULT DECREASING COLOR width 1 kwargs setdefault 'text' text decrease kwargs setdefault 'showlegend' False kwargs setdefault 'name' ' Decreasing' ohlc decr dict type 'scatter' x flat decrease x y flat decrease y mode 'lines' **kwargs return ohlc decr
@verbosedef deactivate proj projs copy True verbose None if copy projs deepcopy projs for proj in projs proj['active'] Falselogger info '%dprojectionitemsdeactivated' % len projs return projs
@verbosedef deactivate proj projs copy True verbose None if copy projs deepcopy projs for proj in projs proj['active'] Falselogger info '%dprojectionitemsdeactivated' % len projs return projs
def validate xml xsd filename xml filename with open xsd filename 'r' as f schema root etree XML f read schema etree XML Schema schema root xmlparser etree XML Parser schema schema with open xml filename 'r' as f etree fromstring f read xmlparser
def validate xml xsd filename xml filename with open xsd filename 'r' as f schema root etree XML f read schema etree XML Schema schema root xmlparser etree XML Parser schema schema with open xml filename 'r' as f etree fromstring f read xmlparser
def compute diff configured expected diff {'add' {} 'update' {} 'remove' {}}configured users set configured keys expected users set expected keys add usernames expected users - configured users remove usernames configured users - expected users common usernames expected users & configured users add dict username expected get username for username in add usernames remove dict username configured get username for username in remove usernames update {}for username in common usernames user configuration configured get username user expected expected get username if user configuration user expected continueupdate[username] {}for field field value in six iteritems user expected if user configuration get field field value update[username][field] field valuediff update {'add' add 'update' update 'remove' remove} return diff
def blockdevice volume from datasetid volumes dataset id for volume in volumes if volume dataset id dataset id return volume
@pytest mark installeddef test activate does not leak echo setting shell if not on win or shell u'cmd exe' pytest skip u"echoleakingisonlyrelevanton Window's CMD EXE" shell vars format vars shell with Temporary Directory prefix u'envs' dir os path dirname file as envs env dirs env vars gen test env paths envs shell scripts []src activate shell vars[u'source'] format u'{syspath}{binpath}activate{suffix executable}' scripts + [dedent u'@ECHOON\n{}"{{env dirs[ 0 ]}}"\n@ECHO\n' ]for script in scripts script script format src activate script script format env vars env vars env dirs env dirs **shell vars commands shell vars[u'command setup'] + script stdout stderr run in commands shell print u'commands ' commands print u'stdout ' stdout print u'stderr ' stderr assert equals stdout u'ECH Oison ' stderr assert equals stderr u''
@pytest mark installeddef test activate does not leak echo setting shell if not on win or shell u'cmd exe' pytest skip u"echoleakingisonlyrelevanton Window's CMD EXE" shell vars format vars shell with Temporary Directory prefix u'envs' dir os path dirname file as envs env dirs env vars gen test env paths envs shell scripts []src activate shell vars[u'source'] format u'{syspath}{binpath}activate{suffix executable}' scripts + [dedent u'@ECHOON\n{}"{{env dirs[ 0 ]}}"\n@ECHO\n' ]for script in scripts script script format src activate script script format env vars env vars env dirs env dirs **shell vars commands shell vars[u'command setup'] + script stdout stderr run in commands shell print u'commands ' commands print u'stdout ' stdout print u'stderr ' stderr assert equals stdout u'ECH Oison ' stderr assert equals stderr u''
@pytest mark installeddef test activate does not leak echo setting shell if not on win or shell u'cmd exe' pytest skip u"echoleakingisonlyrelevanton Window's CMD EXE" shell vars format vars shell with Temporary Directory prefix u'envs' dir os path dirname file as envs env dirs env vars gen test env paths envs shell scripts []src activate shell vars[u'source'] format u'{syspath}{binpath}activate{suffix executable}' scripts + [dedent u'@ECHOON\n{}"{{env dirs[ 0 ]}}"\n@ECHO\n' ]for script in scripts script script format src activate script script format env vars env vars env dirs env dirs **shell vars commands shell vars[u'command setup'] + script stdout stderr run in commands shell print u'commands ' commands print u'stdout ' stdout print u'stderr ' stderr assert equals stdout u'ECH Oison ' stderr assert equals stderr u''
@pytest mark installeddef test activate does not leak echo setting shell if not on win or shell u'cmd exe' pytest skip u"echoleakingisonlyrelevanton Window's CMD EXE" shell vars format vars shell with Temporary Directory prefix u'envs' dir os path dirname file as envs env dirs env vars gen test env paths envs shell scripts []src activate shell vars[u'source'] format u'{syspath}{binpath}activate{suffix executable}' scripts + [dedent u'@ECHOON\n{}"{{env dirs[ 0 ]}}"\n@ECHO\n' ]for script in scripts script script format src activate script script format env vars env vars env dirs env dirs **shell vars commands shell vars[u'command setup'] + script stdout stderr run in commands shell print u'commands ' commands print u'stdout ' stdout print u'stderr ' stderr assert equals stdout u'ECH Oison ' stderr assert equals stderr u''
@pytest mark installeddef test activate does not leak echo setting shell if not on win or shell u'cmd exe' pytest skip u"echoleakingisonlyrelevanton Window's CMD EXE" shell vars format vars shell with Temporary Directory prefix u'envs' dir os path dirname file as envs env dirs env vars gen test env paths envs shell scripts []src activate shell vars[u'source'] format u'{syspath}{binpath}activate{suffix executable}' scripts + [dedent u'@ECHOON\n{}"{{env dirs[ 0 ]}}"\n@ECHO\n' ]for script in scripts script script format src activate script script format env vars env vars env dirs env dirs **shell vars commands shell vars[u'command setup'] + script stdout stderr run in commands shell print u'commands ' commands print u'stdout ' stdout print u'stderr ' stderr assert equals stdout u'ECH Oison ' stderr assert equals stderr u''
def Netsh Static Ip interface ip u' 127 0 0 9' subnet u' 255 255 255 255 ' gw u' 127 0 0 1' args ['/c' 'netsh' 'interface' 'ip' 'set' 'address' interface 'static' ip subnet gw '1 ']res client utils common Execute 'cmd' args time limit -1 bypass whitelist True return res
def Zero dtype None return Constant 0 0 dtype dtype
def segment sequence aliases if not sequence or aliases returnfor alias parts in aliases items variants {alias Order By Tuple parts Order By alias opposite Order By Tuple parts opposite}for valias vparts in variants items if list sequence[ len vparts ] list vparts tail aliases dict aliases del tail aliases[alias]tail sequence sequence[len vparts ]if tail sequence for tail in segment tail sequence tail aliases yield tuple chain [valias] tail else continueelse yield tuple [valias]
def filter query params url remove params if not url return urlremove params dict p None if isinstance p basestring else p for p in remove params parsed url urlparse urlparse url parsed qsl urlparse parse qsl parsed url query keep blank values True filtered qsl [ p remove params get p v for p v in parsed qsl]filtered qsl [ p v for p v in filtered qsl if v is not None ]filtered url urlparse Parse Result scheme parsed url scheme netloc parsed url netloc path parsed url path params parsed url params query urllib urlencode filtered qsl fragment parsed url fragment return urlparse urlunparse filtered url
def sss l1 l2 l3 c1 Circle 0 0 l3 c2 Circle l1 0 l2 inter [a for a in c1 intersection c2 if a y is nonnegative]if not inter return Nonept inter[ 0 ]return Triangle 0 0 l1 0 pt
def sss l1 l2 l3 c1 Circle 0 0 l3 c2 Circle l1 0 l2 inter [a for a in c1 intersection c2 if a y is nonnegative]if not inter return Nonept inter[ 0 ]return Triangle 0 0 l1 0 pt
def get c cleanup r name sub post '\n{ Py XDECREF py % name s }\n' % locals return r type c cleanup name sub + post
def lookup lastlines lastlines dirpath path underscored path replace '/' ' ' try lastlines file open os path join lastlines dirpath underscored except OS Error IO Error returnlastlines lastlines file read lastlines file close os remove lastlines file name if not lastlines returntry target file open path except OS Error IO Error returntarget data target file read target file close loc target data rfind lastlines if loc -1 returnreverse lineno target data count '\n' loc + len lastlines return reverse lineno
def closed issue issue after None if issue['state'] 'closed' if after is None or parse timestamp issue['closed at'] > after return Truereturn False
def clean path path split path path rsplit '/' 2 [ -1 ]if len split path 2 split path[ 1 ] PATH TOKE Nreturn '/' join split path + '/'
def validate no arg method interface method name for name method in interface names And Descriptions if name method name if len method get Signature Info ['required'] > 0 raise Invalid Method ' Method{ r}requiresparameters' format method name returnraise Invalid Method ' Method{ r}notfoundininterface{}' format method name interface name
def validate no arg method interface method name for name method in interface names And Descriptions if name method name if len method get Signature Info ['required'] > 0 raise Invalid Method ' Method{ r}requiresparameters' format method name returnraise Invalid Method ' Method{ r}notfoundininterface{}' format method name interface name
def background f t Thread target f t start return t
def warnings to stdout showwarning orig warnings showwarningdef showwarning msg cat fname lno file None line 0 showwarning orig msg cat os path basename fname line sys stdout warnings showwarning showwarning
def unique values func @wraps func def wrapper *args **kwargs return unique everseen func *args **kwargs return wrapper
def str extract noexpand arr pat flags 0 from pandas import Data Frame Indexregex re compile pat flags flags groups or na groups or na fun regex if regex groups 1 result np array [groups or na val [0 ] for val in arr] dtype object name get single group name regex else if isinstance arr Index raise Value Error 'onlyoneregexgroupissupportedwith Index' name Nonenames dict zip regex groupindex values regex groupindex keys columns [names get 1 + i i for i in range regex groups ]if arr empty result Data Frame columns columns dtype object else result Data Frame [groups or na val for val in arr] columns columns index arr index dtype object return result name
def drop unique constraint migrate engine table name uc name *columns **col name col instance if migrate engine name in ['mysql' 'postgresql'] meta Meta Data meta bind migrate enginet Table table name meta autoload True uc Unique Constraint table t name uc name *columns uc drop else drop unique constraint in sqlite migrate engine table name uc name **col name col instance
def key text to keyinfo keytext if keytext startswith '"' return keyseq to keyinfo keytext[ 1 -1 ] else return keyname to keyinfo keytext
def system name ret {'name' name 'changes' {} 'result' None 'comment' ''}if salt ['keyboard get sys'] name ret['result'] Trueret['comment'] ' Systemlayout{ 0 }alreadyset' format name return retif opts ['test'] ret['comment'] ' Systemlayout{ 0 }needstobeset' format name return retif salt ['keyboard set sys'] name ret['changes'] {'layout' name}ret['result'] Trueret['comment'] ' Setsystemkeyboardlayout{ 0 }' format name return retelse ret['result'] Falseret['comment'] ' Failedtosetsystemkeyboardlayout'return ret
def react main argv reactor None if reactor is None from twisted internet import reactor as reactorfinished main reactor *argv codes [0 ]stopping [] reactor add System Event Trigger 'before' 'shutdown' stopping append True def stop result stop Reactor if stop Reactor try reactor stop except Reactor Not Running passif isinstance result Failure if result check System Exit is not None code result value codeelse log err result 'mainfunctionencounterederror' code 1codes[ 0 ] codedef cb Finish result if stopping stop result False else reactor call When Running stop result True finished add Both cb Finish reactor run sys exit codes[ 0 ]
def react main argv reactor None if reactor is None from twisted internet import reactor as reactorfinished main reactor *argv codes [0 ]stopping [] reactor add System Event Trigger 'before' 'shutdown' stopping append True def stop result stop Reactor if stop Reactor try reactor stop except Reactor Not Running passif isinstance result Failure if result check System Exit is not None code result value codeelse log err result 'mainfunctionencounterederror' code 1codes[ 0 ] codedef cb Finish result if stopping stop result False else reactor call When Running stop result True finished add Both cb Finish reactor run sys exit codes[ 0 ]
def combine game stats games return reduce lambda ps 1 ps 2 ps 1 + ps 2 [g players for g in games if g is not None ]
def get all access keys user name marker None max items None region None key None keyid None profile None conn get conn region region key key keyid keyid profile profile try return conn get all access keys user name marker max items except boto exception Boto Server Error as e log debug e log error " Failedtogetuser's{ 0 }accesskeys " format user name return str e
def make sshnode test case server create ssh server File Path test case mktemp test case add Cleanup server restore return Process Node using ssh host unicode server ip encode 'ascii' port server port username 'root' private key server key path
def make sshnode test case server create ssh server File Path test case mktemp test case add Cleanup server restore return Process Node using ssh host unicode server ip encode 'ascii' port server port username 'root' private key server key path
def entropy density if isinstance density Density density represent density if isinstance density scipy sparse matrix density to numpy density if isinstance density Matrix eigvals density eigenvals keys return expand - sum e * log e for e in eigvals elif isinstance density numpy ndarray import numpy as npeigvals np linalg eigvals density return - np sum eigvals * np log eigvals else raise Value Error 'numpy ndarray scipy sparseorsympymatrixexpected'
def pretty use unicode flag None global use unicodeglobal unicode warningsif flag is None return use unicodeif unicode warnings known [ 'LATINSUBSCRIPTSMALLLETTER%s' % i for i in 'HKLMNPST']unicode warnings '\n' join [l for l in unicode warnings splitlines if not any i in l for i in known ] if flag and unicode warnings warnings warn unicode warnings unicode warnings ''use unicode prev use unicode use unicode flagreturn use unicode prev
def pretty use unicode flag None global use unicodeglobal unicode warningsif flag is None return use unicodeif unicode warnings known [ 'LATINSUBSCRIPTSMALLLETTER%s' % i for i in 'HKLMNPST']unicode warnings '\n' join [l for l in unicode warnings splitlines if not any i in l for i in known ] if flag and unicode warnings warnings warn unicode warnings unicode warnings ''use unicode prev use unicode use unicode flagreturn use unicode prev
def test nvidia driver 2 a numpy random rand 10000 astype 'float 32 ' cuda shared constructor a assert theano sandbox cuda use device number is not None
def arma impulse response ar ma nobs 100 impulse np zeros nobs impulse[ 0 ] 1 0return signal lfilter ma ar impulse
def init state cmd ['shutdown' '-i' state '-g' '0 ' '-y']ret salt ['cmd run'] cmd python shell False return ret
def get cycles graph dict path visited result vertice if vertice in path cycle [vertice]for node in path[ -1 ] if node vertice breakcycle insert 0 node start from min cycle index cycle index start from cycle cycle[index ] + cycle[ 0 index] if not cycle in result result append cycle returnpath append vertice try for node in graph dict[vertice] if node not in visited get cycles graph dict path visited result node visited add node except Key Error passpath pop
def no Hint str return re sub ' ^ *? ?\\ +?\\ ?$' '\\ 1 ' str
@track state change device tracker ENTITY ID ALL DEVICES def track devices hass entity id old state new state if not TARGET ID returnif new state state STATE HOME and not core is on hass TARGET ID core turn on hass TARGET ID elif new state state STATE NOT HOME and core is on hass TARGET ID core turn off hass TARGET ID
def absent name database None user None password None host None port None ret {'name' name 'changes' {} 'result' True 'comment' ''}if salt ['influxdb 08 user exists'] name database user password host port if opts ['test'] ret['result'] Noneret['comment'] ' User{ 0 }ispresentandneedstoberemoved' format name return retif salt ['influxdb 08 user remove'] name database user password host port ret['comment'] ' User{ 0 }hasbeenremoved' format name ret['changes'][name] ' Absent'return retelse ret['comment'] ' Failedtoremoveuser{ 0 }' format name ret['result'] Falsereturn retret['comment'] ' User{ 0 }isnotpresent soitcannotberemoved' format name return ret
def generate verification key verification type None token security random string 30 if not verification type return tokenexpires timezone now + dt timedelta minutes settings EXPIRATION TIME DICT[verification type] return {'token' token 'expires' expires}
def test non existing unknown ext with pytest raises IO Error data Table read u'non-existing-file-with-unknown ext'
def test non existing unknown ext with pytest raises IO Error data Table read u'non-existing-file-with-unknown ext'
@set databasedef get download youtube ids paths None downloaded False **kwargs if paths youtube ids dict for path in paths selector Item kind ' Topic' & Item path contains path & Item youtube id is null False if downloaded selector & Item files complete > 0 else selector & Item files complete 0 youtube ids update dict [item for item in Item select Item youtube id Item title where selector tuples if item[ 0 ]] return youtube ids
def check token code tokens lx Xonsh Lexer tks list lx get tokens code for tk in tokens while tks if tk tks[ 0 ] breaktks tks[ 1 ]else msg ' Token{ r}missing { r}' format tk list lx get tokens code pytest fail msg break
def precision recall curve y true probas pred pos label None sample weight None fps tps thresholds binary clf curve y true probas pred pos label pos label sample weight sample weight precision tps / tps + fps recall tps / tps[ -1 ] last ind tps searchsorted tps[ -1 ] sl slice last ind None -1 return np r [ precision[sl] 1 ] np r [ recall[sl] 0 ] thresholds[sl]
def woeid search query query u'q select*fromgeo placeswheretext "%s"' % query body web get u'http //query yahooapis com/v 1 /public/yql?' + query dont decode True parsed xmltodict parse body get u'query' results parsed get u'results' if results is None or results get u'place' is None return Noneif type results get u'place' is list return results get u'place' [0 ]return results get u'place'
def merge similar guesses guesses prop choose similar [guess for guess in guesses if prop in guess ]if len similar < 2 returnif len similar 2 merge similar guesses nocheck guesses prop choose if len similar > 2 log debug u'complexmerge tryingourbest ' before len guesses merge similar guesses nocheck guesses prop choose after len guesses if after < before merge similar guesses guesses prop choose
def merge similar guesses guesses prop choose similar [guess for guess in guesses if prop in guess ]if len similar < 2 returnif len similar 2 merge similar guesses nocheck guesses prop choose if len similar > 2 log debug u'complexmerge tryingourbest ' before len guesses merge similar guesses nocheck guesses prop choose after len guesses if after < before merge similar guesses guesses prop choose
def merge similar guesses guesses prop choose similar [guess for guess in guesses if prop in guess ]if len similar < 2 returnif len similar 2 merge similar guesses nocheck guesses prop choose if len similar > 2 log debug u'complexmerge tryingourbest ' before len guesses merge similar guesses nocheck guesses prop choose after len guesses if after < before merge similar guesses guesses prop choose
def inject search after save output if 'form' in output id 'search after save'label LABEL '%s ' % T ' Search After Save?' for 'msg twitter search' widget INPUT name 'search after save' type 'checkbox' value 'on' id id class 'boolean' comment ''if s3 formstyle 'bootstrap' controls DIV widget comment class 'controls' row DIV label controls class 'control-group' id '%s row' % id elif callable s3 formstyle row s3 formstyle id label widget comment else raiseoutput['form'][ 0 ][ -2 ] append row
def get Symmetric X Loop path vertexes x loop []for point in path vector 3 Index Vector 3 Index len vertexes x point real point imag loop append vector 3 Index vertexes append vector 3 Index return loop
def cast params from params context schemas result {}for name in params param schema {}for schema in schemas if name in schema param schema schema[name]result[name] cast context[name] param schema return result
def cast params from params context schemas result {}for name in params param schema {}for schema in schemas if name in schema param schema schema[name]result[name] cast context[name] param schema return result
def cast params from params context schemas result {}for name in params param schema {}for schema in schemas if name in schema param schema schema[name]result[name] cast context[name] param schema return result
def is known type item return isinstance item Masked Array or get type string item is not None
def parse date columns data frame parse dates if parse dates is True or parse dates is None or parse dates is False parse dates []if not hasattr parse dates ' iter ' parse dates [parse dates]for col name in parse dates df col data frame[col name]try fmt parse dates[col name]except Type Error fmt Nonedata frame[col name] handle date column df col format fmt for col name df col in data frame iteritems if is datetime 64 tz dtype df col data frame[col name] handle date column df col return data frame
def parse date columns data frame parse dates if parse dates is True or parse dates is None or parse dates is False parse dates []if not hasattr parse dates ' iter ' parse dates [parse dates]for col name in parse dates df col data frame[col name]try fmt parse dates[col name]except Type Error fmt Nonedata frame[col name] handle date column df col format fmt for col name df col in data frame iteritems if is datetime 64 tz dtype df col data frame[col name] handle date column df col return data frame
def read config conf file None if conf file is None paths '/etc/supervisor/supervisord conf' '/etc/supervisord conf' for path in paths if os path exists path conf file pathbreakif conf file is None raise Command Execution Error ' Nosuitableconfigfilefound' config configparser Config Parser try config read conf file except IO Error OS Error as exc raise Command Execution Error ' Unabletoreadfrom{ 0 } {1 }' format conf file exc return config
def listen fds unset environment True fds int os environ get 'LISTEN FDS' 0 listen pid int os environ get 'LISTEN PID' 0 if listen pid os getpid return 0if unset environment os environ pop 'LISTEN PID' None os environ pop 'LISTEN FDS' None return fds
def make masked array data mask if len data return ma array np array data mask np array mask dtype u'bool' else return ma array np array data
def make masked array data mask if len data return ma array np array data mask np array mask dtype u'bool' else return ma array np array data
def Begin Threads Simple Marshal num Threads cookie ret []for i in range num Threads h Event win 32 event Create Event None 0 0 None thread start new Test Interp In Thread h Event cookie ret append h Event return ret
def virtual if grains get 'os family' False ' Alpine' return virtualname return False ' Moduleapkonlyworkson Alpine Linuxbasedsystems'
def twinx ax None if ax is None ax gca ax 1 ax twinx draw if interactive return ax 1
def validate target func *args **kwargs def inner self *args **kwargs target id Noneif 'target id' in kwargs and kwargs['target id'] None target id kwargs['target id']else target id 0if not self target is valid target id raise No Such Target Exception return func self *args **kwargs return inner
def action events get context action id return IMPL action events get context action id
def main try opts args getopt getopt sys argv[ 1 ] '' ['query '] except getopt error as msg print 'python Codesearch Example py--query[query text]'sys exit 2 query ''for o a in opts if o '--query' query aif query '' print 'python Codesearch Example py--query[query]'sys exit 2 sample Codesearch Example sample Print Code Snippets query
def main try opts args getopt getopt sys argv[ 1 ] '' ['query '] except getopt error as msg print 'python Codesearch Example py--query[query text]'sys exit 2 query ''for o a in opts if o '--query' query aif query '' print 'python Codesearch Example py--query[query]'sys exit 2 sample Codesearch Example sample Print Code Snippets query
def nested view request c Client c get '/no template view/' return render request 'base html' {'nested' 'yes'}
def add channel arguments parser parser add argument '--repo-data' dest 'repo data' default None help ' Publishedrepositorydata willbefetchedfrom--channelifnotavailableandwritten Defaultsto[channel name]-repodata json ' parser add argument '--diff-hours' dest 'diff hours' default '25 ' help ' Iffindingallrecentlychangedrecipes usethisnumberofhours ' parser add argument '--recipes-dir' dest 'recipes dir' default ' /bioconda-recipes'
def get profile from user user for field in user meta get fields try if hasattr user field name attribute getattr user field name if get profile model type attribute return attributeexcept Exception logger exception ' Errorgettingprofileattributefromuser ' logger info ' Couldnotfindprofileattribute ' return None
def get profile from user user for field in user meta get fields try if hasattr user field name attribute getattr user field name if get profile model type attribute return attributeexcept Exception logger exception ' Errorgettingprofileattributefromuser ' logger info ' Couldnotfindprofileattribute ' return None
def check strict xfail pyfuncitem evalxfail pyfuncitem evalxfailif evalxfail istrue strict default pyfuncitem config getini 'xfail strict' is strict xfail evalxfail get 'strict' strict default if is strict xfail del pyfuncitem evalxfailexplanation evalxfail getexplanation pytest fail '[XPASS strict ]' + explanation pytrace False
def Make Uniform Pmf low high n pmf Pmf for x in np linspace low high n pmf Set x 1 pmf Normalize return pmf
def runmodule name ' main ' **kw main default Test name **kw
def runmodule name ' main ' **kw main default Test name **kw
def mimedata from paths paths abspaths [core abspath path for path in paths]urls [ Qt Core Q Url from Local File path for path in abspaths]mimedata Qt Core Q Mime Data mimedata set Urls urls paths text core list 2 cmdline abspaths encoding gitcfg current get u'cola dragencoding' u'utf- 16 ' moz text core encode paths text encoding encoding mimedata set Data u'text/x-moz-url' moz text return mimedata
def get projection names return projection registry get projection names
def cloud tgt provider None if not isinstance tgt six string types return {}ret {}opts salt config cloud config '/etc/salt/cloud' cloud cache utils ['cloud list cache nodes full'] opts opts provider provider for driver providers in cloud cache items for provider servers in providers items for name data in servers items if fnmatch fnmatch name tgt ret[name] dataret['name']['provider'] providerreturn ret
def is shopping cart enabled enable paid course registration configuration helpers get value 'ENABLE PAID COURSE REGISTRATION' settings FEATURES get 'ENABLE PAID COURSE REGISTRATION' enable shopping cart configuration helpers get value 'ENABLE SHOPPING CART' settings FEATURES get 'ENABLE SHOPPING CART' return enable paid course registration and enable shopping cart
def treetypes root w Node Type Writer w visit root return u'\n' join [u''] + w result + [u'']
def process quantiles x dim x np asarray x dtype float if x ndim 0 x x[np newaxis]elif x ndim 1 if dim 1 x x[ np newaxis]else x x[np newaxis ]return x
def test cae basic with open os path join yaml dir path 'cae yaml' as f yaml string f read train yaml parse load yaml string train main loop
@core helperdef view resource url resource view resource package **kw return resource['url']
def scan multilang tokens module elem tokenizer perl lexer Perl Multi Lang Lexer tokens parser perl parser Parser tokenizer lang ' Perl HTML' provide full docs g Provide Full Docs parser module Name ''parser parse parse tree parser produce CIX No Header module elem csl tokens tokenizer get csl tokens return csl tokens tokenizer has perl code
def test found with pytest raises falcon http status HTTP Status as redirect hug redirect found '/' assert '302 ' in redirect value status
def generate mtime map opts path map file map {}for saltenv path list in six iteritems path map for path in path list for directory dirnames filenames in os walk path dirnames[ ] [d for d in dirnames if not is file ignored opts d ]for item in filenames try file path os path join directory item file map[file path] os path getmtime file path except OS Error IO Error log info ' Failedtogetmtimeon{ 0 } danglingsymlink?' format file path continuereturn file map
def stop *args **kwargs return query 'server/halt'
def extract line text index p text rfind '\n' 0 index + 1 q text find '\n' index if q < 0 q len text return text[p q]
def extract line text index p text rfind '\n' 0 index + 1 q text find '\n' index if q < 0 q len text return text[p q]
def create realistic servicepair test from pool Storage Pool reactor create zfs pool test File Path test mktemp from config File Path test mktemp from service Volume Service from config from pool reactor Clock from service start Service test add Cleanup from service stop Service to pool Storage Pool reactor create zfs pool test File Path test mktemp to config File Path test mktemp to service Volume Service to config to pool reactor Clock to service start Service test add Cleanup to service stop Service remote Remote Volume Manager Mutating Process Node to service to config origin remote Local Volume Manager from service return Service Pair from service from service to service to service remote remote origin remote origin remote
def create realistic servicepair test from pool Storage Pool reactor create zfs pool test File Path test mktemp from config File Path test mktemp from service Volume Service from config from pool reactor Clock from service start Service test add Cleanup from service stop Service to pool Storage Pool reactor create zfs pool test File Path test mktemp to config File Path test mktemp to service Volume Service to config to pool reactor Clock to service start Service test add Cleanup to service stop Service remote Remote Volume Manager Mutating Process Node to service to config origin remote Local Volume Manager from service return Service Pair from service from service to service to service remote remote origin remote origin remote
def absent name ret {'name' name 'changes' {} 'result' False 'comment' ''}if not salt ['marathon has app'] name ret['result'] Trueret['comment'] ' App{ 0 }alreadyabsent' format name return retif opts ['test'] ret['result'] Noneret['comment'] ' App{ 0 }issettoberemoved' format name return retif salt ['marathon rm app'] name ret['changes'] {'app' name}ret['result'] Trueret['comment'] ' Removedapp{ 0 }' format name return retelse ret['result'] Falseret['comment'] ' Failedtoremoveapp{ 0 }' format name return ret
def read cache entry f beginoffset f tell ctime read cache time f mtime read cache time f dev ino mode uid gid size sha flags struct unpack '>LLLLLL 20 s H' f read 20 + 4 * 6 + 2 name f read flags & 4095 real size f tell - beginoffset + 8 & ~ 7 f read beginoffset + real size - f tell return name ctime mtime dev ino mode uid gid size sha to hex sha flags & ~ 4095
def get count queryset try return queryset count except Attribute Error Type Error return len queryset
@pytest fixturedef small push dir tmpdir contents 'abcdefghijlmnopqrstuvwxyz\n' * 10000 push dir tmpdir join 'push-from' ensure dir True push dir join 'arbitrary-file' write contents push dir join 'pg xlog' mksymlinkto '/tmp/wal-e-test-must-not-exist' push dir join 'holy-smokes' ensure return push dir
def get data users exclude None exclude exclude if exclude else set emails u email for u in users return {'EMAIL' e} for e in emails if e not in exclude
def extract entities template if template is None or RE NONE ENTITIES search template return MATCH AL Lextraction RE GET ENTITIES findall template if len extraction > 0 return list set extraction return MATCH ALL
@bdd then bdd parsers re 'the ?P<category>error message warning " ?P<message> * "shouldbeshown' def expect message quteproc httpbin category message category to loglevel {'message' logging INFO 'error' logging ERROR 'warning' logging WARNING}message message replace ' port ' str httpbin port quteproc mark expected category 'message' loglevel category to loglevel[category] message message
def load doctype module doctype module None prefix u'' suffix u'' if not module module get doctype module doctype app get module app module key app doctype prefix suffix module name get module name doctype module prefix suffix try if key not in doctype python modules doctype python modules[key] frappe get module module name except Import Error raise Import Error u' Moduleimportfailedfor{ 0 } {1 } ' format doctype module name return doctype python modules[key]
def memoize for each device False if available return cupy memoize for each device def dummy decorator f @functools wraps f def ret *args **kwargs return f *args **kwargs return retreturn dummy decorator
def memoize for each device False if available return cupy memoize for each device def dummy decorator f @functools wraps f def ret *args **kwargs return f *args **kwargs return retreturn dummy decorator
def tensordot a b axes 2 return tensordot as dot a b axes dot dot batched False
def create char spinner while True for c in ' /-\\' yield c
def create char spinner while True for c in ' /-\\' yield c
def constrain sv less than one python unconstrained order None k endog None from scipy import linalgconstrained []if order is None order len unconstrained if k endog is None k endog unconstrained[ 0 ] shape[ 0 ]eye np eye k endog for i in range order A unconstrained[i] B lower linalg cho factor eye + np dot A A T lower True constrained append linalg solve triangular B A lower lower return constrained
def constrain sv less than one python unconstrained order None k endog None from scipy import linalgconstrained []if order is None order len unconstrained if k endog is None k endog unconstrained[ 0 ] shape[ 0 ]eye np eye k endog for i in range order A unconstrained[i] B lower linalg cho factor eye + np dot A A T lower True constrained append linalg solve triangular B A lower lower return constrained
def unlink paths older than filepaths mtime for fpath in filepaths try if os path getmtime fpath < mtime os unlink fpath except OS Error pass
def read console output character x 0 y 0 fd 1 buf None bufsize 1024 raw False hcon STDHANDLES[fd]if buf is None if raw buf ctypes c char p '' * bufsize else buf ctypes c wchar p '' * bufsize coord COORD x y n DWORD if raw Read Console Output Character A hcon buf bufsize coord byref n else Read Console Output Character W hcon buf bufsize coord byref n return buf value[ n value]
def renew cert config domains le client lineage renewal params lineage configuration['renewalparams']original server renewal params get 'server' cli flag default 'server' avoid invalidating lineage config lineage original server if not domains domains lineage names new certr new chain new key le client obtain certificate domains if config dry run logger debug ' Dryrun skippingupdatinglineageat%s' os path dirname lineage cert else prior version lineage latest common version new cert Open SSL crypto dump certificate Open SSL crypto FILETYPE PEM new certr body wrapped new chain crypto util dump pyopenssl chain new chain lineage save successor prior version new cert new key pem new chain config lineage update all links to lineage latest common version hooks renew hook config domains lineage live dir
def get deleted exploration change list exploration id return [{'cmd' collection domain CMD DELETE COLLECTION NODE 'exploration id' exploration id}]
def add overlay ret list old overlays list local cmd 'layman--quietness 0--add{ 0 }' format overlay add attempt salt ['cmd run all'] cmd python shell False stdin 'y' if add attempt['retcode'] 0 raise salt exceptions Command Execution Error add attempt['stdout'] new overlays list local if len old overlays 0 and len new overlays > 0 srcline 'source/var/lib/layman/make conf'makeconf get makeconf if not salt ['file contains'] makeconf 'layman' salt ['file append'] makeconf srcline ret [overlay for overlay in new overlays if overlay not in old overlays ]return ret
def Posix Shutdown dev process Global Process children dev process Children for term signal in signal SIGTERM signal SIGKILL for child in children if child process is None continueif child process returncode is not None continuepid child process pidtry logging debug 'posixkill%dwithsignal%d' pid term signal os kill pid term signal except OS Error as err logging error ' Errorencounteredsendingpid%dsignal%d %s\n' pid term signal err breaktime sleep 0 2 for child in children if child process is None continueif child process returncode is not None continuetry child process wait except OS Error as e if e errno errno ECHILD raise e
def libvlc audio equalizer get band frequency u index f Cfunctions get 'libvlc audio equalizer get band frequency' None or Cfunction 'libvlc audio equalizer get band frequency' 1 None ctypes c float ctypes c uint return f u index
@cache permissiondef can overwrite translation user project return check permission user project 'trans overwrite translation'
def wordrelationships relationshiplist relationships etree fromstring '< Relationshipsxmlns "http //schemas openxmlformats org/package/ 2006 /relationships"></ Relationships>' count 0for relationship in relationshiplist rel elm makeelement ' Relationship' nsprefix None attributes {' Id' 'r Id' + str count + 1 ' Type' relationship[ 0 ] ' Target' relationship[ 1 ]} relationships append rel elm count + 1return relationships
def get datetime utc now dt datetime datetime utcnow dt add utc tz dt return dt
def get datetime utc now dt datetime datetime utcnow dt add utc tz dt return dt
def is switchport default existing c1 existing['access vlan'] '1 ' c2 existing['native vlan'] '1 ' c3 existing['trunk vlans'] '1 - 4094 ' c4 existing['mode'] 'access' default c1 and c2 and c3 and c4 return default
def findlabels code labels []n len code i 0while i < n c code[i]op ord c i i + 1 if op > HAVE ARGUMENT oparg ord code[i] + ord code[ i + 1 ] * 256 i i + 2 label -1 if op in hasjrel label i + oparg elif op in hasjabs label opargif label > 0 if label not in labels labels append label return labels
def get taxes of effective rules taxing context tax rules matching rules tax rule for tax rule in tax rules if tax rule matches taxing context grouped by override groupby matching rules attrgetter 'override group' highest override group first grouped by override None [] [1 ]grouped rules groupby highest override group attrgetter 'priority' tax groups [[rule tax for rule in rules] for rules in grouped rules]return tax groups
def get external ip return search upnp device add Callback lambda x x get external ip
def report unknown attribute name logging error 'unknown Cookieattribute %r' name
def create from template zone template ret {'status' True}res salt ['cmd run all'] 'zonecfg-z{zone}create-t{tmpl}-F' format zone zone tmpl template ret['status'] res['retcode'] 0 ret['message'] res['stdout'] if ret['status'] else res['stderr'] ret['message'] ret['message'] replace 'zonecfg ' '' if ret['message'] '' del ret['message']return ret
def get fg bg name if requires special home display name return Color HOME FG Color HOME BG return Color PATH FG Color PATH BG
def check density density n features if density 'auto' density 1 / np sqrt n features elif density < 0 or density > 1 raise Value Error ' Expecteddensityinrange] 0 1] got %r' % density return density
def create clones config model fn args None kwargs None clones []args args or [] kwargs kwargs or {} with slim arg scope [slim model variable slim variable] device config variables device for i in range 0 config num clones with tf name scope config clone scope i as clone scope clone device config clone device i with tf device clone device with tf variable scope tf get variable scope reuse True if i > 0 else None outputs model fn *args **kwargs clones append Clone outputs clone scope clone device return clones
def service for pool test pool service Volume Service File Path test mktemp pool None service start Service test add Cleanup service stop Service return service
def service for pool test pool service Volume Service File Path test mktemp pool None service start Service test add Cleanup service stop Service return service
def service for pool test pool service Volume Service File Path test mktemp pool None service start Service test add Cleanup service stop Service return service
def make future info first sid root symbols years notice date func expiration date func start date func month codes None if month codes is None month codes CME CODE TO MONT Hyear strs list map str years years [pd Timestamp s tz 'UTC' for s in year strs]contract suffix to beginning of month tuple month code + year str[ -2 ] year + Month Begin month num for year year str month code month num in product zip years year strs iteritems month codes contracts []parts product root symbols contract suffix to beginning of month for sid root sym suffix month begin in enumerate parts first sid contracts append {'sid' sid 'root symbol' root sym 'symbol' root sym + suffix 'start date' start date func month begin 'notice date' notice date func month begin 'expiration date' notice date func month begin 'multiplier' 500 'exchange' 'TEST' 'exchange full' 'TESTFULL'} return pd Data Frame from records contracts index 'sid'
def consistencygroup destroy context consistencygroup id return IMPL consistencygroup destroy context consistencygroup id
def execute *cmd **kwargs process input kwargs pop 'process input' None run as root kwargs pop 'run as root' True ret 0try if len cmd > 3 and cmd[ 0 ] 'raidcom' and cmd[ 1 ] '-login' stdout stderr cinder utils execute process input process input run as root run as root loglevel base logging NOTSET *cmd [ 2]else stdout stderr cinder utils execute process input process input run as root run as root *cmd [ 2]except putils Process Execution Error as ex ret ex exit codestdout ex stdoutstderr ex stderr LOG debug 'cmd %s' mask password cmd LOG debug 'from %s' inspect stack [2 ] LOG debug 'ret %s' ret LOG debug 'stdout %s' '' join stdout splitlines LOG debug 'stderr %s' '' join stderr splitlines return ret stdout stderr
@shared taskdef sleeping i ** sleep i
def now request return {'now' datetime now }
def config if 'conf file' not in opts return {}if os path isdir opts ['conf file'] gfn os path join opts ['conf file'] 'grains' else gfn os path join os path dirname opts ['conf file'] 'grains' if os path isfile gfn with salt utils fopen gfn 'rb' as fp try return yaml safe load fp read except Exception log warning ' Badsyntaxingrainsfile Skipping ' return {}return {}
def org service root service service id db current dbtable current s3 db org servicerecord db table id service id select table id table root service table parent first try parent record parentcurrent root record root serviceexcept Attribute Error current log error ' Cannotfindrecordwithservice id %s' % service id raiseif parent if parent service id raise Key Error ' Service#%sshowingwithparent#%s' % service id parent new root org service root service parent else new root service idif current root new root def descendants ids rows db table parent belongs ids select table id children set row id for row in rows if children children descendants children return ids children else return idsnodes descendants set [service id] db table id belongs nodes update root service new root return new root
def test longer jobs bg Background Job Manager j jobs new sleeper 0 1 nt assert equal len jobs running 1 nt assert equal len jobs completed 0 j join nt assert equal len jobs running 0 nt assert equal len jobs completed 1
def introspect Route route example By Identifier schema store result {}try user documentation route attributes['user documentation']except Key Error raise Sphinx Error ' Undocumentedroute {}' format route result['description'] prepare docstring user documentation text result['header'] user documentation headerresult['section'] user documentation sectioninput Schema route attributes get 'input Schema' None output Schema route attributes get 'output Schema' None if input Schema result['input'] parse Schema input Schema schema store result['input schema'] input Schemaif output Schema result['output'] parse Schema output Schema schema store result['output schema'] output Schemaexamples user documentation examplesresult['examples'] list Example from Dictionary example By Identifier identifier for identifier in examples return result
def dependency check should exit mdep check dependency set GUI exit on failure False try import pygtkpygtk require '2 0' import gtkimport gobjectassert gtk gtk version > 2 12 assert gtk pygtk version > 2 12 except msg ' The GT Kpackagerequirementsarenotmet pleasemakesureyoursystemmeetstheserequirements \n- Py GTK> 2 12 \n-GTK> 2 12 \n'print msgshould exit Trueif not which 'dot' msg ' Therequired"dot"binaryismissing pleaseinstallthe"graphviz"packageinyouroperatingsystem 'print msgshould exit Trueif should exit sys exit 1
def dependency check should exit mdep check dependency set GUI exit on failure False try import pygtkpygtk require '2 0' import gtkimport gobjectassert gtk gtk version > 2 12 assert gtk pygtk version > 2 12 except msg ' The GT Kpackagerequirementsarenotmet pleasemakesureyoursystemmeetstheserequirements \n- Py GTK> 2 12 \n-GTK> 2 12 \n'print msgshould exit Trueif not which 'dot' msg ' Therequired"dot"binaryismissing pleaseinstallthe"graphviz"packageinyouroperatingsystem 'print msgshould exit Trueif should exit sys exit 1
def dependency check should exit mdep check dependency set GUI exit on failure False try import pygtkpygtk require '2 0' import gtkimport gobjectassert gtk gtk version > 2 12 assert gtk pygtk version > 2 12 except msg ' The GT Kpackagerequirementsarenotmet pleasemakesureyoursystemmeetstheserequirements \n- Py GTK> 2 12 \n-GTK> 2 12 \n'print msgshould exit Trueif not which 'dot' msg ' Therequired"dot"binaryismissing pleaseinstallthe"graphviz"packageinyouroperatingsystem 'print msgshould exit Trueif should exit sys exit 1
def dependency check should exit mdep check dependency set GUI exit on failure False try import pygtkpygtk require '2 0' import gtkimport gobjectassert gtk gtk version > 2 12 assert gtk pygtk version > 2 12 except msg ' The GT Kpackagerequirementsarenotmet pleasemakesureyoursystemmeetstheserequirements \n- Py GTK> 2 12 \n-GTK> 2 12 \n'print msgshould exit Trueif not which 'dot' msg ' Therequired"dot"binaryismissing pleaseinstallthe"graphviz"packageinyouroperatingsystem 'print msgshould exit Trueif should exit sys exit 1
@csrf exempt@facebook required lazydef connect request graph backend get registration backend try response connect request graph except open facebook exceptions Facebook Unreachable as e warning format u'%s oftencausedby Facebookslowdown error%s'warn message warning format % type e str e send warning warn message e e additional params dict fb error or cancel 1 response backend post error request additional params return response
@csrf exempt@facebook required lazydef connect request graph backend get registration backend try response connect request graph except open facebook exceptions Facebook Unreachable as e warning format u'%s oftencausedby Facebookslowdown error%s'warn message warning format % type e str e send warning warn message e e additional params dict fb error or cancel 1 response backend post error request additional params return response
@csrf exempt@facebook required lazydef connect request graph backend get registration backend try response connect request graph except open facebook exceptions Facebook Unreachable as e warning format u'%s oftencausedby Facebookslowdown error%s'warn message warning format % type e str e send warning warn message e e additional params dict fb error or cancel 1 response backend post error request additional params return response
@csrf exempt@facebook required lazydef connect request graph backend get registration backend try response connect request graph except open facebook exceptions Facebook Unreachable as e warning format u'%s oftencausedby Facebookslowdown error%s'warn message warning format % type e str e send warning warn message e e additional params dict fb error or cancel 1 response backend post error request additional params return response
@csrf exempt@facebook required lazydef connect request graph backend get registration backend try response connect request graph except open facebook exceptions Facebook Unreachable as e warning format u'%s oftencausedby Facebookslowdown error%s'warn message warning format % type e str e send warning warn message e e additional params dict fb error or cancel 1 response backend post error request additional params return response
def getattrs value attrs default no default try for attr in attrs value getattr value attr except Attribute Error if default is no default raisevalue defaultreturn value
def prep jid nocache False passed jid None if passed jid is None jid salt utils jid gen jid else jid passed jidcb get connection try cb add str jid {'nocache' nocache} ttl get ttl except couchbase exceptions Key Exists Error if passed jid is None return prep jid nocache nocache return jid
def prep jid nocache False passed jid None if passed jid is None jid salt utils jid gen jid else jid passed jidcb get connection try cb add str jid {'nocache' nocache} ttl get ttl except couchbase exceptions Key Exists Error if passed jid is None return prep jid nocache nocache return jid
def provides csp features response return len retrieve csp policies response + len retrieve csp policies response True > 0
def ordlist s return map ord s
def distorted bounding box crop image bbox min object covered 0 1 aspect ratio range 0 75 1 33 area range 0 05 1 0 max attempts 100 scope None with tf name scope scope 'distorted bounding box crop' [image bbox] sample distorted bounding box tf image sample distorted bounding box tf shape image bounding boxes bbox min object covered min object covered aspect ratio range aspect ratio range area range area range max attempts max attempts use image if no bounding boxes True bbox begin bbox size distort bbox sample distorted bounding boxcropped image tf slice image bbox begin bbox size return cropped image distort bbox
def dfs labeled edges G source None if source is None nodes Gelse nodes [source]visited set for start in nodes if start in visited continue yield start start 'forward' visited add start stack [ start iter G[start] ]while stack parent children stack[ -1 ]try child next children if child in visited yield parent child 'nontree' else yield parent child 'forward' visited add child stack append child iter G[child] except Stop Iteration stack pop if stack yield stack[ -1 ][ 0 ] parent 'reverse' yield start start 'reverse'
@unbox types Array def unbox array typ obj c nativearycls c context make array typ nativeary nativearycls c context c builder aryptr nativeary getpointer ptr c builder bitcast aryptr c pyapi voidptr if c context enable nrt errcode c pyapi nrt adapt ndarray from python obj ptr else errcode c pyapi numba array adaptor obj ptr failed cgutils is not null c builder errcode return Native Value c builder load aryptr is error failed
def update lut cmap colors cmap lut[ 256 ] colorscmap set extremes
def update lut cmap colors cmap lut[ 256 ] colorscmap set extremes
def get Shared Face first Edge faces second Edge for first Edge Face Index in first Edge face Indexes for second Edge Face Index in second Edge face Indexes if first Edge Face Index second Edge Face Index return faces[first Edge Face Index]return None
def deflate long n add sign padding True s bytes n long n while n 0 and n -1 s struct pack '>I' n & xffffffff + s n >> 32 for i in enumerate s if n 0 and i[ 1 ] deflate zero breakif n -1 and i[ 1 ] deflate ff breakelse i 0 if n 0 s zero byteelse s max bytes s[i[ 0 ] ]if add sign padding if n 0 and byte ord s[ 0 ] > 128 s zero byte + s if n -1 and byte ord s[ 0 ] < 128 s max byte + s return s
def pluralize count item type def pluralize string x if x endswith u's' return x + u'es' else return x + u's' text u'{}{}' format count item type if count 1 else pluralize string item type return text
def pluralize count item type def pluralize string x if x endswith u's' return x + u'es' else return x + u's' text u'{}{}' format count item type if count 1 else pluralize string item type return text
def pluralize count item type def pluralize string x if x endswith u's' return x + u'es' else return x + u's' text u'{}{}' format count item type if count 1 else pluralize string item type return text
def pluralize count item type def pluralize string x if x endswith u's' return x + u'es' else return x + u's' text u'{}{}' format count item type if count 1 else pluralize string item type return text
def dummy closure x return lambda x
def dummy closure x return lambda x
def dummy closure x return lambda x
def aggregate host get all context aggregate id return IMPL aggregate host get all context aggregate id
def build tree structure queryset all nodes {}mptt opts queryset model mptt metaitems queryset order by mptt opts tree id attr mptt opts left attr values list u'pk' u'%s id' % mptt opts parent attr for p id parent id in items all nodes setdefault str parent id if parent id else 0 [] append p id return all nodes
@intercept errors Fake Output Exception ignore errors [ Value Error] def intercepted function raise error None if raise error is not None raise raise error
def get pool config volume if volume volume type metadata {}type id volume volume type idif type id is not None metadata volume types get volume type extra specs type id if metadata get 'service label' if metadata['service label'] in config['services'] keys return metadata['service label']return 'default'
def create user contributions user id created exploration ids edited exploration ids user contributions get user contributions user id strict False if user contributions raise Exception ' Usercontributionsmodelforuser%salreadyexists ' % user id else user contributions User Contributions user id created exploration ids edited exploration ids save user contributions user contributions return user contributions
def create user contributions user id created exploration ids edited exploration ids user contributions get user contributions user id strict False if user contributions raise Exception ' Usercontributionsmodelforuser%salreadyexists ' % user id else user contributions User Contributions user id created exploration ids edited exploration ids save user contributions user contributions return user contributions
def main epilog ' Formorehelpusingthesafetemplatelinter includingdetailsonhow\n'epilog + 'tounderstandandfixanyviolations readthedocshere \n'epilog + '\n'epilog + 'http //edx readthedocs org/projects/edx-developer-guide/en/latest/conventions/safe templates html#safe-template-linter\n'parser argparse Argument Parser formatter class argparse Raw Description Help Formatter description ' Checksthattemplatesaresafe ' epilog epilog parser add argument '--list-files' dest 'list files' action 'store true' help ' Onlydisplaythefilenamesthatcontainviolations ' parser add argument '--rule-totals' dest 'rule totals' action 'store true' help ' Displaythetotalsforeachrule ' parser add argument '--verbose' dest 'verbose' action 'store true' help ' Printmultiplelineswherepossibleforadditionalcontextofviolations ' parser add argument 'path' nargs '?' default None help ' Afiletolintordirectorytorecursivelylint ' args parser parse args options {'list files' args list files 'rule totals' args rule totals 'verbose' args verbose}template linters [ Mako Template Linter Underscore Template Linter Java Script Linter Python Linter ]summary results Summary Results lint args path template linters options summary results out sys stdout
def precedence traditional item from sympy import Integral Sum Product Limit Derivativefrom sympy core expr import Unevaluated Exprif isinstance item Integral Sum Product Limit Derivative return PRECEDENCE[' Mul']elif isinstance item Unevaluated Expr return precedence traditional item args[ 0 ] else return precedence item
def gf normal f p K return gf trunc list map K f p
def processlist **connection args ret []dbc connect **connection args if dbc is None return []cur dbc cursor execute cur 'SHOWFULLPROCESSLIST' hdr [c[ 0 ] for c in cur description]for in range cur rowcount row cur fetchone idx r {}for idx j in range len hdr idx r[hdr[idx j]] row[idx j]ret append idx r cur close return ret
def processlist **connection args ret []dbc connect **connection args if dbc is None return []cur dbc cursor execute cur 'SHOWFULLPROCESSLIST' hdr [c[ 0 ] for c in cur description]for in range cur rowcount row cur fetchone idx r {}for idx j in range len hdr idx r[hdr[idx j]] row[idx j]ret append idx r cur close return ret
def SS Leay version type return ffi string lib SS Leay version type
def max pool 2d same size input patch size output Pool True input patch size outs Max Pool Grad True input output output patch size return outs
def get Geometry Output By Nested Ring derivation nested Ring portion Directions loop Lists get Loop Lists By Path derivation None nested Ring vector 3 Loop portion Directions outside Output triangle mesh get Pillars Output loop Lists if len nested Ring inner Nested Rings < 1 return outside Outputshapes [outside Output]for nested Ring inner Nested Ring in nested Ring inner Nested Rings loop Lists get Loop Lists By Path derivation 1 000001 nested Ring inner Nested Ring vector 3 Loop portion Directions shapes append triangle mesh get Pillars Output loop Lists return {'difference' {'shapes' shapes}}
def reset terminal if not mswin subprocess call ['tset' '-c']
def run process cmd out log None err log None return run multi processes [cmd] out log out log err log err log
def listdir root res []root os path expanduser root try for name in os listdir root path os path join root name if os path isdir path name + os sepres append name except passreturn res
def listdir root res []root os path expanduser root try for name in os listdir root path os path join root name if os path isdir path name + os sepres append name except passreturn res
def require initialized exception def decorator method @wraps method def wrapped method self *args **kwargs if not self initialized raise exceptionreturn method self *args **kwargs return wrapped methodreturn decorator
def atoms cls instance or dict field getter serializable getter instance or dict gettry field getter instance or dict data getexcept Attribute Error passsequences cls field list field getter cls serializables items serializable getter for sequence get in sequences for field name field in sequence yield field name field get field name Undefined
def atoms cls instance or dict field getter serializable getter instance or dict gettry field getter instance or dict data getexcept Attribute Error passsequences cls field list field getter cls serializables items serializable getter for sequence get in sequences for field name field in sequence yield field name field get field name Undefined
def test doc string contains models for kind in 'mean' 'apparent' for model in SIDEREAL TIME MODELS[kind] assert model in Time sidereal time doc
def numsplit text result []for group in re split ' \\d+ ' text if group try group int group except Value Error passresult append group return result
def record chosen plugins config plugins auth inst cn config namespacecn authenticator plugins find init auth name if auth else ' None' cn installer plugins find init inst name if inst else ' None'
def record chosen plugins config plugins auth inst cn config namespacecn authenticator plugins find init auth name if auth else ' None' cn installer plugins find init inst name if inst else ' None'
def record chosen plugins config plugins auth inst cn config namespacecn authenticator plugins find init auth name if auth else ' None' cn installer plugins find init inst name if inst else ' None'
def arguments format string args types if len args 0 return ''parts [printf format for type x['type'] types for x in args]return ' ' join parts
def arguments format string args types if len args 0 return ''parts [printf format for type x['type'] types for x in args]return ' ' join parts
def make inmemorystatepersister test case state persister In Memory State Persister return state persister state persister get state
def Pre Plot num None rows None cols None if num Brewer Initialize Iter num if rows is None and cols is None returnif rows is not None and cols is None cols 1if cols is not None and rows is None rows 1size map { 1 1 8 6 1 2 14 6 1 3 14 6 2 2 10 10 2 3 16 10 3 1 8 10 }if rows cols in size map fig pyplot gcf fig set size inches *size map[ rows cols ] if rows > 1 or cols > 1 pyplot subplot rows cols 1 global SUBPLOT ROWS SUBPLOT COLSSUBPLOT ROWS rows SUBPLOT COLS cols
def get order source modifier modules return load module instances u'SHUUP ORDER SOURCE MODIFIER MODULES' u'order source modifier module'
def tupleize func def wrapper *args **kargs return func *args **kargs return wrapper
def get bom fn compression None boms set codecs BOM UTF 16 codecs BOM UTF 16 BE codecs BOM UTF 16 LE with open fn mode 'rb' compression compression as f f seek 0 bom f read 2 f seek 0 if bom in boms return bomelse return ''
def map view request mapid snapshot None template 'maps/map view html' map obj resolve map request mapid 'base view resourcebase' PERMISSION MSG VIEW if 'access token' in request session access token request session['access token']else access token Noneif snapshot is None config map obj viewer json request user access token else config snapshot config snapshot map obj request user access token return render to response template Request Context request {'config' json dumps config 'map' map obj 'preview' getattr settings 'LAYER PREVIEW LIBRARY' '' }
def read file unix endings file name encoding 'utf 8 ' ignore True if ST 3 errors 'ignore' if ignore else 'strict' with open file name 'rt' encoding encoding errors errors as f file content f read else file content read file content file name encoding ignore file content file content replace '\r\n' '\n' return file content
def read file unix endings file name encoding 'utf 8 ' ignore True if ST 3 errors 'ignore' if ignore else 'strict' with open file name 'rt' encoding encoding errors errors as f file content f read else file content read file content file name encoding ignore file content file content replace '\r\n' '\n' return file content
def get ctx rev app tool shed url name owner changeset revision tool shed url common util get tool shed url from tool shed registry app tool shed url params dict name name owner owner changeset revision changeset revision pathspec ['repository' 'get ctx rev']ctx rev util url get tool shed url password mgr app tool shed registry url auth tool shed url pathspec pathspec params params return ctx rev
def get ctx rev app tool shed url name owner changeset revision tool shed url common util get tool shed url from tool shed registry app tool shed url params dict name name owner owner changeset revision changeset revision pathspec ['repository' 'get ctx rev']ctx rev util url get tool shed url password mgr app tool shed registry url auth tool shed url pathspec pathspec params params return ctx rev
def is sevenfile path return SEVEN COMMAND and os path splitext path [1 ] lower ' 7z'
def get install server profiles install server Noneinstall server info get install server info install server type install server info get 'type' None install server url install server info get 'xmlrpc url' None if install server type 'cobbler' and install server url install server xmlrpclib Server Proxy install server url if install server is None return Nonereturn install server get item names 'profile'
def get Simplified Inset From Clockwise Loop loop radius inset []for point Index begin in enumerate loop center loop[ point Index + 1 % len loop ]end loop[ point Index + 2 % len loop ]add Inset Point From Clockwise Triple begin center end inset radius return get Without Intersections euclidean get Simplified Loop inset radius
def merged cached query fn def merge wrapper *args **kwargs queries fn *args **kwargs return Merged Cached Query queries return merge wrapper
def merged cached query fn def merge wrapper *args **kwargs queries fn *args **kwargs return Merged Cached Query queries return merge wrapper
def create process progname sensor return subprocess Popen CMDLINE % {'progname' progname 'sensor' SENSORS get sensor sensor } shell True stdin subprocess PIPE
def create process progname sensor return subprocess Popen CMDLINE % {'progname' progname 'sensor' SENSORS get sensor sensor } shell True stdin subprocess PIPE
def test against pyephem obstime Time u' 2011 - 09 - 1808 50 00 ' location Earth Location lon Angle u'- 109 d 24 m 53 1s' lat Angle u' 33 d 41 m 46 0s' height 30000 0 * u m altaz frame Alt Az obstime obstime location location temperature 15 * u deg C pressure 1 01 * u bar altaz Sky Coord u' 6 8927 d- 60 7665 d' frame altaz frame radec actual altaz transform to u'icrs' radec expected Sky Coord u' 196 497518 d- 4 569323 d' frame u'icrs' distance radec actual separation radec expected to u'arcsec' assert distance < 1000 0 * u arcsec radec expected Sky Coord u' 196 495372 d- 4 560694 d' frame u'icrs' distance radec actual separation radec expected to u'arcsec' assert distance < 1 * u arcsec
def Test Unlink Identity tester user cookie request dict validator tester validator user id device id tester Get Ids From Cookie user cookie request dict deepcopy request dict actual dict tester Send Request 'unlink identity' user cookie request dict op dict tester Derive Notification Op Dict user id device id request dict validator Validate Unlink Identity op dict request dict['identity'] tester Compare Response Dicts 'unlink identity' user id request dict {} actual dict return actual dict
@contextmanagerdef gc state state orig state gc isenabled set gc state state yield set gc state orig state
@contextmanagerdef gc state state orig state gc isenabled set gc state state yield set gc state orig state
def get ctx file path from manifest filename repo changeset revision stripped filename basic util strip path filename for changeset in reversed upper bounded changelog repo changeset revision manifest ctx repo changectx changeset for ctx file in manifest ctx files ctx file name basic util strip path ctx file if ctx file name stripped filename return manifest ctx ctx file return None None
def test ast expression basics code can compile u' foobar ' body[ 0 ]tree ast Expr value ast Call func ast Name id u'foo' ctx ast Load args [ast Name id u'bar' ctx ast Load ] keywords [] starargs None kwargs None ast spotcheck u'value func id' code tree
def flatten l types list if not isinstance l types return lreturn list flattened iterator l types
def convert id 32 id 64 out ['STEAM 0 ']final id 64 - ID BASE if final % 2 0 out append '0 ' else out append '1 ' out append str final // 2 return '' join out
def assert Log Message test Case expected Messages callable *args **kwargs logged Messages []log add Observer logged Messages append test Case add Cleanup log remove Observer logged Messages append callable *args **kwargs test Case assert Equal [m['message'][ 0 ] for m in logged Messages] expected Messages
def clear limit key limits get limits to clear [key] if isinstance key basestring else key for key in to clear if key in limits del limits[key]update site config u'limits' limits validate False frappe conf limits limits
def cbrt arg return Pow arg Rational 1 3
def get path value '' load path None load path check load paths load path aug Augeas loadpath load path ret {}path path rstrip '/' if value path + '/{ 0 }' format value strip '/' try match aug match path except Runtime Error as err return {'error' str err }if match ret[path] aug get path else ret[path] ''return ret
def repeat func func *args **kwargs if kwargs return starmap lambda args kwargs func *args **kwargs repeat args kwargs else return starmap func repeat args
def group follower list context data dict check access 'group follower list' context data dict return follower list context data dict ckan logic schema default follow group schema context['model'] User Following Group
def set attributes clean test data test type {'client' 1 'server' 2}test time {'short' 1 'medium' 2 'long' 3}test test type test type[data test type lower ]test test time test time[data time lower ]string attributes 'name' 'author' 'test class' 'test category' 'test category' 'sync count' for attribute in string attributes setattr test attribute getattr data attribute test description data doctest dependencies ' ' join data dependencies int attributes 'experimental' 'run verify' for attribute in int attributes setattr test attribute int getattr data attribute
def set attributes clean test data test type {'client' 1 'server' 2}test time {'short' 1 'medium' 2 'long' 3}test test type test type[data test type lower ]test test time test time[data time lower ]string attributes 'name' 'author' 'test class' 'test category' 'test category' 'sync count' for attribute in string attributes setattr test attribute getattr data attribute test description data doctest dependencies ' ' join data dependencies int attributes 'experimental' 'run verify' for attribute in int attributes setattr test attribute int getattr data attribute
def push note device None title None body None spb Salt Pushbullet device res spb push note title body return res
def org site has inv row tablename 'org facility' if not current deployment settings has module 'inv' return Falseif hasattr row tablename row row[tablename]try id row idexcept Attribute Error return Nones 3 db current s3 dbitable s3 db inv inv itemstable s3 db[tablename]query itable deleted True & stable id id & itable site id stable site id & itable quantity > 0 inv current db query select itable id limitby 0 1 first if inv return Trueelse return False
@memoizeddef get project tree options pants ignore options pants ignore or [] if options build file rev return Scm Project Tree get buildroot get scm options build file rev pants ignore else return File System Project Tree get buildroot pants ignore
@memoizeddef get project tree options pants ignore options pants ignore or [] if options build file rev return Scm Project Tree get buildroot get scm options build file rev pants ignore else return File System Project Tree get buildroot pants ignore
def schema builder urn nid method attributes soap ET Element 'soap Body' {'xmlns m' 'https //durabledns com/services/dns/%s' % method } urn ET Sub Element soap 'urn %s %s' % urn nid method for attribute in attributes ET Sub Element urn 'urn %s %s' % urn nid attribute return soap
def schema builder urn nid method attributes soap ET Element 'soap Body' {'xmlns m' 'https //durabledns com/services/dns/%s' % method } urn ET Sub Element soap 'urn %s %s' % urn nid method for attribute in attributes ET Sub Element urn 'urn %s %s' % urn nid attribute return soap
def connect to cloud dns region None return create client ep name 'dns' region region
def generate token length 30 chars UNICODE ASCII CHARACTER SET rand random System Random return u'' join rand choice chars for x in range length
def generate token length 30 chars UNICODE ASCII CHARACTER SET rand random System Random return u'' join rand choice chars for x in range length
def generate token length 30 chars UNICODE ASCII CHARACTER SET rand random System Random return u'' join rand choice chars for x in range length
def ordered permutation regex sentence sentence RE REF sub '\\ 1 ' sentence sentence RE REF LANG sub '\\ 1 ' sentence sentence RE SELF REF sub '' sentence words sentence split combinations itertools product True False repeat len words solution []for combination in combinations comb []for iword word in enumerate words if combination[iword] comb append word elif comb breakif comb solution append PREFIX + '[ 0 - 9 ]*%s*%s ? \\W $ +' % NUM SEP re escape '' join comb rstrip '\\' regex ' ' join sorted set solution key lambda o len o reverse True return regex
def get collapse fns return {'median' collapse to median 'first' collapse to first 'random' collapse to random 'sum' collapse to sum 'mean' collapse to mean}
def test importorskip module level testdir testdir makepyfile '\nimportpytest\nfoobarbaz pytest importorskip "foobarbaz" \n\ndeftest foo \npass\n' result testdir runpytest result stdout fnmatch lines ['*collected 0 items/ 1 skipped*']
def test importorskip module level testdir testdir makepyfile '\nimportpytest\nfoobarbaz pytest importorskip "foobarbaz" \n\ndeftest foo \npass\n' result testdir runpytest result stdout fnmatch lines ['*collected 0 items/ 1 skipped*']
def test importorskip module level testdir testdir makepyfile '\nimportpytest\nfoobarbaz pytest importorskip "foobarbaz" \n\ndeftest foo \npass\n' result testdir runpytest result stdout fnmatch lines ['*collected 0 items/ 1 skipped*']
def latex highlight classified text title 'python' commands default latex commands document default latex document macros '\n' join '\\newcommand{\\py%s}[ 1 ]{%s}' % c for c in commands items result []for kind text in classified text if kind result append '\\py%s{' % kind result append alltt escape text if kind result append '}' return default latex document % dict title title macros macros body '' join result
def test predict 1 sp Sequence Pattern ts 2 s TF Learn Seq 2 Seq sp verbose 1 wfn 'test %s' % ts 2 s canonical weights fn 0 print 'usingweightsfilename%s' % wfn tf reset default graph prediction y ts 2 s predict Xin range 10 weights input fn wfn assert len prediction 10
def runner name **kwargs jid kwargs pop ' orchestration jid ' None saltenv kwargs pop ' env ' 'base' full return kwargs pop 'full return' False kwargs salt utils clean kwargs **kwargs if 'master job cache' not in opts master config os path join os path dirname opts ['conf file'] 'master' master opts salt config master config master config rclient salt runner Runner Client master opts else rclient salt runner Runner Client opts if name in rclient functions aspec salt utils args get function argspec rclient functions[name] if 'saltenv' in aspec args kwargs['saltenv'] saltenvif jid salt utils event fire args opts jid {'type' 'runner' 'name' name 'args' kwargs} prefix 'run' return rclient cmd name kwarg kwargs print event False full return full return
def get elements count N N1 W2 thresh 0 9max count 0total counts 0 0for i in xrange N w W2 [ i]wa np abs w total wa sum s np asarray sorted wa count 1while s[ - count ] sum < thresh * total count + 1if count > max count max count counttotal counts + countave total counts / float N print 'averageneededfilters' ave count max countprint ' Ittakes' count 'of' N1 'elementstoaccountfor' thresh * 100 0 '\\%oftheweightinatleastonefilter' lim 10 if count > lim count limprint ' Onlydisplaying' count 'elementsthough ' if count > N1 count N1 return count
def find get notepad pages if config WEB GET NOTEPAD PAGES is None return Noneif type config WEB GET NOTEPAD PAGES is not tuple config WEB GET NOTEPAD PAGES config WEB GET NOTEPAD PAGES return functools partial GET NOTEPAD PAGES[config WEB GET NOTEPAD PAGES[ 0 ]] *config WEB GET NOTEPAD PAGES[ 1 ]
def ref sort key ref return len ref ref
def ref sort key ref return len ref ref
@step u' Iinputananswerona" [^"]* "problem" [^"]* ly"' def input problem answer problem type correctness assert correctness in ['correct' 'incorrect'] assert problem type in PROBLEM DICT answer problem world scenario dict['COURSE'] number problem type correctness
def hex to sha hex assert len hex 40 ' Incorrectlengthofhexsha %s' % hex try return binascii unhexlify hex except Type Error as exc if not isinstance hex bytes raiseraise Value Error exc args[ 0 ]
def define atomic inc dec module op ordering ftype ir Function Type word type [ word type as pointer ] fn atomic ir Function module ftype name 'nrt atomic {0 }' format op [ptr] fn atomic argsbb fn atomic append basic block builder ir IR Builder bb ONE ir Constant word type 1 if not disable atomicity oldval builder atomic rmw op ptr ONE ordering ordering res getattr builder op oldval ONE builder ret res else oldval builder load ptr newval getattr builder op oldval ONE builder store newval ptr builder ret oldval return fn atomic
def list terms type kwargs {'type' type}result util callm '%s/%s' % 'artist' 'list terms' kwargs return result['response']['terms']
def test settings clean revert env modified 'outer'env notmodified 'outer'with settings modified 'inner' notmodified 'inner' inner only 'only' clean revert True eq env modified 'inner' eq env notmodified 'inner' eq env inner only 'only' env modified 'modifiedinternally'eq env modified 'modifiedinternally' ok 'inner only' not in env
def type reconstructor reconstructor reconstructor args state obj reconstructor *reconstructor args if state obj dict update state return type obj intern obj
def is missing data missing value if is float data and isnan missing value return isnan data elif is datetime data and isnat missing value return isnat data return data missing value
def is missing data missing value if is float data and isnan missing value return isnan data elif is datetime data and isnat missing value return isnat data return data missing value
def success installation domains z util interfaces I Display notification ' Congratulations Youhavesuccessfullyenabled{ 0 }{ 1 }{ 1 } Youshouldtestyourconfigurationat {1 }{ 2 }' format gen https names domains os linesep os linesep join gen ssl lab urls domains pause False
def is oozie enabled return len [app for app in appmanager DESKTOP MODULES if app name 'oozie' ] > 0
def get metaschemas *args **kwargs count request args get 'count' 100 include request args get 'include' 'latest' meta schemas []if include 'latest' schema names list Meta Schema objects all values list 'name' flat True distinct for name in schema names meta schema set Meta Schema find Q 'name' 'eq' name & Q 'schema version' 'eq' 2 meta schemas meta schemas + [s for s in meta schema set] else meta schemas Meta Schema find meta schemas [schema for schema in meta schemas if schema name in ACTIVE META SCHEMAS ]meta schemas sort key lambda a ACTIVE META SCHEMAS index a name return {'meta schemas' [serialize meta schema ms for ms in meta schemas[ count]]} http OK
def test pushd appends current dir to stack if empty mox Mox old os io osio os mox Create Mock Anything class My Fs io File System stack []@classmethoddef current dir cls return 'shouldbecurrentdir'io os chdir 'somewhere' mox Replay All try assert len My Fs stack is 0 My Fs pushd 'somewhere' assert len My Fs stack is 2 assert equals My Fs stack ['shouldbecurrentdir' 'somewhere'] mox Verify All finally io os old os
def test pushd appends current dir to stack if empty mox Mox old os io osio os mox Create Mock Anything class My Fs io File System stack []@classmethoddef current dir cls return 'shouldbecurrentdir'io os chdir 'somewhere' mox Replay All try assert len My Fs stack is 0 My Fs pushd 'somewhere' assert len My Fs stack is 2 assert equals My Fs stack ['shouldbecurrentdir' 'somewhere'] mox Verify All finally io os old os
def tauchen rho sigma u m 3 n 7 std y np sqrt sigma u ** 2 / 1 - rho ** 2 x max m * std y x min - x max x np linspace x min x max n step x max - x min / n - 1 half step 0 5 * step P np empty n n fill tauchen x P n rho sigma u half step mc Markov Chain P state values x return mc
def getmro cls if hasattr cls ' mro ' return cls mro else result [] searchbases cls result return tuple result
def getmro cls if hasattr cls ' mro ' return cls mro else result [] searchbases cls result return tuple result
def to timestamp val if isinstance val numbers Number return valelif isinstance val six string types dt parse datetime string val else dt valreturn time mktime dt timetuple
def test doc api merge children en tokenizer text u'WKR Oplayedsongsbythebeachboysallnight'doc en tokenizer text assert len doc 9 doc merge doc[ 4 ] idx doc[ 6 ] idx + len doc[ 6 ] u'NAMED' u'LEMMA' u'TYPE' for word in doc if word i < word head i assert word in list word head lefts elif word i > word head i assert word in list word head rights
def update api key description api Key description region None key None keyid None profile None try conn get conn region region key key keyid keyid profile profile response api key patch replace conn api Key '/description' description return {'updated' True 'api Key' convert datetime str response }except Client Error as e return {'updated' False 'error' salt utils boto 3 get error e }
def prefix bp func class Operator Token Base lbp bpdef nud self parser self first parser expression bp self second Nonereturn selfdef eval self context try return func context self first except Exception return Falsereturn Operator
def validate pack name name if not name raise Value Error ' Contentpacknamecannotbeempty' if name lower in USER PACK NAME BLACKLIST raise Value Error ' Name"%s"isblacklistedandcan\'tbeused' % name lower return name
def get tag commit try return check output ['git' 'describe' '--tags'] stderr STDOUT cwd os path dirname os path abspath file except Called Process Error as e logger error ' Errorcallinggit "{}"\noutput "{}"' format e e output return Noneexcept OS Error as e logger error ' Couldnotcallgit isitinstalled?errormsg "{}"' format e return None
def main args get args si Smart Connect host args host user args user pwd args password port args port atexit register Disconnect si content si Retrieve Content template Nonetemplate get obj content [vim Virtual Machine] args template if template clone vm content template args vm name si args datacenter name args vm folder args datastore name args cluster name args resource pool args power on else print 'templatenotfound'
def get easy s3 config file None cache False cfg get config config file cache return cfg get easy s3
def json decode rsp try o json loads rsp object hook decode dict except Value Error raise Copr Hd Error Copr Hd Error VALUE ERR ' Failedtorecognize JSO Npayload \n[%s]' % rsp return o
def get site status msg course key try if not Global Status Message current enabled return Nonereturn Global Status Message current full message course key except log exception ' Errorwhilegettingastatusmessage ' return None
def random tree n seed None if n 0 raise nx Network X Pointless Concept 'thenullgraphisnotatree' if n 1 return nx empty graph 1 random seed seed sequence sample with replacement range n n - 2 return nx from prufer sequence sequence
def make stc raw src seed 42 sfreq raw info['sfreq']tstep 1 0 / sfreq n samples len raw times // 10 times np arange 0 n samples * tstep stc simulate sparse stc src 10 times random state seed return stc
@then 'thecommandoutputshouldnotcontainlogrecordsfromcategories' def step command output should not contain log records from categories context assert context table 'REQUIRE context table'context table require column 'category' record schema context log record row schema Log Record Table annotate with row schema context table record schema step command output should not contain log records context context table remove columns ['level' 'message']
@then 'thecommandoutputshouldnotcontainlogrecordsfromcategories' def step command output should not contain log records from categories context assert context table 'REQUIRE context table'context table require column 'category' record schema context log record row schema Log Record Table annotate with row schema context table record schema step command output should not contain log records context context table remove columns ['level' 'message']
@then 'thecommandoutputshouldnotcontainlogrecordsfromcategories' def step command output should not contain log records from categories context assert context table 'REQUIRE context table'context table require column 'category' record schema context log record row schema Log Record Table annotate with row schema context table record schema step command output should not contain log records context context table remove columns ['level' 'message']
def binary crossentropy predictions targets predictions targets align targets predictions targets return theano tensor nnet binary crossentropy predictions targets
def post account url token headers http conn None response dict None service token None query string None data None if http conn parsed conn http connelse parsed conn http connection url method 'POST'path parsed pathif query string path + '?' + query string headers['X- Auth- Token'] tokenif service token headers['X- Service- Token'] service tokenconn request method path data headers resp conn getresponse body resp read http log url method {'headers' headers} resp body store response resp response dict if resp status < 200 or resp status > 300 raise Client Exception from response resp ' Account POS Tfailed' body resp headers {}for header value in resp getheaders resp headers[header lower ] valuereturn resp headers body
def test config alterations kwargs class Line Config Config no prefix Trueshow legend Falsefill Truepretty print Truex labels ['a' 'b' 'c']config Line Config line 1 Line config line 1 add ' ' [1 2 3] l1 line 1 render line 1 stroke Falsel 1 bis line 1 render assert l1 l1 bis line 2 Line config line 2 add ' ' [1 2 3] l2 line 2 render assert l1 l2 assert l1 bis l2 line 3 Line config title ' Title' line 3 add ' ' [1 2 3] l3 line 3 render assert l3 l2 l2 bis line 2 render assert l2 l2 bis
def test config alterations kwargs class Line Config Config no prefix Trueshow legend Falsefill Truepretty print Truex labels ['a' 'b' 'c']config Line Config line 1 Line config line 1 add ' ' [1 2 3] l1 line 1 render line 1 stroke Falsel 1 bis line 1 render assert l1 l1 bis line 2 Line config line 2 add ' ' [1 2 3] l2 line 2 render assert l1 l2 assert l1 bis l2 line 3 Line config title ' Title' line 3 add ' ' [1 2 3] l3 line 3 render assert l3 l2 l2 bis line 2 render assert l2 l2 bis
def get reparse data path if sys getwindowsversion major < 6 raise Salt Invocation Error ' Symlinksareonlysupportedon Windows Vistaorlater ' path os path normpath path if not is reparse point path return Nonefile Handle Nonetry file Handle win 32 file Create File W path 2147483648 1 None 3 2097152 33554432 reparse Data win 32 file Device Io Control file Handle 589992 None 16384 finally if file Handle win 32 file Close Handle file Handle return reparse Data
def json handler obj if isinstance obj datetime date datetime timedelta datetime datetime return unicode obj elif isinstance obj Local Proxy return unicode obj elif isinstance obj frappe model document Base Document doc obj as dict no nulls True return docelif type obj type or isinstance obj Exception return repr obj else raise Type Error u' Objectoftype%swithvalueof%sisnot JSO Nserializable' % type obj repr obj
def make Service options svc service Multi Service namespace options['namespace']if namespace is None namespace {}checker checkers File Password DB options['passwd'] if options['telnet Port'] telnet Realm Stupid Realm telnet Telnet Bootstrap Protocol insults Server Protocol manhole Colored Manhole namespace telnet Portal portal Portal telnet Realm [checker] telnet Factory protocol Server Factory telnet Factory protocol make Telnet Protocol telnet Portal telnet Service strports service options['telnet Port'] telnet Factory telnet Service set Service Parent svc if options['ssh Port'] ssh Realm manhole ssh Terminal Realm ssh Realm chained Protocol Factory chained Protocol Factory namespace ssh Portal portal Portal ssh Realm [checker] ssh Factory manhole ssh Conch Factory ssh Portal ssh Service strports service options['ssh Port'] ssh Factory ssh Service set Service Parent svc return svc
def triangle 2 unit tb lower 0 if lower d tb[ 0 ] copy else d tb[ -1 ] copy if lower return d tb / d else l upper 2 lower tb return d lower 2 upper l / d
def triangle 2 unit tb lower 0 if lower d tb[ 0 ] copy else d tb[ -1 ] copy if lower return d tb / d else l upper 2 lower tb return d lower 2 upper l / d
def volume destroy context volume id return IMPL volume destroy context volume id
def packets for stream fobj offset pcap dpkt pcap Reader fobj pcapiter iter pcap ts raw pcapiter next fobj seek offset for p in next connection packets pcapiter linktype pcap datalink yield p
def generate model root class ROOT CLASS classes result {}result {u'root' fqpn root class u'classes' classes result}classes {root class}while classes klass classes pop klass name fqpn klass if klass name in classes result continueif issubclass klass P Record P Class to model precord modelelif issubclass klass Checked P Map to model pmap modelelif issubclass klass Checked P Set Checked P Vector to model psequence modelelse to model default model record further classes to model klass classes result[klass name] recordclasses further classesreturn result
def generate model root class ROOT CLASS classes result {}result {u'root' fqpn root class u'classes' classes result}classes {root class}while classes klass classes pop klass name fqpn klass if klass name in classes result continueif issubclass klass P Record P Class to model precord modelelif issubclass klass Checked P Map to model pmap modelelif issubclass klass Checked P Set Checked P Vector to model psequence modelelse to model default model record further classes to model klass classes result[klass name] recordclasses further classesreturn result
def generate model root class ROOT CLASS classes result {}result {u'root' fqpn root class u'classes' classes result}classes {root class}while classes klass classes pop klass name fqpn klass if klass name in classes result continueif issubclass klass P Record P Class to model precord modelelif issubclass klass Checked P Map to model pmap modelelif issubclass klass Checked P Set Checked P Vector to model psequence modelelse to model default model record further classes to model klass classes result[klass name] recordclasses further classesreturn result
def Expand Windows User Environment Variables data string knowledge base sid None username None win environ regex re compile '% [^%]+? %' components []offset 0for match in win environ regex finditer data string components append data string[offset match start ] kb user knowledge base Get User sid sid username username kb value Noneif kb user kb value getattr kb user match group 1 lower None if isinstance kb value basestring and kb value components append kb value else components append '%%%s%%' % match group 1 offset match end components append data string[offset ] return '' join components
def insert meta param description *args **kwargs if not args return lambda f insert meta param description f **kwargs f args[ 0 ]if f doc indent '' * kwargs get 'pad' 8 body textwrap wrap META DESCRIPTION initial indent indent subsequent indent indent width 78 descr '{ 0 }\n{ 1 }' format META TYPES '\n' join body f doc f doc replace '$META' descr return f
def debounce seconds 1 def decorator func func timer None@wraps func def wrapper *args **kwargs def call func *args **kwargs func timer Noneif func timer func timer cancel func timer Timer seconds call func timer start return wrapperreturn decorator
@bdd given ' Ihaveafreshinstance' def fresh instance quteproc quteproc terminate quteproc start
def get Django Objects context c context extrak 'django objects'try return c[k]except Key Error c[k] Django Reference Collection return c[k]
def get Django Objects context c context extrak 'django objects'try return c[k]except Key Error c[k] Django Reference Collection return c[k]
def Heat Map data x None y None values None stat 'count' xgrid False ygrid False hover tool True hover text None **kw kw['x'] xkw['y'] ykw['values'] valueskw['stat'] statchart create and build Heat Map Builder data xgrid xgrid ygrid ygrid **kw if hover tool tooltip build agg tooltip hover text hover text aggregated col values agg text stat chart add tooltips [tooltip] return chart
def Heat Map data x None y None values None stat 'count' xgrid False ygrid False hover tool True hover text None **kw kw['x'] xkw['y'] ykw['values'] valueskw['stat'] statchart create and build Heat Map Builder data xgrid xgrid ygrid ygrid **kw if hover tool tooltip build agg tooltip hover text hover text aggregated col values agg text stat chart add tooltips [tooltip] return chart
def Heat Map data x None y None values None stat 'count' xgrid False ygrid False hover tool True hover text None **kw kw['x'] xkw['y'] ykw['values'] valueskw['stat'] statchart create and build Heat Map Builder data xgrid xgrid ygrid ygrid **kw if hover tool tooltip build agg tooltip hover text hover text aggregated col values agg text stat chart add tooltips [tooltip] return chart
def getargtxt obj one arg per line True args getargs obj if args sep ' 'textlist Nonefor i arg arg in enumerate args if textlist is None textlist ['']textlist[ -1 ] + argif i arg < len args - 1 textlist[ -1 ] + sepif len textlist[ -1 ] > 32 or one arg per line textlist append '' if inspect isclass obj or inspect ismethod obj if len textlist 1 return Noneif 'self' + sep in textlist textlist remove 'self' + sep return textlist
def dir tree find tree kind nodes []if isinstance tree list for t in tree nodes + dir tree find t kind else if tree['block'] kind nodes append tree for child in tree['children'] nodes + dir tree find child kind return nodes
def cpu Throttle value delay 1e- 05 * value ** 2 time sleep delay
def delivery pipeline registry xml parent data pvc XML Sub Element xml parent 'se diabol jenkins pipeline Pipeline Version Contributor' pvc set 'plugin' 'delivery-pipeline-plugin' mapping [ 'version-template' 'version Template' '' 'set-display-name' 'update Display Name' False ]convert mapping to xml pvc data mapping fail required True
def get equivalent release groups release group for equivalent release group in equivalent release groups if release group in equivalent release group return equivalent release groupreturn {release group}
def show reference template request template try context {'disable courseware js' True 'uses pattern library' True}context update request GET dict return render to response template context except Top Level Lookup Exception return Http Response Not Found " Couldn'tfindtemplate{template}" format template template
def restart app id restart False force True ret {'restarted' None}if not restart ret['restarted'] Falsereturn rettry response salt utils http query '{ 0 }/v 2 /apps/{ 1 }/restart?force {2 }' format base url app id id force method 'POST' decode type 'json' decode True header dict {' Content- Type' 'application/json' ' Accept' 'application/json'} log debug 'restartresponse %s' response ret['restarted'] Trueret update response['dict'] return retexcept Exception as ex log error 'unabletorestartmarathonapp %s' ex message return {'exception' {'message' ex message}}
def setup platform hass config add devices discovery info None from pmsensor import serial pm as pmtry coll pm PM Data Collector config get CONF SERIAL DEVICE pm SUPPORTED SENSORS[config get CONF BRAND ] except Key Error LOGGER error ' Brand%snotsupported\nsupportedbrands %s' config get CONF BRAND pm SUPPORTED SENSORS keys returnexcept OS Error as err LOGGER error ' Couldnotopenserialconnectionto%s %s ' config get CONF SERIAL DEVICE err returndev []for pmname in coll supported values if config get CONF NAME is None name '{}PM{}' format config get CONF NAME pmname else name 'PM{}' format pmname dev append Particulate Matter Sensor coll name pmname add devices dev
def num cpus if hasattr os 'sysconf' if 'SC NPROCESSORS ONLN' in os sysconf names ncpus os sysconf 'SC NPROCESSORS ONLN' if isinstance ncpus int and ncpus > 0 return ncpuselse return int read stdout ['sysctl' '-n' 'hw ncpu'] or 1 if 'NUMBER OF PROCESSORS' in os environ ncpus int os environ['NUMBER OF PROCESSORS'] if ncpus > 0 return ncpusreturn 1
def get url view name backend name auth entry None redirect url None extra params None url params None url params url params or {} url params['backend'] backend nameurl reverse view name kwargs url params query params Ordered Dict if auth entry query params[AUTH ENTRY KEY] auth entryif redirect url query params[AUTH REDIRECT KEY] redirect urlif extra params query params update extra params return u'{url}?{params}' format url url params urllib urlencode query params
def stringify pkgs try for key in pkgs pkgs[key] ' ' join pkgs[key] except Attribute Error as exc log exception exc
def stringify pkgs try for key in pkgs pkgs[key] ' ' join pkgs[key] except Attribute Error as exc log exception exc
def generate json file results dir relative links True results data parse results dir results dir relative links json path os path join results dir 'status json' json file open json path 'w' json dump results data json file json file close return json path
def banner Parser banner xmlfile Noneif Backend is Dbms DBMS MSSQL xmlfile paths MSSQL XM Lelif Backend is Dbms DBMS MYSQL xmlfile paths MYSQL XM Lelif Backend is Dbms DBMS ORACLE xmlfile paths ORACLE XM Lelif Backend is Dbms DBMS PGSQL xmlfile paths PGSQL XM Lif not xmlfile returnif Backend is Dbms DBMS MSSQL handler MSSQL Banner Handler banner kb banner Fp parse Xml File xmlfile handler handler Fingerprint Handler banner kb banner Fp parse Xml File paths GENERIC XML handler else handler Fingerprint Handler banner kb banner Fp parse Xml File xmlfile handler parse Xml File paths GENERIC XML handler
def banner Parser banner xmlfile Noneif Backend is Dbms DBMS MSSQL xmlfile paths MSSQL XM Lelif Backend is Dbms DBMS MYSQL xmlfile paths MYSQL XM Lelif Backend is Dbms DBMS ORACLE xmlfile paths ORACLE XM Lelif Backend is Dbms DBMS PGSQL xmlfile paths PGSQL XM Lif not xmlfile returnif Backend is Dbms DBMS MSSQL handler MSSQL Banner Handler banner kb banner Fp parse Xml File xmlfile handler handler Fingerprint Handler banner kb banner Fp parse Xml File paths GENERIC XML handler else handler Fingerprint Handler banner kb banner Fp parse Xml File xmlfile handler parse Xml File paths GENERIC XML handler
@skip 'silverlight' 'multiple execute' 'win 32 ' def test c1 cs if not has csc returnc 1 cs get local filename 'c 1 cs' outp sys exec prefixcompile And Ref 'c 1 ' c1 cs '/d BAR 1 ' import Fooclass c1 Child Foo Bar passo c1 Child Are Equal o Method ' Inbar 1 ' compile And Ref 'c 1 b' c1 cs import Fooclass c2 Child Foo Bar passo c2 Child Are Equal o Method ' Inbar 2 '
@skip 'silverlight' 'multiple execute' 'win 32 ' def test c1 cs if not has csc returnc 1 cs get local filename 'c 1 cs' outp sys exec prefixcompile And Ref 'c 1 ' c1 cs '/d BAR 1 ' import Fooclass c1 Child Foo Bar passo c1 Child Are Equal o Method ' Inbar 1 ' compile And Ref 'c 1 b' c1 cs import Fooclass c2 Child Foo Bar passo c2 Child Are Equal o Method ' Inbar 2 '
@skip 'silverlight' 'multiple execute' 'win 32 ' def test c1 cs if not has csc returnc 1 cs get local filename 'c 1 cs' outp sys exec prefixcompile And Ref 'c 1 ' c1 cs '/d BAR 1 ' import Fooclass c1 Child Foo Bar passo c1 Child Are Equal o Method ' Inbar 1 ' compile And Ref 'c 1 b' c1 cs import Fooclass c2 Child Foo Bar passo c2 Child Are Equal o Method ' Inbar 2 '
def get enrolled return User objects raw 'SELECT*FRO Mauth userwhereidnotin SELEC Tuser idfromstudent usersignupsource '
def set creation order instance global creation orderinstance creation order creation order creation order + 1
def psutil phymem usage import psutiltry percent psutil virtual memory percentexcept percent psutil phymem usage percentreturn percent
def update module store settings module store setting doc store settings None module store options None xml store options None default store None mappings None for store in module store setting['default']['OPTIONS']['stores'] if store['NAME'] 'xml' xml store options and store['OPTIONS'] update xml store options else module store options and store['OPTIONS'] update module store options doc store settings and store['DOC STORE CONFIG'] update doc store settings if default store mixed stores get mixed stores module store setting for store in mixed stores if store['NAME'] default store mixed stores remove store mixed stores insert 0 store returnraise Exception ' Couldnotfindsettingforrequesteddefaultstore {}' format default store if mappings and 'mappings' in module store setting['default']['OPTIONS'] module store setting['default']['OPTIONS']['mappings'] mappings
def update module store settings module store setting doc store settings None module store options None xml store options None default store None mappings None for store in module store setting['default']['OPTIONS']['stores'] if store['NAME'] 'xml' xml store options and store['OPTIONS'] update xml store options else module store options and store['OPTIONS'] update module store options doc store settings and store['DOC STORE CONFIG'] update doc store settings if default store mixed stores get mixed stores module store setting for store in mixed stores if store['NAME'] default store mixed stores remove store mixed stores insert 0 store returnraise Exception ' Couldnotfindsettingforrequesteddefaultstore {}' format default store if mappings and 'mappings' in module store setting['default']['OPTIONS'] module store setting['default']['OPTIONS']['mappings'] mappings
def params from strings params param values app ignore errors False rval dict param values param values or {} for key value in param values items value json fix safe loads value if key in params value params[key] value from basic value app ignore errors rval[key] valuereturn rval
def clone plugin plugin dirname os path join plugin cache dir os path basename plugin print ' Cloning%s->%s' % plugin dirname if os path exists dirname print ' Skipcloningof%s Alreadythere ' % plugin returncreate directory dirname subprocess call ['git' 'clone' '--recursive' '--depth' '1 ' 'https //github com/%s' % plugin dirname] if plugin ' Valloric/ You Complete Me' subprocess call os path join dirname ' /install sh' cwd dirname
@repo mgr cli command 'delete' @click option '--repository' required True help ' Repositoryname' type str @click option '--yes' is flag True callback delete callback expose value False prompt ' Areyousureyouwanttodeletetherepository?' @click pass contextdef delete ctx repository client get client **ctx obj['client args'] try logger info ' Deletingrepository{ 0 } ' format repository client snapshot delete repository repository repository except elasticsearch Not Found Error logger error ' Unabletodeleterepository {0 } Not Found ' format repository sys exit 1
def make totp secret skew 0 timestamp None timestamp timestamp or time time counter timestamp // PERIOD return make hotp secret counter - skew
def Call With Retry Async retry policy func *args **kwargs inner callback kwargs get 'callback' None assert 'callback' in kwargs ' Call With Retry Asyncrequiresanamed"callback"argumentthatisnot None 'retry manager retry policy Create Manager def On Completed Call *callback args **callback kwargs ' Calledwhentheoperationhascompleted Determinewhethertoretry \nbasedontheargumentstothecallback \n'retry func functools partial func *args **kwargs if not retry manager Maybe Retry On Result retry func *callback args **callback kwargs exception context check retry Falseinner callback *callback args **callback kwargs def On Exception type value tb ' Callediftheoperationraisesanexception Determinewhethertoretry\norre-raisetheexception basedontheexceptiondetails \n'if exception context check retry retry func functools partial func *args **kwargs return retry manager Maybe Retry On Exception retry func type value tb kwargs['callback'] On Completed Callexception context Exception Stack Context On Exception exception context check retry Truewith exception context func *args **kwargs
def Call With Retry Async retry policy func *args **kwargs inner callback kwargs get 'callback' None assert 'callback' in kwargs ' Call With Retry Asyncrequiresanamed"callback"argumentthatisnot None 'retry manager retry policy Create Manager def On Completed Call *callback args **callback kwargs ' Calledwhentheoperationhascompleted Determinewhethertoretry \nbasedontheargumentstothecallback \n'retry func functools partial func *args **kwargs if not retry manager Maybe Retry On Result retry func *callback args **callback kwargs exception context check retry Falseinner callback *callback args **callback kwargs def On Exception type value tb ' Callediftheoperationraisesanexception Determinewhethertoretry\norre-raisetheexception basedontheexceptiondetails \n'if exception context check retry retry func functools partial func *args **kwargs return retry manager Maybe Retry On Exception retry func type value tb kwargs['callback'] On Completed Callexception context Exception Stack Context On Exception exception context check retry Truewith exception context func *args **kwargs
def Call With Retry Async retry policy func *args **kwargs inner callback kwargs get 'callback' None assert 'callback' in kwargs ' Call With Retry Asyncrequiresanamed"callback"argumentthatisnot None 'retry manager retry policy Create Manager def On Completed Call *callback args **callback kwargs ' Calledwhentheoperationhascompleted Determinewhethertoretry \nbasedontheargumentstothecallback \n'retry func functools partial func *args **kwargs if not retry manager Maybe Retry On Result retry func *callback args **callback kwargs exception context check retry Falseinner callback *callback args **callback kwargs def On Exception type value tb ' Callediftheoperationraisesanexception Determinewhethertoretry\norre-raisetheexception basedontheexceptiondetails \n'if exception context check retry retry func functools partial func *args **kwargs return retry manager Maybe Retry On Exception retry func type value tb kwargs['callback'] On Completed Callexception context Exception Stack Context On Exception exception context check retry Truewith exception context func *args **kwargs
def get all context session query session query models Metadef Resource Type resource types query all resource types list []for rt in resource types resource types list append rt to dict return resource types list
@cli command 'paste' @click option '-l' '--left' default 0 help ' Offsetfromleft ' @click option '-r' '--right' default 0 help ' Offsetfromright ' @processordef paste cmd images left right imageiter iter images image next imageiter None to paste next imageiter None if to paste is None if image is not None yield image returnclick echo ' Paste"%s"on"%s"' % to paste filename image filename mask Noneif to paste mode 'RGBA' or 'transparency' in to paste info mask to pasteimage paste to paste left right mask image filename + '+' + to paste filename yield image for image in imageiter yield image
@cli command 'paste' @click option '-l' '--left' default 0 help ' Offsetfromleft ' @click option '-r' '--right' default 0 help ' Offsetfromright ' @processordef paste cmd images left right imageiter iter images image next imageiter None to paste next imageiter None if to paste is None if image is not None yield image returnclick echo ' Paste"%s"on"%s"' % to paste filename image filename mask Noneif to paste mode 'RGBA' or 'transparency' in to paste info mask to pasteimage paste to paste left right mask image filename + '+' + to paste filename yield image for image in imageiter yield image
def format history for queue slotinfo []history items get active history for item in history items slot {'nzo id' item['nzo id'] 'bookmark' '' 'filename' xml name item['name'] 'loaded' False 'stages' item['stage log'] 'status' item['status'] 'bytes' item['bytes'] 'size' item['size']}slotinfo append slot return slotinfo
def extract query choices processor default processor scorer default scorer limit 5 sl extract Without Order query choices processor scorer return heapq nlargest limit sl key lambda i i[ 1 ] if limit is not None else sorted sl key lambda i i[ 1 ] reverse True
def encode missing object hash ts data ts meta None ts ctype None msg '%s%s' % urllib parse quote object hash urllib parse quote ts data internal if ts meta and ts meta ts data delta ts meta raw - ts data raw msg '%sm %x' % msg delta if ts ctype and ts ctype ts data delta ts ctype raw - ts data raw msg '%s t %x' % msg delta return msg
def convert json to df results url with closing urlopen results url as resp res json loads resp read timings res get 'timings' if not timings returnres [x for x in timings if x get 'succeeded' ]df pd Data Frame res df df set index 'name' return df
def convert json to df results url with closing urlopen results url as resp res json loads resp read timings res get 'timings' if not timings returnres [x for x in timings if x get 'succeeded' ]df pd Data Frame res df df set index 'name' return df
def read Audio File path extension os path splitext path [1 ]try if extension lower ' wav' [ Fs x] wavfile read path elif extension lower ' aif' or extension lower ' aiff' s aifc open path 'r' nframes s getnframes strsig s readframes nframes x numpy fromstring strsig numpy short byteswap Fs s getframerate else print ' Errorinread Audio File Unknownfiletype 'return -1 -1 except IO Error print ' Error filenotfoundorother I/ Oerror 'return -1 -1 return Fs x
def read Audio File path extension os path splitext path [1 ]try if extension lower ' wav' [ Fs x] wavfile read path elif extension lower ' aif' or extension lower ' aiff' s aifc open path 'r' nframes s getnframes strsig s readframes nframes x numpy fromstring strsig numpy short byteswap Fs s getframerate else print ' Errorinread Audio File Unknownfiletype 'return -1 -1 except IO Error print ' Error filenotfoundorother I/ Oerror 'return -1 -1 return Fs x
def assert nD array ndim arg name 'image' array np asanyarray array msg incorrect dim ' Theparameter`%s`mustbea%s-dimensionalarray'msg empty array ' Theparameter`%s`cannotbeanemptyarray'if isinstance ndim int ndim [ndim]if array size 0 raise Value Error msg empty array % arg name if not array ndim in ndim raise Value Error msg incorrect dim % arg name '-or-' join [str n for n in ndim]
def assert nD array ndim arg name 'image' array np asanyarray array msg incorrect dim ' Theparameter`%s`mustbea%s-dimensionalarray'msg empty array ' Theparameter`%s`cannotbeanemptyarray'if isinstance ndim int ndim [ndim]if array size 0 raise Value Error msg empty array % arg name if not array ndim in ndim raise Value Error msg incorrect dim % arg name '-or-' join [str n for n in ndim]
def floor x np import module 'numpy' if isinstance x int float return interval np floor x elif isinstance x interval if x is valid is False return interval - np inf np inf is valid False else start np floor x start end np floor x end if start end return interval start end is valid x is valid else return interval start end is valid None else return Not Implemented Error
def get display spec if spec is None return Noneelif isinstance spec six string types return pyglet canvas Display spec else raise error Error ' Invaliddisplayspecification {} Mustbeastringlike 0or None ' format spec
@statfuncdef quantiles x qlist 2 5 25 50 75 97 5 transform lambda x x x transform x copy if x ndim > 1 sx np sort x T Telse sx np sort x try quants [sx[int len sx * q / 100 0 ] for q in qlist]return dict zip qlist quants except Index Error log warning ' Toofewelementsforquantilecalculation'
@statfuncdef quantiles x qlist 2 5 25 50 75 97 5 transform lambda x x x transform x copy if x ndim > 1 sx np sort x T Telse sx np sort x try quants [sx[int len sx * q / 100 0 ] for q in qlist]return dict zip qlist quants except Index Error log warning ' Toofewelementsforquantilecalculation'
@statfuncdef quantiles x qlist 2 5 25 50 75 97 5 transform lambda x x x transform x copy if x ndim > 1 sx np sort x T Telse sx np sort x try quants [sx[int len sx * q / 100 0 ] for q in qlist]return dict zip qlist quants except Index Error log warning ' Toofewelementsforquantilecalculation'
@statfuncdef quantiles x qlist 2 5 25 50 75 97 5 transform lambda x x x transform x copy if x ndim > 1 sx np sort x T Telse sx np sort x try quants [sx[int len sx * q / 100 0 ] for q in qlist]return dict zip qlist quants except Index Error log warning ' Toofewelementsforquantilecalculation'
def snapper post opts jid pre num try if not opts['test'] and opts get 'snapper states' and pre num salt ['snapper create snapshot'] config opts get 'snapper states config' 'root' snapshot type 'post' pre number pre num description ' Salt Staterunforjid{ 0 }' format jid pub jid jid except Exception log error ' Failedtocreatesnapperpresnapshotforjid {0 }' format jid
def aws output args aws config environment os environ copy environment update aws config return check output ['aws'] + args env environment
@lru cache def physical memory start time parameter time time 'systemphysicalmemory' mem total line get line '/proc/meminfo' ' Mem Total ' parameter try result int mem total line split [1 ] * 1024 log runtime parameter '/proc/meminfo[ Mem Total]' start time return resultexcept exc IO Error 'unabletoparsethe/proc/meminfo Mem Totalentry %s' % mem total line log failure parameter exc raise exc
def list journals config sep u'\n'journal list sep join config[u'journals'] return journal list
def transform Vector 3 Blindly tetragrid vector 3 x get Transformed By List tetragrid[ 0 ] vector 3 y get Transformed By List tetragrid[ 1 ] vector 3 z get Transformed By List tetragrid[ 2 ] vector 3 vector 3 x xvector 3 y yvector 3 z z
def setup platform hass config add devices discovery info None dev []for resource in config[CONF RESOURCES] if 'arg' not in resource resource['arg'] ''dev append System Monitor Sensor resource[CONF TYPE] resource['arg'] add devices dev
def Test Init global INIT RA Nif stats STATS is None stats STATS stats Stats Collector flags FLAGS config config lib Resource Filter 'install data/etc/grr-server yaml' flags FLAGS secondary configs [config lib Resource Filter 'test data/grr test yaml@grr-response-test' ]extra test config config lib CONFIG[' Test additional test config']if os path exists extra test config flags FLAGS secondary configs append extra test config config lib CONFIG Add Context ' Test Context' ' Contextappliedwhenweruntests ' config lib Set Platform Arch Context config lib Parse Config Command Line if not INIT RAN log Server Logging Startup Init registry Test Init INIT RAN True
def bspline basis set d knots x n splines len knots - d - 1 return [bspline basis d knots i x for i in range n splines ]
def make anonymous struct builder values struct type None if struct type is None struct type ir Literal Struct Type [v type for v in values] struct val struct type ir Undefined for i v in enumerate values struct val builder insert value struct val v i return struct val
def make anonymous struct builder values struct type None if struct type is None struct type ir Literal Struct Type [v type for v in values] struct val struct type ir Undefined for i v in enumerate values struct val builder insert value struct val v i return struct val
def make anonymous struct builder values struct type None if struct type is None struct type ir Literal Struct Type [v type for v in values] struct val struct type ir Undefined for i v in enumerate values struct val builder insert value struct val v i return struct val
def test neg type new args global calledcalled Falseclass My Type type def new self passdef clrtype self global calledcalled Truereturn super My Type self clrtype try class X object metaclass My Type Fail 'type new signatureiswrong' except Type Error as e Are Equal e message ' new takesexactly 1 argument 4given ' finally Are Equal called False
def getvalue name default return getattr settings name default
@never cachedef unsubscribe request hash None token None perm setting None assert hash is not None and token is not None user Nonetry email Unsubscribe Code parse token hash user User Profile objects get email email except Value Error User Profile Does Not Exist passperm settings []if user is not None unsubscribed Trueif not perm setting perm settings [l for l in notifications NOTIFICATIONS if not l mandatory ]else perm setting notifications NOTIFICATIONS BY SHORT[perm setting] User Notification update or create update {'enabled' False} user user notification id perm setting id perm settings [perm setting]else unsubscribed Falseemail ''return render request 'users/unsubscribe html' {'unsubscribed' unsubscribed 'email' email 'perm settings' perm settings}
@never cachedef unsubscribe request hash None token None perm setting None assert hash is not None and token is not None user Nonetry email Unsubscribe Code parse token hash user User Profile objects get email email except Value Error User Profile Does Not Exist passperm settings []if user is not None unsubscribed Trueif not perm setting perm settings [l for l in notifications NOTIFICATIONS if not l mandatory ]else perm setting notifications NOTIFICATIONS BY SHORT[perm setting] User Notification update or create update {'enabled' False} user user notification id perm setting id perm settings [perm setting]else unsubscribed Falseemail ''return render request 'users/unsubscribe html' {'unsubscribed' unsubscribed 'email' email 'perm settings' perm settings}
def check dna chars bcs header mapping data errors has barcodes True valid dna chars DNA Sequence iupac standard characters header fields to check []if has barcodes header fields to check append ' Barcode Sequence' check indices []for curr field in range len header if header[curr field] in header fields to check check indices append curr field correction ix 1for curr data in range len mapping data for curr ix in check indices if len mapping data[curr data][curr ix] 0 errors append ' Missingexpected DN Asequence DCTB %d %d' % curr data + correction ix curr ix continuefor curr nt in mapping data[curr data][curr ix] if curr nt not in valid dna chars errors append ' Invalid DN Asequencedetected %s DCTB %d %d' % mapping data[curr data][curr ix] curr data + correction ix curr ix continuereturn errors
def get client region key keyid profile session get session region key keyid profile if not session log error ' Failedtogetdatapipelineclient ' return Nonereturn session client 'datapipeline'
def libvlc media get type p md f Cfunctions get 'libvlc media get type' None or Cfunction 'libvlc media get type' 1 None Media Type Media return f p md
def generate objects info packs repo for pack in repo object store packs yield 'P' + pack data filename encode sys getfilesystemencoding + '\n'
def update name maximum version None required version None flags [ u' Name' name ]if maximum version is not None flags append u' Maximum Version' maximum version if required version is not None flags append u' Required Version' required version params u''for flag value in flags params + u'-{ 0 }{ 1 }' format flag value cmd u' Update- Module{ 0 }- Force' format params pshell cmd return name in list modules
def allow serial nos with different item sle serial no sle allow serial nos Falseif sle voucher type u' Stock Entry' and sle actual qty > 0 stock entry frappe get doc u' Stock Entry' sle voucher no if stock entry purpose in u' Repack' u' Manufacture' for d in stock entry get u'items' if d serial no and d s warehouse if sle is cancelled u' No' else d t warehouse serial nos get serial nos d serial no if sle serial no in serial nos allow serial nos Truereturn allow serial nos
def allow serial nos with different item sle serial no sle allow serial nos Falseif sle voucher type u' Stock Entry' and sle actual qty > 0 stock entry frappe get doc u' Stock Entry' sle voucher no if stock entry purpose in u' Repack' u' Manufacture' for d in stock entry get u'items' if d serial no and d s warehouse if sle is cancelled u' No' else d t warehouse serial nos get serial nos d serial no if sle serial no in serial nos allow serial nos Truereturn allow serial nos
def unescape text chars REV HTML ESCAPE CHARS for s h in chars text text replace h s return text
def scoreatpercentile a per limit interpolation method 'fraction' axis None a np asarray a if a size 0 if np isscalar per return np nanelse return np ones np asarray per shape dtype np float 64 * np nan if limit a a[ limit[ 0 ] < a & a < limit[ 1 ] ]sorted np sort a axis axis if axis is None axis 0return compute qth percentile sorted per interpolation method axis
def easyxf strg to parse '' num format str None field sep ' ' line sep ' ' intro sep ' ' esc char '\\' debug False xfobj XF Style if num format str is not None xfobj num format str num format strif strg to parse parse strg to obj strg to parse xfobj xf dict field sep field sep line sep line sep intro sep intro sep esc char esc char debug debug return xfobj
@register inclusion tag 'test incl tag current app html' takes context True def inclusion tag current app context return {}
def libvlc video set track p mi i track f Cfunctions get 'libvlc video set track' None or Cfunction 'libvlc video set track' 1 1 None ctypes c int Media Player ctypes c int return f p mi i track
def fire data tag try event salt utils event get event 'minion' sock dir opts ['sock dir'] transport opts ['transport'] opts opts listen False return event fire event data tag except Exception exc type exc value exc traceback sys exc info lines traceback format exception exc type exc value exc traceback log debug lines return False
def emit problem submitted event kwargs root type get event transaction type if not root type root id get event transaction id if not root id root id create new event transaction id set event transaction type PROBLEM SUBMITTED EVENT TYPE tracker emit unicode PROBLEM SUBMITTED EVENT TYPE {'user id' unicode kwargs['user id'] 'course id' unicode kwargs['course id'] 'problem id' unicode kwargs['usage id'] 'event transaction id' unicode root id 'event transaction type' unicode PROBLEM SUBMITTED EVENT TYPE 'weighted earned' kwargs get 'weighted earned' 'weighted possible' kwargs get 'weighted possible' }
def preprocess image img img img astype np float 32 img imresize img 224 224 img img[ [2 1 0]]img img * 255 mean np array [103 939 116 779 123 68 ] for i in range 0 3 img[ i] img[ i] - mean[i] img np transpose img [2 0 1] return img
def no type check decorator decorator @functools wraps decorator def wrapped decorator *args **kwds func decorator *args **kwds func no type check func return funcreturn wrapped decorator
def no type check decorator decorator @functools wraps decorator def wrapped decorator *args **kwds func decorator *args **kwds func no type check func return funcreturn wrapped decorator
def get readable ctx date ctx t tz ctx date date datetime *gmtime float t - tz [ 6] ctx date date strftime '%Y-%m-%d' return ctx date
def rotate left x y if len x 0 return []y y % len x return x[y ] + x[ y]
def rotate left x y if len x 0 return []y y % len x return x[y ] + x[ y]
@core helperdef build nav icon menu item title **kw return make menu item menu item title **kw
def P Qa P 0 Q 0 D A i 2 B i 1 0A i 1 B i 2 1G i 2 - P 0 G i 1 Q 0P i P 0Q i Q 0while 1 a i floor P i + sqrt D / Q i A i a i * A i 1 + A i 2 B i a i * B i 1 + B i 2 G i a i * G i 1 + G i 2 yield P i Q i a i A i B i G i A i 1 A i 2 A i A i 1 B i 1 B i 2 B i B i 1 G i 1 G i 2 G i G i 1 P i a i * Q i - P i Q i D - P i ** 2 / Q i
def find in path fname path None if path is None path os environ get 'PATH' '' for dir in path split os pathsep fpath os path join dir fname if os path isfile fpath return fpathelse return None
def rewrite 1 f x recursive True fac po g split mul f x g rewrite single g x recursive if g return fac po g[ 0 ] g[ 1 ]
def rewrite 1 f x recursive True fac po g split mul f x g rewrite single g x recursive if g return fac po g[ 0 ] g[ 1 ]
@pytest fixture def default groups database return create default groups
def void output func argtypes errcheck True cpl False if argtypes func argtypes argtypesif errcheck func restype c intfunc errcheck partial check errcode cpl cpl else func restype Nonereturn func
def void output func argtypes errcheck True cpl False if argtypes func argtypes argtypesif errcheck func restype c intfunc errcheck partial check errcode cpl cpl else func restype Nonereturn func
def void output func argtypes errcheck True cpl False if argtypes func argtypes argtypesif errcheck func restype c intfunc errcheck partial check errcode cpl cpl else func restype Nonereturn func
def void output func argtypes errcheck True cpl False if argtypes func argtypes argtypesif errcheck func restype c intfunc errcheck partial check errcode cpl cpl else func restype Nonereturn func
def void output func argtypes errcheck True cpl False if argtypes func argtypes argtypesif errcheck func restype c intfunc errcheck partial check errcode cpl cpl else func restype Nonereturn func
def status **connection args dbc connect **connection args if dbc is None return {}cur dbc cursor qry 'SHOWSTATUS'try execute cur qry except My SQ Ldb Operational Error as exc err ' My SQL Error{ 0 } {1 }' format *exc context ['mysql error'] errlog error err return {}ret {}for in range cur rowcount row cur fetchone ret[row[ 0 ]] row[ 1 ]return ret
def convert installed return get convert command is not None
def strip ansi source return re sub '\\ 033 \\[ \\d +?m' '' source
def equalize epoch counts epochs list method 'mintime' if not all isinstance e Base Epochs for e in epochs list raise Value Error ' Allinputsmustbe Epochsinstances' for e in epochs list if not e bad dropped e drop bad event times [e events[ 0] for e in epochs list]indices get drop indices event times method for e inds in zip epochs list indices e drop inds reason 'EQUALIZED COUNT'
@render to 'distributed/loadtesting/load test html' def load test request nusers None username uuid uuid 4 hex[ 12 ]if not Facility objects count fac Facility objects create name 'fac' fac Facility objects all [0 ] user Facility User get or initialize username username facility fac user set password username user save return {'pct videos' request GET get 'pct videos' 0 3 'username' username}
@render to 'distributed/loadtesting/load test html' def load test request nusers None username uuid uuid 4 hex[ 12 ]if not Facility objects count fac Facility objects create name 'fac' fac Facility objects all [0 ] user Facility User get or initialize username username facility fac user set password username user save return {'pct videos' request GET get 'pct videos' 0 3 'username' username}
def build entrypoints prefix entrypoints result []for entrypoint id rel class name in entrypoints if ' ' in rel class name sep ' 'else sep ' 'result append '%s %s%s%s' % entrypoint id prefix sep rel class name return result
def build entrypoints prefix entrypoints result []for entrypoint id rel class name in entrypoints if ' ' in rel class name sep ' 'else sep ' 'result append '%s %s%s%s' % entrypoint id prefix sep rel class name return result
def test space separator d iso 8601 parse date '2007 - 06 - 2306 40 34 00 Z' assert d year 2007 assert d month 6 assert d day 23 assert d hour 6 assert d minute 40 assert d second 34 assert d microsecond 0 assert d tzinfo iso 8601 UTC
def collect unioned set field block structure transformer merged field name filter by for block key in block structure topological traversal result set {block key} if filter by block key else set for parent in block structure get parents block key result set block structure get transformer block field parent transformer merged field name set block structure set transformer block field block key transformer merged field name result set
def collect unioned set field block structure transformer merged field name filter by for block key in block structure topological traversal result set {block key} if filter by block key else set for parent in block structure get parents block key result set block structure get transformer block field parent transformer merged field name set block structure set transformer block field block key transformer merged field name result set
@deprecated u' 2 0' message hold msg def over func *args **kwargs ax gca h ax holdax hold Truefunc *args **kwargs ax hold h
def copy byte src dest byte src read 1 dest write byte val unpack 'B' byte return val
def setup test show dir if not os path exists SHOW DIR os makedirs SHOW DIR
def get api servers api servers []for api server in FLAGS glance api servers if '//' not in api server api server 'http //' + api server url urlparse urlparse api server port url port or 80 host url netloc split ' ' 1 [0 ]use ssl url scheme 'https' api servers append host port use ssl random shuffle api servers return itertools cycle api servers
def ico downsample surf dest grade n tri surf['ntri']found -1 bad msg ' Asurfacewith%dtrianglescannotbeisomorphicwithasubdividedicosahedron ' % surf['ntri'] if n tri % 20 0 raise Runtime Error bad msg n tri n tri // 20 found int round np log n tri / np log 4 if n tri 4 ** found raise Runtime Error bad msg del n triif dest grade > found raise Runtime Error ' Forthissurface decimationgradeshouldbe%dorless not%s ' % found dest grade source get ico surface found dest get ico surface dest grade patch stats True del dest['tri cent']del dest['tri nn']del dest['neighbor tri']del dest['tri area']if not np array equal source['tris'] surf['tris'] raise Runtime Error ' Thesourcesurfacehasamatchingnumberoftrianglesbutorderingiswrong' logger info ' Goingfrom%dthto%dthsubdivisionofanicosahedron n tri %d->%d ' % found dest grade surf['ntri'] dest['ntri'] dest['rr'] surf['rr'][ get ico map source dest ]return dest
def transitive closure graph reflexive False if reflexive base set lambda k set [k] else base set lambda k set agenda graph dict k graph[k] copy for k in graph closure graph dict k base set k for k in graph for i in graph agenda agenda graph[i]closure closure graph[i]while agenda j agenda pop closure add j closure closure graph setdefault j base set j agenda agenda graph get j base set j agenda - closurereturn closure graph
def make packing list doc if doc get u' action' and doc action u'update after submit' returnparent items []for d in doc get u'items' if frappe db get value u' Product Bundle' {u'new item code' d item code} for i in get product bundle items d item code update packing list item doc i item code flt i qty * flt d qty d i description if [d item code d name] not in parent items parent items append [d item code d name] cleanup packing list doc parent items
def update rollout dict spec rollout dict if should skip env spec for tests spec logger info u' Skippingtestsfor{}' format spec id return Falseif spec nondeterministic logger info u' Skippingtestsfornondeterministicenv{}' format spec id return Falselogger info u' Generatingrolloutfor{}' format spec id try observations hash actions hash rewards hash dones hash generate rollout hash spec except logger warn u' Exception{}thrownwhilegeneratingrolloutfor{} Rolloutnotadded ' format sys exc info [0 ] spec id return Falserollout {}rollout[u'observations'] observations hashrollout[u'actions'] actions hashrollout[u'rewards'] rewards hashrollout[u'dones'] dones hashexisting rollout dict get spec id if existing differs Falsefor key new hash in rollout items differs differs or existing[key] new hash if not differs logger debug u' Hashesmatchwithexistingfor{}' format spec id return Falseelse logger warn u' Gotnewhashfor{} Overwriting ' format spec id rollout dict[spec id] rolloutreturn True
@click command u'uninstall-app' @click argument u'app' @click option u'--yes' u'-y' help u' Tobypassconfirmationpromptforuninstallingtheapp' is flag True default False multiple True @click option u'--dry-run' help u' Listalldoctypesthatwillbedeleted' is flag True default False @pass contextdef uninstall context app dry run False yes False from frappe installer import remove appfor site in context sites try frappe init site site frappe connect remove app app dry run yes finally frappe destroy
def has Explorer if sys platform 'win 32 ' or sys platform 'cygwin' or sys platform 'darwin' return Trueif sys platform 'linux 2 ' if os path isfile '/usr/bin/xdg-open' return Truereturn False
def rgb vector color if isinstance color six string types color color dict[color]return np array color[ 3]
def from tree expr namespace None if isinstance expr dict op args expr[u'op'] expr[u'args'] if op u'slice' return expr utils slice *[from tree arg namespace for arg in args] if hasattr blaze expr op cls getattr blaze expr op else cls expression from name op if cls is Symbol cls symbolchildren [from tree arg namespace for arg in args]return cls *children elif isinstance expr list tuple return tuple from tree arg namespace for arg in expr if namespace and expr in namespace return namespace[expr]else return expr
def expand Service service element uris sorted UR Is service element if not uris uris [ None]expanded []for uri in uris type uris get Type UR Is service element expanded append type uris uri service element return expanded
def merge asof left right on None left on None right on None left index False right index False by None left by None right by None suffixes ' x' ' y' tolerance None allow exact matches True direction 'backward' op As Of Merge left right on on left on left on right on right on left index left index right index right index by by left by left by right by right by suffixes suffixes how 'asof' tolerance tolerance allow exact matches allow exact matches direction direction return op get result
def Get OTP user return Compute OTP Get User Secret user long time time / GRANULARITY
def Get OTP user return Compute OTP Get User Secret user long time time / GRANULARITY
def Get OTP user return Compute OTP Get User Secret user long time time / GRANULARITY
def Get OTP user return Compute OTP Get User Secret user long time time / GRANULARITY
def Get OTP user return Compute OTP Get User Secret user long time time / GRANULARITY
def tamper payload **kwargs return '%s%% 00 ' % payload if payload else payload
def cpus with settings hide 'running' 'stdout' res run 'python-c"importmultiprocessing print multiprocessing cpu count "' return int res
def run on all nodes nodes task return parallel list run remotely username 'root' address node address commands task node for node in nodes
def determine list kwargs options list kwargs determine delete kwargs options list kwargs update kwargs option to dict options list kwargs return list kwargs
def tanm A A asarray square A return maybe real A solve cosm A sinm A
def rm handlers app handlers key None for handler name func in handlers iteritems rm handler app handler name func key key
def create modulename cdef sources source sys version key '\x 00 ' join [sys version[ 3] source cdef sources] key key encode 'utf- 8 ' k1 hex binascii crc 32 key[ 0 2] & 4294967295 k1 k1 lstrip '0 x' rstrip 'L' k2 hex binascii crc 32 key[ 1 2] & 4294967295 k2 k2 lstrip '0 ' rstrip 'L' return ' Cryptography cffi {0 }{ 1 }' format k1 k2
def create modulename cdef sources source sys version key '\x 00 ' join [sys version[ 3] source cdef sources] key key encode 'utf- 8 ' k1 hex binascii crc 32 key[ 0 2] & 4294967295 k1 k1 lstrip '0 x' rstrip 'L' k2 hex binascii crc 32 key[ 1 2] & 4294967295 k2 k2 lstrip '0 ' rstrip 'L' return ' Cryptography cffi {0 }{ 1 }' format k1 k2
def create modulename cdef sources source sys version key '\x 00 ' join [sys version[ 3] source cdef sources] key key encode 'utf- 8 ' k1 hex binascii crc 32 key[ 0 2] & 4294967295 k1 k1 lstrip '0 x' rstrip 'L' k2 hex binascii crc 32 key[ 1 2] & 4294967295 k2 k2 lstrip '0 ' rstrip 'L' return ' Cryptography cffi {0 }{ 1 }' format k1 k2
def create modulename cdef sources source sys version key '\x 00 ' join [sys version[ 3] source cdef sources] key key encode 'utf- 8 ' k1 hex binascii crc 32 key[ 0 2] & 4294967295 k1 k1 lstrip '0 x' rstrip 'L' k2 hex binascii crc 32 key[ 1 2] & 4294967295 k2 k2 lstrip '0 ' rstrip 'L' return ' Cryptography cffi {0 }{ 1 }' format k1 k2
def get zendesk custom field context request context {}course id request POST get 'course id' if not course id return contextcontext['course id'] course idif not request user is authenticated return contextenrollment Course Enrollment get enrollment request user Course Key from string course id if enrollment and enrollment is active context['enrollment mode'] enrollment modereturn context
@validate 'form' 'graph' 'tree' def valid att in field arch return not arch xpath '//field[not @name ]'
@validate 'form' 'graph' 'tree' def valid att in field arch return not arch xpath '//field[not @name ]'
def safe add x y if x is not None and y is not None return x + y elif x is not None return xelif y is not None return yelse return None
def message question text title informative text None details None buttons None default button None exc info False parent None return message Q Message Box Question text title informative text details buttons default button exc info parent
def message question text title informative text None details None buttons None default button None exc info False parent None return message Q Message Box Question text title informative text details buttons default button exc info parent
def message question text title informative text None details None buttons None default button None exc info False parent None return message Q Message Box Question text title informative text details buttons default button exc info parent
def get words from dataset dataset def tokenize words if isinstance words basestring return word tokenize words include punc False else return wordsall words chain from iterable tokenize words for words in dataset return set all words
def get words from dataset dataset def tokenize words if isinstance words basestring return word tokenize words include punc False else return wordsall words chain from iterable tokenize words for words in dataset return set all words
def make events add nulls def gen date interleavings for e1 e2 t1 t2 in product * [critical dates] * 4 if e1 < e2 yield e1 e2 t1 t2 event frames []for sid e1 e2 t1 t2 in enumerate gen date interleavings event frames append make events for sid sid [e 1 e2 ] [t 1 t2 ] if add nulls for date in critical dates event frames append make null event date events np arange sid + 1 timestamp date return pd concat event frames ignore index True
def make events add nulls def gen date interleavings for e1 e2 t1 t2 in product * [critical dates] * 4 if e1 < e2 yield e1 e2 t1 t2 event frames []for sid e1 e2 t1 t2 in enumerate gen date interleavings event frames append make events for sid sid [e 1 e2 ] [t 1 t2 ] if add nulls for date in critical dates event frames append make null event date events np arange sid + 1 timestamp date return pd concat event frames ignore index True
def rot axis 2 theta ct cos theta st sin theta lil ct 0 - st 0 1 0 st 0 ct return Matrix lil
def join urls *urls if not urls returnurl urls[ 0 ]for u in urls[ 1 ] if not url endswith '/' url + '/'while u startswith '/' u utils lstrips u '/' url + ureturn url
def self Similarity Matrix feature Vectors [n Dims n Vectors] feature Vectors shape[feature Vectors 2 MEAN STD] aT normalize Features [feature Vectors T] feature Vectors 2 feature Vectors 2 [ 0 ] TS 1 0 - distance squareform distance pdist feature Vectors 2 T 'cosine' return S
@treeio login required@handle response formatdef report filter remove request report id field name filter index response format 'html' report get object or 404 Report pk report id if not request user profile has permission report mode 'w' return user denied request message " Youdon'thavewriteaccesstothis Report" model loads report model field model get field field name field filters pop int filter index - 1 report model dumps model report save return Http Response Redirect reverse 'reports report edit' args [int report id ]
@treeio login required@handle response formatdef report filter remove request report id field name filter index response format 'html' report get object or 404 Report pk report id if not request user profile has permission report mode 'w' return user denied request message " Youdon'thavewriteaccesstothis Report" model loads report model field model get field field name field filters pop int filter index - 1 report model dumps model report save return Http Response Redirect reverse 'reports report edit' args [int report id ]
def run dataset dir if not tf gfile Exists dataset dir tf gfile Make Dirs dataset dir if dataset exists dataset dir print ' Datasetfilesalreadyexist Exitingwithoutre-creatingthem ' returndataset utils download and uncompress tarball DATA URL dataset dir photo filenames class names get filenames and classes dataset dir class names to ids dict zip class names range len class names random seed RANDOM SEED random shuffle photo filenames training filenames photo filenames[ NUM VALIDATION ]validation filenames photo filenames[ NUM VALIDATION] convert dataset 'train' training filenames class names to ids dataset dir convert dataset 'validation' validation filenames class names to ids dataset dir labels to class names dict zip range len class names class names dataset utils write label file labels to class names dataset dir clean up temporary files dataset dir print '\n Finishedconvertingthe Flowersdataset '
def dt action row 1 action None column 1 table ID 'datatable' config current test configbrowser config browserif action button " //*[@id '%s']/tbody/tr[%s]/td[%s]/a[contains text '%s' ]" % table ID row column action else button " //*[@id '%s']/tbody/tr[%s]/td[%s]/a" % table ID row column giveup 0 0sleeptime 0 2while giveup < 10 0 try element browser find element by xpath button url element get attribute 'href' if url browser get url return Trueexcept Exception as inst print '%swith%s' % type inst button time sleep sleeptime giveup + sleeptimereturn False
def dt action row 1 action None column 1 table ID 'datatable' config current test configbrowser config browserif action button " //*[@id '%s']/tbody/tr[%s]/td[%s]/a[contains text '%s' ]" % table ID row column action else button " //*[@id '%s']/tbody/tr[%s]/td[%s]/a" % table ID row column giveup 0 0sleeptime 0 2while giveup < 10 0 try element browser find element by xpath button url element get attribute 'href' if url browser get url return Trueexcept Exception as inst print '%swith%s' % type inst button time sleep sleeptime giveup + sleeptimereturn False
def hexdump s width 16 skip True hexii False begin 0 style None highlight None cyclic False s packing flat s return '\n' join hexdump iter String IO String IO s width skip hexii begin style highlight cyclic
def hexdump s width 16 skip True hexii False begin 0 style None highlight None cyclic False s packing flat s return '\n' join hexdump iter String IO String IO s width skip hexii begin style highlight cyclic
@memoizedef from style key style Qt Gui Q Application instance style return style standard Icon key
@memoizedef from style key style Qt Gui Q Application instance style return style standard Icon key
def setup platform hass config add devices discovery info None digital ocean get component 'digital ocean' droplets config get CONF DROPLETS dev []for droplet in droplets droplet id digital ocean DIGITAL OCEAN get droplet id droplet dev append Digital Ocean Switch digital ocean DIGITAL OCEAN droplet id add devices dev
def test complex entry tokenize ' 1j ' [0 ][ 0 ]assert entry Hy Complex '1 0j' entry tokenize ' j ' [0 ][ 0 ]assert entry Hy Symbol 'j'
@cleanupdef test Event Collection get linestyle coll generate Event Collection plot assert equal coll get linestyle [ None None ]
@cleanupdef test Event Collection get linestyle coll generate Event Collection plot assert equal coll get linestyle [ None None ]
def polyder p m if m 0 result pelse n len p if n < m result np zeros like p[ 1 ] else dp p[ - m ] copy for k in range m rng np arange n - k - 1 m - k - 1 -1 dp * rng reshape n - m + 1 * p ndim - 1 result dpreturn result
def align alignment x return x + alignment - 1 // alignment * alignment
@mock streams 'stdout' @with patched input p def test prompt appends space s ' Thisismyprompt'prompt s eq sys stdout getvalue s + ''
def process bti headshape fname convert True use hpi True idx points dig points read head shape fname if convert ctf head t get ctf head to head t idx points else ctf head t Transform 'ctf head' 'ctf head' if dig points is not None all points np r [ idx points dig points ]else all points idx pointsif convert all points convert hs points all points ctf head t dig points to dig all points len idx points use hpi return dig ctf head t
def extract expressions node if isinstance node nodes Call Func and isinstance node func nodes Name and node func name TRANSIENT FUNCTION real expr node args[ 0 ]real expr parent node parentfor name in node parent astroid fields child getattr node parent name if isinstance child list tuple for idx compound child in enumerate child if compound child is node child[idx] real exprelif child is node setattr node parent name real expr yield real expr else for child in node get children for result in extract expressions child yield result
def network list provider client get client return client extra action action 'network list' provider provider names 'names'
def create security group name None description None profile None conn auth profile return conn create security group name description
def expand path path paths []path os path expanduser path path os path expandvars path if os path isdir path for dir dirs files in os walk path for file in files paths append os path join dir file else paths extend glob path return paths
def Escape Command Line Argument For MS Build s def Replace match return len match group 1 / 2 * 4 * '\\' + '\\"' s quote replacer regex 2 sub Replace s return s
def meijerint indefinite f x from sympy import hyper meijergresults []for a in sorted find splitting points f x {S 0 } key default sort key res meijerint indefinite 1 f subs x x + a x if not res continueres res subs x x - a if has res hyper meijerg results append res else return resif f has Hyperbolic Function debug ' Tryrewritinghyperbolicsintermsofexp ' rv meijerint indefinite rewrite hyperbolics as exp f x if rv if not type rv is list return collect factor terms rv rv atoms exp results extend rv if results return next ordered results
def has hidden layer return hasattr layer 'initial hidden state'
def get fs home return get root home 'FREESURFER HOME' 'freesurfer' fs home problem
def transform Vector 3 s By Matrix tetragrid vector 3 s if get Is Identity Tetragrid Or None tetragrid returnfor vector 3 in vector 3 s transform Vector 3 Blindly tetragrid vector 3
def sleep duration return Sleep Event duration
def log normalize a axis None a lse logsumexp a axis a - a lse[ np newaxis]
def delete branch pr session refs url pr['head']['repo']['git refs url']branch url refs url replace '{/sha}' '/heads/' + pr['head']['ref'] return session delete branch url
def require Anomaly Model func def decorator self *args **kwargs if not self get Inference Type Inference Type Temporal Anomaly raise Runtime Error ' Methodrequireda Temporal Anomalymodel ' if self get Anomaly Classifier is None raise Runtime Error ' Modeldoesnotsupportthiscommand Modelmustbeanactiveanomaly Detectormodel ' return func self *args **kwargs return decorator
def get real ip request if KEY REAL IP in request return request[KEY REAL IP]if request app[KEY USE X FORWARDED FOR] and HTTP HEADER X FORWARDED FOR in request headers request[KEY REAL IP] ip address request headers get HTTP HEADER X FORWARDED FOR split ' ' [0 ] else peername request transport get extra info 'peername' if peername request[KEY REAL IP] ip address peername[ 0 ] else request[KEY REAL IP] Nonereturn request[KEY REAL IP]
def head container url token container http conn None headers None service token None if http conn parsed conn http connelse parsed conn http connection url path '%s/%s' % parsed path quote container method 'HEAD'req headers {'X- Auth- Token' token}if service token req headers['X- Service- Token'] service tokenif headers req headers update headers conn request method path '' req headers resp conn getresponse body resp read http log '%s%s' % url replace parsed path '' path method {'headers' req headers} resp body if resp status < 200 or resp status > 300 raise Client Exception from response resp ' Container HEA Dfailed' body resp headers resp header dict resp return resp headers
def output to dict cmdoutput values mapper None if isinstance cmdoutput dict if cmdoutput['retcode'] 0 or cmdoutput['stderr'] raise Command Execution Error ' Rabbit M Qcommandfailed {0 }' format cmdoutput['stderr'] cmdoutput cmdoutput['stdout']ret {}if values mapper is None values mapper lambda string string split ' DCTB ' data rows strip listing to done cmdoutput splitlines for row in data rows try key values row split ' DCTB ' 1 except Value Error log debug " Couldnotfindanyvaluesforkey'{ 0 }' Settingto'{ 0 }'toanemptystring " format row ret[row] ''continueret[key] values mapper values return ret
def output to dict cmdoutput values mapper None if isinstance cmdoutput dict if cmdoutput['retcode'] 0 or cmdoutput['stderr'] raise Command Execution Error ' Rabbit M Qcommandfailed {0 }' format cmdoutput['stderr'] cmdoutput cmdoutput['stdout']ret {}if values mapper is None values mapper lambda string string split ' DCTB ' data rows strip listing to done cmdoutput splitlines for row in data rows try key values row split ' DCTB ' 1 except Value Error log debug " Couldnotfindanyvaluesforkey'{ 0 }' Settingto'{ 0 }'toanemptystring " format row ret[row] ''continueret[key] values mapper values return ret
@receiver user logged out def log successful logout sender request user **kwargs if hasattr request 'user' if settings FEATURES['SQUELCH PII IN LOGS'] AUDIT LOG info u' Logout-user id {0 }' format request user id else AUDIT LOG info u' Logout-{ 0 }' format request user
def has handshake cowpatty target capfile nonstrict True if not program exists 'cowpatty' return Falsecmd ['cowpatty' '-r' capfile '-s' target ssid '-c']if nonstrict cmd append '- 2 ' proc Popen cmd stdout PIPE stderr DN proc wait response proc communicate [0 ]if response find 'incompletefour-wayhandshakeexchange' -1 return Falseelif response find ' Unsupportedorunrecognizedpcapfile ' -1 return Falseelif response find ' Unabletoopencapturefile Success' -1 return Falsereturn True
def build Cyclic Network recurrent Network Recurrent Network if recurrent else Feed Forward Network N Network 'cyc' a Linear Layer 1 name 'a' b Linear Layer 2 name 'b' c Linear Layer 3 name 'c' d Linear Layer 4 name 'd' N add Input Module a N add Module b N add Module d N add Output Module c N add Connection Full Connection a b N add Connection Full Connection b c N add Connection Full Connection c d if recurrent N add Recurrent Connection Full Connection d a else N add Connection Full Connection d a N sort Modules return N
def get default volume size dataset backend configuration default volume size Gi B 1 if dataset backend configuration get 'auth plugin' 'rackspace' default volume size RACKSPACE MINIMUM VOLUME SIZ Ereturn int default volume size to Byte value
def flatnonzero a return a ravel nonzero [0 ]
def create ipsec site connection name ipsecpolicy ikepolicy vpnservice peer cidrs peer address peer id psk admin state up True profile None **kwargs conn auth profile return conn create ipsec site connection name ipsecpolicy ikepolicy vpnservice peer cidrs peer address peer id psk admin state up **kwargs
def test Standings Before Matches delete Matches delete Players register Player ' Melpomene Murray' register Player ' Randy Schwartz' standings player Standings if len standings < 2 raise Value Error ' Playersshouldappearinplayer Standingsevenbeforetheyhaveplayedanymatches ' elif len standings > 2 raise Value Error ' Onlyregisteredplayersshouldappearinstandings ' if len standings[ 0 ] 4 raise Value Error ' Eachplayer Standingsrowshouldhavefourcolumns ' [ id 1 name 1 wins 1 matches 1 id 2 name 2 wins 2 matches 2 ] standingsif matches 1 0 or matches 2 0 or wins 1 0 or wins 2 0 raise Value Error ' Newlyregisteredplayersshouldhavenomatchesorwins ' if set [name 1 name 2 ] set [' Melpomene Murray' ' Randy Schwartz'] raise Value Error " Registeredplayers'namesshouldappearinstandings eveniftheyhavenomatchesplayed " print '6 Newlyregisteredplayersappearinthestandingswithnomatches '
def test Standings Before Matches delete Matches delete Players register Player ' Melpomene Murray' register Player ' Randy Schwartz' standings player Standings if len standings < 2 raise Value Error ' Playersshouldappearinplayer Standingsevenbeforetheyhaveplayedanymatches ' elif len standings > 2 raise Value Error ' Onlyregisteredplayersshouldappearinstandings ' if len standings[ 0 ] 4 raise Value Error ' Eachplayer Standingsrowshouldhavefourcolumns ' [ id 1 name 1 wins 1 matches 1 id 2 name 2 wins 2 matches 2 ] standingsif matches 1 0 or matches 2 0 or wins 1 0 or wins 2 0 raise Value Error ' Newlyregisteredplayersshouldhavenomatchesorwins ' if set [name 1 name 2 ] set [' Melpomene Murray' ' Randy Schwartz'] raise Value Error " Registeredplayers'namesshouldappearinstandings eveniftheyhavenomatchesplayed " print '6 Newlyregisteredplayersappearinthestandingswithnomatches '
def test Standings Before Matches delete Matches delete Players register Player ' Melpomene Murray' register Player ' Randy Schwartz' standings player Standings if len standings < 2 raise Value Error ' Playersshouldappearinplayer Standingsevenbeforetheyhaveplayedanymatches ' elif len standings > 2 raise Value Error ' Onlyregisteredplayersshouldappearinstandings ' if len standings[ 0 ] 4 raise Value Error ' Eachplayer Standingsrowshouldhavefourcolumns ' [ id 1 name 1 wins 1 matches 1 id 2 name 2 wins 2 matches 2 ] standingsif matches 1 0 or matches 2 0 or wins 1 0 or wins 2 0 raise Value Error ' Newlyregisteredplayersshouldhavenomatchesorwins ' if set [name 1 name 2 ] set [' Melpomene Murray' ' Randy Schwartz'] raise Value Error " Registeredplayers'namesshouldappearinstandings eveniftheyhavenomatchesplayed " print '6 Newlyregisteredplayersappearinthestandingswithnomatches '
def get text feedback context return context browser execute script '\nreturn$ " {text input class}" [0 ] value \n' format text input class TEXT INPUT CLASS
def get text feedback context return context browser execute script '\nreturn$ " {text input class}" [0 ] value \n' format text input class TEXT INPUT CLASS
def get expire name policies get account policy name if 'hard Expire Date GMT' in policies return policies['hard Expire Date GMT']return ' Valuenotset'
def github registry xml parent data ghtrig XML Sub Element xml parent 'com cloudbees jenkins Git Hub Push Trigger' XML Sub Element ghtrig 'spec' text ''
def tgrep node label use action s l tokens assert len tokens 1 assert tokens[ 0 ] startswith u' ' return tokens[ 0 ][ 1 ]
def tgrep node label use action s l tokens assert len tokens 1 assert tokens[ 0 ] startswith u' ' return tokens[ 0 ][ 1 ]
def pci device get all by instance uuid context instance uuid return IMPL pci device get all by instance uuid context instance uuid
def Get Vmodl Name typ try return vmodl Names[typ]except Key Error return typ name
def Extract Proxy proxy yaml key proxy config data proxy Nonetry if proxy yaml key in proxy config data proxy data proxy config data get proxy yaml key original proxy keys list proxy data keys proxy Proxy Config Proxy proxy data['host'] proxy data['port'] username proxy data get 'username' password proxy data get 'password' except Key Error raise googleads errors Google Ads Value Error ' Youryamlfileismissingsomeoftherequiredproxyvalues Requiredvaluesare %s actualvaluesare%s' % PROXY KEYS original proxy keys return proxy
def Copy Stream Part source destination content size bytes copied 0bytes left content sizewhile bytes left > 0 bytes source read min bytes left COPY BLOCK SIZE bytes read len bytes if bytes read 0 breakdestination write bytes bytes copied + bytes readbytes left - bytes readreturn bytes copied
def git str subprocess gitpath if not os path isdir os path join gitpath ' git' return Nonetry cid subprocess check output ['git' 'describe' '--tags' '--dirty' '--always'] cwd gitpath decode 'UTF- 8 ' strip date subprocess check output ['git' 'show' '-s' '--format %ci' 'HEAD'] cwd gitpath decode 'UTF- 8 ' strip return '{} {} ' format cid date except subprocess Called Process Error OS Error return None
def strftime date date format def strip zeros x return x lstrip u' 0 ' or u' 0 ' c89 directives u'a Ab Bcdf H Ijm Mp S Uw Wx Xy Yz Z%'format options u'%[-]? 'candidates re findall format options date format template re sub format options u'%s' date format lang code enc locale getlocale locale LC TIME formatted candidates []for candidate in candidates if candidate[ -1 ] in c89 directives if len candidate 3 candidate u'%{}' format candidate[ -1 ] conversion strip zeroselse conversion Noneif isinstance date Safe Datetime formatted date strftime candidate safe False else formatted date strftime candidate if not six PY 3 and enc is not None formatted formatted decode enc if conversion formatted conversion formatted else formatted candidateformatted candidates append formatted return template % tuple formatted candidates
def strftime date date format def strip zeros x return x lstrip u' 0 ' or u' 0 ' c89 directives u'a Ab Bcdf H Ijm Mp S Uw Wx Xy Yz Z%'format options u'%[-]? 'candidates re findall format options date format template re sub format options u'%s' date format lang code enc locale getlocale locale LC TIME formatted candidates []for candidate in candidates if candidate[ -1 ] in c89 directives if len candidate 3 candidate u'%{}' format candidate[ -1 ] conversion strip zeroselse conversion Noneif isinstance date Safe Datetime formatted date strftime candidate safe False else formatted date strftime candidate if not six PY 3 and enc is not None formatted formatted decode enc if conversion formatted conversion formatted else formatted candidateformatted candidates append formatted return template % tuple formatted candidates
def strftime date date format def strip zeros x return x lstrip u' 0 ' or u' 0 ' c89 directives u'a Ab Bcdf H Ijm Mp S Uw Wx Xy Yz Z%'format options u'%[-]? 'candidates re findall format options date format template re sub format options u'%s' date format lang code enc locale getlocale locale LC TIME formatted candidates []for candidate in candidates if candidate[ -1 ] in c89 directives if len candidate 3 candidate u'%{}' format candidate[ -1 ] conversion strip zeroselse conversion Noneif isinstance date Safe Datetime formatted date strftime candidate safe False else formatted date strftime candidate if not six PY 3 and enc is not None formatted formatted decode enc if conversion formatted conversion formatted else formatted candidateformatted candidates append formatted return template % tuple formatted candidates
def Boolean Attribute value if value in ['true' '1 '] return Trueelif value in ['false' '0 '] return Falseelse return None
def range boundaries range string m ABSOLUTE RE match range string min col min row sep max col max row m groups min col column index from string min col min row int min row if max col is None or max row is None max col min colmax row min rowelse max col column index from string max col max row int max row return min col min row max col max row
def make pkg resources global conf egg resource name '' if pkg resources is None raise Not Implemented Error ' Thisfunctionrequirespkg resources ' return Pkg Resources Parser egg resource name
def make pkg resources global conf egg resource name '' if pkg resources is None raise Not Implemented Error ' Thisfunctionrequirespkg resources ' return Pkg Resources Parser egg resource name
def make pkg resources global conf egg resource name '' if pkg resources is None raise Not Implemented Error ' Thisfunctionrequirespkg resources ' return Pkg Resources Parser egg resource name
def test truncate purified field xss s 'safe<script>alert "omg" </script>'t Purified Translation localized string s actual env from string '{{s truncate 100 }}' render {'s' t} eq actual 'safe&lt script&gt alert "omg" &lt /script&gt ' actual env from string '{{s truncate 5 }}' render {'s' t} eq actual 'safe '
def test truncate purified field xss s 'safe<script>alert "omg" </script>'t Purified Translation localized string s actual env from string '{{s truncate 100 }}' render {'s' t} eq actual 'safe&lt script&gt alert "omg" &lt /script&gt ' actual env from string '{{s truncate 5 }}' render {'s' t} eq actual 'safe '
def test truncate purified field xss s 'safe<script>alert "omg" </script>'t Purified Translation localized string s actual env from string '{{s truncate 100 }}' render {'s' t} eq actual 'safe&lt script&gt alert "omg" &lt /script&gt ' actual env from string '{{s truncate 5 }}' render {'s' t} eq actual 'safe '
def item to dataset iterator resource return Dataset from api repr resource iterator client
def Cut Common Space Prefix text text lines text splitlines while text lines and not text lines[ -1 ] text lines text lines[ -1 ]if text lines if text lines[ 0 ] and text lines[ 0 ][ 0 ] isspace text first line []else text first line [text lines pop 0 ]common prefix os path commonprefix [line for line in text lines if line] space prefix len len common prefix - len common prefix lstrip if space prefix len for index in xrange len text lines if text lines[index] text lines[index] text lines[index][space prefix len ]return '\n' join text first line + text lines return ''
def build tag param list params tags keys sorted tags keys i 1for key in keys value tags[key]params[' Tags member {0 } Key' format i ] keyif value is not None params[' Tags member {0 } Value' format i ] valuei + 1
def add days worked start days step get step start weeks plus divmod days 5 end start + weeks * 7 + plus * step if weekday end > 5 end + 2 * step end + len [x for x in get national holidays start end + step if weekday x < 5 ] * step if weekday end > 5 end + 2 * step return end
def urlunquote byte string remap None preserve None if byte string is None return byte stringbyte string unquote to bytes byte string if preserve replacements [u'\x 1 a' u'\x 1 c' u'\x 1 d' u'\x 1 e' u'\x 1 f']preserve unmap {}for char in remap replacement replacements pop 0 preserve unmap[replacement] charbyte string byte string replace char encode u'ascii' replacement encode u'ascii' if remap for char in remap byte string byte string replace char encode u'ascii' u'%%% 02 x' % ord char encode u'ascii' output byte string decode u'utf- 8 ' u'iriutf 8 ' if preserve for replacement original in preserve unmap items output output replace replacement original return output
def schedule probes probes return salt ['probes schedule probes'] ordered dict to dict probes commit False
def schedule probes probes return salt ['probes schedule probes'] ordered dict to dict probes commit False
def save reg data reg dir reg dir regfile os path join reg dir 'register' try if not os path exists os makedirs reg dir except OS Error as exc if exc errno errno EEXIST passelse raisetry with salt utils fopen regfile 'a' as fh msgpack dump data fh fh close except log error ' Couldnotwritetomsgpackfile{ 0 }' format opts ['outdir'] raise
def parse denoiser mapping denoiser map result {}for line in denoiser map line line strip split ' DCTB ' denoised id line[ 0 ] rstrip ' ' original ids [denoised id] + line[ 1 ] if denoised id in result raise Value Error ' Duplicatedidentifiersindenoisermappingfile areyousureyoumergedthecorrectfiles?' else result[denoised id] original idsreturn result
def test multicolumn table html fill values col 1 [1 2 3]col 2 [ 1 0 1 0 2 0 2 0 3 0 3 0 ]col 3 [ 'a' 'a' 'a' 'b' 'b' 'b' 'c' 'c' 'c' ]buffer output String IO t Table [col 1 col 2 col 3 ] names 'C 1 ' 'C 2 ' 'C 3 ' ascii write t buffer output fill values 'a' 'z' format 'html' col 1 [1 2 3]col 2 [ 1 0 1 0 2 0 2 0 3 0 3 0 ]col 3 [ 'z' 'z' 'z' 'b' 'b' 'b' 'c' 'c' 'c' ]buffer expected String IO t expected Table [col 1 col 2 col 3 ] names 'C 1 ' 'C 2 ' 'C 3 ' ascii write t expected buffer expected format 'html' assert buffer output getvalue buffer expected getvalue
def sig cmp u v order if u[ 1 ] > v[ 1 ] return -1 if u[ 1 ] v[ 1 ] if order u[ 0 ] < order v[ 0 ] return -1 return 1
def sig cmp u v order if u[ 1 ] > v[ 1 ] return -1 if u[ 1 ] v[ 1 ] if order u[ 0 ] < order v[ 0 ] return -1 return 1
def sig cmp u v order if u[ 1 ] > v[ 1 ] return -1 if u[ 1 ] v[ 1 ] if order u[ 0 ] < order v[ 0 ] return -1 return 1
def get Y Intersection Inside Y Segment segment First Y segment Second Y begin Complex end Complex x y Intersection euclidean get Y Intersection If Exists begin Complex end Complex x if y Intersection None return Noneif y Intersection < min segment First Y segment Second Y return Noneif y Intersection < max segment First Y segment Second Y return y Intersectionreturn None
def check asset location asset name content location Static Content compute location location course key asset name try contentstore find content location except Not Found Error return Falseelse return True
def check asset location asset name content location Static Content compute location location course key asset name try contentstore find content location except Not Found Error return Falseelse return True
def find Checker Factory auth Type for factory in find Checker Factories if factory auth Type auth Type return factoryraise Invalid Auth Type auth Type
def find Checker Factory auth Type for factory in find Checker Factories if factory auth Type auth Type return factoryraise Invalid Auth Type auth Type
def find Checker Factory auth Type for factory in find Checker Factories if factory auth Type auth Type return factoryraise Invalid Auth Type auth Type
def temporary mount filesystem options None mountpoint temporary directory try mounted fs mount filesystem mountpoint options options except mountpoint remove raisereturn Temporary Mounted Filesystem fs mounted fs
@register tag name 'wishlists containing product' def do basket form parse token tokens token split contents if len tokens 5 raise template Template Syntax Error '%rtagusesthefollowingsyntax {%%wishlists containing productwishlistsproductasctx var%%}' % tokens[ 0 ] wishlists var product var name var tokens[ 1 ] tokens[ 2 ] tokens[ 4 ] return Product Wishlists Node wishlists var product var name var
def regions return get regions 'sns' connection cls SNS Connection
def job file for job return os path join job expt dir 'jobs' '% 08 d pb' % job id
def delete quantum ports ports root helper for port in ports if ip lib device exists port device ip lib IP Device port root helper device link delete LOG info ' Delete%s' port
@receiver models signals post save sender Credit Course @receiver models signals post delete sender Credit Course def invalidate credit courses cache sender **kwargs cache delete Credit Course CREDIT COURSES CACHE KEY
def service update context service id values return IMPL service update context service id values
def assert no dunder name code obj expr for name in code obj co names if ' ' in name or name in UNSAFE ATTRIBUTES raise Name Error ' Accesstoforbiddenname%r %r ' % name expr
@pytest fixturedef tabbed browser stubs stubs win registry win registry add window 1 stubs [stubs Tabbed Browser Stub stubs Tabbed Browser Stub ]objreg register 'tabbed-browser' stubs[ 0 ] scope 'window' window 0 objreg register 'tabbed-browser' stubs[ 1 ] scope 'window' window 1 yield stubs objreg delete 'tabbed-browser' scope 'window' window 0 objreg delete 'tabbed-browser' scope 'window' window 1
@pytest fixturedef tabbed browser stubs stubs win registry win registry add window 1 stubs [stubs Tabbed Browser Stub stubs Tabbed Browser Stub ]objreg register 'tabbed-browser' stubs[ 0 ] scope 'window' window 0 objreg register 'tabbed-browser' stubs[ 1 ] scope 'window' window 1 yield stubs objreg delete 'tabbed-browser' scope 'window' window 0 objreg delete 'tabbed-browser' scope 'window' window 1
def chunk index list indices chunks []chunk ''for index in indices if len chunk < 3072 if not chunk chunk indexelse chunk + ' ' + index else chunks append chunk split ' ' chunk indexchunks append chunk split ' ' return chunks
def chunk index list indices chunks []chunk ''for index in indices if len chunk < 3072 if not chunk chunk indexelse chunk + ' ' + index else chunks append chunk split ' ' chunk indexchunks append chunk split ' ' return chunks
def chunk index list indices chunks []chunk ''for index in indices if len chunk < 3072 if not chunk chunk indexelse chunk + ' ' + index else chunks append chunk split ' ' chunk indexchunks append chunk split ' ' return chunks
def erasable msg if color enabled return CLEAR LINE + msg + CURSUR UP return msg
def erasable msg if color enabled return CLEAR LINE + msg + CURSUR UP return msg
def erasable msg if color enabled return CLEAR LINE + msg + CURSUR UP return msg
def erasable msg if color enabled return CLEAR LINE + msg + CURSUR UP return msg
def mime to document iters input file boundary read chunk size 4096 doc files iter multipart mime documents input file boundary read chunk size for i doc file in enumerate doc files headers parse mime headers doc file yield headers doc file
def mime to document iters input file boundary read chunk size 4096 doc files iter multipart mime documents input file boundary read chunk size for i doc file in enumerate doc files headers parse mime headers doc file yield headers doc file
def mime to document iters input file boundary read chunk size 4096 doc files iter multipart mime documents input file boundary read chunk size for i doc file in enumerate doc files headers parse mime headers doc file yield headers doc file
def extract bits data shift length bitmask 1 << length - 1 << shift return data & bitmask >> shift
def attach dummy node node name object marker enode Empty Node enode object object attach local node node enode name
def attach dummy node node name object marker enode Empty Node enode object object attach local node node enode name
def setup platform hass config add devices callback discovery info None import pywemo discovery as discoveryif discovery info is not None location discovery info[ 2 ]mac discovery info[ 3 ]device discovery device from description location mac if device add devices callback [ Wemo Binary Sensor device ]
def setup platform hass config add devices callback discovery info None import pywemo discovery as discoveryif discovery info is not None location discovery info[ 2 ]mac discovery info[ 3 ]device discovery device from description location mac if device add devices callback [ Wemo Binary Sensor device ]
def strip additional query parameters schema req additional properties schema get 'addtional Properties' True pattern regexes []patterns schema get 'pattern Properties' None if patterns for regex in patterns pattern regexes append re compile regex if additional properties for param in set req GET keys if param not in schema['properties'] keys if not list regex for regex in pattern regexes if regex match param del req GET[param]
def test scientific notation loaded load 'a {a 1e 3 b 1 E4 c -1 e- 3 d 2 3e+ 4 e 2e 4 f 23 53 e 1 g 32284 2e+ 9 h 2 333993939 e- 3 }' assert isinstance loaded['a']['a'] float assert isinstance loaded['a']['b'] float assert isinstance loaded['a']['c'] float assert isinstance loaded['a']['d'] float assert isinstance loaded['a']['e'] float assert isinstance loaded['a']['f'] float assert isinstance loaded['a']['g'] float assert isinstance loaded['a']['h'] float
def test scientific notation loaded load 'a {a 1e 3 b 1 E4 c -1 e- 3 d 2 3e+ 4 e 2e 4 f 23 53 e 1 g 32284 2e+ 9 h 2 333993939 e- 3 }' assert isinstance loaded['a']['a'] float assert isinstance loaded['a']['b'] float assert isinstance loaded['a']['c'] float assert isinstance loaded['a']['d'] float assert isinstance loaded['a']['e'] float assert isinstance loaded['a']['f'] float assert isinstance loaded['a']['g'] float assert isinstance loaded['a']['h'] float
def test scientific notation loaded load 'a {a 1e 3 b 1 E4 c -1 e- 3 d 2 3e+ 4 e 2e 4 f 23 53 e 1 g 32284 2e+ 9 h 2 333993939 e- 3 }' assert isinstance loaded['a']['a'] float assert isinstance loaded['a']['b'] float assert isinstance loaded['a']['c'] float assert isinstance loaded['a']['d'] float assert isinstance loaded['a']['e'] float assert isinstance loaded['a']['f'] float assert isinstance loaded['a']['g'] float assert isinstance loaded['a']['h'] float
def twiny ax None if ax is None ax gca ax 1 ax twiny return ax 1
def twiny ax None if ax is None ax gca ax 1 ax twiny return ax 1
def flipwritable fn mode None if os access fn os W OK return Noneold mode os stat fn st modeos chmod fn stat S IWRITE old mode return old mode
def flipwritable fn mode None if os access fn os W OK return Noneold mode os stat fn st modeos chmod fn stat S IWRITE old mode return old mode
@plugins command 'new' @click argument 'plugin identifier' callback check cookiecutter @click option '--template' '-t' type click STRING default 'https //github com/sh 4 nks/cookiecutter-flaskbb-plugin' help ' Pathtoacookiecuttertemplateortoavalidgitrepo ' def new plugin plugin identifier template out dir os path join current app root path 'plugins' plugin identifier click secho '[+] Creatingnewplugin{}' format plugin identifier fg 'cyan' cookiecutter template output dir out dir click secho '[+] Done Createdin{}' format out dir fg 'green' bold True
def get constr expr lh op rh op if rh op is None return lh opelse return sum expr [lh op neg expr rh op ]
def Get Availability Zones region ec 2 Connect region return [z name for z in ec 2 get all zones ]
def slugify uniquely for queryset value queryset slugfield 'slug' suffix 0potential base django slugify unidecode value if len potential 0 potential 'null'while True if suffix potential '-' join [base str suffix ] if not queryset filter **{slugfield potential} exists return potentialsuffix + 1
def slugify uniquely for queryset value queryset slugfield 'slug' suffix 0potential base django slugify unidecode value if len potential 0 potential 'null'while True if suffix potential '-' join [base str suffix ] if not queryset filter **{slugfield potential} exists return potentialsuffix + 1
def slugify uniquely for queryset value queryset slugfield 'slug' suffix 0potential base django slugify unidecode value if len potential 0 potential 'null'while True if suffix potential '-' join [base str suffix ] if not queryset filter **{slugfield potential} exists return potentialsuffix + 1
@ ensure existsdef start name if sd version > 219 ret machinectl 'start{ 0 }' format name else cmd 'systemctlstartsystemd-nspawn@{ 0 }' format name ret salt ['cmd run all'] cmd python shell False if ret['retcode'] 0 context ['retcode'] salt defaults exitcodes EX UNAVAILABL Ereturn Falsereturn True
def is rel s if len s 0 return Trueelif all isinstance el tuple for el in s and len max s len min s return Trueelse raise Value Error u' Set%rcontainssequencesofdifferentlengths' % s
def is rel s if len s 0 return Trueelif all isinstance el tuple for el in s and len max s len min s return Trueelse raise Value Error u' Set%rcontainssequencesofdifferentlengths' % s
def get frequency grid frequency assume regular frequency False frequency np asarray frequency if frequency ndim 1 raise Value Error 'frequencygridmustbe 1 dimensional' elif len frequency 1 return frequency[ 0 ] frequency[ 0 ] 1 elif not assume regular frequency or is regular frequency raise Value Error 'frequencymustbearegulargrid' return frequency[ 0 ] frequency[ 1 ] - frequency[ 0 ] len frequency
def get frequency grid frequency assume regular frequency False frequency np asarray frequency if frequency ndim 1 raise Value Error 'frequencygridmustbe 1 dimensional' elif len frequency 1 return frequency[ 0 ] frequency[ 0 ] 1 elif not assume regular frequency or is regular frequency raise Value Error 'frequencymustbearegulargrid' return frequency[ 0 ] frequency[ 1 ] - frequency[ 0 ] len frequency
def kill timeout 15 ret {'killed' None 'retcode' 1}comment []pid grains get 'pid' if not pid comment append ' Unabletofind"pid"ingrains' ret['retcode'] salt defaults exitcodes EX SOFTWAR Eelif 'ps kill pid' not in salt comment append ' Missingcommand ps kill pid' ret['retcode'] salt defaults exitcodes EX SOFTWAR Eelse ret['retcode'] int not salt ['ps kill pid'] pid if ret['retcode'] comment append 'ps kill pidfailed' else for in range timeout time sleep 1 signaled salt ['ps kill pid'] pid if not signaled ret['killed'] pidbreakelse comment append ' Timedoutwaitingforminiontoexit' ret['retcode'] salt defaults exitcodes EX TEMPFAI Lif comment ret['comment'] commentreturn ret
def start file fname id None if isinstance fname string types if op splitext fname [1 ] lower ' gz' logger debug ' Writingusinggzip' fid Gzip File fname 'wb' compresslevel 2 else logger debug ' Writingusingnormal I/O' fid open fname 'wb' else logger debug ' Writingusing%s I/O' % type fname fid fnamefid seek 0 write id fid FIFF FIFF FILE ID id write int fid FIFF FIFF DIR POINTER -1 write int fid FIFF FIFF FREE LIST -1 return fid
def start file fname id None if isinstance fname string types if op splitext fname [1 ] lower ' gz' logger debug ' Writingusinggzip' fid Gzip File fname 'wb' compresslevel 2 else logger debug ' Writingusingnormal I/O' fid open fname 'wb' else logger debug ' Writingusing%s I/O' % type fname fid fnamefid seek 0 write id fid FIFF FIFF FILE ID id write int fid FIFF FIFF DIR POINTER -1 write int fid FIFF FIFF FREE LIST -1 return fid
@signals contributor removed connectdef remove contributor from subscriptions node user if user id not in node admin contributor ids node subscriptions get all node subscriptions user node for subscription in node subscriptions subscription remove user from subscription user
def volume update db context volume id host now timeutils utcnow values {'host' host 'scheduled at' now}return db volume update context volume id values
def untar backup files source logging info " Untarringbackupfile'{ 0 }' " format source try tar tarfile open source 'r gz' tar extractall path '/' tar close except tarfile Tar Error as tar error logging exception tar error raise backup exceptions BR Exception " Exceptionwhileuntarringbackupfile'{ 0 }' " format source logging info " Doneuntarring'{ 0 }' " format source
def app from nltk grammar import CF Ggrammar CFG fromstring "\n# Grammaticalproductions \n S->NPVP\n NP-> Det NPP Det N\n VP->VNPPP VNP V\n PP->PNP\n# Lexicalproductions \n NP->'I'\n Det->'the' 'a'\n N->'man' 'park' 'dog' 'telescope'\n V->'ate' 'saw'\n P->'in' 'under' 'with'\n" sent 'thedogsawamaninthepark' split Recursive Descent App grammar sent mainloop
def possibly scored usage key return usage key block type in block types possibly scored
def include enabled extensions settings from django db models loading import load appfrom django db import Database Errorfrom reviewboard extensions base import get extension managertry manager get extension manager except Database Error returnfor extension in manager get enabled extensions load app extension info app name
def include enabled extensions settings from django db models loading import load appfrom django db import Database Errorfrom reviewboard extensions base import get extension managertry manager get extension manager except Database Error returnfor extension in manager get enabled extensions load app extension info app name
def include enabled extensions settings from django db models loading import load appfrom django db import Database Errorfrom reviewboard extensions base import get extension managertry manager get extension manager except Database Error returnfor extension in manager get enabled extensions load app extension info app name
def image snapshot delete call None kwargs None if call 'function' raise Salt Cloud System Exit ' Theimage snapshot deletefunctionmustbecalledwith-for--function ' if kwargs is None kwargs {}image id kwargs get 'image id' None image name kwargs get 'image name' None snapshot id kwargs get 'snapshot id' None if snapshot id is None raise Salt Cloud System Exit " Theimage snapshot deletefunctionrequiresa'snapshot id'tobeprovided " if image id if image name log warning " Boththe'image id'and'image name'argumentswereprovided 'image id'willtakeprecedence " elif image name image id get image id kwargs {'name' image name} else raise Salt Cloud System Exit " Theimage snapshot deletefunctionrequireseitheran'image id'ora'image name'tobeprovided " server user password get xml rpc auth ' ' join [user password] response server one image snapshotdelete auth int image id int snapshot id data {'action' 'image snapshotdelete' 'deleted' response[ 0 ] 'snapshot id' response[ 1 ] 'error code' response[ 2 ]}return data
def subclass exception name parent module return type bytes if py 2 name parent {u' module ' module}
def pecl command defaults False cmdline 'pecl{ 0 }' format command if salt utils is true defaults cmdline "yes''" + ' ' + cmdline ret salt ['cmd run all'] cmdline python shell True if ret['retcode'] 0 return ret['stdout']else log error ' Problemrunningpecl Isphp-pearinstalled?' return ''
def pecl command defaults False cmdline 'pecl{ 0 }' format command if salt utils is true defaults cmdline "yes''" + ' ' + cmdline ret salt ['cmd run all'] cmdline python shell True if ret['retcode'] 0 return ret['stdout']else log error ' Problemrunningpecl Isphp-pearinstalled?' return ''
def get saml provider name region None key None keyid None profile None conn get conn region region key key keyid keyid profile profile try provider conn get saml provider name return provider['get saml provider response']['get saml provider result']['saml metadata document']except boto exception Boto Server Error as e aws utils ['boto get error'] e log debug aws msg ' Failedtoget SAM Lproviderdocument 'log error msg return False
def cert get domains cert domains []try ext cert extensions get extension for oid x509 OID SUBJECT ALTERNATIVE NAME entries ext value get values for type x509 DNS Name for entry in entries domains append entry except Exception as e app logger warning ' Failedtoget Subject Alt Name {0 }' format e return domains
def cert get domains cert domains []try ext cert extensions get extension for oid x509 OID SUBJECT ALTERNATIVE NAME entries ext value get values for type x509 DNS Name for entry in entries domains append entry except Exception as e app logger warning ' Failedtoget Subject Alt Name {0 }' format e return domains
def cycle colors chunk palette DEFAULT PALETTE colors []g itertools cycle palette for i in range len chunk colors append next g return colors
def limit discount amount by min price line order source shop product line product get shop instance order source shop if shop product minimum price min total shop product minimum price value * line quantity base price line base unit price value * line quantity if base price - line discount amount value < min total line discount amount order source create price base price - min total
def limit discount amount by min price line order source shop product line product get shop instance order source shop if shop product minimum price min total shop product minimum price value * line quantity base price line base unit price value * line quantity if base price - line discount amount value < min total line discount amount order source create price base price - min total
def skip under travis fn None if travis Testing skip msg pytest skip ' Cannotbetestedunder Travis-CI' if fn is not None def inner skip msg inner name fn name return innerelse skip msg else return fn
def skip under travis fn None if travis Testing skip msg pytest skip ' Cannotbetestedunder Travis-CI' if fn is not None def inner skip msg inner name fn name return innerelse skip msg else return fn
def set builddefaults facts facts if 'builddefaults' in facts builddefaults facts['builddefaults']common facts['common']if 'http proxy' not in builddefaults and 'http proxy' in common builddefaults['http proxy'] common['http proxy']if 'https proxy' not in builddefaults and 'https proxy' in common builddefaults['https proxy'] common['https proxy']if 'no proxy' not in builddefaults and 'no proxy' in common builddefaults['no proxy'] common['no proxy']if 'git http proxy' not in builddefaults and 'http proxy' in builddefaults builddefaults['git http proxy'] builddefaults['http proxy']if 'git https proxy' not in builddefaults and 'https proxy' in builddefaults builddefaults['git https proxy'] builddefaults['https proxy']if 'git no proxy' not in builddefaults and 'no proxy' in builddefaults builddefaults['git no proxy'] builddefaults['no proxy']if 'config' in builddefaults if 'admission plugin config' not in facts['master'] facts['master']['admission plugin config'] dict facts['master']['admission plugin config'] update builddefaults['config'] delete empty keys facts['master']['admission plugin config'][' Build Defaults']['configuration']['env'] return facts
def get model name model return model meta model name
def validate Opf Json Value value opf Json Schema Filename json Schema Path os path join os path dirname file 'jsonschema' opf Json Schema Filename jsonhelpers validate value schema Path json Schema Path return
def validate Opf Json Value value opf Json Schema Filename json Schema Path os path join os path dirname file 'jsonschema' opf Json Schema Filename jsonhelpers validate value schema Path json Schema Path return
def validate Opf Json Value value opf Json Schema Filename json Schema Path os path join os path dirname file 'jsonschema' opf Json Schema Filename jsonhelpers validate value schema Path json Schema Path return
def Get Pretty Bytes bytes num significant digits 0 byte prefixes ['' 'K' 'M' 'G' 'T' 'P' 'E']for i in range 0 7 exp i * 10 if bytes num < 1 << exp + 10 if i 0 formatted bytes str bytes num else formatted bytes '% *f' % significant digits bytes num * 1 0 / 1 << exp if formatted bytes '1 ' plural 's'else plural ''return '%s%s Byte%s' % formatted bytes byte prefixes[i] plural logging error ' Numbertoohightoconvert %d' bytes num return ' Alot'
@db api retry if session inactive def ensure external network default value callback resource event trigger context request network is default request get IS DEFAULT False if event in events BEFORE CREATE events BEFORE UPDATE and is default obj context session query ext net models External Network filter by is default True first if obj and network['id'] obj network id raise exceptions Default External Network Exists net id obj network id obj context session query ext net models External Network filter by network id network['id'] obj update {IS DEFAULT is default}
@db api retry if session inactive def ensure external network default value callback resource event trigger context request network is default request get IS DEFAULT False if event in events BEFORE CREATE events BEFORE UPDATE and is default obj context session query ext net models External Network filter by is default True first if obj and network['id'] obj network id raise exceptions Default External Network Exists net id obj network id obj context session query ext net models External Network filter by network id network['id'] obj update {IS DEFAULT is default}
@db api retry if session inactive def ensure external network default value callback resource event trigger context request network is default request get IS DEFAULT False if event in events BEFORE CREATE events BEFORE UPDATE and is default obj context session query ext net models External Network filter by is default True first if obj and network['id'] obj network id raise exceptions Default External Network Exists net id obj network id obj context session query ext net models External Network filter by network id network['id'] obj update {IS DEFAULT is default}
def select backend name try mod import name fromlist public api except Import Error raiseexcept Exception as e import sysfrom zmq utils sixcerpt import reraiseexc info sys exc info reraise Import Error Import Error ' Importing%sfailedwith%s' % name e exc info[ 2 ] ns {}for key in public api ns[key] getattr mod key return ns
def tgrep parens action s l tokens assert len tokens 3 assert tokens[ 0 ] u' ' assert tokens[ 2 ] u' ' return tokens[ 1 ]
def check is admin context init credentials context to policy values if ADMIN CTX POLICY not in ENFORCER rules return Falsereturn ENFORCER enforce ADMIN CTX POLICY credentials credentials
def interpolate 2d values method 'pad' axis 0 limit None fill value None dtype None transf lambda x x if axis 0 else lambda x x T ndim values ndimif values ndim 1 if axis 0 raise Assertion Error 'cannotinterpolateonandim 1withaxis 0' values values reshape tuple 1 + values shape if fill value is None mask Noneelse mask mask missing transf values fill value method clean fill method method if method 'pad' values transf pad 2d transf values limit limit mask mask dtype dtype else values transf backfill 2d transf values limit limit mask mask dtype dtype if ndim 1 values values[ 0 ]return values
def salt configuration error filename raise Salt Configuration Error ' Configurationerrorin{ 0 }' format filename
def lcs ic synset 1 synset 2 ic verbose False if synset 1 pos synset 2 pos raise Word Net Error u' Computingtheleastcommonsubsumerrequires' + u'%sand%stohavethesamepartofspeech ' % synset 1 synset 2 ic 1 information content synset 1 ic ic 2 information content synset 2 ic subsumers synset 1 common hypernyms synset 2 if len subsumers 0 subsumer ic 0else subsumer ic max information content s ic for s in subsumers if verbose print u'>LCS Subsumerbycontent ' subsumer ic return ic 1 ic 2 subsumer ic
def lcs ic synset 1 synset 2 ic verbose False if synset 1 pos synset 2 pos raise Word Net Error u' Computingtheleastcommonsubsumerrequires' + u'%sand%stohavethesamepartofspeech ' % synset 1 synset 2 ic 1 information content synset 1 ic ic 2 information content synset 2 ic subsumers synset 1 common hypernyms synset 2 if len subsumers 0 subsumer ic 0else subsumer ic max information content s ic for s in subsumers if verbose print u'>LCS Subsumerbycontent ' subsumer ic return ic 1 ic 2 subsumer ic
def lcs ic synset 1 synset 2 ic verbose False if synset 1 pos synset 2 pos raise Word Net Error u' Computingtheleastcommonsubsumerrequires' + u'%sand%stohavethesamepartofspeech ' % synset 1 synset 2 ic 1 information content synset 1 ic ic 2 information content synset 2 ic subsumers synset 1 common hypernyms synset 2 if len subsumers 0 subsumer ic 0else subsumer ic max information content s ic for s in subsumers if verbose print u'>LCS Subsumerbycontent ' subsumer ic return ic 1 ic 2 subsumer ic
def cmp by igp cost path 1 path 2 return None
def post match view name style first second center bfr threshold if first is not None and second is not None diff first size - second size if diff > 0 first first move first begin first end - diff elif diff < 0 second second move second begin - diff second end return first second style
def post match view name style first second center bfr threshold if first is not None and second is not None diff first size - second size if diff > 0 first first move first begin first end - diff elif diff < 0 second second move second begin - diff second end return first second style
def post match view name style first second center bfr threshold if first is not None and second is not None diff first size - second size if diff > 0 first first move first begin first end - diff elif diff < 0 second second move second begin - diff second end return first second style
def post match view name style first second center bfr threshold if first is not None and second is not None diff first size - second size if diff > 0 first first move first begin first end - diff elif diff < 0 second second move second begin - diff second end return first second style
def Cyclic Group n a list range 1 n a append 0 gen af new a G Permutation Group [gen] G is abelian True G is nilpotent True G is solvable True G degree nG is transitive True G order nreturn G
@gen enginedef List Files And Dirs store pattern callback result yield gen Task List All Common Prefixes store '/' prefix Prefix From Pattern pattern callback result
def dot inp matrix if 'int' in inp dtype and inp ndim 2 return matrix[inp flatten ]elif 'int' in inp dtype return matrix[inp]elif 'float' in inp dtype and inp ndim 3 shape 0 inp shape[ 0 ]shape 1 inp shape[ 1 ]shape 2 inp shape[ 2 ]return TT dot inp reshape shape 0 * shape 1 shape 2 matrix else return TT dot inp matrix
def call split lines x lineno None col None return ast Call func ast Attribute value x attr 'splitlines' ctx ast Load lineno lineno col offset col args [] keywords [] starargs None kwargs None lineno lineno col offset col
def standard deviation input labels None index None return numpy sqrt variance input labels index
def environment sanity check environment assert issubclass environment undefined Undefined 'undefinedmustbeasubclassofundefinedbecausefiltersdependonit 'assert environment block start string environment variable start string environment comment start string 'block variableandcommentstartstringsmustbedifferent'assert environment newline sequence in '\r' '\r\n' '\n' 'newline sequencesettounknownlineendingstring 'return environment
def sorting dates start advertised start announcement try start dateutil parser parse advertised start if start tzinfo is None start start replace tzinfo utc except Value Error Attribute Error start startnow datetime now utc return announcement start now
def populate entry points entry points for entry point in entry points name entry point nametry entry point entry point load except Exception as e warnings warn Astropy User Warning u'{type}erroroccurredinentrypoint{name} ' format type type e name name name else if not inspect isclass entry point warnings warn Astropy User Warning u' Modelingentrypoint{ 0 }expectedtobea Class ' format name elif issubclass entry point Fitter name entry point name globals [name] entry point all append name else warnings warn Astropy User Warning u' Modelingentrypoint{ 0 }expectedtoextendastropy modeling Fitter' format name
def Dagum name p a b return rv name Dagum Distribution p a b
def test path issues source 'fromdatetimeimport'assert jedi Script source completions
def get memcached client expiration time 0 if CONF cache enabled and CONF cache memcache servers warn if null backend return Cache Client get default cache region expiration time expiration time
def Default Value Constructor For Field field if field label Field Descriptor LABEL REPEATED if field has default value and field default value [] raise Value Error ' Repeatedfielddefaultvaluenotemptylist %s' % field default value if field cpp type Field Descriptor CPPTYPE MESSAGE message type field message typedef Make Repeated Message Default message return containers Repeated Composite Field Container message listener for children field message type return Make Repeated Message Defaultelse type checker type checkers Get Type Checker field def Make Repeated Scalar Default message return containers Repeated Scalar Field Container message listener for children type checker return Make Repeated Scalar Defaultif field cpp type Field Descriptor CPPTYPE MESSAGE message type field message typedef Make Sub Message Default message result message type concrete class result Set Listener message listener for children return resultreturn Make Sub Message Defaultdef Make Scalar Default message return field default valuereturn Make Scalar Default
def generate cert domain result salt ['cmd run'] 'icinga 2 pkinew-cert--cn{ 0 }--key/etc/icinga 2 /pki/{ 0 } key--cert/etc/icinga 2 /pki/{ 0 } crt' format domain return result
def get pip requirements fname os path join jasperpath LIB PATH 'requirements txt' logger logging get Logger name if os access fname os R OK reqs list pip req parse requirements fname logger debug " Found%d PI Prequirementsinfile'%s'" len reqs fname return reqselse logger debug "PI Prequirementsfile'%s'notfoundornotreadable" fname
def htons integer return ntohs integer
def get app qt 4 *args **kwargs from I Python external qt for kernel import Qt Guiapp Qt Gui Q Application instance if app is None if not args args [''] app Qt Gui Q Application *args **kwargs return app
@ helpers positional 3 def validate token key token user id action id '' current time None if not token return Falsetry decoded base 64 urlsafe b64 decode token token time int decoded split DELIMITER [ -1 ] except Type Error Value Error binascii Error return Falseif current time is None current time time time if current time - token time > DEFAULT TIMEOUT SECS return Falseexpected token generate token key user id action id action id when token time if len token len expected token return Falsedifferent 0for x y in zip bytearray token bytearray expected token different x ^ y return not different
def get backend api cluster id backend config filename environ get 'FLOCKER ACCEPTANCE TEST VOLUME BACKEND CONFIG' if backend config filename is None raise Skip Test ' Thistestrequirestheabilitytoconstructan I Block Device AP Iinordertoverifyconstruction Pleaseset FLOCKER ACCEPTANCE TEST VOLUME BACKEND CONFI Gtoayamlfilepathwiththedatasetconfiguration ' backend name environ get 'FLOCKER ACCEPTANCE VOLUME BACKEND' if backend name is None raise Skip Test ' Setacceptancetestingvolumebackendusingthe' + 'FLOCKER ACCEPTANCE VOLUME BACKEN Denvironmentvariable ' if backend name in 'loopback' 'zfs' raise Skip Test " Theloopbackbackend AP Ican'tbeusedremotely " backend config filepath File Path backend config filename full backend config yaml safe load backend config filepath get Content backend config full backend config get backend name if 'backend' in backend config backend config pop 'backend' backend backend loader get backend name return get api backend pmap backend config reactor cluster id
def test validate coord result conesearch validate coord ICRS 6 02233 * u degree -72 08144 * u degree np testing assert allclose result [6 022330000000011 -72 08144 ] result conesearch validate coord Sky Coord 6 02233 * u degree -72 08144 * u degree frame u'icrs' np testing assert allclose result [6 022330000000011 -72 08144 ] result conesearch validate coord 0 0 np testing assert allclose result [0 0] result conesearch validate coord -1 -1 np testing assert allclose result [359 -1 ]
def test validate coord result conesearch validate coord ICRS 6 02233 * u degree -72 08144 * u degree np testing assert allclose result [6 022330000000011 -72 08144 ] result conesearch validate coord Sky Coord 6 02233 * u degree -72 08144 * u degree frame u'icrs' np testing assert allclose result [6 022330000000011 -72 08144 ] result conesearch validate coord 0 0 np testing assert allclose result [0 0] result conesearch validate coord -1 -1 np testing assert allclose result [359 -1 ]
def test validate coord result conesearch validate coord ICRS 6 02233 * u degree -72 08144 * u degree np testing assert allclose result [6 022330000000011 -72 08144 ] result conesearch validate coord Sky Coord 6 02233 * u degree -72 08144 * u degree frame u'icrs' np testing assert allclose result [6 022330000000011 -72 08144 ] result conesearch validate coord 0 0 np testing assert allclose result [0 0] result conesearch validate coord -1 -1 np testing assert allclose result [359 -1 ]
def has subdirectories path include exclude show all try return len listdir path include exclude show all folders only True > 1 except IO Error OS Error return False
def add blob owner bucket name blob name user email storage client storage Client bucket storage client bucket bucket name blob bucket blob blob name blob acl reload blob acl user user email grant owner blob acl save print ' Addeduser{}asanowneronblob{}inbucket{} ' format user email blob name bucket name
def load ndarray transfer name assert name in ['avicenna' 'harry' 'rita' 'sylvester' 'terry' 'ule'] fname os path join preprocess '${PYLEARN 2 DATA PATH}' 'UTLC' 'filetensor' name + ' transfer ft' transfer load filetensor fname return transfer
def inf to nan func def wrap *a **kw v func *a **kw if not np isfinite v return np nanreturn vreturn wrap
def het breuschpagan resid exog het x np asarray exog het y np asarray resid ** 2 nobs nvars x shaperesols OLS y x fit fval resols fvaluefpval resols f pvaluelm nobs * resols rsquared return lm stats chi 2 sf lm nvars - 1 fval fpval
def het breuschpagan resid exog het x np asarray exog het y np asarray resid ** 2 nobs nvars x shaperesols OLS y x fit fval resols fvaluefpval resols f pvaluelm nobs * resols rsquared return lm stats chi 2 sf lm nvars - 1 fval fpval
@register render tagdef dashboard column context token column index int token split contents [1 ] output []for tag in settings DASHBOARD TAGS[column index] t Template u'{%%load%s%%}{%%%s%%}' % tuple tag split u' ' output append t render context return u'' join output
def get all controllers try result utils run 'lssubsys' ignore status False controllers str result stdout strip controller list []for controller in controllers str splitlines controller sub list controller split ' ' controller list + controller sub listexcept error Cmd Error controller list ['cpuacct' 'cpu' 'memory' 'cpuset' 'devices' 'freezer' 'blkio' 'netcls']return controller list
def get all controllers try result utils run 'lssubsys' ignore status False controllers str result stdout strip controller list []for controller in controllers str splitlines controller sub list controller split ' ' controller list + controller sub listexcept error Cmd Error controller list ['cpuacct' 'cpu' 'memory' 'cpuset' 'devices' 'freezer' 'blkio' 'netcls']return controller list
def get all controllers try result utils run 'lssubsys' ignore status False controllers str result stdout strip controller list []for controller in controllers str splitlines controller sub list controller split ' ' controller list + controller sub listexcept error Cmd Error controller list ['cpuacct' 'cpu' 'memory' 'cpuset' 'devices' 'freezer' 'blkio' 'netcls']return controller list
def chkconfig add name cmd '/sbin/chkconfig--add{ 0 }' format name if salt ['cmd retcode'] cmd python shell False 0 log info ' Addedinitscript"{ 0 }"tochkconfig' format name return Trueelse log error ' Unabletoaddinitscript"{ 0 }"tochkconfig' format name return False
@parse data@set databasedef get content items ids None **kwargs if ids values Item select where Item id in ids else values Item select return values
def delete temp backups older than 24 file list os listdir get backup path for this file in file list this file path os path join get backup path this file if is file old this file path older than os remove this file path
def send Robust signal Any sender Anonymous *arguments **named responses []for receiver in live Receivers get All Receivers sender signal try response robust Apply receiver signal signal sender sender *arguments **named except Exception as err responses append receiver err else responses append receiver response return responses
def send Robust signal Any sender Anonymous *arguments **named responses []for receiver in live Receivers get All Receivers sender signal try response robust Apply receiver signal signal sender sender *arguments **named except Exception as err responses append receiver err else responses append receiver response return responses
def send Robust signal Any sender Anonymous *arguments **named responses []for receiver in live Receivers get All Receivers sender signal try response robust Apply receiver signal signal sender sender *arguments **named except Exception as err responses append receiver err else responses append receiver response return responses
def background im size background None **kwargs if not background return imif not size[ 0 ] or not size[ 1 ] return im x y im sizeif x > size[ 0 ] and y > size[ 1 ] return imim colorspace im replace alpha background **kwargs new im Image new 'RGB' size background if new im mode im mode new im new im convert im mode offset size[ 0 ] - x // 2 size[ 1 ] - y // 2 new im paste im offset return new im
def add default version None overwrite False plugins module loader all path only True plugins os path splitext os path basename p [0 ] p for p in plugins plugins p for p in plugins if p[ 0 ] not in NONMODULE MODULE NAMES processed set diagnostic messages []for name filename in info for info in plugins if info[ 0 ] not in processed try write metadata filename DEFAULT METADATA version overwrite except Parse Error as e diagnostic messages append e args[ 0 ] continueprocessed add name if diagnostic messages pprint diagnostic messages return 0
def add default version None overwrite False plugins module loader all path only True plugins os path splitext os path basename p [0 ] p for p in plugins plugins p for p in plugins if p[ 0 ] not in NONMODULE MODULE NAMES processed set diagnostic messages []for name filename in info for info in plugins if info[ 0 ] not in processed try write metadata filename DEFAULT METADATA version overwrite except Parse Error as e diagnostic messages append e args[ 0 ] continueprocessed add name if diagnostic messages pprint diagnostic messages return 0
def add default version None overwrite False plugins module loader all path only True plugins os path splitext os path basename p [0 ] p for p in plugins plugins p for p in plugins if p[ 0 ] not in NONMODULE MODULE NAMES processed set diagnostic messages []for name filename in info for info in plugins if info[ 0 ] not in processed try write metadata filename DEFAULT METADATA version overwrite except Parse Error as e diagnostic messages append e args[ 0 ] continueprocessed add name if diagnostic messages pprint diagnostic messages return 0
def make auth headers if not os path exists ' appveyor token' raise Runtime Error ' Pleasecreateafilenamed` appveyor token`inthecurrentdirectory Youcangetthetokenfromhttps //ci appveyor com/api-token' with open ' appveyor token' as f token f read strip headers {' Authorization' ' Bearer{}' format token }return headers
@pytest fixturedef super moderator user default groups user User username 'test super mod' email 'test super@example org' password 'test' primary group default groups[ 1 ] activated True user save return user
def get file original name name re match re findall ' * sep * ' name if re match return re match[ 0 ]else return ' Notvalid'
def ulp abs check expected got ulp tol abs tol ulp error abs to ulps expected - to ulps got abs error abs expected - got if abs error < abs tol or ulp error < ulp tol return Noneelse fmt 'error { 3g} { d}ulps permittederror { 3g}or{ d}ulps'return fmt format abs error ulp error abs tol ulp tol
def test formatted decimal field class Test Model Form Model Form class Meta model Productfields ['width']values [' 0 E- 9 ' '0 E- 30 ' '1 E- 9 ' '123 E- 10 ' '- 123 E- 10 ' '1 12345666666666 E 20 ']for value in values product Product width Decimal value form Test Model Form instance product rendered form force text form rendered value re search 'value " *? "' rendered form group 1 rendered step re search 'step " *? "' rendered form group 1 assert rendered value and 'E' not in rendered value assert rendered step and 'E' not in rendered step large value '1 23 E- 10000 'product Product width Decimal large value with pytest raises Value Error form Test Model Form instance product
def test formatted decimal field class Test Model Form Model Form class Meta model Productfields ['width']values [' 0 E- 9 ' '0 E- 30 ' '1 E- 9 ' '123 E- 10 ' '- 123 E- 10 ' '1 12345666666666 E 20 ']for value in values product Product width Decimal value form Test Model Form instance product rendered form force text form rendered value re search 'value " *? "' rendered form group 1 rendered step re search 'step " *? "' rendered form group 1 assert rendered value and 'E' not in rendered value assert rendered step and 'E' not in rendered step large value '1 23 E- 10000 'product Product width Decimal large value with pytest raises Value Error form Test Model Form instance product
def test formatted decimal field class Test Model Form Model Form class Meta model Productfields ['width']values [' 0 E- 9 ' '0 E- 30 ' '1 E- 9 ' '123 E- 10 ' '- 123 E- 10 ' '1 12345666666666 E 20 ']for value in values product Product width Decimal value form Test Model Form instance product rendered form force text form rendered value re search 'value " *? "' rendered form group 1 rendered step re search 'step " *? "' rendered form group 1 assert rendered value and 'E' not in rendered value assert rendered step and 'E' not in rendered step large value '1 23 E- 10000 'product Product width Decimal large value with pytest raises Value Error form Test Model Form instance product
def test formatted decimal field class Test Model Form Model Form class Meta model Productfields ['width']values [' 0 E- 9 ' '0 E- 30 ' '1 E- 9 ' '123 E- 10 ' '- 123 E- 10 ' '1 12345666666666 E 20 ']for value in values product Product width Decimal value form Test Model Form instance product rendered form force text form rendered value re search 'value " *? "' rendered form group 1 rendered step re search 'step " *? "' rendered form group 1 assert rendered value and 'E' not in rendered value assert rendered step and 'E' not in rendered step large value '1 23 E- 10000 'product Product width Decimal large value with pytest raises Value Error form Test Model Form instance product
def user is system admin user db return user has role user db user db role System Role SYSTEM ADMIN
def option from wire otype wire current olen cls get option class otype return cls from wire otype wire current olen
@fixturedef patch network functions monkeypatch import inbox actions backendsfor backend in inbox actions backends module registry values for method name in backend all monkeypatch setattr backend name + ' ' + method name lambda *args **kwargs None
@fixturedef patch network functions monkeypatch import inbox actions backendsfor backend in inbox actions backends module registry values for method name in backend all monkeypatch setattr backend name + ' ' + method name lambda *args **kwargs None
@fixturedef patch network functions monkeypatch import inbox actions backendsfor backend in inbox actions backends module registry values for method name in backend all monkeypatch setattr backend name + ' ' + method name lambda *args **kwargs None
@core helperdef flash success message allow html False flash message category 'alert-success' allow html allow html
def IQR xs cdf Cdf xs return cdf Value 0 25 cdf Value 0 75
def bucket copy self Copy Source Key Extra Args None Callback None Source Client None Config None return self meta client copy Copy Source Copy Source Bucket self name Key Key Extra Args Extra Args Callback Callback Source Client Source Client Config Config
def mro lookup cls attr stop set monkey patched [] for node in cls mro if node in stop try value node dict [attr]module origin value module except Attribute Error Key Error passelse if module origin not in monkey patched return nodereturnif attr in node dict return node
def mro lookup cls attr stop set monkey patched [] for node in cls mro if node in stop try value node dict [attr]module origin value module except Attribute Error Key Error passelse if module origin not in monkey patched return nodereturnif attr in node dict return node
def create shadow trigger trigger type db trigger type ref trigger type db get reference refif trigger type db parameters schema LOG debug ' Skipshadowtriggerfor Trigger Typewithparameters%s ' trigger type ref return Nonetrigger {'name' trigger type db name 'pack' trigger type db pack 'type' trigger type ref 'parameters' {}}return create or update trigger db trigger
def detrend x order 1 axis 0 if x ndim 2 and int axis 1 x x Telif x ndim > 2 raise Not Implemented Error 'x ndim> 2 isnotimplementeduntilitisneeded' nobs x shape[ 0 ]if order 0 resid x - x mean axis 0 else trends np vander np arange float nobs N order + 1 beta np linalg pinv trends dot x resid x - np dot trends beta if x ndim 2 and int axis 1 resid resid Treturn resid
def article url content return '{content settings[SITEURL]}/{content url}' format content content encode 'utf- 8 '
def get test cluster reactor control node environ get 'FLOCKER ACCEPTANCE CONTROL NODE' if control node is None raise Skip Test ' Setacceptancetestingcontrolnode I Paddressusingthe' + 'FLOCKER ACCEPTANCE CONTROL NOD Eenvironmentvariable ' agent nodes env var environ get 'FLOCKER ACCEPTANCE NUM AGENT NODES' if agent nodes env var is None raise Skip Test ' Setthenumberofconfiguredacceptancetestingnodesusingthe FLOCKER ACCEPTANCE NUM AGENT NODE Senvironmentvariable ' num agent nodes int agent nodes env var certificates path File Path environ['FLOCKER ACCEPTANCE API CERTIFICATES PATH'] hostname to public address env var environ get 'FLOCKER ACCEPTANCE HOSTNAME TO PUBLIC ADDRESS' '{}' hostname to public address json loads hostname to public address env var return connected cluster reactor control node certificates path num agent nodes hostname to public address
def elide filename filename length elidestr ' 'if length < len elidestr raise Value Error 'lengthmustbegreaterorequalto 3 ' if len filename < length return filenamelength - len elidestr left length // 2 right length - left if right 0 return filename[ left] + elidestr else return filename[ left] + elidestr + filename[ - right ]
@app template filter 'external url' def external url url url pattern '^ https? // *$'scheme re match url pattern url if not scheme url root request url root rstrip '/' return '{}{}' format url root url else return url
def set verbose verbose global verbose verbose verbose
def merge *dicts **kwargs if len dicts 1 and not isinstance dicts[ 0 ] dict dicts dicts[ 0 ]factory get factory merge kwargs rv factory for d in dicts rv update d return rv
def escaped Data data in Attribute if isinstance data unicode data data encode 'utf- 8 ' data data replace '&' '&amp ' replace '<' '&lt ' replace '>' '&gt ' if in Attribute data data replace '"' '&quot ' return data
def guess language text try from guess language import guess Languagereturn Language guess Language text except Import Error log error u' Cannotdetectthelanguageofthegiventextbody missingdependency guess-language' log error u' Pleaseinstallitfrom Py PI bydoingeg pipinstallguess-language' return UNDETERMINED
def parse selections dpkgselection ret {}if isinstance dpkgselection six string types dpkgselection dpkgselection split '\n' for line in dpkgselection if line pkg state line split if state in ret ret[ state] append pkg else ret[ state] [ pkg]return ret
def pretty depth cv depth import cvdepth pretty depth depth image cv Create Image Header depth shape[ 1 ] depth shape[ 0 ] cv IPL DEPTH 8U 1 cv Set Data image depth tostring depth dtype itemsize * depth shape[ 1 ] return image
def pretty depth cv depth import cvdepth pretty depth depth image cv Create Image Header depth shape[ 1 ] depth shape[ 0 ] cv IPL DEPTH 8U 1 cv Set Data image depth tostring depth dtype itemsize * depth shape[ 1 ] return image
def test find number 6 s 'query 1 e 5 notfound'r find number s assert s[r[ 0 ] r[ 1 ]] '1 e 5 '
def get Overhang Angle element Node return get Cascade Float Without Self 45 0 element Node 'overhang Angle'
def get occupied streams realm subs filter Subscription objects filter active True user profile realm realm user profile is active True values 'recipient id' stream ids Recipient objects filter type Recipient STREAM id in subs filter values 'type id' return Stream objects filter id in stream ids realm realm deactivated False
def evennia version version ' Unknown'try import evenniaversion evennia version except Import Error passtry rev check output 'gitrev-parse--short HEAD' shell True cwd EVENNIA ROOT stderr STDOUT strip version '%s rev%s ' % version rev except IO Error Called Process Error passreturn version
def legacy mapping block device mapping legacy block device mapping []for bdm in block device mapping try legacy block device Block Device Dict bdm legacy except exception Invalid BDM For Legacy continuelegacy block device mapping append legacy block device for i dev in enumerate dev for dev in legacy block device mapping if dev['virtual name'] and is ephemeral dev['virtual name'] dev['virtual name'] dev['virtual name'][ -1 ] + str i return legacy block device mapping
def debug brule file None if not file from sys import stdoutfile stdoutdef write brl expr result file write ' Rule %s\n' % get function name brl file write ' In %s\n Out %s\n\n' % expr result return onaction brule write
def debug brule file None if not file from sys import stdoutfile stdoutdef write brl expr result file write ' Rule %s\n' % get function name brl file write ' In %s\n Out %s\n\n' % expr result return onaction brule write
def run *args **kwargs puppet Puppet buildargs for arg in range len args if args[arg] in ['agent' 'apply'] puppet subcmd args[arg]else buildargs + args[arg] puppet arguments buildargs puppet kwargs update salt utils clean kwargs **kwargs ret salt ['cmd run all'] repr puppet python shell puppet useshell if ret['retcode'] in [0 2] ret['retcode'] 0else ret['retcode'] 1return ret
def test missing keyword argument value try can compile u' fn[x]x x ' except Hy Type Error as e assert e message u' Keywordargument xneedsavalue ' else assert False
def absent profile 'pagerduty' subdomain None api key None **kwargs r salt ['pagerduty util resource absent'] 'schedules' ['name' 'id'] profile subdomain api key **kwargs return r
@pytest mark parametrize 'parallel' [ True False] def test conversion parallel read basic text '\n ABCDE\n 1 a 345 \n 2 1910 - 5 3e 4 \n 42 - 12 4six\n'table read basic text parallel parallel assert equal table['A'] dtype kind 'f' assert table['B'] dtype kind in 'S' 'U' assert equal table['C'] dtype kind 'i' assert equal table['D'] dtype kind 'f' assert table['E'] dtype kind in 'S' 'U'
def run server application port sock eventlet listen '0 0 0 0' port eventlet wsgi server sock application
def run server application port sock eventlet listen '0 0 0 0' port eventlet wsgi server sock application
def set range metadata builder load lower bound upper bound range operands [ Constant int load type lower bound Constant int load type upper bound ]md builder module add metadata range operands load set metadata 'range' md
def set range metadata builder load lower bound upper bound range operands [ Constant int load type lower bound Constant int load type upper bound ]md builder module add metadata range operands load set metadata 'range' md
def split ranges mask ranges [ 0 len mask ]for pos val in enumerate mask if not val r ranges pop if pos > r[ 0 ] yield r[ 0 ] pos if pos + 1 < len mask ranges append pos + 1 len mask if ranges yield ranges[ -1 ]
def split ranges mask ranges [ 0 len mask ]for pos val in enumerate mask if not val r ranges pop if pos > r[ 0 ] yield r[ 0 ] pos if pos + 1 < len mask ranges append pos + 1 len mask if ranges yield ranges[ -1 ]
def delete rpm probes probes return salt ['probes delete probes'] ordered dict to dict probes commit False
def call lights *args **kwargs res dict lights get lights for dev id in 'id' in kwargs and get devices kwargs or sorted lights keys if lights get str dev id res[dev id] lights[str dev id ]return res or False
def get items arg items []for count bookmark in enumerate get results arg items append alp Item title bookmark title subtitle bookmark path arg bookmark path icon ' Clone Repo Icon png' return items
def combined levels dimensions default only False groups []for dim in dimensions if default only levels dim hierarchy levelselse levels dim levelsgroup [ str dim str level for level in levels]groups append group return tuple itertools product *groups
def python console namespace None if namespace is None import inspectframe inspect currentframe caller frame f backif not caller logging error "can'tfindcallerwhostartthisconsole " caller framenamespace dict caller f globals namespace update caller f locals return get python console namespace namespace interact
def set input value page css value input element page q css css results[ 0 ]input element click input element send keys Keys CONTROL + 'a' input element send keys value return input element
def do prim curr rr coils pc np empty len rr * 3 len coils for ci c in enumerate coils pc[ ci] np sum c['w'] * bem inf fields rr c['rmag'] c['cosmag'] 2 ravel return pc
def do prim curr rr coils pc np empty len rr * 3 len coils for ci c in enumerate coils pc[ ci] np sum c['w'] * bem inf fields rr c['rmag'] c['cosmag'] 2 ravel return pc
def normalize headers response headers strict True category {}for idx in range len response headers key val response headers[idx]head get header key strict if not head newhead '-' join [x capitalize for x in key replace ' ' '-' split '-' ] response headers[idx] newhead val category[newhead] 4continueresponse headers[idx] str head val category[str head ] head sort orderdef key func item value item[ 0 ]return category[value] value response headers sort key key func
def read bitpacked deprecated file obj byte count count width debug logging raw bytes array array ARRAY BYTE STR file obj read byte count tolist mask mask for bits width index 0res []word 0bits in word 0while len res < count and index < len raw bytes if debug logging logger debug u'index %d' index logger debug u'bitsinword %d' bits in word logger debug u'word %s' bin word if bits in word > width offset bits in word - width value word & mask << offset >> offset if debug logging logger debug u'offset %d' offset logger debug u'value %d %s ' value bin value res append value bits in word - widthelse word word << 8 raw bytes[index] index + 1bits in word + 8return res
@memoizeddef smart fill file var name file name extension guess extension var name file name file content file name get file from template extension return Named String IO file content name file name
def ckan before request app globals app globals check uptodate identify user
def write Fasta from name seq pairs name seqs fh if fh is None raise Value Error ' Needopenfilehandletowriteto ' for name seq in name seqs fh write '%s\n' % Biological Sequence seq id name to fasta
def test Using Psycho Py Monitor Config io launch Hub Server psychopy monitor name 'test Monitor' display io devices displayprint ' Display Psychopy Monitor Name ' display get Psychopy Monitor Name print ' Display Default Eye Distance ' display get Default Eye Distance print ' Display Physical Dimensions ' display get Physical Dimensions io quit
def test Using Psycho Py Monitor Config io launch Hub Server psychopy monitor name 'test Monitor' display io devices displayprint ' Display Psychopy Monitor Name ' display get Psychopy Monitor Name print ' Display Default Eye Distance ' display get Default Eye Distance print ' Display Physical Dimensions ' display get Physical Dimensions io quit
def harvest lettuces only the apps None avoid apps None path 'features' apps get apps if isinstance only the apps list tuple and any only the apps def filter only specified module return module name in only the apps apps filter filter only specified apps else apps filter filter bultins apps apps filter filter configured apps apps apps filter filter configured avoids apps if isinstance avoid apps list tuple and any avoid apps def filter avoid module return module name not in avoid apps apps filter filter avoid apps joinpath lambda app join dirname app file path app return map joinpath apps
def restore file ownership path os path join os path expanduser '~/' ' w3 af' if not os path exists path return Falsetry uid int os getenv 'SUDO UID' gid int os getenv 'SUDO GID' except Value Error return Falsetry chown path uid gid except return Falsereturn True
def make interp full matr x y t k assert x size y size assert t size x size + k + 1 n x size A np zeros n n dtype np float for j in range n xval x[j]if xval t[k] left kelse left np searchsorted t xval - 1 bb bspl evaluate all bspl t k xval left A[j left - k left + 1 ] bbc sl solve A y return c
def make interp full matr x y t k assert x size y size assert t size x size + k + 1 n x size A np zeros n n dtype np float for j in range n xval x[j]if xval t[k] left kelse left np searchsorted t xval - 1 bb bspl evaluate all bspl t k xval left A[j left - k left + 1 ] bbc sl solve A y return c
def add html component page menu index boilerplate None page wait for component menu click css page 'button>span large-html-icon' menu index require notification False page wait for element visibility ' new-component-html' 'HTM Lcomponentmenuisvisible' component css 'button[data-category html]'if boilerplate component css + '[data-boilerplate {}]' format boilerplate else component css + ' not [data-boilerplate] 'page wait for element visibility component css 'HTM Lcomponent{}isvisible' format boilerplate click css page component css 0
@hook on startdef load key bot global dev keydev key bot config get 'api keys' {} get 'google dev key' None
def get project groups roles request project groups roles collections defaultdict list project role assignments role assignments list request project project for role assignment in project role assignments if not hasattr role assignment 'group' continuegroup id role assignment group['id']role id role assignment role['id']if 'project' in role assignment scope and role assignment scope['project']['id'] project groups roles[group id] append role id return groups roles
def cleanup tmpdir tmpdir None keep so False tmpdir tmpdir or caller dir pycache try filelist os listdir tmpdir except OS Error returnif keep so suffix ' c'else suffix get so suffixes [0 ] lower for fn in filelist if fn lower startswith ' cffi ' and fn lower endswith suffix or fn lower endswith ' c' try os unlink os path join tmpdir fn except OS Error passclean dir [os path join tmpdir 'build' ]for dir in clean dir try for fn in os listdir dir fn os path join dir fn if os path isdir fn clean dir append fn else os unlink fn except OS Error pass
def load Experiment Description Script From Dir experiment Dir description Script Path os path join experiment Dir 'description py' module load Description File description Script Path return module
@register simple tag takes context True def zinnia loop template context default template matching context object get context first matching object context ['category' 'tag' 'author' 'pattern' 'year' 'month' 'week' 'day'] context positions get context loop positions context templates loop template list context positions context object matching default template ENTRY LOOP TEMPLATES return select template templates
def load passphrase from file vf path os path expanduser kVF Passphrase File assert os access vf path os F OK and os access vf path os R OK '%smustexistandbereadable' % vf path with open vf path as f user data f read return user data strip '\n'
def total seconds td return td microseconds + td seconds + td days * 24 * 3600 * 10 ** 6 / 10 ** 6
def add to date date years 0 months 0 days 0 hours 0 as string False as datetime False from dateutil relativedelta import relativedeltaif date None date now datetime if hours as datetime Trueif isinstance date basestring as string Trueif u'' in date as datetime Truedate parser parse date date date + relativedelta years years months months days days hours hours if as string if as datetime return date strftime DATETIME FORMAT else return date strftime DATE FORMAT else return date
def send claim registered email claimer unclaimed user node throttle 24 * 3600 unclaimed record unclaimed user get unclaimed record node primary key timestamp unclaimed record get 'last sent' if not throttle period expired timestamp throttle raise HTTP Error http BAD REQUEST data dict message long ' Useraccountcanonlybeclaimedwithanexistinguseronceevery 24 hours' verification key generate verification key verification type 'claim' unclaimed record['token'] verification key['token']unclaimed record['expires'] verification key['expires']unclaimed record['claimer email'] claimer usernameunclaimed user save referrer User load unclaimed record['referrer id'] claim url web url for 'claim user registered' uid unclaimed user primary key pid node primary key token unclaimed record['token'] external True mails send mail referrer username mails FORWARD INVITE REGISTERED user unclaimed user referrer referrer node node claim url claim url fullname unclaimed record['name'] unclaimed record['last sent'] get timestamp unclaimed user save mails send mail claimer username mails PENDING VERIFICATION REGISTERED fullname claimer fullname referrer referrer node node
def send claim registered email claimer unclaimed user node throttle 24 * 3600 unclaimed record unclaimed user get unclaimed record node primary key timestamp unclaimed record get 'last sent' if not throttle period expired timestamp throttle raise HTTP Error http BAD REQUEST data dict message long ' Useraccountcanonlybeclaimedwithanexistinguseronceevery 24 hours' verification key generate verification key verification type 'claim' unclaimed record['token'] verification key['token']unclaimed record['expires'] verification key['expires']unclaimed record['claimer email'] claimer usernameunclaimed user save referrer User load unclaimed record['referrer id'] claim url web url for 'claim user registered' uid unclaimed user primary key pid node primary key token unclaimed record['token'] external True mails send mail referrer username mails FORWARD INVITE REGISTERED user unclaimed user referrer referrer node node claim url claim url fullname unclaimed record['name'] unclaimed record['last sent'] get timestamp unclaimed user save mails send mail claimer username mails PENDING VERIFICATION REGISTERED fullname claimer fullname referrer referrer node node
def assoc d key value factory dict d2 factory d2 [key] valuereturn merge d d2 factory factory
def parse extra info info if not info return infofinfos info split ' ' data for files {}for finfo in finfos items finfo split '{' if len items 1 fname fake sff nameinfo items[ 0 ]else fname items[ 0 ]info items[ 1 ]info info replace '}' '' data {}for item in info split ' ' key value item strip split ' ' key key strip value value strip data[key] valuedata for files[fname] datareturn data for files
def get vnics host reference return host reference config network vnic
def decorator caller func None if func is None @functools wraps caller def decorator f *args **opts @functools wraps f def caller *args **opts return caller f *args **opts return caller decorator func callerreturn decoratorelse @functools wraps func def decorated *args **opts return caller func *args **opts decorated func funcreturn decorated
def decorator caller func None if func is None @functools wraps caller def decorator f *args **opts @functools wraps f def caller *args **opts return caller f *args **opts return caller decorator func callerreturn decoratorelse @functools wraps func def decorated *args **opts return caller func *args **opts decorated func funcreturn decorated
def decorator caller func None if func is None @functools wraps caller def decorator f *args **opts @functools wraps f def caller *args **opts return caller f *args **opts return caller decorator func callerreturn decoratorelse @functools wraps func def decorated *args **opts return caller func *args **opts decorated func funcreturn decorated
def create dock title parent stretch True dock Qt Widgets Q Dock Widget parent dock set Window Title title dock set Object Name title titlebar Dock Title Bar Widget dock title stretch stretch dock set Title Bar Widget titlebar dock set Auto Fill Background True if hasattr parent u'dockwidgets' parent dockwidgets append dock return dock
def buggy mkl svd function @wraps function def dec *args **kwargs try return function *args **kwargs except np linalg Lin Alg Error as exp if 'SV Ddidnotconverge' in str exp from nose plugins skip import Skip Testmsg ' Intel MKLSV Dconvergenceerrordetected skippingtest'warn msg raise Skip Test msg raisereturn dec
def load Mime Types mimetype locations ['/etc/mime types'] import mimetypescontent Types mimetypes types mapcontent Types update {' conf' 'text/plain' ' diff' 'text/plain' ' exe' 'application/x-executable' ' flac' 'audio/x-flac' ' java' 'text/plain' ' ogg' 'application/ogg' ' oz' 'text/x-oz' ' swf' 'application/x-shockwave-flash' ' tgz' 'application/x-gtar' ' wml' 'text/vnd wap wml' ' xul' 'application/vnd mozilla xul+xml' ' py' 'text/plain' ' patch' 'text/plain'} for location in mimetype locations if os path exists location more mimetypes read mime types location if more is not None content Types update more return content Types
def load Mime Types mimetype locations ['/etc/mime types'] import mimetypescontent Types mimetypes types mapcontent Types update {' conf' 'text/plain' ' diff' 'text/plain' ' exe' 'application/x-executable' ' flac' 'audio/x-flac' ' java' 'text/plain' ' ogg' 'application/ogg' ' oz' 'text/x-oz' ' swf' 'application/x-shockwave-flash' ' tgz' 'application/x-gtar' ' wml' 'text/vnd wap wml' ' xul' 'application/vnd mozilla xul+xml' ' py' 'text/plain' ' patch' 'text/plain'} for location in mimetype locations if os path exists location more mimetypes read mime types location if more is not None content Types update more return content Types
def write flv header stream metadata stream write 'FLV\x 01 ' stream write '\x 05 ' stream write '\x 00 \x 00 \x 00 DCTB ' stream write '\x 00 \x 00 \x 00 \x 00 ' stream write '\x 12 ' stream write struct pack u' L' len metadata [1 ] stream write '\x 00 \x 00 \x 00 \x 00 \x 00 \x 00 \x 00 ' stream write metadata stream write '\x 00 \x 00 \x 01 s'
def heatmap data vmin None vmax None cmap None center None robust False annot None fmt ' 2g' annot kws None linewidths 0 linecolor 'white' cbar True cbar kws None cbar ax None square False ax None xticklabels True yticklabels True mask None **kwargs plotter Heat Mapper data vmin vmax cmap center robust annot fmt annot kws cbar cbar kws xticklabels yticklabels mask kwargs['linewidths'] linewidthskwargs['edgecolor'] linecolorif ax is None ax plt gca if square ax set aspect 'equal' plotter plot ax cbar ax kwargs return ax
def get Paths By Lists vertex Lists vector 3 Lists get Vector 3 Lists Recursively vertex Lists paths []add To Paths Recursively paths vector 3 Lists return paths
def approx fprime cs x f epsilon None args kwargs {} n len x epsilon get epsilon x 1 epsilon n increments np identity n * 1j * epsilon partials [ f x + ih *args **kwargs imag / epsilon[i] for i ih in enumerate increments ]return np array partials T
def approx fprime cs x f epsilon None args kwargs {} n len x epsilon get epsilon x 1 epsilon n increments np identity n * 1j * epsilon partials [ f x + ih *args **kwargs imag / epsilon[i] for i ih in enumerate increments ]return np array partials T
def approx fprime cs x f epsilon None args kwargs {} n len x epsilon get epsilon x 1 epsilon n increments np identity n * 1j * epsilon partials [ f x + ih *args **kwargs imag / epsilon[i] for i ih in enumerate increments ]return np array partials T
def all sequential open distrib request course id data {}course key Slash Separated Course Key from deprecated string course id if has instructor access for class request user course key try data dashboard data get d3 sequential open distrib course key except Exception as ex log error ' Generatingmetricsfailedwithexception %s' ex data {'error' 'error'}else data {'error' " Access Denied Userdoesnothaveaccesstothiscourse'sdata"}return Http Response json dumps data content type 'application/json'
def expand config config defaults defaults update config return defaults
def for type typ func oldfunc type pprinters get typ None if func is not None type pprinters[typ] funcreturn oldfunc
def get timestamp data position dummy 0 dummy 1 dummy 2 end position + 8 inc timestamp UNPACK TIMESTAMP data[position end] return Timestamp timestamp inc end
def get colors palette funcs palettes import required 'bokeh palettes' BOKEH MISSING MSG tz import required 'toolz' TOOLZ MISSING MSG unique funcs list sorted tz unique funcs n funcs len unique funcs palette lookup palettes all palettes[palette]keys list sorted palette lookup keys index keys[min bisect left keys n funcs len keys - 1 ]palette palette lookup[index]palette list tz unique palette if len palette > n funcs random Random 42 shuffle palette color lookup dict zip unique funcs cycle palette return [color lookup[n] for n in funcs]
def set chassis name name host None admin username None admin password None return execute cmd 'setsysinfo-cchassisname{ 0 }' format name host host admin username admin username admin password admin password
def get Time Since Last Update IO Type global last update timescurrent time time last time last update times get IO Type if not last time time since update 1else time since update current time - last time last update times[IO Type] current timereturn time since update
def serialize item collection item if item name is None or item name '' raise exceptions Runtime Error 'nameunsetforitem ' if collection collection type in ['mgmtclass'] filename '/var/lib/cobbler/collections/%ses/%s' % collection collection type item name else filename '/var/lib/cobbler/collections/%ss/%s' % collection collection type item name dict item to dict if capi Cobbler API settings serializer pretty json sort keys Trueindent 4else sort keys Falseindent Nonefilename + ' json' dict item to dict fd open filename 'w+' data simplejson dumps dict encoding 'utf- 8 ' sort keys sort keys indent indent fd write data fd close
def nopackages pkg list pkg list [pkg for pkg in pkg list if is installed pkg ]if pkg list uninstall pkg list
def test String tests [ '%s<%s>' % name func doc for name func in test Dict iteritems ]return 'validtests %s' % ' ' join tests
def test doc obj compiled Compiled Object evaluator '' getnewargs assert obj doc ''
def test doc obj compiled Compiled Object evaluator '' getnewargs assert obj doc ''
def ssl wrap socket sock keyfile None certfile None cert reqs None ca certs None server hostname None ssl version None ciphers None ssl context None context ssl contextif context is None context create urllib 3 context ssl version cert reqs ciphers ciphers if ca certs try context load verify locations ca certs except IO Error as e raise SSL Error e except OS Error as e if e errno errno ENOENT raise SSL Error e raiseif certfile context load cert chain certfile keyfile if HAS SNI return context wrap socket sock server hostname server hostname return context wrap socket sock
def ssl wrap socket sock keyfile None certfile None cert reqs None ca certs None server hostname None ssl version None ciphers None ssl context None context ssl contextif context is None context create urllib 3 context ssl version cert reqs ciphers ciphers if ca certs try context load verify locations ca certs except IO Error as e raise SSL Error e except OS Error as e if e errno errno ENOENT raise SSL Error e raiseif certfile context load cert chain certfile keyfile if HAS SNI return context wrap socket sock server hostname server hostname return context wrap socket sock
def configure logging config format config get 'log format' '% name s% levelname s% asctime s% message s' level logging level Names[config get 'log level' 'DEBUG' ]destination config get 'log destination' 'stdout' log info " Loggingat'%s'levelto'%s'" % level destination root logging get Logger root set Level level if level < logging DEBUG logging get Logger 'paste httpserver Thread Pool' set Level logging WARN for h in root handlers[ ] root remove Handler h if destination 'stdout' handler logging Stream Handler sys stdout else handler logging File Handler destination formatter logging Formatter format handler set Formatter formatter root add Handler handler
def configure logging config format config get 'log format' '% name s% levelname s% asctime s% message s' level logging level Names[config get 'log level' 'DEBUG' ]destination config get 'log destination' 'stdout' log info " Loggingat'%s'levelto'%s'" % level destination root logging get Logger root set Level level if level < logging DEBUG logging get Logger 'paste httpserver Thread Pool' set Level logging WARN for h in root handlers[ ] root remove Handler h if destination 'stdout' handler logging Stream Handler sys stdout else handler logging File Handler destination formatter logging Formatter format handler set Formatter formatter root add Handler handler
@docfillerdef maximum filter input size None footprint None output None mode 'reflect' cval 0 0 origin 0 return min or max filter input size footprint None output mode cval origin 0
def update patch log patchmodule frappe get doc {u'doctype' u' Patch Log' u'patch' patchmodule} insert
def update patch log patchmodule frappe get doc {u'doctype' u' Patch Log' u'patch' patchmodule} insert
def sle actual predicted return np power np log np array actual + 1 - np log np array predicted + 1 2
def build query rep query divider u'-' return divider join [el[ 0 ] for el in query]
def find module modlist mod addrs addr pos bisect right mod addrs addr - 1 if pos -1 return Nonemod modlist[mod addrs[pos]]if mod obj vm address compare addr mod Dll Base -1 and mod obj vm address compare addr mod Dll Base + mod Size Of Image -1 return modelse return None
@register assignment tagdef assignment two params one two return 'assignment two params- Expectedresult %s %s' % one two
def get model app label model name seed cache True if seed cache get apps try model dict app models[app label]except Key Error return Nonetry return model dict[model name lower ]except Key Error return None
def could edit request user getattr request 'user' Anonymous User return getattr user 'is superuser' False or getattr user 'is staff' False
def replace text *pairs while pairs text join split text pairs[ 0 ] pairs[ 1 ] pairs pairs[ 2 ]return text
def add keys to request request field pb key pbs for key pb in key pbs request field pb add Copy From key pb
def escape text text text replace '\\' '\\\\' text text replace '"""' '""\\"' text text replace '\n' '\\n\\\n' return text
def format datetime dt format None if is naive dt localtime make aware dt get current timezone logging warning 'oscar core utils format datetimereceivednativedatetime' else localtime dt astimezone get current timezone return date filter localtime format
def test cnn fit sample with wrong object knn 'rnd'cnn Condensed Nearest Neighbour random state RND SEED n neighbors knn assert raises Value Error cnn fit sample X Y
def print environ environ os environ keys environ keys keys sort printprint '<H 3 > Shell Environment </H 3 >'print '<DL>'for key in keys print '<DT>' escape key '<DD>' escape environ[key] print '</DL>'print
def find boundaries label img connectivity 1 mode 'thick' background 0 if label img dtype 'bool' label img label img astype np uint 8 ndim label img ndimselem ndi generate binary structure ndim connectivity if mode 'subpixel' boundaries dilation label img selem erosion label img selem if mode 'inner' foreground image label img background boundaries & foreground imageelif mode 'outer' max label np iinfo label img dtype maxbackground image label img background selem ndi generate binary structure ndim ndim inverted background np array label img copy True inverted background[background image] max labeladjacent objects dilation label img selem erosion inverted background selem & ~ background image boundaries & background image adjacent objects return boundarieselse boundaries find boundaries subpixel label img return boundaries
def find boundaries label img connectivity 1 mode 'thick' background 0 if label img dtype 'bool' label img label img astype np uint 8 ndim label img ndimselem ndi generate binary structure ndim connectivity if mode 'subpixel' boundaries dilation label img selem erosion label img selem if mode 'inner' foreground image label img background boundaries & foreground imageelif mode 'outer' max label np iinfo label img dtype maxbackground image label img background selem ndi generate binary structure ndim ndim inverted background np array label img copy True inverted background[background image] max labeladjacent objects dilation label img selem erosion inverted background selem & ~ background image boundaries & background image adjacent objects return boundarieselse boundaries find boundaries subpixel label img return boundaries
def setup hass config from zeroconf import Zeroconf Service Infozeroconf Zeroconf zeroconf name '{} {}' format hass config location name ZEROCONF TYPE requires api password hass config api api password is not None params {'version' version 'base url' hass config api base url 'requires api password' requires api password}host ip util get local ip try host ip pton socket inet pton socket AF INET host ip except socket error host ip pton socket inet pton socket AF INET 6 host ip info Service Info ZEROCONF TYPE zeroconf name host ip pton hass http server port 0 0 params zeroconf register service info def stop zeroconf event ' Stop Zeroconf 'zeroconf unregister service info zeroconf close hass bus listen once EVENT HOMEASSISTANT STOP stop zeroconf return True
def setup hass config from zeroconf import Zeroconf Service Infozeroconf Zeroconf zeroconf name '{} {}' format hass config location name ZEROCONF TYPE requires api password hass config api api password is not None params {'version' version 'base url' hass config api base url 'requires api password' requires api password}host ip util get local ip try host ip pton socket inet pton socket AF INET host ip except socket error host ip pton socket inet pton socket AF INET 6 host ip info Service Info ZEROCONF TYPE zeroconf name host ip pton hass http server port 0 0 params zeroconf register service info def stop zeroconf event ' Stop Zeroconf 'zeroconf unregister service info zeroconf close hass bus listen once EVENT HOMEASSISTANT STOP stop zeroconf return True
def make tarball base name base dir compress 'gzip' verbose 0 dry run 0 compress ext {'gzip' ' gz' 'bzip 2 ' ' bz 2 ' 'compress' ' Z'}compress flags {'gzip' ['-f 9 '] 'compress' ['-f'] 'bzip 2 ' ['-f 9 ']}if compress is not None and compress not in compress ext keys raise Value Error "badvaluefor'compress' mustbe None 'gzip' or'compress'"archive name base name + ' tar' mkpath os path dirname archive name dry run dry run cmd ['tar' '-cf' archive name base dir]spawn cmd dry run dry run if compress spawn [compress] + compress flags[compress] + [archive name] dry run dry run return archive name + compress ext[compress] else return archive name
def Ssl Wrap Only Once org sslwrap sock *args **kwargs if not isinstance sock ssl SSL Socket ctx Master get fd context sock fileno try sock org sslwrap sock *args **kwargs ctx encryption explain encryption sock except socket error IO Error as e ctx error '%s' % e raisereturn sock
def Ssl Wrap Only Once org sslwrap sock *args **kwargs if not isinstance sock ssl SSL Socket ctx Master get fd context sock fileno try sock org sslwrap sock *args **kwargs ctx encryption explain encryption sock except socket error IO Error as e ctx error '%s' % e raisereturn sock
def get image list releaseid return caa request releaseid
def cram text maxlen if len text > maxlen pre max 0 maxlen - 3 // 2 post max 0 maxlen - 3 - pre return text[ pre] + ' ' + text[ len text - post ] return text
def test incorrect case file index data req Install Requirement from line 'dinner' None finder Package Finder [] [data find links 3 ] session Pip Session link finder find requirement req False assert link url endswith ' Dinner- 2 0 tar gz'
def prefix commands command which prefixes list env command prefixes cwd env cwd if which 'remote' else env lcwd redirect '>/dev/null' if not win 32 else '' if cwd prefixes insert 0 'cd%s%s' % cwd redirect glue '&&'prefix glue join prefixes + glue if prefixes else '' return prefix + command
def test none bridge qtbot assert Q Application instance focus Widget is None for name method in inspect getmembers bridge inspect ismethod if name startswith 'rl ' method
def checksum question question timestamp challenge u'' join settings SECRET KEY question timestamp sha hashlib sha 1 challenge encode u'utf- 8 ' return sha hexdigest
def open Hub File filepath filename mode global hub Fileshub File open File os path join filepath filename mode hub Files append hub File return hub File
def open Hub File filepath filename mode global hub Fileshub File open File os path join filepath filename mode hub Files append hub File return hub File
def open Hub File filepath filename mode global hub Fileshub File open File os path join filepath filename mode hub Files append hub File return hub File
@jingo register filterdef no links string if not string return stringif hasattr string ' html ' string string html allowed tags bleach ALLOWED TAGS[ ]allowed tags remove 'a' no links bleach clean string tags allowed tags strip True return jinja 2 Markup clean nl no links strip
def filter names names sorted names sort names names code names z util interfaces I Display checklist ' Whichnameswouldyouliketoactivate HTTP Sfor?' tags sorted names cli flag '--domains' force interactive True return code [str s for s in names]
def Friendly Exception Dlg message class w3 af message dialog gtk Message Dialog def dialog response cb self widget response id '\nhttp //faq pygtk org/index py?req show&file faq 10 017 htp\n'self destroy def dialog run self '\nhttp //faq pygtk org/index py?req show&file faq 10 017 htp\n'if not self modal self set modal True self connect 'response' self dialog response cb self show dlg w3 af message dialog None gtk DIALOG MODAL gtk MESSAGE WARNING gtk BUTTONS OK message dlg set icon from file W3 AF ICON dlg set title ' Error' dlg dialog run return
def Friendly Exception Dlg message class w3 af message dialog gtk Message Dialog def dialog response cb self widget response id '\nhttp //faq pygtk org/index py?req show&file faq 10 017 htp\n'self destroy def dialog run self '\nhttp //faq pygtk org/index py?req show&file faq 10 017 htp\n'if not self modal self set modal True self connect 'response' self dialog response cb self show dlg w3 af message dialog None gtk DIALOG MODAL gtk MESSAGE WARNING gtk BUTTONS OK message dlg set icon from file W3 AF ICON dlg set title ' Error' dlg dialog run return
def upgrade migrate engine meta Meta Data meta bind migrate engineworkers Table 'workers' meta autoload True race preventer Column 'race preventer' Integer nullable False default 0 server default text '0 ' race preventer create workers populate default True
def curve 4 bezier p1 p2 p3 p4 x1 y1 p1 x2 y2 p2 x3 y3 p3 x4 y4 p4 points [] curve 4 recursive bezier points x1 y1 x2 y2 x3 y3 x4 y4 dx dy points[ 0 ][ 0 ] - x1 points[ 0 ][ 1 ] - y1 if dx * dx + dy * dy > 1e- 10 points insert 0 x1 y1 dx dy points[ -1 ][ 0 ] - x4 points[ -1 ][ 1 ] - y4 if dx * dx + dy * dy > 1e- 10 points append x4 y4 return np array points reshape len points 2
def mmodule saltenv fun *args **kwargs mminion M Minion saltenv return mminion functions[fun] *args **kwargs
def remove package package dst path os path join package where package name run scripts path scripts ['prerm'] shutil rmtree os path join path 'data/' shutil rmtree os path join path 'docs/' run scripts os path join dst package name scripts ['postrm'] shutil rmtree os path join path 'scripts/' shutil rmtree path update installed list 'r' package
def scan ret []devices bluetooth discover devices lookup names True for device in devices ret append {device[ 0 ] device[ 1 ]} return ret
def scan ret []devices bluetooth discover devices lookup names True for device in devices ret append {device[ 0 ] device[ 1 ]} return ret
def get raising file and line tb None if not tb tb sys exc info [2 ] filename lineno context line traceback extract tb tb [ -1 ]return filename lineno
def get raising file and line tb None if not tb tb sys exc info [2 ] filename lineno context line traceback extract tb tb [ -1 ]return filename lineno
def write hostnames save path hostnames ips file path dir find save path hostnames ip file os path join file path 'openstack hostnames ips yml' with open hostnames ip file 'wb' as f f write json dumps hostnames ips indent 4 sort keys True
def decode table encoded offset result {}tablesize struct unpack from '>I' encoded offset [0 ]offset + 4limit offset + tablesize while offset < limit key offset decode short string encoded offset value offset decode value encoded offset result[key] valuereturn result offset
def decode table encoded offset result {}tablesize struct unpack from '>I' encoded offset [0 ]offset + 4limit offset + tablesize while offset < limit key offset decode short string encoded offset value offset decode value encoded offset result[key] valuereturn result offset
def decode table encoded offset result {}tablesize struct unpack from '>I' encoded offset [0 ]offset + 4limit offset + tablesize while offset < limit key offset decode short string encoded offset value offset decode value encoded offset result[key] valuereturn result offset
def prepare private key if request method 'GET' returnif request args get 'view only' '' returnif request referrer referrer parsed urlparse urlparse request referrer scheme referrer parsed schemekey urlparse parse qs urlparse urlparse request referrer query get 'view only' if key key key[ 0 ]else scheme Nonekey Noneif key and not session is authenticated new url add key to url request url scheme key return redirect new url code http TEMPORARY REDIRECT
def prepare private key if request method 'GET' returnif request args get 'view only' '' returnif request referrer referrer parsed urlparse urlparse request referrer scheme referrer parsed schemekey urlparse parse qs urlparse urlparse request referrer query get 'view only' if key key key[ 0 ]else scheme Nonekey Noneif key and not session is authenticated new url add key to url request url scheme key return redirect new url code http TEMPORARY REDIRECT
def execute on completion application config callback def inner environ start response try result application environ start response except callback environ raisereturn generate close and callback result callback environ return inner
def Validate Combined Source References String source refs if len source refs > SOURCE REFERENCES MAX SIZE raise validation Validation Error ' Totalsourcereference s sizeexceedsthelimit %d>%d' % len source refs SOURCE REFERENCES MAX SIZE for ref in source refs splitlines Validate Source Reference ref strip
def Validate Combined Source References String source refs if len source refs > SOURCE REFERENCES MAX SIZE raise validation Validation Error ' Totalsourcereference s sizeexceedsthelimit %d>%d' % len source refs SOURCE REFERENCES MAX SIZE for ref in source refs splitlines Validate Source Reference ref strip
def run network filename n eta random seed 12345678 np random seed 12345678 training data validation data test data mnist loader load data wrapper net network 2 Network [784 n 10 ] cost network 2 Cross Entropy Cost print ' Trainthenetworkusingthedefaultstartingweights ' default vc default va default tc default ta net SGD training data 30 10 eta lmbda 5 0 evaluation data validation data monitor evaluation accuracy True print ' Trainthenetworkusingthelargestartingweights 'net large weight initializer large vc large va large tc large ta net SGD training data 30 10 eta lmbda 5 0 evaluation data validation data monitor evaluation accuracy True f open filename 'w' json dump {'default weight initialization' [default vc default va default tc default ta] 'large weight initialization' [large vc large va large tc large ta]} f f close
def KAMA ds count timeperiod - 2 ** 31 return call talib with ds ds count talib KAMA timeperiod
def remove ignorable whitespace node if node tail and node tail strip '' node tail Nonefor child in node if node text and node text strip '' node text Noneremove ignorable whitespace child
def remove ignorable whitespace node if node tail and node tail strip '' node tail Nonefor child in node if node text and node text strip '' node text Noneremove ignorable whitespace child
def do hypervisor stats cs args stats cs hypervisor stats statistics utils print dict stats to dict
def read element float stream size if size 4 return unpack '>f' read stream 4 [0 ]elif size 8 return unpack '>d' read stream 8 [0 ]else raise Size Error size
def reset global COURSES COURSES []global ENROLLMENTS ENROLLMENTS []global VERIFIED MODE EXPIRED VERIFIED MODE EXPIRED []
def reset global COURSES COURSES []global ENROLLMENTS ENROLLMENTS []global VERIFIED MODE EXPIRED VERIFIED MODE EXPIRED []
def adjust log image gain 1 inv False assert non negative image dtype image dtype typescale float dtype limits image True [1 ] - dtype limits image True [0 ] if inv out 2 ** image / scale - 1 * scale * gain return dtype out out np log 2 1 + image / scale * scale * gain return dtype out
def hstack tables join type u'outer' uniq col name u'{col name} {table name}' table names None metadata conflicts u'warn' tables get list of tables tables if len tables 1 return tables[ 0 ]col name map Ordered Dict out hstack tables join type uniq col name table names col name map merge col meta out tables col name map metadata conflicts metadata conflicts merge table meta out tables metadata conflicts metadata conflicts return out
def test jd 2 jcal import randomn 1000 year [random randint -4699 2200 for i in range n ]month [random randint 1 12 for i in range n ]day [random randint 1 28 for i in range n ]jd [jcal 2 jd y m d [1 ] for y m d in zip year month day ]x [jd 2 gcal MJD 0 i for i in jd]for i in range n assert x[i][ 0 ] year[i] assert x[i][ 1 ] month[i] assert x[i][ 2 ] day[i] assert x[i][ 3 ] < 1e- 15
def assert deb headers test case expected headers package path output check output ['dpkg' '--info' package path path] actual headers parse colon dict output assert dict contains test case expected headers actual headers ' Missingdpkg Headers '
def test slicing on instance with parameterless model p2 Polynomial 2 D 1 c0 0 1 c1 0 2 c0 1 3 p1 Polynomial 2 D 1 c0 0 1 c1 0 2 c0 1 3 mapping Mapping 0 1 0 1 offx Shift -2 name u'x translation' offy Shift -1 name u'y translation' aff Affine Transformation 2 D matrix [[ 1 2] [3 4]] name u'rotation' model mapping p1 & p2 offx & offy aff assert model param names u'c 0 0 1' u'c 1 0 1' u'c 0 1 1' u'c 0 0 2' u'c 1 0 2' u'c 0 1 2' u'offset 3' u'offset 4' u'matrix 5' u'translation 5' assert model 1 2 23 0 53 0 m model[ 3 ]assert m param names u'offset 3' u'offset 4' u'matrix 5' u'translation 5' assert m 1 2 1 0 1 0
def test slicing on instance with parameterless model p2 Polynomial 2 D 1 c0 0 1 c1 0 2 c0 1 3 p1 Polynomial 2 D 1 c0 0 1 c1 0 2 c0 1 3 mapping Mapping 0 1 0 1 offx Shift -2 name u'x translation' offy Shift -1 name u'y translation' aff Affine Transformation 2 D matrix [[ 1 2] [3 4]] name u'rotation' model mapping p1 & p2 offx & offy aff assert model param names u'c 0 0 1' u'c 1 0 1' u'c 0 1 1' u'c 0 0 2' u'c 1 0 2' u'c 0 1 2' u'offset 3' u'offset 4' u'matrix 5' u'translation 5' assert model 1 2 23 0 53 0 m model[ 3 ]assert m param names u'offset 3' u'offset 4' u'matrix 5' u'translation 5' assert m 1 2 1 0 1 0
def test slicing on instance with parameterless model p2 Polynomial 2 D 1 c0 0 1 c1 0 2 c0 1 3 p1 Polynomial 2 D 1 c0 0 1 c1 0 2 c0 1 3 mapping Mapping 0 1 0 1 offx Shift -2 name u'x translation' offy Shift -1 name u'y translation' aff Affine Transformation 2 D matrix [[ 1 2] [3 4]] name u'rotation' model mapping p1 & p2 offx & offy aff assert model param names u'c 0 0 1' u'c 1 0 1' u'c 0 1 1' u'c 0 0 2' u'c 1 0 2' u'c 0 1 2' u'offset 3' u'offset 4' u'matrix 5' u'translation 5' assert model 1 2 23 0 53 0 m model[ 3 ]assert m param names u'offset 3' u'offset 4' u'matrix 5' u'translation 5' assert m 1 2 1 0 1 0
def test slicing on instance with parameterless model p2 Polynomial 2 D 1 c0 0 1 c1 0 2 c0 1 3 p1 Polynomial 2 D 1 c0 0 1 c1 0 2 c0 1 3 mapping Mapping 0 1 0 1 offx Shift -2 name u'x translation' offy Shift -1 name u'y translation' aff Affine Transformation 2 D matrix [[ 1 2] [3 4]] name u'rotation' model mapping p1 & p2 offx & offy aff assert model param names u'c 0 0 1' u'c 1 0 1' u'c 0 1 1' u'c 0 0 2' u'c 1 0 2' u'c 0 1 2' u'offset 3' u'offset 4' u'matrix 5' u'translation 5' assert model 1 2 23 0 53 0 m model[ 3 ]assert m param names u'offset 3' u'offset 4' u'matrix 5' u'translation 5' assert m 1 2 1 0 1 0
def test slicing on instance with parameterless model p2 Polynomial 2 D 1 c0 0 1 c1 0 2 c0 1 3 p1 Polynomial 2 D 1 c0 0 1 c1 0 2 c0 1 3 mapping Mapping 0 1 0 1 offx Shift -2 name u'x translation' offy Shift -1 name u'y translation' aff Affine Transformation 2 D matrix [[ 1 2] [3 4]] name u'rotation' model mapping p1 & p2 offx & offy aff assert model param names u'c 0 0 1' u'c 1 0 1' u'c 0 1 1' u'c 0 0 2' u'c 1 0 2' u'c 0 1 2' u'offset 3' u'offset 4' u'matrix 5' u'translation 5' assert model 1 2 23 0 53 0 m model[ 3 ]assert m param names u'offset 3' u'offset 4' u'matrix 5' u'translation 5' assert m 1 2 1 0 1 0
def test slicing on instance with parameterless model p2 Polynomial 2 D 1 c0 0 1 c1 0 2 c0 1 3 p1 Polynomial 2 D 1 c0 0 1 c1 0 2 c0 1 3 mapping Mapping 0 1 0 1 offx Shift -2 name u'x translation' offy Shift -1 name u'y translation' aff Affine Transformation 2 D matrix [[ 1 2] [3 4]] name u'rotation' model mapping p1 & p2 offx & offy aff assert model param names u'c 0 0 1' u'c 1 0 1' u'c 0 1 1' u'c 0 0 2' u'c 1 0 2' u'c 0 1 2' u'offset 3' u'offset 4' u'matrix 5' u'translation 5' assert model 1 2 23 0 53 0 m model[ 3 ]assert m param names u'offset 3' u'offset 4' u'matrix 5' u'translation 5' assert m 1 2 1 0 1 0
def test slicing on instance with parameterless model p2 Polynomial 2 D 1 c0 0 1 c1 0 2 c0 1 3 p1 Polynomial 2 D 1 c0 0 1 c1 0 2 c0 1 3 mapping Mapping 0 1 0 1 offx Shift -2 name u'x translation' offy Shift -1 name u'y translation' aff Affine Transformation 2 D matrix [[ 1 2] [3 4]] name u'rotation' model mapping p1 & p2 offx & offy aff assert model param names u'c 0 0 1' u'c 1 0 1' u'c 0 1 1' u'c 0 0 2' u'c 1 0 2' u'c 0 1 2' u'offset 3' u'offset 4' u'matrix 5' u'translation 5' assert model 1 2 23 0 53 0 m model[ 3 ]assert m param names u'offset 3' u'offset 4' u'matrix 5' u'translation 5' assert m 1 2 1 0 1 0
def test slicing on instance with parameterless model p2 Polynomial 2 D 1 c0 0 1 c1 0 2 c0 1 3 p1 Polynomial 2 D 1 c0 0 1 c1 0 2 c0 1 3 mapping Mapping 0 1 0 1 offx Shift -2 name u'x translation' offy Shift -1 name u'y translation' aff Affine Transformation 2 D matrix [[ 1 2] [3 4]] name u'rotation' model mapping p1 & p2 offx & offy aff assert model param names u'c 0 0 1' u'c 1 0 1' u'c 0 1 1' u'c 0 0 2' u'c 1 0 2' u'c 0 1 2' u'offset 3' u'offset 4' u'matrix 5' u'translation 5' assert model 1 2 23 0 53 0 m model[ 3 ]assert m param names u'offset 3' u'offset 4' u'matrix 5' u'translation 5' assert m 1 2 1 0 1 0
def test slicing on instance with parameterless model p2 Polynomial 2 D 1 c0 0 1 c1 0 2 c0 1 3 p1 Polynomial 2 D 1 c0 0 1 c1 0 2 c0 1 3 mapping Mapping 0 1 0 1 offx Shift -2 name u'x translation' offy Shift -1 name u'y translation' aff Affine Transformation 2 D matrix [[ 1 2] [3 4]] name u'rotation' model mapping p1 & p2 offx & offy aff assert model param names u'c 0 0 1' u'c 1 0 1' u'c 0 1 1' u'c 0 0 2' u'c 1 0 2' u'c 0 1 2' u'offset 3' u'offset 4' u'matrix 5' u'translation 5' assert model 1 2 23 0 53 0 m model[ 3 ]assert m param names u'offset 3' u'offset 4' u'matrix 5' u'translation 5' assert m 1 2 1 0 1 0
def os is running pid if isinstance pid six string types pid int pid if HAS PSUTIL return psutil pid exists pid else try os kill pid 0 return Trueexcept OS Error return False
def os is running pid if isinstance pid six string types pid int pid if HAS PSUTIL return psutil pid exists pid else try os kill pid 0 return Trueexcept OS Error return False
def apply palette 256 image return image convert 'RGB' convert 'P' palette Image ADAPTIVE colors 256 dither Image NONE
def apply palette 256 image return image convert 'RGB' convert 'P' palette Image ADAPTIVE colors 256 dither Image NONE
def append filename text use sudo False partial False escape True shell False func use sudo and sudo or run if isinstance text basestring text [text]for line in text regex '^' + escape for regex line + '' if partial else '$' if exists filename use sudo use sudo and line and contains filename regex use sudo use sudo escape False shell shell continueline line replace "'" "'\\\\''" if escape else line func "echo'%s'>>%s" % line expand path filename
def test ipv 4 detect assert is ipv 4 like '1 1 1 1' is True assert is ipv 4 like '1 1 1 256 ' is True assert is ipv 4 like '- 1 1 1 1' is True assert is ipv 4 like '1 1 1 hello' is False assert is ipv 4 like 'hello' is False assert is ipv 4 like '- 1 1 1' is False assert is ipv 4 like '- 1 1 1 ' is False
def primitive root prime iter p p as int p v [ p - 1 // i for i in factorint p - 1 keys ]a 2while a < p for pw in v if pow a pw p 1 breakelse yield a a + 1
def attribute matcher kwargs def match node if 'terminal' in kwargs kwa copy kwargs copy pattern kwa copy pop 'terminal' if pattern is not None and not hasattr node 'is terminal' or node is terminal pattern return Falseelse kwa copy kwargsfor key pattern in kwa copy items if not hasattr node key return Falsetarget getattr node key if isinstance pattern basestring return isinstance target basestring and re match pattern + '$' target if isinstance pattern bool return pattern bool target if isinstance pattern int return pattern target if pattern is None return target is None raise Type Error 'invalidquerytype %s' % type pattern return Truereturn match
def get hqe percentage complete **filter data query models Host Queue Entry query objects filter data complete count query filter complete True count total count query count if total count 0 return 1return float complete count / total count
def get hqe percentage complete **filter data query models Host Queue Entry query objects filter data complete count query filter complete True count total count query count if total count 0 return 1return float complete count / total count
def get hqe percentage complete **filter data query models Host Queue Entry query objects filter data complete count query filter complete True count total count query count if total count 0 return 1return float complete count / total count
def fsplit pred objs t []f []for obj in objs if pred obj t append obj else f append obj return t f
def Get Cookie From Response response user cookie header list [h for h in response headers get list ' Set- Cookie' if h startswith 'user ' ]if not user cookie header list return Nonereturn re match 'user "? [^" ]* ' user cookie header list[ -1 ] group 1
def update datacenter cache from objects session dcs while dcs for dco in dcs objects dc ref dco objds refs []prop dict vm util propset dict dco prop Set name prop dict get 'name' vm Folder prop dict get 'vm Folder' datastore refs prop dict get 'datastore' if datastore refs datastore refs datastore refs Managed Object Referencefor ds in datastore refs ds refs append ds value else LOG debug " Datacenter%sdoesn'thaveanydatastoreassociatedwithit ignoringit" name for ds ref in ds refs DS DC MAPPING[ds ref] Dc Info ref dc ref name name vm Folder vm Folder dcs session call method vutil 'continue retrieval' dcs
def revoke privilege database privilege username **client args client client **client args client revoke privilege privilege database username return True
def test Import module name try return test Import cache[module name]except Key Error try import module name except Import Error result Falseelse result Truetest Import cache[module name] resultreturn result
def get image model from django apps import appsmodel string get image model string try return apps get model model string except Value Error raise Improperly Configured u"WAGTAILIMAGES IMAGE MODE Lmustbeoftheform'app label model name'" except Lookup Error raise Improperly Configured u"WAGTAILIMAGES IMAGE MODE Lreferstomodel'%s'thathasnotbeeninstalled" % model string
def ensure test file dir set galaxy test file dir os environ get 'GALAXY TEST FILE DIR' GALAXY TEST FILE DIR os environ['GALAXY TEST FILE DIR'] galaxy test file dirfirst test file dir galaxy test file dir split ' ' [0 ]return first test file dir
def downgrade migrate engine dialect migrate engine url get dialect if dialect is not postgresql dialect meta Meta Data bind migrate engine for table column in TABLE COLUMNS t Table table meta autoload True getattr t c column alter type String 43
def downgrade migrate engine dialect migrate engine url get dialect if dialect is not postgresql dialect meta Meta Data bind migrate engine for table column in TABLE COLUMNS t Table table meta autoload True getattr t c column alter type String 43
def group albums session def group item return item albumartist or item artist item album task Nonewhile True task yield task if task skip continuetasks []sorted items sorted task items key group for items in itertools groupby sorted items group items list items task Import Task task toppath [i path for i in items] items tasks + task handle created session tasks append Sentinel Import Task task toppath task paths task pipeline multiple tasks
def group albums session def group item return item albumartist or item artist item album task Nonewhile True task yield task if task skip continuetasks []sorted items sorted task items key group for items in itertools groupby sorted items group items list items task Import Task task toppath [i path for i in items] items tasks + task handle created session tasks append Sentinel Import Task task toppath task paths task pipeline multiple tasks
def group albums session def group item return item albumartist or item artist item album task Nonewhile True task yield task if task skip continuetasks []sorted items sorted task items key group for items in itertools groupby sorted items group items list items task Import Task task toppath [i path for i in items] items tasks + task handle created session tasks append Sentinel Import Task task toppath task paths task pipeline multiple tasks
def group albums session def group item return item albumartist or item artist item album task Nonewhile True task yield task if task skip continuetasks []sorted items sorted task items key group for items in itertools groupby sorted items group items list items task Import Task task toppath [i path for i in items] items tasks + task handle created session tasks append Sentinel Import Task task toppath task paths task pipeline multiple tasks
def unpack patches hg unbundle 10 obj remaining while remaining > 12 start end blocklen struct unpack '>lll' readexactly hg unbundle 10 obj 12 remaining - 12 if blocklen > remaining raise Exception 'unexpectedendofpatchstream' block readexactly hg unbundle 10 obj blocklen remaining - blocklen yield {'start' start 'end' end 'blocklen' blocklen 'block' block encode 'string escape' } if remaining > 0 log error ' Unexpectedendofpatchstream %sremaining' remaining raise Exception 'unexpectedendofpatchstream'
def start nick host port 6667 username None password None channels None use ssl False use sasl False char ' ' allow hosts False allow nicks False disable query True client IRC Client nick host port username password channels or [] use ssl use sasl char allow hosts allow nicks disable query client io loop start
@require contextdef group type get all context inactive False filters None marker None limit None sort keys None sort dirs None offset None list result False session get session with session begin filters filters or {} filters['context'] contextquery generate paginate query context session marker limit sort keys sort dirs filters offset models Group Types if query is None if list result return []return {}rows query all if list result result [ dict with group specs if authorized context row for row in rows]return resultresult {row['name'] dict with group specs if authorized context row for row in rows}return result
def ensure timestamp field dataset expr deltas checkpoints measure dataset expr dshape measureif TS FIELD NAME not in measure names dataset expr bz transform dataset expr **{TS FIELD NAME dataset expr[AD FIELD NAME]} deltas ad as ts deltas checkpoints ad as ts checkpoints else check datetime field TS FIELD NAME measure return dataset expr deltas checkpoints
def ensure timestamp field dataset expr deltas checkpoints measure dataset expr dshape measureif TS FIELD NAME not in measure names dataset expr bz transform dataset expr **{TS FIELD NAME dataset expr[AD FIELD NAME]} deltas ad as ts deltas checkpoints ad as ts checkpoints else check datetime field TS FIELD NAME measure return dataset expr deltas checkpoints
def clear managers for manager in proxies values manager close proxies clear
def get Password prompt ' Password ' confirm 0 force TTY 0 confirm Prompt ' Confirmpassword ' mismatch Message " Passwordsdon'tmatch " isa TTY hasattr sys stdin 'isatty' and sys stdin isatty old Nonetry if not isa TTY if force TTY try old sys stdin sys stdout sys stdin sys stdout open '/dev/tty' 'r+' except raise Runtime Error ' Cannotobtaina TTY' else password sys stdin readline if password[ -1 ] '\n' password password[ -1 ]return passwordwhile 1 try 1 getpass prompt if not confirm return try 1 try 2 getpass confirm Prompt if try 1 try 2 return try 1 else sys stderr write mismatch Message + '\n' finally if old sys stdin close sys stdin sys stdout old
@contextmanagerdef temp pipeline engine calendar sids random seed symbols None equity info make simple equity info sids sids start date calendar[ 0 ] end date calendar[ -1 ] symbols symbols loader make seeded random loader random seed calendar sids def get loader column return loaderwith tmp asset finder equities equity info as finder yield Simple Pipeline Engine get loader calendar finder
@contextmanagerdef temp pipeline engine calendar sids random seed symbols None equity info make simple equity info sids sids start date calendar[ 0 ] end date calendar[ -1 ] symbols symbols loader make seeded random loader random seed calendar sids def get loader column return loaderwith tmp asset finder equities equity info as finder yield Simple Pipeline Engine get loader calendar finder
@csrf exemptdef gitlab build request if request method 'POST' try data json loads request body url data['project']['http url']search url re sub '^https? // *? ? \\ git $' '\\ 1 ' url branches [data['ref'] replace 'refs/heads/' '' ]except Value Error Type Error Key Error log error ' Invalid Git Labwebhookpayload' exc info True return Http Response ' Invalidrequest' status 400 log info ' Git Labwebhooksearch url %sbranches %s' search url branches projects get project from url search url if projects return build url search url projects branches else log error ' Projectmatchnotfound url %s' search url return Http Response Not Found ' Projectmatchnotfound' else return Http Response ' Methodnotallowed POS Tisrequired' status 405
def get a line src number global FILE CACH Eif src not in FILE CACHE FILE CACHE[src] []for line in open src 'r' FILE CACHE[src] append line try return FILE CACHE[src][ number - 1 ]except return ''
def parse cachecontrol header directives {}for directive in header split ' ' key sep val directive strip partition ' ' if key directives[key lower ] val if sep else None return directives
def passwd check hashed passphrase passphrase try algorithm salt pw digest hashed passphrase split ' ' 2 except Value Error Type Error return Falsetry h hashlib new algorithm except Value Error return Falseif len pw digest 0 return Falseh update cast bytes passphrase 'utf- 8 ' + cast bytes salt 'ascii' return h hexdigest pw digest
def passwd check hashed passphrase passphrase try algorithm salt pw digest hashed passphrase split ' ' 2 except Value Error Type Error return Falsetry h hashlib new algorithm except Value Error return Falseif len pw digest 0 return Falseh update cast bytes passphrase 'utf- 8 ' + cast bytes salt 'ascii' return h hexdigest pw digest
def get option option return ldap function call None ldap get option option
def mantissa dval bb double as bytes dval mantissa bb[ 1 ] & 15 << 48 mantissa + bb[ 2 ] << 40 mantissa + bb[ 3 ] << 32 mantissa + bb[ 4 ]return mantissa
def action allowed request app action allowed any match rules group rules app action for group in getattr request 'groups' return allowed
def get configured hdfs client config hdfs custom config clientconf usinf snakebite ['snakebite with hadoopcli fallback' 'snakebite']if six PY 3 and custom in conf usinf snakebite warnings warn 'snakebiteclientnotcompatiblewithpython 3 atthemomentfallingbackonhadoopcli' stacklevel 2 return 'hadoopcli'return custom
def get configured hdfs client config hdfs custom config clientconf usinf snakebite ['snakebite with hadoopcli fallback' 'snakebite']if six PY 3 and custom in conf usinf snakebite warnings warn 'snakebiteclientnotcompatiblewithpython 3 atthemomentfallingbackonhadoopcli' stacklevel 2 return 'hadoopcli'return custom
def set proxy facts facts if 'common' in facts common facts['common']if 'http proxy' in common or 'https proxy' in common if 'no proxy' in common and isinstance common['no proxy'] string types common['no proxy'] common['no proxy'] split ' ' elif 'no proxy' not in common common['no proxy'] []if 'generate no proxy hosts' in common and safe get bool common['generate no proxy hosts'] if 'no proxy internal hostnames' in common common['no proxy'] extend common['no proxy internal hostnames'] split ' ' common['no proxy'] append ' ' + common['dns domain'] common['no proxy'] append common['hostname'] common['no proxy'] sort unique common['no proxy'] facts['common'] commonreturn facts
def send alerts products Product objects filter productalert status Product Alert ACTIVE distinct logger info ' Found%dproductswithactivealerts' products count for product in products send product alerts product
def new key nonce None if nonce is None nonce get random bytes 8 return Salsa 20 Cipher key nonce
def total seconds delta if sys version info[ 2] 2 6 return delta total seconds day in seconds delta days * 24 * 3600 0 micro in seconds delta microseconds / 10 0 ** 6 return day in seconds + delta seconds + micro in seconds
def Get Version Namespace version ns ns Map[version]if not ns ns service Ns Map[version]version Id version Id Map[version]if not version Id namespace nselse namespace '%s/%s' % ns version Id return namespace
def safe bed file infile fix pat re compile '^ track browser ' fd fname tempfile mkstemp in handle open infile out handle open fname 'w' for line in in handle if fix pat match line line '#' + line out handle write line in handle close out handle close return fname
def to asyncio future tornado future tornado future convert yielded tornado future af asyncio Future tornado concurrent chain future tornado future af return af
def find exe version cmd executable cmd split [0 ]if find executable executable is None return Noneout Popen cmd shell True stdout PIPE stdouttry out string out read finally out close result RE VERSION search out string if result is None return Nonereturn Loose Version result group 1 decode
def find exe version cmd executable cmd split [0 ]if find executable executable is None return Noneout Popen cmd shell True stdout PIPE stdouttry out string out read finally out close result RE VERSION search out string if result is None return Nonereturn Loose Version result group 1 decode
def find exe version cmd executable cmd split [0 ]if find executable executable is None return Noneout Popen cmd shell True stdout PIPE stdouttry out string out read finally out close result RE VERSION search out string if result is None return Nonereturn Loose Version result group 1 decode
def unify button widths *buttons wid 0for btn in buttons wid max wid len btn['text'] for btn in buttons btn['width'] wid
def unify button widths *buttons wid 0for btn in buttons wid max wid len btn['text'] for btn in buttons btn['width'] wid
def time since time delta time - time utcnow return format timedelta delta add direction True
def test disposable x Disposable Test with x pass Are Equal x Called True Assert hasattr x ' enter ' Assert hasattr x ' exit ' x Disposable Test x enter try passfinally Are Equal x exit None None None None Are Equal x Called True Assert ' enter ' in dir x Assert ' exit ' in dir x Assert ' enter ' in dir Disposable Test Assert ' exit ' in dir Disposable Test
def test disposable x Disposable Test with x pass Are Equal x Called True Assert hasattr x ' enter ' Assert hasattr x ' exit ' x Disposable Test x enter try passfinally Are Equal x exit None None None None Are Equal x Called True Assert ' enter ' in dir x Assert ' exit ' in dir x Assert ' enter ' in dir Disposable Test Assert ' exit ' in dir Disposable Test
def single line text return re sub '+' '' normalize newlines text replace '\n' '' strip
def get file title files path list filename fname os path basename filename same name files get same name files files path list fname if len same name files > 1 compare path shortest path same name files if compare path filename same name files remove path components filename compare path shortest path same name files diff path differentiate prefix path components filename path components compare path diff path length len diff path path component path components diff path if diff path length > 20 and len path component > 2 if path component[ 0 ] '/' and path component[ 0 ] '' path component [path component[ 0 ] ' ' path component[ -1 ]]else path component [path component[ 2 ] ' ' path component[ -1 ]]diff path os path join *path component fname fname + '-' + diff path return fname
def get file title files path list filename fname os path basename filename same name files get same name files files path list fname if len same name files > 1 compare path shortest path same name files if compare path filename same name files remove path components filename compare path shortest path same name files diff path differentiate prefix path components filename path components compare path diff path length len diff path path component path components diff path if diff path length > 20 and len path component > 2 if path component[ 0 ] '/' and path component[ 0 ] '' path component [path component[ 0 ] ' ' path component[ -1 ]]else path component [path component[ 2 ] ' ' path component[ -1 ]]diff path os path join *path component fname fname + '-' + diff path return fname
def merge geometries geometries str sep '$' geometries geometries str split sep if len geometries 1 return geometries strelse pool OGR Geometry geometries[ 0 ] for geom in geometries pool pool union OGR Geometry geom return pool wkt
def wrap exceptions fun @functools wraps fun def wrapper self *args **kwargs try return fun self *args **kwargs except Environment Error as err if err errno in errno ENOENT errno ESRCH raise No Such Process self pid self name if err errno in errno EPERM errno EACCES raise Access Denied self pid self name raisereturn wrapper
def render purchase form html cart **kwargs return render to string 'shoppingcart/cybersource form html' {'action' get purchase endpoint 'params' get signed purchase params cart }
@routes route '/health' def health content Markup markdown markdown ' Theserverishealthy ' return content
@routes route '/health' def health content Markup markdown markdown ' Theserverishealthy ' return content
@routes route '/health' def health content Markup markdown markdown ' Theserverishealthy ' return content
def get scores video if isinstance video Episode return episode scoreselif isinstance video Movie return movie scoresraise Value Error 'videomustbeaninstanceof Episodeor Movie'
def get engine data dict connection url data dict['connection url']engine engines get connection url if not engine extras {'url' connection url}engine sqlalchemy engine from config config 'ckan datastore sqlalchemy ' **extras engines[connection url] enginereturn engine
def resolve cert reqs candidate if candidate is None return CERT NON Eif isinstance candidate str res getattr ssl candidate None if res is None res getattr ssl 'CERT ' + candidate return resreturn candidate
def extract Field field event key Flattener Key Flattener [[literal Text field Name format Spec conversion]] a Formatter parse '{' + field + '}' key key Flattener flat Key field Name format Spec conversion if 'log flattened' not in event flatten Event event return event['log flattened'][key]
def to arr this return [this get str e for e in xrange len this ]
def to arr this return [this get str e for e in xrange len this ]
def last focused window try return get 'last-focused-main-window' except Key Error return window by index -1
def create variable name shape initializer tf contrib layers xavier initializer conv 2 d variable tf Variable initializer shape shape name name return variable
def get model field name field field slugify field field field replace '-' ' ' field field replace ' ' ' ' if field in 'id' field + ' 'if field upper in PG RESERVED KEYWORDS field + ' 'if field[ -1 ] ' ' field + 'field'try int field float field field ' %s' % field except Value Error passreturn field
def evaluate for annotation evaluator annotation index None if annotation is not None definitions evaluator eval element fix forward reference evaluator annotation if index is not None definitions list itertools chain from iterable definition py getitem index for definition in definitions if definition type 'tuple' and len list definition py iter > index return list itertools chain from iterable evaluator execute d for d in definitions else return []
def allclose a b rtol 1e- 05 atol 1e- 08 equal nan False return all isclose a b rtol atol equal nan
def allclose a b rtol 1e- 05 atol 1e- 08 equal nan False return all isclose a b rtol atol equal nan
def append Text Elements e contents List se def uconcat text new Text se if type new Text type text if type text is str text text decode se else new Text new Text decode se return text + new Text e text ''last Element Nonefor content in contents List if not isinstance content Text new Element content to Element se if new Element is None continuelast Element new Elementlast Element tail ''e append last Element elif last Element is None e text uconcat e text content text se else last Element tail uconcat last Element tail content text se
def parse events logger line match log event pattern match line if match groups match groupdict groups update {'alert type' alert types get groups['alert type'] '' 'timestamp' calendar timegm datetime strptime groups['timestamp'] '%Y-%m-%d%H %M %S' timetuple 'msg text' line} return groupselse return None
@keras testdef test temporal classification X train y train X test y test get test data nb train 500 nb test 500 input shape 3 5 classification True nb class 2 y train to categorical y train y test to categorical y test model Sequential model add GRU y train shape[ -1 ] input shape X train shape[ 1 ] X train shape[ 2 ] activation 'softmax' model compile loss 'categorical crossentropy' optimizer 'adagrad' metrics ['accuracy'] history model fit X train y train nb epoch 20 batch size 32 validation data X test y test verbose 0 assert history history['val acc'][ -1 ] > 0 8
@keras testdef test temporal classification X train y train X test y test get test data nb train 500 nb test 500 input shape 3 5 classification True nb class 2 y train to categorical y train y test to categorical y test model Sequential model add GRU y train shape[ -1 ] input shape X train shape[ 1 ] X train shape[ 2 ] activation 'softmax' model compile loss 'categorical crossentropy' optimizer 'adagrad' metrics ['accuracy'] history model fit X train y train nb epoch 20 batch size 32 validation data X test y test verbose 0 assert history history['val acc'][ -1 ] > 0 8
def Yaml Dumper aff 4 object aff 4 object Flush result {}for attribute values in aff 4 object synced attributes items result[attribute predicate] []for value in values value value To RDF Value result[attribute predicate] append [value class name value Serialize To String str value age ] return yaml dump dict aff 4 class aff 4 object class name urn aff 4 object urn Serialize To String attributes result age policy aff 4 object age policy
def exception data type value traceback sys exc info while traceback tb next traceback traceback tb nextcode traceback tb frame f codereturn type name value code co filename traceback tb lineno code co name
def get system username import getpassusername Nonetry username getpass getuser except Key Error passexcept Import Error if win 32 import win 32 apiimport win 32 securityimport win 32 profileusername win 32 api Get User Name return username
def map base attributes cube mapper class naming locale None base [attr for attr in cube all attributes if attr is base]mapper mapper class cube naming locale mapped {attr ref mapper[attr] for attr in base}return mapper fact name mapped
def app environ start response data ' Hello World \n'status '200 OK'response headers [ ' Content-type' 'text/plain' ' Transfer- Encoding' 'chunked' ]sys stdout write 'requestreceived' sys stdout flush start response status response headers return Test Iter
def put url data api key None try opener request build request with data url data api key 'PUT' put request opener open request return json loads put request read except urllib 2 HTTP Error as e return dict status 'error' message str e read 1024
def patch builtins if sys version info[ 2] < 3 3 patch module 'builtins'
def get thunk type set it types []i types []j 0getter code 'if 0 {}'for I typenum I type in I TYPES piece '\nelseif I typenum % I typenum s {\nif T typenum -1 {return% j s }'getter code + piece % dict I typenum I typenum j j i types append j I typenum None I type None j + 1for T typenum T type in T TYPES piece '\nelseif T typenum % T typenum s {return% j s }'getter code + piece % dict T typenum T typenum j j it types append j I typenum T typenum I type T type j + 1getter code + '\n}'return i types it types GET THUNK CASE TEMPLATE % dict content getter code
def get thunk type set it types []i types []j 0getter code 'if 0 {}'for I typenum I type in I TYPES piece '\nelseif I typenum % I typenum s {\nif T typenum -1 {return% j s }'getter code + piece % dict I typenum I typenum j j i types append j I typenum None I type None j + 1for T typenum T type in T TYPES piece '\nelseif T typenum % T typenum s {return% j s }'getter code + piece % dict T typenum T typenum j j it types append j I typenum T typenum I type T type j + 1getter code + '\n}'return i types it types GET THUNK CASE TEMPLATE % dict content getter code
def guess plateau x y if len x len y return 0diffs []indexes range len y for i in indexes if i + 1 not in indexes continuediffs append y[ i + 1 ] - y[i] diffs np array diffs ymax y[ -1 ]for i in indexes if y[i] > ymax - diffs std and y[i] < ymax + diffs std ymax y[i]breakreturn ymax
def max seeds from threads threads seeds 0for background in threads log debug u' Comingupnext %s' % background tracker background join seeds max seeds background tracker seeds log debug u' Currenthightestnumberofseedsfound %s' % seeds return seeds
def max seeds from threads threads seeds 0for background in threads log debug u' Comingupnext %s' % background tracker background join seeds max seeds background tracker seeds log debug u' Currenthightestnumberofseedsfound %s' % seeds return seeds
def Parse Output Spec output spec pattern re compile ' O 0 1 2 l s c \\d+ ' m pattern match output spec if m is None raise Value Error ' Failedtoparseoutputspec ' + output spec out dims int m group 2 out func m group 3 if out func 'c' and out dims 1 raise Value Error 'CT Ccanonlybeusedwitha 1 - Dsequence ' num classes int m group 4 return out dims out func num classes
def rest api context factory ca certificate control credential return Control Service Context Factory ca certificate control credential 'user-'
def rest api context factory ca certificate control credential return Control Service Context Factory ca certificate control credential 'user-'
def get k p a font left right chars left + right args [ None 1 cf kCF Type Dictionary Key Call Backs cf kCF Type Dictionary Value Call Backs]attributes cf CF Dictionary Create Mutable *args cf CF Dictionary Add Value attributes kCT Font Attribute Name font string cf CF Attributed String Create None CFSTR chars attributes typesetter ct CT Typesetter Create With Attributed String string cf CF Release string cf CF Release attributes range CF Range 0 1 line ct CT Typesetter Create Line typesetter range offset ct CT Line Get Offset For String Index line 1 None cf CF Release line cf CF Release typesetter return offset
def setup platform hass config add devices discovery info None from concord 232 import client as concord 232 clienthost config get CONF HOST port config get CONF PORT exclude config get CONF EXCLUDE ZONES zone types config get CONF ZONE TYPES sensors []try LOGGER debug ' Initializing Client' client concord 232 client Client 'http //{} {}' format host port client zones client list zones client last zone update datetime datetime now except requests exceptions Connection Error as ex LOGGER error ' Unabletoconnectto Concord 232 %s' str ex return Falsefor zone in client zones LOGGER info ' Loading Zonefound %s' zone['name'] if zone['number'] not in exclude sensors append Concord 232 Zone Sensor hass client zone zone types get zone['number'] get opening type zone add devices sensors return True
def get all key combinations data flattened schema schema prefixes set [key[ -1 ] for key in flattened schema] combinations set [ ] for key in sorted data keys key flattened order key key prefix key[ -1 2]if key prefix not in schema prefixes continueif tuple tuple key[ -3 ] not in combinations continuecombinations add tuple key[ -1 ] return combinations
def get all key combinations data flattened schema schema prefixes set [key[ -1 ] for key in flattened schema] combinations set [ ] for key in sorted data keys key flattened order key key prefix key[ -1 2]if key prefix not in schema prefixes continueif tuple tuple key[ -3 ] not in combinations continuecombinations add tuple key[ -1 ] return combinations
def book info td title td find 'div' 'thumbheader' a textby author td find 'div' ' Author Name' textauthors [x strip for x in re sub '^ By' '' by author split ' ' ]isbn link td find 'div' 'thumbheader' a get 'href' isbn re match '/product/ * \\ do' isbn link groups [0 ]date td find 'span' 'directorydate' text strip return {'title' title 'authors' authors 'isbn' isbn 'date' date}
def book info td title td find 'div' 'thumbheader' a textby author td find 'div' ' Author Name' textauthors [x strip for x in re sub '^ By' '' by author split ' ' ]isbn link td find 'div' 'thumbheader' a get 'href' isbn re match '/product/ * \\ do' isbn link groups [0 ]date td find 'span' 'directorydate' text strip return {'title' title 'authors' authors 'isbn' isbn 'date' date}
def fix s3 host request signature version region name default endpoint url 's 3 amazonaws com' **kwargs if signature version is not botocore UNSIGNED and 's 3 v 4 ' in signature version returnelif not allowed region region name returntry switch to virtual host style request signature version default endpoint url except Invalid DNS Name Error as e bucket name e kwargs['bucket name']logger debug ' Notchanging URI bucketisnot DN Scompatible %s' bucket name
def trigger build project version None record True force False basic False from readthedocs projects tasks import update docsfrom readthedocs builds models import Buildif project skip return Noneif not version version project versions get slug LATEST kwargs dict pk project pk version pk version pk record record force force basic basic build Noneif record build Build objects create project project version version type 'html' state 'triggered' success True kwargs['build pk'] build pkoptions {}if project build queue options['queue'] project build queuetime limit DOCKER LIMITS['time']try if project container time limit time limit int project container time limit except Value Error passoptions['soft time limit'] time limitoptions['time limit'] int time limit * 1 2 update docs apply async kwargs kwargs **options return build
def trigger build project version None record True force False basic False from readthedocs projects tasks import update docsfrom readthedocs builds models import Buildif project skip return Noneif not version version project versions get slug LATEST kwargs dict pk project pk version pk version pk record record force force basic basic build Noneif record build Build objects create project project version version type 'html' state 'triggered' success True kwargs['build pk'] build pkoptions {}if project build queue options['queue'] project build queuetime limit DOCKER LIMITS['time']try if project container time limit time limit int project container time limit except Value Error passoptions['soft time limit'] time limitoptions['time limit'] int time limit * 1 2 update docs apply async kwargs kwargs **options return build
def trigger build project version None record True force False basic False from readthedocs projects tasks import update docsfrom readthedocs builds models import Buildif project skip return Noneif not version version project versions get slug LATEST kwargs dict pk project pk version pk version pk record record force force basic basic build Noneif record build Build objects create project project version version type 'html' state 'triggered' success True kwargs['build pk'] build pkoptions {}if project build queue options['queue'] project build queuetime limit DOCKER LIMITS['time']try if project container time limit time limit int project container time limit except Value Error passoptions['soft time limit'] time limitoptions['time limit'] int time limit * 1 2 update docs apply async kwargs kwargs **options return build
def bem specify els bem els mults sol np zeros len els bem['solution'] shape[ 1 ] scalp bem['surfs'][ 0 ]rrs np concatenate [apply trans bem['head mri t']['trans'] el['rmag'] for el in els] axis 0 ws np concatenate [el['w'] for el in els] tri weights tri idx project onto surface rrs scalp tri weights * wsweights np einsum 'ij jik->jk' tri weights bem['solution'][scalp['tris'][tri idx]] edges np concatenate [[ 0 ] np cumsum [len el['w'] for el in els] ] for ii start stop in enumerate zip edges[ -1 ] edges[ 1 ] sol[ii] weights[start stop] sum 0 sol * multsreturn sol
def bem specify els bem els mults sol np zeros len els bem['solution'] shape[ 1 ] scalp bem['surfs'][ 0 ]rrs np concatenate [apply trans bem['head mri t']['trans'] el['rmag'] for el in els] axis 0 ws np concatenate [el['w'] for el in els] tri weights tri idx project onto surface rrs scalp tri weights * wsweights np einsum 'ij jik->jk' tri weights bem['solution'][scalp['tris'][tri idx]] edges np concatenate [[ 0 ] np cumsum [len el['w'] for el in els] ] for ii start stop in enumerate zip edges[ -1 ] edges[ 1 ] sol[ii] weights[start stop] sum 0 sol * multsreturn sol
def check envelope result func cargs offset -1 env ptr byref cargs offset return env
def action name text confirmation None def wrap f f action name text confirmation return freturn wrap
def action name text confirmation None def wrap f f action name text confirmation return freturn wrap
def action name text confirmation None def wrap f f action name text confirmation return freturn wrap
@register simple tag takes context True def translate url context language try request context[u'request']except Key Error return u''view resolve request path current language translation get language translation activate language try url reverse view func args view args kwargs view kwargs except No Reverse Match try url name view url name if not view namespace else u'%s %s' % view namespace view url name url reverse url name args view args kwargs view kwargs except No Reverse Match url name u'admin ' + view url name url reverse url name args view args kwargs view kwargs translation activate current language if context[u'request'] META[u'QUERY STRING'] url + u'?' + context[u'request'] META[u'QUERY STRING'] return url
def negaterow row K return [ - element for element in row]
def media prev track hass hass services call DOMAIN SERVICE MEDIA PREVIOUS TRACK
def user has perm note note profile request None if note author and note author id profile id return Trueif request and note note type comm REVIEWER COMMENT return acl check reviewer request if request and note note type comm DEVELOPER COMMENT and acl check reviewer request return Trueuser is author profile addons filter pk note thread addon id if user is author exists and note read permission developer or note note type comm REVIEWER PUBLIC COMMENT return Truereturn check acls comm obj note profile
def add gateway router router ext network profile None conn auth profile return conn add gateway router router ext network
def get requests resp json resp if callable resp json return resp json return resp json
def levelize path path parts tuple filter None path split '/' return [ '/' + '/' join parts[ n] for n in range len parts 0 -1 ]
def check rc rc errno None if rc -1 if errno is None from zmq backend import zmq errnoerrno zmq errno from zmq import EAGAIN ETER Mif errno EINTR raise Interrupted System Call errno elif errno EAGAIN raise Again errno elif errno ETERM raise Context Terminated errno else raise ZMQ Error errno
def check rc rc errno None if rc -1 if errno is None from zmq backend import zmq errnoerrno zmq errno from zmq import EAGAIN ETER Mif errno EINTR raise Interrupted System Call errno elif errno EAGAIN raise Again errno elif errno ETERM raise Context Terminated errno else raise ZMQ Error errno
def remove headers *headers def decorator func '\n Decoratesthegivenfunction \n'@wraps func def inner *args **kwargs '\n Alterstheresponse \n'response func *args **kwargs remove headers from response response *headers return responsereturn innerreturn decorator
def http response to document iters response read chunk size 4096 chunked is chunked dict response getheaders if response status 200 if chunked return iter [ 0 None None response getheaders response ] content length int response getheader ' Content- Length' return iter [ 0 content length - 1 content length response getheaders response ] content type params list parse content type response getheader ' Content- Type' if content type 'multipart/byteranges' start end length parse content range response getheader ' Content- Range' return iter [ start end length response getheaders response ] else params dict params list return multipart byteranges to document iters response params['boundary'] read chunk size
def name dev return info dev get 'N' None
def setup platform hass config add entities discovery info None if config[CONF TYPE] TEMPERATURE minimum value maximum value update and define min max config KNX TEMP MIN KNX TEMP MAX add entities [KNX Sensor Float Class hass KNX Config config TEMP CELSIUS minimum value maximum value ] elif config[CONF TYPE] SPEED MS minimum value maximum value update and define min max config KNX SPEED MS MIN KNX SPEED MS MAX add entities [KNX Sensor Float Class hass KNX Config config SPEED METERPERSECOND minimum value maximum value ] elif config[CONF TYPE] ILLUMINANCE minimum value maximum value update and define min max config KNX LUX MIN KNX LUX MAX add entities [KNX Sensor Float Class hass KNX Config config ILLUMINANCE LUX minimum value maximum value ]
def has discussion privileges user course id roles get role ids course id for role in roles if user id in roles[role] return Truereturn False
def box on None ax gca on string to bool on if on is None on not ax get frame on ax set frame on on
def get service command generator run utils run global service command generatortry return service command generatorexcept Name Error command generator command generators[get name of init run ] service command generator Service Command Generator command generator return service command generator
def runnable payloads shell obj result []for payload name in get payload list payload get payload instance payload name shell obj if payload can run result append payload name return result
def get xunit func obj name meth getattr obj name None if fixtures getfixturemarker meth is None return meth
def get xunit func obj name meth getattr obj name None if fixtures getfixturemarker meth is None return meth
@release command def ghrelease version get version 1 tag 'v' + version with open os path join BASE 'changelog md' as f cl md f read subprocess check call ['github-release' 'release' '-u' GITHUB USER '-r' GITHUB REPO '--tag' tag '--name' '{}{}' format GITHUB REPO version '--description' cl md] tarball os path join BASE 'dist' 'beets-{} tar gz' format version subprocess check call ['github-release' 'upload' '-u' GITHUB USER '-r' GITHUB REPO '--tag' tag '--name' os path basename tarball '--file' tarball]
@release command def ghrelease version get version 1 tag 'v' + version with open os path join BASE 'changelog md' as f cl md f read subprocess check call ['github-release' 'release' '-u' GITHUB USER '-r' GITHUB REPO '--tag' tag '--name' '{}{}' format GITHUB REPO version '--description' cl md] tarball os path join BASE 'dist' 'beets-{} tar gz' format version subprocess check call ['github-release' 'upload' '-u' GITHUB USER '-r' GITHUB REPO '--tag' tag '--name' os path basename tarball '--file' tarball]
def catch ioerror meth @wraps meth def wrapper self *args **kwargs try return meth self *args **kwargs except IO Error as errno strerror if errno ENOSPC msg ' Nospaceleftondevice'raise Scan Must Stop By Known Reason Exc msg return wrapper
def register local role name role fn set implicit options role fn roles[name] role fn
def mean quadratic weighted kappa kappas weights None kappas np array kappas dtype float if weights is None weights np ones np shape kappas else weights weights / np mean weights kappas np array [min x 0 999 for x in kappas] kappas np array [max x -0 999 for x in kappas] z 0 5 * np log 1 + kappas / 1 - kappas * weights z np mean z return np exp 2 * z - 1 / np exp 2 * z + 1
def mean quadratic weighted kappa kappas weights None kappas np array kappas dtype float if weights is None weights np ones np shape kappas else weights weights / np mean weights kappas np array [min x 0 999 for x in kappas] kappas np array [max x -0 999 for x in kappas] z 0 5 * np log 1 + kappas / 1 - kappas * weights z np mean z return np exp 2 * z - 1 / np exp 2 * z + 1
def mean quadratic weighted kappa kappas weights None kappas np array kappas dtype float if weights is None weights np ones np shape kappas else weights weights / np mean weights kappas np array [min x 0 999 for x in kappas] kappas np array [max x -0 999 for x in kappas] z 0 5 * np log 1 + kappas / 1 - kappas * weights z np mean z return np exp 2 * z - 1 / np exp 2 * z + 1
def parse freshdesk event event string data event string replace '{' '' replace '}' '' replace ' ' ' ' split ' ' if len data 2 return dataelse property from state to state datareturn [property property name property int from state property name property int to state ]
def prepare token revocation request url token token type hint u'access token' callback None body u'' **kwargs if not is secure transport url raise Insecure Transport Error params [ u'token' token ]if token type hint params append u'token type hint' token type hint for k in kwargs if kwargs[k] params append unicode type k kwargs[k] headers {u' Content- Type' u'application/x-www-form-urlencoded'}if callback params append u'callback' callback return add params to uri url params headers body else return url headers add params to qs body params
def load path debug False if os environ get 'APPENGINE RUNTIME' 'python 27 ' warnings warn PYTHON 27 DEPRECATION Deprecation Warning stacklevel 2 return load internal django path debug else return load user django path debug
def process message data if u'printusers' in data[u'text'] for user in sc api call u'users list' [u'members'] print user[u'name'] user[u'id']
def inline Callbacks f @wraps f def unwind Generator *args **kwargs try gen f *args **kwargs except Def Gen Return raise Type Error 'inline Callbacksrequires%rtoproduceagenerator insteadcaughtreturn Valuebeingusedinanon-generator' % f if not isinstance gen types Generator Type raise Type Error 'inline Callbacksrequires%rtoproduceagenerator insteadgot%r' % f gen return inline Callbacks None gen Deferred return unwind Generator
def get current device return current context device
def update Twisted Version Information base Directory now for project in find Twisted Projects base Directory project update Version get Next Version project get Version now now
def generate patterns django name gwt name pattern list defaults patterns django name '^rpc/' 'views handle rpc' '^rpc doc' 'views rpc documentation' debug pattern list defaults patterns '' '^ ?P<forward addr>autotest * ' 'autotest frontend afe views gwt forward' '^client/ ?P<path> * $' 'django views static serve' {'document root' os path join os path dirname file ' ' 'frontend' 'client' 'www' } '^$' 'django views generic simple redirect to' {'url' 'client/autotest % name s/% name s html' % dict name gwt name } return pattern list debug pattern list
def deserialize field field value try deserialized json loads value if deserialized is None return deserializedtry field from json deserialized return deserializedexcept Value Error Type Error return valueexcept Value Error Type Error return value
def test tokenize 0 s '123 klsdgh 56 7? 98 2---\\%- 1 e 3 'true tokens ['' 123 'klsdgh' 56 7 '?' 98 2 '---\\%' -1000 0 ]tokens tokenize by number s assert token lists match tokens true tokens
def test tokenize 0 s '123 klsdgh 56 7? 98 2---\\%- 1 e 3 'true tokens ['' 123 'klsdgh' 56 7 '?' 98 2 '---\\%' -1000 0 ]tokens tokenize by number s assert token lists match tokens true tokens
def listbucket path prefix marker None prefix None max keys None delimiter None retry params None account id None if prefix common validate bucket path path prefix bucket path prefixelse bucket prefix common process path prefix path prefix if marker and marker startswith bucket marker marker[ len bucket + 1 ]api storage api get storage api retry params retry params account id account id options {}if marker options['marker'] markerif max keys options['max-keys'] max keysif prefix options['prefix'] prefixif delimiter options['delimiter'] delimiterreturn Bucket api bucket options
def listbucket path prefix marker None prefix None max keys None delimiter None retry params None account id None if prefix common validate bucket path path prefix bucket path prefixelse bucket prefix common process path prefix path prefix if marker and marker startswith bucket marker marker[ len bucket + 1 ]api storage api get storage api retry params retry params account id account id options {}if marker options['marker'] markerif max keys options['max-keys'] max keysif prefix options['prefix'] prefixif delimiter options['delimiter'] delimiterreturn Bucket api bucket options
def can change page request from cms utils import page permissionsuser request usercurrent page request current pageif current page return page permissions user can change page user current page site Site objects get current request return page permissions user can change all pages user site
def can change page request from cms utils import page permissionsuser request usercurrent page request current pageif current page return page permissions user can change page user current page site Site objects get current request return page permissions user can change all pages user site
def get user location if c user and c user pref use global defaults return ''return get request location request c
def group tasks by name and status task dict group status {}for task in task dict if task task family not in group status group status[task task family] []group status[task task family] append task return group status
def group tasks by name and status task dict group status {}for task in task dict if task task family not in group status group status[task task family] []group status[task task family] append task return group status
def dimension div a b if a datashape var or b datashape var return datashape varif isinstance a Fixed a int a if isinstance b Fixed b int b return int ceil a / b
@cache request env path info time expire 5 cache model cache disk def cache controller on disk t time ctime return dict time t link A 'clicktoreload' href URL r request
def upload ssh key host username password ssh key None ssh key file None protocol None port None certificate verify False if protocol is None protocol 'https'if port is None port 443 url '{ 0 } //{ 1 } {2 }/host/ssh root authorized keys' format protocol host port ret {}result Nonetry if ssh key result salt utils http query url status True text True method 'PUT' username username password password data ssh key verify ssl certificate verify elif ssh key file result salt utils http query url status True text True method 'PUT' username username password password data file ssh key file data render False verify ssl certificate verify if result get 'status' 200 ret['status'] Trueelse ret['status'] Falseret[' Error'] result['error']except Exception as msg ret['status'] Falseret[' Error'] msgreturn ret
def exponential decay noise xp shape dtype hook opt std numpy sqrt hook eta / numpy power 1 + opt t 0 55 return xp random normal 0 std shape astype dtype
def updating name jail None chroot None root None filedate None filename None opts ''if filedate opts + 'd{ 0 }' format filedate if filename opts + 'f{ 0 }' format filename cmd pkg jail chroot root cmd append 'updating' if opts cmd append '-' + opts cmd append name return salt ['cmd run'] cmd output loglevel 'trace' python shell False
def migrate node node for key file id in node files current iteritems if key not in node files versions node files versions[key] [file id]elif file id not in node files versions[key] node files versions[key] append file id node save
def migrate node node for key file id in node files current iteritems if key not in node files versions node files versions[key] [file id]elif file id not in node files versions[key] node files versions[key] append file id node save
def create and copy test fixture pool fixture test service service for pool test pool volume service get MY VOLUME pool 2 fixture test service 2 service for pool test pool 2 volume 2 Volume node id service node id name MY VOLUME service service 2 d pool create volume def created filesystem filesystem path filesystem get path path child 'file' set Content 'somebytes' path child 'directory' makedirs copying copy volume volume 2 copying add Callback lambda ignored Copy Volumes from volume volume to volume volume 2 return copyingd add Callback created filesystem return d
def create and copy test fixture pool fixture test service service for pool test pool volume service get MY VOLUME pool 2 fixture test service 2 service for pool test pool 2 volume 2 Volume node id service node id name MY VOLUME service service 2 d pool create volume def created filesystem filesystem path filesystem get path path child 'file' set Content 'somebytes' path child 'directory' makedirs copying copy volume volume 2 copying add Callback lambda ignored Copy Volumes from volume volume to volume volume 2 return copyingd add Callback created filesystem return d
def serialize discussion entities request context discussion entities requested fields discussion entity type results []usernames []include profile image include profile image requested fields for entity in discussion entities if discussion entity type Discussion Entity thread serialized entity Thread Serializer entity context context dataelif discussion entity type Discussion Entity comment serialized entity Comment Serializer entity context context dataresults append serialized entity if include profile image if serialized entity['author'] and serialized entity['author'] not in usernames usernames append serialized entity['author'] if 'endorsed' in serialized entity and serialized entity['endorsed'] and 'endorsed by' in serialized entity and serialized entity['endorsed by'] and serialized entity['endorsed by'] not in usernames usernames append serialized entity['endorsed by'] results add additional response fields request results usernames discussion entity type include profile image return results
def unzip archive archive assert os path exists archive ' Filenotfound-%s' % archive tmpdir os path join tempfile gettempdir os path basename archive assert tmpdir archive if os path exists tmpdir passelif tarfile is tarfile archive print ' Extractingtarfile 'with tarfile open archive as tf tf extractall path tmpdir elif zipfile is zipfile archive print ' Extractingzipfile 'with zipfile Zip File archive as zf zf extractall path tmpdir else raise Value Error ' Unknownfiletypefor%s' % os path basename archive return tmpdir
def unzip archive archive assert os path exists archive ' Filenotfound-%s' % archive tmpdir os path join tempfile gettempdir os path basename archive assert tmpdir archive if os path exists tmpdir passelif tarfile is tarfile archive print ' Extractingtarfile 'with tarfile open archive as tf tf extractall path tmpdir elif zipfile is zipfile archive print ' Extractingzipfile 'with zipfile Zip File archive as zf zf extractall path tmpdir else raise Value Error ' Unknownfiletypefor%s' % os path basename archive return tmpdir
def sort and count a if len a 1 return a 0 b x sort and count a[ len a / 2 ] c y sort and count a[ len a / 2 ] d z merge and count inv b c return d x + y + z
def sort and count a if len a 1 return a 0 b x sort and count a[ len a / 2 ] c y sort and count a[ len a / 2 ] d z merge and count inv b c return d x + y + z
def get interface dev b Interface Number bm Request Type util build request type util CTRL IN util CTRL TYPE STANDARD util CTRL RECIPIENT INTERFACE return dev ctrl transfer bm Request Type bm Request Type b Request 10 w Index b Interface Number data or w Length 1 [0 ]
def libvlc media list player set media player p mlp p mi f Cfunctions get 'libvlc media list player set media player' None or Cfunction 'libvlc media list player set media player' 1 1 None None Media List Player Media Player return f p mlp p mi
def libvlc media list player set media player p mlp p mi f Cfunctions get 'libvlc media list player set media player' None or Cfunction 'libvlc media list player set media player' 1 1 None None Media List Player Media Player return f p mlp p mi
def load all models s3 db load all models return 'ok'
def do pdp descriptor conf cert pdp md PDP Descriptor pdp protocol support enumeration samlp NAMESPAC Eendps conf getattr 'endpoints' 'pdp' if endps for endpoint instlist in do endpoints endps ENDPOINTS['pdp'] items setattr pdp endpoint instlist do nameid format pdp conf 'pdp' if cert pdp key descriptor do key descriptor cert return pdp
def find wheels projects search dirs wheels []for project in projects for dirname in search dirs files glob glob os path join dirname project + '-* whl' if files wheels append os path abspath files[ 0 ] breakelse logger fatal ' Cannotfindawheelfor%s' % project return wheels
def github pull request merge registry xml parent data osb XML Sub Element xml parent 'org jenkinsci plugins ghprb Ghprb Pull Request Merge' mapping [ 'only-admins-merge' 'only Admins Merge' 'false' 'disallow-own-code' 'disallow Own Code' 'false' 'merge-comment' 'merge Comment' '' 'fail-on-non-merge' 'fail On Non Merge' 'false' 'delete-on-merge' 'delete On Merge' 'false' ]helpers convert mapping to xml osb data mapping fail required True
def github pull request merge registry xml parent data osb XML Sub Element xml parent 'org jenkinsci plugins ghprb Ghprb Pull Request Merge' mapping [ 'only-admins-merge' 'only Admins Merge' 'false' 'disallow-own-code' 'disallow Own Code' 'false' 'merge-comment' 'merge Comment' '' 'fail-on-non-merge' 'fail On Non Merge' 'false' 'delete-on-merge' 'delete On Merge' 'false' ]helpers convert mapping to xml osb data mapping fail required True
def github pull request merge registry xml parent data osb XML Sub Element xml parent 'org jenkinsci plugins ghprb Ghprb Pull Request Merge' mapping [ 'only-admins-merge' 'only Admins Merge' 'false' 'disallow-own-code' 'disallow Own Code' 'false' 'merge-comment' 'merge Comment' '' 'fail-on-non-merge' 'fail On Non Merge' 'false' 'delete-on-merge' 'delete On Merge' 'false' ]helpers convert mapping to xml osb data mapping fail required True
def github pull request merge registry xml parent data osb XML Sub Element xml parent 'org jenkinsci plugins ghprb Ghprb Pull Request Merge' mapping [ 'only-admins-merge' 'only Admins Merge' 'false' 'disallow-own-code' 'disallow Own Code' 'false' 'merge-comment' 'merge Comment' '' 'fail-on-non-merge' 'fail On Non Merge' 'false' 'delete-on-merge' 'delete On Merge' 'false' ]helpers convert mapping to xml osb data mapping fail required True
def github pull request merge registry xml parent data osb XML Sub Element xml parent 'org jenkinsci plugins ghprb Ghprb Pull Request Merge' mapping [ 'only-admins-merge' 'only Admins Merge' 'false' 'disallow-own-code' 'disallow Own Code' 'false' 'merge-comment' 'merge Comment' '' 'fail-on-non-merge' 'fail On Non Merge' 'false' 'delete-on-merge' 'delete On Merge' 'false' ]helpers convert mapping to xml osb data mapping fail required True
def denoise tv chambolle im weight 0 1 eps 0 0002 n iter max 200 multichannel False im type im dtypeif not im type kind 'f' im img as float im if multichannel out np zeros like im for c in range im shape[ -1 ] out[ c] denoise tv chambolle nd im[ c] weight eps n iter max else out denoise tv chambolle nd im weight eps n iter max return out
def mig Ring populations k selection replacement None migarray None nbr demes len populations if migarray is None migarray range 1 nbr demes + [0 ] immigrants [[] for i in xrange nbr demes ]emigrants [[] for i in xrange nbr demes ]for from deme in xrange nbr demes emigrants[from deme] extend selection populations[from deme] k if replacement is None immigrants[from deme] emigrants[from deme]else immigrants[from deme] extend replacement populations[from deme] k for from deme to deme in enumerate migarray for i immigrant in enumerate immigrants[to deme] indx populations[to deme] index immigrant populations[to deme][indx] emigrants[from deme][i]
def empty shape dtype float order 'C' return cupy ndarray shape dtype dtype order order
@command 'historyclear' def clear history g userhist['history'] songs []history save g message ' Historycleared'g content logo
def python branch return sys version [2 ]
def apply all middleware request **attrs request apply view middleware apply request middleware request for key value in attrs items setattr request key value return request
def Err Check Bool result func args if not result raise Win Error return args
def pr image represent image name format None size table current s3 db pr image libraryquery table original name image name if format query query & table format format if size query query & table width size[ 0 ] & table height size[ 1 ] image current db query select table new name limitby 0 1 first if image return image new nameelse return image name
def find test dir start dir None if not start dir start dir ' 'target os path abspath start dir while True if os path isdir os path join target ' Bio' and os path isdir os path join target ' Tests' return os path abspath os path join target ' Tests' new tmp os path split target if target new breaktarget newraise Value Error ' Notwithin Biopythonsourcetree %r' % os path abspath start dir
def find test dir start dir None if not start dir start dir ' 'target os path abspath start dir while True if os path isdir os path join target ' Bio' and os path isdir os path join target ' Tests' return os path abspath os path join target ' Tests' new tmp os path split target if target new breaktarget newraise Value Error ' Notwithin Biopythonsourcetree %r' % os path abspath start dir
def hypervolume pointset ref hv Hyper Volume ref return hv compute pointset
def backup dir dir ext ' bak' n 1extension extwhile os path exists dir + extension n + 1extension ext + str n return dir + extension
def jupyter info import nbconvertreturn dict nbconvert version nbconvert version
def get report choice key import doctestreturn {DOCTEST REPORT CHOICE UDIFF doctest REPORT UDIFF DOCTEST REPORT CHOICE CDIFF doctest REPORT CDIFF DOCTEST REPORT CHOICE NDIFF doctest REPORT NDIFF DOCTEST REPORT CHOICE ONLY FIRST FAILURE doctest REPORT ONLY FIRST FAILURE DOCTEST REPORT CHOICE NONE 0}[key]
def restore fid url build url RESOURCE id fid route 'restore' return request 'post' url
def do baremetal node list cs args emit deprecation warning 'baremetal-node-list' nodes cs baremetal list print baremetal nodes list nodes
def check Environment if platform system ' Darwin' fatal ' Thisscriptshouldberunona Mac OSX 10 4system' if platform release < '8 ' fatal ' Thisscriptshouldberunona Mac OSX 10 4system' if not os path exists SDKPATH fatal ' Pleaseinstallthelatestversionof Xcodeandthe%s SDK' % os path basename SDKPATH[ -4 ]
def quote sheetname sheetname if not sheetname isalnum and not sheetname startswith "'" sheetname sheetname replace "'" "''" sheetname "'%s'" % sheetname return sheetname
def quote sheetname sheetname if not sheetname isalnum and not sheetname startswith "'" sheetname sheetname replace "'" "''" sheetname "'%s'" % sheetname return sheetname
def get patches from dir path patches []for root subdirs files in core walk path for name in [f for f in files if f endswith u' patch' ] patches append core decode os path join root name return patches
def colormaps pass
def resource filename fn return os path join os path dirname sys testing document filename 'resources' os path splitext os path basename sys testing document filename [0 ] fn
def resource filename fn return os path join os path dirname sys testing document filename 'resources' os path splitext os path basename sys testing document filename [0 ] fn
def test constructed module Module Type type sys Top Module Module Type ' Top Module' sys modules[' Top Module'] Top Module Sub Module Module Type ' Sub Module' Sub Module Object object Top Module Sub Module Sub Moduletry import Top Module Sub Module Assert Unreachable except Import Error passdel sys modules[' Top Module']
def test constructed module Module Type type sys Top Module Module Type ' Top Module' sys modules[' Top Module'] Top Module Sub Module Module Type ' Sub Module' Sub Module Object object Top Module Sub Module Sub Moduletry import Top Module Sub Module Assert Unreachable except Import Error passdel sys modules[' Top Module']
def atleast 1d *arys res []for a in arys if not isinstance a cupy ndarray raise Type Error ' Onlycupyarrayscanbeatleast 1d' if a ndim 0 a a reshape 1 res append a if len res 1 res res[ 0 ]return res
@pytest mark multithreaddef test num reads threads import threadingdef count reads rparser for in rparser passn threads 4threads []rparser Read Parser utils get test data '100 -reads fq gz' for in range n threads thr threading Thread target count reads args [rparser] threads append thr thr start for thr in threads thr join assert rparser num reads 100
@pytest mark multithreaddef test num reads threads import threadingdef count reads rparser for in rparser passn threads 4threads []rparser Read Parser utils get test data '100 -reads fq gz' for in range n threads thr threading Thread target count reads args [rparser] threads append thr thr start for thr in threads thr join assert rparser num reads 100
def split url or path url or path if ' //' in url or path return url or path rstrip '/' rsplit '/' 1 return osp split url or path rstrip osp sep
def reduce abs inequalities exprs gen return And *[reduce abs inequality expr rel gen for expr rel in exprs]
def timeout reactor deferred timeout sec reason None def timeout deferred cancel delayed timeout reactor call Later timeout sec timeout if reason is not None def maybe replace reason passthrough if delayed timeout active return passthroughreturn Failure reason deferred add Errback maybe replace reason def abort timeout passthrough if delayed timeout active delayed timeout cancel return passthroughdeferred add Both abort timeout return deferred
def fix makefile do apply fixed Falselines open makefile readlines for old new in CHANGES i findline lines new if i > 0 continuei findline lines old if i < 0 print 'fixapplepython 23 Pythoninstallationnotfixed appearsbroken 'print 'fixapplepython 23 missingline ' oldreturn 2lines[i] newfixed Trueif fixed if do apply print 'fixapplepython 23 Fixto Apple-installed Python 2 3applied'os rename makefile makefile + '~' open makefile 'w' writelines lines return 0else print 'fixapplepython 23 Fixto Apple-installed Python 2 3shouldbeapplied'return 1else print 'fixapplepython 23 Nofixneeded appearstohavebeenappliedbefore'return 0
def parse host connect string hcs if '@' in hcs p re compile ' ?P<username>[^@ ]* ? ?P<password> * ? \\\\ @ ?P<hostname>[^ ]* ? ?P<port>[ 0 - 9 ]* ' else p re compile ' ?P<username> ?P<password> ?P<hostname>[^ ]* ? ?P<port>[ 0 - 9 ]* ' m p search hcs d m groupdict d['password'] d['password'] replace '\\@' '@' return d
def parse host connect string hcs if '@' in hcs p re compile ' ?P<username>[^@ ]* ? ?P<password> * ? \\\\ @ ?P<hostname>[^ ]* ? ?P<port>[ 0 - 9 ]* ' else p re compile ' ?P<username> ?P<password> ?P<hostname>[^ ]* ? ?P<port>[ 0 - 9 ]* ' m p search hcs d m groupdict d['password'] d['password'] replace '\\@' '@' return d
def get presence jid from jid None get show False if not jid raise Invalid Jid Error request xmpp service pb Presence Request response xmpp service pb Presence Response request set jid to str jid if from jid request set from jid to str from jid try apiproxy stub map Make Sync Call 'xmpp' ' Get Presence' request response except apiproxy errors Application Error as e if e application error xmpp service pb Xmpp Service Error INVALID JID raise Invalid Jid Error else raise Error if get show show Noneif response has presence presence response presence if presence xmpp service pb Presence Response NORMAL show PRESENCE SHOW NON Eelif presence xmpp service pb Presence Response AWAY show PRESENCE SHOW AWA Yelif presence xmpp service pb Presence Response DO NOT DISTURB show PRESENCE SHOW DN Delif presence xmpp service pb Presence Response CHAT show PRESENCE SHOW CHA Telif presence xmpp service pb Presence Response EXTENDED AWAY show PRESENCE SHOW X Areturn bool response is available show else return bool response is available
def generate strings total strings string length 20 statements []for in range 0 total strings text '' join random choice string ascii letters + string digits + '' for in range string length statements append text return statements
def make libvirt Error error class msg error code None error domain None error message None error level None str 1 None str 2 None str 3 None int 1 None int 2 None exc error class msg exc err error code error domain error message error level str 1 str 2 str 3 int 1 int 2 return exc
def make libvirt Error error class msg error code None error domain None error message None error level None str 1 None str 2 None str 3 None int 1 None int 2 None exc error class msg exc err error code error domain error message error level str 1 str 2 str 3 int 1 int 2 return exc
def make libvirt Error error class msg error code None error domain None error message None error level None str 1 None str 2 None str 3 None int 1 None int 2 None exc error class msg exc err error code error domain error message error level str 1 str 2 str 3 int 1 int 2 return exc
def make libvirt Error error class msg error code None error domain None error message None error level None str 1 None str 2 None str 3 None int 1 None int 2 None exc error class msg exc err error code error domain error message error level str 1 str 2 str 3 int 1 int 2 return exc
def make libvirt Error error class msg error code None error domain None error message None error level None str 1 None str 2 None str 3 None int 1 None int 2 None exc error class msg exc err error code error domain error message error level str 1 str 2 str 3 int 1 int 2 return exc
def get provider user states user states []found user auths list models Django Storage user get social auth for user user for enabled provider in provider Registry enabled association Nonefor auth in found user auths if enabled provider match social auth auth association authbreakif enabled provider accepts logins or association states append Provider User State enabled provider user association return states
def Create Config **kwds return datastore rpc Configuration **kwds
def escape inp def conv obj ' Convertobj 'if isinstance obj list rv as unicode '[' + ' ' join conv o for o in obj + ']' elif isinstance obj dict rv as unicode '{' + ' ' join [ '%s %s' % conv key conv value for key value in obj iteritems ] + '}' else rv as unicode '"%s"' % as unicode obj replace '"' '\\"' return rvreturn conv inp
def is prerelease vers normalized version suggest normalized version vers if normalized is None return Trueparsed version normalized key normalized return any [any [ y in set ['a' 'b' 'c' 'rc' 'dev'] for y in x] for x in parsed]
def is prerelease vers normalized version suggest normalized version vers if normalized is None return Trueparsed version normalized key normalized return any [any [ y in set ['a' 'b' 'c' 'rc' 'dev'] for y in x] for x in parsed]
def add constant data prepend True has constant 'skip' if is using pandas data None or is recarray data from statsmodels tsa tsatools import add trendreturn add trend data trend 'c' prepend prepend has constant has constant x np asanyarray data if x ndim 1 x x[ None]elif x ndim > 2 raise Value Error ' Onlyimplementd 2 -dimensionalarrays' is nonzero const np ptp x axis 0 0 is nonzero const & np all x 0 0 axis 0 if is nonzero const any if has constant 'skip' return xelif has constant 'raise' raise Value Error 'dataalreadycontainsaconstant' x [np ones x shape[ 0 ] x]x x if prepend else x[ -1 ] return np column stack x
def get safelint counts filename report contents get report contents filename rule count regex re compile '^ ?P<rule id>[a-z-]+ \\s+ ?P<count>\\d+ violations' re MULTILINE total count regex re compile '^ ?P<count>\\d+ violationstotal' re MULTILINE violations {'rules' {}}for violation match in rule count regex finditer report contents try violations['rules'][violation match group 'rule id' ] int violation match group 'count' except Value Error violations['rules'][violation match group 'rule id' ] Nonetry violations['total'] int total count regex search report contents group 'count' except Attribute Error Value Error violations['total'] Nonereturn violations
def print bad print BAD OUTPU Tprint >>sys stdout BAD OUTPU Tprint >>sys stderr BAD OUTPU Tsys stdout write BAD OUTPUT sys stdout writelines [BAD OUTPUT] sys stderr write BAD OUTPUT sys stderr writelines [BAD OUTPUT]
def get featurestate name featurestate featurestate cache get name None if featurestate is None featurestate Feature State name world featurestate cache[name] featurestatereturn featurestate
def select url from video api html c json loads html video dic {}for i in c['mp 4 '] video dic[i['code']] i['http']quality preference list ['sdvd' 'hd' 'dvd' 'sd']url [video dic[quality] for quality in quality preference list if quality in video dic ][ 0 ]html get html url c json loads html return [i['urls'][ 0 ] for i in c['playlist']]
def select url from video api html c json loads html video dic {}for i in c['mp 4 '] video dic[i['code']] i['http']quality preference list ['sdvd' 'hd' 'dvd' 'sd']url [video dic[quality] for quality in quality preference list if quality in video dic ][ 0 ]html get html url c json loads html return [i['urls'][ 0 ] for i in c['playlist']]
def find files with cmd dirname ' ' try proc subprocess Popen ['hg' 'locate' '-I' os path abspath dirname ] stdin subprocess PIPE stderr subprocess PIPE stdout subprocess PIPE cwd dirname stdout stderr proc communicate except return []return stdout splitlines
def find files with cmd dirname ' ' try proc subprocess Popen ['hg' 'locate' '-I' os path abspath dirname ] stdin subprocess PIPE stderr subprocess PIPE stdout subprocess PIPE cwd dirname stdout stderr proc communicate except return []return stdout splitlines
def main if len sys argv > 1 write Output '' join sys argv[ 1 ] else settings start Main Loop From Constructor get New Repository
def date now now time time date arr np array [np floor now 1000000 0 * now - np floor now ] dtype 'int 32 ' return date arr
def resolve environment service dict environment None env {}for env file in service dict get u'env file' [] env update env vars from file env file env update parse environment service dict get u'environment' return dict resolve env var k v environment for k v in six iteritems env
def dict to name value data if isinstance data dict sorted data sorted data items key lambda s s[ 0 ] result []for name value in sorted data if isinstance value dict result append {name dict to name value value } else result append {name value} else result datareturn result
def buf lookup strided code proto defin name nd args ' ' join [ 'i%d s%d' % i i for i in range nd ] offset '+' join [ 'i%d*s%d' % i i for i in range nd ] proto putln '#define%s type buf %s type char* buf+%s ' % name args offset
def push monitor model name transfer experience False save records False assert hasattr model 'monitor' old monitor model monitorsetattr model name old monitor del model monitorif transfer experience monitor Monitor get monitor model assert monitor is not old monitor monitor num batches seen old monitor num batches seenmonitor examples seen old monitor examples seenmonitor epochs seen old monitor epochs seenif save records monitor on channel conflict 'copy history'monitor channels copy copy old monitor channels for key value in list monitor channels items value prereqs Nonereturn model
def push monitor model name transfer experience False save records False assert hasattr model 'monitor' old monitor model monitorsetattr model name old monitor del model monitorif transfer experience monitor Monitor get monitor model assert monitor is not old monitor monitor num batches seen old monitor num batches seenmonitor examples seen old monitor examples seenmonitor epochs seen old monitor epochs seenif save records monitor on channel conflict 'copy history'monitor channels copy copy old monitor channels for key value in list monitor channels items value prereqs Nonereturn model
def push monitor model name transfer experience False save records False assert hasattr model 'monitor' old monitor model monitorsetattr model name old monitor del model monitorif transfer experience monitor Monitor get monitor model assert monitor is not old monitor monitor num batches seen old monitor num batches seenmonitor examples seen old monitor examples seenmonitor epochs seen old monitor epochs seenif save records monitor on channel conflict 'copy history'monitor channels copy copy old monitor channels for key value in list monitor channels items value prereqs Nonereturn model
def push monitor model name transfer experience False save records False assert hasattr model 'monitor' old monitor model monitorsetattr model name old monitor del model monitorif transfer experience monitor Monitor get monitor model assert monitor is not old monitor monitor num batches seen old monitor num batches seenmonitor examples seen old monitor examples seenmonitor epochs seen old monitor epochs seenif save records monitor on channel conflict 'copy history'monitor channels copy copy old monitor channels for key value in list monitor channels items value prereqs Nonereturn model
def all languages languages [ lang[ 0 ] lang[ 1 ] for lang in settings ALL LANGUAGES]return sorted languages key lambda lang lang[ 1 ]
def reset app interactive True from django db import connection transactionfrom django conf import settingsapp name app name split ' ' [ -2 ]disable termcolors check for validation errors app sql list get sql reset app if interactive confirm raw input '\n Youhaverequestedadatabasereset \n Thiswill IRREVERSIBLYDESTRO Yanydatafor\nthe"%s"applicationinthedatabase"%s" \n Areyousureyouwanttodothis?\n\n Type\'yes\'tocontinue or\'no\'tocancel ' % app name settings DATABASE NAME else confirm 'yes'if confirm 'yes' try cursor connection cursor for sql in sql list cursor execute sql except Exception as e sys stderr write style ERROR " Error %scouldn'tbereset Possiblereasons \n* Thedatabaseisn'trunningorisn'tconfiguredcorrectly \n* Atleastoneofthedatabasetablesdoesn'texist \n* The SQ Lwasinvalid \n Hint Lookattheoutputof'django-admin pysqlreset%s' That'sthe SQ Lthiscommandwasn'tabletorun \n Thefullerror " % app name app name + style ERROR OUTPUT str e + '\n' transaction rollback unless managed sys exit 1 transaction commit unless managed else print ' Resetcancelled '
def create blockdevicedeployer test case hostname u' 192 0 2 1' node uuid uuid 4 eventually consistent False api loopbackblockdeviceapi for test test case if eventually consistent api Eventually Consistent Block Device API api async api Sync To Threaded Async API Adapter sync api reactor Non Reactor threadpool Non Thread Pool return Block Device Deployer hostname hostname node uuid node uuid block device api api async block device api async api mountroot mountroot for test test case
def get module file attribute package try loader pkgutil find loader package attr loader get filename package except Attribute Error Import Error file statement '\nimport%sasp\nprint p file \n'attr exec statement file statement % package if not attr strip raise Import Errorreturn attr
def create Memory Worker def perform if not worker pending return Falseif worker pending[ 0 ] is No More Work return Falseworker pending pop 0 return Trueworker Memory Worker return worker perform
def create Memory Worker def perform if not worker pending return Falseif worker pending[ 0 ] is No More Work return Falseworker pending pop 0 return Trueworker Memory Worker return worker perform
def lanscan getnode return find mac 'lanscan' '-ai' ['lan 0 '] lambda i 0
def applications apps call system profiler 'SP Applications Data Type' appdict {}for a in apps details dict a details pop ' name' if 'last Modified' in details details['last Modified'] details['last Modified'] strftime '%Y-%m-%d%H %M %S' if 'info' in details try details['info'] '{ 0 } {1 }' format details['info'][ 0 ] details['info'][ 1 ] strftime '%Y-%m-%d%H %M %S' except Index Error Attribute Error passif a[' name'] not in appdict appdict[a[' name']] []appdict[a[' name']] append details return appdict
def create issue **kwargs owner kwargs pop 'owner' None if owner is None owner User Factory create project kwargs pop 'project' None if project is None project Project Factory create owner owner defaults {'project' project 'owner' owner 'status' Issue Status Factory create project project 'milestone' Milestone Factory create project project 'priority' Priority Factory create project project 'severity' Severity Factory create project project 'type' Issue Type Factory create project project }defaults update kwargs return Issue Factory create **defaults
def cgsnapshot get all by group context group id filters None return IMPL cgsnapshot get all by group context group id filters
def get Screens if import Ctypes Failed return Falsecount CG Display Count cocoa CG Get Active Display List 0 None ctypes byref count displays CG Direct Display ID * count value cocoa CG Get Active Display List count value displays ctypes byref count return [id for id in displays]
def parse template token dict template html descriptors parser Slybot Template Page Parser token dict parser feed template html return parser to template descriptors
def parse template token dict template html descriptors parser Slybot Template Page Parser token dict parser feed template html return parser to template descriptors
def Opt re result Alt re Empty result str ' Opt %s ' % re return result
def set startup disk path if path not in list startup disks msg ' Invalidvaluepassedforpath \n Mustbeavalidstartupdiskasfoundinsystem list startup disks \n Passed {0 }' format path raise Salt Invocation Error msg cmd 'systemsetup-setstartupdisk{ 0 }' format path salt utils mac utils execute return result cmd return salt utils mac utils confirm updated path get startup disk
def set startup disk path if path not in list startup disks msg ' Invalidvaluepassedforpath \n Mustbeavalidstartupdiskasfoundinsystem list startup disks \n Passed {0 }' format path raise Salt Invocation Error msg cmd 'systemsetup-setstartupdisk{ 0 }' format path salt utils mac utils execute return result cmd return salt utils mac utils confirm updated path get startup disk
def check Torrent Finished logger info ' Checkingifanytorrentshavefinishedseedingandcanberemoved' with postprocessor lock my DB db DB Connection results my DB select 'SELECT*fromsnatched WHERE Status " Seed Processed"' for album in results hash album[' Folder Name']albumid album[' Album ID']torrent removed Falseif headphones CONFIG TORRENT DOWNLOADER 1 torrent removed transmission remove Torrent hash True else torrent removed utorrent remove Torrent hash True if torrent removed my DB action 'DELET Efromsnatched WHER Estatus " Seed Processed"and Album ID ?' [albumid] logger info ' Checkingfinishedtorrentscompleted'
def monomial key order None gens None if order is None order lexif isinstance order Symbol order str order if isinstance order str try order monomial key[order]except Key Error raise Value Error "supportedmonomialorderingsare'lex' 'grlex'and'grevlex' got%r" % order if hasattr order ' call ' if gens is not None def order expr return order expr as poly *gens degree list return orderreturn orderelse raise Value Error 'monomialorderingspecificationmustbeastringoracallable got%s' % order
def ensure valid usage key view func @wraps view func def inner request *args **kwargs usage key kwargs get 'usage key string' if usage key is not None try Usage Key from string usage key except Invalid Key Error raise Http 404 response view func request *args **kwargs return responsereturn inner
def ensure valid usage key view func @wraps view func def inner request *args **kwargs usage key kwargs get 'usage key string' if usage key is not None try Usage Key from string usage key except Invalid Key Error raise Http 404 response view func request *args **kwargs return responsereturn inner
def strip console codes output if '\x 1 b' not in output return outputold word ''return str ''index 0output '\x 1 b[m%s' % output console codes '%G \\[m \\[[\\d ]+[H Jnrm]'while index < len output tmp index 0tmp word ''while len re findall '\x 1 b' tmp word < 2 and index + tmp index < len output tmp word + output[ index + tmp index ]tmp index + 1tmp word re sub '\x 1 b' '' tmp word index + len tmp word + 1 if tmp word old word continuetry special code re findall console codes tmp word [0 ]except Index Error if index + tmp index < len output raise Value Error '%sisnotincludedintheknownconsolecodeslist%s' % tmp word console codes continueif special code tmp word continueold word tmp wordreturn str + tmp word[len special code ]return return str
def get record gcdns zone record type record name record id '%s %s' % record type record name try return gcdns get record zone id record id except Record Does Not Exist Error return None
def evaluate deltas e accepted functions Add if isinstance e accepted functions return e func *[evaluate deltas arg for arg in e args] elif isinstance e Mul deltas []indices {}for i in e args for s in i free symbols if s in indices indices[s] + 1else indices[s] 0if isinstance i Kronecker Delta deltas append i for d in deltas if indices[d killable index] e e subs d killable index d preferred index if len deltas > 1 return evaluate deltas e elif indices[d preferred index] and d indices contain equal information e e subs d preferred index d killable index if len deltas > 1 return evaluate deltas e else passreturn eelse return e
def evaluate deltas e accepted functions Add if isinstance e accepted functions return e func *[evaluate deltas arg for arg in e args] elif isinstance e Mul deltas []indices {}for i in e args for s in i free symbols if s in indices indices[s] + 1else indices[s] 0if isinstance i Kronecker Delta deltas append i for d in deltas if indices[d killable index] e e subs d killable index d preferred index if len deltas > 1 return evaluate deltas e elif indices[d preferred index] and d indices contain equal information e e subs d preferred index d killable index if len deltas > 1 return evaluate deltas e else passreturn eelse return e
def evaluate deltas e accepted functions Add if isinstance e accepted functions return e func *[evaluate deltas arg for arg in e args] elif isinstance e Mul deltas []indices {}for i in e args for s in i free symbols if s in indices indices[s] + 1else indices[s] 0if isinstance i Kronecker Delta deltas append i for d in deltas if indices[d killable index] e e subs d killable index d preferred index if len deltas > 1 return evaluate deltas e elif indices[d preferred index] and d indices contain equal information e e subs d preferred index d killable index if len deltas > 1 return evaluate deltas e else passreturn eelse return e
def evaluate deltas e accepted functions Add if isinstance e accepted functions return e func *[evaluate deltas arg for arg in e args] elif isinstance e Mul deltas []indices {}for i in e args for s in i free symbols if s in indices indices[s] + 1else indices[s] 0if isinstance i Kronecker Delta deltas append i for d in deltas if indices[d killable index] e e subs d killable index d preferred index if len deltas > 1 return evaluate deltas e elif indices[d preferred index] and d indices contain equal information e e subs d preferred index d killable index if len deltas > 1 return evaluate deltas e else passreturn eelse return e
def paint path fill stroke if stroke if fill return Op fill strokeelse return Op strokeelif fill return Op fillelse return Op endpath
def paint path fill stroke if stroke if fill return Op fill strokeelse return Op strokeelif fill return Op fillelse return Op endpath
def pmap field key type value type optional False invariant valid initial UNDEFINED factory None input factory factoryclass The Map Checked P Map key type key type value type value type The Map name key type name capitalize + value type name capitalize + 'P Map' if optional def mapping factory argument if argument is None return Noneelse return The Map argument else mapping factory The Mapif input factory factory lambda x mapping factory input factory x else factory mapping factoryif initial is UNDEFINED initial The Map else initial factory initial return field mandatory True initial initial type optional type The Map if optional else The Map factory factory invariant invariant
def Create Server root path login url port template dir None serve address '' allow skipped files False static caching True python path list sys path sdk dir SDK ROOT default partition None frontend port None interactive console True secret hash 'xxx' absolute root path os path realpath root path Fake File Set Allowed Paths absolute root path [sdk dir] Fake File Set Allow Skipped Files allow skipped files handler class Create Request Handler absolute root path login url static caching default partition interactive console secret hash secret hash if absolute root path not in python path list python path list insert 0 absolute root path server HTTP Server With Scheduler serve address port handler class queue stub apiproxy stub map apiproxy Get Stub 'taskqueue' if queue stub and hasattr queue stub ' Start Background Execution' queue stub Start Background Execution channel stub apiproxy stub map apiproxy Get Stub 'channel' if channel stub channel stub add event server Add Eventchannel stub update event server Update Eventserver frontend hostport '%s %d' % serve address or 'localhost' frontend port or port return server
def get Index form pos 'noun' def try Substitutions try Substitutions form substitutions lookup 1 dictionary dictionary For pos if lookup and dictionary has key form return dictionary[form]elif substitutions old new substitutions[ 0 ]substitute string replace form old new and substitute form if substitute and dictionary has key substitute return dictionary[substitute]return try Substitutions try Substitutions form substitutions[ 1 ] lookup 0 or substitute and try Substitutions try Substitutions substitute substitutions[ 1 ] return try Substitutions return Match form GET INDEX SUBSTITUTIONS
def get Index form pos 'noun' def try Substitutions try Substitutions form substitutions lookup 1 dictionary dictionary For pos if lookup and dictionary has key form return dictionary[form]elif substitutions old new substitutions[ 0 ]substitute string replace form old new and substitute form if substitute and dictionary has key substitute return dictionary[substitute]return try Substitutions try Substitutions form substitutions[ 1 ] lookup 0 or substitute and try Substitutions try Substitutions substitute substitutions[ 1 ] return try Substitutions return Match form GET INDEX SUBSTITUTIONS
def numpy cupy array almost equal nulp nulp 1 name 'xp' type check True accept error False def check func x y array assert array almost equal nulp x y nulp return make decorator check func name type check accept error
def leaky relu x slope 0 2 return Leaky Re LU slope x
@depends HAS PYVMOMI def update host password host username password new password protocol None port None service instance salt utils vmware get service instance host host username username password password protocol protocol port port account manager salt utils vmware get inventory service instance account Manageruser account vim host Local Account Manager Account Specification user account id usernameuser account password new passwordtry account manager Update User user account except vmodl fault System Error as err raise Command Execution Error err msg except vim fault User Not Found raise Command Execution Error "'vsphere update host password'failedforhost{ 0 } Userwasnotfound " format host except vim fault Already Exists passreturn True
def verify signed data token data if data startswith MAC MARKER try data data[len MAC MARKER ]mac data json loads base 64 b64 decode data mac compute mac token mac data['serialized data'] if mac mac data['mac'] raise Invalid Mac Error 'invalid MAC expect %s actual %s' % mac data['mac'] mac return json loads mac data['serialized data'] except raise Invalid Mac Error 'invalid MAC dataappearedtobecorrupted' else return data
def api doc section uses site False **kwargs def add metadata api function doc api function api doc getattr api function ' api doc' {} if 'extends' in kwargs kwargs['extends'] kwargs['extends'] api docdoc update kwargs doc['uses site'] uses sitedoc['section'] sectiondoc['lineno'] api function func code co firstlinenofile path abspath api function func code co filename root dir g paths['root']if file path startswith root dir doc['relfilepath'] relpath file path root dir doc['source root url'] 'https //github com/reddit/reddit/blob/master/r 2 /r 2 /'else for plugin in g plugins plugin root plugin pathif plugin source root url and file path startswith plugin root doc['relfilepath'] relpath file path plugin root doc['source root url'] plugin source root urlreturn api functionreturn add metadata
def get offset param params offset params pop 'offset' 0 return utils validate integer offset 'offset' 0 constants DB MAX INT
def get ipython package dir ipdir os path dirname I Python file return py 3 compat cast unicode ipdir fs encoding
def get ipython package dir ipdir os path dirname I Python file return py 3 compat cast unicode ipdir fs encoding
def make case flags info flags info flags & CASE FLAGS if info flags & ASCII flags & ~ FULLCASE return flags
def run job name force False ret {'comment' [] 'result' True}if not name ret['comment'] ' Jobnameisrequired 'ret['result'] Falseschedule list show all True return yaml False if name in schedule data schedule[name]if 'enabled' in data and not data['enabled'] and not force ret['comment'] ' Job{ 0 }isdisabled ' format name else out salt ['event fire'] {'name' name 'func' 'run job'} 'manage schedule' if out ret['comment'] ' Scheduling Job{ 0 }onminion ' format name else ret['comment'] ' Failedtorunjob{ 0 }onminion ' format name ret['result'] Falseelse ret['comment'] ' Job{ 0 }doesnotexist ' format name ret['result'] Falsereturn ret
def get texpath def get texpath try texpath get setting sublime platform {} get 'texpath' except Attribute Error exc info sys exc infotry reload sys modules[get texpath module ] texpath get setting sublime platform {} get 'texpath' except reraise *exc info return expand vars texpath if texpath is not None else None return run on main thread get texpath default value None
def libvlc audio equalizer get amp at index p equalizer u band f Cfunctions get 'libvlc audio equalizer get amp at index' None or Cfunction 'libvlc audio equalizer get amp at index' 1 1 None ctypes c float ctypes c void p ctypes c uint return f p equalizer u band
def one step mu u if np abs mu max > 1 0 return 1 0 compose linear fitting data mu u u['uu'] u['sing'] u['vv'] linalg svd u['M'] u['resi'][ ] u['y'][ ]for p in range u['nfit'] - 1 dot np dot u['uu'][p] u['y'] for k in range u['nterms'] - 1 u['resi'][k] u['resi'][k] - u['uu'][ p k ] * dot return np dot u['resi'] u['resi']
def get service hass config discovery info None api key config get CONF API KEY sender config get CONF SENDER recipient config get CONF RECIPIENT return Sendgrid Notification Service api key sender recipient
def get mock hadoop cmd args cmd log os path join get mock dir 'cmd log' if not os path exists cmd log return []with open cmd log as f return [shlex split cmd for cmd in f]
def train iis xs classes features f sharp alphas e empirical max newton iterations newton converge p yx calc p class given x xs classes features alphas N len xs newalphas alphas[ ]for i in range len alphas delta iis solve delta N features[i] f sharp e empirical[i] p yx max newton iterations newton converge newalphas[i] + deltareturn newalphas
def train iis xs classes features f sharp alphas e empirical max newton iterations newton converge p yx calc p class given x xs classes features alphas N len xs newalphas alphas[ ]for i in range len alphas delta iis solve delta N features[i] f sharp e empirical[i] p yx max newton iterations newton converge newalphas[i] + deltareturn newalphas
def newline with copy margin event b event current buffercursor start pos b document cursor position colb newline copy margin True b cursor up count 1 cursor end pos b document cursor position colif cursor start pos cursor end pos pos diff cursor start pos - cursor end pos b cursor right count pos diff
def newline with copy margin event b event current buffercursor start pos b document cursor position colb newline copy margin True b cursor up count 1 cursor end pos b document cursor position colif cursor start pos cursor end pos pos diff cursor start pos - cursor end pos b cursor right count pos diff
def create default options allowed methods allowed ' ' join allowed methods def on options req resp **kwargs resp status HTTP 204 resp set header ' Allow' allowed resp set header ' Content- Length' '0 ' return on options
def parse short time label label days hours minutes seconds '0 ' '0 ' '0 ' '0 ' if '-' in label days label label split '-' 1 time comp label split ' ' if len time comp 3 hours minutes seconds time compelif len time comp 2 minutes seconds time compelse raise Value Error " Invalidtimeformat weexpected'[[dd-]hh ]mm ss'or'mm ss ss' %s" % label try time sum int float seconds time sum + int minutes * 60 time sum + int hours * 3600 time sum + int days * 86400 return time sumexcept Value Error raise Value Error ' Non-numericvalueintimeentry %s' % label
def model to fit params model fitparam indices list range len model param names if any model fixed values or any model tied values params list model parameters param metrics model param metricsfor idx name in list enumerate model param names [ -1 ] if model fixed[name] or model tied[name] slice param metrics[name][u'slice']del params[slice ]del fitparam indices[idx]return np array params fitparam indices else return model parameters fitparam indices
def model to fit params model fitparam indices list range len model param names if any model fixed values or any model tied values params list model parameters param metrics model param metricsfor idx name in list enumerate model param names [ -1 ] if model fixed[name] or model tied[name] slice param metrics[name][u'slice']del params[slice ]del fitparam indices[idx]return np array params fitparam indices else return model parameters fitparam indices
def model to fit params model fitparam indices list range len model param names if any model fixed values or any model tied values params list model parameters param metrics model param metricsfor idx name in list enumerate model param names [ -1 ] if model fixed[name] or model tied[name] slice param metrics[name][u'slice']del params[slice ]del fitparam indices[idx]return np array params fitparam indices else return model parameters fitparam indices
def model to fit params model fitparam indices list range len model param names if any model fixed values or any model tied values params list model parameters param metrics model param metricsfor idx name in list enumerate model param names [ -1 ] if model fixed[name] or model tied[name] slice param metrics[name][u'slice']del params[slice ]del fitparam indices[idx]return np array params fitparam indices else return model parameters fitparam indices
def model to fit params model fitparam indices list range len model param names if any model fixed values or any model tied values params list model parameters param metrics model param metricsfor idx name in list enumerate model param names [ -1 ] if model fixed[name] or model tied[name] slice param metrics[name][u'slice']del params[slice ]del fitparam indices[idx]return np array params fitparam indices else return model parameters fitparam indices
def model to fit params model fitparam indices list range len model param names if any model fixed values or any model tied values params list model parameters param metrics model param metricsfor idx name in list enumerate model param names [ -1 ] if model fixed[name] or model tied[name] slice param metrics[name][u'slice']del params[slice ]del fitparam indices[idx]return np array params fitparam indices else return model parameters fitparam indices
def generate graphs with gzip open ATLAS FILE 'rb' as f line f readline while line and line startswith 'GRAPH' graph index int line[ 6 ] rstrip line f readline num nodes int line[ 6 ] rstrip edgelist []line f readline while line and not line startswith 'GRAPH' edgelist append line rstrip line f readline G nx Graph G name 'G{}' format graph index G add nodes from range num nodes G add edges from tuple map int e split for e in edgelist yield G
def check normal basic shape as symbolic dim as symbolic False rng CURAND Random Streams 234 if shape as symbolic shape constant 10 10 elif dim as symbolic shape 10 constant 10 else shape 10 10 u0 rng normal shape u1 rng normal shape f0 theano function [] u0 mode mode with gpu f1 theano function [] u1 mode mode with gpu v0 list [f 0 for i in range 3 ]v 1 list [f 1 for i in range 3 ]assert numpy all v0 list[ 0 ] v0 list[ 1 ] assert numpy all v1 list[ 0 ] v1 list[ 1 ] assert numpy all v0 list[ 0 ] v1 list[ 0 ] for v in v0 list assert v shape 10 10 assert v min < v max assert -0 5 < v mean < 0 5
def check normal basic shape as symbolic dim as symbolic False rng CURAND Random Streams 234 if shape as symbolic shape constant 10 10 elif dim as symbolic shape 10 constant 10 else shape 10 10 u0 rng normal shape u1 rng normal shape f0 theano function [] u0 mode mode with gpu f1 theano function [] u1 mode mode with gpu v0 list [f 0 for i in range 3 ]v 1 list [f 1 for i in range 3 ]assert numpy all v0 list[ 0 ] v0 list[ 1 ] assert numpy all v1 list[ 0 ] v1 list[ 1 ] assert numpy all v0 list[ 0 ] v1 list[ 0 ] for v in v0 list assert v shape 10 10 assert v min < v max assert -0 5 < v mean < 0 5
def simple Multivariate Normal Pdf z det Factor Sigma dim len z return exp -0 5 * dot z z / power 2 0 * pi dim / 2 0 * det Factor Sigma
def get repo backend mat return backend open repository url prefix mat
@require chanmsg@require privilege OP u' Youarenotachanneloperator ' @commands u'topic' def topic bot trigger if bot privileges[trigger sender][bot nick] < HALFOP return bot reply u"I'mnotachanneloperator " if not trigger group 2 returnchannel trigger sender lower narg 1mask Nonemask bot db get channel value channel u'topic mask' mask mask or default mask trigger mask mask replace u'%s' u'{}' narg len re findall u'{}' mask top trigger group 2 args []if top args top split u'~' narg if len args narg message u' Notenougharguments Yougave{} itrequires{} ' format len args narg return bot say message topic mask format *args bot write u'TOPIC' channel + u' ' + topic
def run changed drain False min size 500 limit 1000 sleep time 10 use safe get False verbose False if use safe get Cloud Search Uploader use safe get Trueamqp handle items 'cloudsearch changes' run changed min size min size limit limit drain drain sleep time sleep time verbose verbose
def run changed drain False min size 500 limit 1000 sleep time 10 use safe get False verbose False if use safe get Cloud Search Uploader use safe get Trueamqp handle items 'cloudsearch changes' run changed min size min size limit limit drain drain sleep time sleep time verbose verbose
def run changed drain False min size 500 limit 1000 sleep time 10 use safe get False verbose False if use safe get Cloud Search Uploader use safe get Trueamqp handle items 'cloudsearch changes' run changed min size min size limit limit drain drain sleep time sleep time verbose verbose
def run changed drain False min size 500 limit 1000 sleep time 10 use safe get False verbose False if use safe get Cloud Search Uploader use safe get Trueamqp handle items 'cloudsearch changes' run changed min size min size limit limit drain drain sleep time sleep time verbose verbose
def build config live server False dump json False dirty False if not dirty log info u' Cleaningsitedirectory' utils clean directory config[u'site dir'] else log warning u"A'dirty'buildisbeingperformed thiswilllikelyleadtoinaccuratenavigationandotherlinkswithinyoursite Thisoptionisdesignedforsitedevelopmentpurposesonly " if not live server log info u' Buildingdocumentationtodirectory %s' config[u'site dir'] if dirty and site directory contains stale files config[u'site dir'] log info u' Thedirectorycontainsstalefiles Use--cleantoremovethem ' if dump json build pages config dump json True dirty dirty returnfor theme dir in reversed config[u'theme dir'] log debug u' Copyingstaticassetsfromtheme %s' theme dir utils copy media files theme dir config[u'site dir'] exclude [u'* py' u'* pyc' u'* html'] dirty dirty log debug u' Copyingstaticassetsfromthedocsdir ' utils copy media files config[u'docs dir'] config[u'site dir'] dirty dirty log debug u' Buildingmarkdownpages ' build pages config dirty dirty
def read png filename x Reader filename try alpha x as Direct [3 ]['alpha']if alpha y x as RGBA 8 [2 ]n 4else y x as RGB 8 [2 ]n 3y np array [yy for yy in y] np uint 8 finally x file close y shape y shape[ 0 ] y shape[ 1 ] // n n return y
def read png filename x Reader filename try alpha x as Direct [3 ]['alpha']if alpha y x as RGBA 8 [2 ]n 4else y x as RGB 8 [2 ]n 3y np array [yy for yy in y] np uint 8 finally x file close y shape y shape[ 0 ] y shape[ 1 ] // n n return y
def get cached clients if O Auth state key not in current app extensions raise Runtime Error '%risnotinitialized ' % current app state current app extensions[O Auth state key]return state cached clients
def get cached clients if O Auth state key not in current app extensions raise Runtime Error '%risnotinitialized ' % current app state current app extensions[O Auth state key]return state cached clients
def validate bucket name name if ' ' in name or len name < 3 or len name > 63 or not name[ -1 ] isalnum return Falseelif ' -' in name or '- ' in name or ' ' in name or not name[ 0 ] isalnum return Falseelif re match '^ [0 - 9 ] [1 - 9 ][ 0 - 9 ] 1[ 0 - 9 ]{ 2 } 2[ 0 - 4 ][ 0 - 9 ] 25 [ 0 - 5 ] \\ {3 } [0 - 9 ] [1 - 9 ][ 0 - 9 ] 1[ 0 - 9 ]{ 2 } 2[ 0 - 4 ][ 0 - 9 ] 25 [ 0 - 5 ] $' name return Falseelse return True
def occurrence request event id template name 'schedule/occurrence html' *args **kwargs event occurrence get occurrence event id *args **kwargs back url request META get 'HTTP REFERER' None return render to response template name {'event' event 'occurrence' occurrence 'back url' back url} context instance Request Context request
def require version namespace version global versionsrepo GI Repository namespaces repo get loaded namespaces if namespace in namespaces loaded version repo get version namespace if loaded version version raise Value Error ' Namespace%sisalreadyloadedwithversion%s' % namespace loaded version if namespace in versions and versions[namespace] version raise Value Error ' Namespace%salreadyrequiresversion%s' % namespace versions[namespace] available versions repo enumerate versions namespace if not available versions raise Value Error ' Namespace%snotavailable' % namespace if version not in available versions raise Value Error ' Namespace%snotavailableforversion%s' % namespace version versions[namespace] version
def sample final epsilon final epsilons np array [0 1 0 01 0 5] probabilities np array [0 4 0 3 0 3] return np random choice final epsilons 1 p list probabilities [0 ]
def get mask X value to mask if value to mask ' Na N' or np isnan value to mask return np isnan X else return X value to mask
def add Y Groove derivation negatives x if derivation top Bevel < 0 0 returnbottom derivation height - derivation top Bevel top derivation heightgroove [complex x bottom complex x - derivation top Bevel top complex x + derivation top Bevel top ]triangle mesh add Symmetric Y Path negatives groove 1 0001 * derivation top Right imag
def start event loop qt 4 app None if app is None app get app qt 4 [''] if not is event loop running qt 4 app app in event loop Trueapp exec app in event loop Falseelse app in event loop True
def edns from text text return from text text edns by text
def validate gs bucket name bucket name if len bucket name > MAX BUCKET LEN raise Backup Validation Exception ' Bucketnamelengthshouldnotbelongerthan%d' % MAX BUCKET LEN if len bucket name < MIN BUCKET LEN raise Backup Validation Exception ' Bucketnamelengthshouldbelongerthan%d' % MIN BUCKET LEN if bucket name lower startswith 'goog' raise Backup Validation Exception ' Bucketnameshouldnotstartwitha"goog"prefix' bucket elements bucket name split ' ' for bucket element in bucket elements if len bucket element > MAX BUCKET SEGMENT LEN raise Backup Validation Exception ' Segmentlengthofbucketnameshouldnotbelongerthan%d' % MAX BUCKET SEGMENT LEN if not re match BUCKET PATTERN bucket name raise Backup Validation Exception ' Invalidbucketname"%s"' % bucket name
def S IFMT mode return mode & 61440
def S IFMT mode return mode & 61440
@publicdef refine root f s t eps None steps None fast False check sqf False try F Poly f except Generators Needed raise Polynomial Error "can'trefinearootof%s notapolynomial" % f return F refine root s t eps eps steps steps fast fast check sqf check sqf
def context dict revision ready for l10 n False revision approved False diff ''l 10 n revision document revisions filter is ready for localization True approved revision document revisions filter is approved True if ready for l10 n and l10 n count > 1 old rev l10 n order by '-created' [1 ]diff get diff for revision document old rev revision elif revision approved and approved count > 1 old rev approved order by '-created' [1 ]diff get diff for revision document old rev revision elif revision document current revision is not None old rev revision document current revisiondiff get diff for revision document old rev revision return {'document title' revision document title 'creator' revision creator 'host' Site objects get current domain 'diff' diff 'summary' clean revision summary ALLOWED TAGS ALLOWED ATTRIBUTES 'fulltext' clean revision content ALLOWED TAGS ALLOWED ATTRIBUTES }
def color dict to objects d colorspace 'hsv' result {}for k v in d items result[k] Color k v colorspace return result
def color dict to objects d colorspace 'hsv' result {}for k v in d items result[k] Color k v colorspace return result
def show DEBUG MSG 'show ' 3 None for figwin in Gcf get all fig managers figwin frame Show if show needmain and not matplotlib is interactive wxapp wx Get App if wxapp is not None imlr getattr wxapp ' Is Main Loop Running' lambda False if not imlr wxapp Main Loop show needmain False
def show DEBUG MSG 'show ' 3 None for figwin in Gcf get all fig managers figwin frame Show if show needmain and not matplotlib is interactive wxapp wx Get App if wxapp is not None imlr getattr wxapp ' Is Main Loop Running' lambda False if not imlr wxapp Main Loop show needmain False
def show DEBUG MSG 'show ' 3 None for figwin in Gcf get all fig managers figwin frame Show if show needmain and not matplotlib is interactive wxapp wx Get App if wxapp is not None imlr getattr wxapp ' Is Main Loop Running' lambda False if not imlr wxapp Main Loop show needmain False
def serialize args fn def wrapper obj *args **kwargs args [ utils strtime arg if isinstance arg datetime datetime else arg for arg in args]for k v in kwargs items if k 'exc val' and v kwargs[k] six text type v elif k 'exc tb' and v and not isinstance v six string types kwargs[k] '' join traceback format tb v elif isinstance v datetime datetime kwargs[k] utils strtime v if hasattr fn ' call ' return fn obj *args **kwargs return fn get None obj *args **kwargs wrapper remotable getattr fn 'remotable' False wrapper original fn fnreturn functools wraps fn wrapper if hasattr fn ' call ' else classmethod wrapper
def serialize args fn def wrapper obj *args **kwargs args [ utils strtime arg if isinstance arg datetime datetime else arg for arg in args]for k v in kwargs items if k 'exc val' and v kwargs[k] six text type v elif k 'exc tb' and v and not isinstance v six string types kwargs[k] '' join traceback format tb v elif isinstance v datetime datetime kwargs[k] utils strtime v if hasattr fn ' call ' return fn obj *args **kwargs return fn get None obj *args **kwargs wrapper remotable getattr fn 'remotable' False wrapper original fn fnreturn functools wraps fn wrapper if hasattr fn ' call ' else classmethod wrapper
def create rule instance rule return Security Rule rule['protocol'] rule['source address prefix'] rule['destination address prefix'] rule['access'] rule['direction'] id rule get 'id' None description rule get 'description' None source port range rule get 'source port range' None destination port range rule get 'destination port range' None priority rule get 'priority' None provisioning state rule get 'provisioning state' None name rule get 'name' None etag rule get 'etag' None
def setup platform hass config add devices discovery info None from limitlessled bridge import Bridgeconfig rewrite legacy config lights []for bridge conf in config get CONF BRIDGES bridge Bridge bridge conf get CONF HOST port bridge conf get CONF PORT DEFAULT PORT version bridge conf get CONF VERSION DEFAULT VERSION for group conf in bridge conf get CONF GROUPS group bridge add group group conf get CONF NUMBER group conf get CONF NAME group conf get CONF TYPE DEFAULT LED TYPE lights append Limitless LED Group factory group add devices lights
def jail path configured try jc Jails Configuration objects latest 'id' except Jails Configuration Does Not Exist jc Nonereturn jc and jc jc path and os path exists jc jc path
@not implemented for 'directed' def generalized degree G nodes None if nodes in G return next triangles and degree iter G nodes [3 ]return {v gd for v d t gd in triangles and degree iter G nodes }
@webob dec wsgify@util check accept 'application/json' def list usages req context req environ['placement context']uuid util wsgi path item req environ 'uuid' try resource provider objects Resource Provider get by uuid context uuid except exception Not Found as exc raise webob exc HTTP Not Found ' Noresourceproviderwithuuid% uuid sfound % error s' % {'uuid' uuid 'error' exc} json formatter util json error formatter usage objects Usage List get all by resource provider uuid context uuid response req responseresponse body encodeutils to utf 8 jsonutils dumps serialize usages resource provider usage req response content type 'application/json'return req response
def get cloud init mime cloud init if isinstance cloud init six string types cloud init json loads cloud init cloud init email mime multipart MIME Multipart if 'boothooks' in cloud init for script name script in six iteritems cloud init['boothooks'] script email mime text MIME Text script 'cloud-boothook' cloud init attach script if 'scripts' in cloud init for script name script in six iteritems cloud init['scripts'] script email mime text MIME Text script 'x-shellscript' cloud init attach script if 'cloud-config' in cloud init cloud config cloud init['cloud-config'] cloud config email mime text MIME Text safe dump cloud config 'cloud-config' cloud init attach cloud config return cloud init as string
def get converter map name args if not name in map converters raise Lookup Error 'theconverter%rdoesnotexist' % name if args args kwargs parse converter args args else args kwargs {}return map converters[name] map *args **kwargs
def init test testdir class options tag ''verbose Nonecont Falseharness 'autoserv'hostname Noneuser Nonelog Truereturn client setup job init test options testdir
def get subplotspec list axes list grid spec None subplotspec list []for ax in axes list axes or locator ax get axes locator if axes or locator is None axes or locator axif hasattr axes or locator 'get subplotspec' subplotspec axes or locator get subplotspec subplotspec subplotspec get topmost subplotspec gs subplotspec get gridspec if grid spec is not None if gs grid spec subplotspec Noneelif gs locally modified subplot params subplotspec Noneelse subplotspec Nonesubplotspec list append subplotspec return subplotspec list
def stop port global client cancelclient cancel Truetry if transparent torification s socket socket s connect '127 0 0 1' port s sendall 'GET/{ 0 s}/shutdown HTTP/ 1 1\r\n\r\n' format shutdown slug else urlopen 'http // 127 0 0 1 {0 d}/{ 1 s}/shutdown' format port shutdown slug read except pass
def Create Customizer Feed client feed name ad customizer feed service client Get Service ' Ad Customizer Feed Service' customizer feed {'feed Name' feed name 'feed Attributes' [{'type' 'STRING' 'name' ' Name'} {'type' 'STRING' 'name' ' Price'} {'type' 'DATE TIME' 'name' ' Date'}]}feed service operation {'operator' 'ADD' 'operand' customizer feed}response ad customizer feed service mutate [feed service operation] if response and 'value' in response feed response['value'][ 0 ]feed data {'feed Id' feed['feed Id'] 'name Id' feed['feed Attributes'][ 0 ]['id'] 'price Id' feed['feed Attributes'][ 1 ]['id'] 'date Id' feed['feed Attributes'][ 2 ]['id']}print " Feedwithname'%s'and ID%swasaddedwith \n DCTB Nameattribute ID%sandpriceattribute ID%sanddateattribute ID%s" % feed['feed Name'] feed['feed Id'] feed data['name Id'] feed data['price Id'] feed data['date Id'] return feedelse raise errors Google Ads Error ' Nofeedswereadded'
def order at oo a d t if a is zero return ooreturn d degree t - a degree t
def suspend instance id profile None conn auth profile return conn suspend instance id
@db api retry if session inactive @db api context manager writerdef set all quota usage dirty context resource dirty True query db utils model query context quota models Quota Usage query query filter by resource resource return query update {'dirty' dirty}
def demo high accuracy rules postag num sents 3000 min acc 0 96 min score 10
def build paged url request base request build absolute uri request path items [ k v for k in request GET if k 'page' for v in request GET getlist k if v]qsa urlencode items return u'%s?%s' % base qsa
def ensure Image global Imageif Image is None raise Runtime Error " Youaretryingtouse PIL-dependentfunctionalitybutdon'thave PI Linstalled "
def instance overrides method base instance method name bound method getattr instance method name unbound method getattr base method name return six get unbound function unbound method six get method function bound method
def read rle file obj header bit width debug logging count header >> 1 zero data '\x 00 \x 00 \x 00 \x 00 'width bit width + 7 // 8 data file obj read width data data + zero data[len data ] value struct unpack '<i' data [0 ]if debug logging logger debug u' Read RL Egroupwithvalue%sofbyte-width%sandcount%s' value width count for in range count yield value
def normprob z direction 'two-sided' mean 0 std 1 if direction 'two-sided' if z > 0 return 2 * 1 0 - norm cdf z mean std else return 2 * norm cdf z mean std elif direction 'high' return 1 - norm cdf z mean std elif direction 'low' return norm cdf z mean std else raise Value Error ' Unknowndirection '
def debugerror if has Templating out str djangoerror else out '<p> You\'vesetweb pytousethefancierdebugerrorerrormessages \nbutthesemessagesrequireyouinstallthe Cheetahtemplate\nsystem Formoreinformation see\n<ahref "http //webpy org/">theweb pywebsite</a> </p>\n\n<p> Inthemeantime here\'saplainolderrormessage </p>\n\n<pre>%s</pre>\n\n<p> Ifitsayssomethingabout\' Compiler\' thenit\'sprobably\nbecauseyou\'retryingtousetemplatesandyouhaven\'t\ninstalled Cheetah Seeabove </p>\n' % htmlquote traceback format exc context status '500 Internal Server Error'context headers [ ' Content- Type' 'text/html' ]context output out
def export spreadsheet client spreadsheet key worksheet id headers cleaned headers get cleaned headers headers spreadsheet lines [headers]rows feed client Get List Feed spreadsheet key worksheet id visibility 'public' projection 'values' while True found data Falsefor row in rows feed entry line []for header idx header cleaned header in enumerate zip headers cleaned headers try cell data row custom[cleaned header] textexcept Key Error raise Google Spreadsheet Error " Couldnotmapheader'%s'to Google Spreadsheet'sinternalrepresentationoftheheader Wesuggestchangingthenameoftheheaderinyour Google Spreadsheettobealphanumericifpossible asthiswilllikelysolvetheissue Notethatthenameisn't*required*tobealphanumeric butitmayfixissueswithconvertingto Google Spreadsheet'sinternalformatinsomecases " % header if not found data and header idx 0 and cell data lstrip startswith '#' line append cell data breakelse line append cell data found data Truespreadsheet lines append line next link rows feed Get Next Link if next link rows feed client Get next link href converter Spreadsheets List Feed From String else breakreturn spreadsheet lines
def llite fs directory for fs in os listdir directory fs name fs id fs partition '-' yield fs name
def split txt txt epub split size kb 0 if epub split size kb > 0 if isinstance txt unicode txt txt encode 'utf- 8 ' length byte len txt chunk size long length byte / int length byte / epub split size kb * 1024 + 2 if len filter lambda x len x > chunk size txt split '\n\n' txt '\n\n' join [split string separator line chunk size for line in txt split '\n\n' ] if isbytestring txt txt txt decode 'utf- 8 ' return txt
def expand authorized keys path path user home converted path ''had escape Falsefor char in path if had escape had escape Falseif char '%' converted path + '%'elif char 'u' converted path + userelif char 'h' converted path + homeelse error ' Authorized Keys Filepath unknowntokencharacter"%{ 0 }"' format char raise Command Execution Error error continueelif char '%' had escape Trueelse converted path + charif had escape error " Authorized Keys Filepath Lastcharactercan'tbeescapecharacter"raise Command Execution Error error return converted path
def rpc name dest None format 'xml' args None **kwargs ret {'name' name 'changes' {} 'result' True 'comment' ''}if args is not None ret['changes'] salt ['junos rpc'] name dest format *args **kwargs else ret['changes'] salt ['junos rpc'] name dest format **kwargs return ret
def make 2d a a np atleast 2d a T Tn a shape[ 0 ]newshape np product a shape[ 1 ] astype int a a reshape n newshape order 'F' return a
def make 2d a a np atleast 2d a T Tn a shape[ 0 ]newshape np product a shape[ 1 ] astype int a a reshape n newshape order 'F' return a
def cleanup tempdir the dir if os path exists the dir shutil rmtree the dir
def libvlc media player get title p mi f Cfunctions get 'libvlc media player get title' None or Cfunction 'libvlc media player get title' 1 None ctypes c int Media Player return f p mi
def follow redirects link sites None def follow url return sites None or urlparse urlparse url hostname in sites class Redirect Handler urllib 2 HTTP Redirect Handler def init self self last url Nonedef redirect request self req fp code msg hdrs newurl self last url newurlif not follow newurl return Noner urllib 2 HTTP Redirect Handler redirect request self req fp code msg hdrs newurl r get method lambda 'HEAD' return rif not follow link return linkredirect handler Redirect Handler opener urllib 2 build opener redirect handler req urllib 2 Request link req get method lambda 'HEAD' try with contextlib closing opener open req timeout 1 as site return site urlexcept return redirect handler last url if redirect handler last url else link
@click command u'doctor' @click option u'--site' help u'sitename' def doctor site None from frappe utils doctor import doctor as doctorreturn doctor site site
def find highest files directory unversioned regex files find matching files directory regex get numbers re compile ' \\d+ \\d+ \\d+ ' def max 2 a b ' Returnsthelargerofthetwovalues'av get numbers search os path basename a groups bv get numbers search os path basename b groups ret cmp av[ 0 ] bv[ 0 ] or cmp av[ 1 ] bv[ 1 ] or cmp av[ 2 ] bv[ 2 ] if ret < 0 return breturn aif len files > 0 return reduce max 2 files last chance os path join directory unversioned if os path exists last chance return last chancereturn None
def generate min degree gamma average degree max degree tolerance max iters min deg top max degreemin deg bot 1min deg mid min deg top - min deg bot / 2 + min deg bot itrs 0mid avg deg 0while abs mid avg deg - average degree > tolerance if itrs > max iters raise nx Exceeded Max Iterations ' Couldnotmatchaverage degree' mid avg deg 0for x in range int min deg mid max degree + 1 mid avg deg + x ** - gamma + 1 / zeta gamma min deg mid tolerance if mid avg deg > average degree min deg top min deg midmin deg mid min deg top - min deg bot / 2 + min deg bot else min deg bot min deg midmin deg mid min deg top - min deg bot / 2 + min deg bot itrs + 1return round min deg mid
def generate min degree gamma average degree max degree tolerance max iters min deg top max degreemin deg bot 1min deg mid min deg top - min deg bot / 2 + min deg bot itrs 0mid avg deg 0while abs mid avg deg - average degree > tolerance if itrs > max iters raise nx Exceeded Max Iterations ' Couldnotmatchaverage degree' mid avg deg 0for x in range int min deg mid max degree + 1 mid avg deg + x ** - gamma + 1 / zeta gamma min deg mid tolerance if mid avg deg > average degree min deg top min deg midmin deg mid min deg top - min deg bot / 2 + min deg bot else min deg bot min deg midmin deg mid min deg top - min deg bot / 2 + min deg bot itrs + 1return round min deg mid
def get host utilization context host ram mb disk gb instances instance get all by host context host vms len instances free ram mb ram mb - FLAGS reserved host memory mb free disk gb disk gb - FLAGS reserved host disk mb * 1024 work 0for instance in instances free ram mb - instance memory mbfree disk gb - instance root gbfree disk gb - instance ephemeral gbif instance vm state in [vm states BUILDING vm states REBUILDING vm states MIGRATING vm states RESIZING] work + 1return dict free ram mb free ram mb free disk gb free disk gb current workload work running vms vms
def delete config unused plugins cert manager delete config
def retrieve course course key course modulestore get course course key depth 0 if course is None raise Course Not Found Errorreturn course
def p4 Branches In Git branches Are In Remotes True branches {}cmdline 'gitrev-parse--symbolic'if branches Are In Remotes cmdline + '--remotes'else cmdline + '--branches'for line in read pipe lines cmdline line line strip if not line startswith 'p 4 /' continueif line 'p 4 /HEAD' continuebranch line[len 'p 4 /' ]branches[branch] parse Revision line return branches
@anonymous csrf@mobile template 'questions/{mobile/}marketplace refund html' def marketplace refund request template error message Noneif request method 'GET' form Marketplace Refund Form request user else form Marketplace Refund Form request user request POST if form is valid try form submit ticket return Http Response Redirect reverse 'questions marketplace aaq success' except Zendesk Error error message ZENDESK ERROR MESSAG Ereturn render request template {'form' form 'error message' error message}
def ensure tenant exists keystone tenant name tenant description check mode try tenant get tenant keystone tenant name except Key Error passelse if tenant description tenant description return False tenant id elif check mode return True tenant id else tenant update description tenant description return True tenant id if check mode return True None ks tenant keystone tenants create tenant name tenant name description tenant description enabled True return True ks tenant id
def get block count url string xblock type set block url ''if len xblock type set > 0 block url + '&all blocks true&block counts 'for index block type in enumerate xblock type set block url + block typeif index < len xblock type set - 1 block url + ' 'return block url
def get block count url string xblock type set block url ''if len xblock type set > 0 block url + '&all blocks true&block counts 'for index block type in enumerate xblock type set block url + block typeif index < len xblock type set - 1 block url + ' 'return block url
def get Ordered Nested Rings nested Rings insides []ordered Nested Rings []for loop Index in xrange len nested Rings nested Ring nested Rings[loop Index]other Loops []for before Index in xrange loop Index other Loops append nested Rings[before Index] boundary for after Index in xrange loop Index + 1 len nested Rings other Loops append nested Rings[after Index] boundary if is Path Entirely Inside Loops other Loops nested Ring boundary insides append nested Ring else ordered Nested Rings append nested Ring for outside in ordered Nested Rings outside get From Inside Surroundings insides return ordered Nested Rings
def get Ordered Nested Rings nested Rings insides []ordered Nested Rings []for loop Index in xrange len nested Rings nested Ring nested Rings[loop Index]other Loops []for before Index in xrange loop Index other Loops append nested Rings[before Index] boundary for after Index in xrange loop Index + 1 len nested Rings other Loops append nested Rings[after Index] boundary if is Path Entirely Inside Loops other Loops nested Ring boundary insides append nested Ring else ordered Nested Rings append nested Ring for outside in ordered Nested Rings outside get From Inside Surroundings insides return ordered Nested Rings
def assert crypto availability f @functools wraps f def wrapper *args **kwds if AES is None raise Crypto Unavailable Error return f *args **kwds return wrapper
def make providers strings providers if not providers return Noneif len providers 1 providers string providers[ 0 ]elif len providers 2 providers string '{first provider}and{second provider}' format first provider providers[ 0 ] second provider providers[ 1 ] else providers string '{first providers} and{last provider}' format first providers u' ' join providers[ -1 ] last provider providers[ -1 ] return providers string
def make providers strings providers if not providers return Noneif len providers 1 providers string providers[ 0 ]elif len providers 2 providers string '{first provider}and{second provider}' format first provider providers[ 0 ] second provider providers[ 1 ] else providers string '{first providers} and{last provider}' format first providers u' ' join providers[ -1 ] last provider providers[ -1 ] return providers string
def cont inputs f return typefilter inputvars f continuous types
def human Readable Mask mask s []for k v in FLAG TO HUMAN if k & mask s append v return s
def integer powers exprs terms {}for term in exprs for j in terms a cancel term / j if a is Rational terms[j] append term a breakelse terms[term] [ term S 1 ]newterms {}for term in terms common denom reduce ilcm [i as numer denom [1 ] for i in terms[term]] newterm term / common denom newmults [ i j * common denom for i j in terms[term]]newterms[newterm] newmultsreturn sorted iter newterms items key lambda item item[ 0 ] sort key
def main argv env None return Generic Argparse Implementation env main argv
def check cycle reg assignments return check cycle reg assignments []
def inspect environment app version os environ['CURRENT VERSION ID'] rsplit ' ' 1 [0 ]conf version int os environ get 'CURRENT CONFIGURATION VERSION' '0 ' development os environ get 'SERVER SOFTWARE' '' startswith ' Development/' return app version conf version development
@register u'quoted-insert' def quoted insert event event cli quoted insert True
def cpu affinity by task pid vcpu pid cmd "cat/proc/%s/task/%s/status grep Cpus allowed awk'{print$ 2 }'" % pid vcpu pid output system output cmd ignore status False return output
def cpu affinity by task pid vcpu pid cmd "cat/proc/%s/task/%s/status grep Cpus allowed awk'{print$ 2 }'" % pid vcpu pid output system output cmd ignore status False return output
def cpu affinity by task pid vcpu pid cmd "cat/proc/%s/task/%s/status grep Cpus allowed awk'{print$ 2 }'" % pid vcpu pid output system output cmd ignore status False return output
def prepare create request instance parent name 'projects/' + instance client project message messages v2 pb 2 Create Instance Request parent parent name instance id instance instance id instance data v2 pb 2 Instance display name instance display name cluster message clusters[instance instance id]cluster name instance name + '/clusters/' + instance instance id cluster location parent name + '/locations/' + instance cluster location id cluster serve nodes instance cluster serve nodesreturn message
def fgraph updated vars fgraph expanded inputs updated vars {}potential values list fgraph outputs if len expanded inputs len fgraph inputs raise Value Error 'expanded inputsmustmatchlen fgraph inputs ' for e input ivar in reversed list zip expanded inputs fgraph inputs if e input update is not None updated vars[ivar] potential values pop return updated vars
@endpoint u'/interface-data/tag-browser' def tag browser ctx rd db library id get library data ctx rd [ 2]etag u'%s %s %s' % db last modified rd username library id etag hashlib sha 1 etag encode u'utf- 8 ' hexdigest def generate db library id get library data ctx rd [ 2]return json ctx rd tag browser categories as json ctx rd db return rd etagged dynamic response etag generate
def get essid from cap bssid capfile if not program exists 'tshark' return ''cmd ['tshark' '-r' capfile '-R' 'wlan fc type subtype 0x 05 &&wlan sa %s' % bssid '-n']proc Popen cmd stdout PIPE stderr DN proc wait for line in proc communicate [0 ] split '\n' if line find 'SSID ' -1 essid line[ line find 'SSID ' + 5 ]print GR + '[+]' + W + 'guessedessid %s' % G + essid + W return essidprint R + '[ ]' + O + 'unabletoguessessid ' + W return ''
def get entity kind key path if isinstance key path entity pb Entity Proto key path key path key return key path path element list [ -1 ] type
def get Scalar Metric With Time Of Day Anomaly Params metric Data min Val None max Val None min Resolution None tm Implementation 'cpp' if min Resolution is None min Resolution 0 001 if min Val is None or max Val is None comp Min Val comp Max Val range Gen metric Data if min Val is None min Val comp Min Valif max Val is None max Val comp Max Valif min Val max Val max Val min Val + 1 if tm Implementation is 'cpp' param File Relative Path os path join 'anomaly params random encoder' 'best single metric anomaly params cpp json' elif tm Implementation is 'tm cpp' param File Relative Path os path join 'anomaly params random encoder' 'best single metric anomaly params tm cpp json' else raise Value Error ' Invalidstringfortm Implementation Trycpportm cpp' with resource stream name param File Relative Path as infile param Set json load infile fixup Random Encoder Params param Set min Val max Val min Resolution return param Set
def get Scalar Metric With Time Of Day Anomaly Params metric Data min Val None max Val None min Resolution None tm Implementation 'cpp' if min Resolution is None min Resolution 0 001 if min Val is None or max Val is None comp Min Val comp Max Val range Gen metric Data if min Val is None min Val comp Min Valif max Val is None max Val comp Max Valif min Val max Val max Val min Val + 1 if tm Implementation is 'cpp' param File Relative Path os path join 'anomaly params random encoder' 'best single metric anomaly params cpp json' elif tm Implementation is 'tm cpp' param File Relative Path os path join 'anomaly params random encoder' 'best single metric anomaly params tm cpp json' else raise Value Error ' Invalidstringfortm Implementation Trycpportm cpp' with resource stream name param File Relative Path as infile param Set json load infile fixup Random Encoder Params param Set min Val max Val min Resolution return param Set
def coarsen reduction x axes trim excess False for i in range x ndim if i not in axes axes[i] 1if trim excess ind tuple slice 0 - d % axes[i] if d % axes[i] else slice None None for i d in enumerate x shape x x[ind]newshape tuple concat [ x shape[i] / axes[i] axes[i] for i in range x ndim ] return reduction x reshape newshape axis tuple range 1 x ndim * 2 2
def coarsen reduction x axes trim excess False for i in range x ndim if i not in axes axes[i] 1if trim excess ind tuple slice 0 - d % axes[i] if d % axes[i] else slice None None for i d in enumerate x shape x x[ind]newshape tuple concat [ x shape[i] / axes[i] axes[i] for i in range x ndim ] return reduction x reshape newshape axis tuple range 1 x ndim * 2 2
def coarsen reduction x axes trim excess False for i in range x ndim if i not in axes axes[i] 1if trim excess ind tuple slice 0 - d % axes[i] if d % axes[i] else slice None None for i d in enumerate x shape x x[ind]newshape tuple concat [ x shape[i] / axes[i] axes[i] for i in range x ndim ] return reduction x reshape newshape axis tuple range 1 x ndim * 2 2
@docfillerdef uniform filter 1 d input size axis -1 output None mode 'reflect' cval 0 0 origin 0 input numpy asarray input if numpy iscomplexobj input raise Type Error ' Complextypenotsupported' axis ni support check axis axis input ndim if size < 1 raise Runtime Error 'incorrectfiltersize' output return value ni support get output output input if size // 2 + origin < 0 or size // 2 + origin > size raise Value Error 'invalidorigin' mode ni support extend mode to code mode nd image uniform filter 1 d input size axis output mode cval origin return return value
def parse rx excludes options fatal excluded patterns []for flag in options option parameter flagif option '--exclude-rx' try excluded patterns append re compile parameter except re error as ex fatal 'invalid--exclude-rxpattern %s %s' % parameter ex elif option '--exclude-rx-from' try f open resolve parent parameter except IO Error as e raise fatal "couldn'tread%s" % parameter for pattern in f readlines spattern pattern rstrip '\n' if not spattern continuetry excluded patterns append re compile spattern except re error as ex fatal 'invalid--exclude-rxpattern %s %s' % spattern ex return excluded patterns
def beaker registry xml parent data beaker XML Sub Element xml parent 'org jenkinsci plugins beakerbuilder Beaker Builder' job Source XML Sub Element beaker 'job Source' if 'content' in data and 'path' in data raise Jenkins Jobs Exception " Usejustoneof'content'or'path'" elif 'content' in data job Source Class 'org jenkinsci plugins beakerbuilder String Job Source'job Source set 'class' job Source Class XML Sub Element job Source 'job Content' text data['content']elif 'path' in data job Source Class 'org jenkinsci plugins beakerbuilder File Job Source'job Source set 'class' job Source Class XML Sub Element job Source 'job Path' text data['path']else raise Jenkins Jobs Exception " Useoneof'content'or'path'" XML Sub Element beaker 'download Files' text str data get 'download-logs' False lower
def beaker registry xml parent data beaker XML Sub Element xml parent 'org jenkinsci plugins beakerbuilder Beaker Builder' job Source XML Sub Element beaker 'job Source' if 'content' in data and 'path' in data raise Jenkins Jobs Exception " Usejustoneof'content'or'path'" elif 'content' in data job Source Class 'org jenkinsci plugins beakerbuilder String Job Source'job Source set 'class' job Source Class XML Sub Element job Source 'job Content' text data['content']elif 'path' in data job Source Class 'org jenkinsci plugins beakerbuilder File Job Source'job Source set 'class' job Source Class XML Sub Element job Source 'job Path' text data['path']else raise Jenkins Jobs Exception " Useoneof'content'or'path'" XML Sub Element beaker 'download Files' text str data get 'download-logs' False lower
def console auth token destroy all by instance context instance uuid return IMPL console auth token destroy all by instance context instance uuid
def bandpass pre cache lows 80 100 120 highs 1200 3000 8000 bands 2000 8000 rate 44100 for low in lows for high in highs butter 6 low high rate rate for band in bands butter 6 band rate rate
def add tag request question id tag name request POST get 'tag-name' '' strip if tag name question get object or 404 Question pk question id try canonical name add existing tag tag name question tags except Tag Does Not Exist if request user has perm 'taggit add tag' question tags add tag name canonical name tag nameelse raisetag added send sender Question question id question id tag name canonical name return question canonical name return None None
def rm job name response salt utils http query '{ 0 }/scheduler/job/{ 1 }' format base url name method 'DELETE' return True
def Credible Interval pmf percentage 90 cdf pmf Make Cdf prob 1 - percentage / 100 0 / 2 interval cdf Value prob cdf Value 1 - prob return interval
def get exploration rights exploration id strict True model exp models Exploration Rights Model get exploration id strict strict if model is None return Nonereturn get activity rights from model model feconf ACTIVITY TYPE EXPLORATION
def variance input labels None index None count sum sum c sq stats input labels index centered True return sum c sq / np asanyarray count astype float
def get updated changeset revisions from tool shed app tool shed url name owner changeset revision tool shed url common util get tool shed url from tool shed registry app tool shed url if tool shed url is None or name is None or owner is None or changeset revision is None message ' Unabletogetupdatedchangesetrevisionsfromthe Tool Shedbecauseoneormoreofthefollowing'message + 'requiredparametersis None tool shed url %s name %s owner %s changeset revision %s' % str tool shed url str name str owner str changeset revision raise Exception message params dict name name owner owner changeset revision changeset revision pathspec ['repository' 'updated changeset revisions']text util url get tool shed url password mgr app tool shed registry url auth tool shed url pathspec pathspec params params return text
def filter host field value match level None if match level is None if '#' in value match level 'pool'elif '@' in value match level 'backend'else match level 'host'conn str CONF database connectionif conn str startswith 'mysql' and conn str[ 5 ] in ['+' ' '] cmp value func binary value like op 'LIKEBINARY'else cmp value valuelike op 'LIKE'conditions [ field cmp value ]if match level 'pool' conditions append field op like op value + '#%' if match level 'host' conditions append field op like op value + '@%' return or *conditions
def require content content type def decorator f @functools wraps f def decorated function req if req content type content type raise webob exc HTTP Unsupported Media Type ' Themediatype% bad type sisnotsupported use% good type s' % {'bad type' req content type or ' None' 'good type' content type} json formatter json error formatter else return f req return decorated functionreturn decorator
@taskdef celery error **kw log info 'abouttoraiseanexceptionfromcelery' raise Runtime Error 'thisisanexceptionfromcelery'
def posix time to http posix time if posix time return email utils formatdate posix time usegmt True
def posix time to http posix time if posix time return email utils formatdate posix time usegmt True
def first hour average timeseries last hour threshold time - FULL DURATION - 3600 series pandas Series [x[ 1 ] for x in timeseries if x[ 0 ] < last hour threshold ] mean series mean std Dev series std t tail avg timeseries return abs t - mean > 3 * std Dev
def test unicode escapes s '"a\\xac\\u 1234 \\u 20 ac\\U 00008000 "'assert len s 29 entry tokenize s [0 ]assert len entry 5 assert [ord x for x in entry] [97 172 4660 8364 32768 ]
def bootstrap deb root arch flavor repo url None static qemu None pkgs None exclude pkgs None if repo url is None repo url 'http //ftp debian org/debian/'deb args ['debootstrap' '--foreign' '--arch' cmd quote arch '--include'] + pkgs + ['--exclude'] + exclude pkgs + [ cmd quote flavor cmd quote root cmd quote repo url ] salt ['cmd run'] deb args python shell False salt ['cmd run'] 'cp{qemu}{root}/usr/bin/' format qemu cmd quote static qemu root cmd quote root env {'DEBIAN FRONTEND' 'noninteractive' 'DEBCONF NONINTERACTIVE SEEN' 'true' 'LC ALL' 'C' 'LANGUAGE' 'C' 'LANG' 'C' 'PATH' '/sbin /bin /usr/bin'} salt ['cmd run'] 'chroot{root}/debootstrap/debootstrap--second-stage' format root cmd quote root env env salt ['cmd run'] 'chroot{root}dpkg--configure-a' format root cmd quote root env env
def gen Full pset min max type None def condition height depth ' Expressiongenerationstopswhenthedepthisequaltoheight 'return depth height return generate pset min max condition type
def gen Full pset min max type None def condition height depth ' Expressiongenerationstopswhenthedepthisequaltoheight 'return depth height return generate pset min max condition type
def get first defined data keys default value None for key in keys try return data[key]except Key Error passreturn default value
def trim silence audio threshold energy librosa feature rmse audio frames np nonzero energy > threshold indices librosa core frames to samples frames [1 ]return audio[indices[ 0 ] indices[ -1 ]] if indices size else audio[ 0 0]
def trim silence audio threshold energy librosa feature rmse audio frames np nonzero energy > threshold indices librosa core frames to samples frames [1 ]return audio[indices[ 0 ] indices[ -1 ]] if indices size else audio[ 0 0]
def has studio write access user course key return bool STUDIO EDIT CONTENT & get user permissions user course key
def Test Query Followed tester user cookie request dict validator tester validator user id device id tester Get Ids From Cookie user cookie def Make Viewpoint Dict followed ' Createaviewpointdictfromthefollowedobjectplusits\nreferencedviewpointobject \n'viewpoint validator Get Model Object Viewpoint followed viewpoint id follower validator Get Model Object Follower DB Key followed user id followed viewpoint id metadata dict viewpoint Make Metadata Dict follower if follower Can View Content and 'cover photo' in metadata dict photo dict metadata dict['cover photo']obj store Object Store Get Instance Object Store PHOTO Add Photo Urls obj store photo dict return metadata dictactual dict tester Send Request 'query followed' user cookie request dict followed validator Query Model Objects Followed user id limit request dict get 'limit' None start key request dict get 'start key' None expected dict {'viewpoints' [ Make Viewpoint Dict f for f in followed]}if len followed > 0 expected dict['last key'] followed[ -1 ] sort keytester Compare Response Dicts 'query followed' user id request dict expected dict actual dict return actual dict
@log calldef metadef resource type create context values global DAT Aresource type values copy deepcopy values resource type name resource type values['name']allowed attrubites ['name' 'protected']for resource type in DATA['metadef resource types'] if resource type['name'] resource type name raise exception Duplicate incorrect keys set resource type values keys - set allowed attrubites if incorrect keys raise exception Invalid ' Thekeys%sarenotvalid' % str incorrect keys resource type format resource type resource type values DATA['metadef resource types'] append resource type return resource type
def ensure regexp source n markers ' +~"\' [% ? *^ &- /\\'k 0while True k + 1if n - k < 0 return Truechar source[ n - k ]if char in markers return Trueif char '' and char '\n' breakreturn False
def ensure regexp source n markers ' +~"\' [% ? *^ &- /\\'k 0while True k + 1if n - k < 0 return Truechar source[ n - k ]if char in markers return Trueif char '' and char '\n' breakreturn False
def ensure regexp source n markers ' +~"\' [% ? *^ &- /\\'k 0while True k + 1if n - k < 0 return Truechar source[ n - k ]if char in markers return Trueif char '' and char '\n' breakreturn False
def colon separated user group arg try parts arg split ' ' 1 if len parts 1 uid name to uid parts[ 0 ] gid -1 else uid name to uid parts[ 0 ] gid name to gid parts[ 1 ] return uid gid except raise Value Error ' Invaliduser groupdefinition%s' % arg
def Get Valid Hosts For Cert cert if 'subject Alt Name' in cert return [x[ 1 ] for x in cert['subject Alt Name'] if x[ 0 ] lower 'dns' ]else return [x[ 0 ][ 1 ] for x in cert['subject'] if x[ 0 ][ 0 ] lower 'commonname' ]
def split line if not line strip raise exceptions Mpd No Command u' Nocommandgiven' match WORD RE match line if not match raise exceptions Mpd Unknown Error u' Invalidwordcharacter' whitespace command remainder match groups if whitespace raise exceptions Mpd Unknown Error u' Letterexpected' result [command]while remainder match PARAM RE match remainder if not match msg determine error message remainder raise exceptions Mpd Arg Error msg command command unquoted quoted remainder match groups result append unquoted or UNESCAPE RE sub u'\\g< 1 >' quoted return result
def seq 3 seq custom map None undef code ' Xaa' if custom map is None custom map {'*' ' Ter'}threecode dict list IUPAC Data protein letters 1to 3 extended items + list custom map items return '' join threecode get aa undef code for aa in seq
def equalize image mask None if image mode 'P' image image convert 'RGB' h image histogram mask lut []for b in range 0 len h 256 histo [ f for f in h[b b + 256 ] if f]if len histo < 1 lut extend list range 256 else step functools reduce operator add histo - histo[ -1 ] // 255 if not step lut extend list range 256 else n step // 2 for i in range 256 lut append n // step n n + h[ i + b ] return lut image lut
@taskdef apiserver ctx port 8000 wait True autoreload True host '127 0 0 1' pty True env os environ copy cmd 'DJANGO SETTINGS MODULE api base settings{}manage pyrunserver{} {}--nothreading' format sys executable host port if not autoreload cmd + '--noreload'if settings SECURE MODE cmd cmd replace 'runserver' 'runsslserver' cmd + '--certificate{}--key{}' format settings OSF SERVER CERT settings OSF SERVER KEY if wait return ctx run cmd echo True pty pty from subprocess import Popenreturn Popen cmd shell True env env
def sm backend conf create context values return IMPL sm backend conf create context values
def get filter query args query Q for arg in args if hasattr Document arg and args[arg] append Q **{str 'document ' + arg + ' id' long args[arg] } append append Q **{str 'file ' + arg + ' id' long args[arg] } append append Q **{str 'weblink ' + arg + ' id' long args[arg] } query query & append return query
def number aware alphabetical cmp str 1 str 2 def flatten tokens tokens l []for token in tokens if isinstance token str for char in token l append char else assert isinstance token float l append token return lseq 1 flatten tokens tokenize by number str 1 seq 2 flatten tokens tokenize by number str 2 l min len seq 1 len seq 2 i 0while i < l if isinstance seq 1 [i] float and isinstance seq 2 [i] string types return -1 elif isinstance seq 1 [i] string types and isinstance seq 2 [i] float return 1elif seq 1 [i] < seq 2 [i] return -1 elif seq 1 [i] > seq 2 [i] return 1i + 1if len seq 1 < len seq 2 return -1 elif len seq 1 > len seq 2 return 1return 0
def setup proximity component hass name config ignored zones config get CONF IGNORED ZONES proximity devices config get CONF DEVICES tolerance config get CONF TOLERANCE proximity zone nameunit of measurement config get CONF UNIT OF MEASUREMENT hass config units length unit zone id 'zone {}' format proximity zone proximity Proximity hass proximity zone DEFAULT DIST TO ZONE DEFAULT DIR OF TRAVEL DEFAULT NEAREST ignored zones proximity devices tolerance zone id unit of measurement proximity entity id '{} {}' format DOMAIN proximity zone proximity update ha state track state change hass proximity devices proximity check proximity state change return True
def blend image img bgcolor u'#ffffff' canvas Q Image img size Q Image Format RGB 32 canvas fill Q Color bgcolor overlay image img canvas return canvas
def blend image img bgcolor u'#ffffff' canvas Q Image img size Q Image Format RGB 32 canvas fill Q Color bgcolor overlay image img canvas return canvas
def load parameters file with closing load parameters npzfile file as npz file return {name replace SERIALIZATION BRICK DELIMITER BRICK DELIMITER value for name value in npz file items }
def openshift build verify registry xml parent data osb XML Sub Element xml parent 'com openshift jenkins plugins pipeline Open Shift Build Verifier' mapping [ 'api-url' 'api URL' 'https //openshift default svc cluster local' 'bld-cfg' 'bld Cfg' 'frontend' 'namespace' 'namespace' 'test' 'auth-token' 'auth Token' '' 'verbose' 'verbose' False ]convert mapping to xml osb data mapping fail required True
def openshift build verify registry xml parent data osb XML Sub Element xml parent 'com openshift jenkins plugins pipeline Open Shift Build Verifier' mapping [ 'api-url' 'api URL' 'https //openshift default svc cluster local' 'bld-cfg' 'bld Cfg' 'frontend' 'namespace' 'namespace' 'test' 'auth-token' 'auth Token' '' 'verbose' 'verbose' False ]convert mapping to xml osb data mapping fail required True
def openshift build verify registry xml parent data osb XML Sub Element xml parent 'com openshift jenkins plugins pipeline Open Shift Build Verifier' mapping [ 'api-url' 'api URL' 'https //openshift default svc cluster local' 'bld-cfg' 'bld Cfg' 'frontend' 'namespace' 'namespace' 'test' 'auth-token' 'auth Token' '' 'verbose' 'verbose' False ]convert mapping to xml osb data mapping fail required True
def openshift build verify registry xml parent data osb XML Sub Element xml parent 'com openshift jenkins plugins pipeline Open Shift Build Verifier' mapping [ 'api-url' 'api URL' 'https //openshift default svc cluster local' 'bld-cfg' 'bld Cfg' 'frontend' 'namespace' 'namespace' 'test' 'auth-token' 'auth Token' '' 'verbose' 'verbose' False ]convert mapping to xml osb data mapping fail required True
def triangle code X centroids X sqr T sqr X sum axis 1 dimshuffle 0 'x' c sqr T sqr centroids sum axis 1 dimshuffle 'x' 0 c sqr name 'c sqr' Xc T dot X centroids T Xc name ' Xc'sq dists c sqr + X sqr - 2 0 * Xc sq dists safe T clip sq dists 0 0 1e+ 30 Z T sqrt sq dists safe Z name 'Z'mu Z mean axis 1 mu name 'mu'mu mu dimshuffle 0 'x' mu name 'mu broadcasted'rval T clip mu - Z 0 0 1e+ 30 rval name 'triangle code'return rval
def get release group image list releasegroupid return caa request releasegroupid entitytype 'release-group'
def iter Services xrd tree xrd get Yadis XRD xrd tree return prio Sort xrd findall service tag
@contextmanagerdef current user user old user get current user set current user user yield set current user old user
def get unicode modules modules []try import codecsmodules append 'codecs' except Import Error logger error " Cannotdetectmodules'codecs' " return modules
def get unicode modules modules []try import codecsmodules append 'codecs' except Import Error logger error " Cannotdetectmodules'codecs' " return modules
def get unicode modules modules []try import codecsmodules append 'codecs' except Import Error logger error " Cannotdetectmodules'codecs' " return modules
def choose plugin prepared question opts [ plugin ep description with name + '[ Misconfigured]' if plugin ep misconfigured else '' for plugin ep in prepared]while True disp z util interfaces I Display code index disp menu question opts help label ' More Info' force interactive True if code display util OK plugin ep prepared[index]if plugin ep misconfigured z util interfaces I Display notification ' Theselectedpluginencounteredanerrorwhileparsingyourserverconfigurationandcannotbeused Theerrorwas \n\n{ 0 }' format plugin ep prepare pause False else return plugin epelif code display util HELP if prepared[index] misconfigured msg ' Reported Error %s' % prepared[index] prepare else msg prepared[index] init more info z util interfaces I Display notification msg force interactive True else return None
def checksum data start 0 skip word None if len data % 2 0 arr array array 'H' data[ -1 ] else arr array array 'H' data if skip word is not None for i in range 0 len arr if i skip word continuestart + arr[i]else for i in range 0 len arr start + arr[i]if len data % 2 0 start + struct unpack 'H' data[ -1 ] + '\x 00 ' [0 ]start start >> 16 + start & 65535 start + start >> 16 return ntohs ~ start & 65535
def wait on interfaces interfaces timeout 10 result defaultdict list timeout time time + timeout while len result < len interfaces and time time < timeout rin [i for i in interfaces values ]win [i for i in interfaces values if i unsent requests] rout wout xout select select rin win [] 1 for interface in wout interface send requests for interface in rout responses interface get responses if responses result[interface server] extend responses return result
def Version Is Supported desired Version service Version Description root service Version Descriptionif root tag 'namespaces' if root get 'version' '1 0' raise Runtime Error 'vim Service Versions xmlhasversion%s whichisnotunderstood' % root get 'version' desired Version Id version Id Map[desired Version]supported Version Nonefor namespace in root findall 'namespace' version Id namespace findtext 'version' if version Id desired Version Id return Trueelse for version Id in namespace findall 'prior Versions/version' if version Id text desired Version Id return Trueelse wsdl NS 'http //schemas xmlsoap org/wsdl/'import Element service Version Description find ' //{%s}import' % wsdl NS supported Version version Map[import Element get 'namespace' [4 ]]if Is Child Version supported Version desired Version return Truereturn False
def Version Is Supported desired Version service Version Description root service Version Descriptionif root tag 'namespaces' if root get 'version' '1 0' raise Runtime Error 'vim Service Versions xmlhasversion%s whichisnotunderstood' % root get 'version' desired Version Id version Id Map[desired Version]supported Version Nonefor namespace in root findall 'namespace' version Id namespace findtext 'version' if version Id desired Version Id return Trueelse for version Id in namespace findall 'prior Versions/version' if version Id text desired Version Id return Trueelse wsdl NS 'http //schemas xmlsoap org/wsdl/'import Element service Version Description find ' //{%s}import' % wsdl NS supported Version version Map[import Element get 'namespace' [4 ]]if Is Child Version supported Version desired Version return Truereturn False
def get keys **kwargs return get async keys **kwargs get result
def median input labels None index None return select input labels index find median True [0 ]
def Check Geo Point geo point if not isinstance geo point Geo Point raise Type Error 'geo pointmustbea Geo Point got%s' % geo point class name return geo point
def is valid definition params language return not exclude bracket params get 'enabled' BH ENABLED params get 'language filter' BH LANG FILTER params get 'language list' BH LANG LIST language and params get 'open' None is not None and params get 'close' None is not None
def main zk connection locations appscale info get zk locations string zookeeper zk ZK Transaction host zk connection locations start gc False db info appscale info get db info table db info[' table']master appscale info get db master ip datastore path '{ 0 } 8888 ' format master ds groomer Datastore Groomer zookeeper table datastore path logging debug ' Tryingtogetgroomerlock ' if ds groomer get groomer lock logging info ' Gotthegroomerlock ' try ds groomer run groomer except Exception as exception logging exception ' Encounteredexception{}whilerunningthegroomer ' format str exception try ds groomer zoo keeper release lock with path zk DS GROOM LOCK PATH except zk ZK Transaction Exception as zk exception logging error ' Unabletoreleasezklock{ 0 } ' format str zk exception except zk ZK Internal Exception as zk exception logging error ' Unabletoreleasezklock{ 0 } ' format str zk exception finally zookeeper close else logging info ' Didnotgetthegroomerlock '
def main zk connection locations appscale info get zk locations string zookeeper zk ZK Transaction host zk connection locations start gc False db info appscale info get db info table db info[' table']master appscale info get db master ip datastore path '{ 0 } 8888 ' format master ds groomer Datastore Groomer zookeeper table datastore path logging debug ' Tryingtogetgroomerlock ' if ds groomer get groomer lock logging info ' Gotthegroomerlock ' try ds groomer run groomer except Exception as exception logging exception ' Encounteredexception{}whilerunningthegroomer ' format str exception try ds groomer zoo keeper release lock with path zk DS GROOM LOCK PATH except zk ZK Transaction Exception as zk exception logging error ' Unabletoreleasezklock{ 0 } ' format str zk exception except zk ZK Internal Exception as zk exception logging error ' Unabletoreleasezklock{ 0 } ' format str zk exception finally zookeeper close else logging info ' Didnotgetthegroomerlock '
def get course enrollment details course id include expired False cache key u'enrollment course details {course id} {include expired}' format course id course id include expired include expired cached enrollment data Nonetry cached enrollment data cache get cache key except Exception log exception u' Erroroccurredwhileretrievingcourseenrollmentdetailsfromthecache' if cached enrollment data log info u' Getenrollmentdataforcourse%s cached ' course id return cached enrollment datacourse enrollment details data api get course enrollment info course id include expired try cache time out getattr settings 'ENROLLMENT COURSE DETAILS CACHE TIMEOUT' 60 cache set cache key course enrollment details cache time out except Exception log exception u' Erroroccurredwhilecachingcourseenrollmentdetailsforcourse%s' course id raise errors Course Enrollment Error u' Anunexpectederroroccurredwhileretrievingcourseenrollmentdetails ' log info u' Getenrollmentdataforcourse%s' course id return course enrollment details
def make server host port app server class WSGI Server handler class WSGI Request Handler server server class host port handler class server set app app return server
def whathdr filename f open filename 'rb' h f read 512 for tf in tests res tf h f if res return resreturn None
def dup sign variations f K prev k K zero 0 for coeff in f if K is negative coeff * prev k + 1if coeff prev coeffreturn k
@contextmanagerdef set trap app trap Trap prev tls state tls state set default app trap class Non TLS object current app trap state tls Non TLS yield state tls prev tls
@contextmanagerdef set trap app trap Trap prev tls state tls state set default app trap class Non TLS object current app trap state tls Non TLS yield state tls prev tls
def assert before lst item 1 item 2 assert less lst index item 1 lst index item 2 '{ 0 r}appearsbefore{ 1 r}' format item 1 item 2
def assert before lst item 1 item 2 assert less lst index item 1 lst index item 2 '{ 0 r}appearsbefore{ 1 r}' format item 1 item 2
def generate module src if not src return UNKNOWN MODULE filename ext splitext urlsplit src path if ext not in ' js' ' jsx' ' coffee' return UNKNOWN MODUL Eif filename endswith ' min' filename filename[ -4 ]tokens filename split '/' for idx token in enumerate tokens if VERSION RE match token return '/' join tokens[ idx + 1 ] return CLEAN MODULE RE sub '' filename or UNKNOWN MODULE
def generate module src if not src return UNKNOWN MODULE filename ext splitext urlsplit src path if ext not in ' js' ' jsx' ' coffee' return UNKNOWN MODUL Eif filename endswith ' min' filename filename[ -4 ]tokens filename split '/' for idx token in enumerate tokens if VERSION RE match token return '/' join tokens[ idx + 1 ] return CLEAN MODULE RE sub '' filename or UNKNOWN MODULE
def generate module src if not src return UNKNOWN MODULE filename ext splitext urlsplit src path if ext not in ' js' ' jsx' ' coffee' return UNKNOWN MODUL Eif filename endswith ' min' filename filename[ -4 ]tokens filename split '/' for idx token in enumerate tokens if VERSION RE match token return '/' join tokens[ idx + 1 ] return CLEAN MODULE RE sub '' filename or UNKNOWN MODULE
@click command u'version' def get version frappe init u'' for m in sorted frappe get all apps module frappe get module m if hasattr module u' version ' print u'{ 0 }{ 1 }' format m module version
def reg name ret {'name' name 'changes' {} 'comment' '' 'result' True}now time time if 'status' not in reg reg ['status'] {} reg ['status']['val'] {}for event in events if fnmatch fnmatch event['tag'] 'salt/beacon/*/status/*' idata {'recv time' now}for key in event['data']['data'] if key in 'id' 'recv time' continueidata[key] event['data'][key] reg ['status']['val'][event['data']['data']['id']] idataret['changes'][event['data']['data']['id']] Truereturn ret
def test regression futuretimes 4302 from utils exceptions import Astropy Warningfrom builtin frames import utilsif hasattr utils u' warningregistry ' utils warningregistry clear with catch warnings as found warnings future time Time u' 2511 - 5 - 1 ' c CIRS 1 * u deg 2 * u deg obstime future time c transform to ITRS obstime future time if not isinstance iers IERS Auto iers table iers IERS Auto saw iers warnings Falsefor w in found warnings if issubclass w category Astropy Warning if u' some timesareoutsideofrangecoveredby IER Stable' in str w message saw iers warnings Truebreakassert saw iers warnings u' Neversaw IER Swarning'
def strip esc sequence txt if isinstance txt six string types return txt replace '\x 1 b' '?' else return txt
def strip esc sequence txt if isinstance txt six string types return txt replace '\x 1 b' '?' else return txt
def strip esc sequence txt if isinstance txt six string types return txt replace '\x 1 b' '?' else return txt
@for app 'whois' at least 1 def match command return True
def write summary allcodes print '\n\n----------------------------------------------------------------------------\n Checkedallbinaryfilesfor CP Uextensioncodes Foundthefollowingcodes 'for code in allcodes print codeprint '\n----------------------------------------------------------------------------\n'
def setup platform hass config add devices callback discovery info None configured partitions discovery info['partitions']for part num in configured partitions device config data PARTITION SCHEMA configured partitions[part num] device Envisalink Sensor device config data[CONF PARTITIONNAME] part num EVL CONTROLLER alarm state['partition'][part num] EVL CONTROLLER add devices callback [ device]
def str 2 records filename rel recs []contents nltk data load u'corpora/chat 80 /%s' % filename format u'text' for line in contents splitlines if line startswith rel line re sub rel + u'\\ ' u'' line line re sub u'\\ \\ $' u'' line record line split u' ' recs append record return recs
def strip between a b string p '%s *?%s' % a b p re compile p re DOTALL re I return re sub p '' string
def strip between a b string p '%s *?%s' % a b p re compile p re DOTALL re I return re sub p '' string
def thread value def add attribute function function thread valuereturn functionreturn add attribute
def required length nmin nmax class Required Length Action def call self parser args values option string None if not nmin < len values < nmax raise Argument Error self u'requiresbetween%sand%sarguments' % nmin nmax setattr args self dest values return Required Length
def get table item doc name return doc xpath '//th[contains text "%s" ]/following-sibling td' % name [0 ]
def absent name region None key None keyid None profile None ret {'name' name 'result' True 'comment' '' 'changes' {}}exists salt ['boto asg launch configuration exists'] name region region key key keyid keyid profile profile if exists if opts ['test'] ret['comment'] ' Launchconfigurationsettobedeleted 'ret['result'] Nonereturn retdeleted salt ['boto asg delete launch configuration'] name region region key key keyid keyid profile profile if deleted ret['changes']['old'] nameret['changes']['new'] Noneret['comment'] ' Deletedlaunchconfiguration 'else ret['result'] Falseret['comment'] ' Failedtodeletelaunchconfiguration 'else ret['comment'] ' Launchconfigurationdoesnotexist 'return ret
@cli command name u'gh-deploy' @click option u'-c' u'--clean/--dirty' is flag True default True help clean help @click option u'-f' u'--config-file' type click File u'rb' help config help @click option u'-m' u'--message' help commit message help @click option u'-b' u'--remote-branch' help remote branch help @click option u'-r' u'--remote-name' help remote name help @click option u'--force' is flag True help force help @common optionsdef gh deploy command config file clean message remote branch remote name force try cfg config load config config file config file remote branch remote branch remote name remote name build build cfg dirty not clean gh deploy gh deploy cfg message message force force except exceptions Configuration Error as e raise System Exit u'\n' + str e
@cli command name u'gh-deploy' @click option u'-c' u'--clean/--dirty' is flag True default True help clean help @click option u'-f' u'--config-file' type click File u'rb' help config help @click option u'-m' u'--message' help commit message help @click option u'-b' u'--remote-branch' help remote branch help @click option u'-r' u'--remote-name' help remote name help @click option u'--force' is flag True help force help @common optionsdef gh deploy command config file clean message remote branch remote name force try cfg config load config config file config file remote branch remote branch remote name remote name build build cfg dirty not clean gh deploy gh deploy cfg message message force force except exceptions Configuration Error as e raise System Exit u'\n' + str e
def Find Previous Matching Angle Bracket clean lines linenum init prefix line init prefixnesting stack ['>']while True match Search '^ * [<> \\[\\]] [^<> \\[\\]]*$' line if match operator match group 2 line match group 1 if nesting stack[ -1 ] '>' if operator in '>' ' ' ']' nesting stack append operator elif operator '<' nesting stack pop if not nesting stack return Trueelif operator ' ' return Trueelse return Falseelif operator in '>' ' ' ']' nesting stack append operator elif operator in ' ' '[' nesting stack pop else linenum - 1if linenum < 0 breakline clean lines elided[linenum]return False
def Find Previous Matching Angle Bracket clean lines linenum init prefix line init prefixnesting stack ['>']while True match Search '^ * [<> \\[\\]] [^<> \\[\\]]*$' line if match operator match group 2 line match group 1 if nesting stack[ -1 ] '>' if operator in '>' ' ' ']' nesting stack append operator elif operator '<' nesting stack pop if not nesting stack return Trueelif operator ' ' return Trueelse return Falseelif operator in '>' ' ' ']' nesting stack append operator elif operator in ' ' '[' nesting stack pop else linenum - 1if linenum < 0 breakline clean lines elided[linenum]return False
def get devmm name name os path expanduser name if is chrdev name or is blkdev name stat structure os stat name return os major stat structure st rdev os minor stat structure st rdev else return 0 0
def is Procedure Done Or File Is Empty gcode Text procedure if gcode Text '' return Truereturn is Procedure Done gcode Text procedure
def is Procedure Done Or File Is Empty gcode Text procedure if gcode Text '' return Truereturn is Procedure Done gcode Text procedure
def remove hosts file known hosts file '%s/ ssh/known hosts' % os getenv 'HOME' if os path isfile known hosts file logging debug ' Deletingknownhostsfile%s' known hosts file os remove known hosts file
def find vector rotation a b R np eye 3 v np cross a b if np allclose v 0 0 return Rs np dot v v c np dot a b vx skew symmetric cross v R + vx + np dot vx vx * 1 - c / s return R
def find vector rotation a b R np eye 3 v np cross a b if np allclose v 0 0 return Rs np dot v v c np dot a b vx skew symmetric cross v R + vx + np dot vx vx * 1 - c / s return R
def find vector rotation a b R np eye 3 v np cross a b if np allclose v 0 0 return Rs np dot v v c np dot a b vx skew symmetric cross v R + vx + np dot vx vx * 1 - c / s return R
def get rising items omit sr ids count 4 all rising rising get all rising candidate sr ids {sr id for link score sr id in all rising} difference omit sr ids link fullnames [link for link score sr id in all rising if sr id in candidate sr ids ]link fullnames to show random sample link fullnames count rising links Link by fullname link fullnames to show return dict False data True rising items [ Explore Item TYPE RISING 'ris' Subreddit by ID l sr id l for l in rising links]return rising items
def get credit providers providers list None return Credit Provider get credit providers providers list providers list
def setup logging stream None hdlr logging Stream Handler stream default Fmt '% name s % levelname s % message s'info Fmt '% name s % message s'fmtr Per Level Formatter fmt default Fmt fmt From Level {logging INFO info Fmt} hdlr set Formatter fmtr logging root add Handler hdlr log set Level logging INFO
def solidity library symbol library name length min len library name 36 library piece library name[ length]hold piece ' ' * 36 - length return ' {library}{hold} ' format library library piece hold hold piece
def solidity library symbol library name length min len library name 36 library piece library name[ length]hold piece ' ' * 36 - length return ' {library}{hold} ' format library library piece hold hold piece
@task@timeddef i18 n ltr sh 'i 18 n tooltransifexltr' print ' Nowgeneratinglangugagefiles 'sh 'i 18 n toolgenerate--ltr' print ' Committingtranslations 'sh 'gitclean-fd Xconf/locale' sh 'gitaddconf/locale' sh 'gitcommit--amend'
def get runnertype by id runnertype id try runnertype Runner Type get by id runnertype id except Value Error Validation Error as e LOG warning ' Databaselookupforrunnertypewithid "%s"resultedinexception %s' runnertype id e raise Stack Storm DB Object Not Found Error ' Unabletofindrunnertypewithid "%s"' % runnertype id return runnertype
def load Icon stock item id stock item getattr gtk stock item id local icon os path join GUI DATA PATH 'icons' '16 ' '%s png' % stock item if os path exists local icon im gtk Image im set from file local icon im show return im get pixbuf else icon theme gtk Icon Theme try icon icon theme load icon stock item 16 except icon load Image 'missing-image png' get pixbuf return icon
def load Icon stock item id stock item getattr gtk stock item id local icon os path join GUI DATA PATH 'icons' '16 ' '%s png' % stock item if os path exists local icon im gtk Image im set from file local icon im show return im get pixbuf else icon theme gtk Icon Theme try icon icon theme load icon stock item 16 except icon load Image 'missing-image png' get pixbuf return icon
def simple traceback limit stack trace traceback extract stack limit limit [ -2 ]return '\n' join '-' join os path basename filename function name str line number for filename line number function name text in stack trace
def add constant name container None c getattr constants name UNDEFINED if c UNDEFINED returnglobals [name] c all append name if container is not None container add c return c
def add constant name container None c getattr constants name UNDEFINED if c UNDEFINED returnglobals [name] c all append name if container is not None container add c return c
def get Elements By Local Name child Nodes local Name elements By Local Name get Child Elements By Local Name child Nodes local Name for child Node in child Nodes if child Node get Node Type 1 elements By Local Name + child Node get Elements By Local Name local Name return elements By Local Name
def get Elements By Local Name child Nodes local Name elements By Local Name get Child Elements By Local Name child Nodes local Name for child Node in child Nodes if child Node get Node Type 1 elements By Local Name + child Node get Elements By Local Name local Name return elements By Local Name
def get First Word split Line if len split Line > 0 return split Line[ 0 ]return ''
def get I Px domain try return socket gethostbyname ex domain [2 ]except Exception return False
def get I Px domain try return socket gethostbyname ex domain [2 ]except Exception return False
def tile x reps return Tile reps x
def validate input trans error map param values page param map first param values['name 1 ']second param values['name 2 ']if first second error map['name 1 '] ' Thevaluenamesshouldbedifferent '
def start **kwargs import osfrom psychopy import visualopen Windows visual window open Windowsif len open Windows 0 print ' The Psycho Py Windowmustbecreatedpriortostartingiohub Exiting 'sys exit 1 '\n Display \nname display\nreporting unit type pix\ndevice number 0\nphysical dimensions \nwidth 500 \nheight 281 \nunit type mm\ndefault eye distance \nsurface center 550 \nunit type mm\npsychopy monitor name default\noverride using psycho settings False\n'if not kwargs has key 'experiment code' kwargs['experiment code'] 'default exp'if kwargs has key 'iohub config name' print ' Startingiohubwithiohub config nameprovided 'return launch Hub Server **kwargs iohub config name ' /iohub config yaml'if os path isfile os path normpath os path abspath iohub config name kwargs['iohub config name'] os path normpath os path abspath iohub config name print ' Startingiohubwithiohub config name ' kwargs['iohub config name']return launch Hub Server **kwargs print ' Startingiohubwithdefaultsettings 'return launch Hub Server **kwargs
def write global mbnamesif mbnames is enabled is not True returnif mbnames get incremental is not True mbnames write
def Validate Attributes tag attributes goodattributes all good Truefor attr in attributes keys if not attr in goodattributes output Error ' Unknown%sattribute %s' % tag attr all good Falsereturn all good
def Validate Attributes tag attributes goodattributes all good Truefor attr in attributes keys if not attr in goodattributes output Error ' Unknown%sattribute %s' % tag attr all good Falsereturn all good
def Validate Attributes tag attributes goodattributes all good Truefor attr in attributes keys if not attr in goodattributes output Error ' Unknown%sattribute %s' % tag attr all good Falsereturn all good
def Validate Attributes tag attributes goodattributes all good Truefor attr in attributes keys if not attr in goodattributes output Error ' Unknown%sattribute %s' % tag attr all good Falsereturn all good
def Validate Attributes tag attributes goodattributes all good Truefor attr in attributes keys if not attr in goodattributes output Error ' Unknown%sattribute %s' % tag attr all good Falsereturn all good
def Validate Attributes tag attributes goodattributes all good Truefor attr in attributes keys if not attr in goodattributes output Error ' Unknown%sattribute %s' % tag attr all good Falsereturn all good
def Validate Attributes tag attributes goodattributes all good Truefor attr in attributes keys if not attr in goodattributes output Error ' Unknown%sattribute %s' % tag attr all good Falsereturn all good
def add inline definition item statement global current statementbackup current statement type options expand one key dictionary item current statement Unnamed Statement type type parse statement options statement add child current statement current statement backup
def cancelled To Timed Out Error value timeout if isinstance value failure Failure value trap Cancelled Error raise Timeout Error timeout ' Deferred' return value
def cancelled To Timed Out Error value timeout if isinstance value failure Failure value trap Cancelled Error raise Timeout Error timeout ' Deferred' return value
def describe role name region None key None keyid None profile None conn get conn region region key key keyid keyid profile profile try info conn get role name if not info return Falserole info get role response get role result rolerole['assume role policy document'] json loads unquote role assume role policy document for policy key policy in role['assume role policy document'] items if policy key ' Statement' for val in policy if ' Sid' in val and not val[' Sid'] del val[' Sid']return roleexcept boto exception Boto Server Error as e log debug e msg ' Failedtoget{ 0 }information 'log error msg format name return False
def get email addresses survey startdate enddate token settings SURVEYGIZMO API TOKE Nsecret settings SURVEYGIZMO API TOKEN SECRE Temails []page 1more pages Truesurvey id SURVEYS[survey]['email collection survey id']if token is None or secret is None return emailswhile more pages response requests get 'https //restapi surveygizmo com/v 2 /survey/{survey}/surveyresponse?filter[field][ 0 ] datesubmitted&filter[operator][ 0 ] > &filter[value][ 0 ] {start}+ 0 0 0filter[field][ 1 ] datesubmitted&filter[operator][ 1 ] <&filter[value][ 1 ] {end}+ 0 0 0&filter[field][ 2 ] status&filter[operator][ 2 ] &filter[value][ 2 ] Complete&resultsperpage 500 &page {page}&api token {token}&api token secret {secret}' format survey survey id start startdate end enddate page page token token secret secret timeout 300 results json loads response content total pages results['total pages']more pages page < total pages emails emails + [r['[question 13 ]'] for r in results['data']] page + 1return emails
def get email addresses survey startdate enddate token settings SURVEYGIZMO API TOKE Nsecret settings SURVEYGIZMO API TOKEN SECRE Temails []page 1more pages Truesurvey id SURVEYS[survey]['email collection survey id']if token is None or secret is None return emailswhile more pages response requests get 'https //restapi surveygizmo com/v 2 /survey/{survey}/surveyresponse?filter[field][ 0 ] datesubmitted&filter[operator][ 0 ] > &filter[value][ 0 ] {start}+ 0 0 0filter[field][ 1 ] datesubmitted&filter[operator][ 1 ] <&filter[value][ 1 ] {end}+ 0 0 0&filter[field][ 2 ] status&filter[operator][ 2 ] &filter[value][ 2 ] Complete&resultsperpage 500 &page {page}&api token {token}&api token secret {secret}' format survey survey id start startdate end enddate page page token token secret secret timeout 300 results json loads response content total pages results['total pages']more pages page < total pages emails emails + [r['[question 13 ]'] for r in results['data']] page + 1return emails
def remove template s n open n close 0 0 starts ends [] [] in template Falseprev c Nonefor i c in enumerate iter s if not in template if c '{' and c prev c starts append i - 1 in template Truen open 1if in template if c '{' n open + 1elif c '}' n close + 1if n open n close ends append i in template False n open n close 0 0 prev c cs '' join [s[ end + 1 start] for start end in zip starts + [ None] [ -1 ] + ends ] return s
def Read Fem Preg dct file '2002 Fem Preg dct' dat file '2002 Fem Preg dat gz' dct thinkstats 2 Read Stata Dct dct file df dct Read Fixed Width dat file compression 'gzip' Clean Fem Preg df return df
def region code for country code country code regions COUNTRY CODE TO REGION CODE get country code None if regions is None return UNKNOWN REGIO Nelse return regions[ 0 ]
def region code for country code country code regions COUNTRY CODE TO REGION CODE get country code None if regions is None return UNKNOWN REGIO Nelse return regions[ 0 ]
def migrate log logs logs count logs count count 0for log in logs count + 1node log params get 'node' or log params get 'project' params node Node load node if params node is registration log params['node'] get registered from params node log params['registration'] params node idelse log params['registration'] Registration Approval load log params['registration approval id'] get registration idlog save logger info '{}/{} Finishedmigratinglog{} registrationaction{} params[node] {}andparams[registration] {}' format count logs count log id log action log params['node'] log params['registration']
def expected cols expected attrs if not expected attrs return expected attrssimple cols [attr for attr in expected attrs if attr in INSTANCE OPTIONAL JOINED FIELDS ]complex cols [ 'extra %s' % field for field in INSTANCE EXTRA FIELDS if field in expected attrs ]if complex cols simple cols append 'extra' simple cols [x for x in simple cols if x not in INSTANCE EXTRA FIELDS ]expected cols simple cols + complex cols return sorted list set expected cols key expected cols index
def Remaining Data Size input buffer current position input buffer tell input buffer seek 0 2 remaining data size input buffer tell - current position input buffer seek current position return remaining data size
def Remaining Data Size input buffer current position input buffer tell input buffer seek 0 2 remaining data size input buffer tell - current position input buffer seek current position return remaining data size
def lookup path parent None user None exists None url build url RESOURCE route 'lookup' params make params path path parent parent user user exists exists return request 'get' url params params
def updatedb dt meta None res frappe db sql u'selectissinglefromtab Doc Typewherename %s' dt if not res raise Exception u' Wrongdoctype"%s"inupdatedb' % dt if not res[ 0 ][ 0 ] tab Db Table dt u'tab' meta tab validate frappe db commit tab sync frappe db begin
def test detect nan nan detected [ False]def detect nan i node fn for output in fn outputs if numpy isnan output[ 0 ] any print '*** Na Ndetected***' theano printing debugprint node print ' Inputs %s' % [input[ 0 ] for input in fn inputs] print ' Outputs %s' % [output[ 0 ] for output in fn outputs] nan detected[ 0 ] Truebreakx theano tensor dscalar 'x' f theano function [x] [ theano tensor log x * x ] mode theano compile Monitor Mode post func detect nan f 0 assert nan detected[ 0 ]
def parse sv 8 int fileobj limit 9 num 0for i in xrange limit c fileobj read 1 if len c 1 raise EOF Errorc bytearray c num num << 7 c[ 0 ] & 127 if not c[ 0 ] & 128 return num i + 1 if limit > 0 raise Value Errorreturn 0 0
def test find number 2 s 'aghwirougiuhfajlsopka"- 987 ?'r find number s assert s[r[ 0 ] r[ 1 ]] '- 987 '
@pytest mark django dbdef test toggle quality check rf admin qc filter dict false positive False unit state TRANSLATED unit store translation project project disabled False qc Quality Check objects filter **qc filter first unit qc unitdata 'mute 'request create api request rf method 'post' user admin data data encode as json False response toggle qualitycheck request unit id qc id assert response status code 200 assert Quality Check objects get id qc id false positive is True request create api request rf method 'post' user admin response toggle qualitycheck request unit id qc id assert response status code 200 assert Quality Check objects get id qc id false positive is False
def constant app status headers body def application unused environ start response start response status headers return [body]return application
def constant app status headers body def application unused environ start response start response status headers return [body]return application
def load certificates directory ' ' certs {}if not os path isdir directory raise IO Error ' Invalidcertificatedirectory {0 }' format directory glob string os path join directory '* key' cert files glob glob glob string for cert file in cert files public key load certificate cert file if public key certs[public key] Truereturn certs
def blob to file filename hint propertyname None directory hint '' directory []def transform function value bulkload state if not directory parent dir os path dirname bulkload state filename directory append os path join parent dir directory hint if directory[ 0 ] and not os path exists directory[ 0 ] os makedirs directory[ 0 ] filename hint 'blob 'suffix ''filename ''if filename hint propertyname filename hint bulkload state current entity[filename hint propertyname]filename os path join directory[ 0 ] filename hint if os path exists filename filename '' filename hint suffix os path splitext filename hint if not filename filename tempfile mktemp suffix filename hint directory[ 0 ] f open filename 'wb' f write value f close return filenamereturn transform function
def test reset ip reset nvars user ns len ip user ns nvars hidden len ip user ns hidden ip user ns['x'] 1ip user ns['y'] 1ip reset nt assert equal len ip user ns nvars user ns nt assert equal len ip user ns hidden nvars hidden
def test reset ip reset nvars user ns len ip user ns nvars hidden len ip user ns hidden ip user ns['x'] 1ip user ns['y'] 1ip reset nt assert equal len ip user ns nvars user ns nt assert equal len ip user ns hidden nvars hidden
def write dau pack 16 fid kind data data size 2data np array data dtype '>i 2 ' T write fid data kind data size FIFF FIFFT DAU PACK 16 '>i 2 '
def validate read preference mode dummy name try return read pref mode from name name except Value Error raise Value Error '%sisnotavalidreadpreference' % name
def object reducer o names 'id' 'name' 'path' 'http Method' 'status Code' ' Created' ' Deleted' ' Updated' ' Flushed' ' Associated' ' Disassociated' result {}if isinstance o dict for k v in six iteritems o if isinstance v dict reduced v if k 'variables' else object reducer v names if reduced or name matches k names result[k] reducedelif isinstance v list newlist []for val in v reduced object reducer val names if reduced or name matches k names newlist append reduced if newlist result[k] newlistelif name matches k names result[k] vreturn result
def object reducer o names 'id' 'name' 'path' 'http Method' 'status Code' ' Created' ' Deleted' ' Updated' ' Flushed' ' Associated' ' Disassociated' result {}if isinstance o dict for k v in six iteritems o if isinstance v dict reduced v if k 'variables' else object reducer v names if reduced or name matches k names result[k] reducedelif isinstance v list newlist []for val in v reduced object reducer val names if reduced or name matches k names newlist append reduced if newlist result[k] newlistelif name matches k names result[k] vreturn result
def object reducer o names 'id' 'name' 'path' 'http Method' 'status Code' ' Created' ' Deleted' ' Updated' ' Flushed' ' Associated' ' Disassociated' result {}if isinstance o dict for k v in six iteritems o if isinstance v dict reduced v if k 'variables' else object reducer v names if reduced or name matches k names result[k] reducedelif isinstance v list newlist []for val in v reduced object reducer val names if reduced or name matches k names newlist append reduced if newlist result[k] newlistelif name matches k names result[k] vreturn result
def read file filename with codecs open filename 'r' 'utf 8 ' as f return f read
def skip if no package *args **kwargs from nose import Skip Testpackage check exc failed import Skip Test exc failed check Skip Test *args **kwargs
def filter schemas schemas schema tables exclude table columns return [ filter schema s schema tables exclude table columns for s in schemas]
def stop app instance app name port if not misc is app name valid app name logging error ' Unabletokillappprocess%sonport%dbecauseofinvalidnameforapplication' % app name int port return Falselogging info ' Stoppingapplication%s' % app name watch 'app ' + app name + '-' + str port if not monit interface stop watch is group False logging error ' Unabletostopapplicationserverforapp{ 0 }onport{ 1 }' format app name port return Falsemonit config file '{}/appscale-{} cfg' format MONIT CONFIG DIR watch try os remove monit config file except OS Error as os error logging error ' Errordeleting{ 0 }' format monit config file return True
def Doc To Help doc doc doc strip whitespace only line re compile '^[ DCTB ]+$' re M doc whitespace only line sub '' doc doc Cut Common Space Prefix doc doc re sub ' ?< \\S \n ? \\S ' '' doc re M return doc
def Doc To Help doc doc doc strip whitespace only line re compile '^[ DCTB ]+$' re M doc whitespace only line sub '' doc doc Cut Common Space Prefix doc doc re sub ' ?< \\S \n ? \\S ' '' doc re M return doc
def group for key key if not isinstance key entity pb Reference key entity pb Reference key first element key path element 0 key copy entity pb Reference key copy Copy From key key copy path clear element element key copy path add element element Merge From first element return key copy
def schema serializer class serializer class **kwargs def decorator func func schema serializer class serializer classfunc kwargs kwargsreturn funcreturn decorator
def schema serializer class serializer class **kwargs def decorator func func schema serializer class serializer classfunc kwargs kwargsreturn funcreturn decorator
def schema serializer class serializer class **kwargs def decorator func func schema serializer class serializer classfunc kwargs kwargsreturn funcreturn decorator
def exhaust iter i Nonefor i in iter passreturn i
def exhaust iter i Nonefor i in iter passreturn i
def test NORB Small skip if no data data NORB Small 'train' assert data X shape 24300 18432 assert data X dtype 'float 32 ' assert data y shape 24300 assert data y labels 5 assert data get topological view shape 24300 96 96 2 data NORB Small 'test' assert data X shape 24300 18432 assert data X dtype 'float 32 ' assert data y shape 24300 assert data y labels 5 assert data get topological view shape 24300 96 96 2
def timer helper num handlers 1 sleep time 5 event handlers [] a Timer None error margin 0 25 global COUN Tglobal TIMER HELPER FINISHEDCOUNT 0TIMER HELPER FINISHED Falsetry if a Timer None a Timer System Timers Timer for i in xrange num handlers a Timer Elapsed + System Timers Elapsed Event Handler on Timed Event for handler in event handlers a Timer Elapsed + System Timers Elapsed Event Handler handler a Timer Interval 100 a Timer Enabled Truesleep sleep time / 10 0 a Timer Enabled Falsesleep sleep time / 10 0 Assert COUNT > int sleep time - sleep time * error margin * num handlers + len event handlers str COUNT Assert COUNT < int sleep time + sleep time * error margin * num handlers + len event handlers str COUNT finally TIMER HELPER FINISHED True
def timer helper num handlers 1 sleep time 5 event handlers [] a Timer None error margin 0 25 global COUN Tglobal TIMER HELPER FINISHEDCOUNT 0TIMER HELPER FINISHED Falsetry if a Timer None a Timer System Timers Timer for i in xrange num handlers a Timer Elapsed + System Timers Elapsed Event Handler on Timed Event for handler in event handlers a Timer Elapsed + System Timers Elapsed Event Handler handler a Timer Interval 100 a Timer Enabled Truesleep sleep time / 10 0 a Timer Enabled Falsesleep sleep time / 10 0 Assert COUNT > int sleep time - sleep time * error margin * num handlers + len event handlers str COUNT Assert COUNT < int sleep time + sleep time * error margin * num handlers + len event handlers str COUNT finally TIMER HELPER FINISHED True
def test pretty class class C passclass D object passassert pretty C str C assert pretty D str D
@receiver m2 m changed sender Local Site users through def on local site users changed sender instance model action pk set **kwargs if action u'post add' if isinstance instance User users [instance]local sites Local Site objects filter id in pk set else users User objects filter id in pk set local sites [instance]for user in users for local site in local sites local site user added send sender Local Site user user local site local site
def cityblock u v u validate vector u v validate vector v return abs u - v sum
def form List tables ['irs ireport' 'rms req' 'cr shelter' 'pr person' 'pr image']xml TAG forms for tablename in tables xml append TAG form get name tablename url 'http //' + request env http host + URL f 'create' args tablename response headers[' Content- Type'] 'text/xml'response view 'xforms xml'return xml
def form List tables ['irs ireport' 'rms req' 'cr shelter' 'pr person' 'pr image']xml TAG forms for tablename in tables xml append TAG form get name tablename url 'http //' + request env http host + URL f 'create' args tablename response headers[' Content- Type'] 'text/xml'response view 'xforms xml'return xml
def read fmt bib name bib file cache name formatted cache name cache name bib name bib file try meta data formatted entries cache read global formatted cache name except raise cache Cache Miss modified time os path getmtime bib file if modified time > meta data['cache time'] raise cache Cache Miss if meta data['version'] VERSION or any meta data[s] get setting 'cite ' + s for s in ['panel format' 'autocomplete format'] print ' Formattingstringhaschanged updatingcache ' current time bib entries cache read global cache name formatted entries create formatted entries formatted cache name bib entries current time return formatted entries
def dropfile cachedir user None dfn os path join cachedir ' dfn' mask os umask 191 try log info ' Rotating AE Skey' if os path isfile dfn log info 'AE Skeyrotationalreadyrequested' returnif os path isfile dfn and not os access dfn os W OK os chmod dfn stat S IRUSR stat S IWUSR with salt utils fopen dfn 'wb+' as fp fp write '' os chmod dfn stat S IRUSR if user try import pwduid pwd getpwnam user pw uidos chown dfn uid -1 except Key Error Import Error OS Error IO Error passfinally os umask mask
def dropfile cachedir user None dfn os path join cachedir ' dfn' mask os umask 191 try log info ' Rotating AE Skey' if os path isfile dfn log info 'AE Skeyrotationalreadyrequested' returnif os path isfile dfn and not os access dfn os W OK os chmod dfn stat S IRUSR stat S IWUSR with salt utils fopen dfn 'wb+' as fp fp write '' os chmod dfn stat S IRUSR if user try import pwduid pwd getpwnam user pw uidos chown dfn uid -1 except Key Error Import Error OS Error IO Error passfinally os umask mask
def dropfile cachedir user None dfn os path join cachedir ' dfn' mask os umask 191 try log info ' Rotating AE Skey' if os path isfile dfn log info 'AE Skeyrotationalreadyrequested' returnif os path isfile dfn and not os access dfn os W OK os chmod dfn stat S IRUSR stat S IWUSR with salt utils fopen dfn 'wb+' as fp fp write '' os chmod dfn stat S IRUSR if user try import pwduid pwd getpwnam user pw uidos chown dfn uid -1 except Key Error Import Error OS Error IO Error passfinally os umask mask
def sphere pot or field rr mri rr mri Q coils sphere bem rr n jobs coil type fun eeg spherepot coil if coil type 'eeg' else sphere field parallel p fun parallel func fun n jobs B np concatenate parallel p fun r coils sphere for r in np array split rr n jobs return B
def Sample Sum dists n pmf Pmf Random Sum dists for i in range n return pmf
def get matplotlib backend module names import statement '\nimportos sys\n\n# Preservestdout \nsys stdout sys stdout\n\ntry \n# Redirectoutputprintedbythisimportationto"/dev/null" preventing\n#suchoutputfrombeingerroneouslyinterpretedasanerror \nwithopen os devnull \'w\' asdev null \nsys stdout dev null\n import \'%s\' \n# Ifthisisan Import Error printthisexception\'smessagewithoutatraceback \n# Import Errormessagesarehuman-readableandrequirenoadditionalcontext \nexcept Import Errorasexc \nsys stdout sys stdout\nprint exc \n# Else printthisexceptionprecededbyatraceback traceback print exc \n#printstostderrratherthanstdoutandmustnotbecalledhere \nexcept Exception \nsys stdout sys stdout\nimporttraceback\nprint traceback format exc \n'backend names eval statement 'importmatplotlib print matplotlib rcsetup all backends ' module names []if not is darwin and ' Cocoa Agg' in backend names backend names remove ' Cocoa Agg' for backend name in backend names module name 'matplotlib backends backend %s' % backend name lower stdout exec statement import statement % module name if not stdout module names append module name logger info ' Matplotlibbackend"%s" added' % backend name else logger info ' Matplotlibbackend"%s" ignored\n%s' % backend name stdout return module names
def get matplotlib backend module names import statement '\nimportos sys\n\n# Preservestdout \nsys stdout sys stdout\n\ntry \n# Redirectoutputprintedbythisimportationto"/dev/null" preventing\n#suchoutputfrombeingerroneouslyinterpretedasanerror \nwithopen os devnull \'w\' asdev null \nsys stdout dev null\n import \'%s\' \n# Ifthisisan Import Error printthisexception\'smessagewithoutatraceback \n# Import Errormessagesarehuman-readableandrequirenoadditionalcontext \nexcept Import Errorasexc \nsys stdout sys stdout\nprint exc \n# Else printthisexceptionprecededbyatraceback traceback print exc \n#printstostderrratherthanstdoutandmustnotbecalledhere \nexcept Exception \nsys stdout sys stdout\nimporttraceback\nprint traceback format exc \n'backend names eval statement 'importmatplotlib print matplotlib rcsetup all backends ' module names []if not is darwin and ' Cocoa Agg' in backend names backend names remove ' Cocoa Agg' for backend name in backend names module name 'matplotlib backends backend %s' % backend name lower stdout exec statement import statement % module name if not stdout module names append module name logger info ' Matplotlibbackend"%s" added' % backend name else logger info ' Matplotlibbackend"%s" ignored\n%s' % backend name stdout return module names
def primitive delete course num tabs course tabsvalidate args num tabs[num] get 'type' '' del tabs[num]modulestore update item course Module Store Enum User ID primitive command
@login requireddef course notifications handler request course key string None action state id None if not course key string or not action state id return Http Response Bad Request response format request GET get 'format' or request POST get 'format' or 'html' course key Course Key from string course key string if response format 'json' or 'application/json' in request META get 'HTTP ACCEPT' 'application/json' if not has studio write access request user course key raise Permission Denied if request method 'GET' return course notifications json get action state id elif request method 'DELETE' return dismiss notification request action state id elif request method 'PUT' raise Not Implemented Error elif request method 'POST' raise Not Implemented Error else return Http Response Bad Request else return Http Response Not Found
def check c int context builder n maxint 2 ** 31 - 1 def impl n if n > maxint raise Overflow Error 'arraysizetoolargetofitin Cint' context compile internal builder impl signature types none types intp n
def create theme name **extra kwargs kwargs {'status' STATUS PUBLIC 'name' name 'slug' slugify name 'bayesian rating' random uniform 1 5 'average daily users' random randint 200 2000 'weekly downloads' random randint 200 2000 'created' datetime now 'last updated' datetime now }kwargs update extra kwargs theme Addon objects create type ADDON EXTENSION **kwargs generate version addon theme theme update version theme status STATUS PUBLI Ctheme type ADDON PERSONA Persona objects create addon theme popularity theme weekly downloads persona id 0 theme save return theme
def runtests *test labels from django nose import Nose Test Suite Runnerrunner Nose Test Suite Runner verbosity 1 interactive True failures runner run tests test labels sys exit failures
def hps Model Synth hfreq hmag hphase stoc Env N H fs yh SM sine Model Synth hfreq hmag hphase N H fs yst STM stochastic Model Synth stoc Env H H * 2 y yh[ min yh size yst size ] + yst[ min yh size yst size ] return y yh yst
def dump object object for item in object dict iteritems print itemtry key value itemdump object value except Exception continue
def is installable dir path if not os path isdir path return Falsesetup py os path join path 'setup py' if os path isfile setup py return Truereturn False
def test refresh called twice refresher callbacks Mock pgexecute Mock special Mock def dummy bg refresh *args time sleep 3 refresher bg refresh dummy bg refreshactual 1 refresher refresh pgexecute special callbacks time sleep 1 assert len actual 1 1 assert len actual 1 [ 0 ] 4 assert actual 1 [ 0 ][ 3 ] ' Auto-completionrefreshstartedinthebackground ' actual 2 refresher refresh pgexecute special callbacks time sleep 1 assert len actual 2 1 assert len actual 2 [ 0 ] 4 assert actual 2 [ 0 ][ 3 ] ' Auto-completionrefreshrestarted '
def get ignored traceback tb tb list []while tb tb list append tb tb tb tb nextignored tracebacks []for tb in reversed tb list if ' unittest' in tb tb frame f globals ignored tracebacks append tb else breakif ignored tracebacks return ignored tracebacks[ -1 ]
def read global name cache path global cache path return read cache path name
def read global name cache path global cache path return read cache path name
def generate random edx username allowable chars string ascii letters + string digits username ''for index in range 30 username username + random System Random choice allowable chars return username
def create random person locale None minimum name comp len 0 fake get faker [u'person' u'internet' u'address'] locale locale while True first name fake first name last name fake last name name u'%s%s' % first name last name if len first name > minimum name comp len and len last name > minimum name comp len breakemail get random email fake phone fake phone number prefix u''suffix u''address create random address fake fake name name prefix prefix suffix suffix email email phone phone return Person Contact objects create email email phone phone name name first name first name last name last name prefix prefix suffix suffix default shipping address address default billing address address gender random choice u'mfuo' language fake language
def consume iterator n deque itertools islice iterator n maxlen 0
def register arguments func args None if args is None args func args argsif func args vararg func set local func args vararg func args if func args kwarg func set local func args kwarg func args for arg in args if isinstance arg Name func set local arg name arg else register arguments func arg elts
def register arguments func args None if args is None args func args argsif func args vararg func set local func args vararg func args if func args kwarg func set local func args kwarg func args for arg in args if isinstance arg Name func set local arg name arg else register arguments func arg elts
def run mcr job job log ' Runningacompiled Matlabjob \n' os chdir job expt dir if os environ has key 'MATLAB' mcr loc os environ['MATLAB']else mcr loc MCR LOCATIO Ncmd ' /run %s sh%s%s' % job name mcr loc job file for job log " Executingcommand'%s'\n" % cmd sh cmd
def test output quiet with Assert Not Prints '2 ' ip run cell '1 + 1 ' store history True with Assert Not Prints '2 ' ip run cell '1 + 1 #commentwithasemicolon' store history True with Assert Not Prints '2 ' ip run cell '1 + 1 \n#commented out function ' store history True
def get credentials ret {'user' False 'passwd' False}for item in ret for struct in [ opts grains pillar ] for config key in valid configs[item] value salt utils traverse dict and list struct config key None if value ret[item] valuebreakreturn ret['user'] ret['passwd']
def log list volumes function counter itertools count 1 def count calls *args **kwargs '\n Rungivenfunctionwithcount \n'CALL LIST VOLUMES function function name count next counter write return function *args **kwargs return count calls
def application start context view context app set view view view show view raise runtask qtutils Run Task parent view init update task view runtask context model fsmonitor current start msg timer Qt Core Q Timer msg timer set Single Shot True msg timer timeout connect send msg msg timer start 0 result context app exec fsmonitor current stop Qt Core Q Thread Pool global Instance wait For Done return result
def regex tuple from key alias obj return re compile ordered permutation regex '' join [obj key] + obj aliases all RE FLAGS obj obj key
def check lapack return context builder res with builder if then cgutils is not null builder res likely False pyapi context get python api builder pyapi gil ensure pyapi fatal error 'LAPAC Kwrapperreturnedwithanerror'
def intranges from list list sorted list sorted list ranges []last write -1 for i in range len sorted list if i + 1 < len sorted list if sorted list[i] sorted list[ i + 1 ] - 1 continuecurrent range sorted list[ last write + 1 i + 1 ]range tuple current range[ 0 ] current range[ -1 ] + 1 ranges append range tuple last write ireturn tuple ranges
def Scale Data data old min old max new min new max def Scale Point x if x is None return Nonereturn scale * x + translate if old min old max scale 1else scale new max - new min / float old max - old min translate new min - scale * old min return map Scale Point data
def tamper payload **kwargs ret Val payloadif payload ret Val ''i 0while i < len payload if payload[i] '%' and i < len payload - 2 and payload[ i + 1 i + 2 ] in string hexdigits and payload[ i + 2 i + 3 ] in string hexdigits ret Val + '%% 25 %s' % payload[ i + 1 i + 3 ] i + 3else ret Val + '%% 25 % 2X' % ord payload[i] i + 1return ret Val
def tamper payload **kwargs ret Val payloadif payload ret Val ''i 0while i < len payload if payload[i] '%' and i < len payload - 2 and payload[ i + 1 i + 2 ] in string hexdigits and payload[ i + 2 i + 3 ] in string hexdigits ret Val + '%% 25 %s' % payload[ i + 1 i + 3 ] i + 3else ret Val + '%% 25 % 2X' % ord payload[i] i + 1return ret Val
def inverse hankel transform F k r nu **hints return Inverse Hankel Transform F k r nu doit **hints
@ Profiler profiledef test core n for i in range n with engine begin as conn conn execute Customer table insert dict name 'customername%d' % i description 'customerdescription%d' % i
def data upload progress req if 'id' in req GET upload id str req GET['id'] if upload id in req session upload obj get object or 404 Upload import id upload id user req user upload session upload obj get session else upload session req session[upload id]import session upload session import sessionprogress import session tasks[ 0 ] get progress return json response progress else return json response {'state' 'NONE'}
def data upload progress req if 'id' in req GET upload id str req GET['id'] if upload id in req session upload obj get object or 404 Upload import id upload id user req user upload session upload obj get session else upload session req session[upload id]import session upload session import sessionprogress import session tasks[ 0 ] get progress return json response progress else return json response {'state' 'NONE'}
def data upload progress req if 'id' in req GET upload id str req GET['id'] if upload id in req session upload obj get object or 404 Upload import id upload id user req user upload session upload obj get session else upload session req session[upload id]import session upload session import sessionprogress import session tasks[ 0 ] get progress return json response progress else return json response {'state' 'NONE'}
def get all exploration summaries return get exploration summaries from models exp models Exp Summary Model get all
def Create GRR Temp File VFS directory None filename None lifetime 0 mode 'w+b' suffix '' fd Create GRR Temp File directory directory filename filename lifetime lifetime mode mode suffix suffix pathspec rdf paths Path Spec path fd name pathtype rdf paths Path Spec Path Type TMPFILE return fd pathspec
def find in path name path for dir in path split os pathsep binpath pjoin dir name if os path exists binpath return os path abspath binpath return None
def color columns None palette None bin False **kwargs if palette is not None kwargs['palette'] palettekwargs['columns'] columnskwargs['bin'] binreturn Color Attr **kwargs
def get transformed points tps new points source points coefficients num points batch size to transform new points dimshuffle 0 'x' 1 2 stacked transform T tile to transform 1 num points 1 1 r 2 T sum stacked transform - source points dimshuffle 'x' 1 0 'x' ** 2 axis 2 log r 2 T log r 2 distances T switch T isnan log r 2 r 2 * log r 2 0 0 upper array T concatenate [T ones batch size 1 new points shape[ 2 ] dtype theano config float X new points] axis 1 right mat T concatenate [upper array distances] axis 1 new value T batched dot coefficients right mat return new value
def get transformed points tps new points source points coefficients num points batch size to transform new points dimshuffle 0 'x' 1 2 stacked transform T tile to transform 1 num points 1 1 r 2 T sum stacked transform - source points dimshuffle 'x' 1 0 'x' ** 2 axis 2 log r 2 T log r 2 distances T switch T isnan log r 2 r 2 * log r 2 0 0 upper array T concatenate [T ones batch size 1 new points shape[ 2 ] dtype theano config float X new points] axis 1 right mat T concatenate [upper array distances] axis 1 new value T batched dot coefficients right mat return new value
def get transformed points tps new points source points coefficients num points batch size to transform new points dimshuffle 0 'x' 1 2 stacked transform T tile to transform 1 num points 1 1 r 2 T sum stacked transform - source points dimshuffle 'x' 1 0 'x' ** 2 axis 2 log r 2 T log r 2 distances T switch T isnan log r 2 r 2 * log r 2 0 0 upper array T concatenate [T ones batch size 1 new points shape[ 2 ] dtype theano config float X new points] axis 1 right mat T concatenate [upper array distances] axis 1 new value T batched dot coefficients right mat return new value
def get ids lines field bad ids None debug False result defaultdict list for line in lines if line startswith '>' fields map strip line[ 1 ] split label fields[ 0 ]if not ' ' in label continue lib id label rsplit ' ' 1 if bad ids and label in bad ids if debug print ' Excludedbadid %s' % label else result[lib] append fields[field] return result
def serialize Transform transform Obj return '' join [ command + ' ' + '' join [scour Unitless Length number for number in numbers] + ' ' for command numbers in transform Obj]
def create dark lang config apps schema editor Dark Lang Config apps get model u'dark lang' u' Dark Lang Config' objects Dark Lang Config objectsif not objects exists objects create enabled True
def base 64 encodefile fname encoded f String IO String IO with open fname 'rb' as f base 64 encode f encoded f encoded f seek 0 return encoded f read
def get Craft Value preference Name preferences for preference in preferences if preference name startswith preference Name return preference valuereturn None
def get zone by name conn module zone name want private zone id want vpc id for zone in conn get zones private zone module boolean zone config get ' Private Zone' False if private zone want private and zone name zone name and zone id None or zone id replace '/hostedzone/' '' zone id if want vpc id zone details conn get hosted zone zone id [' Get Hosted Zone Response']if isinstance zone details['VP Cs'] dict if zone details['VP Cs']['VPC']['VPC Id'] want vpc id return zoneelif want vpc id in [v['VPC Id'] for v in zone details['VP Cs']] return zoneelse return zonereturn None
def extract rfc 2822 addresses text if not text return []candidates address pattern findall ustr text encode 'utf- 8 ' return filter try coerce ascii candidates
def widget settings dir return os path join data dir 'widgets'
def widget settings dir return os path join data dir 'widgets'
def widget settings dir return os path join data dir 'widgets'
def respond request code redirect request GET get 'next' request POST get 'next' if redirect return Http Response Redirect redirect return type ' Response%d' % code Http Response {'status code' code}
def get Minimum By Paths element Node return euclidean get Minimum By Vector 3 Paths element Node xml Object get Transformed Paths
def remove config chassis id None community None contact None location None test False commit True dic {'template name' 'delete snmp config' 'test' test 'commit' commit}if chassis id dic['chassis id'] chassis idif community dic['community'] communityif contact dic['contact'] contactif location dic['location'] locationreturn salt ['net load template'] **dic
def test timeout set interval qtbot t usertypes Timer with qtbot wait Signal t timeout timeout 3000 t set Interval 200 t start
def rs compose add p1 p2 R p1 ringx R gens[ 0 ]prec p1 degree * p2 degree + 1 np 1 rs newton p1 x prec np 1 e rs hadamard exp np 1 np 2 rs newton p2 x prec np 2 e rs hadamard exp np 2 np 3 e rs mul np 1 e np 2 e x prec np 3 rs hadamard exp np 3 e True np 3 a np 3 [ 0 ] - np 3 / x q rs integrate np 3 a x q rs exp q x prec q invert monoms q q q primitive [1 ]dp p1 degree * p2 degree - q degree if dp q q * x ** dp return q
@utils arg 'class name' metavar '<class>' help ' Nameofquotaclasstosetthequotasfor ' @utils arg '--monitors' metavar '<monitors>' type int default None help ' Newvalueforthe"monitors"quota ' @utils arg '--snapshots' metavar '<snapshots>' type int default None help ' Newvalueforthe"snapshots"quota ' @utils arg '--gigabytes' metavar '<gigabytes>' type int default None help ' Newvalueforthe"gigabytes"quota ' @utils service type 'monitor' def do quota class update cs args quota update cs quota classes args class name args
def wait timeout cloud server action for count in shade utils iterate timeout timeout ' Timeoutwaitingforservertocomplete%s' % action try server cloud get server server id except Exception continueif server status action map[action] returnif server status 'ERROR' module fail json msg ' Serverreached ERRO Rstatewhileattemptingto%s' % action
def get Synset pos offset return dictionary For pos get Synset offset
def input dir dirname dirname dirname rstrip '/' if excluded dirname returnfor root dirs files in os walk dirname if options verbose message 'directory' + root options counters['directories'] options counters get 'directories' 0 + 1 dirs sort for subdir in dirs if excluded subdir dirs remove subdir files sort for filename in files input file os path join root filename
def my callback ax ch idx ax plot freqs psds[ch idx] color 'red' ax set xlabel ' Frequency Hz 'ax set ylabel ' Power dB '
def my callback ax ch idx ax plot freqs psds[ch idx] color 'red' ax set xlabel ' Frequency Hz 'ax set ylabel ' Power dB '
def defined at if DEBUG frame inspect currentframe while frame try if frame f globals[' package '] package breakexcept Key Error breakframe frame f backret Frame frame f lineno frame f globals get ' package ' frame f globals get ' name ' frame f code co filename del framereturn ret
def test if sys argv[ 1 ] if sys argv[ 2 ] sys stderr write 'usage pythondis py[- file]\n' sys exit 2 fn sys argv[ 1 ]if not fn or fn '-' fn Noneelse fn Noneif fn is None f sys stdinelse f open fn source f read if fn is not None f close else fn '<stdin>'code compile source fn 'exec' dis code
def hist bins bins vals hist zeros len bins j 0for i in vals while bins[j] < i j + 1hist[j] + 1return asarray bins hist
def addpackage sitedir name known paths if known paths is None init pathinfo reset 1else reset 0fullname os path join sitedir name try f open fullname 'r U' except IO Error returntry for line in f if line startswith '#' continueif line startswith 'import' exec linecontinueline line rstrip dir dircase makepath sitedir line if not dircase in known paths and os path exists dir sys path append dir known paths add dircase finally f close if reset known paths Nonereturn known paths
def addpackage sitedir name known paths if known paths is None init pathinfo reset 1else reset 0fullname os path join sitedir name try f open fullname 'r U' except IO Error returntry for line in f if line startswith '#' continueif line startswith 'import' exec linecontinueline line rstrip dir dircase makepath sitedir line if not dircase in known paths and os path exists dir sys path append dir known paths add dircase finally f close if reset known paths Nonereturn known paths
def addpackage sitedir name known paths if known paths is None init pathinfo reset 1else reset 0fullname os path join sitedir name try f open fullname 'r U' except IO Error returntry for line in f if line startswith '#' continueif line startswith 'import' exec linecontinueline line rstrip dir dircase makepath sitedir line if not dircase in known paths and os path exists dir sys path append dir known paths add dircase finally f close if reset known paths Nonereturn known paths
def create folder structure depth 2 sibling 2 parent None if depth > 0 and sibling > 0 depth range list range 1 depth + 1 depth range reverse for d in depth range for s in range 1 sibling + 1 name 'folder %s--%s' % str d str s folder Folder name name parent parent folder save create folder structure depth d - 1 sibling sibling parent folder
def gateway in subnet exists client subnet id allocation id None check mode False allocation id exists Falsegateways []states ['available' 'pending'] gws retrieved gws get nat gateways client subnet id states states check mode check mode if not gws retrieved return gateways allocation id exists for gw in gws for address in gw['nat gateway addresses'] if allocation id if address get 'allocation id' allocation id allocation id exists Truegateways append gw else gateways append gw return gateways allocation id exists
def app environ start response data ' Hello World \n'status '200 OK'response headers [ ' Content-type' 'text/plain' ' Content- Length' str len data ]sys stdout write 'requestreceived pausing 10 seconds' sys stdout flush time sleep 10 start response status response headers return iter [data]
def expandvars p l 512 b swi block l return b tostring 0 swi swi 'OS GS Trans' 'sbi i' p b l
def datetime to long dt return timedelta to usecs dt - dt min
def Manifest From XML xmlstr manifest Manifest manifest parse string xmlstr return manifest
def set name by naming series doc if not doc naming series doc naming series get default naming series doc doctype if not doc naming series frappe throw frappe u' Naming Seriesmandatory' doc name make autoname doc naming series + u' #####' u'' doc
def all valid collectors now int time time for col in all collectors if not col dead or now - col lastspawn > 3600 yield col
def all valid collectors now int time time for col in all collectors if not col dead or now - col lastspawn > 3600 yield col
def get default compiler is post compilers post pages filtered [entry for entry in post pages if entry[ 3 ] is post ]for entry in filtered extension os path splitext entry[ 0 ] [ -1 ]for compiler extensions in compilers items if extension in extensions return compilerreturn u'rest'
def canonicalize stderr stderr stderr stderr strip split '\n' [ -1 ]substitutions [ " Name Error globalname'" " Name Error name'" " Attribute Error ' \\w+ 'objectattribute' \\w+ 'isread-only" ' Attribute Error \\ 2 ' ' Type Error object new \\ \\ takesnoparameters' ' Type Error object takesnoparameters' ' Index Error listassignmentindexoutofrange' ' Index Error listindexoutofrange' "unqualifiedexecisnotallowedinfunction' \\w+ 'it * " "unqualifiedexecisnotallowedinfunction'\\ 1 'becauseit\\ 2 " ]for pattern subst with in substitutions stderr re sub pattern subst with stderr return stderr
def canonicalize stderr stderr stderr stderr strip split '\n' [ -1 ]substitutions [ " Name Error globalname'" " Name Error name'" " Attribute Error ' \\w+ 'objectattribute' \\w+ 'isread-only" ' Attribute Error \\ 2 ' ' Type Error object new \\ \\ takesnoparameters' ' Type Error object takesnoparameters' ' Index Error listassignmentindexoutofrange' ' Index Error listindexoutofrange' "unqualifiedexecisnotallowedinfunction' \\w+ 'it * " "unqualifiedexecisnotallowedinfunction'\\ 1 'becauseit\\ 2 " ]for pattern subst with in substitutions stderr re sub pattern subst with stderr return stderr
def histograms img nbins return histograms histograms img nbins
def request lastfm method **kwargs kwargs['method'] methodkwargs setdefault 'api key' API KEY kwargs setdefault 'format' 'json' logger debug ' Calling Last F Mmethod %s' method logger debug ' Last F Mcallparameters %s' kwargs data request request json ENTRY POINT timeout TIMEOUT params kwargs lock lastfm lock if not data logger error ' Errorcalling Last F Mmethod %s' method returnif 'error' in data logger error ' Last F Mreturnedanerror %s' data['message'] returnreturn data
def make ifilesystemsnapshots tests fixture class I Filesystem Snapshots Tests Async Test Case '\n Testsfor class `I Filesystem Snapshots`implementors \n\n Thesearefunctionaltestsifrunagainstrealfilesystems \n'def test interface self '\n Thetestedobjectprovides class `I Filesystem Snapshots` \n'fs snapshots fixture self self assert True verify Object I Filesystem Snapshots fs snapshots def test created self '\n Snapshotscreatedwith``create ``arelistedinthatorderin\n``list `` \n'fs snapshots fixture self d fs snapshots create 'first' d add Callback lambda fs snapshots create 'another' d add Callback lambda fs snapshots list d add Callback self assert Equal ['first' 'another'] return dreturn I Filesystem Snapshots Tests
def setup hass config from pyzabbix import Zabbix API Zabbix API Exceptionconf config[DOMAIN]if conf[CONF SSL] schema 'https'else schema 'http'url urljoin '{} //{}' format schema conf[CONF HOST] conf[CONF PATH] username conf get CONF USERNAME None password conf get CONF PASSWORD None zapi Zabbix API url try zapi login username password LOGGER info ' Connectedto Zabbix API Version%s' zapi api version except Zabbix API Exception LOGGER error ' Unabletologintothe Zabbix API' return Falsehass data[DOMAIN] zapireturn True
def swirl image center None strength 1 radius 100 rotation 0 output shape None order 1 mode None cval 0 clip True preserve range False if mode is None warn ' Thedefaultof`mode`in`skimage transform swirl`willchangeto`reflect`inversion 0 15 ' mode 'constant'if center is None center np array image shape [ 2] / 2 warp args {'center' center 'rotation' rotation 'strength' strength 'radius' radius}return warp image swirl mapping map args warp args output shape output shape order order mode mode cval cval clip clip preserve range preserve range
def get cached requirements requirements saltenv req file senv salt utils url parse requirements if senv saltenv senvif req file not in salt ['cp list master'] saltenv return Falsecached requirements salt ['cp is cached'] requirements saltenv if not cached requirements cached requirements salt ['cp cache file'] requirements saltenv if salt ['cp hash file'] requirements saltenv salt ['cp hash file'] cached requirements saltenv cached requirements salt ['cp cache file'] requirements saltenv return cached requirements
def get oauth 2 client id and secret settings instance secret json getattr settings instance 'GOOGLE OAUTH 2 CLIENT SECRETS JSON' None if secret json is not None return load client secrets secret json else client id getattr settings instance 'GOOGLE OAUTH 2 CLIENT ID' None client secret getattr settings instance 'GOOGLE OAUTH 2 CLIENT SECRET' None if client id is not None and client secret is not None return client id client secret else raise exceptions Improperly Configured ' Mustspecifyeither GOOGLE OAUTH 2 CLIENT SECRETS JSON orboth GOOGLE OAUTH 2 CLIENT I Dand GOOGLE OAUTH 2 CLIENT SECRE Tinsettings py'
def withparent meth def wrapped self *args **kwargs res meth self *args **kwargs if getattr self 'parent' None is not None getattr self parent meth name *args **kwargs return reswrapped name meth name return wrapped
def get first id lines result set for line in lines if line startswith '>' result add line[ 1 ] split [0 ] return result
@CELERY APP taskdef send ccx course published course key course key Course Locator from string course key for ccx in Custom Course For Ed X objects filter course id course key try ccx key CCX Locator from course locator course key unicode ccx id except Invalid Key Error log info ' Attempttopublishcoursewithdeprecatedid Course %s CCX %s' course key ccx id continueresponses Signal Handler course published send sender ccx course key ccx key for rec response in responses log info ' Signalfiredwhencourseispublished Receiver %s Response %s' rec response
def hardlink if possible fullname node meta global targets writtentarget meta hardlink targettarget versions targets written get target if target versions for target path target vfs path target meta in target versions if hardlink compatible target path target vfs path target meta node meta try os link target path fullname return Trueexcept OS Error as e if e errno errno EXDEV raiseelse target versions []targets written[target] target versionsfull vfs path node fullname target versions append fullname full vfs path meta return False
def eigenhproblem standard desc dim dtype overwrite lower turbo eigenvalues if iscomplex empty 1 dtype dtype a complex symrand dim dtype else a symrand dim astype dtype if overwrite a c a copy else a c a w z eigh a overwrite a overwrite lower lower eigvals eigenvalues assert dtype equal z dtype dtype w w astype dtype diag diag dot z T conj dot a c z realassert array almost equal diag w DIGITS[dtype]
def iterator impl iterable type iterator type def wrapper cls iternext cls iternext@iternext impldef iternext wrapper context builder sig args result value argsiterobj cls context builder value return iternext iterobj context builder result lower builtin 'iternext' iterator type iternext wrapper return clsreturn wrapper
def started if not is started start 'shorewall'
def bezier subdivide cp t c00 c01 c02 c03 cpc 10 c00 * 1 - t + c01 * t c11 c01 * 1 - t + c02 * t c12 c02 * 1 - t + c03 * t c20 c10 * 1 - t + c11 * t c21 c11 * 1 - t + c12 * t c30 c20 * 1 - t + c21 * t first [c 00 c10 c20 c30 ]second [c 30 c21 c12 c03 ]return first second
def calculate compile sources targets is thrift target basedirs set sources set def collect sources target basedirs add target target base sources update target sources relative to buildroot for target in targets target walk collect sources predicate is thrift target return basedirs sources
def calculate compile sources targets is thrift target basedirs set sources set def collect sources target basedirs add target target base sources update target sources relative to buildroot for target in targets target walk collect sources predicate is thrift target return basedirs sources
def calculate compile sources targets is thrift target basedirs set sources set def collect sources target basedirs add target target base sources update target sources relative to buildroot for target in targets target walk collect sources predicate is thrift target return basedirs sources
def pinv extended X rcond 1e- 15 X np asarray X X X conjugate u s vt np linalg svd X 0 s orig np copy s m u shape[ 0 ]n vt shape[ 1 ]cutoff rcond * np maximum reduce s for i in range min n m if s[i] > cutoff s[i] 1 0 / s[i] else s[i] 0 0res np dot np transpose vt np multiply s[ np core newaxis] np transpose u return res s orig
def pinv extended X rcond 1e- 15 X np asarray X X X conjugate u s vt np linalg svd X 0 s orig np copy s m u shape[ 0 ]n vt shape[ 1 ]cutoff rcond * np maximum reduce s for i in range min n m if s[i] > cutoff s[i] 1 0 / s[i] else s[i] 0 0res np dot np transpose vt np multiply s[ np core newaxis] np transpose u return res s orig
def init model pass
def adjust split point split point log sp split pointwhile True parent sp getparent if parent is None or barename parent tag in {u'body' u'html'} or parent text and parent text strip or parent index sp > 0 breaksp parentif sp is not split point log debug u' Adjustedsplitpointtoancestor' return sp
def adjust split point split point log sp split pointwhile True parent sp getparent if parent is None or barename parent tag in {u'body' u'html'} or parent text and parent text strip or parent index sp > 0 breaksp parentif sp is not split point log debug u' Adjustedsplitpointtoancestor' return sp
def contains point poly point n len poly c Falsei 0j n - 1 while i < n if poly[i][ 0 ] > point[ 0 ] poly[j][ 0 ] > point[ 0 ] and point[ 1 ] < poly[j][ 1 ] - poly[i][ 1 ] * point[ 0 ] - poly[i][ 0 ] / poly[j][ 0 ] - poly[i][ 0 ] + poly[i][ 1 ] c not c j ii + 1return c
def contains point poly point n len poly c Falsei 0j n - 1 while i < n if poly[i][ 0 ] > point[ 0 ] poly[j][ 0 ] > point[ 0 ] and point[ 1 ] < poly[j][ 1 ] - poly[i][ 1 ] * point[ 0 ] - poly[i][ 0 ] / poly[j][ 0 ] - poly[i][ 0 ] + poly[i][ 1 ] c not c j ii + 1return c
@pytest fixturedef project dir request rendered dir 'fake-project-templated'def remove generated project if os path isdir rendered dir utils rmtree rendered dir request addfinalizer remove generated project return rendered dir
def skipif skip condition msg None def skip decorator f import noseif callable skip condition skip val lambda skip condition else skip val lambda skip condition def get msg func msg None ' Skipmessagewithinformationaboutfunctionbeingskipped 'if msg is None out ' Testskippedduetotestcondition'else out '\n' + msg return ' Skippingtest %s%s' % func name out def skipper func *args **kwargs ' Skipperfornormaltestfunctions 'if skip val raise nose Skip Test get msg f msg else return f *args **kwargs def skipper gen *args **kwargs ' Skipperfortestgenerators 'if skip val raise nose Skip Test get msg f msg else for x in f *args **kwargs yield x if nose util isgenerator f skipper skipper genelse skipper skipper funcreturn nose tools make decorator f skipper return skip decorator
def test install folder using dot slash script script scratch path join 'mock' mkdir pkg path script scratch path / 'mock' pkg path join 'setup py' write mock 100 setup py result script pip 'install' ' /mock' egg folder script site packages / 'mock- 100 1-py%s egg-info' % pyversion assert egg folder in result files created str result
def org customise org resource fields method s3 db current s3 dbtable s3 db org resourcetable location id represent s3 db gis Location Represent sep ' ' list fields ['organisation id' 'location id' 'parameter id' 'value' 'comments']if method in 'datalist' 'profile' table modified by represent s3 auth user represent nametable modified on represent lambda dt S3 Date Time datetime represent dt utc True list fields + ['modified by' 'modified on' 'organisation id$logo']s 3 db configure 'org resource' list fields list fields
def get Extra Fill Loops loops radius greater Than Radius 1 4 * radius extra Fill Loops []centers intercircle get Centers From Points intercircle get Points From Loops loops greater Than Radius greater Than Radius for center in centers inset intercircle get Simplified Inset From Clockwise Loop center radius if intercircle is Large Same Direction inset center radius if euclidean get Is In Filled Region loops euclidean get Left Point inset inset reverse extra Fill Loops append inset return extra Fill Loops
def get Extra Fill Loops loops radius greater Than Radius 1 4 * radius extra Fill Loops []centers intercircle get Centers From Points intercircle get Points From Loops loops greater Than Radius greater Than Radius for center in centers inset intercircle get Simplified Inset From Clockwise Loop center radius if intercircle is Large Same Direction inset center radius if euclidean get Is In Filled Region loops euclidean get Left Point inset inset reverse extra Fill Loops append inset return extra Fill Loops
def is enabled name current schedule salt ['schedule list'] show all False return yaml False if name in current schedule return current schedule[name]else return {}
def dedent text if not text return ''return textwrap dedent text
def dedent text if not text return ''return textwrap dedent text
def test expected operation order expected instructions CHECK FETCH instructions FETCH instructions CHECK EXTRACT instructions EXTRACT instructions UNLINK instructions LINK instructions SYMLINK CONDA instructions RM EXTRACTED instructions RM FETCHED assert expected instructions ACTION CODES
def file has articles nzf has Falsedecodetable nzf decodetablefor articlenum in decodetable sleep 0 01 article decodetable[articlenum]data Article Cache do load article article if data has Truereturn has
def file has articles nzf has Falsedecodetable nzf decodetablefor articlenum in decodetable sleep 0 01 article decodetable[articlenum]data Article Cache do load article article if data has Truereturn has
def get plug point class instances global pp class instancesif pp class instances is None pp class instances []pp classes []try slps resources global env get stack lifecycle plugins pp classes [cls for name cls in slps]except Exception LOG exception LE 'failedtogetlifecycleplugpointclasses' for ppc in pp classes try pp class instances append ppc except Exception LOG exception LE 'failedtoinstantiatestacklifecycleclass%s' ppc try pp class instances sorted pp class instances key lambda ppci ppci get ordinal except Exception LOG exception LE 'failedtosortlifecycleplugpointclasses' return pp class instances
def argmin x axis None return Arg Min axis x
def send arrays socket arrays stop False if arrays arrays [numpy ascontiguousarray array for array in arrays]if stop headers {'stop' True}socket send json headers else headers [header data from array 1 0 array for array in arrays]socket send json headers zmq SNDMORE for array in arrays[ -1 ] socket send array zmq SNDMORE socket send arrays[ -1 ]
def delete service protocol None service address None cmd '{ 0 }-D{ 1 }' format detect os build cmd protocol protocol service address service address out salt ['cmd run all'] cmd python shell False if out['retcode'] ret out['stderr'] strip else ret Truereturn ret
def get ec 2 driver aws ec 2 get driver Provider EC 2 aws['access key'] aws['secret access token'] region aws['region'] return ec 2
def hash Password sid password if not isinstance sid unicode raise Type Error ' Thesessionidentifiermustbeaunicodeobject' if not isinstance password unicode raise Type Error ' Thepasswordmustbeaunicodeobject' input u'%s%s' % sid password return sha 1 input encode 'utf- 8 ' hexdigest
def get vcs root path previous path pathwhile get vcs info path is None path abspardir path if path previous path returnelse previous path pathreturn osp abspath path
def get permission for course about return configuration helpers get value 'COURSE ABOUT VISIBILITY PERMISSION' settings COURSE ABOUT VISIBILITY PERMISSION
def strip rst role type str match REST ROLE PATTERN match type str if match return match group 1 else return type str
def get redis from settings settings params defaults REDIS PARAMS copy params update settings getdict 'REDIS PARAMS' for source dest in SETTINGS PARAMS MAP items val settings get source if val params[dest] valif isinstance params get 'redis cls' six string types params['redis cls'] load object params['redis cls'] return get redis **params
def get redis from settings settings params defaults REDIS PARAMS copy params update settings getdict 'REDIS PARAMS' for source dest in SETTINGS PARAMS MAP items val settings get source if val params[dest] valif isinstance params get 'redis cls' six string types params['redis cls'] load object params['redis cls'] return get redis **params
@taskdef prepare apt sudo 'apt-get-qqupdate' sudo 'apt-get-yinstallgitpython 3 makepython-virtualenvzippython-devpython-mpmathpython 3 -setuptools' sudo 'easy install 3 pip 7 1 2' sudo 'pip 3 installmpmath' sudo '/usr/bin/pipinstalltwine' sudo 'apt-get-yinstallgraphvizinkscapetexlivetexlive-xetextexlive-fonts-recommendedtexlive-latex-extralibrsvg 2 -bindocbook 2 x' sudo 'apt-get-yinstallpython-software-properties' sudo 'add-apt-repository-yppa fkrull/deadsnakes' sudo 'apt-get-yupdate' sudo 'apt-get-yinstallpython 3 3'
def condition yaw heading relative False if relative is relative 1else is relative 0msg vehicle message factory command long encode 0 0 mavutil mavlink MAV CMD CONDITION YAW 0 heading 0 1 is relative 0 0 0 vehicle send mavlink msg
def condition yaw heading relative False if relative is relative 1else is relative 0msg vehicle message factory command long encode 0 0 mavutil mavlink MAV CMD CONDITION YAW 0 heading 0 1 is relative 0 0 0 vehicle send mavlink msg
def attribute attrib type def make decorator *args **kwargs return Custom Attribute Decorator attrib type *args **kwargs return make decorator
def strpdate string format whence datetime strptime string format return whence date
def get inheritance obj name obj type 'file' dacl Dacl obj name obj type inherited win 32 security INHERITED AC Efor i in range 0 dacl dacl Get Ace Count ace dacl dacl Get Ace i if ace[ 0 ][ 1 ] & inherited inherited return Truereturn False
def unique iterable seen set def observed el observed el in seen seen add el return observedreturn el for el in iterable if not observed el
def set cover container cover path report None options None report report or lambda x x if container book type u'azw 3 ' set azw 3 cover container cover path report options options else set epub cover container cover path report options options
def hash file path digest None digest digest or hashlib sha 1 with open path u'rb' as fd s fd read 8192 while s digest update s s fd read 8192 return digest hexdigest
def is computable float v tmp float v if not logical or isnan tmp isinf tmp return tmpelse return False
def POST k n return XXX k n POST
def POST k n return XXX k n POST
def to text keyring textring {}for keyname in keyring keytext keyname to text secret base 64 encodestring keyring[keyname] textring[keytext] secretreturn textring
def make assert error def openssl assert ok '\n If*ok*isnot True retrievetheerrorfrom Open SS Landraiseit \n'if ok is not True exception from error queue error return openssl assert
def make assert error def openssl assert ok '\n If*ok*isnot True retrievetheerrorfrom Open SS Landraiseit \n'if ok is not True exception from error queue error return openssl assert
def finish auth url params return u'{}?{}' format reverse 'finish auth' urllib urlencode params
def finish auth url params return u'{}?{}' format reverse 'finish auth' urllib urlencode params
def equate Cylindrical Dot Z point return Value point z return Value
def to Pickle filename data f open filename 'w' c Pickle dump data f f close
def update branch repo location gitpil Legacy Git Pillar branch repo location opts return gitpil update
def update branch repo location gitpil Legacy Git Pillar branch repo location opts return gitpil update
@pytest fixture autouse True def urlutils config stub config stub monkeypatch config stub data {'general' {'auto-search' True} 'searchengines' {'test' 'http //www qutebrowser org/?q {}' 'test-with-dash' 'http //www example org/?q {}' 'DEFAULT' 'http //www example com/?q {}'}}monkeypatch setattr 'qutebrowser utils urlutils config' config stub return config stub
def get Cumulative Vector 3 Remove default Vector 3 element Node prefix if prefix '' default Vector 3 x evaluate get Evaluated Float default Vector 3 x element Node 'x' default Vector 3 y evaluate get Evaluated Float default Vector 3 y element Node 'y' default Vector 3 z evaluate get Evaluated Float default Vector 3 z element Node 'z' euclidean remove Elements From Dictionary element Node attributes ['x' 'y' 'z'] prefix 'cartesian'default Vector 3 evaluate get Vector 3 By Prefix default Vector 3 element Node prefix euclidean remove Prefix From Dictionary element Node attributes prefix return default Vector 3
def get Cumulative Vector 3 Remove default Vector 3 element Node prefix if prefix '' default Vector 3 x evaluate get Evaluated Float default Vector 3 x element Node 'x' default Vector 3 y evaluate get Evaluated Float default Vector 3 y element Node 'y' default Vector 3 z evaluate get Evaluated Float default Vector 3 z element Node 'z' euclidean remove Elements From Dictionary element Node attributes ['x' 'y' 'z'] prefix 'cartesian'default Vector 3 evaluate get Vector 3 By Prefix default Vector 3 element Node prefix euclidean remove Prefix From Dictionary element Node attributes prefix return default Vector 3
def get tool dependency definition metadata from tool shed app tool shed url name owner tool shed url common util get tool shed url from tool shed registry app tool shed url params dict name name owner owner pathspec ['repository' 'get tool dependency definition metadata']metadata util url get tool shed url password mgr app tool shed registry url auth tool shed url pathspec pathspec params params return metadata
def get scaling policy arn as group scaling policy name region None key None keyid None profile None conn get conn region region key key keyid keyid profile profile policies conn get all policies as group as group for policy in policies if policy name scaling policy name return policy policy arnlog error ' Couldnotconvert {0 }' format as group return None
def str get dummies arr sep ' ' arr arr fillna '' try arr sep + arr + sep except Type Error arr sep + arr astype str + sep tags set for ts in arr str split sep tags update ts tags sorted tags - set [''] dummies np empty len arr len tags dtype np int 64 for i t in enumerate tags pat sep + t + sep dummies[ i] lib map infer arr values lambda x pat in x return dummies tags
def Time From Ticks ticks return Time *time gmtime ticks [3 6]
def empty cell empty True def f print aif not empty a 1729 return f closure [0 ]
def tokenize text lowercase False deacc False errors 'strict' to lower False lower False lowercase lowercase or to lower or lower text to unicode text errors errors if lowercase text text lower if deacc text deaccent text for match in PAT ALPHABETIC finditer text yield match group
def get rect xmin data return min data[ 0 ][ 0 ] data[ 1 ][ 0 ] data[ 2 ][ 0 ] data[ 3 ][ 0 ]
def escape string for ch in '{' '}' '[' ']' ' ' ' ' ' ' ' ' ' ' '*' '+' '^' string string replace ch '\\' + ch return string
def paged call function *args **kwargs marker flag kwargs pop 'marker flag' ' Next Marker' marker arg kwargs pop 'marker arg' ' Marker' while True ret function *args **kwargs marker ret get marker flag yield ret if not marker breakkwargs[marker arg] marker
@given "I'vestartedtheintro" def step impl context go to manage page context start intro context modal context modal find css class with wait context MODAL CLASS wait time 30 context skip button modal find element by class name SKIP BUTTON CLASS context next button modal find element by class name NEXT BUTTON CLASS context back button modal find element by class name BACK BUTTON CLASS
def get subclasses c return c subclasses + sum map get subclasses c subclasses []
def libvlc vlm get media instance position p instance psz name i instance f Cfunctions get 'libvlc vlm get media instance position' None or Cfunction 'libvlc vlm get media instance position' 1 1 1 None ctypes c float Instance ctypes c char p ctypes c int return f p instance psz name i instance
@register simple tag name 'page title breadcrumbs' takes context True def page title breadcrumbs tag context *crumbs return configuration helpers page title breadcrumbs *crumbs
def add status query managers sender **kwargs if not issubclass sender Status Model returnfor value display in getattr sender u'STATUS' try sender meta get field value raise Improperly Configured u" Status Model Model'%s'hasafieldnamed'%s'whichconflictswithastatusofthesamename " % sender name value except Field Does Not Exist passsender add to class value Query Manager status value
def test possible string format functions t Q Table [ [1 2] * u m ] t['col 0 '] info format '% 3f'assert t pformat ['col 0 ' 'm' '-----' '1 000 ' '2 000 '] t['col 0 '] info format 'hi{ 3f}'assert t pformat ['col 0 ' 'm' '--------' 'hi 1 000 ' 'hi 2 000 '] t['col 0 '] info format ' 4f'assert t pformat ['col 0 ' 'm' '------' '1 0000 ' '2 0000 ']
def test possible string format functions t Q Table [ [1 2] * u m ] t['col 0 '] info format '% 3f'assert t pformat ['col 0 ' 'm' '-----' '1 000 ' '2 000 '] t['col 0 '] info format 'hi{ 3f}'assert t pformat ['col 0 ' 'm' '--------' 'hi 1 000 ' 'hi 2 000 '] t['col 0 '] info format ' 4f'assert t pformat ['col 0 ' 'm' '------' '1 0000 ' '2 0000 ']
def get All Photometers from import minolta prfrom import crsphotometers [pr PR 650 pr PR 655 minolta LS 100 ]if hasattr crs ' Color CAL' photometers append crs Color CAL return photometers
def channel session func @functools wraps func def inner message *args **kwargs if hasattr message 'channel session' try return func message *args **kwargs finally if message channel session modified message channel session save if not message reply channel raise Value Error ' Noreply channelsenttoconsumer @channel session' + 'canonlybeusedonmessagescontainingit ' session session for reply channel message reply channel name if not session exists session session key try session save must create True except Create Error raise Consume Later message channel session sessiontry return func message *args **kwargs finally if session modified and not session is empty session save return inner
def channel session func @functools wraps func def inner message *args **kwargs if hasattr message 'channel session' try return func message *args **kwargs finally if message channel session modified message channel session save if not message reply channel raise Value Error ' Noreply channelsenttoconsumer @channel session' + 'canonlybeusedonmessagescontainingit ' session session for reply channel message reply channel name if not session exists session session key try session save must create True except Create Error raise Consume Later message channel session sessiontry return func message *args **kwargs finally if session modified and not session is empty session save return inner
def channel session func @functools wraps func def inner message *args **kwargs if hasattr message 'channel session' try return func message *args **kwargs finally if message channel session modified message channel session save if not message reply channel raise Value Error ' Noreply channelsenttoconsumer @channel session' + 'canonlybeusedonmessagescontainingit ' session session for reply channel message reply channel name if not session exists session session key try session save must create True except Create Error raise Consume Later message channel session sessiontry return func message *args **kwargs finally if session modified and not session is empty session save return inner
def channel session func @functools wraps func def inner message *args **kwargs if hasattr message 'channel session' try return func message *args **kwargs finally if message channel session modified message channel session save if not message reply channel raise Value Error ' Noreply channelsenttoconsumer @channel session' + 'canonlybeusedonmessagescontainingit ' session session for reply channel message reply channel name if not session exists session session key try session save must create True except Create Error raise Consume Later message channel session sessiontry return func message *args **kwargs finally if session modified and not session is empty session save return inner
def channel session func @functools wraps func def inner message *args **kwargs if hasattr message 'channel session' try return func message *args **kwargs finally if message channel session modified message channel session save if not message reply channel raise Value Error ' Noreply channelsenttoconsumer @channel session' + 'canonlybeusedonmessagescontainingit ' session session for reply channel message reply channel name if not session exists session session key try session save must create True except Create Error raise Consume Later message channel session sessiontry return func message *args **kwargs finally if session modified and not session is empty session save return inner
def s random value min length max length num mutations 25 fuzzable True step None name None random primitives random data value min length max length num mutations fuzzable step name blocks CURRENT push random
def s random value min length max length num mutations 25 fuzzable True step None name None random primitives random data value min length max length num mutations fuzzable step name blocks CURRENT push random
def s random value min length max length num mutations 25 fuzzable True step None name None random primitives random data value min length max length num mutations fuzzable step name blocks CURRENT push random
def Add Plugins Subparsers classes sorted export plugins plugin Export Plugin classes itervalues key lambda cls cls name subparsers flags PARSER add subparsers title ' Subcommands' for cls in classes if not cls name continuesubparser subparsers add parser cls name help cls description plugin obj cls plugin obj Configure Arg Parser subparser subparser set defaults func plugin obj Run
def install custom language lang file resources config home u'language' if not core exists lang file returntry lang core read lang file strip except returnif lang compat setenv u'LANGUAGE' lang
def test get init 4 nt assert is none mp get init TMP TEST DIR
def test get init 4 nt assert is none mp get init TMP TEST DIR
def test get init 4 nt assert is none mp get init TMP TEST DIR
def time hour None min None sec None micro None offset None obj False now dt datetime utcnow if hour is None hour now hourif min is None min now minuteif sec is None sec now secondif micro is None micro now microsecondif offset is None offset tzutc elif not isinstance offset dt tzinfo offset tzoffset None offset value dt time hour min sec micro offset if obj return valuereturn format time value
def time hour None min None sec None micro None offset None obj False now dt datetime utcnow if hour is None hour now hourif min is None min now minuteif sec is None sec now secondif micro is None micro now microsecondif offset is None offset tzutc elif not isinstance offset dt tzinfo offset tzoffset None offset value dt time hour min sec micro offset if obj return valuereturn format time value
def dg demo grammar Dependency Grammar fromstring u"\n'scratch'->'cats' 'walls'\n'walls'->'the'\n'cats'->'the'\n" print grammar
def get instances to sync context updated since None project id None deleted True shuffle False uuids only False filters {}if updated since is not None filters['changes-since'] updated sinceif project id is not None filters['project id'] project idif not deleted filters['deleted'] Falseinstances db instance get all by filters context filters 'deleted' 'asc' if shuffle random shuffle instances for instance in instances if uuids only yield instance['uuid'] else yield instance
def get instances to sync context updated since None project id None deleted True shuffle False uuids only False filters {}if updated since is not None filters['changes-since'] updated sinceif project id is not None filters['project id'] project idif not deleted filters['deleted'] Falseinstances db instance get all by filters context filters 'deleted' 'asc' if shuffle random shuffle instances for instance in instances if uuids only yield instance['uuid'] else yield instance
def kill listen processes namespace force False pids find listen pids namespace namespace pids to kill {utils find fork top parent pid for pid in pids}kill signal signal SIGTER Mif force kill signal signal SIGKIL Lchildren [utils find child pids pid True for pid in pids to kill]pids to kill update itertools chain from iterable children for pid in pids to kill LOG warning LW ' Killing % signal d [% pid s]% cmdline s' {'signal' kill signal 'pid' pid 'cmdline' '' join utils get cmdline from pid pid [ 80 ]} try utils kill process pid kill signal run as root True except Exception as ex LOG error LE ' Anerroroccurredwhilekilling[% pid s] % msg s' {'pid' pid 'msg' ex} return len pids
def get num args f if inspect ismethod f return f func code co argcount - 1 elif inspect isfunction f return f code co argcountelse raise Type Error u'fshouldbeafunctionoramethod'
def execute q table context model context['model']session model Sessionreturn session execute q
def get reader Reader None Inputter None Outputter None **kwargs if Reader is None Reader basic Basicreader core get reader Reader Inputter Inputter Outputter Outputter **kwargs return reader
def save tweets filename tweets if len tweets 0 returntry archive open filename 'w' except IO Error as e err ' Cannotsavetweets %s' % str e returnfor k in sorted tweets keys try archive write '%i%s\n' % k tweets[k] encode 'utf- 8 ' except Exception as ex err 'archivingtweet%sfaileddueto%s' % k unicode ex archive close
def save tweets filename tweets if len tweets 0 returntry archive open filename 'w' except IO Error as e err ' Cannotsavetweets %s' % str e returnfor k in sorted tweets keys try archive write '%i%s\n' % k tweets[k] encode 'utf- 8 ' except Exception as ex err 'archivingtweet%sfaileddueto%s' % k unicode ex archive close
def spidercls for request spider loader request default spidercls None log none False log multiple False snames spider loader find by request request if len snames 1 return spider loader load snames[ 0 ] if len snames > 1 and log multiple logger error ' Morethanonespidercanhandle % request s-% snames s' {'request' request 'snames' ' ' join snames } if len snames 0 and log none logger error ' Unabletofindspiderthathandles % request s' {'request' request} return default spidercls
def full restart name cmd ['service' name '--full-restart']return not salt ['cmd retcode'] cmd python shell False
def filter plans attr name plans return [plan for plan in plans if plan[attr] name ]
def set fonts self font set current deployment settings get pdf export font if font set try font name font set[ 0 ]font name bold font set[ 1 ]folder current request folderpdfmetrics register Font TT Font font name os path join folder 'static' 'fonts' '%s ttf' % font name pdfmetrics register Font TT Font font name bold os path join folder 'static' 'fonts' '%s ttf' % font name bold except current log error '%s Fontnotfound Pleaseinstallittoseethecorrectfontsin PD Fexports' % font set[ 0 ] self font name ' Helvetica'self font name bold ' Helvetica- Bold'else self font name font nameself font name bold font name boldelse self font name ' Helvetica'self font name bold ' Helvetica- Bold'
def set fonts self font set current deployment settings get pdf export font if font set try font name font set[ 0 ]font name bold font set[ 1 ]folder current request folderpdfmetrics register Font TT Font font name os path join folder 'static' 'fonts' '%s ttf' % font name pdfmetrics register Font TT Font font name bold os path join folder 'static' 'fonts' '%s ttf' % font name bold except current log error '%s Fontnotfound Pleaseinstallittoseethecorrectfontsin PD Fexports' % font set[ 0 ] self font name ' Helvetica'self font name bold ' Helvetica- Bold'else self font name font nameself font name bold font name boldelse self font name ' Helvetica'self font name bold ' Helvetica- Bold'
def set fonts self font set current deployment settings get pdf export font if font set try font name font set[ 0 ]font name bold font set[ 1 ]folder current request folderpdfmetrics register Font TT Font font name os path join folder 'static' 'fonts' '%s ttf' % font name pdfmetrics register Font TT Font font name bold os path join folder 'static' 'fonts' '%s ttf' % font name bold except current log error '%s Fontnotfound Pleaseinstallittoseethecorrectfontsin PD Fexports' % font set[ 0 ] self font name ' Helvetica'self font name bold ' Helvetica- Bold'else self font name font nameself font name bold font name boldelse self font name ' Helvetica'self font name bold ' Helvetica- Bold'
@ Local Contextdef alphanumeric raw bytes *a **kw return encode raw bytes expr re alphanumeric *a **kw
@ Local Contextdef alphanumeric raw bytes *a **kw return encode raw bytes expr re alphanumeric *a **kw
def create download tasks subtitles by video languages multi tasks []for video subtitles in subtitles by video iteritems if not subtitles continueif not multi task Download Task video list subtitles logger debug u' Createdtask%r' % task tasks append task continuefor by language in groupby subtitles lambda s languages index s language task Download Task video list by language logger debug u' Createdtask%r' % task tasks append task return tasks
def escapify label text ''for c in label if c in escaped text + '\\' + c elif ord c > 32 and ord c < 127 text + celse text + '\\% 03 d' % ord c return text
def escapify label text ''for c in label if c in escaped text + '\\' + c elif ord c > 32 and ord c < 127 text + celse text + '\\% 03 d' % ord c return text
def hue permission required action app def decorator view func @wraps view func def decorated request *args **kwargs if not request user has hue permission action app raise Popup Exception ' Permissiondenied % action s/% app s ' % {'action' action 'app' app} return view func request *args **kwargs return decoratedreturn decorator
def hue permission required action app def decorator view func @wraps view func def decorated request *args **kwargs if not request user has hue permission action app raise Popup Exception ' Permissiondenied % action s/% app s ' % {'action' action 'app' app} return view func request *args **kwargs return decoratedreturn decorator
def load ipython extension ip ip define magic 'mprun' magic mprun ip define magic 'memit' magic memit
def check Prefix ip prefixlen version bits ip Version To Len version if prefixlen < 0 or prefixlen > bits return Noneif ip 0 zbits bits + 1 else zbits count 0 Bits ip if zbits < bits - prefixlen return 0else return 1
def check Prefix ip prefixlen version bits ip Version To Len version if prefixlen < 0 or prefixlen > bits return Noneif ip 0 zbits bits + 1 else zbits count 0 Bits ip if zbits < bits - prefixlen return 0else return 1
def vbox margin spacing *items return box Qt Widgets QV Box Layout margin spacing *items
def create attached volume dataset id mountpoint maximum size None metadata pmap return Attached Volume manifestation Manifestation dataset Dataset dataset id dataset id maximum size maximum size metadata metadata primary True mountpoint File Path mountpoint
def complete hybi 00 headers challenge key 1 headers[' Sec- Web Socket- Key 1 ']key 2 headers[' Sec- Web Socket- Key 2 ']first int '' join i for i in key 1 if i in digits // key 1 count '' second int '' join i for i in key 2 if i in digits // key 2 count '' nonce pack '>II 8 s' first second challenge return md 5 nonce digest
def Line Ending lines endings {CRLF 0 CR 0 LF 0}for line in lines if line endswith CRLF endings[CRLF] + 1elif line endswith CR endings[CR] + 1elif line endswith LF endings[LF] + 1return sorted endings key endings get reverse True or [LF] [0 ]
def update connection pool maxsize 1 get pool connection pool kw update maxsize maxsize
def write Gif To File fp images durations loops frames 0previous Nonefor im in images if not previous palette getheader im [1 ]data getdata im imdes data data[ 0 ] data[ 1 ] header getheader Anim im appext get App Ext loops graphext get Graphics Control Ext durations[ 0 ] fp write header fp write palette fp write appext fp write graphext fp write imdes for d in data fp write d else data getdata im imdes data data[ 0 ] data[ 1 ] graphext get Graphics Control Ext durations[frames] fp write graphext fp write imdes for d in data fp write d previous im copy frames frames + 1 fp write ' ' return frames
def tile perimeter width coord projection perimeter tile perimeter coord projection False return perimeter[ 8 ][ 0 ] - perimeter[ 0 ][ 0 ]
@verbosedef read raw egi input fname montage None eog None misc None include None exclude None preload False verbose None return Raw EGI input fname montage eog misc include exclude preload verbose
@task queue 'web' time limit EMAIL TIME LIMIT def send email task recipient subject template template html context None msg Email Multi Alternatives subject get template template render context settings DEFAULT FROM EMAIL [recipient] try msg attach alternative get template template html render context 'text/html' except Template Does Not Exist passmsg send log info ' Sentemailtorecipient %s' recipient
@task queue 'web' time limit EMAIL TIME LIMIT def send email task recipient subject template template html context None msg Email Multi Alternatives subject get template template render context settings DEFAULT FROM EMAIL [recipient] try msg attach alternative get template template html render context 'text/html' except Template Does Not Exist passmsg send log info ' Sentemailtorecipient %s' recipient
@task queue 'web' time limit EMAIL TIME LIMIT def send email task recipient subject template template html context None msg Email Multi Alternatives subject get template template render context settings DEFAULT FROM EMAIL [recipient] try msg attach alternative get template template html render context 'text/html' except Template Does Not Exist passmsg send log info ' Sentemailtorecipient %s' recipient
def ipv 4 to int ip return struct unpack ' I' addrconv ipv 4 text to bin ip [0 ]
def get qiime library version qiime dir get qiime project dir qiime version qiime library versionsha cmd 'git--git-dir%s/ gitrev-parse HEAD' % qiime dir sha o sha e sha r qiime system call sha cmd git sha sha o strip branch cmd 'git--git-dir%s/ gitrev-parse--abbrev-ref HEAD' % qiime dir branch o branch e branch r qiime system call branch cmd git branch branch o strip if is valid git refname git branch and is valid git sha 1 git sha return '%s %s@%s' % version git branch git sha[ 0 7] else return '%s' % version
def create xml attributes module xml xml attrs {}for attr val in xml attrib iteritems if attr not in module fields if attr 'parent sequential url' attr 'parent url'xml attrs[attr] valmodule xml attributes xml attrs
def create xml attributes module xml xml attrs {}for attr val in xml attrib iteritems if attr not in module fields if attr 'parent sequential url' attr 'parent url'xml attrs[attr] valmodule xml attributes xml attrs
def create xml attributes module xml xml attrs {}for attr val in xml attrib iteritems if attr not in module fields if attr 'parent sequential url' attr 'parent url'xml attrs[attr] valmodule xml attributes xml attrs
def create xml attributes module xml xml attrs {}for attr val in xml attrib iteritems if attr not in module fields if attr 'parent sequential url' attr 'parent url'xml attrs[attr] valmodule xml attributes xml attrs
def first seq key lambda x bool x default None apply lambda x x return next apply x for x in seq if key x default if callable default else default
def first seq key lambda x bool x default None apply lambda x x return next apply x for x in seq if key x default if callable default else default
def get roles for user user db role names User Role Assignment query user user db name only 'role' scalar 'role' result Role query name in role names return result
def illumina data to fastq record data number of bases None seq index 8qual index 9pass filter index 10 try pass filter int record data[pass filter index] except Index Error pass filter 2if number of bases is None seq record data[seq index] replace ' ' 'N' qual record data[qual index]else seq record data[seq index][ number of bases] replace ' ' 'N' qual record data[qual index][ number of bases]header '%s %s %s %s %s %s#%s/%s' % record data[ 0 ] record data[ 1 ] record data[ 2 ] record data[ 3 ] record data[ 4 ] record data[ 5 ] record data[ 6 ] record data[ 7 ] return '@%s\n%s\n+\n%s' % header seq qual pass filter
def get Carving file Name '' carving SVG Carving carving parse SVG file Name archive get File Text file Name return carving
def setup platform hass config add devices discovery info None from miflora import miflora pollercache config get CONF CACHE poller miflora poller Mi Flora Poller config get CONF MAC cache timeout cache force update config get CONF FORCE UPDATE median config get CONF MEDIAN poller ble timeout config get CONF TIMEOUT poller retries config get CONF RETRIES devs []for parameter in config[CONF MONITORED CONDITIONS] name SENSOR TYPES[parameter][ 0 ]unit SENSOR TYPES[parameter][ 1 ]prefix config get CONF NAME if len prefix > 0 name '{}{}' format prefix name devs append Mi Flora Sensor poller parameter name unit force update median add devices devs
def load environment config path environment env plugins dir find config path 'env d' raise if missing False if env plugins is not False extra config user defined config environment base dir env plugins logger debug ' Loadedenvironmentfrom{}' format config path return environment
def named Children parent node Name return [n for n in parent child Nodes if getattr n 'tag Name' '' node Name ]
def named Children parent node Name return [n for n in parent child Nodes if getattr n 'tag Name' '' node Name ]
@pytest mark skipif 'not HAS YAML' def test regression 5604 t Table t meta {'foo' 5 * u km 'foo 2 ' u s}t['bar'] [7 ] * u km out String IO t write out format 'ascii ecsv' assert ' astropy units Unit' in out getvalue assert ' astropy units Quantity' in out getvalue
def init list doctype doc frappe get meta doctype make boilerplate u'controller list js' doc make boilerplate u'controller list html' doc
def test compound custom inverse poly Polynomial 1 D 1 c0 1 c1 2 scale Scale 1 shift Shift 1 model 1 poly scale model 1 inverse polymodel 2 shift model 1 assert allclose model 2 inverse 1 poly shift inverse 1 with pytest raises Not Implemented Error shift + model 1 inversewith pytest raises Not Implemented Error model 1 & poly inverse
def test compound custom inverse poly Polynomial 1 D 1 c0 1 c1 2 scale Scale 1 shift Shift 1 model 1 poly scale model 1 inverse polymodel 2 shift model 1 assert allclose model 2 inverse 1 poly shift inverse 1 with pytest raises Not Implemented Error shift + model 1 inversewith pytest raises Not Implemented Error model 1 & poly inverse
def test compound custom inverse poly Polynomial 1 D 1 c0 1 c1 2 scale Scale 1 shift Shift 1 model 1 poly scale model 1 inverse polymodel 2 shift model 1 assert allclose model 2 inverse 1 poly shift inverse 1 with pytest raises Not Implemented Error shift + model 1 inversewith pytest raises Not Implemented Error model 1 & poly inverse
def list cidr ips ipv 6 cidr ips netaddr IP Network cidr return [str ip ipv 6 for ip in list ips ]
def tag string convert key data errors context if isinstance data[key] basestring tags [tag strip for tag in data[key] split ' ' if tag strip ]else tags data[key]current index max [int k[ 1 ] for k in data keys if len k 3 and k[ 0 ] 'tags' ] + [ -1 ] for num tag in zip count current index + 1 tags data[ 'tags' num 'name' ] tagfor tag in tags tag length validator tag context tag name validator tag context
def get Files For Name name if not os path exists name if contains Any name '*?[]' files glob glob name list []for file in files list extend get Files For Name file return listname get modpkg path name if not name return []if os path isdir name list []os path walk name visit pyfiles list return listelif os path exists name return [name]return []
@register inclusion tag u'includes/pagination html' takes context True def pagination for context current page page var u'page' exclude vars u'' querystring context[u'request'] GET copy exclude vars [v for v in exclude vars split u' ' if v] + [page var] for exclude var in exclude vars if exclude var in querystring del querystring[exclude var]querystring querystring urlencode return {u'current page' current page u'querystring' querystring u'page var' page var}
@register inclusion tag u'includes/pagination html' takes context True def pagination for context current page page var u'page' exclude vars u'' querystring context[u'request'] GET copy exclude vars [v for v in exclude vars split u' ' if v] + [page var] for exclude var in exclude vars if exclude var in querystring del querystring[exclude var]querystring querystring urlencode return {u'current page' current page u'querystring' querystring u'page var' page var}
def select app name name utils generate app name while App objects filter id name exists name utils generate app name return name
def groups username *args **kwargs return get group list username
def groups username *args **kwargs return get group list username
def setup platform hass config add devices discovery info None insteonhub hass data['insteon local']conf lights config from file hass config path INSTEON LOCAL LIGHTS CONF if len conf lights for device id in conf lights setup light device id conf lights[device id] insteonhub hass add devices linked insteonhub get linked for device id in linked if linked[device id]['cat type'] 'dimmer' and device id not in conf lights request configuration device id insteonhub linked[device id]['model name'] + '' + linked[device id]['sku'] hass add devices
def finish backtrace sequence A sequence B ali seq A ali seq B row col gap char if row ali seq A + sequence A[ row - 1 -1 ]if col ali seq B + sequence B[ col - 1 -1 ]if row > col ali seq B + gap char * len ali seq A - len ali seq B elif col > row ali seq A + gap char * len ali seq B - len ali seq A return ali seq A ali seq B
def is local device my ips my port dev ip dev port candidate ips []if not is valid ip dev ip and is valid hostname dev ip try addrinfo socket getaddrinfo dev ip dev port for addr in addrinfo family addr[ 0 ]dev ip addr[ 4 ][ 0 ]if family socket AF INET 6 dev ip expand ipv 6 dev ip candidate ips append dev ip except socket gaierror return Falseelse if is valid ipv 6 dev ip dev ip expand ipv 6 dev ip candidate ips [dev ip]for dev ip in candidate ips if dev ip in my ips and my port is None or dev port my port return Truereturn False
def is local device my ips my port dev ip dev port candidate ips []if not is valid ip dev ip and is valid hostname dev ip try addrinfo socket getaddrinfo dev ip dev port for addr in addrinfo family addr[ 0 ]dev ip addr[ 4 ][ 0 ]if family socket AF INET 6 dev ip expand ipv 6 dev ip candidate ips append dev ip except socket gaierror return Falseelse if is valid ipv 6 dev ip dev ip expand ipv 6 dev ip candidate ips [dev ip]for dev ip in candidate ips if dev ip in my ips and my port is None or dev port my port return Truereturn False
def my principal branch expr period full pb False from sympy import principal branchres principal branch expr period if not full pb res res replace principal branch lambda x y x return res
def my principal branch expr period full pb False from sympy import principal branchres principal branch expr period if not full pb res res replace principal branch lambda x y x return res
def my principal branch expr period full pb False from sympy import principal branchres principal branch expr period if not full pb res res replace principal branch lambda x y x return res
@app route '/' def timeline if not g user return redirect url for 'public timeline' return render template 'timeline html' messages query db '\nselectmessage * user *frommessage user\nwheremessage author id user user idand \nuser user id ?or\nuser user idin selectwhom idfromfollower\nwherewho id ? \norderbymessage pub datedesclimit?' [session['user id'] session['user id'] PER PAGE]
def splrep x y w None xb None xe None k 3 task 0 s None t None full output 0 per 0 quiet 1 res impl splrep x y w xb xe k task s t full output per quiet return res
def get tag from other config bridge port name other config Nonetry other config bridge db get val ' Port' port name 'other config' return int other config['tag'] except Key Error Type Error Value Error raise exceptions OVSFW Tag Not Found port name port name other config other config
def get tag from other config bridge port name other config Nonetry other config bridge db get val ' Port' port name 'other config' return int other config['tag'] except Key Error Type Error Value Error raise exceptions OVSFW Tag Not Found port name port name other config other config
def compute hash localfn with open localfn u'rb' as f h hashlib md 5 block f read conf compute hash block size while block h update block block f read conf compute hash block size return h hexdigest
def remove Hook hook interface adapter hooks remove hook
def md return Mde 2 md Converter
def replication func func replication Truereturn func
def handle request sock aphorism recv until sock '?' answer get answer aphorism sock sendall answer
def get comment and context request comment id try cc comment Comment id comment id retrieve context get thread and context request cc comment['thread id'] return cc comment context except Comment Client Request Error raise Comment Not Found Error ' Commentnotfound '
def text string encoding 'utf 8 ' if isinstance string six text type return stringelif isinstance string six binary type return string decode encoding else return six text type string
def quote s if not isinstance s basestring return sres list s for i in range len res c res[i]if c in ' / #? @& +$ "<>%\\' res[i] ' %02 X' % ord c return '' join res
def quote s if not isinstance s basestring return sres list s for i in range len res c res[i]if c in ' / #? @& +$ "<>%\\' res[i] ' %02 X' % ord c return '' join res
def quote s if not isinstance s basestring return sres list s for i in range len res c res[i]if c in ' / #? @& +$ "<>%\\' res[i] ' %02 X' % ord c return '' join res
def quote s if not isinstance s basestring return sres list s for i in range len res c res[i]if c in ' / #? @& +$ "<>%\\' res[i] ' %02 X' % ord c return '' join res
def necklaces n k free False return uniq minlex i directed not free for i in variations list range k n repetition True
def abort status code None detail '' headers None comment None if status code 403 for item in p Plugin Implementations p I Authenticator result item abort status code detail headers comment status code detail headers comment resultif detail and status code 503 h flash error detail detail detail encode 'utf 8 ' return abort status code status code detail detail headers headers comment comment
def hexii s width 16 skip True return hexdump s width skip True
def add course author user course global admin Admin Factory for role in Course Staff Role Course Instructor Role auth add users global admin role course id user
def add course author user course global admin Admin Factory for role in Course Staff Role Course Instructor Role auth add users global admin role course id user
def heldout score clf X test y test score np zeros n estimators dtype np float 64 for i y pred in enumerate clf staged decision function X test score[i] clf loss y test y pred return score
def heldout score clf X test y test score np zeros n estimators dtype np float 64 for i y pred in enumerate clf staged decision function X test score[i] clf loss y test y pred return score
def assert element text is output path text assert element text matches output path re escape text
def assert element text is output path text assert element text matches output path re escape text
def process chain both callbacks errbacks input *a **kw d defer Deferred for cb eb in zip callbacks errbacks d add Callbacks cb eb callback Args a callback Keywords kw errback Args a errback Keywords kw if isinstance input failure Failure d errback input else d callback input return d
def basename p return split p [1 ]
def assert http server test host port path '' expected response 'hi' d query http server host port path d add Callback test assert Equal expected response return d
def assert http server test host port path '' expected response 'hi' d query http server host port path d add Callback test assert Equal expected response return d
def assert http server test host port path '' expected response 'hi' d query http server host port path d add Callback test assert Equal expected response return d
def Count Word Errors ocr text truth text return Count Errors ocr text split truth text split
def shutdown opts log debug 'fx 2 proxyshutdown called '
@keep lazy textdef normalize newlines text text force text text return re newlines sub '\n' text
@keep lazy textdef normalize newlines text text force text text return re newlines sub '\n' text
def loads string encoding None return pop string encoding [0 ]
def rotate color percent return adjust color 0 percent
@taskdef virtualenv activate requirements revision None assert not is old env ' Activeenvironmentisold-style directory notsymlink Manualinterventionrequired 'req rev requirements revision or latest requirements revision assert virtualenv verify req rev ' Desiredenvrevision%sinvalid cannotbemadeactive' % req rev env dir 'env %s' % req rev run 'echo"importsys sys setdefaultencoding \'utf- 8 \' ">%s/viewfinder/lib/python 2 7/sitecustomize py' % env dir run 'ln-T-s-f~/env %s~/env' % req rev fprint ' Environmentatrev%smarkedactive ' % req rev
def get course course key user try course get course with access user 'load' course key check if enrolled True except Http 404 raise Course Not Found Error ' Coursenotfound ' if not any [ tab type 'discussion' and tab is enabled course user for tab in course tabs] raise Discussion Disabled Error ' Discussionisdisabledforthecourse ' return course
def virtual if salt utils which 'csf' is None return False ' Thecsfexecutionmodulecannotbeloaded csfunavailable ' else return True
def maybe convert indices indices n if isinstance indices list indices np array indices if len indices 0 return np empty 0 dtype np int mask indices < 0 if mask any indices[mask] + nmask indices > n indices < 0 if mask any raise Index Error 'indicesareout-of-bounds' return indices
def virtual if salt utils which 'apf' is None return False ' Theapfexecutionmodulecannotbeloaded apfunavailable ' elif not IPTC IMPORTED return False ' Theapfexecutionmodulecannotbeloaded python-iptablesismissing ' else return True
def lowdata fmt if cherrypy request method upper 'POST' returndata cherrypy request unserialized dataif data and isinstance data collections Mapping if 'arg' in data and not isinstance data['arg'] list data['arg'] [data['arg']]cherrypy request lowstate [data]else cherrypy serving request lowstate data
def lowdata fmt if cherrypy request method upper 'POST' returndata cherrypy request unserialized dataif data and isinstance data collections Mapping if 'arg' in data and not isinstance data['arg'] list data['arg'] [data['arg']]cherrypy request lowstate [data]else cherrypy serving request lowstate data
def upgrade tools name reboot False call None if call 'action' raise Salt Cloud System Exit ' Theupgrade toolsactionmustbecalledwith-aor--action ' vm ref salt utils vmware get mor by property get si vim Virtual Machine name return upg tools helper vm ref reboot
def short language code code None if code is None code translation get language pos code find u'-' if pos > -1 return code[ pos]return code
def select option by text select browser query option text def select option query value ' Getthefirstselectelementthatmatchesthequeryandselectthedesiredvalue 'try select Select query first results[ 0 ] select select by visible text value return Trueexcept Stale Element Reference Exception return Falsemsg ' Selectedoption{}' format option text Empty Promise lambda select option select browser query option text msg fulfill
def make inovavolumemanager tests client factory class Tests I Nova Volume Manager Tests Mixin Test Case def set Up self super Tests self set Up self client client factory test case self return Tests
def get Abridged Settings gcode Text abridged Settings []lines archive get Text Lines gcode Text settings Start Falsefor line in lines split Line gcodec get Split Line Before Bracket Semicolon line first Word gcodec get First Word split Line if first Word ' <setting>' and settings Start if len split Line > 4 abridged Settings append Abridged Setting split Line elif first Word ' <settings> ' settings Start Trueelif first Word ' </settings> ' return abridged Settingsreturn []
def get secret filename '/etc/appscale/secret key' return read file os path abspath filename chomp True
def test resize icon poorly somepic get image path 'mozilla png' src tempfile Named Temporary File mode 'r+w+b' suffix ' png' delete False dir settings TMP PATH shutil copyfile somepic src name src image Image open src name assert src image size 339 128 resize icon src name src name locally True src image Image open src name assert src image size 339 128
def test resize icon poorly somepic get image path 'mozilla png' src tempfile Named Temporary File mode 'r+w+b' suffix ' png' delete False dir settings TMP PATH shutil copyfile somepic src name src image Image open src name assert src image size 339 128 resize icon src name src name locally True src image Image open src name assert src image size 339 128
def jclouds registry xml parent data if 'instances' in data build Wrapper XML Sub Element xml parent 'jenkins plugins jclouds compute J Clouds Build Wrapper' instances XML Sub Element build Wrapper 'instances To Run' for foo in data['instances'] for template params in foo items instance XML Sub Element instances 'jenkins plugins jclouds compute Instances To Run' XML Sub Element instance 'template Name' text template XML Sub Element instance 'cloud Name' text params get 'cloud-name' '' XML Sub Element instance 'count' text str params get 'count' 1 XML Sub Element instance 'suspend Or Terminate' text str params get 'stop-on-terminate' False lower if data get 'single-use' XML Sub Element xml parent 'jenkins plugins jclouds compute J Clouds One Off Slave'
def jclouds registry xml parent data if 'instances' in data build Wrapper XML Sub Element xml parent 'jenkins plugins jclouds compute J Clouds Build Wrapper' instances XML Sub Element build Wrapper 'instances To Run' for foo in data['instances'] for template params in foo items instance XML Sub Element instances 'jenkins plugins jclouds compute Instances To Run' XML Sub Element instance 'template Name' text template XML Sub Element instance 'cloud Name' text params get 'cloud-name' '' XML Sub Element instance 'count' text str params get 'count' 1 XML Sub Element instance 'suspend Or Terminate' text str params get 'stop-on-terminate' False lower if data get 'single-use' XML Sub Element xml parent 'jenkins plugins jclouds compute J Clouds One Off Slave'
def jclouds registry xml parent data if 'instances' in data build Wrapper XML Sub Element xml parent 'jenkins plugins jclouds compute J Clouds Build Wrapper' instances XML Sub Element build Wrapper 'instances To Run' for foo in data['instances'] for template params in foo items instance XML Sub Element instances 'jenkins plugins jclouds compute Instances To Run' XML Sub Element instance 'template Name' text template XML Sub Element instance 'cloud Name' text params get 'cloud-name' '' XML Sub Element instance 'count' text str params get 'count' 1 XML Sub Element instance 'suspend Or Terminate' text str params get 'stop-on-terminate' False lower if data get 'single-use' XML Sub Element xml parent 'jenkins plugins jclouds compute J Clouds One Off Slave'
def matrix mask data mask if mask is None mask np zeros data shape np bool if isinstance mask np ndarray if mask shape data shape raise Value Error ' Maskmusthavethesameshapeasdata ' mask pd Data Frame mask index data index columns data columns dtype np bool elif isinstance mask pd Data Frame if not mask index equals data index and mask columns equals data columns err ' Maskmusthavethesameindexandcolumnsasdata 'raise Value Error err mask mask pd isnull data return mask
def matrix mask data mask if mask is None mask np zeros data shape np bool if isinstance mask np ndarray if mask shape data shape raise Value Error ' Maskmusthavethesameshapeasdata ' mask pd Data Frame mask index data index columns data columns dtype np bool elif isinstance mask pd Data Frame if not mask index equals data index and mask columns equals data columns err ' Maskmusthavethesameindexandcolumnsasdata 'raise Value Error err mask mask pd isnull data return mask
def all *transformers transformers tuple auto kwargs transformer for transformer in transformers def transform data request None response None for transformer in transformers data transformer data request request response response return datareturn transform
def all *transformers transformers tuple auto kwargs transformer for transformer in transformers def transform data request None response None for transformer in transformers data transformer data request request response response return datareturn transform
def resolve requirements chain requirements chain []if isinstance requirements string types requirements [requirements]for req file in requirements chain append req file chain extend resolve requirements chain find req req file return chain
def resolve requirements chain requirements chain []if isinstance requirements string types requirements [requirements]for req file in requirements chain append req file chain extend resolve requirements chain find req req file return chain
def update image facebook id image url image name 'fb image %s jpg' % facebook id image temp Named Temporary File try image response urllib 2 urlopen image url except Attribute Error image response urllib request urlopen image url image content image response read image temp write image content http message image response info image size len image content try content type http message typeexcept Attribute Error content type http message get content type image file In Memory Uploaded File file image temp name image name field name 'image' content type content type size image size charset None image file seek 0 image temp flush return image name image file
def main opts session model for row in session query model Tool Shed Repository all if 'shed config filename' in row metadata if row metadata['shed config filename'] opts bad filename row metadata['shed config filename'] opts good filenamesession add row session flush return 0
@parametrize 'table' tables mapped classes def test identifiers with names table for translation class in table translation classes if hasattr translation class 'name' assert hasattr table 'identifier' table
@parametrize 'table' tables mapped classes def test identifiers with names table for translation class in table translation classes if hasattr translation class 'name' assert hasattr table 'identifier' table
def wait for successful query url wait for 300 **kwargs starttime time time while True caught exception Noneresult Nonetry result query url url **kwargs if not result get ' Error' and not result get 'error' return resultexcept Exception as exc caught exception excif time time > starttime + wait for if not result and caught exception raise caught exceptionreturn result
def get configuration url name urls configuration helpers get value 'urls' default {} return urls get name or EMPTY URL
def test translated field supports migration fields {'charfield' Translated Field }migration type str ' Migration' migrations Migration {'operations' [migrations Create Model name ' My Model' fields tuple fields items bases models Model ]} writer Migration Writer migration output writer as string result safe exec output globals globals assert ' Migration' in result
def transplant new net net suffix '' for p in net params p new p + suffix if p new not in new net params print 'dropping' pcontinuefor i in range len net params[p] if i > len new net params[p new] - 1 print 'dropping' p ibreakif net params[p][i] data shape new net params[p new][i] data shape print 'coercing' p i 'from' net params[p][i] data shape 'to' new net params[p new][i] data shapeelse print 'copying' p '->' p new inew net params[p new][i] data flat net params[p][i] data flat
def get trace db by live action liveaction trace db Nonecreated Falsetrace context liveaction context get TRACE CONTEXT None if trace context trace context get valid trace context trace context trace db get trace trace context trace context ignore trace tag True if not trace db trace db Trace DB trace tag trace context trace tag created Truereturn created trace db parent context executions get parent context liveaction db liveaction if not trace context and parent context parent execution id parent context get 'execution id' None if parent execution id trace db get trace db by action execution action execution id parent execution id if not trace db raise Stack Storm DB Object Not Found Error ' Notracefoundforexecution%s' % parent execution id return created trace db execution Action Execution get liveaction id str liveaction id if execution trace db get trace db by action execution action execution execution if not trace db trace db Trace DB trace tag 'execution-%s' % str liveaction id created Truereturn created trace db
@if conchdef generate ssh key key file check call ['ssh-keygen' '-f' key file path '-N' '' '-q'] return Key from File key file path
def Node Item tool Tip Helper node links in [] links out [] desc node widget descriptionchannel fmt '<li>{ 0 }</li>'title fmt '<b>{title}</b><hr/>'title title fmt format title escape node title inputs list fmt ' Inputs <ul>{inputs}</ul><hr/>'outputs list fmt ' Outputs <ul>{outputs}</ul>'if desc inputs inputs [channel fmt format inp name for inp in desc inputs]inputs inputs list fmt format inputs '' join inputs else inputs ' Noinputs<hr/>'if desc outputs outputs [channel fmt format out name for out in desc outputs]outputs outputs list fmt format outputs '' join outputs else outputs ' Nooutputs'tooltip title + inputs + outputs style 'ul{margin-top 1px margin-bottom 1px }'return TOOLTIP TEMPLATE format style style tooltip tooltip
def fix headers soup data header rows soup find all 'th' for t in header rows if ' Version ' in t text if t next sibling text '$ Revision$' t parent extract if t next sibling text '' t parent extract if ' Last- Modified ' in t text if '$ Date$' in t next sibling text t parent extract if t next sibling text '' t parent extract if t text ' Title ' data['title'] t next sibling textif t text ' Content- Type ' t parent extract if ' Version ' in t text and 'N/A' in t next sibling text t parent extract return soup data
def fix headers soup data header rows soup find all 'th' for t in header rows if ' Version ' in t text if t next sibling text '$ Revision$' t parent extract if t next sibling text '' t parent extract if ' Last- Modified ' in t text if '$ Date$' in t next sibling text t parent extract if t next sibling text '' t parent extract if t text ' Title ' data['title'] t next sibling textif t text ' Content- Type ' t parent extract if ' Version ' in t text and 'N/A' in t next sibling text t parent extract return soup data
def slaveof master host None master port None host None port None db None password None if master host and not master port master port 6379 server connect host port db password return server slaveof master host master port
def get nodes node klass for child in node children if isinstance child klass yield child for grandchild in get nodes child klass yield grandchild
def xsym sym op xsym[sym]if use unicode return op[ 1 ]else return op[ 0 ]
def require divisions parts required None if not required return divisions parts for i in required present [j for j p in enumerate parts if p[i] is not None ]divisions tuple divisions[min present max present + 2 ] parts tuple parts[min present max present + 1 ] return divisions parts
def require divisions parts required None if not required return divisions parts for i in required present [j for j p in enumerate parts if p[i] is not None ]divisions tuple divisions[min present max present + 2 ] parts tuple parts[min present max present + 1 ] return divisions parts
def require divisions parts required None if not required return divisions parts for i in required present [j for j p in enumerate parts if p[i] is not None ]divisions tuple divisions[min present max present + 2 ] parts tuple parts[min present max present + 1 ] return divisions parts
def get manual interface attributes interface module if get interface type interface 'svi' command 'showinterface' + interface try body execute modified show for cli text command module [0 ]except Index Error Shell Error return Nonecommand list body split '\n' desc Noneadmin state 'up'for each in command list if ' Description ' in each line each split ' Description ' desc line[ 1 ] strip split 'MTU' [0 ] strip elif ' Administrativelydown' in each admin state 'down'return dict description desc admin state admin state else return None
def parse response response s Fake Socket response response httplib HTTP Response s strict 1 try response begin return responseexcept httplib HTTP Exception return None
@login required@ensure csrf cookie@require http methods 'POST' 'PUT' 'DELETE' def signatory detail handler request course key string certificate id signatory id course key Course Key from string course key string store modulestore with store bulk operations course key course get course and check access course key request user certificates list course certificates['certificates']match cert Nonefor index cert in enumerate certificates list if certificate id is not None if int cert['id'] int certificate id match cert certif request method 'DELETE' if not match cert return Json Response status 404 Certificate Manager remove signatory request request store store course course certificate id certificate id signatory id signatory id return Json Response status 204
def tests get by job idx job idx return Test objects filter job job idx
def mod aggregate low chunks running rules []agg enabled ['append' 'insert']if low get 'fun' not in agg enabled return lowfor chunk in chunks tag salt utils gen state tag chunk if tag in running continueif chunk get 'state' 'iptables' if ' agg ' in chunk continueif chunk get 'fun' low get 'fun' continueif chunk not in rules rules append chunk chunk[' agg '] Trueif rules if 'rules' in low low['rules'] extend rules else low['rules'] rulesreturn low
def exec statement statement statement textwrap dedent statement cmd ['-c' statement]return exec python cmd cmd
def hash digest text text encoded text encode 'utf 8 ' hash result hashlib md 5 text encoded return hash result hexdigest
@docstring dedent interpddef angle spectrum x Fs None window None pad to None sides None return single spectrum helper x x Fs Fs window window pad to pad to sides sides mode u'angle'
def as template value if isinstance value Template return valueelif isinstance value collections Mapping return Mapping Template value elif value is int return Integer elif isinstance value int return Integer value elif isinstance value type and issubclass value BASESTRING return String elif isinstance value BASESTRING return String value elif value is float return Number elif value is None return Template elif value is dict return Type Template collections Mapping elif value is list return Type Template collections Sequence elif isinstance value type return Type Template value else raise Value Error u'cannotconverttotemplate {0 r}' format value
def names 2 dnsrepr x if type x is str if x and x[ -1 ] '\x 00 ' return xx [x]res []for n in x termin '\x 00 'if n count ' ' 0 termin + '\x 00 'n '' join map lambda y chr len y + y n split ' ' + termin res append n return '' join res
def names 2 dnsrepr x if type x is str if x and x[ -1 ] '\x 00 ' return xx [x]res []for n in x termin '\x 00 'if n count ' ' 0 termin + '\x 00 'n '' join map lambda y chr len y + y n split ' ' + termin res append n return '' join res
def handler And Bytes IO output Bytes IO stream outputtemplate py logging BASIC FORMA Tif PY 3 stream Text IO Wrapper output encoding 'utf- 8 ' newline '\n' formatter py logging Formatter template handler py logging Stream Handler stream handler set Formatter formatter return handler output
def group from type return type split u'-' 1 [0 ]
def add junction item type channels expand one key dictionary item junction Unnamed Statement type 'junction' for item in channels type value expand one key dictionary item channel Unnamed Statement type 'channel' for val in value if is reference val add reference val channel elif is inline definition val add inline definition val channel junction add child channel current statement add child junction
def is neutron return CONF use neutron
def is neutron return CONF use neutron
@pytest fixturedef tutorial disabled english return require project 'tutorial-disabled' ' Tutorial' english disabled True
def get with url url try params {'url' url 'client id' api key}request requests get API BASE format 'resolve' params params request raise for status except requests exceptions HTTP Error requests exceptions Connection Error as e raise API Error '{}' format e json request json if not json return Noneelse return json
def ll op left right if len left > 0 ll gate left[ 0 ]ll gate is unitary is scalar matrix Dagger ll gate ll gate get min qubits ll gate True if len left > 0 and ll gate is unitary new left left[ 1 len left ]new right Dagger ll gate + right return new left new right return None
def delete floatingip floatingip id profile None conn auth profile return conn delete floatingip floatingip id
@contextmanagerdef keys purpose mode None orig setting dir getattr settings 'ENCRYPTED FIELD KEYS DIR' None orig setting mode getattr settings 'ENCRYPTED FIELD MODE' None try if mode settings ENCRYPTED FIELD MODE modeif purpose keyinfo DECRYPT AND ENCRYPT settings ENCRYPTED FIELD KEYS DIR KEY LOCS['DECRYPT AND ENCRYPT'] yield keyczar Crypter Read settings ENCRYPTED FIELD KEYS DIR else settings ENCRYPTED FIELD KEYS DIR KEY LOCS['ENCRYPT'] yield keyczar Encrypter Read settings ENCRYPTED FIELD KEYS DIR except raisefinally settings ENCRYPTED FIELD KEYS DIR orig setting dirif mode if orig setting mode settings ENCRYPTED FIELD MODE orig setting modeelse del settings ENCRYPTED FIELD MODE
def schema get dbname name db user None db password None db host None db port None all schemas schema list dbname db user db user db host db host db port db port db password db password try return all schemas get name None except Attribute Error log error ' Couldnotretrieve Postgresschema Is Postgresrunning?' return False
@ docstring 'release' def get release by id id includes [] release status [] release type [] params check filter and make params 'release' includes release status release type return do mb query 'release' id includes params
@ docstring 'release' def get release by id id includes [] release status [] release type [] params check filter and make params 'release' includes release status release type return do mb query 'release' id includes params
def is Added Point On Path Intersecting Path begin path point point Index segment point - begin segment Length abs segment if segment Length < 0 0 return Falsenormalized Segment segment / segment Length segment Y Mirror complex normalized Segment real - normalized Segment imag point Rotated segment Y Mirror * point begin Rotated segment Y Mirror * begin if euclidean is X Segment Intersecting Path path[max 0 point Index - 20 point Index] point Rotated real begin Rotated real segment Y Mirror point Rotated imag return Truereturn euclidean is X Segment Intersecting Path path[ point Index + 1 point Index + 21 ] point Rotated real begin Rotated real segment Y Mirror point Rotated imag
def sm backend conf get all context return IMPL sm backend conf get all context
def confirm email token expired invalid user confirm email token status token if not user or invalid invalid Truedo flash *get message 'INVALID CONFIRMATION TOKEN' if expired send confirmation instructions user do flash *get message 'CONFIRMATION EXPIRED' email user email within security confirm email within if invalid or expired return redirect get url security confirm error view or url for 'send confirmation' if user current user logout user login user user if confirm user user after this request commit msg 'EMAIL CONFIRMED'else msg 'ALREADY CONFIRMED'do flash *get message msg return redirect get url security post confirm view or get url security post login view
@must have permission ADMIN @must be branched from nodedef draft before register page auth node draft *args **kwargs ret serialize node node auth primary True ret['draft'] serialize draft registration draft auth return ret
def noscan dev if dev not in address raise Command Execution Error ' Invaliddevpassedtobluetooth noscan' cmd 'hciconfig{ 0 }noscan' format dev salt ['cmd run'] cmd splitlines cmd 'hciconfig{ 0 }' format dev out salt ['cmd run'] cmd if 'SCAN' in out return Falsereturn True
def noscan dev if dev not in address raise Command Execution Error ' Invaliddevpassedtobluetooth noscan' cmd 'hciconfig{ 0 }noscan' format dev salt ['cmd run'] cmd splitlines cmd 'hciconfig{ 0 }' format dev out salt ['cmd run'] cmd if 'SCAN' in out return Falsereturn True
def disable urllib 3 warning try import requests packages urllib 3 requests packages urllib 3 disable warnings except Exception pass
def Lop f wrt eval points consider constant None disconnected inputs 'raise' if type eval points not in list tuple eval points [eval points]using list isinstance wrt list using tuple isinstance wrt tuple if not isinstance f list tuple f [f]f list f grads list eval points if not isinstance wrt list tuple wrt [wrt]assert len f len grads known Ordered Dict izip f grads ret grad cost None known grads known consider constant consider constant wrt wrt disconnected inputs disconnected inputs return format as using list using tuple ret
def Lop f wrt eval points consider constant None disconnected inputs 'raise' if type eval points not in list tuple eval points [eval points]using list isinstance wrt list using tuple isinstance wrt tuple if not isinstance f list tuple f [f]f list f grads list eval points if not isinstance wrt list tuple wrt [wrt]assert len f len grads known Ordered Dict izip f grads ret grad cost None known grads known consider constant consider constant wrt wrt disconnected inputs disconnected inputs return format as using list using tuple ret
def install cache cache name 'cache' backend 'sqlite' expire after None allowable codes 200 allowable methods 'GET' session factory Cached Session **backend options patch session factory lambda session factory cache name cache name backend backend expire after expire after allowable codes allowable codes allowable methods allowable methods **backend options
def Enum Key key index regenumkeyex advapi 32 [' Reg Enum Key Ex W']regenumkeyex restype ctypes c longregenumkeyex argtypes [ctypes c void p ctypes wintypes DWORD ctypes c wchar p LPDWORD LPDWORD ctypes c wchar p LPDWORD ctypes POINTER File Time ]buf ctypes create unicode buffer 257 length ctypes wintypes DWORD 257 rc regenumkeyex key handle index ctypes cast buf ctypes c wchar p ctypes byref length LPDWORD ctypes c wchar p LPDWORD ctypes POINTER File Time if rc 0 raise ctypes Win Error 2 return ctypes wstring at buf length value rstrip u'\x 00 '
def get Analyze Plugins Directory Path sub Name '' return get Joined Path get Skeinforge Plugins Path 'analyze plugins' sub Name
def test make table table types mixin cols t table types Table mixin cols check mixin type t t['m'] mixin cols['m'] cols list mixin cols values t table types Table cols names 'i' 'a' 'b' 'm' check mixin type t t['m'] mixin cols['m'] t table types Table cols check mixin type t t['col 3 '] mixin cols['m']
def func accepts var args func return any p for p in inspect signature func parameters values if p kind p VAR POSITIONAL
def log conditional probability segmented topics per topic postings num docs m lc []for s i in segmented topics for w prime w star in s i w prime docs per topic postings[w prime]w star docs per topic postings[w star]co docs w prime docs intersection w star docs if w star docs m lc i np log len co docs / float num docs + EPSILON / len w star docs / float num docs else m lc i 0 0m lc append m lc i return m lc
@environmentfilterdef syntax env value lexer None filename None try import pygmentsfrom pygments import lexersfrom pygments import formattersexcept Import Error logger error u'pygmentslibraryisrequiredtousesyntaxhighlightingtags ' raise Template Error ' Cannotloadpygments' pyg lexers get lexer by name lexer if lexer else lexers guess lexer value settings {}if hasattr env config 'syntax' settings getattr env config syntax 'options' Expando {} to dict formatter formatters Html Formatter **settings code pygments highlight value pyg formatter code code replace '\n\n' '\n&nbsp \n' replace '\n' '<br/>' caption filename if filename else pyg name if hasattr env config 'syntax' if not getattr env config syntax 'use figure' True return Markup code return Markup '<divclass "codebox"><figureclass "code">%s<figcaption>%s</figcaption></figure></div>\n\n' % code caption
@environmentfilterdef syntax env value lexer None filename None try import pygmentsfrom pygments import lexersfrom pygments import formattersexcept Import Error logger error u'pygmentslibraryisrequiredtousesyntaxhighlightingtags ' raise Template Error ' Cannotloadpygments' pyg lexers get lexer by name lexer if lexer else lexers guess lexer value settings {}if hasattr env config 'syntax' settings getattr env config syntax 'options' Expando {} to dict formatter formatters Html Formatter **settings code pygments highlight value pyg formatter code code replace '\n\n' '\n&nbsp \n' replace '\n' '<br/>' caption filename if filename else pyg name if hasattr env config 'syntax' if not getattr env config syntax 'use figure' True return Markup code return Markup '<divclass "codebox"><figureclass "code">%s<figcaption>%s</figcaption></figure></div>\n\n' % code caption
def handle change selection event params radio params['fig selection'] radioydata event ydatalabels [label text for label in radio labels]offset 0for idx label in enumerate labels nchans len params['selections'][label] offset + nchansif ydata < offset set radio button idx params return
def handle change selection event params radio params['fig selection'] radioydata event ydatalabels [label text for label in radio labels]offset 0for idx label in enumerate labels nchans len params['selections'][label] offset + nchansif ydata < offset set radio button idx params return
def clean Polygon elem options global num Points Removed From Polygonpts parse List Of Points elem get Attribute 'points' N len pts / 2 if N > 2 startx starty pts[ 2] endx endy pts[ -2 ]if startx endx and starty endy del pts[ -2 ]num Points Removed From Polygon + 1elem set Attribute 'points' scour Coordinates pts options True
def abort http status code **kwargs try original flask abort http status code except HTTP Exception as e if len kwargs e data kwargsraise
def Get Java Jars target list target dicts toplevel dir for target name in target list target target dicts[target name]for action in target get 'actions' [] for input in action['inputs'] if os path splitext input [1 ] ' jar' and not input startswith '$' if os path isabs input yield input else yield os path join os path dirname target name input
def umask use sudo False func use sudo and run as root or run return func 'umask'
def send command cmd worker lbn target profile 'default' tgt type 'glob' ret {'code' False 'msg' 'OK' 'minions' []}func 'modjk {0 }' format cmd args [worker lbn profile]response salt ['publish publish'] target func args tgt type errors []minions []for minion in response minions append minion if not response[minion] errors append minion if not response ret['msg'] 'noserversansweredthepublishedcommand{ 0 }' format cmd return retelif len errors > 0 ret['msg'] 'thefollowingminionsreturn False'ret['minions'] errorsreturn retelse ret['code'] Trueret['msg'] 'thecommadwaspublishedsuccessfully'ret['minions'] minionsreturn ret
def send command cmd worker lbn target profile 'default' tgt type 'glob' ret {'code' False 'msg' 'OK' 'minions' []}func 'modjk {0 }' format cmd args [worker lbn profile]response salt ['publish publish'] target func args tgt type errors []minions []for minion in response minions append minion if not response[minion] errors append minion if not response ret['msg'] 'noserversansweredthepublishedcommand{ 0 }' format cmd return retelif len errors > 0 ret['msg'] 'thefollowingminionsreturn False'ret['minions'] errorsreturn retelse ret['code'] Trueret['msg'] 'thecommadwaspublishedsuccessfully'ret['minions'] minionsreturn ret
def test start with text hist hist start 'f' assert 'first' in hist tmphist assert 'fourth' in hist tmphist assert 'second' not in hist tmphist
def get file encoding content encoding Nonetry lines to check content split u'\n' 2 for index in range 2 if len lines to check > index line encoding search coding line lines to check[index] if line encoding encoding line encodingbreakexcept Unicode Decode Error as error print errorif encoding is None encoding u'UTF- 8 'return encoding
def get file encoding content encoding Nonetry lines to check content split u'\n' 2 for index in range 2 if len lines to check > index line encoding search coding line lines to check[index] if line encoding encoding line encodingbreakexcept Unicode Decode Error as error print errorif encoding is None encoding u'UTF- 8 'return encoding
def get supervisees eps list pkg resources iter entry points ENTRY POINT GROUP return dict ep name ep load for ep in eps
def clean whitespace chatbot statement import restatement text statement text replace '\n' '' replace '\r' '' replace ' DCTB ' '' statement text statement text strip statement text re sub '+' '' statement text return statement
def unique path path if not os path exists syspath path return path base ext os path splitext path match re search '\\ \\d +$' base if match num int match group 1 base base[ match start ]else num 0while True num + 1new path '%s %i%s' % base num ext if not os path exists new path return new path
def unique path path if not os path exists syspath path return path base ext os path splitext path match re search '\\ \\d +$' base if match num int match group 1 base base[ match start ]else num 0while True num + 1new path '%s %i%s' % base num ext if not os path exists new path return new path
def unique path path if not os path exists syspath path return path base ext os path splitext path match re search '\\ \\d +$' base if match num int match group 1 base base[ match start ]else num 0while True num + 1new path '%s %i%s' % base num ext if not os path exists new path return new path
def in interactive session def check main import main as mainreturn not hasattr main ' file ' or get option 'mode sim interactive' try return IPYTHON or check main except return check main
def class 2 func path func 'CLASS ' + path replace '/' ' ' replace '$' ' ' replace ' ' '' return func
def class 2 func path func 'CLASS ' + path replace '/' ' ' replace '$' ' ' replace ' ' '' return func
def update named ports mig named ports changed Falseexisting ports []new ports []if hasattr mig instance group 'named ports' existing ports sorted mig instance group named ports key lambda x x['name'] if named ports is not None new ports sorted named ports key lambda x x['name'] if existing ports new ports if mig instance group set named ports named ports changed Truereturn changed
def full Version partial if partial in '' 'latest' None return latest Version for tag in available Versions local False if tag startswith partial return tagreturn ''
def restrict to dtype dtype message template def processor term method term instance term dtype term instance dtypeif term dtype dtype raise Type Error message template format method name term method name expected dtype dtype name received dtype term dtype return term instancereturn preprocess self processor
def sim otu table sample ids otu ids samples otu metadata tree num replicates dissimilarity sample dicts []res sam names []for i sample info in enumerate samples sample vector sample info[ 0 ]for j in range num replicates sample dict {}for k in range len otu ids otu abundance sample vector[k]if otu abundance 0 continuenew otu id get new otu id otu ids[k] tree dissimilarity if new otu id in sample dict sample dict[new otu id] + otu abundanceelse sample dict[new otu id] otu abundancesample dicts append sample dict res sam names append sample ids[i] + ' ' + str j res otu mtx res otus combine sample dicts sample dicts res otu metadata []if otu metadata is None or otu metadata [] res otu metadata Noneelse for otu id in res otus try res otu metadata append otu metadata[otu ids index otu id ] except Value Error res otu metadata append None return res sam names res otus res otu mtx res otu metadata
def complete tab opts msg ' {0 } 'if tab opts [m[len tab ] for m in opts if m startswith tab ]if len opts 1 return opts[ 0 ]if not len opts msg '{ 0 }'return msg format ' ' join opts
def create body url build url RESOURCE return request 'post' url json body
def dump and add to dump object file parameters None to add None use cpickle False protocol DEFAULT PROTOCOL **kwargs dump object file parameters parameters use cpickle use cpickle protocol protocol **kwargs if to add is not None for name obj in six iteritems to add add to dump obj file name parameters parameters use cpickle use cpickle protocol protocol **kwargs
@retry exception Environment Error Assertion Error logfun None timeout GLOBAL TIMEOUT interval 0 001 def wait for file fname delete file True empty False with open fname 'rb' as f data f read if not empty assert dataif delete file os remove fname return data
def setup platform hass config add devices discovery info None import lightifyhost config get CONF HOST if host try bridge lightify Lightify host except socket error as err msg ' Errorconnectingtobridge {}dueto {}' format host str err LOGGER exception msg return Falsesetup bridge bridge add devices else LOGGER error ' Nohostfoundinconfiguration' return False
def add translation key translation if not hasattr to save 'translations' to save translations {} to save translations setdefault key [] to save translations[key] append translation
@register inclusion tag 'utilities/templatetags/utilization graph html' def utilization graph utilization warning threshold 75 danger threshold 90 return {'utilization' utilization 'warning threshold' warning threshold 'danger threshold' danger threshold}
@register inclusion tag 'utilities/templatetags/utilization graph html' def utilization graph utilization warning threshold 75 danger threshold 90 return {'utilization' utilization 'warning threshold' warning threshold 'danger threshold' danger threshold}
def get datacenters service instance datacenter names None get all datacenters False items [i['object'] for i in get mors with properties service instance vim Datacenter property list ['name'] if get all datacenters or datacenter names and i['name'] in datacenter names ]return items
def get datacenters service instance datacenter names None get all datacenters False items [i['object'] for i in get mors with properties service instance vim Datacenter property list ['name'] if get all datacenters or datacenter names and i['name'] in datacenter names ]return items
def parse backend conf backend **kwargs conf settings CACHES get backend None if conf is not None args conf copy args update kwargs backend args pop 'BACKEND' location args pop 'LOCATION' '' return backend location args else try backend cls import by path backend except Improperly Configured as e raise Invalid Cache Backend Error " Couldnotfindbackend'%s' %s" % backend e location kwargs pop 'LOCATION' '' return backend location kwargs
def parse backend conf backend **kwargs conf settings CACHES get backend None if conf is not None args conf copy args update kwargs backend args pop 'BACKEND' location args pop 'LOCATION' '' return backend location args else try backend cls import by path backend except Improperly Configured as e raise Invalid Cache Backend Error " Couldnotfindbackend'%s' %s" % backend e location kwargs pop 'LOCATION' '' return backend location kwargs
def parse backend conf backend **kwargs conf settings CACHES get backend None if conf is not None args conf copy args update kwargs backend args pop 'BACKEND' location args pop 'LOCATION' '' return backend location args else try backend cls import by path backend except Improperly Configured as e raise Invalid Cache Backend Error " Couldnotfindbackend'%s' %s" % backend e location kwargs pop 'LOCATION' '' return backend location kwargs
def get mro cls if not isinstance cls type class cls cls object passreturn cls mro [1 ]return cls mro
def check dataset access permission view func def decorate request *args **kwargs dataset kwargs get 'dataset' if dataset is not None dataset Dataset objects can read or exception request dataset kwargs['dataset'] datasetreturn view func request *args **kwargs return wraps view func decorate
def check dataset access permission view func def decorate request *args **kwargs dataset kwargs get 'dataset' if dataset is not None dataset Dataset objects can read or exception request dataset kwargs['dataset'] datasetreturn view func request *args **kwargs return wraps view func decorate
def create snapshot query with metadata metadata query string api microversion req fakes HTTP Request blank '/v 3 /snapshots?metadata ' + metadata query string req headers[' Open Stack-API- Version'] 'volume' + api microversion req api version request api version API Version Request api microversion return req
@contextlib contextmanagerdef task logging task old task getattr local context u'task' u'' local context task tasktry yield finally local context task old task
def reinitialize command self command reinit subcommands cmd obj DISTUTILS REINIT self command reinit subcommands options self command options get command if options self set command options cmd obj options return cmd obj
def top **kwargs if 'id' not in kwargs['opts'] return {}cmd '{ 0 }{ 1 }' format opts ['master tops']['ext nodes'] kwargs['opts']['id'] ndata yaml safe load subprocess Popen cmd shell True stdout subprocess PIPE communicate [0 ] if not ndata log info 'master topsext nodescalldidnotreturnanydata' ret {}if 'environment' in ndata env ndata['environment']else env 'base'if 'classes' in ndata if isinstance ndata['classes'] dict ret[env] list ndata['classes'] elif isinstance ndata['classes'] list ret[env] ndata['classes']else return retelse log info 'master topsext nodescalldidnothaveadictionarywitha"classes"key ' return ret
def force tcg force True global force TC Gforce TCG force
def force tcg force True global force TC Gforce TCG force
def curve keypair check version 3 2 'monitor' public ffi new 'char[ 64 ]' private ffi new 'char[ 64 ]' rc C zmq curve keypair public private check rc rc return ffi buffer public [ 40 ] ffi buffer private [ 40 ]
@click command u'setup-global-help' @click option u'--mariadb root password' def setup global help mariadb root password None from frappe installer import update site configfrappe local flags frappe dict frappe local flags in setup help Truefrappe local flags in install Truefrappe local lang u'en'frappe local conf frappe get site config sites path u' ' update site config u'global help setup' 1 site config path os path join u' ' u'common site config json' if mariadb root password frappe local conf root password mariadb root passwordfrom frappe utils help import syncsync
@click command u'setup-global-help' @click option u'--mariadb root password' def setup global help mariadb root password None from frappe installer import update site configfrappe local flags frappe dict frappe local flags in setup help Truefrappe local flags in install Truefrappe local lang u'en'frappe local conf frappe get site config sites path u' ' update site config u'global help setup' 1 site config path os path join u' ' u'common site config json' if mariadb root password frappe local conf root password mariadb root passwordfrom frappe utils help import syncsync
def resolve user restricted access document resource resource def app config['DOMAIN'][resource]auth resource def['authentication']auth field resource def['auth field']if auth and auth field request auth value auth get request auth value if request auth value document[auth field] request auth value
def set State Normal Disabled active widget if active widget config state settings Tkinter NORMAL else widget config state settings Tkinter DISABLED
def assert all finite X assert all finite X data if sp issparse X else X
def send ned velocity velocity x velocity y velocity z duration msg vehicle message factory set position target local ned encode 0 0 0 mavutil mavlink MAV FRAME LOCAL NED 4039 0 0 0 velocity x velocity y velocity z 0 0 0 0 0 for x in range 0 duration vehicle send mavlink msg time sleep 1
def move to gpu data if str data dtype in tensor basic complex dtypes return Falseif data ndim 0 and str data dtype in tensor basic discrete dtypes return Falsereturn True
def move to gpu data if str data dtype in tensor basic complex dtypes return Falseif data ndim 0 and str data dtype in tensor basic discrete dtypes return Falsereturn True
def apply key value path opts ['conf file']if os path isdir path path os path join path 'master' data values data[key] valuewith salt utils fopen path 'w+' as fp fp write yaml dump data default flow style False
def compare Function Name first second first get Converted Name first second get Converted Name second if first < second return -1 return first < second
@decorators api view ['GET'] @decorators permission classes permissions Allow Any @decorators renderer classes JSON Renderer def section search request query request GET get 'q' None if not query return Response {'error' ' Searchtermrequired Usethe"q"GE Targtosearch '} status status HTTP 400 BAD REQUEST project slug request GET get 'project' None version slug request GET get 'version' LATEST path request GET get 'path' None log debug ' API Section Search [%s %s]%s' project slug version slug query results search section request request query query project slug project slug version slug version slug path path return Response {'results' results}
def openshift deploy canceller registry xml parent data osb XML Sub Element xml parent 'com openshift jenkins plugins pipeline Open Shift Deploy Canceller' mapping [ 'api-url' 'api URL' 'https //openshift default svc cluster local' 'dep-cfg' 'dep Cfg' 'frontend' 'namespace' 'namespace' 'test' 'auth-token' 'auth Token' '' 'verbose' 'verbose' False ]helpers convert mapping to xml osb data mapping fail required True
def openshift deploy canceller registry xml parent data osb XML Sub Element xml parent 'com openshift jenkins plugins pipeline Open Shift Deploy Canceller' mapping [ 'api-url' 'api URL' 'https //openshift default svc cluster local' 'dep-cfg' 'dep Cfg' 'frontend' 'namespace' 'namespace' 'test' 'auth-token' 'auth Token' '' 'verbose' 'verbose' False ]helpers convert mapping to xml osb data mapping fail required True
def openshift deploy canceller registry xml parent data osb XML Sub Element xml parent 'com openshift jenkins plugins pipeline Open Shift Deploy Canceller' mapping [ 'api-url' 'api URL' 'https //openshift default svc cluster local' 'dep-cfg' 'dep Cfg' 'frontend' 'namespace' 'namespace' 'test' 'auth-token' 'auth Token' '' 'verbose' 'verbose' False ]helpers convert mapping to xml osb data mapping fail required True
def openshift deploy canceller registry xml parent data osb XML Sub Element xml parent 'com openshift jenkins plugins pipeline Open Shift Deploy Canceller' mapping [ 'api-url' 'api URL' 'https //openshift default svc cluster local' 'dep-cfg' 'dep Cfg' 'frontend' 'namespace' 'namespace' 'test' 'auth-token' 'auth Token' '' 'verbose' 'verbose' False ]helpers convert mapping to xml osb data mapping fail required True
def openshift deploy canceller registry xml parent data osb XML Sub Element xml parent 'com openshift jenkins plugins pipeline Open Shift Deploy Canceller' mapping [ 'api-url' 'api URL' 'https //openshift default svc cluster local' 'dep-cfg' 'dep Cfg' 'frontend' 'namespace' 'namespace' 'test' 'auth-token' 'auth Token' '' 'verbose' 'verbose' False ]helpers convert mapping to xml osb data mapping fail required True
def random symbols expr try return list expr atoms Random Symbol except Attribute Error return []
def stub islink path return False
def stub islink path return False
def stub islink path return False
@csrf exempt@gzip page@require sync session@api handle error with jsondef device download data session zone session client device get zone devicezones list Device Zone all objects filter zone zone device in data['devices'] devices [devicezone device for devicezone in devicezones]session models downloaded + len devices + len devicezones return Json Response {'devices' serialize devices + devicezones dest version session client version ensure ascii False }
@pytest mark skipif 'not HAS YAML' def test csv ecsv colnames mismatch lines copy copy SIMPLE LINES header index lines index 'abc' lines[header index] 'abd'with pytest raises Value Error as err ascii read lines format 'ecsv' assert "columnnamesfrom ECS Vheader['a' 'b' 'c']" in str err
@pytest mark skipif 'not HAS YAML' def test csv ecsv colnames mismatch lines copy copy SIMPLE LINES header index lines index 'abc' lines[header index] 'abd'with pytest raises Value Error as err ascii read lines format 'ecsv' assert "columnnamesfrom ECS Vheader['a' 'b' 'c']" in str err
def process item v rpc type Noneif isinstance v Column if isinstance v type sqlalchemy Enum if v type convert unicode rpc type primitive Unicode values v type enums else rpc type primitive String values v type enums elif v type in type map rpc type type map[v type]elif type v type in type map rpc type type map[type v type ]else raise Exception 'soap typewasnotfound maybe type mapneedsanewentry %r' % v elif isinstance v Relationship Property v enable typechecks Falserpc type Array v argument return rpc type
def process item v rpc type Noneif isinstance v Column if isinstance v type sqlalchemy Enum if v type convert unicode rpc type primitive Unicode values v type enums else rpc type primitive String values v type enums elif v type in type map rpc type type map[v type]elif type v type in type map rpc type type map[type v type ]else raise Exception 'soap typewasnotfound maybe type mapneedsanewentry %r' % v elif isinstance v Relationship Property v enable typechecks Falserpc type Array v argument return rpc type
def unlink cohort partition group cohort Course User Group Partition Group objects filter course user group cohort delete
def dispatch c id methodname args kwds {} c send id methodname args kwds kind result c recv if kind '#RETURN' return resultraise convert to error kind result
def update floatingip floatingip id port profile None conn auth profile return conn update floatingip floatingip id port
def init compare print ' Initializingcomparisonfeature'subprocess Popen ['hg' 'clone' ' ' 'a'] wait subprocess Popen ['hg' 'clone' ' ' 'b'] wait
def generate fake facility groups names ' Class 4 E' ' Class 5 B' facilities None if not facilities facilities generate fake facilities facility groups []for facility in facilities for name in names found facility groups Facility Group objects filter facility facility name name if found facility groups facility group found facility groups[ 0 ]logging info " Retrievedfacilitygroup'%s'" % name else facility group Facility Group facility facility name name facility group save logging info " Createdfacilitygroup'%s'" % name facility groups append facility group return facility groups facilities
def recurring component to events component rrule as str component get 'rrule' to ical recur rule rrule rrulestr rrule as str dtstart component decoded 'dtstart' recur set rrule rruleset recur set rrule recur rule if 'exdate' in component for exdate line in component decoded 'exdate' for exdate in exdate line dts recur set exdate exdate dt utcnow now later utcnow + datetime timedelta days MAX FUTURE start times recur set between utcnow later event length component decoded 'dtend' - component decoded 'dtstart' events []for start in start times events append {'start' start 'end' start + event length 'summary' component decoded 'summary' 'uid' component decoded 'uid' 'last modified' component decoded 'last-modified' } return events
def set file utime filename desired time try os utime filename desired time desired time except OS Error as e if e errno errno EPERM raise eraise Set File Utime Error ' Thefilewasdownloaded butattemptingtomodifytheutimeofthefilefailed Isthefileownedbyanotheruser?'
def absent name **kwargs ret {'name' name 'result' True 'changes' {} 'comment' []}current beacons salt ['beacons list'] return yaml False if name in current beacons if 'test' in opts and opts ['test'] kwargs['test'] Trueresult salt ['beacons delete'] name **kwargs ret['comment'] append result['comment'] else result salt ['beacons delete'] name **kwargs if not result['result'] ret['result'] result['result']ret['comment'] result['comment']return retelse ret['comment'] append ' Removed{ 0 }frombeacons' format name else ret['comment'] append '{ 0 }notconfiguredinbeacons' format name ret['comment'] '\n' join ret['comment'] return ret
def parse startup pkt values []plen endian int pkt[ 0 4] pkt pkt[ 8 ]tmp ''for i in xrange plen - 8 tmp + pkt[i] decode 'hex' if pkt[i] '00 ' values append tmp tmp ''return values
def parse startup pkt values []plen endian int pkt[ 0 4] pkt pkt[ 8 ]tmp ''for i in xrange plen - 8 tmp + pkt[i] decode 'hex' if pkt[i] '00 ' values append tmp tmp ''return values
def check named option opt value if isinstance value dict return valuevalues []for value in check csv option opt value if value find ' ' -1 values append value split ' ' 1 elif value find ' ' -1 values append value split ' ' 1 if values return dict values msg 'option%s invalidnamedvalue%r shouldbe<NAME> <VALUE>or<NAME> <VALUE>'raise Option Value Error msg % opt value
def contrasting color generator def rgb to hex rgb return u'#% 02 x% 02 x% 02 x' % tuple rgb triples [ 1 0 0 0 1 0 0 0 1 1 1 0 0 1 1 1 0 1 1 1 1 ]n 1 << 7 so far [[ 0 0 0]]while True if n 0 yield u'# 000000 ' copy so far list so far for triple in triples for previous in copy so far rgb [ n * triple[i] + previous[i] for i in range 3 ]so far append rgb yield rgb to hex rgb n >> 1
def traceroute destination source None ttl None timeout None return proxy ['napalm call'] 'traceroute' **{'destination' destination 'source' source 'ttl' ttl 'timeout' timeout}
def traceroute destination source None ttl None timeout None return proxy ['napalm call'] 'traceroute' **{'destination' destination 'source' source 'ttl' ttl 'timeout' timeout}
def traceroute destination source None ttl None timeout None return proxy ['napalm call'] 'traceroute' **{'destination' destination 'source' source 'ttl' ttl 'timeout' timeout}
def read password file b path content Noneif os path exists b path with open b path 'rb' as f b content f read rstrip content to text b content errors 'surrogate or strict' return content
def read password file b path content Noneif os path exists b path with open b path 'rb' as f b content f read rstrip content to text b content errors 'surrogate or strict' return content
def read password file b path content Noneif os path exists b path with open b path 'rb' as f b content f read rstrip content to text b content errors 'surrogate or strict' return content
def Zig Zag Encode value if value > 0 return value << 1 return value << 1 ^ ~ 0
def ext pillar minion id pillar *args **kwargs return POSTGRES Ext Pillar fetch minion id pillar *args **kwargs
def crawl links [] domains [] delay 20 0 parse HTML Link Parser parse sort FIFO method DEPTH **kwargs crawler Crawler links domains delay parse sort bind crawler 'visit' lambda crawler link source None setattr crawler 'crawled' link source while not crawler done crawler crawled None None crawler crawl method **kwargs yield crawler crawled
def evaluate object obj params if isinstance obj basestring return parse string obj params elif isinstance obj list new list []for item in obj new list append evaluate object item params return new listelif isinstance obj dict new dict {}for key in obj new dict[key] evaluate object obj[key] params return new dictelse return copy deepcopy obj
def update app id config if 'id' not in config config['id'] idconfig pop 'version' None config pop 'fetch' None data json dumps config try response salt utils http query '{ 0 }/v 2 /apps/{ 1 }?force true' format base url id method 'PUT' decode type 'json' decode True data data header dict {' Content- Type' 'application/json' ' Accept' 'application/json'} log debug 'updateresponse %s' response return response['dict']except Exception as ex log error 'unabletoupdatemarathonapp %s' get error message ex return {'exception' {'message' get error message ex }}
def getfilesystemencoding encoding sys getfilesystemencoding if encoding is None encoding PREFERRED ENCODIN Greturn encoding
def getfilesystemencoding encoding sys getfilesystemencoding if encoding is None encoding PREFERRED ENCODIN Greturn encoding
def load module filename import magics marshalfp open filename 'rb' magic fp read 4 try version magics versions[magic]except Key Error raise Import Error ' Unknownmagicnumber%sin%s' % ord magic[ 0 ] + 256 * ord magic[ 1 ] filename if version '2 7' raise Import Error ' Thisisa Python%sfile Only Python 2 7filesaresupported ' % version fp read 4 co marshal load fp fp close return version co
def build auxiliary node connectivity G directed G is directed mapping {}H nx Di Graph for i node in enumerate G mapping[node] iH add node '%d A' % i id node H add node '%d B' % i id node H add edge '%d A' % i '%d B' % i capacity 1 edges []for source target in G edges edges append '%s B' % mapping[source] '%s A' % mapping[target] if not directed edges append '%s B' % mapping[target] '%s A' % mapping[source] H add edges from edges capacity 1 H graph['mapping'] mappingreturn H
def build auxiliary node connectivity G directed G is directed mapping {}H nx Di Graph for i node in enumerate G mapping[node] iH add node '%d A' % i id node H add node '%d B' % i id node H add edge '%d A' % i '%d B' % i capacity 1 edges []for source target in G edges edges append '%s B' % mapping[source] '%s A' % mapping[target] if not directed edges append '%s B' % mapping[target] '%s A' % mapping[source] H add edges from edges capacity 1 H graph['mapping'] mappingreturn H
def load auth tokens user None if user is None user users get current user if user is None return {}pickled tokens memcache get 'gdata pickled tokens %s' % user if pickled tokens return pickle loads pickled tokens user tokens Token Collection all filter 'user ' user get if user tokens memcache set 'gdata pickled tokens %s' % user user tokens pickled tokens return pickle loads user tokens pickled tokens return {}
def answer callback query token callback query id text None show alert None url None cache time None method url 'answer Callback Query'payload {'callback query id' callback query id}if text payload['text'] textif show alert payload['show alert'] show alertif url payload['url'] urlif cache time payload['cache time'] cache timereturn make request token method url params payload method 'post'
def window by index idx if not window registry raise No Window else key sorted window registry [idx]return window registry[key]
def get email config intent require valid intent intent return config domain Registry get config property feconf VALID MODERATOR ACTIONS[intent]['email config']
def get email config intent require valid intent intent return config domain Registry get config property feconf VALID MODERATOR ACTIONS[intent]['email config']
def build name setter registry xml parent data build name setter XML Sub Element xml parent 'org jenkinsci plugins buildnameupdater Build Name Updater' mapping [ 'name' 'build Name' 'version txt' 'template' 'macro Template' '#${BUILD NUMBER}' 'file' 'from File' False 'macro' 'from Macro' False 'macro-first' 'macro First' False ]convert mapping to xml build name setter data mapping fail required True
def build name setter registry xml parent data build name setter XML Sub Element xml parent 'org jenkinsci plugins buildnameupdater Build Name Updater' mapping [ 'name' 'build Name' 'version txt' 'template' 'macro Template' '#${BUILD NUMBER}' 'file' 'from File' False 'macro' 'from Macro' False 'macro-first' 'macro First' False ]convert mapping to xml build name setter data mapping fail required True
def build name setter registry xml parent data build name setter XML Sub Element xml parent 'org jenkinsci plugins buildnameupdater Build Name Updater' mapping [ 'name' 'build Name' 'version txt' 'template' 'macro Template' '#${BUILD NUMBER}' 'file' 'from File' False 'macro' 'from Macro' False 'macro-first' 'macro First' False ]convert mapping to xml build name setter data mapping fail required True
def run experiments shallow basic conv omit FC dbl conv activation fn sigmoid dbl conv relu expanded data n 100 expanded data n 300 expanded data n 1000 expanded data double fc n 100 expanded data double fc n 300 expanded data double fc n 1000 nets double fc dropout 0 5 0 5 0 5 5 error locations erroneous predictions ensemble nets plt plot errors error locations erroneous predictions plt savefig 'ensemble errors png' plt plot filters nets[ 0 ] 0 5 4 plt savefig 'net full layer 0 png' plt plot filters nets[ 0 ] 1 8 5 plt savefig 'net full layer 1 png'
def run experiments shallow basic conv omit FC dbl conv activation fn sigmoid dbl conv relu expanded data n 100 expanded data n 300 expanded data n 1000 expanded data double fc n 100 expanded data double fc n 300 expanded data double fc n 1000 nets double fc dropout 0 5 0 5 0 5 5 error locations erroneous predictions ensemble nets plt plot errors error locations erroneous predictions plt savefig 'ensemble errors png' plt plot filters nets[ 0 ] 0 5 4 plt savefig 'net full layer 0 png' plt plot filters nets[ 0 ] 1 8 5 plt savefig 'net full layer 1 png'
def run experiments shallow basic conv omit FC dbl conv activation fn sigmoid dbl conv relu expanded data n 100 expanded data n 300 expanded data n 1000 expanded data double fc n 100 expanded data double fc n 300 expanded data double fc n 1000 nets double fc dropout 0 5 0 5 0 5 5 error locations erroneous predictions ensemble nets plt plot errors error locations erroneous predictions plt savefig 'ensemble errors png' plt plot filters nets[ 0 ] 0 5 4 plt savefig 'net full layer 0 png' plt plot filters nets[ 0 ] 1 8 5 plt savefig 'net full layer 1 png'
def aes cbc decrypt data key enc iv cipher AES new key AES MODE CBC enc iv return cipher decrypt data
def show instance name call None if call 'action' raise Salt Cloud System Exit ' Theshow instanceactionmustbecalledwith-aor--action ' return get node name
def get interfaces dict module command 'showinterfacestatus'try body execute show command command module [0 ]except Index Error body {}interfaces {'ethernet' [] 'svi' [] 'loopback' [] 'management' [] 'portchannel' [] 'nve' [] 'unknown' []}interface list body get 'TABLE interface' ['ROW interface']for index in interface list intf index['interface']intf type get interface type intf interfaces[intf type] append intf return interfaces
def get interfaces dict module command 'showinterfacestatus'try body execute show command command module [0 ]except Index Error body {}interfaces {'ethernet' [] 'svi' [] 'loopback' [] 'management' [] 'portchannel' [] 'nve' [] 'unknown' []}interface list body get 'TABLE interface' ['ROW interface']for index in interface list intf index['interface']intf type get interface type intf interfaces[intf type] append intf return interfaces
@hook regex 'vimeo com/ [0 - 9 ]+ ' def vimeo url match info http get json 'http //vimeo com/api/v 2 /video/%s json' % match group 1 if info info[ 0 ]['duration'] timeformat format time info[ 0 ]['duration'] info[ 0 ]['stats number of likes'] format info[ 0 ]['stats number of likes'] ' d' info[ 0 ]['stats number of plays'] format info[ 0 ]['stats number of plays'] ' d' return '\x 02 % title s\x 02 -length\x 02 % duration s\x 02 -\x 02 % stats number of likes s\x 02 likes-\x 02 % stats number of plays s\x 02 plays-\x 02 % user name s\x 02 on\x 02 % upload date s\x 02 ' % info[ 0 ]
@hook regex 'vimeo com/ [0 - 9 ]+ ' def vimeo url match info http get json 'http //vimeo com/api/v 2 /video/%s json' % match group 1 if info info[ 0 ]['duration'] timeformat format time info[ 0 ]['duration'] info[ 0 ]['stats number of likes'] format info[ 0 ]['stats number of likes'] ' d' info[ 0 ]['stats number of plays'] format info[ 0 ]['stats number of plays'] ' d' return '\x 02 % title s\x 02 -length\x 02 % duration s\x 02 -\x 02 % stats number of likes s\x 02 likes-\x 02 % stats number of plays s\x 02 plays-\x 02 % user name s\x 02 on\x 02 % upload date s\x 02 ' % info[ 0 ]
def open tasks for project def prep r tablename 'project project's 3 crud strings[tablename] title list T ' Open Tasksfor Project' s3 crud labels READ s3 crud labels UPDATE T ' Select' s3 db configure tablename deletable False listadd False return Trues 3 prep prepdef postp r output if r interactive and not r component tasklist url URL f 'task' vars {'project' '[id]'} s3 action buttons r deletable False read url tasklist url update url tasklist url return outputs 3 postp postpreturn s3 rest controller module 'project' hide filter False
def open tasks for project def prep r tablename 'project project's 3 crud strings[tablename] title list T ' Open Tasksfor Project' s3 crud labels READ s3 crud labels UPDATE T ' Select' s3 db configure tablename deletable False listadd False return Trues 3 prep prepdef postp r output if r interactive and not r component tasklist url URL f 'task' vars {'project' '[id]'} s3 action buttons r deletable False read url tasklist url update url tasklist url return outputs 3 postp postpreturn s3 rest controller module 'project' hide filter False
def open tasks for project def prep r tablename 'project project's 3 crud strings[tablename] title list T ' Open Tasksfor Project' s3 crud labels READ s3 crud labels UPDATE T ' Select' s3 db configure tablename deletable False listadd False return Trues 3 prep prepdef postp r output if r interactive and not r component tasklist url URL f 'task' vars {'project' '[id]'} s3 action buttons r deletable False read url tasklist url update url tasklist url return outputs 3 postp postpreturn s3 rest controller module 'project' hide filter False
def strip version idstr parts idstr split 'v' return parts[ 0 ]
def strip version idstr parts idstr split 'v' return parts[ 0 ]
def setup scanner hass config see hosts [ Host ip dev id hass config for dev id ip in config[const CONF HOSTS] items ]interval timedelta seconds len hosts * config[CONF PING COUNT] + DEFAULT SCAN INTERVAL LOGGER info ' Startedpingtrackerwithinterval %sonhosts %s' interval ' ' join [host ip address for host in hosts] def update now ' Updateallthehostsoneveryintervaltime 'for host in hosts host update see track point in utc time hass update now + interval return Truereturn update util dt utcnow
def build cluster status fsm table S Cluster Status States I Cluster Status Inputs O Cluster Status Outputstable Transition Table table table add Transitions S DISCONNECTED {I CONNECTED TO CONTROL SERVICE [O STORE CLIENT] S IGNORANT I SHUTDOWN [] S SHUTDOWN } table table add Transitions S IGNORANT {I DISCONNECTED FROM CONTROL SERVICE [] S DISCONNECTED I STATUS UPDATE [O UPDATE STATUS] S KNOWLEDGEABLE I SHUTDOWN [O DISCONNECT] S SHUTDOWN } table table add Transitions S KNOWLEDGEABLE {I STATUS UPDATE [O UPDATE STATUS] S KNOWLEDGEABLE I DISCONNECTED FROM CONTROL SERVICE [O STOP] S DISCONNECTED I SHUTDOWN [O STOP O DISCONNECT] S SHUTDOWN } table table add Transitions S SHUTDOWN {I DISCONNECTED FROM CONTROL SERVICE [] S SHUTDOWN I STATUS UPDATE [] S SHUTDOWN } return table
def sdm LC f K if not f return K zeroelse return f[ 0 ][ 1 ]
def get param param param dict default None result param dict get param default if param in ['max-keys'] and result return long result return result
@before each scenariodef reset data scenario LOGGER debug ' Flushingthetestdatabase ' call command 'flush' interactive False verbosity 0 world absorb {} 'scenario dict'
@before each scenariodef reset data scenario LOGGER debug ' Flushingthetestdatabase ' call command 'flush' interactive False verbosity 0 world absorb {} 'scenario dict'
def Validate Token token targets def Get Subject For Error if len targets 1 return list targets [0 ]else return Noneif not token raise access control Unauthorized Access ' Mustgiveanauthorizationtokenfor%s' % targets subject Get Subject For Error token Check Expiry if not token username raise access control Unauthorized Access ' Mustspecifyausernameforaccessto%s ' % targets subject Get Subject For Error return True
def tabulate results metrics formats column width max max len k for k in formats + 1 8 first width max len k for k in metrics head fmt '{ <{fw}s}' + '{ >{cw}s}' * len formats row fmt '{ <{fw}s}' + '{ >{cw} 3f}' * len formats print head fmt format ' Metric' cw column width fw first width *formats for metric row in zip metrics results[ -1 -1 -1 ] print row fmt format metric cw column width fw first width *row
@dodef upload python packages scratch directory target bucket top level output error check call ['python' 'setup py' 'sdist' '--dist-dir {}' format scratch directory path 'bdist wheel' '--dist-dir {}' format scratch directory path ] cwd top level path stdout output stderr error files set [f basename for f in scratch directory children ] yield Effect Upload To S 3 Recursively source path scratch directory target bucket target bucket target key 'python' files files
def extend api route '' api None base url '' def decorator extend with apply to api hug API api if api else hug api from object extend with for extended api in extend with apply to api extend extended api route base url return extend withreturn decorator
def set user password uid mode 'set password' password None **kwargs with Ipmi Command **kwargs as s s set user password uid mode 'set password' password password return True
def set current canvas canvas canvas context do CURRENT command Trueif canvasses and canvasses[ -1 ] is canvas returncc [c for c in canvasses if c is not None ]while canvas in cc cc remove canvas cc append canvas canvasses[ ] [weakref ref c for c in cc]
@cacheitdef has simple delta expr index if expr has Kronecker Delta if is simple delta expr index return Trueif expr is Add or expr is Mul for arg in expr args if has simple delta arg index return Truereturn False
def task log begin task context task name period beginning period ending host task items None message None return IMPL task log begin task context task name period beginning period ending host task items message
def signal to noise oir ccd t source eps sky eps dark eps rd npix gain 1 0 signal t * source eps * gain noise np sqrt t * source eps * gain + npix * sky eps * gain + dark eps + npix * rd ** 2 return signal / noise
def signal to noise oir ccd t source eps sky eps dark eps rd npix gain 1 0 signal t * source eps * gain noise np sqrt t * source eps * gain + npix * sky eps * gain + dark eps + npix * rd ** 2 return signal / noise
def signal to noise oir ccd t source eps sky eps dark eps rd npix gain 1 0 signal t * source eps * gain noise np sqrt t * source eps * gain + npix * sky eps * gain + dark eps + npix * rd ** 2 return signal / noise
def is prerequisite courses enabled return settings FEATURES get 'ENABLE PREREQUISITE COURSES' and settings FEATURES get 'MILESTONES APP'
def processor n fountain url responder urls zpullsock zcontext socket zmq PULL zpullsock connect fountain url zreqsock zcontext socket zmq REQ for url in responder urls zreqsock connect url while True word zpullsock recv zreqsock send word print n zreqsock recv
def build path result tests name return build schema test name str name + u' Tests' schema {u'$ref' u'/endpoints json#/definitions/' + name } schema store SCHEMAS failing instances {'additional Properties' [{u' Err' u'' u' Mountpoint' u'/x' u'extra' u'y'} {u' Result' u'hello'}] 'required' [{} {u' Mountpoint' u'/x'}] 'type' [[] u'' None]} passing instances [{u' Err' u' Somethingwentwrong '} {u' Err' u'' u' Mountpoint' u'/x/'}]
def build path result tests name return build schema test name str name + u' Tests' schema {u'$ref' u'/endpoints json#/definitions/' + name } schema store SCHEMAS failing instances {'additional Properties' [{u' Err' u'' u' Mountpoint' u'/x' u'extra' u'y'} {u' Result' u'hello'}] 'required' [{} {u' Mountpoint' u'/x'}] 'type' [[] u'' None]} passing instances [{u' Err' u' Somethingwentwrong '} {u' Err' u'' u' Mountpoint' u'/x/'}]
def char from number number base 26 rval ''if number 0 rval 'A'while number 0 remainder number % base new char chr ord 'A' + remainder rval new char + rval number // basereturn rval
def char from number number base 26 rval ''if number 0 rval 'A'while number 0 remainder number % base new char chr ord 'A' + remainder rval new char + rval number // basereturn rval
def char from number number base 26 rval ''if number 0 rval 'A'while number 0 remainder number % base new char chr ord 'A' + remainder rval new char + rval number // basereturn rval
def show user id return show item 'user' id
def set wake on network enabled state salt utils mac utils validate enabled enabled cmd 'systemsetup-setwakeonnetworkaccess{ 0 }' format state salt utils mac utils execute return success cmd return salt utils mac utils confirm updated state get wake on network
def request user has webhook permission permission type from st 2 common models db webhook import Webhook D Bdef decorate func @wraps func def func wrapper *args **kwargs hook '/' join args[ 1 ] webhook db Webhook DB name hook resource db webhook dbutils assert request user has resource db permission request pecan request resource db resource db permission type permission type return func *args **kwargs return func wrapperreturn decorate
def request user has webhook permission permission type from st 2 common models db webhook import Webhook D Bdef decorate func @wraps func def func wrapper *args **kwargs hook '/' join args[ 1 ] webhook db Webhook DB name hook resource db webhook dbutils assert request user has resource db permission request pecan request resource db resource db permission type permission type return func *args **kwargs return func wrapperreturn decorate
@jsonifydef delete record self arg dict cmd ['xenstore-rm' '/local/domain/% dom id s/% path s' % arg dict ] ret result run command cmd return result
def is field shared factory field name class Is Field Shared permissions Base Permission '\n Grantsaccessifaparticularprofilefieldissharedwiththerequestinguser \n'def has permission self request view url username request parser context get 'kwargs' {} get 'username' '' if request user username lower url username lower return Trueif request user is staff return Trueuser get object or 404 User username iexact url username if field name in visible fields user profile user return Trueraise Http 404 return Is Field Shared
def is field shared factory field name class Is Field Shared permissions Base Permission '\n Grantsaccessifaparticularprofilefieldissharedwiththerequestinguser \n'def has permission self request view url username request parser context get 'kwargs' {} get 'username' '' if request user username lower url username lower return Trueif request user is staff return Trueuser get object or 404 User username iexact url username if field name in visible fields user profile user return Trueraise Http 404 return Is Field Shared
def is field shared factory field name class Is Field Shared permissions Base Permission '\n Grantsaccessifaparticularprofilefieldissharedwiththerequestinguser \n'def has permission self request view url username request parser context get 'kwargs' {} get 'username' '' if request user username lower url username lower return Trueif request user is staff return Trueuser get object or 404 User username iexact url username if field name in visible fields user profile user return Trueraise Http 404 return Is Field Shared
def get Routes app for rule in app url map iter rules methods rule methods difference ['HEAD'] path translate werkzeug rule rule rule attributes vars app endpoints[rule endpoint] copy if 'segment count' in attributes del attributes['segment count'] yield Klein Route methods methods path path endpoint rule endpoint attributes attributes
def parse flags flags flags dict show unknown flags True separator '' flags list []mask 1while mask < flags if flags & mask if mask in flags dict flags list append flags dict[mask] elif show unknown flags flags list append '???' mask mask << 1 return separator join flags list
def reject fairness experiment num heads len [flip for flip in experiment if flip] return num heads < 469 or num heads > 531
def insert read more link instance if type instance contents Article return SUMMARY MAX LENGTH instance settings get 'SUMMARY MAX LENGTH' READ MORE LINK instance settings get 'READ MORE LINK' None READ MORE LINK FORMAT instance settings get 'READ MORE LINK FORMAT' '<aclass "read-more"href "/{url}">{text}</a>' if not SUMMARY MAX LENGTH and READ MORE LINK and READ MORE LINK FORMAT returnif hasattr instance ' summary' and instance summary summary instance summaryelse summary truncate html words instance content SUMMARY MAX LENGTH if summary instance content read more link READ MORE LINK FORMAT format url instance url text READ MORE LINK instance summary insert into last element summary read more link
def Build Clone Post Body file tuples file list []for tup in file tuples path tup[ 1 ]tup tup[ 2 ]file list append TUPLE DELIMITER join [path] + list tup return LIST DELIMITER join file list
def Build Clone Post Body file tuples file list []for tup in file tuples path tup[ 1 ]tup tup[ 2 ]file list append TUPLE DELIMITER join [path] + list tup return LIST DELIMITER join file list
def indent text amount indentation amount * '' return indentation + '\n' + indentation join text split '\n'
def get schema frame name flavor None keys None con None dtype None pandas sql pandas SQL builder con con flavor flavor return pandas sql create sql schema frame name keys keys dtype dtype
def build conversion option opt value parser try with open value 'r' as input data pickle load input except raise Configuration Exception ' File Not Found%s' % value with open value + ' dump' 'w' as output for dk dv in data iteritems output write '[%s]\n\n' % dk if isinstance dv values list output write '\n' join [ '[%d] %d' % vk vv for vk vv in enumerate dv values ] elif isinstance data[k] values dict output write '\n' join [ '[%d] %d' % vk vv for vk vv in dv values iteritems ] else raise Configuration Exception ' Datastoreiscorrupted%s' % value output write '\n\n' exit
def make user coach user master course key coach role on master course Course Ccx Coach Role master course key coach role on master course add users user
def get Host ip try return socket gethostbyaddr ip [0 ]except Exception return False
def test add to end a dedent '\nclass Abc \ndefabc self \nself x 3\n\nclass Two Abc \ndefh self \nself\n' b 'defg self \nself 'assert jedi Script a 8 12 'example py' completions assert jedi Script a + b path 'example py' completions a a[ -1 ] + ' \n' assert jedi Script a 8 13 'example py' completions assert jedi Script a + b path 'example py' completions
def test add to end a dedent '\nclass Abc \ndefabc self \nself x 3\n\nclass Two Abc \ndefh self \nself\n' b 'defg self \nself 'assert jedi Script a 8 12 'example py' completions assert jedi Script a + b path 'example py' completions a a[ -1 ] + ' \n' assert jedi Script a 8 13 'example py' completions assert jedi Script a + b path 'example py' completions
def test add to end a dedent '\nclass Abc \ndefabc self \nself x 3\n\nclass Two Abc \ndefh self \nself\n' b 'defg self \nself 'assert jedi Script a 8 12 'example py' completions assert jedi Script a + b path 'example py' completions a a[ -1 ] + ' \n' assert jedi Script a 8 13 'example py' completions assert jedi Script a + b path 'example py' completions
def test add to end a dedent '\nclass Abc \ndefabc self \nself x 3\n\nclass Two Abc \ndefh self \nself\n' b 'defg self \nself 'assert jedi Script a 8 12 'example py' completions assert jedi Script a + b path 'example py' completions a a[ -1 ] + ' \n' assert jedi Script a 8 13 'example py' completions assert jedi Script a + b path 'example py' completions
def constrain rgb r g b w - min [0 r g b] if w > 0 r + wg + wb + wreturn r g b
def constrain rgb r g b w - min [0 r g b] if w > 0 r + wg + wb + wreturn r g b
def test matching should be case insensitive completer text u'foo'collection [u' Foo' u'FOO' u'f OO']matches completer find matches text collection assert len matches 3
def scope 2 index scope descr where None try return scopes index scope except Value Error raise Value Error "{ 0 }{ 1 }hasanunsupportedscopevalue'{ 2 }'" format descr 'from{ 0 }' format where if where else '' scope
def add ignored fields patterns assert isinstance patterns list tuple ignored fields extend patterns
def get service hass config discovery info None pushetta service Pushetta Notification Service config[CONF API KEY] config[CONF CHANNEL NAME] config[CONF SEND TEST MSG] if pushetta service is valid return pushetta service
def recv tag raw sock s sock recv 4 * 4 if len s 16 raise Runtime Error ' Notenoughbytesreceived somethingiswrong Makesurethemne rt serverisrunning ' tag Tag *np fromstring s '>i 4 ' n received 0rec buff [s]while n received < tag size n buffer min 4096 tag size - n received this buffer sock recv n buffer rec buff append this buffer n received + len this buffer if n received tag size raise Runtime Error ' Notenoughbytesreceived somethingiswrong Makesurethemne rt serverisrunning ' buff '' join rec buff return tag buff
def unmountvolume volume putaway volume
def set device request device u'' response redirect add cache bypass next url request or u'/' set cookie response u'mezzanine-device' device 60 * 60 * 24 * 365 return response
def set device request device u'' response redirect add cache bypass next url request or u'/' set cookie response u'mezzanine-device' device 60 * 60 * 24 * 365 return response
def set device request device u'' response redirect add cache bypass next url request or u'/' set cookie response u'mezzanine-device' device 60 * 60 * 24 * 365 return response
def test operators for op in Operator inheritors check export description ' Assertthatthe TPOT{}operatorexportsasexpected' format op name yield check export op
def test operators for op in Operator inheritors check export description ' Assertthatthe TPOT{}operatorexportsasexpected' format op name yield check export op
@register filterdef pprint value break after 10 value to unicode value return mark safe u'<span></span>' join [escape value[i i + break after ] for i in range 0 len value break after ]
@register filterdef pprint value break after 10 value to unicode value return mark safe u'<span></span>' join [escape value[i i + break after ] for i in range 0 len value break after ]
@register filterdef pprint value break after 10 value to unicode value return mark safe u'<span></span>' join [escape value[i i + break after ] for i in range 0 len value break after ]
def setup platform hass config add devices discovery info None station config get CONF STATION zone id wmo id config get CONF ZONE ID config get CONF WMO ID if station is not None if zone id and wmo id LOGGER warning ' Usingconfig"%s" not"%s"and"%s"for BO Msensor' CONF STATION CONF ZONE ID CONF WMO ID elif zone id and wmo id station '{} {}' format zone id wmo id else station closest station config get CONF LATITUDE config get CONF LONGITUDE hass config config dir if station is None LOGGER error ' Couldnotget BO Mweatherstationfromlat/lon' return Falserest BOM Current Data hass station try rest update except Value Error as err LOGGER error ' Receivederrorfrom BOM Current %s' err return Falseadd devices [BOM Current Sensor rest variable config get CONF NAME for variable in config[CONF MONITORED CONDITIONS]] return True
def params set module changed Falsemodule params['ovs-vsctl'] module get bin path 'ovs-vsctl' True fmt '% ovs-vsctl s-t% timeout sget% table s% record s% col s % key s'cmd fmt % module params output cmd run module cmd False if module params['value'] not in output fmt '% ovs-vsctl s-t% timeout sset% table s% record s% col s % key s % value s'cmd fmt % module params rtc err cmd run module cmd if rtc 0 module fail json msg err changed Truemodule exit json changed changed
@utils arg 'address' metavar '<ipaddress>' help ' New IP Address ' @utils arg 'port' metavar '<port>' help ' New Port ' def do cloudpipe configure cs args cs cloudpipe update args address args port
def require sender id is valid intent sender id if intent not in SENDER VALIDATORS raise Exception ' Invalidemailintentstring %s' % intent elif not SENDER VALIDATORS[intent] sender id logging error " Invalidsender id%sforemailwithintent'%s'" % sender id intent raise Exception " Invalidsender idforemailwithintent'%s'" % intent
def init setting completions log completion debug ' Initializingsettingcompletion ' instances[usertypes Completion section] configmodel Setting Section Completion Model instances[usertypes Completion option] {} instances[usertypes Completion value] {}for sectname in configdata DATA opt model configmodel Setting Option Completion Model sectname instances[usertypes Completion option][sectname] opt model instances[usertypes Completion value][sectname] {}for opt in configdata DATA[sectname] val model configmodel Setting Value Completion Model sectname opt instances[usertypes Completion value][sectname][opt] val model
def locate cuda if 'CUDAHOME' in os environ home os environ['CUDAHOME']nvcc pjoin home 'bin' 'nvcc' else default path pjoin os sep 'usr' 'local' 'cuda' 'bin' nvcc find in path 'nvcc' os environ['PATH'] + os pathsep + default path if nvcc is None raise Environment Error ' Thenvccbinarycouldnotbelocatedinyour$PATH Eitheraddittoyourpath orset$CUDAHOME' home os path dirname os path dirname nvcc cudaconfig {'home' home 'nvcc' nvcc 'include' pjoin home 'include' 'lib 64 ' pjoin home 'lib 64 ' }for k v in cudaconfig iteritems if not os path exists v raise Environment Error ' The CUDA%spathcouldnotbelocatedin%s' % k v return cudaconfig
def locate cuda if 'CUDAHOME' in os environ home os environ['CUDAHOME']nvcc pjoin home 'bin' 'nvcc' else default path pjoin os sep 'usr' 'local' 'cuda' 'bin' nvcc find in path 'nvcc' os environ['PATH'] + os pathsep + default path if nvcc is None raise Environment Error ' Thenvccbinarycouldnotbelocatedinyour$PATH Eitheraddittoyourpath orset$CUDAHOME' home os path dirname os path dirname nvcc cudaconfig {'home' home 'nvcc' nvcc 'include' pjoin home 'include' 'lib 64 ' pjoin home 'lib 64 ' }for k v in cudaconfig iteritems if not os path exists v raise Environment Error ' The CUDA%spathcouldnotbelocatedin%s' % k v return cudaconfig
@cache permissiondef can edit subproject user project return check permission user project 'trans change subproject'
def literalquery statement dialect None if isinstance statement sqlalchemy orm Query if dialect is None dialect statement session get bind statement mapper zero or none dialectstatement statement statementif dialect is None dialect getattr statement bind 'dialect' None if dialect is None from sqlalchemy dialects import mysqldialect mysql dialect Compiler type statement compiler dialect class Literal Compiler Compiler visit bindparam Compiler render literal bindparamdef render literal value self value type if isinstance value Decimal long return str value elif isinstance value datetime return repr str value else value super Literal Compiler self render literal value value type if isinstance value unicode return value encode 'UTF- 8 ' else return valuereturn Literal Compiler dialect statement
def s one pre topics s one pre []for top words in topics s one pre t []for w prime index w prime in enumerate top words[ 1 ] for w star in top words[ w prime index + 1 ] s one pre t append w prime w star s one pre append s one pre t return s one pre
def s one pre topics s one pre []for top words in topics s one pre t []for w prime index w prime in enumerate top words[ 1 ] for w star in top words[ w prime index + 1 ] s one pre t append w prime w star s one pre append s one pre t return s one pre
@register simple tagdef language name code return escape force text Language objects get code code
def get image conn vm img config get cloud config value 'image' vm opts default 'debian- 7 ' search global False return conn ex get image img
def get image conn vm img config get cloud config value 'image' vm opts default 'debian- 7 ' search global False return conn ex get image img
def to dnf expr simplify False expr sympify expr if not isinstance expr Boolean Function return exprif simplify return simplify logic expr 'dnf' True if is dnf expr return exprexpr eliminate implications expr return distribute or over and expr
def guvectorize ftylist signature **kws if isinstance ftylist str ftylist [ftylist]def wrap func guvec GU Vectorize func signature **kws for fty in ftylist guvec add fty return guvec build ufunc return wrap
def guvectorize ftylist signature **kws if isinstance ftylist str ftylist [ftylist]def wrap func guvec GU Vectorize func signature **kws for fty in ftylist guvec add fty return guvec build ufunc return wrap
def mquantiles cimj data prob [0 25 0 5 0 75 ] alpha 0 05 axis None alpha min alpha 1 - alpha z norm ppf 1 - alpha / 2 0 xq mstats mquantiles data prob alphap 0 betap 0 axis axis smj mjci data prob axis axis return xq - z * smj xq + z * smj
def run start date datetime date 2013 8 27 approve '"action" %s' % rvw ACTION APPROVE reject '"action" %s' % rvw ACTION REJECT al Activity Log objects filter Q details contains approve Q details contains reject action amo LOG THEME REVIEW id created lte start date for chunk in chunked al 50 batch award points delay chunk
def run start date datetime date 2013 8 27 approve '"action" %s' % rvw ACTION APPROVE reject '"action" %s' % rvw ACTION REJECT al Activity Log objects filter Q details contains approve Q details contains reject action amo LOG THEME REVIEW id created lte start date for chunk in chunked al 50 batch award points delay chunk
def run start date datetime date 2013 8 27 approve '"action" %s' % rvw ACTION APPROVE reject '"action" %s' % rvw ACTION REJECT al Activity Log objects filter Q details contains approve Q details contains reject action amo LOG THEME REVIEW id created lte start date for chunk in chunked al 50 batch award points delay chunk
def run start date datetime date 2013 8 27 approve '"action" %s' % rvw ACTION APPROVE reject '"action" %s' % rvw ACTION REJECT al Activity Log objects filter Q details contains approve Q details contains reject action amo LOG THEME REVIEW id created lte start date for chunk in chunked al 50 batch award points delay chunk
def run start date datetime date 2013 8 27 approve '"action" %s' % rvw ACTION APPROVE reject '"action" %s' % rvw ACTION REJECT al Activity Log objects filter Q details contains approve Q details contains reject action amo LOG THEME REVIEW id created lte start date for chunk in chunked al 50 batch award points delay chunk
def xfail reason '' tracebackhide Trueraise X Failed reason
def create network acl entry network acl id None rule number None protocol None rule action None cidr block None egress None network acl name None icmp code None icmp type None port range from None port range to None region None key None keyid None profile None kwargs locals return create network acl entry **kwargs
def Absolute Node node if node attributes for name value in node attributes items if name in [' Inherited Property Sheets' ' Relative Path' ' Additional Include Directories' ' Intermediate Directory' ' Output Directory' ' Additional Library Directories'] path list value split ' ' new list Fix Filenames path list os path dirname ARGUMENTS[ 1 ] node set Attribute name ' ' join new list if not value node remove Attribute name
def Absolute Node node if node attributes for name value in node attributes items if name in [' Inherited Property Sheets' ' Relative Path' ' Additional Include Directories' ' Intermediate Directory' ' Output Directory' ' Additional Library Directories'] path list value split ' ' new list Fix Filenames path list os path dirname ARGUMENTS[ 1 ] node set Attribute name ' ' join new list if not value node remove Attribute name
def set preprint providers providers {'osf' ' Open Science Framework' 'socarxiv' ' Soc Ar Xiv' 'engrxiv' ' Engr Xiv' 'psyarxiv' ' Psy Ar Xiv'}for key value in providers items provider factories Preprint Provider Factory provider id keyprovider name valuetry provider save except Key Exists Exception continue
def test cache metadata config stub tmpdir config stub data {'storage' {'cache-size' 1024 } 'general' {'private-browsing' False}}url 'http //qutebrowser org'metadata Q Network Cache Meta Data metadata set Url Q Url url assert metadata is Valid disk cache cache Disk Cache str tmpdir device disk cache prepare metadata device write 'foobar' disk cache insert device assert disk cache meta Data Q Url url metadata
def cleanup stubs pass
def md 5 hash text return md 5 to bytes text hexdigest
def create welcome forum if User query count < 1 return Falseuser User query filter by id 1 first category Category title u' My Category' position 1 category save forum Forum title u' Welcome' description u' Yourfirstforum' category id category id forum save topic Topic title u' Welcome ' post Post content u' Havefunwithyournew Flask BB Forum ' topic save user user forum forum post post return True
def new key msg None digestmod None return HMAC key msg digestmod
def process glsl template template colors for i in range len colors - 1 -1 -1 color colors[i]assert len color 4 vec 4 color 'vec 4 % 3f % 3f % 3f % 3f ' % tuple color template template replace '$color %d' % i vec 4 color return template
@cli command 'display' @processordef display cmd images for image in images click echo ' Displaying"%s"' % image filename image show yield image
def ode linear coefficients eq func order match return ode 1st homogeneous coeff best eq func order match
def present name profile 'github' **kwargs ret {'name' name 'changes' {} 'result' None 'comment' ''}target salt ['github get user'] name profile profile **kwargs if not target ret['result'] Falseret['comment'] ' Couldntfinduser{ 0 }' format name elif isinstance target bool and target ret['comment'] ' User{ 0 }isalreadyintheorg' format name ret['result'] Trueelif not target get 'in org' False and target get 'membership state' 'pending' if opts ['test'] ret['comment'] ' User{ 0 }willbeaddedtotheorg' format name return retresult salt ['github add user'] name profile profile **kwargs if result ret['changes'] setdefault 'old' None ret['changes'] setdefault 'new' ' User{ 0 }existsintheorgnow' format name ret['result'] Trueelse ret['result'] Falseret['comment'] ' Failedtoadduser{ 0 }totheorg' format name else ret['comment'] ' User{ 0 }hasalreadybeeninvited ' format name ret['result'] Truereturn ret
def read git file path result Noneif path and is git file path header u'gitdir 'data core read path strip if data startswith header result data[len header ]return result
def function variable *a **kw return a kw
def Inline Legend chart show Falselabels []label positions []for series in chart data if series label is None labels append '' else labels append series label show Truelabel positions append series data[ -1 ] if show chart right min chart left minchart right max chart left maxchart right labels labelschart right label positions label positionschart show legend False
def Inline Legend chart show Falselabels []label positions []for series in chart data if series label is None labels append '' else labels append series label show Truelabel positions append series data[ -1 ] if show chart right min chart left minchart right max chart left maxchart right labels labelschart right label positions label positionschart show legend False
def tgrep node literal value node return node label if istree node else text type node
def generate pools cidr gateway ip net netaddr IP Network cidr ip version net versionfirst netaddr IP Address net first ip version last netaddr IP Address net last ip version if first last return [netaddr IP Range first last ]first ip first + 1 last ip last - ip version 4 if first ip > last ip return []ipset netaddr IP Set netaddr IP Range first ip last ip if gateway ip ipset remove netaddr IP Address gateway ip ip version return list ipset iter ipranges
def generate pools cidr gateway ip net netaddr IP Network cidr ip version net versionfirst netaddr IP Address net first ip version last netaddr IP Address net last ip version if first last return [netaddr IP Range first last ]first ip first + 1 last ip last - ip version 4 if first ip > last ip return []ipset netaddr IP Set netaddr IP Range first ip last ip if gateway ip ipset remove netaddr IP Address gateway ip ip version return list ipset iter ipranges
def generate pools cidr gateway ip net netaddr IP Network cidr ip version net versionfirst netaddr IP Address net first ip version last netaddr IP Address net last ip version if first last return [netaddr IP Range first last ]first ip first + 1 last ip last - ip version 4 if first ip > last ip return []ipset netaddr IP Set netaddr IP Range first ip last ip if gateway ip ipset remove netaddr IP Address gateway ip ip version return list ipset iter ipranges
def mapping delete index doc type hosts None profile None es get instance hosts profile try result es indices delete mapping index index doc type doc type if result get 'acknowledged' False return Trueexcept elasticsearch exceptions Not Found Error return Nonereturn None
def register linker name linker if name in predefined linkers raise Value Error ' Linkernamealreadytaken %s' % name predefined linkers[name] linker
def register linker name linker if name in predefined linkers raise Value Error ' Linkernamealreadytaken %s' % name predefined linkers[name] linker
def set rpm probes probes return salt ['probes set probes'] ordered dict to dict probes commit False
def set rpm probes probes return salt ['probes set probes'] ordered dict to dict probes commit False
def i0 x return tt switch tt lt x 5 1 + x ** 2 / 4 + x ** 4 / 64 + x ** 6 / 2304 + x ** 8 / 147456 + x ** 10 / 14745600 + x ** 12 / 2123366400 np e ** x / 2 * np pi * x ** 0 5 * 1 + 1 / 8 * x + 9 / 128 * x ** 2 + 225 / 3072 * x ** 3 + 11025 / 98304 * x ** 4
def strip unneeded bkts sufficient funds bkts sorted bkts key lambda bkt bkt value for i in range len bkts if not sufficient funds bkts[ i + 1 ] return bkts[i ]return bkts
def generate probable prime **kwargs exact bits kwargs pop 'exact bits' None randfunc kwargs pop 'randfunc' None prime filter kwargs pop 'prime filter' lambda x True if kwargs print ' Unknownparameters ' kwargs keys if exact bits is None raise Value Error ' Missingexact bitsparameter' if exact bits < 160 raise Value Error ' Primenumberisnotbigenough ' if randfunc is None randfunc Random new readresult COMPOSIT Ewhile result COMPOSITE candidate Integer random exact bits exact bits randfunc randfunc 1 if not prime filter candidate continueresult test probable prime candidate randfunc return candidate
def start date year ago date today - timedelta days 365 return date year ago year year ago month 1
def start date year ago date today - timedelta days 365 return date year ago year year ago month 1
def temp db filename try h test db fname tempfile mkstemp ' Bio SQL db' dir '/dev/shm' except OS Error h test db fname tempfile mkstemp ' Bio SQL db' os close h return test db fname
def add s3 command table session **kwargs utils rename command command table 's 3 ' 's 3 api' command table['s 3 '] S3 session
def Parse Nolint Suppressions filename raw line linenum error matched RE SUPPRESSION search raw line if matched category matched group 1 if category in None ' * ' error suppressions setdefault None set add linenum elif category startswith ' ' and category endswith ' ' category category[ 1 -1 ]if category in ERROR CATEGORIES error suppressions setdefault category set add linenum else error filename linenum 'readability/nolint' 5 ' Unknown NOLIN Terrorcategory %s' % category
def tree 2 conllstr t lines [u'' join token for token in tree 2 conlltags t ]return u'\n' join lines
def set Logger Class logging Class assert issubclass logging Class I Logger 'logging Classmustsubclass I Logger'global Logger Class Logger Class logging Class
def evalcode python executor code input type global dict gdb parse and eval ' Py Eval Get Globals ' local dict gdb parse and eval ' Py Eval Get Locals ' if pointervalue global dict 0 or pointervalue local dict 0 raise gdb Gdb Error ' Unabletofindthelocalsorglobalsofthemostrecent Pythonfunction relativetotheselectedframe ' return executor evalcode code input type global dict local dict
def test colormap endian cmap cm get cmap u'jet' a [ -0 5 0 0 5 1 1 5 np nan]for dt in [u'f 2 ' u'f 4 ' u'f 8 '] anative np ma masked invalid np array a dtype dt aforeign anative byteswap newbyteorder assert array equal cmap anative cmap aforeign
def test colormap endian cmap cm get cmap u'jet' a [ -0 5 0 0 5 1 1 5 np nan]for dt in [u'f 2 ' u'f 4 ' u'f 8 '] anative np ma masked invalid np array a dtype dt aforeign anative byteswap newbyteorder assert array equal cmap anative cmap aforeign
def proportions chisquare allpairs count nobs multitest method 'hs' all pairs lzip *np triu indices len count 1 pvals [proportions chisquare count[list pair ] nobs[list pair ] [1 ] for pair in all pairs]return All Pairs Results pvals all pairs multitest method multitest method
def proportions chisquare allpairs count nobs multitest method 'hs' all pairs lzip *np triu indices len count 1 pvals [proportions chisquare count[list pair ] nobs[list pair ] [1 ] for pair in all pairs]return All Pairs Results pvals all pairs multitest method multitest method
def required modules error name docstring modules required module list docstring if not modules return ''filename os path basename name split ' ' [0 ]msg "'{ 0 }'requiresthesepythonmodules {1 }"return msg format filename ' ' join modules
def required modules error name docstring modules required module list docstring if not modules return ''filename os path basename name split ' ' [0 ]msg "'{ 0 }'requiresthesepythonmodules {1 }"return msg format filename ' ' join modules
def required modules error name docstring modules required module list docstring if not modules return ''filename os path basename name split ' ' [0 ]msg "'{ 0 }'requiresthesepythonmodules {1 }"return msg format filename ' ' join modules
def set default retry params retry params thread local settings default retry params copy copy retry params
def nice case line l line lower s ''i 0next Cap 1while i < len l c l[i]if c > 'a' and c < 'z' and next Cap c c upper next Cap 0elif c '' or c ' ' or c ' ' or c ' ' or c ' ' or c ' DCTB ' or c '-' or c ' ' next Cap 1s + ci + 1return s
def enforce le validity domain domain enforce domain sanity domain if not re match '^[A- Za-z 0 - 9 -]*$' domain raise errors Configuration Error '{ 0 }containsaninvalidcharacter Validcharactersare A-Z a-z 0- 9 and- ' format domain labels domain split ' ' if len labels < 2 raise errors Configuration Error '{ 0 }needsatleasttwolabels' format domain for label in labels if label startswith '-' raise errors Configuration Error 'label"{ 0 }"indomain"{ 1 }"cannotstartwith"-"' format label domain if label endswith '-' raise errors Configuration Error 'label"{ 0 }"indomain"{ 1 }"cannotendwith"-"' format label domain return domain
def enforce le validity domain domain enforce domain sanity domain if not re match '^[A- Za-z 0 - 9 -]*$' domain raise errors Configuration Error '{ 0 }containsaninvalidcharacter Validcharactersare A-Z a-z 0- 9 and- ' format domain labels domain split ' ' if len labels < 2 raise errors Configuration Error '{ 0 }needsatleasttwolabels' format domain for label in labels if label startswith '-' raise errors Configuration Error 'label"{ 0 }"indomain"{ 1 }"cannotstartwith"-"' format label domain if label endswith '-' raise errors Configuration Error 'label"{ 0 }"indomain"{ 1 }"cannotendwith"-"' format label domain return domain
@receiver post save def create profile sender instance created **kwargs if sender get user model user instanceprofile model get profile model if profile model User Profile and created profile new User Profile objects get or create user instance
@receiver post save def create profile sender instance created **kwargs if sender get user model user instanceprofile model get profile model if profile model User Profile and created profile new User Profile objects get or create user instance
def get cap alert addresses opts T current Tgtable current s3 db pr grouprows current db gtable deleted True select gtable id gtable name return [ row id s3 str T row name for row in rows]
def chained func def wrapper *args **kwargs for xs in func *args **kwargs for x in xs yield x return wrapper
def chained func def wrapper *args **kwargs for xs in func *args **kwargs for x in xs yield x return wrapper
def trace msg html False write msg 'TRACE' html
def trace msg html False write msg 'TRACE' html
def sel Stochastic Universal Sampling individuals k s inds sorted individuals key attrgetter 'fitness' reverse True sum fits sum ind fitness values[ 0 ] for ind in individuals distance sum fits / float k start random uniform 0 distance points [ start + i * distance for i in xrange k ]chosen []for p in points i 0sum s inds[i] fitness values[ 0 ]while sum < p i + 1sum + s inds[i] fitness values[ 0 ]chosen append s inds[i] return chosen
def create catalog api client user catalog integration scopes ['email' 'profile']expires in settings OAUTH ID TOKEN EXPIRATIO Njwt Jwt Builder user build token scopes expires in return Edx Rest Api Client catalog integration internal api url jwt jwt
def create catalog api client user catalog integration scopes ['email' 'profile']expires in settings OAUTH ID TOKEN EXPIRATIO Njwt Jwt Builder user build token scopes expires in return Edx Rest Api Client catalog integration internal api url jwt jwt
def check solutions eq s diophantine eq factors Mul make args eq var list eq free symbols var sort key default sort key while s solution s pop for f in factors if diop simplify f subs zip var solution 0 breakelse return Falsereturn True
def check solutions eq s diophantine eq factors Mul make args eq var list eq free symbols var sort key default sort key while s solution s pop for f in factors if diop simplify f subs zip var solution 0 breakelse return Falsereturn True
def has sub tasks task if istask task return Trueelif isinstance task list return any has sub tasks i for i in task else return False
def draw shell G **kwargs nlist kwargs get 'nlist' None if nlist is not None del kwargs['nlist']draw G shell layout G nlist nlist **kwargs
def strip sys meta prefix server type key return key[len get sys meta prefix server type ]
def placeholder shape None ndim None dtype None sparse False name None if dtype is None dtype floatx if not shape if ndim shape tuple [ None for in range ndim ] if sparse x tf sparse placeholder dtype name name x dims len shape else x tf placeholder dtype shape shape name name x keras shape shapex uses learning phase Falsereturn x
def test ast bad assert cant compile u' assert ' cant compile u' assert 123 ' cant compile u' assert 1 [ 12 ] 3 '
def is number geographical numobj num type number type numobj return num type Phone Number Type FIXED LINE or num type Phone Number Type FIXED LINE OR MOBILE or numobj country code in GEO MOBILE COUNTRIES and num type Phone Number Type MOBILE
def setup editor qtbot text 'a 1\nprint a \n\nx 2'editor Stack Editor Stack None [] editor Stack set introspector Mock editor Stack set find widget Mock editor Stack set io actions Mock Mock Mock Mock finfo editor Stack new 'foo py' 'utf- 8 ' text qtbot add Widget editor Stack return editor Stack finfo editor
def setup editor qtbot text 'a 1\nprint a \n\nx 2'editor Stack Editor Stack None [] editor Stack set introspector Mock editor Stack set find widget Mock editor Stack set io actions Mock Mock Mock Mock finfo editor Stack new 'foo py' 'utf- 8 ' text qtbot add Widget editor Stack return editor Stack finfo editor
def setup editor qtbot text 'a 1\nprint a \n\nx 2'editor Stack Editor Stack None [] editor Stack set introspector Mock editor Stack set find widget Mock editor Stack set io actions Mock Mock Mock Mock finfo editor Stack new 'foo py' 'utf- 8 ' text qtbot add Widget editor Stack return editor Stack finfo editor
def setup editor qtbot text 'a 1\nprint a \n\nx 2'editor Stack Editor Stack None [] editor Stack set introspector Mock editor Stack set find widget Mock editor Stack set io actions Mock Mock Mock Mock finfo editor Stack new 'foo py' 'utf- 8 ' text qtbot add Widget editor Stack return editor Stack finfo editor
def reply published cb sender user reply trivial **kwargs siteconfig Site Configuration objects get current if siteconfig get u'mail send review mail' and not trivial mail reply reply user
def test ast good lambda can compile u' lambda[] ' can compile u' lambda[] 1 '
def get user model custom model getattr settings setting name 'USER MODEL' None if custom model return module member custom model try from mongoengine django mongo auth models import get user documentreturn get user document except Import Error return module member 'mongoengine django auth User'
def fmt whitespace value value WHITESPACE RE sub u'<spanclass "hlspace">\\ 1 </span>' value value value replace u' DCTB ' SPACE TAB format u' Tabcharacter' return value
def get variables scope None suffix None candidates tf get collection MODEL VARIABLES scope [ ]if suffix is not None candidates [var for var in candidates if var op name endswith suffix ]return candidates
def subf pattern format string count 0 flags 0 pos None endpos None concurrent None **kwargs return compile pattern flags kwargs subf format string count pos endpos concurrent
def worker activate worker lbn profile 'default' return worker ctl worker lbn 'a' profile
def worker activate worker lbn profile 'default' return worker ctl worker lbn 'a' profile
def test cp 12403 super Console Send Keys 'output Redirect Start{ }{ }{ENTER}' super Console Send Keys 'raise Exception{ }" Somestringexception"{ }{ENTER}' expected [' Traceback mostrecentcalllast ' ' File"<stdin>" line 1 in<module>' ' Exception Somestringexception' '']super Console Send Keys 'output Redirect Stop{ }{ }{ENTER}' Are Equal remove Prompts get Test Output [0 ] [] errlines get Test Output [1 ]for i in xrange len errlines Assert errlines[i] startswith expected[i] str errlines + ' ' + str expected
def test cp 12403 super Console Send Keys 'output Redirect Start{ }{ }{ENTER}' super Console Send Keys 'raise Exception{ }" Somestringexception"{ }{ENTER}' expected [' Traceback mostrecentcalllast ' ' File"<stdin>" line 1 in<module>' ' Exception Somestringexception' '']super Console Send Keys 'output Redirect Stop{ }{ }{ENTER}' Are Equal remove Prompts get Test Output [0 ] [] errlines get Test Output [1 ]for i in xrange len errlines Assert errlines[i] startswith expected[i] str errlines + ' ' + str expected
def clean xml string s return u'' join c for c in s if is valid xml char ordinal ord c
def Find Renderer For Object rdf obj return Value Renderer rdf obj
def parallel predict log proba estimators estimators features X n classes n samples X shape[ 0 ]log proba np empty n samples n classes log proba fill - np inf all classes np arange n classes dtype np int for estimator features in zip estimators estimators features log proba estimator estimator predict log proba X[ features] if n classes len estimator classes log proba np logaddexp log proba log proba estimator else log proba[ estimator classes ] np logaddexp log proba[ estimator classes ] log proba estimator[ range len estimator classes ] missing np setdiff 1 d all classes estimator classes log proba[ missing] np logaddexp log proba[ missing] - np inf return log proba
def parallel predict log proba estimators estimators features X n classes n samples X shape[ 0 ]log proba np empty n samples n classes log proba fill - np inf all classes np arange n classes dtype np int for estimator features in zip estimators estimators features log proba estimator estimator predict log proba X[ features] if n classes len estimator classes log proba np logaddexp log proba log proba estimator else log proba[ estimator classes ] np logaddexp log proba[ estimator classes ] log proba estimator[ range len estimator classes ] missing np setdiff 1 d all classes estimator classes log proba[ missing] np logaddexp log proba[ missing] - np inf return log proba
def test keypoints censure moon image star detector CENSURE mode 'star' detector detect rescale img 0 25 expected keypoints np array [[ 23 27 ] [29 89 ] [30 86 ] [107 59 ] [109 64 ] [111 67 ] [113 70 ]] expected scales np array [3 2 4 2 5 3 2] assert array equal expected keypoints detector keypoints assert array equal expected scales detector scales
def enum *sequential return type str u' Enum' dict zip sequential sequential
def start *args **kwargs return query 'server/start'
def lookup Service name timeout None return get Resolver lookup Service name timeout
def strip whitespace tokens for i token in enumerate tokens if token type u'S' breakelse return []tokens tokens[i ]while tokens and tokens[ -1 ] type u'S' tokens pop return tokens
def calculate meta meta bases winner metafor base in bases base meta type base if issubclass winner base meta continueif issubclass base meta winner winner base metacontinueraise Type Error 'metaclassconflict themetaclassofaderivedclassmustbea non-strict subclassofthemetaclassesofallitsbases' return winner
def is Tipc Available if not hasattr socket 'AF TIPC' return Falseif not os path isfile '/proc/modules' return Falsewith open '/proc/modules' as f for line in f if line startswith 'tipc' return Truereturn False
def is Tipc Available if not hasattr socket 'AF TIPC' return Falseif not os path isfile '/proc/modules' return Falsewith open '/proc/modules' as f for line in f if line startswith 'tipc' return Truereturn False
def is Tipc Available if not hasattr socket 'AF TIPC' return Falseif not os path isfile '/proc/modules' return Falsewith open '/proc/modules' as f for line in f if line startswith 'tipc' return Truereturn False
def is Tipc Available if not hasattr socket 'AF TIPC' return Falseif not os path isfile '/proc/modules' return Falsewith open '/proc/modules' as f for line in f if line startswith 'tipc' return Truereturn False
@publicdef xfield symbols domain order lex field Frac Field symbols domain order return field field gens
@publicdef xfield symbols domain order lex field Frac Field symbols domain order return field field gens
def auth info encoded info request headers get 'X- Endpoint-API- User Info' None if encoded info info json base 64 decode encoded info user info json loads info json else user info {'id' 'anonymous'}return jsonify user info
def ec 2 error req request id code message LOG error '% code s % message s' % locals resp webob Response resp status 400 resp headers[' Content- Type'] 'text/xml'resp body str '<?xmlversion "1 0"?>\n< Response>< Errors>< Error>< Code>%s</ Code>< Message>%s</ Message></ Error></ Errors>< Request ID>%s</ Request ID></ Response>' % utils xhtml escape utils utf 8 code utils xhtml escape utils utf 8 message utils xhtml escape utils utf 8 request id return resp
@contextmanagerdef in dir dir None cwd os getcwd if dir is None yield cwd returnos chdir dir yield dir os chdir cwd
@contextmanagerdef in dir dir None cwd os getcwd if dir is None yield cwd returnos chdir dir yield dir os chdir cwd
@contextmanagerdef in dir dir None cwd os getcwd if dir is None yield cwd returnos chdir dir yield dir os chdir cwd
@contextmanagerdef in dir dir None cwd os getcwd if dir is None yield cwd returnos chdir dir yield dir os chdir cwd
@contextmanagerdef in dir dir None cwd os getcwd if dir is None yield cwd returnos chdir dir yield dir os chdir cwd
def test resize promo img resize size [1050 ]final size [ 1050 591 640 360 320 180 ] promo img uploader resize size final size
def organization follower list context data dict check access 'organization follower list' context data dict return follower list context data dict ckan logic schema default follow group schema context['model'] User Following Group
def build summary layout level 1 assert level > 0 level - 1summary List klass u'summary' for child in layout children if not isinstance child Section continuelabel layout title child if not label and not child id continueif not child id child id label replace '' '-' node Link u'#' + child id label label or child id if level and [n for n in child children if isinstance n Section ] node Paragraph [node build summary child level ] summary append node return summary
def randu nchars return '' join np random choice RANDU CHARS nchars
def test temporary with pytest raises falcon http status HTTP Status as redirect hug redirect temporary '/' assert '307 ' in redirect value status
def set cache dir cache dir if cache dir is not None and not op exists cache dir raise IO Error ' Directory%sdoesnotexist' % cache dir set config 'MNE CACHE DIR' cache dir set env False
def collect feature locations paths strict True locations []for path in paths if os path isdir path for dirpath dirnames filenames in os walk path dirnames sort for filename in sorted filenames if filename endswith ' feature' location File Location os path join dirpath filename locations append location elif path startswith '@' locations extend Feature List Parser parse file path[ 1 ] else location File Location Parser parse path if not location filename endswith ' feature' raise Invalid Filename Error location filename elif location exists locations append location elif strict raise File Not Found Error path return locations
def get Rotated Complex Lists plane Angle point Lists rotated Complex Lists []for point List in point Lists rotated Complex Lists append get Rotated Complexes plane Angle point List return rotated Complex Lists
def histogram bins timeseries series scipy array [x[ 1 ] for x in timeseries] t tail avg timeseries h np histogram series bins 15 bins h[ 1 ]for index bin size in enumerate h[ 0 ] if bin size < 20 if index 0 if t < bins[ 0 ] return Trueelif t > bins[index] and t < bins[ index + 1 ] return Truereturn False
def histogram bins timeseries series scipy array [x[ 1 ] for x in timeseries] t tail avg timeseries h np histogram series bins 15 bins h[ 1 ]for index bin size in enumerate h[ 0 ] if bin size < 20 if index 0 if t < bins[ 0 ] return Trueelif t > bins[index] and t < bins[ index + 1 ] return Truereturn False
def ping host None core name None ret get return dict if get none or value core name is None and check for cores success Truefor name in opts ['solr cores'] resp get admin info 'ping' host host core name name if resp['success'] data {name {'status' resp['data']['status']}}else success Falsedata {name {'status' None}}ret update return dict ret success data resp['errors'] return retelse resp get admin info 'ping' host host core name core name return resp
def select device device id context devices get context device id return context device
def read element string stream size return read stream size decode 'ascii'
def static path try return staticfiles storage url path except Value Error return settings STATIC URL + path
def test show examples skip if no matplotlib skip if no data with open 'temp yaml' 'w' as f f write "\n obj pylearn 2 datasets mnist MNIST{\nwhich set 'train'\n}\n" show examples 'temp yaml' 28 28 out 'garbage png' os remove 'temp yaml'
def contains bad names file names return any [xml unsafe search f for f in file names]
def contains bad names file names return any [xml unsafe search f for f in file names]
def write trees handle plain False **kwargs return Writer trees write handle plain plain **kwargs
@doctest depends on modules 'lxml' def c2 p mml simple False if not mml startswith '<math' mml add mathml headers mml if simple return apply xsl mml 'mathml/data/simple mmlctop xsl' return apply xsl mml 'mathml/data/mmlctop xsl'
@doctest depends on modules 'lxml' def c2 p mml simple False if not mml startswith '<math' mml add mathml headers mml if simple return apply xsl mml 'mathml/data/simple mmlctop xsl' return apply xsl mml 'mathml/data/mmlctop xsl'
def snapshot name suffix None return virt call name 'snapshot' 'saved' ' Snapshothasbeentaken' suffix suffix
def ppa name auto accept True keyserver None assert name startswith 'ppa ' user repo name[ 4 ] split '/' 2 release float distrib release if release > 12 04 repo repo replace ' ' ' ' auto accept '--yes' if auto accept else '' else auto accept ''if not isinstance keyserver basestring and keyserver keyserver keyserver[ 0 ]if keyserver keyserver '--keyserver' + keyserver else keyserver ''distrib distrib codename source '/etc/apt/sources list d/% user s-% repo s-% distrib s list' % locals if not is file source if release > 14 04 package 'software-properties-common' else package 'python-software-properties' run as root 'add-apt-repository% auto accept s% keyserver s% name s' % locals pty False update index
def remove featured activity activity type activity id featured references get featured activity references activity reference found Falsenew activity references []for reference in featured references if reference type activity type or reference id activity id new activity references append reference else activity reference found Trueif activity reference found logging info ' The%swithid%swasremovedfromthefeaturedlist ' % activity type activity id update featured activity references new activity references
def pci device get all by node context node id return IMPL pci device get all by node context node id
def textile text head offset 0 html type 'xhtml' encoding None output None return Textile textile text head offset head offset html type html type
def textile text head offset 0 html type 'xhtml' encoding None output None return Textile textile text head offset head offset html type html type
def test nonexistent extra warns user no wheel script data result script pip 'install' '--no-binary all ' '--no-index' '--find-links ' + data find links 'simple[nonexistent]' expect stderr True assert "simple 3 0doesnotprovidetheextra'nonexistent'" in result stderr
def test nonexistent extra warns user no wheel script data result script pip 'install' '--no-binary all ' '--no-index' '--find-links ' + data find links 'simple[nonexistent]' expect stderr True assert "simple 3 0doesnotprovidetheextra'nonexistent'" in result stderr
def test nonexistent extra warns user no wheel script data result script pip 'install' '--no-binary all ' '--no-index' '--find-links ' + data find links 'simple[nonexistent]' expect stderr True assert "simple 3 0doesnotprovidetheextra'nonexistent'" in result stderr
def test nonexistent extra warns user no wheel script data result script pip 'install' '--no-binary all ' '--no-index' '--find-links ' + data find links 'simple[nonexistent]' expect stderr True assert "simple 3 0doesnotprovidetheextra'nonexistent'" in result stderr
def test nonexistent extra warns user no wheel script data result script pip 'install' '--no-binary all ' '--no-index' '--find-links ' + data find links 'simple[nonexistent]' expect stderr True assert "simple 3 0doesnotprovidetheextra'nonexistent'" in result stderr
def test nonexistent extra warns user no wheel script data result script pip 'install' '--no-binary all ' '--no-index' '--find-links ' + data find links 'simple[nonexistent]' expect stderr True assert "simple 3 0doesnotprovidetheextra'nonexistent'" in result stderr
def test nonexistent extra warns user no wheel script data result script pip 'install' '--no-binary all ' '--no-index' '--find-links ' + data find links 'simple[nonexistent]' expect stderr True assert "simple 3 0doesnotprovidetheextra'nonexistent'" in result stderr
def user home request return shortcuts redirect horizon get user home request user
def suite Visit suite visitor warnings warn ' Testvisitorsdeprecatedin Twisted 8 0' category Deprecation Warning for case in suite tests visit getattr case 'visit' None if visit is not None visit visitor elif isinstance case pyunit Test Case case itrial I Test Case case case visit visitor elif isinstance case pyunit Test Suite suite Visit case visitor else case visit visitor
def suite Visit suite visitor warnings warn ' Testvisitorsdeprecatedin Twisted 8 0' category Deprecation Warning for case in suite tests visit getattr case 'visit' None if visit is not None visit visitor elif isinstance case pyunit Test Case case itrial I Test Case case case visit visitor elif isinstance case pyunit Test Suite suite Visit case visitor else case visit visitor
def set key value service None profile None client get conn profile client set key value return get key service profile
def access message user profile message id try message Message objects select related get id message id except Message Does Not Exist raise Jsonable Error ' Invalidmessage s ' try user message User Message objects select related get user profile user profile message message except User Message Does Not Exist user message Noneif user message is None if message recipient type Recipient STREAM raise Jsonable Error ' Invalidmessage s ' stream Stream objects get id message recipient type id if not stream is public raise Jsonable Error ' Invalidmessage s ' if stream realm user profile realm raise Jsonable Error ' Invalidmessage s ' return message user message
def access message user profile message id try message Message objects select related get id message id except Message Does Not Exist raise Jsonable Error ' Invalidmessage s ' try user message User Message objects select related get user profile user profile message message except User Message Does Not Exist user message Noneif user message is None if message recipient type Recipient STREAM raise Jsonable Error ' Invalidmessage s ' stream Stream objects get id message recipient type id if not stream is public raise Jsonable Error ' Invalidmessage s ' if stream realm user profile realm raise Jsonable Error ' Invalidmessage s ' return message user message
def decov h return De Cov h
def test angle format roundtripping a1 Angle 0 unit u radian a2 Angle 10 unit u degree a3 Angle 0 543 unit u degree a4 Angle u' 1 d 2 m 3 4s' assert Angle str a1 degree a1 degree assert Angle str a2 degree a2 degree assert Angle str a3 degree a3 degree assert Angle str a4 degree a4 degree ra Longitude u' 1 h 2 m 3 4s' dec Latitude u' 1 d 2 m 3 4s' assert allclose Angle str ra degree ra degree assert allclose Angle str dec degree dec degree
def test angle format roundtripping a1 Angle 0 unit u radian a2 Angle 10 unit u degree a3 Angle 0 543 unit u degree a4 Angle u' 1 d 2 m 3 4s' assert Angle str a1 degree a1 degree assert Angle str a2 degree a2 degree assert Angle str a3 degree a3 degree assert Angle str a4 degree a4 degree ra Longitude u' 1 h 2 m 3 4s' dec Latitude u' 1 d 2 m 3 4s' assert allclose Angle str ra degree ra degree assert allclose Angle str dec degree dec degree
def paranoid urlparser method check def check wrapper parser *args **kwargs return Url Parser perform paranoid check parser check *args **kwargs return check wrapper
def paranoid urlparser method check def check wrapper parser *args **kwargs return Url Parser perform paranoid check parser check *args **kwargs return check wrapper
def mkdir path try os mkdir path except OS Error logging error "OS Errorwhilecreatingdir'{ 0 }'" format path return Falsereturn True
@contextlib contextmanagerdef Temp Change Field obj field name new value old value getattr obj field name setattr obj field name new value yield old value setattr obj field name old value
@contextlib contextmanagerdef Temp Change Field obj field name new value old value getattr obj field name setattr obj field name new value yield old value setattr obj field name old value
def get file systems filesystemid None keyid None key None profile None region None **kwargs result Noneclient get conn key key keyid keyid profile profile region region if filesystemid response client describe file systems File System Id filesystemid result response[' File Systems']else response client describe file systems result response[' File Systems']while ' Next Marker' in response response client describe file systems Marker response[' Next Marker'] result extend response[' File Systems'] return result
def find mapreduce yaml dir os path dirname file while dir for mr yaml name in MR YAML NAMES yaml path os path join dir mr yaml name if os path exists yaml path return yaml pathparent os path dirname dir if parent dir breakdir parentreturn None
def smoothstep edge 0 edge 1 x x np clip x - edge 0 / edge 1 - edge 0 0 0 1 0 return x * x * 3 - 2 * x
def get configuration root get Logger name levels [ '' logging get Level Name root level ]name levels extend name logging get Level Name logger level for name logger in root manager logger Dict items if hasattr logger 'level' config string ' ' join '%s %s' % x for x in name levels return dict config string config string log json S Logger manager log json
def get configuration root get Logger name levels [ '' logging get Level Name root level ]name levels extend name logging get Level Name logger level for name logger in root manager logger Dict items if hasattr logger 'level' config string ' ' join '%s %s' % x for x in name levels return dict config string config string log json S Logger manager log json
def ensure utf 8 s if isinstance s unicode return s encode 'utf 8 ' return s
def ensure utf 8 s if isinstance s unicode return s encode 'utf 8 ' return s
def ensure utf 8 s if isinstance s unicode return s encode 'utf 8 ' return s
def Test Build Archive tester user cookie user id device id tester Get Ids From Cookie user cookie request dict {'email' 'user 1 @emailscrubbed com'}actual dict tester Send Request 'build archive' user cookie request dict tester Compare Response Dicts 'build archive' user id request dict {} actual dict return actual dict
def build queries from f regex cap types cap pr encoding u'ascii' queries []for line in f matches regex match line if matches query reorder to list zip matches groups cap types cap pr queries append query return queries
def simplegeneric func registry {}def wrapper *args **kw ob args[ 0 ]try cls ob class except Attribute Error cls type ob try mro cls mro except Attribute Error try class cls cls object passmro cls mro [1 ]except Type Error mro object for t in mro if t in registry return registry[t] *args **kw else return func *args **kw try wrapper name func name except Type Error Attribute Error passdef register typ func None if func is None return lambda f register typ f registry[typ] funcreturn funcwrapper dict func dict wrapper doc func doc wrapper register registerreturn wrapper
def check device minor validate device device try int minor except Exception raise Command Execution Error ' Invalidminornumberpassedtopartition check' cmd 'parted-m-s{ 0 }check{ 1 }' format device minor out salt ['cmd run'] cmd splitlines return out
def Normal name mean std return rv name Normal Distribution mean std
@register uncanonicalize@gof local optimizer [T Max And Argmax] def local max and argmax node if isinstance node op T Max And Argmax axis node op get params node if len node outputs[ 1 ] clients 0 new CA Reduce scal maximum axis node inputs[ 0 ] return [new None]if len node outputs[ 0 ] clients 0 return [ None T argmax node inputs[ 0 ] axis ]
@register uncanonicalize@gof local optimizer [T Max And Argmax] def local max and argmax node if isinstance node op T Max And Argmax axis node op get params node if len node outputs[ 1 ] clients 0 new CA Reduce scal maximum axis node inputs[ 0 ] return [new None]if len node outputs[ 0 ] clients 0 return [ None T argmax node inputs[ 0 ] axis ]
def parse handle format if not isinstance format basestring raise Type Error ' Needastringforthefileformat lowercase ' if not format raise Value Error ' Formatrequired lowercasestring ' if format format lower raise Value Error " Formatstring'%s'shouldbelowercase" % format with as handle handle 'r U' as fp if format in Format To Iterator iterator generator Format To Iterator[format]i iterator generator fp else raise Value Error " Unknownformat'%s'" % format for r in i yield r
def test hexoct class foo object def hex self return selfdef oct self return selfclass bar def hex self return selfdef oct self return self Assert Error Type Error hex foo Assert Error Type Error oct foo Assert Error Type Error hex bar Assert Error Type Error oct bar
def get Headers document return domhelpers find Elements document lambda n m re compile 'h[ 23 ]$' match m n node Name
def get Headers document return domhelpers find Elements document lambda n m re compile 'h[ 23 ]$' match m n node Name
def DNS Service Register flags 0 interface Index kDNS Service Interface Index Any name None regtype NO DEFAULT domain None host None port NO DEFAULT txt Record '' call Back None NO DEFAULT check regtype NO DEFAULT check port port socket htons port if not txt Record txt Len txt Record 1 '\x 00 ' else txt Len txt Record string to length and void p txt Record @ DNS Service Register Replydef callback sd Ref flags error Code name regtype domain context if call Back is not None call Back sd Ref flags error Code name decode regtype decode domain decode global lock acquire try sd Ref DNS Service Register flags interface Index name regtype domain host port txt Len txt Record callback None finally global lock release sd Ref add callback callback return sd Ref
def list members without mfa profile 'github' ignore cache False key 'github {0 } non mfa users' format get config value profile 'org name' if key not in context or ignore cache client get client profile organization client get organization get config value profile 'org name' filter key 'filter'if hasattr github Team Team 'membership' filter key 'filter ' context [key] [m login lower for m in get members organization {filter key '2 fa disabled'} ]return context [key]
def export pipeline exported pipeline pipeline tree expr to tree exported pipeline pipeline text generate import code exported pipeline pipeline text + pipeline code wrapper generate pipeline code pipeline tree return pipeline text
def get access token from code code redirect uri app id app secret args {'code' code 'redirect uri' redirect uri 'client id' app id 'client secret' app secret}response urllib urlopen 'https //graph facebook com/oauth/access token' + '?' + urllib urlencode args read query str parse qs response if 'access token' in query str result {'access token' query str['access token'][ 0 ]}if 'expires' in query str result['expires'] query str['expires'][ 0 ]return resultelse response json loads response raise Graph API Error response
def remove mod persist False pre mods lsmod salt ['cmd run all'] 'kldunload{ 0 }' format mod python shell False post mods lsmod mods rm mods pre mods post mods persist mods set if persist persist mods remove persistent module mod return sorted list mods persist mods
def nands print ' Hello World'
def nands print ' Hello World'
def libvlc media player get title count p mi f Cfunctions get 'libvlc media player get title count' None or Cfunction 'libvlc media player get title count' 1 None ctypes c int Media Player return f p mi
def test unsafe url eq ' Allyour{"<ahref "http //xx yy com/grover png"rel "nofollow">xx yy com/grover png</a>"}baseare' linkify ' Allyour{"xx yy com/grover png"}baseare'
def test unsafe url eq ' Allyour{"<ahref "http //xx yy com/grover png"rel "nofollow">xx yy com/grover png</a>"}baseare' linkify ' Allyour{"xx yy com/grover png"}baseare'
def incr mean variance axis X axis last mean last var last n raise error wrong axis axis if isinstance X sp csr matrix if axis 0 return incr mean var axis 0 X last mean last mean last var last var last n last n else return incr mean var axis 0 X T last mean last mean last var last var last n last n elif isinstance X sp csc matrix if axis 0 return incr mean var axis 0 X last mean last mean last var last var last n last n else return incr mean var axis 0 X T last mean last mean last var last var last n last n else raise typeerror X
def incr mean variance axis X axis last mean last var last n raise error wrong axis axis if isinstance X sp csr matrix if axis 0 return incr mean var axis 0 X last mean last mean last var last var last n last n else return incr mean var axis 0 X T last mean last mean last var last var last n last n elif isinstance X sp csc matrix if axis 0 return incr mean var axis 0 X last mean last mean last var last var last n last n else return incr mean var axis 0 X T last mean last mean last var last var last n last n else raise typeerror X
def get user data userid profile 'grafana' if isinstance profile string types profile salt ['config option'] profile response requests get '{ 0 }/api/users/{ 1 }' format profile['grafana url'] userid auth get auth profile headers get headers profile timeout profile get 'grafana timeout' 3 if response status code > 400 response raise for status return response json
def cleanup sff flowgrams header outhandle None outdir '/tmp' min length 150 max length 400 clean filename ''if not outhandle fd clean filename mkstemp dir outdir prefix 'cleanup sff' suffix ' sff txt' close fd outhandle open clean filename 'w' l filter sff file flowgrams header [ lambda f within length f min length max length lambda f f has Proper Key ] outhandle return clean filename l
def setup platform hass config add devices discovery info None lights []for address device config in config[CONF DEVICES] items device {}device['name'] device config[CONF NAME]device['key'] device config[CONF API KEY]device['address'] addresslight Decora Light device if light is valid lights append light add devices lights
def test print op b tensor fmatrix f theano function [b] theano printing Print b * 2 mode mode with gpu topo f maker fgraph toposort assert isinstance topo[ 0 ] op Gpu From Host assert isinstance topo[ 1 ] op theano printing Print assert isinstance topo[ 2 ] op Gpu Elemwise assert topo[ 3 ] op host from gpu f numpy random random 5 5 astype 'float 32 '
def test print op b tensor fmatrix f theano function [b] theano printing Print b * 2 mode mode with gpu topo f maker fgraph toposort assert isinstance topo[ 0 ] op Gpu From Host assert isinstance topo[ 1 ] op theano printing Print assert isinstance topo[ 2 ] op Gpu Elemwise assert topo[ 3 ] op host from gpu f numpy random random 5 5 astype 'float 32 '
def test print op b tensor fmatrix f theano function [b] theano printing Print b * 2 mode mode with gpu topo f maker fgraph toposort assert isinstance topo[ 0 ] op Gpu From Host assert isinstance topo[ 1 ] op theano printing Print assert isinstance topo[ 2 ] op Gpu Elemwise assert topo[ 3 ] op host from gpu f numpy random random 5 5 astype 'float 32 '
def loaded vispy modules import module depth None all modules False vispy dir os path dirname os path dirname vispy file code "importsys %s print ' ' join sys modules " % import module res run subprocess [sys executable '-c' code] cwd vispy dir [0 ]loaded modules [name strip for name in res split ' ' ]if all modules return loaded modulesvispy modules set for m in loaded modules if m startswith 'vispy' and ' future ' not in m if depth parts m split ' ' m ' ' join parts[ depth] vispy modules add m return vispy modules
def loaded vispy modules import module depth None all modules False vispy dir os path dirname os path dirname vispy file code "importsys %s print ' ' join sys modules " % import module res run subprocess [sys executable '-c' code] cwd vispy dir [0 ]loaded modules [name strip for name in res split ' ' ]if all modules return loaded modulesvispy modules set for m in loaded modules if m startswith 'vispy' and ' future ' not in m if depth parts m split ' ' m ' ' join parts[ depth] vispy modules add m return vispy modules
def loaded vispy modules import module depth None all modules False vispy dir os path dirname os path dirname vispy file code "importsys %s print ' ' join sys modules " % import module res run subprocess [sys executable '-c' code] cwd vispy dir [0 ]loaded modules [name strip for name in res split ' ' ]if all modules return loaded modulesvispy modules set for m in loaded modules if m startswith 'vispy' and ' future ' not in m if depth parts m split ' ' m ' ' join parts[ depth] vispy modules add m return vispy modules
def default content type rewriter state if not ' Content- Type' in state headers state headers[' Content- Type'] 'text/html'
def pool health monitor create request **kwargs body {'health monitor' {'type' kwargs['type'] 'delay' kwargs['delay'] 'timeout' kwargs['timeout'] 'max retries' kwargs['max retries'] 'http method' kwargs['http method'] 'url path' kwargs['url path'] 'expected codes' kwargs['expected codes'] 'admin state up' kwargs['admin state up']}}mon quantumclient request create health monitor body get 'health monitor' body {'health monitor' {'id' mon['id']}}quantumclient request associate health monitor kwargs['pool id'] body return Pool Monitor mon
def verify text None user None filename None gnupghome None gpg create gpg user if text verified gpg verify text elif filename with salt utils flopen filename 'rb' as fp verified gpg verify file fp else raise Salt Invocation Error 'filenameortextmustbepassed ' ret {}if verified trust level is not None ret['res'] Trueret['username'] verified usernameret['key id'] verified key idret['trust level'] VERIFY TRUST LEVELS[str verified trust level ]ret['message'] ' Thesignatureisverified 'else ret['res'] Falseret['message'] ' Thesignaturecouldnotbeverified 'return ret
def const ext x n axis -1 if n < 1 return xleft end axis slice x start 0 stop 1 axis axis ones shape [1 ] * x ndim ones shape[axis] nones np ones ones shape dtype x dtype left ext ones * left end right end axis slice x start -1 axis axis right ext ones * right end ext np concatenate left ext x right ext axis axis return ext
def const ext x n axis -1 if n < 1 return xleft end axis slice x start 0 stop 1 axis axis ones shape [1 ] * x ndim ones shape[axis] nones np ones ones shape dtype x dtype left ext ones * left end right end axis slice x start -1 axis axis right ext ones * right end ext np concatenate left ext x right ext axis axis return ext
def test assumptions m n symbols 'mn' integer True positive True diof diophantine n ** 2 + m * n - 500 assert diof set [ 5 20 40 10 95 5 121 4 248 2 499 1 ] a b symbols 'ab' integer True positive False diof diophantine a * b + 2 * a + 3 * b - 6 assert diof set [ -15 -3 -9 -4 -7 -5 -6 -6 -5 -8 -4 -14 ]
def test assumptions m n symbols 'mn' integer True positive True diof diophantine n ** 2 + m * n - 500 assert diof set [ 5 20 40 10 95 5 121 4 248 2 499 1 ] a b symbols 'ab' integer True positive False diof diophantine a * b + 2 * a + 3 * b - 6 assert diof set [ -15 -3 -9 -4 -7 -5 -6 -6 -5 -8 -4 -14 ]
def copy self Copy Source Bucket Key Extra Args None Callback None Source Client None Config None subscribers Noneif Callback is not None subscribers [ Progress Callback Invoker Callback ]config Configif config is None config Transfer Config with create transfer manager self config as manager future manager copy copy source Copy Source bucket Bucket key Key extra args Extra Args subscribers subscribers source client Source Client return future result
def blockdevicevolume from dataset id dataset id size attached to None return Block Device Volume size size attached to attached to dataset id dataset id blockdevice id u'block-{ 0 }' format dataset id
def get maintenance if not database return Nonemaintenance state database maintenance find one {'maintenance' True} if maintenance state return {'start' maintenance state get 'start' 'end' maintenance state get 'end' }else return None
def conv x y mode 2 warnings warn " Usenumpy convolve x y mode 'full' " Deprecation Warning return np convolve x y mode
def gatling registry xml parent data gatling XML Sub Element xml parent 'io gatling jenkins Gatling Publisher' XML Sub Element gatling 'enabled' text 'true'
def gatling registry xml parent data gatling XML Sub Element xml parent 'io gatling jenkins Gatling Publisher' XML Sub Element gatling 'enabled' text 'true'
def SO Pform variables minterms dontcares None variables [sympify v for v in variables]if minterms [] return falseminterms [list i for i in minterms]dontcares [list i for i in dontcares or [] ]for d in dontcares if d in minterms raise Value Error '%sinmintermsisalsoindontcares' % d old Nonenew minterms + dontcares while new old old newnew simplified pairs old essential rem redundancy new minterms return Or *[ convert to vars SOP x variables for x in essential]
def SO Pform variables minterms dontcares None variables [sympify v for v in variables]if minterms [] return falseminterms [list i for i in minterms]dontcares [list i for i in dontcares or [] ]for d in dontcares if d in minterms raise Value Error '%sinmintermsisalsoindontcares' % d old Nonenew minterms + dontcares while new old old newnew simplified pairs old essential rem redundancy new minterms return Or *[ convert to vars SOP x variables for x in essential]
def SO Pform variables minterms dontcares None variables [sympify v for v in variables]if minterms [] return falseminterms [list i for i in minterms]dontcares [list i for i in dontcares or [] ]for d in dontcares if d in minterms raise Value Error '%sinmintermsisalsoindontcares' % d old Nonenew minterms + dontcares while new old old newnew simplified pairs old essential rem redundancy new minterms return Or *[ convert to vars SOP x variables for x in essential]
def SO Pform variables minterms dontcares None variables [sympify v for v in variables]if minterms [] return falseminterms [list i for i in minterms]dontcares [list i for i in dontcares or [] ]for d in dontcares if d in minterms raise Value Error '%sinmintermsisalsoindontcares' % d old Nonenew minterms + dontcares while new old old newnew simplified pairs old essential rem redundancy new minterms return Or *[ convert to vars SOP x variables for x in essential]
def stack partitions dfs divisions join 'outer' meta methods concat [df meta for df in dfs] join join empty strip unknown categories meta name 'concat-{ 0 }' format tokenize *dfs dsk {}i 0for df in dfs dsk update df dask try df meta meta match Trueexcept Value Error Type Error match Falsefor key in df keys if match dsk[ name i ] keyelse dsk[ name i ] methods concat [empty key] 0 join i + 1return new dd object dsk name meta divisions
def stack partitions dfs divisions join 'outer' meta methods concat [df meta for df in dfs] join join empty strip unknown categories meta name 'concat-{ 0 }' format tokenize *dfs dsk {}i 0for df in dfs dsk update df dask try df meta meta match Trueexcept Value Error Type Error match Falsefor key in df keys if match dsk[ name i ] keyelse dsk[ name i ] methods concat [empty key] 0 join i + 1return new dd object dsk name meta divisions
def stack partitions dfs divisions join 'outer' meta methods concat [df meta for df in dfs] join join empty strip unknown categories meta name 'concat-{ 0 }' format tokenize *dfs dsk {}i 0for df in dfs dsk update df dask try df meta meta match Trueexcept Value Error Type Error match Falsefor key in df keys if match dsk[ name i ] keyelse dsk[ name i ] methods concat [empty key] 0 join i + 1return new dd object dsk name meta divisions
def mkfs os type fs label target run as root True specified fs None mkfs command MKFS COMMAND get os type DEFAULT MKFS COMMAND or '' % {'fs label' fs label 'target' target} if mkfs command utils execute run as root run as root *mkfs command split else if not specified fs specified fs CONF default ephemeral formatif not specified fs specified fs DEFAULT FS BY OSTYPE get os type DEFAULT FILE SYSTEM utils mkfs specified fs target fs label run as root run as root
def mkfs os type fs label target run as root True specified fs None mkfs command MKFS COMMAND get os type DEFAULT MKFS COMMAND or '' % {'fs label' fs label 'target' target} if mkfs command utils execute run as root run as root *mkfs command split else if not specified fs specified fs CONF default ephemeral formatif not specified fs specified fs DEFAULT FS BY OSTYPE get os type DEFAULT FILE SYSTEM utils mkfs specified fs target fs label run as root run as root
def greedy Policy Ts R discount Factor V dim len V num A len Ts Vnext V * discount Factor + R policy zeros dim num A for si in range dim actions all argmax [dot T[si ] Vnext for T in Ts] for a in actions policy[ si a ] 1 0 / len actions return policy collapsed Transitions Ts policy
def get old unhelpful old formatted {}cursor connection cursor cursor execute 'SELEC Tdoc id yes no\n FROM\n SELEC Twiki revision document idasdoc id \n SUM limitedvotes helpful asyes \n SUM NOT limitedvotes helpful asno\n FROM\n SELECT*FRO Mwiki helpfulvote\n WHER Ecreated< DATE SUB CURDATE INTERVAL 1 WEEK \n AN Dcreated> DATE SUB DATE SUB CURDATE \n INTERVAL 1 WEEK INTERVAL 1 WEEK \n aslimitedvotes\n INNERJOI Nwiki revision ON\nlimitedvotes revision id wiki revision id\n INNERJOI Nwiki document ON\nwiki document id wiki revision document id\n WHER Ewiki document locale "en-US"\n GROUPB Ydoc id\n HAVIN Gno>yes\n ascalculated' old data cursor fetchall for data in old data doc id data[ 0 ]yes float data[ 1 ] no float data[ 2 ] total yes + no if total 0 continueold formatted[doc id] {'total' total 'percentage' yes / total }return old formatted
def to subscription key uid event return u'{} {}' format uid event
def doctest depends on exe None modules None disable viewers None pyglet Falseif modules is not None and 'pyglet' in modules pyglet Truedef depends on deco fn fn doctest depends on dict exe exe modules modules disable viewers disable viewers pyglet pyglet if inspect isclass fn fn doctest depdends on no attrs in subclass fn fn doctest depends on return fnreturn depends on deco
def doctest depends on exe None modules None disable viewers None pyglet Falseif modules is not None and 'pyglet' in modules pyglet Truedef depends on deco fn fn doctest depends on dict exe exe modules modules disable viewers disable viewers pyglet pyglet if inspect isclass fn fn doctest depdends on no attrs in subclass fn fn doctest depends on return fnreturn depends on deco
def doctest depends on exe None modules None disable viewers None pyglet Falseif modules is not None and 'pyglet' in modules pyglet Truedef depends on deco fn fn doctest depends on dict exe exe modules modules disable viewers disable viewers pyglet pyglet if inspect isclass fn fn doctest depdends on no attrs in subclass fn fn doctest depends on return fnreturn depends on deco
def doctest depends on exe None modules None disable viewers None pyglet Falseif modules is not None and 'pyglet' in modules pyglet Truedef depends on deco fn fn doctest depends on dict exe exe modules modules disable viewers disable viewers pyglet pyglet if inspect isclass fn fn doctest depdends on no attrs in subclass fn fn doctest depends on return fnreturn depends on deco
def doctest depends on exe None modules None disable viewers None pyglet Falseif modules is not None and 'pyglet' in modules pyglet Truedef depends on deco fn fn doctest depends on dict exe exe modules modules disable viewers disable viewers pyglet pyglet if inspect isclass fn fn doctest depdends on no attrs in subclass fn fn doctest depends on return fnreturn depends on deco
def get thumbnailer obj relative name None if hasattr obj 'easy thumbnails thumbnailer' return obj easy thumbnails thumbnailerif isinstance obj Thumbnailer return objelif isinstance obj Field File if not relative name relative name obj namereturn Thumbnailer Field File obj instance obj field relative name source storage Noneif isinstance obj six string types relative name objobj Noneif not relative name raise Value Error ' Ifobjectisnota Field Fileor Thumbnailerinstance therelativenamemustbeprovided' if isinstance obj File obj obj fileif isinstance obj Storage or obj default storage source storage objobj Nonereturn Thumbnailer file obj name relative name source storage source storage remote source obj is not None
def add model for resource resource model RESOURCE TO MODEL MAP[resource] model
def connect on app finalize callback on app finalizers add callback return callback
@mock ec 2 def test igw detach unattached conn boto connect vpc u'the key' u'the secret' igw conn create internet gateway vpc conn create vpc VPC CIDR with assert raises EC 2 Response Error as cm conn detach internet gateway igw id vpc id cm exception code should equal u' Gateway Not Attached' cm exception status should equal 400 cm exception request id should not be none
def to padded yaml data level 0 indent 2 **kw if data in [ None ''] return ''try transformed yaml dump data indent indent allow unicode True default flow style False Dumper Ansible Dumper **kw padded '\n' join [ '' * level * indent + line for line in transformed splitlines ] return to text '\n{ 0 }' format padded except Exception as my e raise errors Ansible Filter Error ' Failedtoconvert %s' % my e
def read text file filename if PYTHON 3 return open filename 'r' encoding 'utf- 8 ' read else return open filename 'r' read
def do mb delete path return mb request path 'DELETE' AUTH YES True
def path getrootdir path drive os path splitdrive path if drive return drive + os path sep return os path sep
def import submodules context root module path for loader module name is pkg in pkgutil walk packages path root module + ' ' module import module name globals locals [' name '] for k v in six iteritems vars module if not k startswith ' ' context[k] vcontext[module name] module
def get accessible discussion xblocks course user include all False all xblocks modulestore get items course id qualifiers {'category' 'discussion'} include orphans False return [xblock for xblock in all xblocks if has required keys xblock and include all or has access user 'load' xblock course id ]
def convert To Pix vertices pos units win unit 2 pix Func unit 2 Pix Mappings get units if unit 2 pix Func return unit 2 pix Func vertices pos win else msg ' Theunittype[{ 0 }]isnotregisteredwith Psycho Py'raise Value Error msg format units
def get options ret None defaults {'priority' '0 '}attrs {'pushover profile' 'profile' 'user' 'user' 'device' 'device' 'token' 'token' 'priority' 'priority' 'title' 'title' 'api version' 'api version' 'expire' 'expire' 'retry' 'retry' 'sound' 'sound'}profile attr 'pushover profile'profile attrs {'user' 'user' 'device' 'device' 'token' 'token' 'priority' 'priority' 'title' 'title' 'api version' 'api version' 'expire' 'expire' 'retry' 'retry' 'sound' 'sound'} options salt returners get returner options virtualname ret attrs profile attr profile attr profile attrs profile attrs salt salt opts opts defaults defaults return options
def create Key Pair type bits pkey crypto P Key pkey generate key type bits return pkey
def get Decoders decoder paths import base os path commonprefix decoder paths split os path sep [ -1 ]decoders {}for path in decoder paths import path path split os path sep [len import base ]for f in glob iglob '%s/* py' % path name os path splitext os path basename f [0 ]if name ' init ' decoders[name] ' ' join import path + [name] return decoders
def should send email self try return self get profile should send emailexcept Profile Does Not Exist return True
def should send email self try return self get profile should send emailexcept Profile Does Not Exist return True
def set random state estimator random state 0 if isinstance estimator DBSCAN returnif 'random state' in estimator get params estimator set params random state random state
def load source name pathname if six PY 2 import impreturn imp load source name pathname else loader importlib machinery Source File Loader name pathname return loader load module name
def make Service options service App Service service port int options['port'] return service
def make Service options service App Service service port int options['port'] return service
def find Object name names name split ' ' top Level Package Nonemodule Names names[ ]while not top Level Package trialname ' ' join module Names if len trialname 0 return False None try top Level Package import trialname except Import Error exc info sys exc info if len traceback extract tb exc info[ 2 ] > 1 try del sys modules[trialname]except Key Error passraise exc info[ 0 ] exc info[ 1 ] exc info[ 2 ]module Names pop obj top Level Packagefor n in names[ 1 ] try obj getattr obj n except Attribute Error return False obj return True obj
def download all recommended False restart True to download get available recommended restart for name in to download download name return list downloads
@ Panel registerdef rate limit panel task name rate limit **kwargs try timeutils rate rate limit except Value Error as exc return {'error' ' Invalidratelimitstring %s' % exc }try tasks[task name] rate limit rate limitexcept Key Error panel logger error ' Ratelimitattemptforunknowntask%s' task name exc info sys exc info return {'error' 'unknowntask'}if not hasattr panel consumer ready queue 'refresh' panel logger error ' Ratelimitattempt butratelimitsdisabled ' return {'error' 'ratelimitsdisabled'}panel consumer ready queue refresh if not rate limit panel logger info ' Disabledratelimitsfortasksoftype%s' task name return {'ok' 'ratelimitdisabledsuccessfully'}panel logger info ' Newratelimitfortasksoftype%s %s ' task name rate limit return {'ok' 'newratelimitsetsuccessfully'}
def base 64 b64 decode instr if six PY 3 b salt utils to bytes instr data base 64 b64 decode b try return salt utils to str data except Unicode Decode Error return datareturn base 64 b64 decode instr
def delete serving url blob key rpc None rpc delete serving url async blob key rpc rpc get result
def delete serving url blob key rpc None rpc delete serving url async blob key rpc rpc get result
def get create or change title request instance name field None if not instance pk return u' New%s' % instance meta verbose name if name field name getattr instance name field None else name u'%s' % instance if name return force text name return u' Unnamed%s' % instance meta verbose name
def logistic loss and grad w X y alpha sample weight None n samples n features X shapegrad np empty like w w c yz intercept dot w X y if sample weight is None sample weight np ones n samples out - np sum sample weight * log logistic yz + 0 5 * alpha * np dot w w z expit yz z0 sample weight * z - 1 * y grad[ n features] safe sparse dot X T z0 + alpha * w if grad shape[ 0 ] > n features grad[ -1 ] z0 sum return out grad
def resize error src instance user mkt log mkt LOG VIDEO ERROR instance user user instance delete
def get glove info glove file name with smart open glove file name as f num lines sum 1 for line in f with smart open glove file name as f num dims len f readline split - 1 return num lines num dims
def get glove info glove file name with smart open glove file name as f num lines sum 1 for line in f with smart open glove file name as f num dims len f readline split - 1 return num lines num dims
def serialize num val if isinstance val bool return str int val return str val
def serialize num val if isinstance val bool return str int val return str val
def serialize num val if isinstance val bool return str int val return str val
def show address kwargs None call None if call 'function' raise Salt Cloud System Exit ' Theshow snapshotfunctionmustbecalledwith-for--function ' if not kwargs or 'name' not in kwargs log error ' Mustspecifyname ' return Falseif not kwargs or 'region' not in kwargs log error ' Mustspecifyregion ' return Falseconn get conn return expand address conn ex get address kwargs['name'] kwargs['region']
@event u'manager db cleanup' def db cleanup manager session existing tasks list manager tasks + [ None] session query Simple Key Value filter ~ Simple Key Value task in existing tasks delete synchronize session False
def setup settings current deployment settingstasks s3 tasks
def read worksheet xml source parent preset title string table style table workbook name None sheet codename None if workbook name and sheet codename ws Iterable Worksheet parent preset title workbook name sheet codename xml source else ws Worksheet parent preset title fast parse ws xml source string table style table return ws
def get field java object field name command proto FIELD COMMAND NAME + proto FIELD GET SUBCOMMAND NAME + java object target id + u'\n' + field name + u'\n' + proto END COMMAND PART answer java object gateway client send command command if answer proto NO MEMBER COMMAND or is error answer [0 ] raise Py 4 J Error u'nofield{ 0 }inobject{ 1 }' format field name java object target id else return get return value answer java object gateway client java object target id field name
def kneighbors graph X n neighbors mode 'connectivity' metric 'minkowski' p 2 metric params None include self False n jobs 1 if not isinstance X K Neighbors Mixin X Nearest Neighbors n neighbors metric metric p p metric params metric params n jobs n jobs fit X else check params X metric p metric params query query include self X include self return X kneighbors graph X query n neighbors n neighbors mode mode
def notify list member added e target e['target']if target['screen name'] c['original name'] returnsource e['source']target object [e['target object']]created at e['created at']source user cycle color source['name'] + color func c['NOTIFICATION']['source nick'] '@' + source['screen name'] notify color func c['NOTIFICATION']['notify'] 'addedyoutoalist' date parser parse created at clock fallback humanize date clock color func c['NOTIFICATION']['clock'] clock meta c['NOTIFY FORMAT']meta source user join meta split '#source user' meta notify join meta split '#notify' meta clock join meta split '#clock' meta emojize meta print Nicely '' print Nicely meta print list target object noti True
def validate ui config obj type ui config reference dict UI CONFIG SPECS[obj type]assert set ui config keys < set reference dict keys for key value in ui config iteritems schema utils normalize against schema value reference dict[key]
def new versions quay conda sconda set conda squay set quay if quay else set return sconda - squay
@pytest mark modelsdef test unit end gazetteer EN matcher Matcher EN vocab {u' Member Names' u'PERSON' {} [[{LOWER u'cal'}] [{LOWER u'cal'} {LOWER u'henderson'}]] } doc EN u'whoiscalthemanagerof?' if len list doc ents 0 ents matcher doc assert len ents 1 doc ents + tuple ents EN entity doc assert list doc ents [0 ] text u'cal'
def get sys cmd ''if salt utils which 'localectl' cmd 'localectl grep Keymap sed-e"s/ / /"-e"s/^[ DCTB ]*//"'elif ' Red Hat' in grains ['os family'] cmd 'grep LAYOUT/etc/sysconfig/keyboard grep-v E"^#"'elif ' Debian' in grains ['os family'] cmd 'grep XKBLAYOUT/etc/default/keyboard grep-v E"^#"'elif ' Gentoo' in grains ['os family'] cmd 'grep"^keymap"/etc/conf d/keymaps grep-v E"^#"'out salt ['cmd run'] cmd python shell True split ' ' ret out[ 1 ] replace '"' '' return ret
def get ninja project file path extension ' nja'return get ninja file path extension only first True
def get Time return monotonic Clock get Time
def Shorten Parameter Names params out {}for name value in params iteritems short name LONG NAMES get name name if short name in out raise Key Error ' Bothlongandshortversionofparameter%s %s found Itisunclearwhichonetouse ' % name short name out[short name] valuereturn out
def Shorten Parameter Names params out {}for name value in params iteritems short name LONG NAMES get name name if short name in out raise Key Error ' Bothlongandshortversionofparameter%s %s found Itisunclearwhichonetouse ' % name short name out[short name] valuereturn out
def mon create **kwargs return ceph cfg mon create **kwargs
def human Bit Size size divisor 1000 if size < divisor return ngettext '%ubit' '%ubits' size % size units [u' Kbit' u' Mbit' u' Gbit' u' Tbit']size float size for unit in units size size / divisor if size < divisor return '% 1f%s' % size unit return u'%u%s' % size unit
def get Minimum By Path Complex path minimum complex 999999999 0 999999999 0 for point in path minimum get Minimum minimum point return minimum
def ra pid for dev pid file ra file dev 'pid' if os path exists pid file with open pid file 'r' as f return int f read
def cut threshold labels rag thresh in place True if not in place rag rag copy to remove [ x y for x y d in rag edges iter data True if d['weight'] > thresh ]rag remove edges from to remove comps nx connected components rag map array np arange labels max + 1 dtype labels dtype for i nodes in enumerate comps for node in nodes for label in rag node[node]['labels'] map array[label] ireturn map array[labels]
def Save root None formats None **options clf options pop 'clf' True Config **options if formats is None formats ['pdf' 'eps']try formats remove 'plotly' Plotly clf False except Value Error passif root for fmt in formats Save Format root fmt if clf Clf
def indexable *iterables result []for X in iterables if sp issparse X result append X tocsr elif hasattr X ' getitem ' or hasattr X 'iloc' result append X elif X is None result append X else result append np array X check consistent length *result return result
def get adapter name and ip address network adapters mac address adapter name Noneip address Nonefor network adapter in network adapters if network adapter['mac-address'] mac address lower adapter name network adapter['name']ip address network adapter['ip-address']breakreturn adapter name ip address
def leaks url 'http //localhost 8080 /manager' timeout 180 return wget 'findleaks' {'status Line' 'true'} url timeout timeout ['msg']
def rev parse committish repo dir None head read ref committish repo dir repo dir if head debug 2 'resolvedfromref commit %s\n' % head encode 'hex' return headp L Pack Idx List repo 'objects/pack' repo dir repo dir if len committish 40 try hash committish decode 'hex' except Type Error return Noneif pL exists hash return hashreturn None
def pull resource type resource id **kwargs callback get manager get callback resource type obj callback resource type resource id **kwargs if obj if not isinstance obj base Neutron Object or resource type obj obj name raise exceptions Callback Wrong Resource Type resource type resource type return obj
def pull resource type resource id **kwargs callback get manager get callback resource type obj callback resource type resource id **kwargs if obj if not isinstance obj base Neutron Object or resource type obj obj name raise exceptions Callback Wrong Resource Type resource type resource type return obj
def pull resource type resource id **kwargs callback get manager get callback resource type obj callback resource type resource id **kwargs if obj if not isinstance obj base Neutron Object or resource type obj obj name raise exceptions Callback Wrong Resource Type resource type resource type return obj
def libvlc log get object ctx id f Cfunctions get 'libvlc log get object' None or Cfunction 'libvlc log get object' 1 2 2 1 None None Log ptr List POINTER ctypes c char p List POINTER ctypes c char p ctypes POINTER ctypes c uint return f ctx id
def update url url debug if not url return urloriginal url urlurl url replace ' //raw github com/' ' //raw githubusercontent com/' url url replace ' //nodeload github com/' ' //codeload github com/' url re sub '^ https //codeload github com/[^/]+/[^/]+/ zipball / * $' '\\ 1 zip\\ 2 ' url if url 'https //sublime wbond net/repositories json' or url 'https //sublime wbond net/channel json' url 'https //packagecontrol io/channel v3 json'if debug and url original url console write u'\n Fixed UR Lfrom%sto%s\n' original url url return url
def get doc version version parsed version parse version version if is release version and parsed version documentation revision is not None return parsed version releaseelse return version
def touch path times None if os path isdir path os utime path times else with open path 'ab' os utime path times
def ward y return linkage y method 'ward' metric 'euclidean'
def ward y return linkage y method 'ward' metric 'euclidean'
def ward y return linkage y method 'ward' metric 'euclidean'
def read null list start end addr space return null list read addr range start end addr space end - start
@register filterdef comment filter comment text filter func settings COMMENT FILTE Rif not filter func def filter func s return linebreaksbr urlize s autoescape True autoescape True elif not callable filter func filter func import dotted path filter func return filter func comment text
@register filterdef comment filter comment text filter func settings COMMENT FILTE Rif not filter func def filter func s return linebreaksbr urlize s autoescape True autoescape True elif not callable filter func filter func import dotted path filter func return filter func comment text
def get or bust data dict keys if isinstance keys basestring keys [keys]import ckan logic schema as schemaschema schema create schema for required keys keys data dict errors validate data dict schema if errors raise Validation Error errors values [data dict[key] for key in keys]if len values 1 return values[ 0 ]return tuple values
def colorscale to colors colorscale color list []for item in colorscale color list append item[ 1 ] return color list
def add prerequisite course course key prerequisite course key if not is prerequisite courses enabled return Nonemilestone name ' Course{course id}requires{prerequisite course id}' format course id unicode course key prerequisite course id unicode prerequisite course key milestone milestones api add milestone {'name' milestone name 'namespace' unicode prerequisite course key 'description' ' Systemdefinedmilestone' } milestones api add course milestone course key 'requires' milestone milestones api add course milestone prerequisite course key 'fulfills' milestone
def snapshot absent name force False recursive False return absent name 'snapshot' force recursive
def force text s encoding 'utf- 8 ' if isinstance s Text return selif isinstance s binary type return s decode encoding else raise Type Error 'force textexpectsastringtype'
def diop ternary quadratic normal eq var coeff diop type classify diop eq dict False if diop type 'homogeneous ternary quadratic normal' return diop ternary quadratic normal var coeff
def get context namespace name resource type name namespace id resource type id session try query session query models Metadef Namespace Resource Type filter by namespace id namespace id resource type id resource type id db rec query one except sa orm exc No Result Found LOG debug ' Themetadatadefinitionresource-typeassociationofresource type % resource type name stonamespace name % namespace name swasnotfound ' {'resource type name' resource type name 'namespace name' namespace name} raise exc Metadef Resource Type Association Not Found resource type name resource type name namespace name namespace name return db rec
def get hosts and tests host info {}q dbmodels Q test name startswith 'kernbench' dbmodels Q test name startswith 'dbench' dbmodels Q test name startswith 'tbench' dbmodels Q test name startswith 'unixbench' dbmodels Q test name startswith 'iozone' test query models Test View objects filter q values 'test name' 'hostname' 'machine idx' distinct for result dict in test query hostname result dict['hostname']test result dict['test name']machine idx result dict['machine idx']host info setdefault hostname {} host info[hostname] setdefault 'tests' [] host info[hostname]['tests'] append test host info[hostname]['id'] machine idxreturn rpc utils prepare for serialization host info
def get hosts and tests host info {}q dbmodels Q test name startswith 'kernbench' dbmodels Q test name startswith 'dbench' dbmodels Q test name startswith 'tbench' dbmodels Q test name startswith 'unixbench' dbmodels Q test name startswith 'iozone' test query models Test View objects filter q values 'test name' 'hostname' 'machine idx' distinct for result dict in test query hostname result dict['hostname']test result dict['test name']machine idx result dict['machine idx']host info setdefault hostname {} host info[hostname] setdefault 'tests' [] host info[hostname]['tests'] append test host info[hostname]['id'] machine idxreturn rpc utils prepare for serialization host info
def get hosts and tests host info {}q dbmodels Q test name startswith 'kernbench' dbmodels Q test name startswith 'dbench' dbmodels Q test name startswith 'tbench' dbmodels Q test name startswith 'unixbench' dbmodels Q test name startswith 'iozone' test query models Test View objects filter q values 'test name' 'hostname' 'machine idx' distinct for result dict in test query hostname result dict['hostname']test result dict['test name']machine idx result dict['machine idx']host info setdefault hostname {} host info[hostname] setdefault 'tests' [] host info[hostname]['tests'] append test host info[hostname]['id'] machine idxreturn rpc utils prepare for serialization host info
def get hosts and tests host info {}q dbmodels Q test name startswith 'kernbench' dbmodels Q test name startswith 'dbench' dbmodels Q test name startswith 'tbench' dbmodels Q test name startswith 'unixbench' dbmodels Q test name startswith 'iozone' test query models Test View objects filter q values 'test name' 'hostname' 'machine idx' distinct for result dict in test query hostname result dict['hostname']test result dict['test name']machine idx result dict['machine idx']host info setdefault hostname {} host info[hostname] setdefault 'tests' [] host info[hostname]['tests'] append test host info[hostname]['id'] machine idxreturn rpc utils prepare for serialization host info
def make fastq multi in fasta quals out fp label transform split lib transform mkdir out fp seen libs defaultdict list for rec label in iter fastq in fasta quals label transform lib id seq id label rsplit ' ' 1 seen libs[lib id] append rec for lib recs in seen libs items if lib is None continueoutfile open out fp + '/' + lib + ' fastq' 'w' outfile write '\n' join recs outfile close
def normalize path filename return os path normcase os path realpath filename
def rotate Left x n return x << n x >> 32 - n
def transfer Coincidences network from Element Name to Element Name coincidence Handle get Locked Handle runtime Element network get Element from Element Name expression 'self cd W' network get Element to Element Name set Parameter 'coincidences Above' coincidence Handle
@np deprecate message 'splineisdeprecatedinscipy 0 19 0 use Bsplineclassinstead ' def spline xk yk xnew order 3 kind 'smoothest' conds None return spleval splmake xk yk order order kind kind conds conds xnew
@np deprecate message 'splineisdeprecatedinscipy 0 19 0 use Bsplineclassinstead ' def spline xk yk xnew order 3 kind 'smoothest' conds None return spleval splmake xk yk order order kind kind conds conds xnew
def pick seq func maxobj None maxscore Nonefor obj in seq score func obj if maxscore is None or maxscore < score maxscore maxobj score obj return maxobj
def absent name ret {'name' name 'changes' {} 'result' True 'comment' ''}index exists salt ['elasticsearch index exists'] index name if index exists if opts ['test'] ret['comment'] ' Index{ 0 }willberemoved' format name ret['result'] Noneelse ret['result'] salt ['elasticsearch index delete'] index name if ret['result'] ret['comment'] ' Removedindex{ 0 }successfully' format name else ret['comment'] ' Failedtoremoveindex{ 0 }' format name elif not index exists ret['comment'] ' Index{ 0 }isalreadyabsent' format name else ret['comment'] ' Failedtodeterminewhetherindex{ 0 }isabsent see Minionlogformoreinformation' format name ret['result'] Falsereturn ret
def inet ntoa address if len address 4 raise dns exception Syntax Errorreturn '%u %u %u %u' % ord address[ 0 ] ord address[ 1 ] ord address[ 2 ] ord address[ 3 ]
def find lexer for filename filename filename filename or '' root ext os path splitext filename if ext in custom extension lexer mapping lexer get lexer by name custom extension lexer mapping[ext] else try lexer get lexer for filename filename except Class Not Found return Text Lexer return lexer
def get descendant ids root id children Page objects filter parent root id values list u'pk' flat True for child id in children iterator yield child id for descendant id in get descendant ids child id yield descendant id
def get descendant ids root id children Page objects filter parent root id values list u'pk' flat True for child id in children iterator yield child id for descendant id in get descendant ids child id yield descendant id
def fmt Time Span time pad 0 point 0 short False after False unit 99 type point optimal Period time point unit time convert Seconds To time type if not point time int round time if short fmt short Time Fmt type elif after fmt after Time Table[type] plural Count time point else fmt time Table[type] plural Count time point timestr '% a d % b df' % {'a' pad 'b' point} return locale format string '%' + fmt % timestr time
@deprecated renamed argument 'clobber' 'overwrite' '1 3' def writeto filename data header None output verify 'exception' overwrite False checksum False hdu makehdu data header if hdu is image and not isinstance hdu Primary HDU hdu Primary HDU data header header hdu writeto filename overwrite overwrite output verify output verify checksum checksum
@deprecated renamed argument 'clobber' 'overwrite' '1 3' def writeto filename data header None output verify 'exception' overwrite False checksum False hdu makehdu data header if hdu is image and not isinstance hdu Primary HDU hdu Primary HDU data header header hdu writeto filename overwrite overwrite output verify output verify checksum checksum
def rm job user path mask cmd mask str mask upper for item in mask split ' ' if item not in MASK TYPES return ' Invalidmasktype {0 }' format item lst list tab user ret 'absent'rm Nonefor ind in range len lst['crons'] if rm is not None breakif path lst['crons'][ind]['path'] if cmd lst['crons'][ind]['cmd'] if mask lst['crons'][ind]['mask'] rm indif rm is not None lst['crons'] pop rm ret 'removed'comdat write incron lines user render tab lst if comdat['retcode'] return comdat['stderr']return ret
def launch core print status ' Launching Metasploitandattackingthesystemsspecified Thismaytakeamoment ' try child pexpect spawn '{ 0 }-r{ 1 }\r\n\r\n' format os path join core meta path + 'msfconsole' os path join core setdir + 'autopwn answer' child interact except Exception as error core log error
def launch core print status ' Launching Metasploitandattackingthesystemsspecified Thismaytakeamoment ' try child pexpect spawn '{ 0 }-r{ 1 }\r\n\r\n' format os path join core meta path + 'msfconsole' os path join core setdir + 'autopwn answer' child interact except Exception as error core log error
def anonymous name id import socket randomname '%s %s %s %s' % id socket gethostname os getpid random randint 0 sys maxsize name name replace ' ' ' ' name name replace '-' ' ' return name replace ' ' ' '
@pytest mark parametrize 'parallel' [ True False] def test many columns parallel read basic text '' join [str i for i in range 500 ] text + '\n' + text + '\n' + text table read basic text parallel parallel expected Table [[i i] for i in range 500 ] names [str i for i in range 500 ] assert table equal table expected
def get repository version pear output lines pear output split '\n' for line in lines if ' Latest' in line return line rsplit None 1 [ -1 ] strip return None
def get repository version pear output lines pear output split '\n' for line in lines if ' Latest' in line return line rsplit None 1 [ -1 ] strip return None
def create event return windll kernel 32 Create Event A pointer SECURITY ATTRIBUTES BOOL True BOOL False None
def test reader macro entry tokenize '#^ ' assert entry[ 0 ][ 0 ] Hy Symbol 'dispatch reader macro' assert entry[ 0 ][ 1 ] Hy String '^' assert len entry[ 0 ] 3
def logistic function value return 1 0 / 1 0 + math exp - value
def project versions request project slug project get object or 404 Project objects protected request user slug project slug versions Version objects public user request user project project only active False active versions versions filter active True inactive versions versions filter active False inactive filter Version Slug Filter request GET queryset inactive versions active filter Version Slug Filter request GET queryset active versions wiped request GET get 'wipe' '' wiped version versions filter slug wiped if wiped and wiped version count messages success request ' Versionwiped ' + wiped return render to response 'projects/project version list html' {'inactive filter' inactive filter 'active filter' active filter 'project' project} context instance Request Context request
def project versions request project slug project get object or 404 Project objects protected request user slug project slug versions Version objects public user request user project project only active False active versions versions filter active True inactive versions versions filter active False inactive filter Version Slug Filter request GET queryset inactive versions active filter Version Slug Filter request GET queryset active versions wiped request GET get 'wipe' '' wiped version versions filter slug wiped if wiped and wiped version count messages success request ' Versionwiped ' + wiped return render to response 'projects/project version list html' {'inactive filter' inactive filter 'active filter' active filter 'project' project} context instance Request Context request
def silent no wrap func modname return func modname
def add Prefix Dictionary dictionary keys value for key in keys dictionary[key lstrip ' ' ] value
def show help help text N u'\n Keyboard Shortcuts\n------------------\n J Down Move Down\n K Up Move Up\n Enter Edit Selected Files\n Spacebar Open File Using Default Application\n Ctrl+L Focus Text Entry Field\n? Show Help\n\n Theupanddownarrowschangefocusbetweenthetextentryfield\nandtheresults \n' title N u' Help- Find Files' return text text dialog help text title
def init opts log debug ' Openingconnectiontojunos' thisproxy['conn'] jnpr junos Device user opts['proxy']['username'] host opts['proxy']['host'] password opts['proxy']['passwd'] thisproxy['conn'] open thisproxy['conn'] bind cu jnpr junos utils config Config thisproxy['conn'] bind sw jnpr junos utils sw SW thisproxy['initialized'] True
def encode mirror url raw url or path remote domain None is scheme None is escape False if is escape raw url or path raw url or path replace 'r\\/' '/' else raw url or path raw url or pathsp urlsplit raw url or path if '/extdomains/' sp path[ 12 ] return raw url or pathdomain remote domain or sp netloc or parse remote domain or target domain if domain not in allowed domains set return raw url or pathif is scheme is not False if raw url or path[ 2] '//' our prefix '//' + my host name elif is scheme or sp scheme our prefix myurl prefixelse our prefix ''else our prefix ''if is external domain domain middle part '/extdomains/' + domain else middle part ''result urljoin our prefix + middle part + '/' extract url path and query raw url or path lstrip '/' if is escape result s esc result return result
def create dot graph graph show connectinfo False simple form True logger debug u'creatingdotgraph' pklgraph nx Di Graph for edge in graph edges data graph get edge data *edge srcname get print name edge[ 0 ] simple form simple form destname get print name edge[ 1 ] simple form simple form if show connectinfo pklgraph add edge srcname destname l str data[u'connect'] else pklgraph add edge srcname destname return pklgraph
def scheme node from element node el registry try widget desc registry widget node el get 'qualified name' except Key Error as ex raise Unknown Widget Definition *ex args title node el get 'title' pos node el get 'position' if pos is not None pos tuple eval pos return Scheme Node widget desc title title position pos
def get SSL Context keyfile os path join GAME DIR 'server' 'ssl key' certfile os path join GAME DIR 'server' 'ssl cert' verify SSL key and cert keyfile certfile return twisted ssl Default Open SSL Context Factory keyfile certfile
def read element date stream size if size 8 raise Size Error size nanoseconds unpack '>q' read stream 8 [0 ]return datetime 2001 1 1 0 0 0 0 None + timedelta microseconds nanoseconds // 1000
def pull dkr url name index return pull image 'dkr' url name index index
def pull dkr url name index return pull image 'dkr' url name index index
def gaussian loglik scorer est X y None precision est get precision n samples n features X shapelog like np zeros n samples log like -0 5 * X * np dot X precision sum axis 1 log like - 0 5 * n features * log 2 0 * np pi - logdet precision out np mean log like return out
def gaussian loglik scorer est X y None precision est get precision n samples n features X shapelog like np zeros n samples log like -0 5 * X * np dot X precision sum axis 1 log like - 0 5 * n features * log 2 0 * np pi - logdet precision out np mean log like return out
def get reg software ignore list [u' Address Book' u' Connection Manager' u' Direct Draw Ex' u' Fontcore' u'IE 40 ' u'IE 4 Data' u'IE 5 BAKEX' u'IE Data' u' Mobile Option Pack' u' Scheduling Agent' u'WIC' u' Not Found' u' valuenotset ' u'' None]reg software {}hive u'HKLM'key u' Software\\ Microsoft\\ Windows\\ Current Version\\ Uninstall'def update hive key reg key use 32 bit d name u''d vers u''d name salt [u'reg read value'] hive u'{ 0 }\\{ 1 }' format key reg key u' Display Name' use 32 bit [u'vdata']d vers salt [u'reg read value'] hive u'{ 0 }\\{ 1 }' format key reg key u' Display Version' use 32 bit [u'vdata']if d name not in ignore list reg software update {d name str d vers } for reg key in salt [u'reg list keys'] hive key update hive key reg key False for reg key in salt [u'reg list keys'] hive key True update hive key reg key True return reg software
def get reg software ignore list [u' Address Book' u' Connection Manager' u' Direct Draw Ex' u' Fontcore' u'IE 40 ' u'IE 4 Data' u'IE 5 BAKEX' u'IE Data' u' Mobile Option Pack' u' Scheduling Agent' u'WIC' u' Not Found' u' valuenotset ' u'' None]reg software {}hive u'HKLM'key u' Software\\ Microsoft\\ Windows\\ Current Version\\ Uninstall'def update hive key reg key use 32 bit d name u''d vers u''d name salt [u'reg read value'] hive u'{ 0 }\\{ 1 }' format key reg key u' Display Name' use 32 bit [u'vdata']d vers salt [u'reg read value'] hive u'{ 0 }\\{ 1 }' format key reg key u' Display Version' use 32 bit [u'vdata']if d name not in ignore list reg software update {d name str d vers } for reg key in salt [u'reg list keys'] hive key update hive key reg key False for reg key in salt [u'reg list keys'] hive key True update hive key reg key True return reg software
def get reg software ignore list [u' Address Book' u' Connection Manager' u' Direct Draw Ex' u' Fontcore' u'IE 40 ' u'IE 4 Data' u'IE 5 BAKEX' u'IE Data' u' Mobile Option Pack' u' Scheduling Agent' u'WIC' u' Not Found' u' valuenotset ' u'' None]reg software {}hive u'HKLM'key u' Software\\ Microsoft\\ Windows\\ Current Version\\ Uninstall'def update hive key reg key use 32 bit d name u''d vers u''d name salt [u'reg read value'] hive u'{ 0 }\\{ 1 }' format key reg key u' Display Name' use 32 bit [u'vdata']d vers salt [u'reg read value'] hive u'{ 0 }\\{ 1 }' format key reg key u' Display Version' use 32 bit [u'vdata']if d name not in ignore list reg software update {d name str d vers } for reg key in salt [u'reg list keys'] hive key update hive key reg key False for reg key in salt [u'reg list keys'] hive key True update hive key reg key True return reg software
def make loc files file creator size None if size body '*' * size else body ' Thisisatest 'filename 1 file creator create file os path join 'some directory' 'text 1 txt' body filename 2 file creator create file os path join 'some directory' 'another directory' 'text 2 txt' body filename 1 six text type filename 1 filename 2 six text type filename 2 return [filename 1 filename 2 os path dirname filename 2 os path dirname filename 1 ]
def pandas read text reader b header kwargs dtypes None columns None write header True enforce False bio Bytes IO if write header and not b startswith header rstrip bio write header bio write b bio seek 0 df reader bio **kwargs if dtypes coerce dtypes df dtypes if enforce and columns and list df columns list columns raise Value Error ' Columnsdonotmatch' df columns columns elif columns df columns columnsreturn df
def trg redirect uid res type res id new rid cr assert isinstance new rid long int return Workflow Service new cr uid res type res id redirect new rid
def rewrite config CONFIG[' Mob SF']['dir'] expanduser '~' + CONFIG[' Mob SF']['dir'] CONFIG[' Mob SF']['downloads'] CONFIG[' Mob SF']['dir'] + CONFIG[' Mob SF']['downloads'] CONFIG[' Mob SF']['tools'] CONFIG[' Mob SF']['dir'] + CONFIG[' Mob SF']['tools'] CONFIG[' Mob SF']['samples'] CONFIG[' Mob SF']['dir'] + CONFIG[' Mob SF']['samples'] CONFIG[' Mob SF']['key path'] CONFIG[' Mob SF']['dir'] + CONFIG[' Mob SF']['key path'] CONFIG[' Mob SF']['priv key'] CONFIG[' Mob SF']['key path'] + CONFIG[' Mob SF']['priv key'] CONFIG[' Mob SF']['pub key'] CONFIG[' Mob SF']['key path'] + CONFIG[' Mob SF']['pub key'] with open os path join CONFIG PATH CONFIG FILE 'w' as configfile CONFIG write configfile
def rewrite config CONFIG[' Mob SF']['dir'] expanduser '~' + CONFIG[' Mob SF']['dir'] CONFIG[' Mob SF']['downloads'] CONFIG[' Mob SF']['dir'] + CONFIG[' Mob SF']['downloads'] CONFIG[' Mob SF']['tools'] CONFIG[' Mob SF']['dir'] + CONFIG[' Mob SF']['tools'] CONFIG[' Mob SF']['samples'] CONFIG[' Mob SF']['dir'] + CONFIG[' Mob SF']['samples'] CONFIG[' Mob SF']['key path'] CONFIG[' Mob SF']['dir'] + CONFIG[' Mob SF']['key path'] CONFIG[' Mob SF']['priv key'] CONFIG[' Mob SF']['key path'] + CONFIG[' Mob SF']['priv key'] CONFIG[' Mob SF']['pub key'] CONFIG[' Mob SF']['key path'] + CONFIG[' Mob SF']['pub key'] with open os path join CONFIG PATH CONFIG FILE 'w' as configfile CONFIG write configfile
def check method estimator method if method 'transform' and not hasattr estimator 'transform' method 'predict'if not hasattr estimator method Value Error 'base estimatordoesnothave`%s`method ' % method return method
def save project project file path json dump project codecs open file path u'w' u'utf 8 ' indent 4
def dummy name token **kwargs global dummiesif not name token in dummies dummies[ name token ] Dummy name **kwargs return dummies[ name token ]
def dummy name token **kwargs global dummiesif not name token in dummies dummies[ name token ] Dummy name **kwargs return dummies[ name token ]
def sub keys d return dict [ k d[k] for k in keys]
def sub keys d return dict [ k d[k] for k in keys]
def Get Valid Main module if not hasattr module 'main' return Nonemain module mainif not hasattr main ' call ' return Nonedefaults main defaults if defaults default argcount len defaults else default argcount 0if main code co argcount - default argcount 0 return mainelse return None
def get file name blob key if not blob key raise files Invalid Argument Error ' Emptyblobkey' if not isinstance blob key blobstore Blob Key basestring raise files Invalid Argument Error ' Expectedstringorblobstore Blob Key' return '%s%s' % BLOBSTORE DIRECTORY blob key
def copy header subset from r to r condition for k v in from r headers items if condition k to r headers[k] v
def copy header subset from r to r condition for k v in from r headers items if condition k to r headers[k] v
def s3 debug message value None output 'S 3 Debug %s' % s3 unicode message if value output '%s %s' % output s3 unicode value try print >>sys stderr outputexcept print >>sys stderr ' Debugcrashed'
def s3 debug message value None output 'S 3 Debug %s' % s3 unicode message if value output '%s %s' % output s3 unicode value try print >>sys stderr outputexcept print >>sys stderr ' Debugcrashed'
@requires segment infodef capslock indicator pl segment info text u'CAPS' if not vim func exists u' Caps Lock Statusline' return Nonereturn text if vim eval u' Caps Lock Statusline ' else None
def get pending computer name current get computer name pending salt ['reg read value'] 'HKLM' 'SYSTEM\\ Current Control Set\\ Services\\ Tcpip\\ Parameters' 'NV Hostname' ['vdata']if pending return pending if pending current else None return False
def setup platform hass config add devices discovery info None host config get CONF HOST port config get CONF PORT name config get CONF NAME username config get CONF USERNAME password config get CONF PASSWORD monitored types config get CONF MONITORED VARIABLES url 'http //{} {}/jsonrpc' format host port try nzbgetapi NZB Get API api url url username username password password nzbgetapi update except requests exceptions Connection Error requests exceptions HTTP Error as conn err LOGGER error ' Errorsettingup NZB Get API %s' conn err return Falsedevices []for ng type in monitored types new sensor NZB Get Sensor api nzbgetapi sensor type SENSOR TYPES get ng type client name name devices append new sensor add devices devices
def kpsewhich filename try find cmd 'kpsewhich' proc subprocess Popen ['kpsewhich' filename] stdout subprocess PIPE stderr subprocess PIPE stdout stderr proc communicate return stdout strip decode 'utf 8 ' 'replace' except Find Cmd Error pass
def get subset from bitstring super set bitstring if len super set len bitstring raise Value Error ' Thesizesofthelistsarenotequal' return [super set[i] for i j in enumerate bitstring if bitstring[i] '1 ' ]
def mod aggregate low chunks running pkgs []agg enabled ['installed' 'latest' 'removed' 'purged']if low get 'fun' not in agg enabled return lowfor chunk in chunks tag salt utils gen state tag chunk if tag in running continueif chunk get 'state' 'pkg' if ' agg ' in chunk continueif chunk get 'fun' low get 'fun' continueif chunk get 'fromrepo' low get 'fromrepo' continueif 'pkgs' in chunk pkgs extend chunk['pkgs'] chunk[' agg '] Trueelif 'name' in chunk pkgs append chunk['name'] chunk[' agg '] Trueif pkgs if 'pkgs' in low low['pkgs'] extend pkgs else low['pkgs'] pkgsreturn low
def mod aggregate low chunks running pkgs []agg enabled ['installed' 'latest' 'removed' 'purged']if low get 'fun' not in agg enabled return lowfor chunk in chunks tag salt utils gen state tag chunk if tag in running continueif chunk get 'state' 'pkg' if ' agg ' in chunk continueif chunk get 'fun' low get 'fun' continueif chunk get 'fromrepo' low get 'fromrepo' continueif 'pkgs' in chunk pkgs extend chunk['pkgs'] chunk[' agg '] Trueelif 'name' in chunk pkgs append chunk['name'] chunk[' agg '] Trueif pkgs if 'pkgs' in low low['pkgs'] extend pkgs else low['pkgs'] pkgsreturn low
def find subsections section result []for child in section children if isinstance child nodes section result append child continueresult extend find subsections child return result
def get port status cluster lswitch id port id try r do single request HTTP GET '/ws v1 /lswitch/%s/lport/%s/status' % lswitch id port id cluster cluster r json loads r except Nvp Api Client Resource Not Found as e LOG error ' Portnotfound Error %s' str e raise exception Port Not Found port id port id net id lswitch id except Nvp Api Client Nvp Api Exception as e raise exception Quantum Exception if r['link status up'] is True return constants PORT STATUS ACTIV Eelse return constants PORT STATUS DOWN
def get cibpath cibpath os path join opts ['cachedir'] 'pcs' env log trace 'cibpath {0 }' format cibpath return cibpath
def get cibpath cibpath os path join opts ['cachedir'] 'pcs' env log trace 'cibpath {0 }' format cibpath return cibpath
def setup Syslog test Case log Messages []class fakesyslogobserver object def init self prefix log Messages append prefix def emit self event Dict log Messages append event Dict test Case patch syslog ' Syslog Observer' fakesyslogobserver return log Messages
def set palette palette n colors None desat None color codes False colors palettes color palette palette n colors desat if mpl ge 150 from cycler import cyclercyl cycler 'color' colors mpl rc Params['axes prop cycle'] cylelse mpl rc Params['axes color cycle'] list colors mpl rc Params['patch facecolor'] colors[ 0 ]if color codes palettes set color codes palette
def set palette palette n colors None desat None color codes False colors palettes color palette palette n colors desat if mpl ge 150 from cycler import cyclercyl cycler 'color' colors mpl rc Params['axes prop cycle'] cylelse mpl rc Params['axes color cycle'] list colors mpl rc Params['patch facecolor'] colors[ 0 ]if color codes palettes set color codes palette
def test lambda list keywords kwonly kwonly demo u' fn[&kwonlya[b 2 ]] printab 'if PY 3 code can compile kwonly demo for i kwonlyarg name in enumerate u'a' u'b' assert kwonlyarg name code body[ 0 ] args kwonlyargs[i] arg assert code body[ 0 ] args kw defaults[ 0 ] is None assert code body[ 0 ] args kw defaults[ 1 ] n 2 else exception cant compile kwonly demo assert isinstance exception Hy Type Error message exception argsassert message u'keyword-onlyargumentsareonlyavailableunder Python 3 '
def test lambda list keywords kwonly kwonly demo u' fn[&kwonlya[b 2 ]] printab 'if PY 3 code can compile kwonly demo for i kwonlyarg name in enumerate u'a' u'b' assert kwonlyarg name code body[ 0 ] args kwonlyargs[i] arg assert code body[ 0 ] args kw defaults[ 0 ] is None assert code body[ 0 ] args kw defaults[ 1 ] n 2 else exception cant compile kwonly demo assert isinstance exception Hy Type Error message exception argsassert message u'keyword-onlyargumentsareonlyavailableunder Python 3 '
def module Provides *interfaces frame sys getframe 1 locals frame f localsif locals is not frame f globals or ' name ' not in locals raise Type Error 'module Providescanonlybeusedfromamoduledefinition ' if ' provides ' in locals raise Type Error 'module Providescanonlybeusedonceinamoduledefinition ' locals[' provides '] Provides Module Type * normalizeargs interfaces
@frappe whitelist def get due date posting date party type party company due date Noneif posting date and party due date posting date credit days based on credit days get credit days party type party company if credit days based on u' Fixed Days' and credit days due date add days posting date credit days elif credit days based on u' Last Dayofthe Next Month' due date get first day posting date 0 2 + datetime timedelta -1 strftime u'%Y-%m-%d' return due date
def run returnfor file in File objects filter version addon type in [amo ADDON EXTENSION amo ADDON THEME] try data parse addon file file path addon file version addon if data get 'is multi package' file update is multi package True except log error ' Failedcheckingfile{ 0 }' format file pk
def run returnfor file in File objects filter version addon type in [amo ADDON EXTENSION amo ADDON THEME] try data parse addon file file path addon file version addon if data get 'is multi package' file update is multi package True except log error ' Failedcheckingfile{ 0 }' format file pk
def run returnfor file in File objects filter version addon type in [amo ADDON EXTENSION amo ADDON THEME] try data parse addon file file path addon file version addon if data get 'is multi package' file update is multi package True except log error ' Failedcheckingfile{ 0 }' format file pk
@cronjobs registerdef cleanup image files log info ' Removingonedayoldtemporaryimagefilesforthemes ' for folder in 'persona footer' 'persona header' root os path join settings TMP PATH folder if not os path exists root continuefor path in os listdir root full path os path join root path age time time - os stat full path st atime if age > 60 * 60 * 24 log debug ' Removingimagefile %s %dsecsold ' % full path age os unlink full path
def make cache key *args **kwargs path request pathargs str hash frozenset request args items return path + args encode 'ascii' 'ignore'
def make cache key *args **kwargs path request pathargs str hash frozenset request args items return path + args encode 'ascii' 'ignore'
@log calldef metadef namespace get all context marker None limit None sort key 'created at' sort dir 'desc' filters None resource types filters get 'resource types' [] if filters else [] visibility filters get 'visibility' None if filters else None namespaces []for namespace in DATA['metadef namespaces'] if not is namespace visible context namespace continueif visibility and namespace['visibility'] visibility continueif resource types for association in DATA['metadef namespace resource types'] if association['namespace id'] namespace['id'] if association['name'] in resource types breakelse continuenamespaces append namespace return namespaces
def label rgb colors return 'rgb %s %s %s ' % colors[ 0 ] colors[ 1 ] colors[ 2 ]
def start server server version req servers service pb Start Server Request req set server server req set version version resp servers service pb Start Server Response try apiproxy stub map Make Sync Call 'servers' ' Start Server' req resp except apiproxy errors Application Error as e if e application error servers service pb Servers Service Error INVALID VERSION raise Invalid Version Error elif e application error servers service pb Servers Service Error UNEXPECTED STATE raise Unexpected State Error elif e application error servers service pb Servers Service Error TRANSIENT ERROR raise Transient Error else raise Error
def split module dicts if not isinstance salt dict return salt mod dict dict salt for module func name mod fun in six iteritems mod dict copy mod fun module func name split ' ' 1 if mod not in mod dict mod dict[mod] lambda None setattr mod dict[mod] fun mod fun return mod dict
def aws provisioner access key secret access token keyname region zone security groups instance type 'm 3 large' session token None conn connect to region region aws access key id access key aws secret access key secret access token security token session token if conn is None raise Value Error ' Invalidregion {}' format region return AWS Provisioner connection conn keyname keyname security groups security groups zone zone default size instance type
def split string separator txt size if len txt > size txt '' join [re sub u'\\ ?P<ends>[^ ]* $' ' \n\n\\g<ends>' txt[i i + size ] 1 for i in xrange 0 len txt size ] return txt
@open file 1 mode 'wb' def write gpickle G path protocol pickle HIGHEST PROTOCOL pickle dump G path protocol
def get Label String dictionary for key in dictionary label Index key find 'label' if label Index > 0 return dictionary[key]return ''
def flip axis multi x axis is random False if is random factor np random uniform -1 1 if factor > 0 results []for data in x data np asarray data swapaxes axis 0 data data[ -1 ]data data swapaxes 0 axis results append data return np asarray results else return np asarray x else results []for data in x data np asarray data swapaxes axis 0 data data[ -1 ]data data swapaxes 0 axis results append data return np asarray results
def initialize import loggingimport osimport settings localos environ['RBSITE PYTHONPATH'] os path dirname settings local file from Crypto import Randomfrom django conf import settingsfrom django db import Database Errorfrom djblets import logfrom djblets cache serials import generate ajax serialfrom reviewboard import signalsfrom reviewboard admin siteconfig import load site configfrom reviewboard extensions base import get extension managerimport reviewboard site templatetagsis running test getattr settings u'RUNNING TEST' False if not is running test Random atfork log init logging load site config if not is running test if settings DEBUG logging debug u' Logfilefor Review Boardv%s PID%s ' % get version string os getpid generate ajax serial if not getattr settings u'TEMPLATE SERIAL' None settings TEMPLATE SERIAL settings AJAX SERIA Ltry get extension manager load except Database Error passsignals initializing send sender None
def test approve addons approve files use case mozilla user addon file 1 file 2 review type use caseapprove addons approve files [ file 1 review type file 2 review type ] assert file 1 reload status amo STATUS PUBLIC assert file 2 reload status amo STATUS PUBLIC logs Addon Log objects filter addon addon assert len logs 2 file 1 log file 2 log logsassert file 1 log activity log details['comments'] u'bulkapproval' assert file 1 log activity log user mozilla user assert file 2 log activity log details['comments'] u'bulkapproval' assert file 2 log activity log user mozilla user assert not Reviewer Score objects all
def quickstart generator war path sdk root None if not sdk root sdk root SDK ROO Tquickstart xml path os path join war path 'WEB-INF' 'quickstart-web xml' if os path exists quickstart xml path os remove quickstart xml path java home exec suffix java utils Java Home And Suffix java command os path join java home 'bin' 'java' + exec suffix quickstartgenerator jar os path join sdk root QUICKSTART JAR PATH webdefaultxml os path join sdk root JAVA VMRUNTIME PATH 'etc' 'webdefault xml' command [java command '-jar' quickstartgenerator jar war path webdefaultxml]subprocess check call command with open quickstart xml path as f return f read quickstart xml path
def get oauth client server token url client id client secret if not is valid url server token url returnclient Backend Application Client client id client id oauth ccxcon O Auth 2 Session client client oauth ccxcon fetch token token url server token url client id client id client secret client secret timeout CCXCON REQUEST TIMEOUT return oauth ccxcon
def test withall tmpmod with tmpmod mkdir 'xontrib' join 'spameggs py' open 'w' as x x write "\n all 'spam' ' foobar'\nspam 1\neggs 2\n foobar 3\n" ctx xontrib context 'spameggs' assert ctx {'spam' 1 ' foobar' 3}
def values eq approx high tol a b rtol Noneif a size > 100000 rtol 5e- 05 return Cuda Ndarray Type values eq approx a b rtol rtol
def enrollment mode display enrollment mode verification status course id course mode slugs [mode slug for mode in Course Mode modes for course course id ]if enrollment mode Course Mode VERIFIED if verification status in [VERIFY STATUS NEED TO VERIFY VERIFY STATUS SUBMITTED VERIFY STATUS APPROVED] display mode DISPLAY VERIFIE Delif DISPLAY HONOR in course mode slugs display mode DISPLAY HONO Relse display mode DISPLAY AUDI Telif enrollment mode in [ Course Mode PROFESSIONAL Course Mode NO ID PROFESSIONAL MODE] display mode DISPLAY PROFESSIONA Lelse display mode enrollment modereturn display mode
def oldgc phenny input query input group 2 if not query return phenny reply ' gcwhat?' query query encode 'utf- 8 ' num formatnumber google count query phenny say query + ' ' + num
def confirmation option *param decls **attrs def decorator f def callback ctx param value if not value ctx abort attrs setdefault 'is flag' True attrs setdefault 'callback' callback attrs setdefault 'expose value' False attrs setdefault 'prompt' ' Doyouwanttocontinue?' attrs setdefault 'help' ' Confirmtheactionwithoutprompting ' return option * param decls or '--yes' **attrs f return decorator
def random dense design matrix for regression rng num examples dim reg min reg max X rng randn num examples dim Y rng randint reg min reg max num examples 1 return Dense Design Matrix X X y Y
def Add Post content t time strftime '%c' time localtime DB append t content
def has wiki staff access user wiki slug modstore course keys modstore get courses for wiki wiki slug if wiki slug endswith ' ' and slug is numerical wiki slug[ -1 ] course keys extend modstore get courses for wiki wiki slug[ -1 ] for course key in course keys course modstore get course course key if courseware access has access user 'staff' course course key return Truereturn False
def logmgf exact q priv eps l if q < 0 5 t one 1 - q * math pow 1 - q / 1 - math exp priv eps * q l t two q * math exp priv eps * l t t one + t two try log t math log t except Value Error print ' Got Value Errorinmath logforvalues ' + str q priv eps l t log t priv eps * l else log t priv eps * l return min 0 5 * priv eps * priv eps * l * l + 1 log t priv eps * l
def set Conf Attributes debug Msg 'initializingtheconfiguration'logger debug debug Msg conf auth Username Noneconf auth Password Noneconf boundaries []conf cj Noneconf dbms Connector Noneconf dbms Handler Noneconf dns Server Noneconf dump Path Noneconf hash DB Noneconf hash DB File Noneconf http Headers []conf hostname Noneconf ipv 6 Falseconf multiple Targets Falseconf output Path Noneconf param Dict {}conf parameters {}conf path Noneconf port Noneconf proxy List Noneconf results Filename Noneconf results FP Noneconf scheme Noneconf tests []conf traffic FP Noneconf w File Type None
def trust Root From Certificates certificates certs []for cert in certificates if isinstance cert Cert Base cert cert originalelse raise Type Error 'certificatesitemsmustbetwisted internet ssl Cert Baseinstances' certs append cert return Open SSL Certificate Authorities certs
def get Dot Product Plus One first Complex second Complex return 1 0 + get Dot Product first Complex second Complex
def lottery promoted links sr names n 10 promo tuples get live promotions sr names weights {p p weight or 0 001 for p in promo tuples}selected []while weights and len selected < n s weighted lottery weights del weights[s]selected append s return selected
def create scenario actions logs None keys [str i for i in range len actions ]key provider create mock key provider keys digest provider Mock Digest Provider actions logs digest validator Mock def validate bucket key public key digest data digest str if ' invalid' in digest data raise Digest Error 'invaliderror' digest validator validate validatereturn key provider digest provider digest validator
def saxify element or tree content handler return Element Tree Producer element or tree content handler saxify
def setup platform hass config add devices callback discovery info None add devices callback [ Demo Switch ' Decorative Lights' True None True Demo Switch 'AC' False 'mdi air-conditioner' False ]
def print result results file dict retval print results section log printer file diff dict ignore ranges console printer min severity str str section get 'min severity' 'INFO' upper min severity RESULT SEVERITY str dict get min severity str 'INFO' results list filter lambda result type result is Result and result severity > min severity and not check result ignore result ignore ranges results patched results autoapply actions results file dict file diff dict section log printer print results log printer section patched results file dict file diff dict console printer return retval or len results > 0 patched results
def print result results file dict retval print results section log printer file diff dict ignore ranges console printer min severity str str section get 'min severity' 'INFO' upper min severity RESULT SEVERITY str dict get min severity str 'INFO' results list filter lambda result type result is Result and result severity > min severity and not check result ignore result ignore ranges results patched results autoapply actions results file dict file diff dict section log printer print results log printer section patched results file dict file diff dict console printer return retval or len results > 0 patched results
def get form data form prepared False if isinstance form Form Group data {}for subform in form forms values data update get form data subform prepared prepared return dataif isinstance form Base Form Set data {}for subform in chain [form management form] form forms data update get form data subform prepared prepared return datadata {}for name field in form fields items prefixed name form add prefix name data value field widget value from datadict form data form files prefixed name if data value value data valueelse value form initial get name field initial if callable value value value if prepared value field prepare value value if value is None continuedata[prefixed name] valuereturn data
def get form data form prepared False if isinstance form Form Group data {}for subform in form forms values data update get form data subform prepared prepared return dataif isinstance form Base Form Set data {}for subform in chain [form management form] form forms data update get form data subform prepared prepared return datadata {}for name field in form fields items prefixed name form add prefix name data value field widget value from datadict form data form files prefixed name if data value value data valueelse value form initial get name field initial if callable value value value if prepared value field prepare value value if value is None continuedata[prefixed name] valuereturn data
def ea Generate Update toolbox ngen halloffame None stats None verbose debug logbook tools Logbook logbook header ['gen' 'nevals'] + stats fields if stats else [] for gen in xrange ngen population toolbox generate fitnesses toolbox map toolbox evaluate population for ind fit in zip population fitnesses ind fitness values fitif halloffame is not None halloffame update population toolbox update population record stats compile population if stats is not None else {} logbook record gen gen nevals len population **record if verbose print logbook streamreturn population logbook
def ea Generate Update toolbox ngen halloffame None stats None verbose debug logbook tools Logbook logbook header ['gen' 'nevals'] + stats fields if stats else [] for gen in xrange ngen population toolbox generate fitnesses toolbox map toolbox evaluate population for ind fit in zip population fitnesses ind fitness values fitif halloffame is not None halloffame update population toolbox update population record stats compile population if stats is not None else {} logbook record gen gen nevals len population **record if verbose print logbook streamreturn population logbook
def reset template info cache template info cache clear
def infer import self context None asname True name context lookupnameif name is None raise Inference Error if asname yield self do import module self real name name else yield self do import module name
def orthogonal procrustes A B check finite True if check finite A np asarray chkfinite A B np asarray chkfinite B else A np asanyarray A B np asanyarray B if A ndim 2 raise Value Error 'expectedndimtobe 2 butobserved%s' % A ndim if A shape B shape raise Value Error 'theshapesof Aand Bdiffer %svs%s ' % A shape B shape u w vt svd B T dot A T R u dot vt scale w sum return R scale
@contextlib contextmanagerdef reset setup stop context setup stop after distutils core setup stop afterdistutils core setup stop after None yield distutils core setup stop after setup stop after
def extract configs configs parent dir config dir os path join parent dir 'configs' if os path isdir configs shutil copytree configs config dir symlinks True elif tarfile is tarfile configs with tarfile open configs 'r' as tar tar extractall config dir else raise errors Error ' Unknownconfigurationsfiletype' return config dir
def extract configs configs parent dir config dir os path join parent dir 'configs' if os path isdir configs shutil copytree configs config dir symlinks True elif tarfile is tarfile configs with tarfile open configs 'r' as tar tar extractall config dir else raise errors Error ' Unknownconfigurationsfiletype' return config dir
def init siteconfig app created models verbosity db None **kwargs try site Site objects get current except Site Does Not Exist from django contrib sites management import create default sitecreate default site app created models verbosity db db site Site objects get current siteconfig is new Site Configuration objects get or create site site new version get version string if is new if Site not in created models print u'*** Migratingsettingsfromsettings local pytothedatabase ' migrate settings siteconfig if Site not in created models print u'*** Ifyouhavepreviouslyconfigured Review Boardthrougha' print u'***settings local pyfile pleaseensurethatthemigration' print u'***wassuccessfulbyverifyingyoursettingsat' print u'***%s //%s%sadmin/settings/' % siteconfig get u'site domain method' site domain settings SITE ROOT siteconfig version new versionsiteconfig save elif siteconfig version new version print u' Upgrading Review Boardfrom%sto%s' % siteconfig version new version siteconfig version new versionsiteconfig save
def monomial count V N from sympy import factorialreturn factorial V + N / factorial V / factorial N
def dense 2 cvxopt value import cvxoptreturn cvxopt matrix value tc 'd'
def source name uri distribution *components from fabtools require import file as require filepath '/etc/apt/sources list d/% name s list' % locals components '' join components source line 'deb% uri s% distribution s% components s\n' % locals with watch path as config require file path path contents source line use sudo True if config changed puts ' Added AP Trepository %s' % source line update index
def induce pcfg start productions pcount {}lcount {}for prod in productions lcount[prod lhs ] lcount get prod lhs 0 + 1 pcount[prod] pcount get prod 0 + 1 prods [ Probabilistic Production p lhs p rhs prob pcount[p] / lcount[p lhs ] for p in pcount]return PCFG start prods
@dispatch Expr object def pre compute leaf data scope None **kwargs return data
@contextmanagerdef persistent grades feature flags global flag enabled for all courses False course id None enabled for course False Persistent Grades Enabled Flag objects create enabled global flag enabled for all courses enabled for all courses if course id Course Persistent Grades Flag objects create course id course id enabled enabled for course yield
@contextmanagerdef persistent grades feature flags global flag enabled for all courses False course id None enabled for course False Persistent Grades Enabled Flag objects create enabled global flag enabled for all courses enabled for all courses if course id Course Persistent Grades Flag objects create course id course id enabled enabled for course yield
def interface field interfaces **field kwargs if not isinstance interfaces tuple raise Type Error ' The``interfaces``argumentmustbeatuple Got { r}' format interfaces original invariant field kwargs pop 'invariant' None def invariant value error messages []if original invariant is not None original invariant result original invariant message original invariant value if original invariant result error messages append original invariant result missing interfaces []for interface in interfaces if not interface provided By value missing interfaces append interface get Name if missing interfaces error messages append ' Thevalue{ r}didnotprovidetheserequiredinterfaces {}' format value ' ' join missing interfaces if error messages return False '\n' join error messages else return True '' field kwargs['invariant'] invariantreturn field **field kwargs
def interface field interfaces **field kwargs if not isinstance interfaces tuple raise Type Error ' The``interfaces``argumentmustbeatuple Got { r}' format interfaces original invariant field kwargs pop 'invariant' None def invariant value error messages []if original invariant is not None original invariant result original invariant message original invariant value if original invariant result error messages append original invariant result missing interfaces []for interface in interfaces if not interface provided By value missing interfaces append interface get Name if missing interfaces error messages append ' Thevalue{ r}didnotprovidetheserequiredinterfaces {}' format value ' ' join missing interfaces if error messages return False '\n' join error messages else return True '' field kwargs['invariant'] invariantreturn field **field kwargs
def interface field interfaces **field kwargs if not isinstance interfaces tuple raise Type Error ' The``interfaces``argumentmustbeatuple Got { r}' format interfaces original invariant field kwargs pop 'invariant' None def invariant value error messages []if original invariant is not None original invariant result original invariant message original invariant value if original invariant result error messages append original invariant result missing interfaces []for interface in interfaces if not interface provided By value missing interfaces append interface get Name if missing interfaces error messages append ' Thevalue{ r}didnotprovidetheserequiredinterfaces {}' format value ' ' join missing interfaces if error messages return False '\n' join error messages else return True '' field kwargs['invariant'] invariantreturn field **field kwargs
def create pool lb name method 'ROUND ROBIN' if opts ['load balancers'] get lb None username password list opts ['load balancers'][lb] values else raise Exception ' Unabletofind`{ 0 }`loadbalancer' format lb F5 F5 Mgmt lb username password F5 create pool name method return True
def Give Properties From General To Specific handler list for i j in itertools combinations xrange len handler list 2 if handler list[j] Matches All handler list[i] if isinstance handler list[i] Simple Handler handler list[i] handler list[i] Create Overlapped Handler handler list[i] Add Matching Handler handler list[j]
def intensity range image range values 'image' clip negative False if range values 'dtype' range values image dtype typeif range values 'image' i min np min image i max np max image elif range values in DTYPE RANGE i min i max DTYPE RANGE[range values]if clip negative i min 0else i min i max range valuesreturn i min i max
def set up gae environment sdk path if 'google' in sys modules reload module sys modules['google'] sys path insert 0 sdk path import dev appserverdev appserver fix sys path import google appengine tools os compat
def reverse viewname urlconf None args None kwargs None prefix None current app None add prefix True prefixer get url prefix if prefixer prefix prefix or '/' url django reverse viewname urlconf args kwargs prefix current app if prefixer and add prefix return prefixer fix url else return url
def osbornei e d def f rv if not isinstance rv Trigonometric Function return rva rv args[ 0 ] xreplace {d S One} if rv func is sin return sinh a / I elif rv func is cos return cosh a elif rv func is tan return tanh a / I elif rv func is cot return coth a * I elif rv func is sec return 1 / cosh a elif rv func is csc return I / sinh a else raise Not Implemented Error 'unhandled%s' % rv func return bottom up e f
def nzb redirect wdir nzbname pp script cat priority files []for root dirs names in os walk wdir for name in names files append os path join root name for file in files if os path splitext file [1 ] lower ' nzb' return Noneif len files 1 nzbname Nonefor file in files dirscanner Process Single File os path split file [1 ] file pp script cat priority priority keep False dup check False nzbname nzbname return files
def nzb redirect wdir nzbname pp script cat priority files []for root dirs names in os walk wdir for name in names files append os path join root name for file in files if os path splitext file [1 ] lower ' nzb' return Noneif len files 1 nzbname Nonefor file in files dirscanner Process Single File os path split file [1 ] file pp script cat priority priority keep False dup check False nzbname nzbname return files
def decode result found return { True ' Countermodelfound' False ' Nocountermodelfound' None ' None'}[found]
def experimental api name if not chainer disable experimental feature warning warnings warn '{}isexperimental Theinterfacecanchangeinthefuture ' format api name Future Warning
def Dump Local Groups path ' Win NT //%s computer' % local name ob A Ds Get Object path IID IA Ds Container ob put Filter [' Group'] for sub ob in ob print ' Group %s %s ' % sub ob Name sub ob A Ds Path members sub ob Members for member in members print ' Groupmember %s %s ' % member Name member A Ds Path
def F Distribution name d1 d2 return rv name F Distribution Distribution d1 d2
def has site permission user mw u'mezzanine core middleware Site Permission Middleware'if mw not in get middleware setting from warnings import warnwarn mw + u'missingfromsettings MIDDLEWARE-persitepermissionsnotapplied' return user is staff and user is active return getattr user u'has site permission' False
def has site permission user mw u'mezzanine core middleware Site Permission Middleware'if mw not in get middleware setting from warnings import warnwarn mw + u'missingfromsettings MIDDLEWARE-persitepermissionsnotapplied' return user is staff and user is active return getattr user u'has site permission' False
def get grid grid url raw False fid parse grid id args None grid url response v2 grids content fid parsed content response json if raw return parsed contentreturn Grid parsed content fid
def expm multiply A B start None stop None num None endpoint None if all arg is None for arg in start stop num endpoint X expm multiply simple A B else X status expm multiply interval A B start stop num endpoint return X
def bpic trace model None model modelcontext model mean deviance -2 * np mean [model logp pt for pt in trace] free rv means {rv name trace[rv name] mean axis 0 for rv in model free R Vs}deviance at mean -2 * model logp free rv means return 3 * mean deviance - 2 * deviance at mean
def test remove astropy time t1 Time '2007 001 ' scale 'tai' assert 'astropy time' not in t1 FORMATS with pytest raises Value Error as err Time t1 format 'astropy time' assert 'formatmustbeoneof' in str err
def fs 2 web path return '/' join path split os path sep
def fs 2 web path return '/' join path split os path sep
def get prerequisite milestone prereq content key milestones milestones api get milestones '{usage key}{qualifier}' format usage key prereq content key qualifier GATING NAMESPACE QUALIFIER if not milestones log warning ' Couldnotfindgatingmilestoneforprereq Usage Key%s' prereq content key return Noneif len milestones > 1 log warning ' Multiplegatingmilestonesfoundforprereq Usage Key%s' prereq content key return milestones[ 0 ]
@contextmanagerdef set siteconfig settings settings siteconfig Site Configuration objects get current old settings {}for setting value in six iteritems settings old settings[setting] siteconfig get setting siteconfig set setting value siteconfig save load site config try yield finally for setting value in six iteritems old settings siteconfig set setting value siteconfig save load site config
def migration get by instance and status context instance uuid status return IMPL migration get by instance and status context instance uuid status
def limited Time second func *args **kw return func *args **kw
def set special user special cmd lst list tab user for cron in lst['special'] if special cron['spec'] and cmd cron['cmd'] return 'present'spec {'spec' special 'cmd' cmd}lst['special'] append spec comdat write cron lines user render tab lst if comdat['retcode'] return comdat['stderr']return 'new'
@intercept errors User API Internal Error ignore errors [ User API Request Error] def update user preferences requesting user update user None if not user or isinstance user basestring user get authorized user requesting user user else check authorized requesting user user username errors {}serializers {}for preference key in update keys preference value update[preference key]if preference value is not None try serializer create user preference serializer user preference key preference value validate user preference serializer serializer preference key preference value serializers[preference key] serializerexcept Preference Validation Error as error preference error error preference errors[preference key]errors[preference key] {'developer message' preference error['developer message'] 'user message' preference error['user message']}if errors raise Preference Validation Error errors for preference key in update keys preference value update[preference key]if preference value is not None try serializer serializers[preference key]serializer save except Exception as error raise create preference update error preference key preference value error else delete user preference requesting user preference key
def nagios from file results file data open results file read strip pieces data split ' ' if not len pieces 4 state 'UNKNOWN'ret 3data ' Resultsfilemalformed'else timestamp int pieces[ 0 ] time diff time time - timestamp if time diff > 60 * 2 ret 3state 'UNKNOWN'data ' Resultsfileisstale'else ret int pieces[ 1 ] state pieces[ 2 ]data pieces[ 3 ]return ret '%s %s' % state data
def nagios from file results file data open results file read strip pieces data split ' ' if not len pieces 4 state 'UNKNOWN'ret 3data ' Resultsfilemalformed'else timestamp int pieces[ 0 ] time diff time time - timestamp if time diff > 60 * 2 ret 3state 'UNKNOWN'data ' Resultsfileisstale'else ret int pieces[ 1 ] state pieces[ 2 ]data pieces[ 3 ]return ret '%s %s' % state data
def threads request document slug doc get document document slug request try sort int request GET get 'sort' 0 except Value Error sort 0try desc int request GET get 'desc' 0 except Value Error desc 0desc toggle 0 if desc else 1 threads sort threads doc thread set sort desc threads paginate request threads per page kbforums THREADS PER PAGE feed urls reverse 'wiki discuss threads feed' args [document slug] Threads Feed title doc is watching forum request user is authenticated and New Thread Event is notifying request user doc return render request 'kbforums/threads html' {'document' doc 'threads' threads 'is watching forum' is watching forum 'sort' sort 'desc toggle' desc toggle 'feeds' feed urls}
def threads request document slug doc get document document slug request try sort int request GET get 'sort' 0 except Value Error sort 0try desc int request GET get 'desc' 0 except Value Error desc 0desc toggle 0 if desc else 1 threads sort threads doc thread set sort desc threads paginate request threads per page kbforums THREADS PER PAGE feed urls reverse 'wiki discuss threads feed' args [document slug] Threads Feed title doc is watching forum request user is authenticated and New Thread Event is notifying request user doc return render request 'kbforums/threads html' {'document' doc 'threads' threads 'is watching forum' is watching forum 'sort' sort 'desc toggle' desc toggle 'feeds' feed urls}
def find router gw port context cluster router id results query lrouter lports cluster router id relations ' Logical Port Attachment' for lport in results if ' relations' in lport attachment lport[' relations'] get ' Logical Port Attachment' if attachment and attachment get 'type' 'L 3 Gateway Attachment' return lport
def read uint 64 f return np uint 64 struct unpack '>Q' f read 8 [0 ]
def send text connections **kwargs if not isinstance connections collections Iterable connections [connections]router get router message router new outgoing message text text connections connections **kwargs router send outgoing message return message
def set email preferences for exploration user id exploration id mute feedback notifications None mute suggestion notifications None exploration user model user models Exploration User Data Model get user id exploration id if exploration user model is None exploration user model user models Exploration User Data Model create user id exploration id if mute feedback notifications is not None exploration user model mute feedback notifications mute feedback notificationsif mute suggestion notifications is not None exploration user model mute suggestion notifications mute suggestion notificationsexploration user model put
def set email preferences for exploration user id exploration id mute feedback notifications None mute suggestion notifications None exploration user model user models Exploration User Data Model get user id exploration id if exploration user model is None exploration user model user models Exploration User Data Model create user id exploration id if mute feedback notifications is not None exploration user model mute feedback notifications mute feedback notificationsif mute suggestion notifications is not None exploration user model mute suggestion notifications mute suggestion notificationsexploration user model put
def Get Lines line strings lines []for line string in line strings line list map int line string split '-' 1 if line[ 0 ] < 1 raise errors Yapf Error 'invalidstartoflinerange %r' % line if line[ 0 ] > line[ 1 ] raise errors Yapf Error 'endcomesbeforestartinlinerange %r' line lines append tuple line return lines
def Get Lines line strings lines []for line string in line strings line list map int line string split '-' 1 if line[ 0 ] < 1 raise errors Yapf Error 'invalidstartoflinerange %r' % line if line[ 0 ] > line[ 1 ] raise errors Yapf Error 'endcomesbeforestartinlinerange %r' line lines append tuple line return lines
def Get Lines line strings lines []for line string in line strings line list map int line string split '-' 1 if line[ 0 ] < 1 raise errors Yapf Error 'invalidstartoflinerange %r' % line if line[ 0 ] > line[ 1 ] raise errors Yapf Error 'endcomesbeforestartinlinerange %r' line lines append tuple line return lines
def Get Word Ids text vocab pad len None pad id None ids []for w in text split i vocab Word To Id w if i > 0 ids append i else ids append vocab Word To Id UNKNOWN TOKEN if pad len is not None return Pad ids pad id pad len return ids
def main query ip Metadata QUERY I Poptions parse command line if options options mock from tornado import testingport testing get unused port class Handler web Request Handler def get self path self write path split '/' [ -1 ] application web Application [ '/ * ' Handler ] application listen port query ip 'localhost {0 }' format port def Metadata Callback metadata print metadataioloop IO Loop current stop Metadata callback Metadata Callback query ip query ip ioloop IO Loop current start return 0
def download output project id cluster id output bucket job id print ' Downloadingoutputfile'client storage Client project project id bucket client get bucket output bucket output blob 'google-cloud-dataproc-metainfo/{}/jobs/{}/driveroutput 000000000 ' format cluster id job id return bucket blob output blob download as string
def format instances instances features header featuresdatarows [[getattr x f for f in features] for x in instances]return header datarows
def get Minimum By Vector 3 Path path minimum Vector 3 9 876543219876543 e+ 17 9 876543219876543 e+ 17 9 876543219876543 e+ 17 for point in path minimum minimize point return minimum
def signal committed filefields sender instance **kwargs for field name in getattr instance ' uncommitted filefields' fieldfile getattr instance field name if fieldfile signals saved file send robust sender sender fieldfile fieldfile
def signal committed filefields sender instance **kwargs for field name in getattr instance ' uncommitted filefields' fieldfile getattr instance field name if fieldfile signals saved file send robust sender sender fieldfile fieldfile
def signal committed filefields sender instance **kwargs for field name in getattr instance ' uncommitted filefields' fieldfile getattr instance field name if fieldfile signals saved file send robust sender sender fieldfile fieldfile
def signal committed filefields sender instance **kwargs for field name in getattr instance ' uncommitted filefields' fieldfile getattr instance field name if fieldfile signals saved file send robust sender sender fieldfile fieldfile
def retry *dargs **dkw if len dargs 1 and callable dargs[ 0 ] def wrap simple f @six wraps f def wrapped f *args **kw return Retrying call f *args **kw return wrapped freturn wrap simple dargs[ 0 ] else def wrap f @six wraps f def wrapped f *args **kw return Retrying *dargs **dkw call f *args **kw return wrapped freturn wrap
def predict help ver args ns HELP VER PREDICTOR PARSER parse known args args pred ns help is not None or ns version is not None return pred
def get service services service name config None if service name not in services mod import 'services ' + service name globals globals locals locals fromlist [' Service'] level -1 services[service name] mod Service services[service name] init services[service name] config configreturn services[service name]
def split datastore path datastore path splits datastore path split '[' 1 [1 ] split ']' 1 datastore name Nonefolder path Nonefile name Noneif len splits 1 datastore name splits[ 0 ]else datastore name path splitssplits path split '/' file name splits[ len splits - 1 ]folder path path[ - len file name ]return datastore name strip folder path strip file name strip
def connect Server And Client test client Factory server Factory addr '127 0 0 1' client Broker client Factory build Protocol addr server Broker server Factory build Protocol addr client Transport String IO server Transport String IO client Broker make Connection protocol File Wrapper client Transport server Broker make Connection protocol File Wrapper server Transport pump IO Pump client Broker server Broker client Transport server Transport def maybe Disconnect broker if not broker disconnected broker connection Lost failure Failure main CONNECTION DONE def disconnect Client Factory client Factory client Connection Lost connector None reason failure Failure main CONNECTION DONE test add Cleanup maybe Disconnect client Broker test add Cleanup maybe Disconnect server Broker test add Cleanup disconnect Client Factory pump pump return client Broker server Broker pump
def connect Server And Client test client Factory server Factory addr '127 0 0 1' client Broker client Factory build Protocol addr server Broker server Factory build Protocol addr client Transport String IO server Transport String IO client Broker make Connection protocol File Wrapper client Transport server Broker make Connection protocol File Wrapper server Transport pump IO Pump client Broker server Broker client Transport server Transport def maybe Disconnect broker if not broker disconnected broker connection Lost failure Failure main CONNECTION DONE def disconnect Client Factory client Factory client Connection Lost connector None reason failure Failure main CONNECTION DONE test add Cleanup maybe Disconnect client Broker test add Cleanup maybe Disconnect server Broker test add Cleanup disconnect Client Factory pump pump return client Broker server Broker pump
def connect Server And Client test client Factory server Factory addr '127 0 0 1' client Broker client Factory build Protocol addr server Broker server Factory build Protocol addr client Transport String IO server Transport String IO client Broker make Connection protocol File Wrapper client Transport server Broker make Connection protocol File Wrapper server Transport pump IO Pump client Broker server Broker client Transport server Transport def maybe Disconnect broker if not broker disconnected broker connection Lost failure Failure main CONNECTION DONE def disconnect Client Factory client Factory client Connection Lost connector None reason failure Failure main CONNECTION DONE test add Cleanup maybe Disconnect client Broker test add Cleanup maybe Disconnect server Broker test add Cleanup disconnect Client Factory pump pump return client Broker server Broker pump
def undefine vm dom get domain vm return dom undefine 0
def globalsfilter input dict check all False filters None exclude private None exclude capitalized None exclude uppercase None exclude unsupported None excluded names None output dict {}for key value in list input dict items excluded exclude private and key startswith ' ' or exclude capitalized and key[ 0 ] isupper or exclude uppercase and key isupper and len key > 1 and not key[ 1 ] isdigit or key in excluded names or exclude unsupported and not is supported value check all check all filters filters if not excluded output dict[key] valuereturn output dict
@config command @click argument 'option' @click argument 'value' @configurationdef set option value from sentry import optionsfrom sentry options manager import Unknown Optiontry options set option value except Unknown Option raise click Click Exception 'unknownoption %s' % option except Type Error as e raise click Click Exception six text type e
def Sort Chunks By File chunks chunks by file defaultdict list for chunk in chunks filepath chunk[u'range'][u'start'][u'filepath']chunks by file[filepath] append chunk return chunks by file
def expect mc dist func lambda x 1 size 50000 def fun x return func x rvs dist rvs size size return fun rvs mean 0
def expect mc dist func lambda x 1 size 50000 def fun x return func x rvs dist rvs size size return fun rvs mean 0
def expect mc dist func lambda x 1 size 50000 def fun x return func x rvs dist rvs size size return fun rvs mean 0
@context quietfunc@with devicedef write path data '' with tempfile Named Temporary File as temp misc write temp name data push temp name path
@context quietfunc@with devicedef write path data '' with tempfile Named Temporary File as temp misc write temp name data push temp name path
def get config status cmd ' Get- Dsc Configuration Status Select- Object- Property Host Name Status Meta Data @{ Name " Start Date" Expression { Get- Date $ Start Date - Formatg}} Type Mode Reboot Requested Numberof Resources'return pshell cmd
def get config status cmd ' Get- Dsc Configuration Status Select- Object- Property Host Name Status Meta Data @{ Name " Start Date" Expression { Get- Date $ Start Date - Formatg}} Type Mode Reboot Requested Numberof Resources'return pshell cmd
def delete net dev dev if device exists dev try utils execute 'ip' 'link' 'delete' dev run as root True check exit code [0 2 254 ] LOG debug " Netdeviceremoved '%s'" dev except processutils Process Execution Error with excutils save and reraise exception LOG error LE " Failedremovingnetdevice '%s'" dev
@register inclusion tag 'utilities/render form html' def render form form return {'form' form}
def make segment dict record return {'id' record id NETWORK TYPE record network type PHYSICAL NETWORK record physical network SEGMENTATION ID record segmentation id}
def masi distance label 1 label 2 len intersection len label 1 intersection label 2 len union len label 1 union label 2 len label 1 len label 1 len label 2 len label 2 if len label 1 len label 2 and len label 1 len intersection m 1elif len intersection min len label 1 len label 2 m 0 67 elif len intersection > 0 m 0 33 else m 0return 1 - len intersection / float len union * m
def build tables print u' Buildinglexerandparsertables ' sys path insert 0 os path dirname file from xonsh parser import Parser Parser lexer table u'lexer table' yacc table u'parser table' outputdir u'xonsh' yacc debug True sys path pop 0
def get minibatch doc iter size pos class positive class data [ u'{title}\n\n{body}' format **doc pos class in doc['topics'] for doc in itertools islice doc iter size if doc['topics']]if not len data return np asarray [] dtype int np asarray [] dtype int X text y zip *data return X text np asarray y dtype int
def skipif condition *args **kwargs if is called from pytest import pytestreturn pytest mark skipif condition *args **kwargs else from nose decorators import skipifreturn skipif condition *args **kwargs
def get version and flavor executable version string get version from pycaffe if version string is None version string get version from cmdline executable if version string is None version string get version from soname executable if version string is None raise Value Error ' Couldnotfindversioninformationfor Caffebuild' + 'at"%s" Upgradeyourinstallation' % executable version parse version version string if parse version 0 99 0 > version > parse version 0 9 0 flavor 'NVIDIA'minimum version '0 11 0'if version < parse version minimum version raise Value Error ' Requiredversion"%s"isgreaterthan"%s" Upgradeyourinstallation ' % minimum version version string else flavor 'BVLC'return version string flavor
def get random string return '' join random choice string ascii uppercase + string digits for in range RAND LENGTH SIZE
def make buffer from bit pattern pattern on freq off freq last bit pattern[ -1 ]output buffer []offset 0for i in range len pattern bit pattern[i]if i < len pattern - 1 next bit pattern[ i + 1 ]else next bit pattern[ 0 ]freq on freq if bit '1 ' else off freq tone quietnet tone freq DATASIZE offset offset output buffer + quietnet envelope tone left last bit '0 ' right next bit '0 ' offset + DATASIZ Elast bit bitreturn quietnet pack buffer output buffer
def generate random alphanumeric length return '' join random choice string ascii uppercase + string digits for x in range length
@register tag 'static with version' def do static with version parser token return Static With Version Node handle token parser token
@pytest fixture def link headers manager def headers response links {}for link in requests utils parse header links response headers get u'link' url link[u'url']page int re search u' ?< per page \\d ' url group 1 links[link[u'rel']] dict url url page page return linksreturn headers
def API Tester request response print 'notyetimplemented'
def comp split codons hsp seq type scodon moves scodons []for idx in range len scodon moves[seq type] pair scodon moves[seq type][idx]if not any pair continueelse assert not all pair a b pairanchor pair hsp[ '%s ranges' % seq type ][ idx // 2 ]strand 1 if hsp[ '%s strand' % seq type ] > 0 else -1 if a func max if strand 1 else min anchor func anchor pair start c end c anchor + a * strand * -1 anchor elif b func min if strand 1 else max anchor func anchor pair start c end c anchor + b * strand anchor scodons append min start c end c max start c end c return scodons
def collapse wspace text if text is not None return '' join text split
def test get debug values no debugger prev value config compute test valuetry config compute test value 'off'x T vector for x val in op get debug values x assert Falsefinally config compute test value prev value
def constrains *args return attrsetter ' constrains' args
def Make Error name message return Js To Py Exception ERRORS[name] Js message
def eintr retry func *args while True try return func *args except OS Error select error as e if e args[ 0 ] errno EINTR raise
def label 2 rgb avg label field image bg label 0 bg color 0 0 0 out np zeros like image labels np unique label field bg labels bg label if bg any labels labels[ labels bg label ]out[bg] bg colorfor label in labels mask label field label nonzero color image[mask] mean axis 0 out[mask] colorreturn out
def test disk store alt name relpath with Test Config DISK TEST CONFIG as directory object store empty dataset Mock Dataset 1 directory write '' 'files 1 / 000 /dataset 1 dat' directory write 'foo' 'foo txt' try assert object store get data empty dataset extra dir 'dataset 1 files' alt name ' / / /foo txt' 'foo' except Object Invalid pass
def test close process when aborted with pipeline get cat pipeline pipeline PIPE pipeline PIPE as pl assert len pl commands 1 assert pl commands[ 0 ] process poll is None pl abort pipeline wait pl
def get Global Repository Dialog Values global global Repository Dialog List Tablereturn euclidean get List Table Elements global Repository Dialog List Table
def transpose inplace x **kwargs dims list range x ndim - 1 -1 -1 return elemwise Dim Shuffle x broadcastable dims inplace True x
def transpose inplace x **kwargs dims list range x ndim - 1 -1 -1 return elemwise Dim Shuffle x broadcastable dims inplace True x
def read pref mode from name name return MONGOS MODES index name
def mvstdtprob a b R df ieps 1e- 05 quadkwds None mvstkwds None kwds dict args a b R df epsabs 0 0001 epsrel 0 01 limit 150 if not quadkwds is None kwds update quadkwds res err integrate quad funbgh 2 *chi ppf [ieps 1 - ieps ] df **kwds prob res * bghfactor df return prob
def footprint sobject n 0for a in sobject keylist v getattr sobject a if v is None continueif isinstance v Object n + footprint v continueif hasattr v ' len ' if len v n + 1continuen + 1return n
def count supplied tokens args return sum 1 for arg in args if not isinstance arg astroid Keyword
def escape abbr text return re sub '\\ ? \\s $ ' ' \\@' text
def create youtube string module youtube ids [module youtube id 0 75 module youtube id 1 0 module youtube id 1 25 module youtube id 1 5]youtube speeds [' 0 75 ' '1 00 ' '1 25 ' '1 50 ']return ' ' join [' ' join pair for pair in zip youtube speeds youtube ids if pair[ 1 ]]
def libvlc media player set hwnd p mi drawable f Cfunctions get 'libvlc media player set hwnd' None or Cfunction 'libvlc media player set hwnd' 1 1 None None Media Player ctypes c void p return f p mi drawable
def destroy vm session instance vm ref None try if not vm ref vm ref get vm ref session instance LOG debug ' Destroyingthe VM' instance instance destroy task session call method session vim ' Destroy Task' vm ref session wait for task destroy task LOG info LI ' Destroyedthe VM' instance instance except Exception LOG exception LE ' Destroy V Mfailed' instance instance
def dirichlet likelihood weights alpha None if type weights is Variable n topics weights data shape[ 1 ]else n topics weights W data shape[ 1 ]if alpha is None alpha 1 0 / n topics if type weights is Variable log proportions F log softmax weights else log proportions F log softmax weights W loss alpha - 1 0 * log proportions return - F sum loss
@taskdef setup python macos HOMEBREW URL 'https //raw githubusercontent com/ Homebrew/install/master/install'local '/usr/bin/ruby-e"$ curl-fs SL%s "' % HOMEBREW URL local 'echoexport PATH /usr/local/bin /usr/local/sbin $PATH>>~/ bash profile' local 'brewinstallpython' local 'brewupdate' local 'pipinstallvirtualenvwrapper' local 'echosource/usr/local/bin/virtualenvwrapper sh>>~/ bash profile'
def ssm create association name None kwargs None instance id None call None if call 'action' raise Salt Cloud System Exit ' Thessm create associationactionmustbecalledwith-aor--action ' if not kwargs kwargs {}if 'instance id' in kwargs instance id kwargs['instance id']if name and not instance id instance id get node name ['instance Id']if not name and not instance id log error ' Eitheranameoraninstance idisrequired ' return Falseif 'ssm document' not in kwargs log error ' Assm documentisrequired ' return Falseparams {' Action' ' Create Association' ' Instance Id' instance id ' Name' kwargs['ssm document']}result aws query params return root True location get location provider get provider product 'ssm' opts opts sigver '4 ' log info result return result
def get cpu list ip user passwd cmd 'statcpu-iter 1 -t'showcpu list run ssh thread ip user passwd cmd cpu list []line num 0for line in showcpu list line num + 1if line num > 3 cpu stats line split if len cpu stats > 2 cpu list append cpu stats[ 0 ] split ' ' [0 ] return cpu list
@contextlib contextmanagerdef expect warnings on db *messages **kw spec db spec db if isinstance db util string types and not spec config current yield else with expect warnings *messages **kw yield
def get Point Minimum first Point second Point return Vector 3 min first Point x second Point x min first Point y second Point y min first Point z second Point z
def initialize backends from django settings backends clear config getattr settings 'TRACKING BACKENDS' {} for name values in config iteritems if values engine values['ENGINE']options values get 'OPTIONS' {} backends[name] instantiate backend from name engine options
def initialize backends from django settings backends clear config getattr settings 'TRACKING BACKENDS' {} for name values in config iteritems if values engine values['ENGINE']options values get 'OPTIONS' {} backends[name] instantiate backend from name engine options
def item to entry iterator entry pb loggers resource Message To Dict entry pb return entry from resource resource iterator client loggers
def refresh info cache for instance context instance if instance info cache is not None instance info cache refresh
def handlers module name handlers module try import '%s handlers' % module name if handlers module is None return []if not hasattr handlers module ' path ' raise Handler Error ' Module%smustbeadirectory ' % handlers module name files find python files handlers module path [0 ] module names [ '%s %s' % handlers module name file for file in files]modules [try import mod name for mod name in module names]return [get class mod Base Handler for mod in modules if mod]
def patch module attribute name attribute replacement attribute getattr module attribute name setattr attribute replacement BACKUP ATTRIBUTE NAME attribute setattr module attribute name attribute replacement return is patched module attribute name
def patch module attribute name attribute replacement attribute getattr module attribute name setattr attribute replacement BACKUP ATTRIBUTE NAME attribute setattr module attribute name attribute replacement return is patched module attribute name
def get non supported lang lang lang lower langs dict k lower v for k v in settings NON SUPPORTED LOCALES items if lang in langs if langs[lang] is None return settings LANGUAGE COD Ereturn langs[lang]return None
def update deps post lang task task file dep update [p for p in post fragment deps lang if not p startswith '####MAGIC####' ]
def update deps post lang task task file dep update [p for p in post fragment deps lang if not p startswith '####MAGIC####' ]
def load class dotted path dotted path split dotted path split ' ' if len dotted path split > 1 klass name dotted path split[ -1 ]module name ' ' join dotted path split[ -1 ] module load module module name if has attribute module klass name klass getattr module klass name return klasselse raise Attribute Error ' Module%sdoesnothaveclassattribute%s' % module name klass name else raise Value Error ' Dottedmodulepath%smustcontainamodulenameandaclassname' % dotted path
def load class dotted path dotted path split dotted path split ' ' if len dotted path split > 1 klass name dotted path split[ -1 ]module name ' ' join dotted path split[ -1 ] module load module module name if has attribute module klass name klass getattr module klass name return klasselse raise Attribute Error ' Module%sdoesnothaveclassattribute%s' % module name klass name else raise Value Error ' Dottedmodulepath%smustcontainamodulenameandaclassname' % dotted path
def run bokchoy options passthrough options test suite Bok Choy Test Suite 'bok-choy' passthrough options passthrough options **options msg colorize 'green' ' Runningtestsusing{default store}modulestore ' format default store test suite default store print msgtest suite run
def estimate graph size old chunks new chunks crossed size reduce mul len oc + len nc for oc nc in zip old chunks new chunks return crossed size
def estimate graph size old chunks new chunks crossed size reduce mul len oc + len nc for oc nc in zip old chunks new chunks return crossed size
def validate instance schema cls None use default True allow default none False *args **kwargs instance copy deepcopy instance schema type schema get 'type' None instance is dict isinstance instance dict if use default and allow default none schema modify schema allow default none schema schema if use default and schema type 'object' and instance is dict instance assign default values instance instance schema schema jsonschema validate instance instance schema schema cls cls *args **kwargs return instance
def validate instance schema cls None use default True allow default none False *args **kwargs instance copy deepcopy instance schema type schema get 'type' None instance is dict isinstance instance dict if use default and allow default none schema modify schema allow default none schema schema if use default and schema type 'object' and instance is dict instance assign default values instance instance schema schema jsonschema validate instance instance schema schema cls cls *args **kwargs return instance
def update schema task cursor None num updated 0 batch size 100 reload models v2 query models v2 Picture query pictures next cursor more query fetch page batch size start cursor cursor to put []for picture in pictures picture num votes 1picture avg rating 5to put append picture if to put ndb put multi to put num updated + len to put logging info ' Put{}entitiesto Datastoreforatotalof{}' format len to put num updated if more deferred defer update schema task cursor next cursor num updated num updated else logging debug 'update schema taskcompletewith{ 0 }updates ' format num updated
def add diversity table table[' Obscure'] [ ' Mozilla/ 5 0 compatible Googlebot/ 2 1 +http //www google com/bot html' ' Google Bot' ' Wget/ 1 16 1 linux-gnu ' 'wget 1 16 1' 'curl/ 7 40 0' 'curl 7 40 0' ]return table
def save subs to store subs subs id item language 'en' filedata json dumps subs indent 2 filename subs filename subs id language return save to store filedata filename 'application/json' item location
def download url u'' method GET query {} timeout 10 cached True throttle 0 proxy None user agent USER AGENT referrer REFERRER authentication None unicode False return URL url method query download timeout cached throttle proxy user agent referrer authentication unicode
def get source line node while node if node source or node line return node source node line node node parentreturn None None
def id to ec 2 id instance id template 'i-% 08 x' return template % int instance id
def render to link list link list return render to js vardef 'tiny MCE Link List' link list
def create categories cr categories p id Nonecategory []while categories category append categories[ 0 ] xml id 'module category ' + ' ' join map lambda x x lower category replace '&' 'and' replace '' ' ' cr execute 'SELEC Tres id FRO Mir model data WHER Ename %s AN Dmodule %s AN Dmodel %s' xml id 'base' 'ir module category' c id cr fetchone if not c id cr execute 'INSERTINT Oir module category name parent id VALUES %s %s RETURNIN Gid' categories[ 0 ] p id c id cr fetchone [0 ]cr execute 'INSERTINT Oir model data module name res id model VALUES %s %s %s %s ' 'base' xml id c id 'ir module category' else c id c id[ 0 ]p id c idcategories categories[ 1 ]return p id
def get service hass config discovery info None return Demo Notification Service hass
def cifs registry xml parent data console prefix 'CIFS 'plugin tag 'jenkins plugins publish over cifs Cifs Publisher Plugin'publisher tag 'jenkins plugins publish over cifs Cifs Publisher'transfer tag 'jenkins plugins publish over cifs Cifs Transfer'plugin reference tag 'jenkins plugins publish over cifs Cifs Publisher Plugin'base publish over xml parent data console prefix plugin tag publisher tag transfer tag plugin reference tag
def cifs registry xml parent data console prefix 'CIFS 'plugin tag 'jenkins plugins publish over cifs Cifs Publisher Plugin'publisher tag 'jenkins plugins publish over cifs Cifs Publisher'transfer tag 'jenkins plugins publish over cifs Cifs Transfer'plugin reference tag 'jenkins plugins publish over cifs Cifs Publisher Plugin'base publish over xml parent data console prefix plugin tag publisher tag transfer tag plugin reference tag
def start webserver any free port ip webroot handler Web Handler web server HTTP Server ip 0 webroot handler server thread threading Thread target web server serve forever server thread name ' Web Server'server thread daemon Trueserver thread start web server wait for start return server thread web server get port
@utils template doc **get config file def mpl to plotly fig resize False strip style False verbose False if matplotlylib renderer matplotlylib Plotly Renderer matplotlylib Exporter renderer run fig if resize renderer resize if strip style renderer strip style if verbose print renderer msgreturn renderer plotly figelse warnings warn " Touse Plotly'smatplotlylibfunctionality you'llneedtohavematplotlibsuccessfullyinstalledwithallofitsdependencies You'regettingthiserrorbecausematplotliboroneofitsdependenciesdoesn'tseemtobeinstalledcorrectly "
def validate ok for replace replacement validate is mapping 'replacement' replacement if replacement and not isinstance replacement Raw BSON Document first next iter replacement if first startswith '$' raise Value Error 'replacementcannotinclude$operators'
def default serialize error req resp exception representation Nonepreferred req client prefers 'application/xml' 'text/xml' 'application/json' if preferred is None accept req accept lower if '+json' in accept preferred 'application/json'elif '+xml' in accept preferred 'application/xml'if preferred is not None if preferred 'application/json' representation exception to json else representation exception to xml resp body representationresp content type preferred + ' charset UTF- 8 ' resp append header ' Vary' ' Accept'
def update record field table sys id field value client get client client table tableresponse client update {field value} sys id return response
def update record field table sys id field value client get client client table tableresponse client update {field value} sys id return response
@taskdef test sympy with cd '/home/vagrant/repos/sympy' run ' /setup pytest'
def denoise nl means image patch size 7 patch distance 11 h 0 1 multichannel None fast mode True if multichannel is None warn 'denoise nl meanswilldefaulttomultichannel Falseinv 0 15 ' multichannel Trueif image ndim 2 image image[ np newaxis]multichannel Trueif image ndim 3 raise Not Implemented Error ' Non-localmeansdenoisingisonlyimplementedfor 2 Dgrayscaleand RG Bimagesor 3 - Dgrayscaleimages ' if multichannel if fast mode return np squeeze np array fast nl means denoising 2d image patch size patch distance h else return np squeeze np array nl means denoising 2d image patch size patch distance h elif fast mode return np array fast nl means denoising 3d image s patch size d patch distance h h else return np array nl means denoising 3d image patch size patch distance h
def generate addon preview addon color random choice Image Color colormap keys im Image new 'RGB' 320 480 color p Preview objects create addon addon caption ' Screenshot 1 ' position 1 f tempfile Named Temporary File im save f 'png' resize preview f name p
def specify repositories base disablerepo enablerepo base read all repos repos base reposfor repo pattern in disablerepo for repo in repos get matching repo pattern repo disable for repo pattern in enablerepo for repo in repos get matching repo pattern repo enable
def Add Conditional Property properties condition name value if name not in properties properties[name] {}values properties[name]if value not in values values[value] []conditions values[value]conditions append condition
def make sure keen schemas match source collection destination collection keen client source schema keen client get collection source collection destination schema keen client get collection destination collection return source schema destination schema
def make sure keen schemas match source collection destination collection keen client source schema keen client get collection source collection destination schema keen client get collection destination collection return source schema destination schema
def Verify No Colliding Targets targets used {}for target in targets path name target rsplit ' ' 1 subdir gyp os path split path if not subdir subdir ' 'key subdir + ' ' + name if key in used raise Gyp Error ' Duplicatetargetname"%s"indirectory"%s"usedbothin"%s"and"%s" ' % name subdir gyp used[key] used[key] gyp
def write course block detail report course data with open 'xblock course detail csv' 'wb' as csvfile detail writer csv writer csvfile delimiter ' ' quotechar '"' quoting csv QUOTE ALL detail writer writerow ['XBLOCK TYPE NAME' 'COURSE NAME' 'COURSE ID' 'COURSE START' 'COURSE END' 'NUM XBLOCK INSTANCES'] for course in course data for block type count in course get BLOCK COUNTS KEY [] items if count > 0 detail writer writerow [block type course get COURSE NAME KEY '' encode 'utf- 8 ' course get COURSE ID KEY '' course get COURSE START KEY '' course get COURSE END KEY '' str count ] csvfile close
def write course block detail report course data with open 'xblock course detail csv' 'wb' as csvfile detail writer csv writer csvfile delimiter ' ' quotechar '"' quoting csv QUOTE ALL detail writer writerow ['XBLOCK TYPE NAME' 'COURSE NAME' 'COURSE ID' 'COURSE START' 'COURSE END' 'NUM XBLOCK INSTANCES'] for course in course data for block type count in course get BLOCK COUNTS KEY [] items if count > 0 detail writer writerow [block type course get COURSE NAME KEY '' encode 'utf- 8 ' course get COURSE ID KEY '' course get COURSE START KEY '' course get COURSE END KEY '' str count ] csvfile close
def Filter Fn Table fn table symbol new table list for entry in fn table if entry[ 0 ] symbol new table append entry return new table
def do one *rules def do one rl expr for rl in rules result rl expr if result expr return resultreturn exprreturn do one rl
def do one *rules def do one rl expr for rl in rules result rl expr if result expr return resultreturn exprreturn do one rl
def tokenize source may divide Falsepos 0lineno 1end len source while pos < end for token type rule in rules match rule match source pos if match is not None breakelse if may divide match division re match source pos token type 'operator'else match regex re match source pos token type 'regexp'if match is None pos + 1continuetoken value match group if token type is not None token Token token type token value lineno may divide indicates division token yield token lineno + len line re findall token value pos match end
def generate tar package target sources sources dir suffix mode get tar mode from suffix suffix tar tarfile open target mode manifest archive package sources tar add sources sources dir manifest path '%s MANIFEST' % target m open manifest path 'w' print >>m '\n' join manifest + '\n' m close tar add manifest path PACKAGE MANIFEST tar close return None
def generate tar package target sources sources dir suffix mode get tar mode from suffix suffix tar tarfile open target mode manifest archive package sources tar add sources sources dir manifest path '%s MANIFEST' % target m open manifest path 'w' print >>m '\n' join manifest + '\n' m close tar add manifest path PACKAGE MANIFEST tar close return None
def test Log Norm ln mcolors Log Norm clip True vmax 5 assert array equal ln [1 6] [0 1 0]
@verbosedef expand tweetids demo ids f String IO '588665495492124672 \n 588665495487909888 \n 588665495508766721 \n 588665495513006080 \n 588665495517200384 \n 588665495487811584 \n 588665495525588992 \n 588665495487844352 \n 588665495492014081 \n 588665495512948737 ' oauth credsfromfile client Query **oauth hydrated client expand tweetids ids f for tweet in hydrated id str tweet['id str']print 'id {}' format id str text tweet['text']if text startswith '@null' text '[ Tweetnotavailable]'print text + '\n'
def get public modules path base package None result []for subdir files in os walk path if any [part startswith ' ' for part in subdir split os path sep ] continue rel dir subdir split path rel dir rel dir lstrip os path sep for filename in files if is valid module filename mod name os path splitext filename rel path os path join rel dir mod name if base package is not None rel path os path join base package rel path rel path rel path replace os path sep ' ' if mod name ' init ' result append rel path[ - len ' init ' ] else result append rel path return result
def trace backlinks source sents lens target sents lens links []position len source sents lens len target sents lens while position 0 0 and all p > 0 for p in position try s t backlinks[position]except Type Error position position[ 0 ] - 1 position[ 1 ] - 1 continuefor i in range s for j in range t links append position[ 0 ] - i - 1 position[ 1 ] - j - 1 position position[ 0 ] - s position[ 1 ] - t return links[ -1 ]
def write translations file app lang full dict None app messages None if not app messages app messages get messages for app app if not app messages returntpath frappe get pymodule path app u'translations' frappe create folder tpath write csv file os path join tpath lang + u' csv' app messages full dict or get full dict lang
def read installed packages list def read from file config filename '\n Readsaninstalled lstfilefromagivenlocation\n\n paramconfig filename theconfigurationfiletoread\n'global installed packages listtry installed list file open config filename except IO Error passelse for line in installed list file l line rstrip split '' if l installed packages list[l[ 0 ]] this package package info config filename l[ 0 ] l[ 1 ] l[ 2 ] urllib unquote l[ 3 ] urllib unquote l[ 4 ] else passif super powers read from file os path join dataset conf path 'installed lst' else paths [os path join root conf path 'installed lst' os path join user conf path 'installed lst' ]try paths + [os path join x 'installed lst' for x in re split ' ' os environ['PYLEARN 2 DATA PATH'] ]except Exception passfor path in paths read from file path if len installed packages list 0 logger warning '[cf]noinstall lstfound willbecreatedoninstall/upgrade '
def group create groupname user None host None port None maintenance db None password None createdb None createuser None createroles None encrypted None login None inherit None superuser None replication None rolepassword None groups None runas None return role create groupname user user typ 'group' host host port port maintenance db maintenance db password password createdb createdb createroles createroles createuser createuser encrypted encrypted login login inherit inherit superuser superuser replication replication rolepassword rolepassword groups groups runas runas
def delete virtual hostname username password name ret {'name' name 'changes' {} 'result' False 'comment' ''}if opts ['test'] return test output ret 'delete' params {'hostname' hostname 'username' username 'password' password 'name' name} existing salt ['bigip list virtual'] hostname username password name if existing['code'] 200 deleted salt ['bigip delete virtual'] hostname username password name if deleted['code'] 200 ret['result'] Trueret['comment'] ' Virtualwassuccessfullydeleted 'ret['changes']['old'] existing['content']ret['changes']['new'] {}else ret load result deleted ret elif existing['code'] 404 ret['result'] Trueret['comment'] ' Thisvirtualalreadydoesnotexist Nochangesmade 'ret['changes']['old'] {}ret['changes']['new'] {}else ret load result existing ret return ret
def moment X n c 0 condition None **kwargs return expectation X - c ** n condition **kwargs
@decoratordef needs sqlite f self *a **kw if sqlite 3 is None or not self enabled return []else return f self *a **kw
@pytest fixturedef topicsread user topic last read topicsread Topics Read topicsread user id user idtopicsread topic id topic idtopicsread forum id topic forum idtopicsread last read last readtopicsread save return topicsread
def binipdisplay s if len s % 4 0 raise Environment Errorol []for i in range len s / 4 s1 s[ 4]s s[ 4 ]ip []for j in s1 ip append str ord j ol append string join ip ' ' return ol
def should Enable New Style value os environ get 'TWISTED NEWSTYLE' '' if value in ['' 'no' 'false' ' False' '0 '] return Falseelse return True
def do mb put path return mb request path 'PUT' AUTH YES True
def absent name purge False force False ret {'name' name 'changes' {} 'result' True 'comment' ''}lusr salt ['user info'] name if lusr if opts ['test'] ret['result'] Noneret['comment'] ' User{ 0 }setforremoval' format name return retbeforegroups set salt utils get group list name ret['result'] salt ['user delete'] name purge force aftergroups set [g for g in beforegroups if salt ['group info'] g ] if ret['result'] ret['changes'] {}for g in beforegroups - aftergroups ret['changes']['{ 0 }group' format g ] 'removed'ret['changes'][name] 'removed'ret['comment'] ' Removeduser{ 0 }' format name else ret['result'] Falseret['comment'] ' Failedtoremoveuser{ 0 }' format name return retret['comment'] ' User{ 0 }isnotpresent' format name return ret
def absent name purge False force False ret {'name' name 'changes' {} 'result' True 'comment' ''}lusr salt ['user info'] name if lusr if opts ['test'] ret['result'] Noneret['comment'] ' User{ 0 }setforremoval' format name return retbeforegroups set salt utils get group list name ret['result'] salt ['user delete'] name purge force aftergroups set [g for g in beforegroups if salt ['group info'] g ] if ret['result'] ret['changes'] {}for g in beforegroups - aftergroups ret['changes']['{ 0 }group' format g ] 'removed'ret['changes'][name] 'removed'ret['comment'] ' Removeduser{ 0 }' format name else ret['result'] Falseret['comment'] ' Failedtoremoveuser{ 0 }' format name return retret['comment'] ' User{ 0 }isnotpresent' format name return ret
def apply path dir wildcard dirs path dir wildcard path globs tuple pg for d in dirs dependencies for pg in Path Glob create from spec d stat d path path dir wildcard remainder return Paths Expansion Paths tuple path globs
def create channels logger log info ' Creatingdefaultchannels ' goduser get god player for channeldict in settings DEFAULT CHANNELS channel create create channel **channeldict channel connect goduser
def udpate Database From Kippt global settingsif not os path exists os path join alp local settings['sqlite DB'] create Database clips read All Clips if clips None returnconn lite connect settings['sqlite DB'] with conn cur conn cursor cur execute 'DELETEFROM Clips' for clip in clips title clip['title']subtitle clip['title']url clip['url']app url clip['app url']notes clip['notes']sql 'INSERTINTO Clips VALUES NULL 'sql + '"%s" ' % title sql + '"%s" ' % subtitle sql + '"%s" ' % url sql + '"%s" ' % app url sql + '"%s"' % notes sql + ' 'cur execute sql
def udpate Database From Kippt global settingsif not os path exists os path join alp local settings['sqlite DB'] create Database clips read All Clips if clips None returnconn lite connect settings['sqlite DB'] with conn cur conn cursor cur execute 'DELETEFROM Clips' for clip in clips title clip['title']subtitle clip['title']url clip['url']app url clip['app url']notes clip['notes']sql 'INSERTINTO Clips VALUES NULL 'sql + '"%s" ' % title sql + '"%s" ' % subtitle sql + '"%s" ' % url sql + '"%s" ' % app url sql + '"%s"' % notes sql + ' 'cur execute sql
def identify str if not str return 'empty ae name 'rv ''ok string ascii letters + ' ' ok 2 ok + string digits for c in str if c in ok rv rv + c elif c '' rv rv + ' ' else rv rv + ' %02 2x ' % ord c ok ok 2 if keyword iskeyword rv rv rv + ' ' return rv
def nonsingular vmin vmax expander 0 001 tiny 1e- 15 increasing True if not np isfinite vmin or not np isfinite vmax return - expander expander swapped Falseif vmax < vmin vmin vmax vmax vmin swapped Trueif vmax - vmin < max abs vmin abs vmax * tiny if vmin 0 0 vmin - expander vmax expanderelse vmin - expander * abs vmin vmax + expander * abs vmax if swapped and not increasing vmin vmax vmax vmin return vmin vmax
def get theme dirs themes dir None return [ dir for dir in os listdir themes dir if is theme dir themes dir / dir ]
@ docstring 'labels' browse True def browse labels release None includes [] limit None offset None valid includes VALID BROWSE INCLUDES['labels']params {'release' release}return browse impl 'label' includes valid includes limit offset params
def bsd jail path jid if jid 0 jls output call GET BSD JAIL PATH % jid [] if len jls output 2 and len jls output[ 1 ] split 4 return jls output[ 1 ] split [3 ]return None
def Query Value Ex key value name regqueryvalueex advapi 32 [' Reg Query Value Ex W']regqueryvalueex restype ctypes c longregqueryvalueex argtypes [ctypes c void p ctypes c wchar p LPDWORD LPDWORD LPBYTE LPDWORD]size 256 data type ctypes wintypes DWORD while True tmp size ctypes wintypes DWORD size buf ctypes create string buffer size rc regqueryvalueex key handle value name LPDWORD ctypes byref data type ctypes cast buf LPBYTE ctypes byref tmp size if rc ERROR MORE DATA breakif size > 10 * 1024 * 1024 raise exceptions Windows Error ' Valuetoobigtobereadby GRR ' size * 2if rc ERROR SUCCESS raise ctypes Win Error 2 return Reg 2 Py buf tmp size value data type value data type value
def get profile self if not hasattr self u' profile' self profile Profile objects get or create user self [0 ]self profile user selfif self profile extra data is None self profile extra data {}return self profile
def get testfile path name return os path join os path dirname os path realpath file name
def convert args args converted []for arg in args if isinstance arg dict for key in list arg keys if key ' kwarg ' continueconverted append '{ 0 } {1 }' format key arg[key] else converted append arg return converted
def strip exc exc return re sub '^ Command[\\\'"] +[\\\'"]failed ' '' exc strerror
def header msg printprint msgprint '-----------------------------'
def dir size start path total size 0for dirpath dirnames filenames in os walk start path for f in filenames fp os path join dirpath f if not os path islink fp total size + os path getsize fp return total size
def netmask To Prefixlen netmask netlen count 0 Bits netmask masklen count 1 Bits netmask check Netmask netmask masklen return masklen - netlen
def entails expr formula set {} formula set list formula set formula set append Not expr return not satisfiable And *formula set
def entails expr formula set {} formula set list formula set formula set append Not expr return not satisfiable And *formula set
def run wsgi app application run bare wsgi app add wsgi middleware application
def run wsgi app application run bare wsgi app add wsgi middleware application
def relpath to site lang target lang path SITES RELPATH DB get lang target lang None if path is None siteurl SITE DB get lang MAIN SITEURL target siteurl SITE DB get target lang MAIN SITEURL path posixpath relpath get site path target siteurl get site path siteurl SITES RELPATH DB[ lang target lang ] pathreturn path
def relpath to site lang target lang path SITES RELPATH DB get lang target lang None if path is None siteurl SITE DB get lang MAIN SITEURL target siteurl SITE DB get target lang MAIN SITEURL path posixpath relpath get site path target siteurl get site path siteurl SITES RELPATH DB[ lang target lang ] pathreturn path
def notify list user subscribed e target e['target']if target['screen name'] c['original name'] returnsource e['source']target object [e['target object']]created at e['created at']source user cycle color source['name'] + color func c['NOTIFICATION']['source nick'] '@' + source['screen name'] notify color func c['NOTIFICATION']['notify'] 'subscribedtoyourlist' date parser parse created at clock fallback humanize date clock color func c['NOTIFICATION']['clock'] clock meta c['NOTIFY FORMAT']meta source user join meta split '#source user' meta notify join meta split '#notify' meta clock join meta split '#clock' meta emojize meta print Nicely '' print Nicely meta print list target object noti True
def absent name vname None use 32 bit registry False ret {'name' name 'result' True 'changes' {} 'comment' ''} hive key parse key name reg check salt ['reg read value'] hive hive key key vname vname use 32 bit registry use 32 bit registry if not reg check['success'] or reg check['vdata'] ' valuenotset ' ret['comment'] '{ 0 }isalreadyabsent' format name return retremove change {' Key' '{ 0 }\\{ 1 }' format hive key ' Entry' '{ 0 }' format vname if vname else ' Default ' }if opts ['test'] ret['result'] Noneret['changes'] {'reg' {' Willremove' remove change}}return retret['result'] salt ['reg delete value'] hive hive key key vname vname use 32 bit registry use 32 bit registry if not ret['result'] ret['changes'] {}ret['comment'] ' Failedtoremove{ 0 }from{ 1 }' format key hive else ret['changes'] {'reg' {' Removed' remove change}}ret['comment'] ' Removed{ 0 }from{ 1 }' format key hive return ret
def get all specs context filters None marker None limit None offset None sort keys None sort dirs None return objects Quality Of Service Specs List get all context filters filters marker marker limit limit offset offset sort keys sort keys sort dirs sort dirs
def calculate group scores messages user email now datetime datetime now message ids to scores {}molecules dict defaultdict set def get message list weight message ids return sum [message ids to scores[m id] for m id in message ids] for msg in messages participants get participants msg [user email] if len participants > MIN GROUP SIZE molecules dict[tuple participants ] add msg id message ids to scores[msg id] get message weight now msg date if len molecules dict > SOCIAL MOLECULE LIMIT return {}if len molecules dict < SOCIAL MOLECULE EXPANSION LIMIT expand molecule pool molecules dict molecules list [ set emails set msgs for emails msgs in molecules dict iteritems if get message list weight msgs > MIN MESSAGE COUNT ]molecules list subsume molecules molecules list get message list weight molecules list combine similar molecules molecules list return {' ' join sorted g get message list weight m for g m in molecules list}
def calculate group scores messages user email now datetime datetime now message ids to scores {}molecules dict defaultdict set def get message list weight message ids return sum [message ids to scores[m id] for m id in message ids] for msg in messages participants get participants msg [user email] if len participants > MIN GROUP SIZE molecules dict[tuple participants ] add msg id message ids to scores[msg id] get message weight now msg date if len molecules dict > SOCIAL MOLECULE LIMIT return {}if len molecules dict < SOCIAL MOLECULE EXPANSION LIMIT expand molecule pool molecules dict molecules list [ set emails set msgs for emails msgs in molecules dict iteritems if get message list weight msgs > MIN MESSAGE COUNT ]molecules list subsume molecules molecules list get message list weight molecules list combine similar molecules molecules list return {' ' join sorted g get message list weight m for g m in molecules list}
def calculate group scores messages user email now datetime datetime now message ids to scores {}molecules dict defaultdict set def get message list weight message ids return sum [message ids to scores[m id] for m id in message ids] for msg in messages participants get participants msg [user email] if len participants > MIN GROUP SIZE molecules dict[tuple participants ] add msg id message ids to scores[msg id] get message weight now msg date if len molecules dict > SOCIAL MOLECULE LIMIT return {}if len molecules dict < SOCIAL MOLECULE EXPANSION LIMIT expand molecule pool molecules dict molecules list [ set emails set msgs for emails msgs in molecules dict iteritems if get message list weight msgs > MIN MESSAGE COUNT ]molecules list subsume molecules molecules list get message list weight molecules list combine similar molecules molecules list return {' ' join sorted g get message list weight m for g m in molecules list}
def generate Simple Sequences n Coinc 10 seq Length [5 6 7] n Seq 100 coinc List range n Coinc seq List []for i in xrange n Seq if max seq Length < n Coinc seq List append random sample coinc List random choice seq Length else len random choice seq Length seq []for x in xrange len seq append random choice coinc List seq List append seq return seq List
def wrap draft item item is draft item location revision Mongo Revision Key draft item location item location replace revision Mongo Revision Key published return item
def wrap draft item item is draft item location revision Mongo Revision Key draft item location item location replace revision Mongo Revision Key published return item
def revision save False **kwargs doc Noneif 'document' not in kwargs doc document save True else doc kwargs['document']defaults {'summary' ' Somesummary' 'content' ' Somecontent' 'comment' ' Somecomment' 'creator' kwargs get 'creator' get user 'document' doc 'tags' '"some" "tags"' 'toc depth' 1}defaults update kwargs rev Revision **defaults if save rev save return rev
def dot x y if hasattr x 'getnnz' x as sparse variable x if hasattr y 'getnnz' y as sparse variable y x is sparse variable is sparse variable x y is sparse variable is sparse variable y if not x is sparse variable and not y is sparse variable raise Type Error return dot x y
@signals worker process init connectdef attach models *args **kwargs if settings USE POSTGRES logger debug ' Notsettingstoragebackendsbecause USE POSTGRES True' returnset up storage models MODELS storage Mongo Storage
def apply parallel function array chunks None depth 0 mode None extra arguments extra keywords {} if not dask available raise Runtime Error " Couldnotimport'dask' Pleaseinstallusing'pipinstalldask'" if chunks is None shape array shapetry ncpu cpu count except Not Implemented Error ncpu 4chunks get chunks shape ncpu if mode 'wrap' mode 'periodic'elif mode 'symmetric' mode 'reflect'elif mode 'edge' mode 'nearest'def wrapped func arr return function arr *extra arguments **extra keywords darr da from array array chunks chunks return darr map overlap wrapped func depth boundary mode compute
def apply parallel function array chunks None depth 0 mode None extra arguments extra keywords {} if not dask available raise Runtime Error " Couldnotimport'dask' Pleaseinstallusing'pipinstalldask'" if chunks is None shape array shapetry ncpu cpu count except Not Implemented Error ncpu 4chunks get chunks shape ncpu if mode 'wrap' mode 'periodic'elif mode 'symmetric' mode 'reflect'elif mode 'edge' mode 'nearest'def wrapped func arr return function arr *extra arguments **extra keywords darr da from array array chunks chunks return darr map overlap wrapped func depth boundary mode compute
def name to cat fname cat None if cat is None and fname startswith '{{' n fname find '}}' if n > 2 cat fname[ 2 n] strip fname fname[ n + 2 ] strip logging debug ' Job%shascategory%s' fname cat return fname cat
def init proxy factory Proxy Factory objreg register 'proxy-factory' proxy factory Q Network Proxy Factory set Application Proxy Factory proxy factory
def propagate method 1 method 2 if method 1 for attr in INHERITED ATTRS if hasattr method 1 attr and not hasattr method 2 attr setattr method 2 attr getattr method 1 attr return method 2
def text date synonym name def getter self return getattr self name def setter self value if isinstance value basestring try setattr self name datetime strptime value u'%Y-%m-%d' except Value Error setattr self name None else setattr self name value return synonym name descriptor property getter setter
def execute runner runner workunit factory None workunit name None workunit labels None workunit log config None if not isinstance runner Executor Runner raise Value Error u' Therunnerargumentmustbeajava Executor Runnerinstance given{}oftype{}' format runner type runner if workunit factory is None return runner run else workunit labels [ Work Unit Label TOOL Work Unit Label NAILGUN if isinstance runner executor Nailgun Executor else Work Unit Label JVM ] + workunit labels or [] with workunit factory name workunit name labels workunit labels cmd runner cmd log config workunit log config as workunit ret runner run stdout workunit output u'stdout' stderr workunit output u'stderr' workunit set outcome Work Unit FAILURE if ret else Work Unit SUCCESS return ret
def plot images together images fig plt figure images [image[ 3 25 ] for image in images]image np concatenate images axis 1 ax fig add subplot 1 1 1 ax matshow image cmap matplotlib cm binary plt xticks np array [] plt yticks np array [] plt show
def plot images together images fig plt figure images [image[ 3 25 ] for image in images]image np concatenate images axis 1 ax fig add subplot 1 1 1 ax matshow image cmap matplotlib cm binary plt xticks np array [] plt yticks np array [] plt show
def ec 2 add priv launch key argument table operation model session **kwargs argument table['priv-launch-key'] Launch Key Argument session operation model 'priv-launch-key'
def unarmor pem bytes multiple False generator unarmor pem bytes if not multiple return next generator return generator
def unarmor pem bytes multiple False generator unarmor pem bytes if not multiple return next generator return generator
def unarmor pem bytes multiple False generator unarmor pem bytes if not multiple return next generator return generator
def test local abstractconv gemm image tensor ftensor 4 W tensor ftensor 4 conv tensor nnet conv 2 d image W input shape 1 32 32 32 filter shape 32 32 3 3 border mode 'half' f theano function [image W] [conv] mode mode with gpu f numpy random rand 1 32 32 32 astype 'float 32 ' numpy random rand 32 32 3 3 astype 'float 32 '
def create new user confirmation user address id chars string ascii letters + string digits rand random System Random random id '' join [rand choice id chars for i in range 42 ] record User Confirmation Record user address user address id random id record put return 'https //{}/user/confirm?code {}' format socket getfqdn socket gethostname random id
def Copy Reversed Lines instream outstream blocksize 2 ** 16 line count 0instream seek 0 2 last block instream tell // blocksize spillover ''for iblock in xrange last block + 1 -1 -1 instream seek iblock * blocksize data instream read blocksize lines data splitlines True lines[ -1 ] '' join lines[ -1 ] + [spillover] splitlines True if lines and not lines[ -1 ] endswith '\n' lines[ -1 ] + '\n'lines reverse if lines and iblock > 0 spillover lines pop if lines line count + len lines data '' join lines replace '\x 00 ' '\n DCTB ' outstream write data return line count
def Copy Reversed Lines instream outstream blocksize 2 ** 16 line count 0instream seek 0 2 last block instream tell // blocksize spillover ''for iblock in xrange last block + 1 -1 -1 instream seek iblock * blocksize data instream read blocksize lines data splitlines True lines[ -1 ] '' join lines[ -1 ] + [spillover] splitlines True if lines and not lines[ -1 ] endswith '\n' lines[ -1 ] + '\n'lines reverse if lines and iblock > 0 spillover lines pop if lines line count + len lines data '' join lines replace '\x 00 ' '\n DCTB ' outstream write data return line count
def introspect rebulk context None return Introspection rebulk context
def introspect rebulk context None return Introspection rebulk context
def pem managed name text backup False **kwargs file args kwargs get file args name **kwargs file args['contents'] salt ['x 509 get pem entry'] text text return states ['file managed'] **file args
def leakage Cls *args **kwargs mem []for i in range 100 Cls *args **kwargs mem append info get Memory Usage if mem[i] - mem[ 0 ] > THRESHOLD breakproportion i / 99 0 return round mem[i] - mem[ 0 ] / proportion 1
def Destroy Interactive Window global editif edit is not None and edit current View is not None if edit current View Get Parent Frame win 32 ui Get Main Frame passelse edit Close edit None
def prep headers to info headers server type meta {}sysmeta {}other {}for key val in dict headers items lkey key lower if is user meta server type lkey meta[strip user meta prefix server type lkey ] valelif is sys meta server type lkey sysmeta[strip sys meta prefix server type lkey ] valelse other[lkey] valreturn other meta sysmeta
@register filterdef display url url url force bytes url errors 'replace' return urllib unquote url decode 'utf- 8 ' errors 'replace'
def norm constraint tensor var max norm norm axes None epsilon 1e- 07 ndim tensor var ndimif norm axes is not None sum over tuple norm axes elif ndim 2 sum over 0 elif ndim in [3 4 5] sum over tuple range 1 ndim else raise Value Error ' Unsupportedtensordimensionality{} Mustspecify`norm axes`' format ndim dtype np dtype theano config float X typenorms T sqrt T sum T sqr tensor var axis sum over keepdims True target norms T clip norms 0 dtype max norm constrained output tensor var * target norms / dtype epsilon + norms return constrained output
def norm constraint tensor var max norm norm axes None epsilon 1e- 07 ndim tensor var ndimif norm axes is not None sum over tuple norm axes elif ndim 2 sum over 0 elif ndim in [3 4 5] sum over tuple range 1 ndim else raise Value Error ' Unsupportedtensordimensionality{} Mustspecify`norm axes`' format ndim dtype np dtype theano config float X typenorms T sqrt T sum T sqr tensor var axis sum over keepdims True target norms T clip norms 0 dtype max norm constrained output tensor var * target norms / dtype epsilon + norms return constrained output
def DEFINE multi parser serializer name default help flag values FLAGS **args DEFINE flag Multi Flag parser serializer name default help **args flag values
def DEFINE multi parser serializer name default help flag values FLAGS **args DEFINE flag Multi Flag parser serializer name default help **args flag values
def test message hiding qtbot view with qtbot wait Signal view clear timer timeout view show message usertypes Message Level info 'test' assert not view messages
def get config config file repo ctx dir config file basic util strip path config file for changeset in reversed upper bounded changelog repo ctx changeset ctx repo changectx changeset for ctx file in changeset ctx files ctx file name basic util strip path ctx file if ctx file name config file return get named tmpfile from ctx changeset ctx ctx file dir return None
def find dest path comp key files src path None src files['src']dest files['dest']src type src['type']dest type dest['type']if src path is None src path src['path']sep table {'s 3 ' '/' 'local' os sep}if files['dir op'] rel path src path[len src['path'] ]else rel path src path split sep table[src type] [ -1 ]compare key rel path replace sep table[src type] '/' if files['use src name'] dest path dest['path']dest path + rel path replace sep table[src type] sep table[dest type] else dest path dest['path']return dest path compare key
def find dest path comp key files src path None src files['src']dest files['dest']src type src['type']dest type dest['type']if src path is None src path src['path']sep table {'s 3 ' '/' 'local' os sep}if files['dir op'] rel path src path[len src['path'] ]else rel path src path split sep table[src type] [ -1 ]compare key rel path replace sep table[src type] '/' if files['use src name'] dest path dest['path']dest path + rel path replace sep table[src type] sep table[dest type] else dest path dest['path']return dest path compare key
def process figure for rasterizing fig bbox inches restore fixed dpi None bbox inches restore bbox bbox inches restorerestore bbox r adjust bbox fig bbox inches fixed dpi return bbox inches r
def filter labels train label classes None if isinstance train theano tensor sharedvar Shared Variable train train get value borrow True if isinstance label theano tensor sharedvar Shared Variable label label get value borrow True if not isinstance train numpy ndarray or scipy sparse issparse train raise Type Error 'trainmustbeanumpyarray ascipysparsematrix oratheanosharedarray' if classes is not None label label[ classes]if scipy sparse issparse train idx label sum axis 1 nonzero [0 ]return train[idx] label[idx] condition label any axis 1 return tuple var compress condition axis 0 for var in train label
def Setup Shared Modules module dict output dict {}for module name module in module dict iteritems if module is None continueif Is Encodings Module module name output dict[module name] modulecontinueshared prefix Module Name Has Prefix module name SHARED MODULE PREFIXES banned prefix Module Name Has Prefix module name NOT SHARED MODULE PREFIXES if shared prefix and not banned prefix output dict[module name] modulereturn output dict
def cs int func func argtypes [CS PTR POINTER c uint ]func restype c intfunc errcheck check cs getreturn func
def reduce along dim img dim weights indicies other dim abs dim - 1 if other dim 0 weights np tile weights[np newaxis np newaxis] img shape[other dim] 1 1 3 out img img[ indicies ] * weights out img np sum out img axis 2 else weights np tile weights[ np newaxis np newaxis] 1 1 img shape[other dim] 3 out img img[indicies ] * weights out img np sum out img axis 1 return out img
def dashboard mark activities old context data dict check access 'dashboard mark activities old' context data dict model context['model']user id model User get context['user'] idmodel Dashboard get user id activity stream last viewed datetime datetime utcnow if not context get 'defer commit' model repo commit
def get related models m related models [subclass for subclass in m subclasses if issubclass subclass models Model ]related fields models set for f in m meta get fields include parents True include hidden True if f is relation and f related model is not None and not isinstance f related model str related fields models add f model related models append f related model opts m metaif opts proxy and m in related fields models related models append opts concrete model return related models
def parse identifier source start throw True start pass white source start end startif not end < len source if throw raise Syntax Error ' Missingidentifier ' return Noneif source[end] not in IDENTIFIER START if throw raise Syntax Error ' Invalididentifierstart "%s"' % source[end] return Noneend + 1while end < len source and source[end] in IDENTIFIER PART end + 1if not is valid lval source[start end] if throw raise Syntax Error ' Invalididentifiername "%s"' % source[start end] return Nonereturn source[start end] end
def virtual if salt utils is windows and 'ip get interface' in salt return virtualname return False
def get Version proj base 'twisted' if proj 'core' vfile os path join base ' version py' else vfile os path join base proj ' version py' ns {' name ' ' Nothingtoseehere'}execfile vfile ns return ns['version'] base
@before alldef start video server video source dir '{}/data/video' format settings TEST ROOT video server Video Source Http Service port num settings VIDEO SOURCE PORT video server config['root dir'] video source dirworld video source video server
def compute Nearest Neighbor username users distances []for user in users if user username distance manhattan users[user] users[username] distances append distance user distances sort return distances
@get '/scan/<taskid>/log' def scan log taskid json log messages list if taskid not in Data Store tasks logger warning '[%s] Invalidtask I Dprovidedtoscan log ' % taskid return jsonize {'success' False 'message' ' Invalidtask ID'} for time level message in Data Store current db execute 'SELEC Ttime level message FRO Mlogs WHER Etaskid ?ORDERB Yid ASC' taskid json log messages append {'time' time 'level' level 'message' message} logger debug '[%s] Retrievedscanlogmessages' % taskid return jsonize {'success' True 'log' json log messages}
def Put Secret io loop secret Get Secrets Manager Put Secret secret sys stdin read io loop stop
def drop redundant messages messages sorted messages sorted messages key len reverse True filtered messages set for message in sorted messages for filtered message in filtered messages if message in filtered message breakelse filtered messages add message return filtered messages
def extra job filters not yet run False running False finished False assert not not yet run and running or not yet run and finished or running and finished ' Cannotspecifymorethanonefiltertothisfunction'not queued ' SELEC Tjob id FRO Mafe host queue entries WHER Estatus "%s" ' % models Host Queue Entry Status QUEUED not finished ' SELEC Tjob id FRO Mafe host queue entries WHER Enotcomplete 'if not yet run where [ 'id NOTIN' + not queued ]elif running where [ ' id IN%s AND id IN%s ' % not queued not finished ]elif finished where [ 'id NOTIN' + not finished ]else return {}return {'where' where}
def get all mfa devices user name region None key None keyid None profile None user get user user name region key keyid profile if not user msg ' Username{ 0 }doesnotexist'log error msg format user name return Falseconn get conn region region key key keyid keyid profile profile try result conn get all mfa devices user name devices result['list mfa devices response']['list mfa devices result']['mfa devices']return devicesexcept boto exception Boto Server Error as e log debug e if ' Not Found' in e log info ' Couldnotfinduser{ 0 } ' format user name return []msg ' Failedtogetall MF Adevicesforuser{ 0 } 'log error msg format user name return False
def retry exception processor generic exception processor def yield new function from f def shim *args **kwargs exc processor cxt Nonewhile True gevent sleep 0 1 try return f *args **kwargs except Keyboard Interrupt raiseexcept exception info tuple Nonetry exception info tuple sys exc info exc processor cxt exception processor exception info tuple exc processor cxt exc processor cxt finally del exception info tuplereturn functools wraps f shim return yield new function from
def empty if not sysadmin key data errors context from ckan lib navl validators import emptyuser context get 'user' ignore auth context get 'ignore auth' if ignore auth or user and authz is sysadmin user returnempty key data errors context
def Create Default GUI app Class None if app Class is None import intpyappapp Class intpyapp Interactive Python Appapp Class Init Instance
def Deterministic name var model None model modelcontext model var name model name for name model deterministics append var model add random variable var return var
def make transform graph docs import inspectfrom textwrap import dedentfrom extern import sixfrom baseframe import Base Coordinate Frame frame transform graphisclass inspect isclasscoosys [item for item in six itervalues globals if isclass item and issubclass item Base Coordinate Frame ]graphstr frame transform graph to dot graph addnodes coosys docstr '\n Thediagrambelowshowsallofthecoordinatesystemsbuiltintothe\n`~astropy coordinates`package theiraliases usefulforconverting\nothercoordinatestothemusingattribute-styleaccess andthe\npre-definedtransformationsbetweenthem Theuserisfreeto\noverrideanyofthesetransformationsbydefiningnewtransformations\nbetweenthesesystems butthepre-definedtransformationsshouldbe\nsufficientfortypicalusage \n\n Thegraphalsoindicatesthepriorityforeachtransformationasa\nnumbernexttothearrow Theseprioritiesareusedtodecidethe\npreferredorderwhentwotransformationpathshavethesamenumber\nofsteps Theseprioritiesaredefinedsuchthatthepathwitha\n*smaller*totalpriorityisfavored \n\n\n graphviz \n\n'return dedent docstr + '' + graphstr replace '\n' '\n'
def dropout layer state before use noise trng proj tensor switch use noise state before * trng binomial state before shape p 0 5 n 1 dtype state before dtype state before * 0 5 return proj
@csrf exempt@require sync session@api handle error with jsondef model upload data session if 'models' not in data return Json Response Message Error ' Mustprovidemodels ' data {'saved model count' 0} status 400 try result save serialized models data['models'] src version session client version except Exception as e print ' Exceptionuploadingmodels inapi views %s %s %s' % e class name e message e args result {'error' e message 'saved model count' 0}session models uploaded + result['saved model count']session errors + result has key 'error' return Json Response result
def test scenario has name scenario Scenario from string SCENARIO 1 assert isinstance scenario Scenario assert equals scenario name ' Addingsomestudentstomyuniversitydatabase'
@taskdef test varnish ctx proc apiserver ctx wait False autoreload False try sleep 5 test module ctx module 'api/caching/tests/test caching py' finally proc kill
def reset return '< -- spam\n Content- Type text/html\n\n<bodybgcolor "#f 0 f 0 f 8 "><fontcolor "#f 0 f 0 f 8 "size "- 5 ">-->\n<bodybgcolor "#f 0 f 0 f 8 "><fontcolor "#f 0 f 0 f 8 "size "- 5 ">-->-->\n</font></font></font></script></object></blockquote></pre>\n</table></table></table></table></table></font></font></font>'
def install from tornado import ioloopassert not ioloop IO Loop initialized or ioloop IO Loop instance is IO Loop instance 'tornado IO Loopalreadyinitialized'if tornado version > 3 ioloop IO Loop configure ZMQIO Loop else ioloop IO Loop instance IO Loop instance
def LC f ring f ringk ring ngensyring ring clone symbols ring symbols[ k - 1 ] y yring gens[ 0 ]degf deg f lcf yring zerofor monom coeff in f iterterms if monom[ -1 ] degf lcf + coeff * y ** monom[ -1 ] return lcf
def LC f ring f ringk ring ngensyring ring clone symbols ring symbols[ k - 1 ] y yring gens[ 0 ]degf deg f lcf yring zerofor monom coeff in f iterterms if monom[ -1 ] degf lcf + coeff * y ** monom[ -1 ] return lcf
def assert samelines testcase text 1 text 2 msg None testcase assert Equal text 1 splitlines text 2 splitlines msg
def assert samelines testcase text 1 text 2 msg None testcase assert Equal text 1 splitlines text 2 splitlines msg
@require contextdef attachment specs get context attachment id rows attachment specs query context attachment id all result {row['key'] row['value'] for row in rows}return result
def build datastore path datastore name path return '[%s]%s' % datastore name path
def is Stacking Available ret Val Falseif PAYLOAD TECHNIQUE STACKED in kb injection data ret Val Trueelse for technique in get Public Type Members PAYLOAD TECHNIQUE True get Technique Data technique if and 'stacked' in ['title'] lower ret Val Truebreakreturn ret Val
def create trunk port network switch port name native vlan 1 allowed vlans 'all' debug Falsenew port Switch Port objects get or create port name port name mode 'trunk' trunk native vlan native vlan trunk allowed vlans allowed vlans network switch network switch if debug print new port
def magic set obj def decorator func is class isinstance obj six class types args varargs varkw defaults inspect getargspec func if not args or args[ 0 ] not in 'self' 'cls' 'klass' if is class replacement staticmethod func else replacement funcelif args[ 0 ] 'self' if is class replacement funcelse def replacement *args **kw return func obj *args **kw try replacement name func name except passelif is class replacement classmethod func else def replacement *args **kw return func obj class *args **kw try replacement name func name except passsetattr obj func name replacement return replacementreturn decorator
def open cover hass entity id None data {ATTR ENTITY ID entity id} if entity id else None hass services call DOMAIN SERVICE OPEN COVER data
def get overrides for ccx ccx overrides cache request cache get cache 'ccx-overrides' if ccx not in overrides cache overrides {}query Ccx Field Override objects filter ccx ccx for override in query block overrides overrides setdefault override location {} block overrides[override field] json loads override value block overrides[ override field + ' id' ] override idblock overrides[ override field + ' instance' ] overrideoverrides cache[ccx] overridesreturn overrides cache[ccx]
def usd value return Money value u'USD'
def usd value return Money value u'USD'
def get data url try request requests get url request raise for status except requests exceptions HTTP Error requests exceptions Connection Error as e raise Parse Error e items microdata get items request text for item in items if item itemtype [microdata URI 'http //schema org/ Recipe' ] return itemraise Parse Error ' Norecipedatafound'
def get data url try request requests get url request raise for status except requests exceptions HTTP Error requests exceptions Connection Error as e raise Parse Error e items microdata get items request text for item in items if item itemtype [microdata URI 'http //schema org/ Recipe' ] return itemraise Parse Error ' Norecipedatafound'
def get data url try request requests get url request raise for status except requests exceptions HTTP Error requests exceptions Connection Error as e raise Parse Error e items microdata get items request text for item in items if item itemtype [microdata URI 'http //schema org/ Recipe' ] return itemraise Parse Error ' Norecipedatafound'
def limit max file size f @functools wraps f def wrapper *args **kwargs test max file size constraints MAX FILE SIZ Eif constraints MAX FILE SIZE > sys maxsize test max file size 2 ** 30 + 2 with mock patch object constraints 'MAX FILE SIZE' test max file size return f *args **kwargs return wrapper
def make values bytes dict return {k six b v for k v in dict items }
def make values bytes dict return {k six b v for k v in dict items }
def get unique variable name candidates tf get collection tf Graph Keys GLOBAL VARIABLES name if not candidates raise Value Error ' Couldntfindvariable%s' % name for candidate in candidates if candidate op name name return candidateraise Value Error ' Variable%sdoesnotuniquelyidentifyavariable' name
def task info get context task id session None session session or get session query session query models Task Info query query filter by task id task id try task info ref query one except sa orm exc No Result Found LOG debug ' Task Infowasnotfoundfortaskwithid% task id s' {'task id' task id} task info ref Nonereturn task info ref
def task info get context task id session None session session or get session query session query models Task Info query query filter by task id task id try task info ref query one except sa orm exc No Result Found LOG debug ' Task Infowasnotfoundfortaskwithid% task id s' {'task id' task id} task info ref Nonereturn task info ref
def start server config args logger info ' Startservermode' global serverfrom glances server import Glances Serverserver Glances Server cached time args cached time config config args args print ' Glancesserverisrunningon{} {}' format args bind address args port if args password '' server add user args username args password server serve forever server server close
@mock ec 2 def test modify attribute block Device Mapping conn boto ec 2 connect to region u'us-east- 1 ' reservation conn run instances u'ami- 1234 abcd' instance reservation instances[ 0 ]with assert raises JSON Response Error as ex instance modify attribute u'block Device Mapping' {u'/dev/sda 1 ' True} dry run True ex exception reason should equal u' Dry Run Operation' ex exception status should equal 400 ex exception message should equal u' Anerroroccurred Dry Run Operation whencallingthe Modify Instance Attributeoperation Requestwouldhavesucceeded but Dry Runflagisset' instance modify attribute u'block Device Mapping' {u'/dev/sda 1 ' True} instance ec 2 backends[conn region name] get instance instance id instance block device mapping should have key u'/dev/sda 1 ' instance block device mapping[u'/dev/sda 1 '] delete on termination should be True
def get port context port id with context session begin subtransactions True try record context session query models v2 Port enable eagerloads False filter models v2 Port id startswith port id one return recordexcept exc No Result Found returnexcept exc Multiple Results Found LOG error LE ' Multipleportshaveport idstartingwith%s' port id return
@register simple tagdef get gravatar email size 80 rating 'g' default None protocol PROTOCOL gravatar protocols {'http' 'http //www' 'https' 'https //secure'}url '%s gravatar com/avatar/%s' % gravatar protocols[protocol] md 5 email strip lower encode 'utf- 8 ' hexdigest options {'s' size 'r' rating}if default options['d'] defaulturl '%s?%s' % url urlencode options return url replace '&' '&amp '
@fixturedef db global dbif db is None db orm new session factory 'sqlite /// memory ' echo True user orm User name getuser user servers append orm Server hub orm Hub server orm Server db add user db add hub db commit return db
def get datacenter id return config get cloud config value 'datacenter id' get configured provider opts search global False
def unique iterable seen set return [x for x in iterable if x not in seen and not seen add x ]
def static path root None mimetype None p os path join root or '' path p os path realpath p return cp lib static serve file p content type mimetype
def model pk lock func def decorator self *args **kwargs from taiga base utils db import get typename for model classpk self kwargs get self pk url kwarg None tn get typename for model class self get queryset model key '{ 0 } {1 }' format tn pk with advisory lock key return func self *args **kwargs return decorator
def model pk lock func def decorator self *args **kwargs from taiga base utils db import get typename for model classpk self kwargs get self pk url kwarg None tn get typename for model class self get queryset model key '{ 0 } {1 }' format tn pk with advisory lock key return func self *args **kwargs return decorator
def model pk lock func def decorator self *args **kwargs from taiga base utils db import get typename for model classpk self kwargs get self pk url kwarg None tn get typename for model class self get queryset model key '{ 0 } {1 }' format tn pk with advisory lock key return func self *args **kwargs return decorator
def indent elem level 0 i '\n' + level * '' if len elem if not elem text or not elem text strip elem text i + '' for e in elem indent e level + 1 if not e tail or not e tail strip e tail i + '' if not e tail or not e tail strip e tail ielif level and not elem tail or not elem tail strip elem tail i
def indent elem level 0 i '\n' + level * '' if len elem if not elem text or not elem text strip elem text i + '' for e in elem indent e level + 1 if not e tail or not e tail strip e tail i + '' if not e tail or not e tail strip e tail ielif level and not elem tail or not elem tail strip elem tail i
def Find Start Of Expression In Line line endpos depth startchar endchar for i in xrange endpos -1 -1 if line[i] endchar depth + 1elif line[i] startchar depth - 1if depth 0 return i 0 return -1 depth
def collect quantum ports bridges root helper ports []for bridge in bridges ovs ovs lib OVS Bridge bridge root helper ports + [port port name for port in ovs get vif ports ]return ports
def test parse no timezone d iso 8601 parse date '2007 - 01 - 01 T 08 00 00 ' assert d year 2007 assert d month 1 assert d day 1 assert d hour 8 assert d minute 0 assert d second 0 assert d microsecond 0 assert d tzinfo iso 8601 UTC
def test parse no timezone d iso 8601 parse date '2007 - 01 - 01 T 08 00 00 ' assert d year 2007 assert d month 1 assert d day 1 assert d hour 8 assert d minute 0 assert d second 0 assert d microsecond 0 assert d tzinfo iso 8601 UTC
def test parse no timezone d iso 8601 parse date '2007 - 01 - 01 T 08 00 00 ' assert d year 2007 assert d month 1 assert d day 1 assert d hour 8 assert d minute 0 assert d second 0 assert d microsecond 0 assert d tzinfo iso 8601 UTC
def get image files json image id files json get image files cache image id if files json return files jsonimage path store image layer path image id with tempfile Temporary File as tmp fobj for buf in store stream read image path tmp fobj write buf tmp fobj seek 0 files json json dumps get image files from fobj tmp fobj set image files cache image id files json return files json
def has key k trie return retrive branch k trie is not None
def has key k trie return retrive branch k trie is not None
def create api key name description enabled True stage Keys None region None key None keyid None profile None try stage Keys list if stage Keys is None else stage Keys conn get conn region region key key keyid keyid profile profile response conn create api key name name description description enabled enabled stage Keys stage Keys if not response return {'created' False}return {'created' True 'api Key' convert datetime str response }except Client Error as e return {'created' False 'error' salt utils boto 3 get error e }
def default Factory Method row Class data kw new Object row Class new Object dict update kw return new Object
def default Factory Method row Class data kw new Object row Class new Object dict update kw return new Object
@depends HAS ESX CLI def esxcli cmd cmd str host None username None password None protocol None port None esxi hosts None ret {}if esxi hosts if not isinstance esxi hosts list raise Command Execution Error "'esxi hosts'mustbealist " for esxi host in esxi hosts response salt utils vmware esxcli host username password cmd str protocol protocol port port esxi host esxi host if response['retcode'] 0 ret update {esxi host {' Error' response get 'stdout' }} else ret update {esxi host response} else response salt utils vmware esxcli host username password cmd str protocol protocol port port if response['retcode'] 0 ret update {host {' Error' response get 'stdout' }} else ret update {host response} return ret
@depends HAS ESX CLI def esxcli cmd cmd str host None username None password None protocol None port None esxi hosts None ret {}if esxi hosts if not isinstance esxi hosts list raise Command Execution Error "'esxi hosts'mustbealist " for esxi host in esxi hosts response salt utils vmware esxcli host username password cmd str protocol protocol port port esxi host esxi host if response['retcode'] 0 ret update {esxi host {' Error' response get 'stdout' }} else ret update {esxi host response} else response salt utils vmware esxcli host username password cmd str protocol protocol port port if response['retcode'] 0 ret update {host {' Error' response get 'stdout' }} else ret update {host response} return ret
def subrange exercise mult lb ub m Multiset Partition Traverser assert m count partitions mult m count partitions slow mult ma Multiset Partition Traverser mc Multiset Partition Traverser md Multiset Partition Traverser a it ma enum range mult lb ub b it part range filter multiset partitions taocp mult lb ub c it part range filter mc enum small mult ub lb sum mult d it part range filter md enum large mult lb 0 ub for sa sb sc sd in zip longest a it b it c it d it assert compare multiset states sa sb assert compare multiset states sa sc assert compare multiset states sa sd
def test pkl yaml src field try fd fn mkstemp close fd o Dum Dum o x 'a' 'b' 'c' serial save fn o yaml " pkl '" + fn + "'\n" loaded load yaml assert loaded x 'a' 'b' 'c' assert loaded yaml src yaml finally os remove fn
def initial has dependencies tree to process has dependencies []for n in tree nontips include self True if n not in to process has dependencies append n return has dependencies
def initial has dependencies tree to process has dependencies []for n in tree nontips include self True if n not in to process has dependencies append n return has dependencies
def initial has dependencies tree to process has dependencies []for n in tree nontips include self True if n not in to process has dependencies append n return has dependencies
@taskdef mongorestore ctx path drop False db settings DB NAM Eport settings DB POR Tcmd 'mongorestore--db{db}--port{port}' format db db port port pty True if settings DB USER cmd + '--username{ 0 }' format settings DB USER if settings DB PASS cmd + '--password{ 0 }' format settings DB PASS if drop cmd + '--drop'cmd + '' + path ctx run cmd echo True
@taskdef mongorestore ctx path drop False db settings DB NAM Eport settings DB POR Tcmd 'mongorestore--db{db}--port{port}' format db db port port pty True if settings DB USER cmd + '--username{ 0 }' format settings DB USER if settings DB PASS cmd + '--password{ 0 }' format settings DB PASS if drop cmd + '--drop'cmd + '' + path ctx run cmd echo True
@taskdef mongorestore ctx path drop False db settings DB NAM Eport settings DB POR Tcmd 'mongorestore--db{db}--port{port}' format db db port port pty True if settings DB USER cmd + '--username{ 0 }' format settings DB USER if settings DB PASS cmd + '--password{ 0 }' format settings DB PASS if drop cmd + '--drop'cmd + '' + path ctx run cmd echo True
def get preferred submodules if 'submodules' in modules db return modules db['submodules']mods ['numpy' 'scipy' 'sympy' 'pandas' 'networkx' 'statsmodels' 'matplotlib' 'sklearn' 'skimage' 'mpmath' 'os' 'PIL' ' Open GL' 'array' 'audioop' 'binascii' 'c Pickle' 'c String IO' 'cmath' 'collections' 'datetime' 'errno' 'exceptions' 'gc' 'imageop' 'imp' 'itertools' 'marshal' 'math' 'mmap' 'msvcrt' 'nt' 'operator' 'parser' 'rgbimg' 'signal' 'strop' 'sys' 'thread' 'time' 'wx' 'xxsubtype' 'zipimport' 'zlib' 'nose' ' Py Qt 4 ' ' Py Side' 'os path']submodules []for m in mods submods get submodules m submodules + submodsmodules db['submodules'] submodulesreturn submodules
def tokenize readline tokeneater printtoken try tokenize loop readline tokeneater except Stop Tokenizing pass
def tokenize readline tokeneater printtoken try tokenize loop readline tokeneater except Stop Tokenizing pass
@event u'manager startup' def init parsers manager for parser type in PARSER TYPES parsers[parser type] {}for p in plugin get plugins interface parser type + u' parser' parsers[parser type][p name replace u'parser ' u'' ] p instancefunc name u'parse ' + parser type default parsers[parser type] max iter parsers[parser type] items key lambda p getattr getattr p[ 1 ] func name u'priority' 0 [0 ]log debug u'settingdefault%sparserto%s options %s ' % parser type default parsers[parser type] parsers[parser type]
def place board queens r c d g if not queens solutions append None if len queens > len board returnif len queens > len r returnif len queens > len c returnif len queens > len d returnif len queens > len g returnfor ip pos in enumerate board ar ac ad ag attackmap[pos]attacked frozenset union ar ac ad ag nboard [b for b in board[ ip + 1 ] if b not in attacked ]place nboard queens[ 1 ] r - ar c - ac d - ad g - ag
def place board queens r c d g if not queens solutions append None if len queens > len board returnif len queens > len r returnif len queens > len c returnif len queens > len d returnif len queens > len g returnfor ip pos in enumerate board ar ac ad ag attackmap[pos]attacked frozenset union ar ac ad ag nboard [b for b in board[ ip + 1 ] if b not in attacked ]place nboard queens[ 1 ] r - ar c - ac d - ad g - ag
def integer rational reconstruction c m domain if c < 0 c + m r0 s0 m domain zero r1 s1 c domain one bound sqrt m / 2 while r1 > bound quo r0 // r1 r0 r1 r1 r0 - quo * r1 s0 s1 s1 s0 - quo * s1 if abs s1 > bound return Noneif s1 < 0 a b - r1 - s1 elif s1 > 0 a b r1 s1 else return Nonefield domain get field return field a / field b
def get random user agent return random choice user agents list
def is empty G return not any G adj values
def capture output environ start response application warnings warn 'wsgilib capture outputhasbeendeprecatedinfavorofwsgilib intercept output' Deprecation Warning 2 data []output String IO def replacement start response status headers exc info None if data data[ ] []data append status data append headers start response status headers exc info return output writeapp iter application environ replacement start response try for item in app iter output write item finally if hasattr app iter 'close' app iter close if not data data append None if len data < 2 data append None data append output getvalue return data
def Reverse Bits Int 64 v v v >> 1 & 6148914691236517205 v & 6148914691236517205 << 1 v v >> 2 & 3689348814741910323 v & 3689348814741910323 << 2 v v >> 4 & 1085102592571150095 v & 1085102592571150095 << 4 v v >> 8 & 71777214294589695 v & 71777214294589695 << 8 v v >> 16 & 281470681808895 v & 281470681808895 << 16 v int v >> 32 v << 32 & 18446744073709551615 L return v
@register tagdef render table parser token bits token split contents bits pop 0 table parser compile filter bits pop 0 template parser compile filter bits pop 0 if bits else None return Render Table Node table template
def get used lun ids for mappings mappings used luns set map lambda lun int lun['lun'] mappings used luns add 0 return used luns
def get used lun ids for mappings mappings used luns set map lambda lun int lun['lun'] mappings used luns add 0 return used luns
def label 2 rgb label image None colors None alpha 0 3 bg label -1 bg color 0 0 0 image alpha 1 kind 'overlay' if kind 'overlay' return label 2 rgb overlay label image colors alpha bg label bg color image alpha else return label 2 rgb avg label image bg label bg color
def create normal player session name password if throttle session maxlim 5 timeout 5 * 60 session msg '{R Youmadetoomanyconnectionattempts Tryagaininafewminutes {n' return Noneplayer authenticate username name password password if not player session msg ' Incorrectlogininformationgiven ' throttle session player Player DB objects get player from name name if player player at failed login session return Nonebans Server Config objects conf 'server bans' if bans and any tup[ 0 ] player name lower for tup in bans or any tup[ 2 ] match session address for tup in bans if tup[ 2 ] string '{r Youhavebeenbannedandcannotcontinuefromhere \n Ifyoufeelthisbanisinerror pleaseemailanadmin {x'session msg string session sessionhandler disconnect session ' Goodbye Disconnecting ' return Nonereturn player
def leftmost descendants node try treepos node treepositions except Attribute Error return []return [node[x] for x in treepos[ 1 ] if all y 0 for y in x ]
def Rebuild verbose 1 clsid To Typelib clear infos Get Generated Infos if verbose and len infos print ' Rebuildingcacheofgeneratedfilesfor CO Msupport 'for info in infos iid lcid major minor infoif verbose print ' Checking' Get Generated File Name *info try Add Module To Cache iid lcid major minor verbose 0 except print ' Couldnotaddmodule%s-%s %s' % info sys exc info [0 ] sys exc info [1 ] if verbose and len infos print ' Done ' Save Dicts
def find predicate seq for element in seq if predicate element return elementreturn None
def find predicate seq for element in seq if predicate element return elementreturn None
def keyboard role name rawtext text lineno inliner options {} content [] new element nodes literal rawtext text new element set class 'kbd' return [new element] []
def skill if auth permission format 'popup' return ''def prep r if r method 'create' return Falsereturn Trues 3 prep prepoutput s3 rest controller 'hrm' 'skill' return output
def dmp slice in f m n j u K if j < 0 or j > u raise Index Error '-%s< j<%sexpected got%s' % u u j if not u return dup slice f m n K f g dmp to dict f u {} for monom coeff in f items k monom[j]if k < m or k > n monom monom[ j] + 0 + monom[ j + 1 ] if monom in g g[monom] + coeffelse g[monom] coeffreturn dmp from dict g u K
def get preferred output encoding if hasattr locale u'LC MESSAGES' return locale getlocale locale LC MESSAGES [1 ] or locale getdefaultlocale [1 ] or u'ascii' return locale getdefaultlocale [1 ] or u'ascii'
def get rtd version version None version str get docs version version version positions 3 return 'latest' if version str 'dev' else 'stable-%s' % version str
def get rtd version version None version str get docs version version version positions 3 return 'latest' if version str 'dev' else 'stable-%s' % version str
def render modal workflow request html template js template template vars None response keyvars []if html template html render to string html template template vars or {} request request response keyvars append u"'html' %s" % json dumps html if js template js render to string js template template vars or {} request request response keyvars append u"'onload' %s" % js response text u'{%s}' % u' ' join response keyvars return Http Response response text content type u'text/javascript'
def get Alteration Lines file Name return archive get Text Lines get Alteration File file Name
def create UR Ls urls []for x in range 0 randint 20 100 name 'DEBUG API'if randint 0 5 5 name ''urls append name + '' join sample string ascii letters randint 10 20 return urls
def imresize img cropped width cropped height width scale float cropped width / img shape[ 1 ] height scale float cropped height / img shape[ 0 ] if len img shape 2 img np tile img[ np newaxis] 1 1 3 order np argsort [height scale width scale] scale [height scale width scale]out dim [cropped height cropped width]weights [0 0]indicies [0 0]for i in range 0 2 weights[i] indicies[i] contribution img shape[i] out dim[i] scale[i] for i in range 0 len order img reduce along dim img order[i] weights[order[i]] indicies[order[i]] return img
def imresize img cropped width cropped height width scale float cropped width / img shape[ 1 ] height scale float cropped height / img shape[ 0 ] if len img shape 2 img np tile img[ np newaxis] 1 1 3 order np argsort [height scale width scale] scale [height scale width scale]out dim [cropped height cropped width]weights [0 0]indicies [0 0]for i in range 0 2 weights[i] indicies[i] contribution img shape[i] out dim[i] scale[i] for i in range 0 len order img reduce along dim img order[i] weights[order[i]] indicies[order[i]] return img
def get server type doc if not doc get 'ok' return SERVER TYPE Unknownif doc get 'isreplicaset' return SERVER TYPE RS Ghostelif doc get 'set Name' if doc get 'hidden' return SERVER TYPE RS Otherelif doc get 'ismaster' return SERVER TYPE RS Primaryelif doc get 'secondary' return SERVER TYPE RS Secondaryelif doc get 'arbiter Only' return SERVER TYPE RS Arbiterelse return SERVER TYPE RS Otherelif doc get 'msg' 'isdbgrid' return SERVER TYPE Mongoselse return SERVER TYPE Standalone
def get server type doc if not doc get 'ok' return SERVER TYPE Unknownif doc get 'isreplicaset' return SERVER TYPE RS Ghostelif doc get 'set Name' if doc get 'hidden' return SERVER TYPE RS Otherelif doc get 'ismaster' return SERVER TYPE RS Primaryelif doc get 'secondary' return SERVER TYPE RS Secondaryelif doc get 'arbiter Only' return SERVER TYPE RS Arbiterelse return SERVER TYPE RS Otherelif doc get 'msg' 'isdbgrid' return SERVER TYPE Mongoselse return SERVER TYPE Standalone
def get code w scope data position obj end opts element name code end position + UNPACK INT data[position position + 4 ] [0 ] code position get string data position + 4 code end opts element name scope position get object data position code end opts element name if position code end raise Invalid BSON 'scopeoutsideofjavascriptcodeboundaries' return Code code scope position
def subtract d1 d2 warnings warn 'deprecated' Deprecation Warning if len d1 > len d2 for k in d2 keys if d1 has key k del d1 [k]else for k in d1 keys if d2 has key k del d1 [k]return d1
def load base library library dict library update read style directory BASE LIBRARY PATH return library
def load base library library dict library update read style directory BASE LIBRARY PATH return library
def get dynamic link map for delete False if getattr frappe local 'dynamic link map' None None or frappe flags in test dynamic link map {}for df in get dynamic links meta frappe get meta df parent if meta issingle dynamic link map setdefault meta name [] append df else links frappe db sql list 'selectdistinct{options}from`tab{parent}`' format **df for doctype in links dynamic link map setdefault doctype [] append df frappe local dynamic link map dynamic link mapreturn frappe local dynamic link map
def set time server time server 'time apple com' cmd 'systemsetup-setnetworktimeserver{ 0 }' format time server salt utils mac utils execute return success cmd return time server in get time server
@pytest mark django dbdef test cross sell plugin type shop get default shop supplier get default supplier product create product 'test-sku' shop shop supplier supplier stock behavior Stock Behavior UNSTOCKED context get jinja context product product type counts Product Cross Sell Type RELATED 1 Product Cross Sell Type RECOMMENDED 2 Product Cross Sell Type BOUGHT WITH 3 for type count in type counts create cross sell products product shop supplier type count assert Product Cross Sell objects filter product 1 product type type count count for type count in type counts assert len list product helpers get product cross sells context product type count count
@pytest mark django dbdef test cross sell plugin type shop get default shop supplier get default supplier product create product 'test-sku' shop shop supplier supplier stock behavior Stock Behavior UNSTOCKED context get jinja context product product type counts Product Cross Sell Type RELATED 1 Product Cross Sell Type RECOMMENDED 2 Product Cross Sell Type BOUGHT WITH 3 for type count in type counts create cross sell products product shop supplier type count assert Product Cross Sell objects filter product 1 product type type count count for type count in type counts assert len list product helpers get product cross sells context product type count count
def get http expiry Expirestype num if Expirestype 'd' expire date datetime datetime now + datetime timedelta days num elif Expirestype 'h' expire date datetime datetime now + datetime timedelta hours num else expire date datetime datetime now + datetime timedelta minutes num return expire date strftime '%a %d%b%Y%H %M %SGMT'
def get http expiry Expirestype num if Expirestype 'd' expire date datetime datetime now + datetime timedelta days num elif Expirestype 'h' expire date datetime datetime now + datetime timedelta hours num else expire date datetime datetime now + datetime timedelta minutes num return expire date strftime '%a %d%b%Y%H %M %SGMT'
def build pdf branch os chdir os path join gitdname 'statsmodels' 'docs' sphinx dir os path join virtual dir 'bin' retcode subprocess call '' join ['make' 'latexpdf' 'SPHINXBUILD ' + sphinx dir + '/sphinx-build' ] shell True if retcode 0 msg ' Couldnotbuildthepdfdocsforbranch%s' % branch raise Exception msg os chdir dname
def build pdf branch os chdir os path join gitdname 'statsmodels' 'docs' sphinx dir os path join virtual dir 'bin' retcode subprocess call '' join ['make' 'latexpdf' 'SPHINXBUILD ' + sphinx dir + '/sphinx-build' ] shell True if retcode 0 msg ' Couldnotbuildthepdfdocsforbranch%s' % branch raise Exception msg os chdir dname
def build pdf branch os chdir os path join gitdname 'statsmodels' 'docs' sphinx dir os path join virtual dir 'bin' retcode subprocess call '' join ['make' 'latexpdf' 'SPHINXBUILD ' + sphinx dir + '/sphinx-build' ] shell True if retcode 0 msg ' Couldnotbuildthepdfdocsforbranch%s' % branch raise Exception msg os chdir dname
def svd a full matrices 1 compute uv 1 return SVD full matrices compute uv a
def svd a full matrices 1 compute uv 1 return SVD full matrices compute uv a
def dt to epoch ns dt series index pd to datetime dt series values if index tzinfo is None index index tz localize 'UTC' else index index tz convert 'UTC' return index view np int 64
def positive int list argument if ' ' in argument entries argument split ' ' else entries argument split return [positive int entry for entry in entries]
def positive int list argument if ' ' in argument entries argument split ' ' else entries argument split return [positive int entry for entry in entries]
def is current user capable api name user get current user if not user sys stderr write 'userisnotloggedin-cannotuseapi' + api name + '\n' return Falseemail user email return is user capable email api name
def make fastq single in fasta quals out fp label transform split lib transform outfile open out fp 'w' for rec seq id in iter fastq in fasta quals label transform outfile write rec + '\n' outfile close