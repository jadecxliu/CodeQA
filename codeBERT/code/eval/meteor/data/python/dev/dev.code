@pytest mark django dbdef test vfolder with no filter rules vfolder item {'name' 'whatever' 'priority' 4 'is public' True 'filter rules' ''}with pytest raises Validation Error as excinfo Virtual Folder objects create **vfolder item assert u' Somefilteringrulemustbespecified ' in str excinfo value vfolder item['filter rules'] 'FOO'vf Virtual Folder objects create **vfolder item vf filter rules ''with pytest raises Validation Error as excinfo vf save assert u' Somefilteringrulemustbespecified ' in str excinfo value
def safe range *args rng xrange *args if len rng > MAX RANGE raise Overflow Error 'rangetoobig maximumsizeforrangeis%d' % MAX RANGE return rng
def safe range *args rng xrange *args if len rng > MAX RANGE raise Overflow Error 'rangetoobig maximumsizeforrangeis%d' % MAX RANGE return rng
def safe range *args rng xrange *args if len rng > MAX RANGE raise Overflow Error 'rangetoobig maximumsizeforrangeis%d' % MAX RANGE return rng
def not allowed func def inner self *args **kwargs raise Not Implemented Error '%sisnotallowedon%sinstances' % func type self name return inner
def snapshot id to name name snap id strict False runas None name sdecode name if not re match GUID REGEX snap id raise Salt Invocation Error u' Snapshot ID"{ 0 }"isnota GUID' format sdecode snap id info prlctl 'snapshot-list' [name '--id' snap id] runas runas if not len info raise Salt Invocation Error u' Nosnapshotsfor VM"{ 0 }"have ID"{ 1 }"' format name snap id try data yaml safe load info except yaml YAML Error as err log warning ' Couldnotinterpretsnapshotdatareturnedfromprlctl {0 }' format err data {}if isinstance data dict snap name data get ' Name' '' if snap name is None snap name ''else log warning u' Couldnotinterpretsnapshotdatareturnedfromprlctl dataisnotformedasadictionary {0 }' format data snap name ''if not snap name and strict raise Salt Invocation Error u' Couldnotfindasnapshotnameforsnapshot ID"{ 0 }"of VM"{ 1 }"' format snap id name return sdecode snap name
def Get Most Recent Client client list token None last rdfvalue RDF Datetime 0 client urn Nonefor client in aff 4 FACTORY Multi Open client list token token client last client Get client Schema LAST if client last > last last client lastclient urn client urnreturn client urn
def Get Most Recent Client client list token None last rdfvalue RDF Datetime 0 client urn Nonefor client in aff 4 FACTORY Multi Open client list token token client last client Get client Schema LAST if client last > last last client lastclient urn client urnreturn client urn
def Get Most Recent Client client list token None last rdfvalue RDF Datetime 0 client urn Nonefor client in aff 4 FACTORY Multi Open client list token token client last client Get client Schema LAST if client last > last last client lastclient urn client urnreturn client urn
@register simple tagdef static path return staticfiles storage url path
@register simple tagdef static path return staticfiles storage url path
def set mindays name days return False
def set mindays name days return False
def get File Names By File Paths plugin File Paths file Names []for plugin File Path in plugin File Paths plugin Basename os path basename plugin File Path plugin Basename get Until Dot plugin Basename file Names append plugin Basename return file Names
def get File Names By File Paths plugin File Paths file Names []for plugin File Path in plugin File Paths plugin Basename os path basename plugin File Path plugin Basename get Until Dot plugin Basename file Names append plugin Basename return file Names
def get task data task id result Async Result task id state info result state result info if state 'PENDING' raise Task Not Found task id if 'task name' not in info raise Task Not Found task id try task celery app tasks[info['task name']]except Key Error raise Task Not Found task id return task state info
def get task data task id result Async Result task id state info result state result info if state 'PENDING' raise Task Not Found task id if 'task name' not in info raise Task Not Found task id try task celery app tasks[info['task name']]except Key Error raise Task Not Found task id return task state info
def get task data task id result Async Result task id state info result state result info if state 'PENDING' raise Task Not Found task id if 'task name' not in info raise Task Not Found task id try task celery app tasks[info['task name']]except Key Error raise Task Not Found task id return task state info
def present name password permission ret {'name' name 'result' True 'changes' {} 'comment' ''}users salt ['drac list users'] if opts ['test'] if name in users ret['comment'] '`{ 0 }`alreadyexists' format name else ret['comment'] '`{ 0 }`willbecreated' format name ret['changes'] {name 'willbecreated'}return retif name in users ret['comment'] '`{ 0 }`alreadyexists' format name elif salt ['drac create user'] name password permission users ret['comment'] '`{ 0 }`usercreated' format name ret['changes'] {name 'newusercreated'}else ret['comment'] ' Unabletocreateuser'ret['result'] Falsereturn ret
def present name password permission ret {'name' name 'result' True 'changes' {} 'comment' ''}users salt ['drac list users'] if opts ['test'] if name in users ret['comment'] '`{ 0 }`alreadyexists' format name else ret['comment'] '`{ 0 }`willbecreated' format name ret['changes'] {name 'willbecreated'}return retif name in users ret['comment'] '`{ 0 }`alreadyexists' format name elif salt ['drac create user'] name password permission users ret['comment'] '`{ 0 }`usercreated' format name ret['changes'] {name 'newusercreated'}else ret['comment'] ' Unabletocreateuser'ret['result'] Falsereturn ret
def present name password permission ret {'name' name 'result' True 'changes' {} 'comment' ''}users salt ['drac list users'] if opts ['test'] if name in users ret['comment'] '`{ 0 }`alreadyexists' format name else ret['comment'] '`{ 0 }`willbecreated' format name ret['changes'] {name 'willbecreated'}return retif name in users ret['comment'] '`{ 0 }`alreadyexists' format name elif salt ['drac create user'] name password permission users ret['comment'] '`{ 0 }`usercreated' format name ret['changes'] {name 'newusercreated'}else ret['comment'] ' Unabletocreateuser'ret['result'] Falsereturn ret
def present name password permission ret {'name' name 'result' True 'changes' {} 'comment' ''}users salt ['drac list users'] if opts ['test'] if name in users ret['comment'] '`{ 0 }`alreadyexists' format name else ret['comment'] '`{ 0 }`willbecreated' format name ret['changes'] {name 'willbecreated'}return retif name in users ret['comment'] '`{ 0 }`alreadyexists' format name elif salt ['drac create user'] name password permission users ret['comment'] '`{ 0 }`usercreated' format name ret['changes'] {name 'newusercreated'}else ret['comment'] ' Unabletocreateuser'ret['result'] Falsereturn ret
def ext pillar minion id pillar command try data yaml safe load salt ['cmd run'] '{ 0 }{ 1 }' format command minion id data data['parameters']return dataexcept Exception log critical 'YAM Ldatafrom{ 0 }failedtoparse' format command return {}
def ext pillar minion id pillar command try data yaml safe load salt ['cmd run'] '{ 0 }{ 1 }' format command minion id data data['parameters']return dataexcept Exception log critical 'YAM Ldatafrom{ 0 }failedtoparse' format command return {}
def ext pillar minion id pillar command try data yaml safe load salt ['cmd run'] '{ 0 }{ 1 }' format command minion id data data['parameters']return dataexcept Exception log critical 'YAM Ldatafrom{ 0 }failedtoparse' format command return {}
def get xml encoding source with get xml iterator source as iterator start tag data pos six next iterator if not start or tag u'xml' raise IO Error u' Invalid XM Lfile' return data get u'encoding' or u'utf- 8 '
def get xml encoding source with get xml iterator source as iterator start tag data pos six next iterator if not start or tag u'xml' raise IO Error u' Invalid XM Lfile' return data get u'encoding' or u'utf- 8 '
def get xml encoding source with get xml iterator source as iterator start tag data pos six next iterator if not start or tag u'xml' raise IO Error u' Invalid XM Lfile' return data get u'encoding' or u'utf- 8 '
@register filterdef bootstrap message classes message extra tags Nonetry extra tags message extra tagsexcept Attribute Error passif not extra tags extra tags u''classes [extra tags]try level message levelexcept Attribute Error passelse try classes append MESSAGE LEVEL CLASSES[level] except Key Error classes append u'alertalert-danger' return u'' join classes strip
def To Sentences paragraph include token True s gen Snippet Gen paragraph SENTENCE START SENTENCE END include token return [s for s in s gen]
def To Sentences paragraph include token True s gen Snippet Gen paragraph SENTENCE START SENTENCE END include token return [s for s in s gen]
def test multi constructor obj try load 'a obj decimal Decimal{ 1 }' except Type Error as e assert str e ' Receivednonstringobject 1 askeyinmapping ' passexcept Exception as e error msg ' Gottheunexpectederror %s' % e reraise as Value Error error msg
def test multi constructor obj try load 'a obj decimal Decimal{ 1 }' except Type Error as e assert str e ' Receivednonstringobject 1 askeyinmapping ' passexcept Exception as e error msg ' Gottheunexpectederror %s' % e reraise as Value Error error msg
def test multi constructor obj try load 'a obj decimal Decimal{ 1 }' except Type Error as e assert str e ' Receivednonstringobject 1 askeyinmapping ' passexcept Exception as e error msg ' Gottheunexpectederror %s' % e reraise as Value Error error msg
def list Friends fs sep ' ' lock True get Last Message False p Py Fred 'ch xtin skypingalfred find' False for f in fs img imgtype get Avatar f[ 0 ] p add Item 'skypename ' + f[ 0 ] f[ 0 ] + sep f[ 0 ] + ' ' + f[ 1 ] + ' ' if f[ 1 ] else ' ' + f[ 2 ] + ' ' if f[ 2 ] else '' get Last Message Formated f[ 0 ] if get Last Message else '' not lock f[ 0 ] + sep img imgtype if len p items 0 p add Item 'skypename notfound' 'skypeupdate' ' No Skypefriendfound ' + tg ' Maybetryupdatingyourfriends? Hitentertodoso ' True return p to XML
def list Friends fs sep ' ' lock True get Last Message False p Py Fred 'ch xtin skypingalfred find' False for f in fs img imgtype get Avatar f[ 0 ] p add Item 'skypename ' + f[ 0 ] f[ 0 ] + sep f[ 0 ] + ' ' + f[ 1 ] + ' ' if f[ 1 ] else ' ' + f[ 2 ] + ' ' if f[ 2 ] else '' get Last Message Formated f[ 0 ] if get Last Message else '' not lock f[ 0 ] + sep img imgtype if len p items 0 p add Item 'skypename notfound' 'skypeupdate' ' No Skypefriendfound ' + tg ' Maybetryupdatingyourfriends? Hitentertodoso ' True return p to XML
def list Friends fs sep ' ' lock True get Last Message False p Py Fred 'ch xtin skypingalfred find' False for f in fs img imgtype get Avatar f[ 0 ] p add Item 'skypename ' + f[ 0 ] f[ 0 ] + sep f[ 0 ] + ' ' + f[ 1 ] + ' ' if f[ 1 ] else ' ' + f[ 2 ] + ' ' if f[ 2 ] else '' get Last Message Formated f[ 0 ] if get Last Message else '' not lock f[ 0 ] + sep img imgtype if len p items 0 p add Item 'skypename notfound' 'skypeupdate' ' No Skypefriendfound ' + tg ' Maybetryupdatingyourfriends? Hitentertodoso ' True return p to XML
def list Friends fs sep ' ' lock True get Last Message False p Py Fred 'ch xtin skypingalfred find' False for f in fs img imgtype get Avatar f[ 0 ] p add Item 'skypename ' + f[ 0 ] f[ 0 ] + sep f[ 0 ] + ' ' + f[ 1 ] + ' ' if f[ 1 ] else ' ' + f[ 2 ] + ' ' if f[ 2 ] else '' get Last Message Formated f[ 0 ] if get Last Message else '' not lock f[ 0 ] + sep img imgtype if len p items 0 p add Item 'skypename notfound' 'skypeupdate' ' No Skypefriendfound ' + tg ' Maybetryupdatingyourfriends? Hitentertodoso ' True return p to XML
def prob quantize cdf old binsx binsy cdf binsx np asarray binsx binsy np asarray binsy nx len binsx - 1 ny len binsy - 1 probs np nan * np ones nx ny for xind in range 1 nx + 1 for yind in range 1 ny + 1 upper binsx[xind] binsy[yind] lower binsx[ xind - 1 ] binsy[ yind - 1 ] probs[ xind - 1 yind - 1 ] prob bv rectangle lower upper cdf assert not np isnan probs any return probs
def prob quantize cdf old binsx binsy cdf binsx np asarray binsx binsy np asarray binsy nx len binsx - 1 ny len binsy - 1 probs np nan * np ones nx ny for xind in range 1 nx + 1 for yind in range 1 ny + 1 upper binsx[xind] binsy[yind] lower binsx[ xind - 1 ] binsy[ yind - 1 ] probs[ xind - 1 yind - 1 ] prob bv rectangle lower upper cdf assert not np isnan probs any return probs
def prob quantize cdf old binsx binsy cdf binsx np asarray binsx binsy np asarray binsy nx len binsx - 1 ny len binsy - 1 probs np nan * np ones nx ny for xind in range 1 nx + 1 for yind in range 1 ny + 1 upper binsx[xind] binsy[yind] lower binsx[ xind - 1 ] binsy[ yind - 1 ] probs[ xind - 1 yind - 1 ] prob bv rectangle lower upper cdf assert not np isnan probs any return probs
def Retain Vertical Spacing Between Tokens cur tok prev tok if prev tok is None returnif prev tok is string prev lineno prev tok lineno + prev tok value count u'\n' elif prev tok is pseudo paren if not prev tok previous token is multiline string prev lineno prev tok previous token linenoelse prev lineno prev tok linenoelse prev lineno prev tok linenoif cur tok is comment cur lineno cur tok lineno - cur tok value count u'\n' else cur lineno cur tok linenocur tok Adjust Newlines Before cur lineno - prev lineno
def Retain Vertical Spacing Between Tokens cur tok prev tok if prev tok is None returnif prev tok is string prev lineno prev tok lineno + prev tok value count u'\n' elif prev tok is pseudo paren if not prev tok previous token is multiline string prev lineno prev tok previous token linenoelse prev lineno prev tok linenoelse prev lineno prev tok linenoif cur tok is comment cur lineno cur tok lineno - cur tok value count u'\n' else cur lineno cur tok linenocur tok Adjust Newlines Before cur lineno - prev lineno
def scan multilang tokens module elem tokenizer ruby lexer Ruby Multi Lang Lexer tokens parser ruby parser Parser tokenizer 'RHTML' parse tree parser parse parser cix produce element Tree contents cix parse tree module elem csl tokens tokenizer get csl tokens return csl tokens tokenizer has ruby code
def scan multilang tokens module elem tokenizer ruby lexer Ruby Multi Lang Lexer tokens parser ruby parser Parser tokenizer 'RHTML' parse tree parser parse parser cix produce element Tree contents cix parse tree module elem csl tokens tokenizer get csl tokens return csl tokens tokenizer has ruby code
def osd discover return ceph cfg osd discover
def parse ssl 2 message enforce length True try record size types Sslv 2 Record from stream message if enforce length and size len message return Nonereturn recordexcept Index Error Value Error struct error as e return None
def has roles var roles match all False var roles getattr var tag 'roles' [] matches any isinstance var role role class for var role in var roles for role in roles return all matches if match all else any matches
def has roles var roles match all False var roles getattr var tag 'roles' [] matches any isinstance var role role class for var role in var roles for role in roles return all matches if match all else any matches
def has roles var roles match all False var roles getattr var tag 'roles' [] matches any isinstance var role role class for var role in var roles for role in roles return all matches if match all else any matches
def has roles var roles match all False var roles getattr var tag 'roles' [] matches any isinstance var role role class for var role in var roles for role in roles return all matches if match all else any matches
def Drt Variable Expression variable if is indvar variable name return Drt Individual Variable Expression variable elif is funcvar variable name return Drt Function Variable Expression variable elif is eventvar variable name return Drt Event Variable Expression variable else return Drt Constant Expression variable
def Drt Variable Expression variable if is indvar variable name return Drt Individual Variable Expression variable elif is funcvar variable name return Drt Function Variable Expression variable elif is eventvar variable name return Drt Event Variable Expression variable else return Drt Constant Expression variable
def compare acl current desired region key keyid profile ocid get canonical id region key keyid profile return utils ['boto 3 json objs equal'] current acl to grant desired ocid
def execute cmd list process input None check exit code True cmd '' join cmd list logging debug " Executingcommand '%s'" % cmd env os environ copy obj subprocess Popen cmd shell True stdin subprocess PIPE stdout subprocess PIPE stderr subprocess PIPE env env result Noneif process input is not None result obj communicate process input else result obj communicate obj stdin close if obj returncode logging debug ' Resultwas%s' % obj returncode if check exit code and obj returncode 0 stdout stderr resultraise Process Execution Error exit code obj returncode stdout stdout stderr stderr cmd cmd time sleep 0 1 return result
def execute cmd list process input None check exit code True cmd '' join cmd list logging debug " Executingcommand '%s'" % cmd env os environ copy obj subprocess Popen cmd shell True stdin subprocess PIPE stdout subprocess PIPE stderr subprocess PIPE env env result Noneif process input is not None result obj communicate process input else result obj communicate obj stdin close if obj returncode logging debug ' Resultwas%s' % obj returncode if check exit code and obj returncode 0 stdout stderr resultraise Process Execution Error exit code obj returncode stdout stdout stderr stderr cmd cmd time sleep 0 1 return result
def glob obj *args **kwargs return obj glob *args **kwargs
def glob obj *args **kwargs return obj glob *args **kwargs
def glob obj *args **kwargs return obj glob *args **kwargs
def glob obj *args **kwargs return obj glob *args **kwargs
def call fp intrinsic builder name args mod builder moduleintr lc Function intrinsic mod name [a type for a in args] return builder call intr args
def call fp intrinsic builder name args mod builder moduleintr lc Function intrinsic mod name [a type for a in args] return builder call intr args
def create verifier for dsa signature hash method public key return public key verifier signature hash method
def create verifier for dsa signature hash method public key return public key verifier signature hash method
def create verifier for dsa signature hash method public key return public key verifier signature hash method
def absent name ret {'name' name 'changes' {} 'result' True 'comment' ''}grp info salt ['group info'] name if grp info if opts ['test'] ret['result'] Noneret['comment'] ' Group{ 0 }issetforremoval' format name return retret['result'] salt ['group delete'] name if ret['result'] ret['changes'] {name ''}ret['comment'] ' Removedgroup{ 0 }' format name return retelse ret['comment'] ' Failedtoremovegroup{ 0 }' format name return retelse ret['comment'] ' Groupnotpresent'return ret
def absent name ret {'name' name 'changes' {} 'result' True 'comment' ''}grp info salt ['group info'] name if grp info if opts ['test'] ret['result'] Noneret['comment'] ' Group{ 0 }issetforremoval' format name return retret['result'] salt ['group delete'] name if ret['result'] ret['changes'] {name ''}ret['comment'] ' Removedgroup{ 0 }' format name return retelse ret['comment'] ' Failedtoremovegroup{ 0 }' format name return retelse ret['comment'] ' Groupnotpresent'return ret
def process caption caption tokenized caption [FLAGS start word]tokenized caption extend nltk tokenize word tokenize caption lower tokenized caption append FLAGS end word return tokenized caption
def process caption caption tokenized caption [FLAGS start word]tokenized caption extend nltk tokenize word tokenize caption lower tokenized caption append FLAGS end word return tokenized caption
def bzr wc version test 'bzr wc version'wt '%s-test-%s' % DIR test puts magenta ' Executingtest %s' % test from fabric api import runfrom fabtools files import is dirfrom fabtools import requireassert not is dir wt require bazaar working copy REMOTE URL wt version '2 ' assert wc exists wt assert run 'bzrrevno%s' % wt '2 '
def bzr wc version test 'bzr wc version'wt '%s-test-%s' % DIR test puts magenta ' Executingtest %s' % test from fabric api import runfrom fabtools files import is dirfrom fabtools import requireassert not is dir wt require bazaar working copy REMOTE URL wt version '2 ' assert wc exists wt assert run 'bzrrevno%s' % wt '2 '
def get template path option key with salt utils fopen path 'r' as template f template deserialize template f info option key template get 'description' '' template return info
def get template path option key with salt utils fopen path 'r' as template f template deserialize template f info option key template get 'description' '' template return info
def get template path option key with salt utils fopen path 'r' as template f template deserialize template f info option key template get 'description' '' template return info
def parse timedelta text td kwargs {}for match in PARSE TD RE finditer text value unit match group 'value' match group 'unit' try unit key PARSE TD KW MAP[unit]except Key Error raise Value Error 'invalidtimeunit%r expectedoneof%r' % unit PARSE TD KW MAP keys try value float value except Value Error raise Value Error 'invalidtimevalueforunit%r %r' % unit value td kwargs[unit key] valuereturn timedelta **td kwargs
def test prefix class Table A tables Table name tables Column class Meta prefix u'x'table Table A [] html table as html build request u'/' assert u'x' table prefix assert u'xsort name' in html class Table B tables Table last name tables Column assert u'' Table B [] prefix assert u'x' Table B [] prefix u'x' prefix table Table B [] table prefix u'x-'html table as html build request u'/' assert u'x-' table prefix assert u'x-sort last name' in html
def test prefix class Table A tables Table name tables Column class Meta prefix u'x'table Table A [] html table as html build request u'/' assert u'x' table prefix assert u'xsort name' in html class Table B tables Table last name tables Column assert u'' Table B [] prefix assert u'x' Table B [] prefix u'x' prefix table Table B [] table prefix u'x-'html table as html build request u'/' assert u'x-' table prefix assert u'x-sort last name' in html
def test prefix class Table A tables Table name tables Column class Meta prefix u'x'table Table A [] html table as html build request u'/' assert u'x' table prefix assert u'xsort name' in html class Table B tables Table last name tables Column assert u'' Table B [] prefix assert u'x' Table B [] prefix u'x' prefix table Table B [] table prefix u'x-'html table as html build request u'/' assert u'x-' table prefix assert u'x-sort last name' in html
def register plugin class base class file path class name plugin dir os path dirname os path realpath file path register plugin path plugin dir module name get plugin module file path if module name is None return Nonemodule imp load source module name file path klass getattr module class name None if not klass raise Exception ' Pluginfile"%s"doesn\'texposeclassnamed"%s"' % file path class name register plugin base class klass return klass
def register plugin class base class file path class name plugin dir os path dirname os path realpath file path register plugin path plugin dir module name get plugin module file path if module name is None return Nonemodule imp load source module name file path klass getattr module class name None if not klass raise Exception ' Pluginfile"%s"doesn\'texposeclassnamed"%s"' % file path class name register plugin base class klass return klass
def get rand pass CRYPTOR gen rand pass 20
def get rand pass CRYPTOR gen rand pass 20
def setup platform hass config add devices discovery info None litejet hass data['litejet system']devices []for i in litejet button switches name litejet get switch name i if not litejet is ignored hass name devices append Lite Jet Switch hass litejet i name add devices devices
def setup platform hass config add devices discovery info None litejet hass data['litejet system']devices []for i in litejet button switches name litejet get switch name i if not litejet is ignored hass name devices append Lite Jet Switch hass litejet i name add devices devices
def add Cylinder Output By End Start end Z inradius Complex outputs sides start top Over Bottom 1 0 inradius Vector 3 inradius Complex real inradius Complex imag 0 5 * abs end Z - start z cylinder Output get Geometry Output inradius sides top Over Bottom vertexes matrix get Vertexes cylinder Output if end Z < start z for vertex in vertexes vertex z - vertex z translation Vector 3 start x start y inradius z + min start z end Z euclidean translate Vector 3 Path vertexes translation outputs append cylinder Output
def add Cylinder Output By End Start end Z inradius Complex outputs sides start top Over Bottom 1 0 inradius Vector 3 inradius Complex real inradius Complex imag 0 5 * abs end Z - start z cylinder Output get Geometry Output inradius sides top Over Bottom vertexes matrix get Vertexes cylinder Output if end Z < start z for vertex in vertexes vertex z - vertex z translation Vector 3 start x start y inradius z + min start z end Z euclidean translate Vector 3 Path vertexes translation outputs append cylinder Output
def test empty lists Chart chart Chart chart add 'A' [1 2] chart add 'B' [] if not chart dual chart x labels 'red' 'green' 'blue' q chart render pyquery assert len q ' legend' 2
def d3 write fct path *args **kwargs formatter Py Dot Formatter *args **kwargs graph formatter fct graph write dot path
def d3 write fct path *args **kwargs formatter Py Dot Formatter *args **kwargs graph formatter fct graph write dot path
def d3 write fct path *args **kwargs formatter Py Dot Formatter *args **kwargs graph formatter fct graph write dot path
def fill inst class frequencies ctype info inst class get flat type info inst class cfreq key inst class 0 for k v in ctype info items if v Attributes min occurs > 0 frequencies[cfreq key][k] 0
def process status name with settings hide 'running' 'stdout' 'stderr' 'warnings' warn only True res run as root 'supervisorctlstatus% name s' % locals if res startswith ' Nosuchprocess' return Noneelse return res split [1 ]
def process status name with settings hide 'running' 'stdout' 'stderr' 'warnings' warn only True res run as root 'supervisorctlstatus% name s' % locals if res startswith ' Nosuchprocess' return Noneelse return res split [1 ]
def get pgraster srid data if data is None returnreturn unpack 'i' data[ 106 114 ] [0 ]
def get pgraster srid data if data is None returnreturn unpack 'i' data[ 106 114 ] [0 ]
def upload to field path default from mezzanine conf import settingsfor k v in settings UPLOAD TO HANDLERS items if k lower field path lower return import dotted path v return default
def is instance of gateway java object java class if isinstance java class basestring param java classelif isinstance java class Java Class param java class fqnelif isinstance java class Java Object param java class get Class else raise Py 4 J Error u'java classmustbeastring a Java Class ora Java Object' return gateway jvm py 4 j reflection Type Util is Instance Of param java object
def is instance of gateway java object java class if isinstance java class basestring param java classelif isinstance java class Java Class param java class fqnelif isinstance java class Java Object param java class get Class else raise Py 4 J Error u'java classmustbeastring a Java Class ora Java Object' return gateway jvm py 4 j reflection Type Util is Instance Of param java object
def get targets ret []for each in Guid find Q 'referent 1' 'nin' ['nodefile' 'osfguidfile'] if each referent is None logger info 'GUID{}hasnoreferent ' format each id ret append each return ret
def get targets ret []for each in Guid find Q 'referent 1' 'nin' ['nodefile' 'osfguidfile'] if each referent is None logger info 'GUID{}hasnoreferent ' format each id ret append each return ret
def convert db channel to json channel include rel score False res json {'id' channel[ 0 ] 'dispersy cid' channel[ 1 ] encode 'hex' 'name' channel[ 2 ] 'description' channel[ 3 ] 'votes' channel[ 5 ] 'torrents' channel[ 4 ] 'spam' channel[ 6 ] 'modified' channel[ 8 ] 'subscribed' channel[ 7 ] VOTE SUBSCRIBE }if include rel score res json['relevance score'] channel[ 9 ]return res json
def convert db channel to json channel include rel score False res json {'id' channel[ 0 ] 'dispersy cid' channel[ 1 ] encode 'hex' 'name' channel[ 2 ] 'description' channel[ 3 ] 'votes' channel[ 5 ] 'torrents' channel[ 4 ] 'spam' channel[ 6 ] 'modified' channel[ 8 ] 'subscribed' channel[ 7 ] VOTE SUBSCRIBE }if include rel score res json['relevance score'] channel[ 9 ]return res json
@lower constant types Tuple @lower constant types Named Tuple def unituple constant context builder ty pyval consts [context get constant generic builder ty types[i] v for i v in enumerate pyval ]return ir Constant literal struct consts
@lower constant types Tuple @lower constant types Named Tuple def unituple constant context builder ty pyval consts [context get constant generic builder ty types[i] v for i v in enumerate pyval ]return ir Constant literal struct consts
def validate dictionary string length specs if not isinstance specs dict msg 'specsmustbeadictionary ' raise exception Invalid Input reason msg for key value in specs items if key is not None check string length key ' Key"%s"' % key min length 1 max length 255 if value is not None check string length value ' Valueforkey"%s"' % key min length 0 max length 255
def validate dictionary string length specs if not isinstance specs dict msg 'specsmustbeadictionary ' raise exception Invalid Input reason msg for key value in specs items if key is not None check string length key ' Key"%s"' % key min length 1 max length 255 if value is not None check string length value ' Valueforkey"%s"' % key min length 0 max length 255
@transaction non atomic requests@require POST@ensure csrf cookie@cache control no cache True no store True must revalidate True @require level 'staff' @require finance admindef get exec summary report request course id course key Slash Separated Course Key from deprecated string course id try lms djangoapps instructor task api submit executive summary report request course key status response ' Theexecutivesummaryreportisbeingcreated Toviewthestatusofthereport see Pending Tasksbelow ' except Already Running Error status response ' Theexecutivesummaryreportiscurrentlybeingcreated Toviewthestatusofthereport see Pending Tasksbelow Youwillbeabletodownloadthereportwhenitiscomplete ' return Json Response {'status' status response}
@transaction non atomic requests@require POST@ensure csrf cookie@cache control no cache True no store True must revalidate True @require level 'staff' @require finance admindef get exec summary report request course id course key Slash Separated Course Key from deprecated string course id try lms djangoapps instructor task api submit executive summary report request course key status response ' Theexecutivesummaryreportisbeingcreated Toviewthestatusofthereport see Pending Tasksbelow ' except Already Running Error status response ' Theexecutivesummaryreportiscurrentlybeingcreated Toviewthestatusofthereport see Pending Tasksbelow Youwillbeabletodownloadthereportwhenitiscomplete ' return Json Response {'status' status response}
def cm 2 deg cm monitor correct Flat False if not isinstance monitor monitors Monitor msg 'cm 2 degrequiresamonitors Monitorobjectasthesecondargumentbutreceived%s'raise Value Error msg % str type monitor dist monitor get Distance if dist is None msg ' Monitor%shasnoknowndistance SEEMONITORCENTER 'raise Value Error msg % monitor name if correct Flat return np arctan np radians cm / dist else return cm / dist * 0 017455
def cm 2 deg cm monitor correct Flat False if not isinstance monitor monitors Monitor msg 'cm 2 degrequiresamonitors Monitorobjectasthesecondargumentbutreceived%s'raise Value Error msg % str type monitor dist monitor get Distance if dist is None msg ' Monitor%shasnoknowndistance SEEMONITORCENTER 'raise Value Error msg % monitor name if correct Flat return np arctan np radians cm / dist else return cm / dist * 0 017455
def test batch normalized mlp allocation mlp Batch Normalized MLP [ Tanh Tanh ] [5 7 9] mlp allocate assert mlp activations[ 0 ] children[ 0 ] input dim 7 assert mlp activations[ 1 ] children[ 0 ] input dim 9 assert not any l use bias for l in mlp linear transformations
def test batch normalized mlp allocation mlp Batch Normalized MLP [ Tanh Tanh ] [5 7 9] mlp allocate assert mlp activations[ 0 ] children[ 0 ] input dim 7 assert mlp activations[ 1 ] children[ 0 ] input dim 9 assert not any l use bias for l in mlp linear transformations
def manage changed wrapped def changed session *arg **kw session accessed int time time session changed return wrapped session *arg **kw changed doc wrapped doc return changed
def manage changed wrapped def changed session *arg **kw session accessed int time time session changed return wrapped session *arg **kw changed doc wrapped doc return changed
def manage changed wrapped def changed session *arg **kw session accessed int time time session changed return wrapped session *arg **kw changed doc wrapped doc return changed
def win user token is admin user token class SID IDENTIFIER AUTHORITY ctypes Structure fields [ 'byte 0 ' ctypes c byte 'byte 1 ' ctypes c byte 'byte 2 ' ctypes c byte 'byte 3 ' ctypes c byte 'byte 4 ' ctypes c byte 'byte 5 ' ctypes c byte ]nt authority SID IDENTIFIER AUTHORITY nt authority byte 5 5SECURITY BUILTIN DOMAIN RID 32 DOMAIN ALIAS RID ADMINS 544 administrators group ctypes c void p if ctypes windll advapi 32 Allocate And Initialize Sid ctypes byref nt authority 2 SECURITY BUILTIN DOMAIN RID DOMAIN ALIAS RID ADMINS 0 0 0 0 0 0 ctypes byref administrators group 0 raise Exception ' Allocate And Initialize Sidfailed' try is admin ctypes wintypes BOOL if ctypes windll advapi 32 Check Token Membership user token administrators group ctypes byref is admin 0 raise Exception ' Check Token Membershipfailed' return is admin value 0 finally ctypes windll advapi 32 Free Sid administrators group
def win user token is admin user token class SID IDENTIFIER AUTHORITY ctypes Structure fields [ 'byte 0 ' ctypes c byte 'byte 1 ' ctypes c byte 'byte 2 ' ctypes c byte 'byte 3 ' ctypes c byte 'byte 4 ' ctypes c byte 'byte 5 ' ctypes c byte ]nt authority SID IDENTIFIER AUTHORITY nt authority byte 5 5SECURITY BUILTIN DOMAIN RID 32 DOMAIN ALIAS RID ADMINS 544 administrators group ctypes c void p if ctypes windll advapi 32 Allocate And Initialize Sid ctypes byref nt authority 2 SECURITY BUILTIN DOMAIN RID DOMAIN ALIAS RID ADMINS 0 0 0 0 0 0 ctypes byref administrators group 0 raise Exception ' Allocate And Initialize Sidfailed' try is admin ctypes wintypes BOOL if ctypes windll advapi 32 Check Token Membership user token administrators group ctypes byref is admin 0 raise Exception ' Check Token Membershipfailed' return is admin value 0 finally ctypes windll advapi 32 Free Sid administrators group
def get default cgsnapshot type grp type {}ctxt context get admin context try grp type get group type by name ctxt DEFAULT CGSNAPSHOT TYPE except exception Group Type Not Found By Name LOG exception LE ' Defaultcgsnapshottype%sisnotfound ' % DEFAULT CGSNAPSHOT TYPE return grp type
def get default cgsnapshot type grp type {}ctxt context get admin context try grp type get group type by name ctxt DEFAULT CGSNAPSHOT TYPE except exception Group Type Not Found By Name LOG exception LE ' Defaultcgsnapshottype%sisnotfound ' % DEFAULT CGSNAPSHOT TYPE return grp type
def get property obj name old name default None if hasattr obj old name warnings warn ' Property%sisobsolete pleaseuse%sinstead' % old name name stacklevel 2 return getattr obj old name return getattr obj name default
def get property obj name old name default None if hasattr obj old name warnings warn ' Property%sisobsolete pleaseuse%sinstead' % old name name stacklevel 2 return getattr obj old name return getattr obj name default
def ffi callback signature name **kwargs def wrapper func if lib Cryptography STATIC CALLBACKS ffi def extern name name **kwargs func callback getattr lib name else callback ffi callback signature **kwargs func return callbackreturn wrapper
def ffi callback signature name **kwargs def wrapper func if lib Cryptography STATIC CALLBACKS ffi def extern name name **kwargs func callback getattr lib name else callback ffi callback signature **kwargs func return callbackreturn wrapper
def ffi callback signature name **kwargs def wrapper func if lib Cryptography STATIC CALLBACKS ffi def extern name name **kwargs func callback getattr lib name else callback ffi callback signature **kwargs func return callbackreturn wrapper
def require app app name api style False iterable inspect getmodule frame[ 0 ] for frame in inspect stack modules [module for module in iterable if module is not None ]if api style m modules[ 2 ]else m modules[ 1 ]m REQUIRED APP getattr m ' REQUIRED APP' [] m REQUIRED APP append app name LOG debug 'require app %sisrequiredby%s' app name m name
def require app app name api style False iterable inspect getmodule frame[ 0 ] for frame in inspect stack modules [module for module in iterable if module is not None ]if api style m modules[ 2 ]else m modules[ 1 ]m REQUIRED APP getattr m ' REQUIRED APP' [] m REQUIRED APP append app name LOG debug 'require app %sisrequiredby%s' app name m name
@deprecated since u' 1 3' message DEPRECATION MESSAGE alternative u' func `~astropy coordinates matrix utilities rotation matrix`' def rotation matrix angle axis u'z' unit None return matrix utilities rotation matrix angle axis unit view np matrix
@deprecated since u' 1 3' message DEPRECATION MESSAGE alternative u' func `~astropy coordinates matrix utilities rotation matrix`' def rotation matrix angle axis u'z' unit None return matrix utilities rotation matrix angle axis unit view np matrix
def clear lookups namespace if namespace in LOOKUP del LOOKUP[namespace]
def clear lookups namespace if namespace in LOOKUP del LOOKUP[namespace]
def create connection auth return sdk Connection url auth get 'url' username auth get 'username' password auth get 'password' ca file auth get 'ca file' None insecure auth get 'insecure' False token auth get 'token' None kerberos auth get 'kerberos' None
def create connection auth return sdk Connection url auth get 'url' username auth get 'username' password auth get 'password' ca file auth get 'ca file' None insecure auth get 'insecure' False token auth get 'token' None kerberos auth get 'kerberos' None
def clean pyc path if not os access path os W OK warnings warn '{ 0 }isnotwritablesocannotdeletestale*pycfiles' format path returnprint ' Cleaning*pycfiles ifwritable from {0 }' format path for root dirs files in os walk path pyc files filter lambda filename filename endswith ' pyc' files py files set filter lambda filename filename endswith ' py' files excess pyc files filter lambda pyc filename pyc filename[ -1 ] not in py files pyc files for excess pyc file in excess pyc files full path os path join root excess pyc file os remove full path
def clean pyc path if not os access path os W OK warnings warn '{ 0 }isnotwritablesocannotdeletestale*pycfiles' format path returnprint ' Cleaning*pycfiles ifwritable from {0 }' format path for root dirs files in os walk path pyc files filter lambda filename filename endswith ' pyc' files py files set filter lambda filename filename endswith ' py' files excess pyc files filter lambda pyc filename pyc filename[ -1 ] not in py files pyc files for excess pyc file in excess pyc files full path os path join root excess pyc file os remove full path
def get chost return get var 'CHOST'
def get chost return get var 'CHOST'
def metadef namespace delete context namespace name session None session session or get session return metadef namespace api delete cascade context namespace name session
def metadef namespace delete context namespace name session None session session or get session return metadef namespace api delete cascade context namespace name session
def iter sample draws step start None trace None chain 0 tune None model None random seed -1 sampling iter sample draws step start trace chain tune model random seed for i strace in enumerate sampling yield Multi Trace [strace[ i + 1 ]]
def iter sample draws step start None trace None chain 0 tune None model None random seed -1 sampling iter sample draws step start trace chain tune model random seed for i strace in enumerate sampling yield Multi Trace [strace[ i + 1 ]]
def iter sample draws step start None trace None chain 0 tune None model None random seed -1 sampling iter sample draws step start trace chain tune model random seed for i strace in enumerate sampling yield Multi Trace [strace[ i + 1 ]]
def iter sample draws step start None trace None chain 0 tune None model None random seed -1 sampling iter sample draws step start trace chain tune model random seed for i strace in enumerate sampling yield Multi Trace [strace[ i + 1 ]]
def iter sample draws step start None trace None chain 0 tune None model None random seed -1 sampling iter sample draws step start trace chain tune model random seed for i strace in enumerate sampling yield Multi Trace [strace[ i + 1 ]]
def iter sample draws step start None trace None chain 0 tune None model None random seed -1 sampling iter sample draws step start trace chain tune model random seed for i strace in enumerate sampling yield Multi Trace [strace[ i + 1 ]]
def change Version In File old new filename replace In File filename {old base new base }
def change Version In File old new filename replace In File filename {old base new base }
def change Version In File old new filename replace In File filename {old base new base }
def s3 utc dt if dt if dt tzinfo is None return dt replace tzinfo dateutil tz tzutc return dt astimezone dateutil tz tzutc else return None
def s3 utc dt if dt if dt tzinfo is None return dt replace tzinfo dateutil tz tzutc return dt astimezone dateutil tz tzutc else return None
def deeper 2 net conv 2 d teacher w nb filter nb channel kh kw teacher w shapestudent w np zeros nb filter nb filter kh kw for i in xrange nb filter student w[ i i kh - 1 / 2 kw - 1 / 2 ] 1 0student b np zeros nb filter return student w student b
def deeper 2 net conv 2 d teacher w nb filter nb channel kh kw teacher w shapestudent w np zeros nb filter nb filter kh kw for i in xrange nb filter student w[ i i kh - 1 / 2 kw - 1 / 2 ] 1 0student b np zeros nb filter return student w student b
def freeze region clip t 0 region None outside region None mask None if region is not None x1 y1 x2 y2 regionfreeze clip fx crop *region to Image Clip t t set duration clip duration set position x1 y1 return Composite Video Clip [clip freeze] elif outside region is not None x1 y1 x2 y2 outside regionanimated region clip fx crop *outside region set position x1 y1 freeze clip to Image Clip t t set duration clip duration return Composite Video Clip [freeze animated region] elif mask is not None freeze clip to Image Clip t t set duration clip duration set mask mask return Composite Video Clip [clip freeze]
def freeze region clip t 0 region None outside region None mask None if region is not None x1 y1 x2 y2 regionfreeze clip fx crop *region to Image Clip t t set duration clip duration set position x1 y1 return Composite Video Clip [clip freeze] elif outside region is not None x1 y1 x2 y2 outside regionanimated region clip fx crop *outside region set position x1 y1 freeze clip to Image Clip t t set duration clip duration return Composite Video Clip [freeze animated region] elif mask is not None freeze clip to Image Clip t t set duration clip duration set mask mask return Composite Video Clip [clip freeze]
def copy file from manifest repo ctx filename dir for changeset in reversed upper bounded changelog repo ctx changeset ctx repo changectx changeset fctx get file context from ctx changeset ctx filename if fctx and fctx not in ['DELETED'] file path os path join dir filename fh open file path 'wb' fh write fctx data fh close return file pathreturn None
def copy file from manifest repo ctx filename dir for changeset in reversed upper bounded changelog repo ctx changeset ctx repo changectx changeset fctx get file context from ctx changeset ctx filename if fctx and fctx not in ['DELETED'] file path os path join dir filename fh open file path 'wb' fh write fctx data fh close return file pathreturn None
def proxy port 9999 l listen port l wait for connection r remote context adb host context adb port level 'debug' l r
def proxy port 9999 l listen port l wait for connection r remote context adb host context adb port level 'debug' l r
def remove notifications email notification ids None for email id in email notification ids Notification Digest remove Q ' id' 'eq' email id
def remove notifications email notification ids None for email id in email notification ids Notification Digest remove Q ' id' 'eq' email id
def Make Cdf From Items items label None return Cdf dict items label label
def Make Cdf From Items items label None return Cdf dict items label label
def gather git command html files command list html session get git docs base url soup Beautiful Soup command list html text 'html parser' links soup find all 'a' commands []for link in links href link get 'href' if '/docs/git-' in href href href replace '/docs' '' with open 'download/{} html' format link text 'wb' as outfile outfile write bytes session get '{}{}' format git docs base url href text 'UTF- 8 '
def gather git command html files command list html session get git docs base url soup Beautiful Soup command list html text 'html parser' links soup find all 'a' commands []for link in links href link get 'href' if '/docs/git-' in href href href replace '/docs' '' with open 'download/{} html' format link text 'wb' as outfile outfile write bytes session get '{}{}' format git docs base url href text 'UTF- 8 '
def gather git command html files command list html session get git docs base url soup Beautiful Soup command list html text 'html parser' links soup find all 'a' commands []for link in links href link get 'href' if '/docs/git-' in href href href replace '/docs' '' with open 'download/{} html' format link text 'wb' as outfile outfile write bytes session get '{}{}' format git docs base url href text 'UTF- 8 '
def sanitize index data index copy False if index is None return dataif len data len index raise Value Error ' Lengthofvaluesdoesnotmatchlengthofindex' if isinstance data Period Index data data asobjectelif isinstance data Datetime Index data data to embed keep tz True if copy data data copy elif isinstance data np ndarray if data dtype kind in ['M' 'm'] data sanitize array data index copy copy return data
def sanitize index data index copy False if index is None return dataif len data len index raise Value Error ' Lengthofvaluesdoesnotmatchlengthofindex' if isinstance data Period Index data data asobjectelif isinstance data Datetime Index data data to embed keep tz True if copy data data copy elif isinstance data np ndarray if data dtype kind in ['M' 'm'] data sanitize array data index copy copy return data
def sanitize index data index copy False if index is None return dataif len data len index raise Value Error ' Lengthofvaluesdoesnotmatchlengthofindex' if isinstance data Period Index data data asobjectelif isinstance data Datetime Index data data to embed keep tz True if copy data data copy elif isinstance data np ndarray if data dtype kind in ['M' 'm'] data sanitize array data index copy copy return data
@set modified ondef save persona image src full dst **kw log info '[ 1 @ None] Savingpersonaimage %s' % full dst img Image Check storage open src if not img is image log error ' Notanimage %s' % src exc info True returnwith storage open src 'rb' as fp i Image open fp with storage open full dst 'wb' as fp i save fp 'png' return True
@set modified ondef save persona image src full dst **kw log info '[ 1 @ None] Savingpersonaimage %s' % full dst img Image Check storage open src if not img is image log error ' Notanimage %s' % src exc info True returnwith storage open src 'rb' as fp i Image open fp with storage open full dst 'wb' as fp i save fp 'png' return True
def execfile filename globals locals None if locals is None locals globalswith open filename 'rb U' as fin source fin read code compile source filename 'exec' exec code in globals locals
def execfile filename globals locals None if locals is None locals globalswith open filename 'rb U' as fin source fin read code compile source filename 'exec' exec code in globals locals
def create modulestore instance engine contentstore doc store config options i18 n service None fs service None user service None signal handler None class load function engine if issubclass class Module Store Draft And Published options['branch setting func'] lambda Module Store Enum Branch draft preferred return class doc store config doc store config contentstore contentstore signal handler signal handler **options
def create modulestore instance engine contentstore doc store config options i18 n service None fs service None user service None signal handler None class load function engine if issubclass class Module Store Draft And Published options['branch setting func'] lambda Module Store Enum Branch draft preferred return class doc store config doc store config contentstore contentstore signal handler signal handler **options
def Client hub None **kwargs from curl import Curl Clientreturn Curl Client hub **kwargs
def Client hub None **kwargs from curl import Curl Clientreturn Curl Client hub **kwargs
def connection before request CLIENT POOL acquire
def connection before request CLIENT POOL acquire
@requires application def test arrow transform draw if os getenv 'APPVEYOR' '' lower 'true' raise Skip Test ' App Veyorhasunknownfailure' old numpy Loose Version np version < '1 8' if os getenv 'TRAVIS' 'false' 'true' and sys version[ 3] '2 6' or old numpy raise Skip Test ' Travisfailsdueto F Bstackproblem' with Testing Canvas as c for arrow type in ARROW TYPES arrow visuals Arrow pos vertices arrow type arrow type arrows arrows arrow size 10 color 'red' connect 'segments' parent c scene arrow transform transforms ST Transform scale 0 5 0 75 translate -20 -20 assert image approved c render 'visuals/arrow transform type %s png' % arrow type arrow parent None
def partitionby func seq return map tuple pluck 1 itertools groupby seq key func
def partitionby func seq return map tuple pluck 1 itertools groupby seq key func
def partitionby func seq return map tuple pluck 1 itertools groupby seq key func
def rehash return win 32 gui Send Message Timeout win 32 con HWND BROADCAST win 32 con WM SETTINGCHANGE 0 ' Environment' 0 10000 [0 ] 1
def rehash return win 32 gui Send Message Timeout win 32 con HWND BROADCAST win 32 con WM SETTINGCHANGE 0 ' Environment' 0 10000 [0 ] 1
def rehash return win 32 gui Send Message Timeout win 32 con HWND BROADCAST win 32 con WM SETTINGCHANGE 0 ' Environment' 0 10000 [0 ] 1
def a1 to rowcol label m CELL ADDR RE match label if m column label m group 1 upper row int m group 2 col 0for i c in enumerate reversed column label col + ord c - MAGIC NUMBER * 26 ** i else raise Incorrect Cell Label label return row col
def a1 to rowcol label m CELL ADDR RE match label if m column label m group 1 upper row int m group 2 col 0for i c in enumerate reversed column label col + ord c - MAGIC NUMBER * 26 ** i else raise Incorrect Cell Label label return row col
def signed permutations t return type t i for j in permutations t for i in permute signs j
def signed permutations t return type t i for j in permutations t for i in permute signs j
def empty iter yield iter [] next
def empty iter yield iter [] next
def register func *args **kwargs global identwith lock ident ident ident + 1 handlers[ident] func args kwargs vars context return ident
def pgrep pattern user None full False procs []for proc in psutil process iter name match pattern in '' join get proc cmdline proc if full else pattern in get proc name proc user match True if user is None else user get proc username proc if name match and user match procs append get proc pid proc return procs or None
def pgrep pattern user None full False procs []for proc in psutil process iter name match pattern in '' join get proc cmdline proc if full else pattern in get proc name proc user match True if user is None else user get proc username proc if name match and user match procs append get proc pid proc return procs or None
def pgrep pattern user None full False procs []for proc in psutil process iter name match pattern in '' join get proc cmdline proc if full else pattern in get proc name proc user match True if user is None else user get proc username proc if name match and user match procs append get proc pid proc return procs or None
def get Complex If None value Complex if value Complex None return complex return value Complex
def get Complex If None value Complex if value Complex None return complex return value Complex
def sanitise redirect url redirect to is valid Trueif not redirect to or '' in redirect to is valid Falseelif '//' in redirect to allowed domains getattr settings 'ALLOWED EXTERNAL OPENID REDIRECT DOMAINS' [] s netloc p q f urlsplit redirect to if netloc if netloc find ' ' -1 netloc netloc split ' ' 1 if netloc not in allowed domains is valid Falseif not is valid redirect to settings LOGIN REDIRECT UR Lreturn redirect to
def sanitise redirect url redirect to is valid Trueif not redirect to or '' in redirect to is valid Falseelif '//' in redirect to allowed domains getattr settings 'ALLOWED EXTERNAL OPENID REDIRECT DOMAINS' [] s netloc p q f urlsplit redirect to if netloc if netloc find ' ' -1 netloc netloc split ' ' 1 if netloc not in allowed domains is valid Falseif not is valid redirect to settings LOGIN REDIRECT UR Lreturn redirect to
def send arp reply reply to mac src mac None src ip None arpp reply to parsed find 'arp' mac Eth Addr mac if src mac is None src mac reply to connection eth addrelif src mac is True src mac reply to connection ports[reply to port] hw addrelse src mac Eth Addr src mac r arp r opcode r REPL Yr hwdst arpp hwsrcr protodst arpp protosrcr hwsrc Eth Addr src mac r protosrc IP Addr '0 0 0 0' if src ip is None else IP Addr src ip e ethernet type ethernet ARP TYPE src src mac dst r hwdst e payload rmsg of ofp packet out msg data e pack msg actions append of ofp action output port reply to port msg in port of OFPP NON Ereply to connection send msg
def send arp reply reply to mac src mac None src ip None arpp reply to parsed find 'arp' mac Eth Addr mac if src mac is None src mac reply to connection eth addrelif src mac is True src mac reply to connection ports[reply to port] hw addrelse src mac Eth Addr src mac r arp r opcode r REPL Yr hwdst arpp hwsrcr protodst arpp protosrcr hwsrc Eth Addr src mac r protosrc IP Addr '0 0 0 0' if src ip is None else IP Addr src ip e ethernet type ethernet ARP TYPE src src mac dst r hwdst e payload rmsg of ofp packet out msg data e pack msg actions append of ofp action output port reply to port msg in port of OFPP NON Ereply to connection send msg
@logic side effect freedef datastore search sql context data dict sql get or bust data dict 'sql' if not datastore helpers is single statement sql raise p toolkit Validation Error {'query' [' Queryisnotasinglestatement ']} p toolkit check access 'datastore search sql' context data dict data dict['connection url'] config['ckan datastore read url']result db search sql context data dict result pop 'id' None result pop 'connection url' return result
@logic side effect freedef datastore search sql context data dict sql get or bust data dict 'sql' if not datastore helpers is single statement sql raise p toolkit Validation Error {'query' [' Queryisnotasinglestatement ']} p toolkit check access 'datastore search sql' context data dict data dict['connection url'] config['ckan datastore read url']result db search sql context data dict result pop 'id' None result pop 'connection url' return result
def task create flocker pool file return sequence [run 'mkdir-p/var/opt/flocker' run 'truncate--size 10 G/var/opt/flocker/pool-vdev' run 'ZFS MODULE LOADING yeszpoolcreateflocker/var/opt/flocker/pool-vdev' ]
def task create flocker pool file return sequence [run 'mkdir-p/var/opt/flocker' run 'truncate--size 10 G/var/opt/flocker/pool-vdev' run 'ZFS MODULE LOADING yeszpoolcreateflocker/var/opt/flocker/pool-vdev' ]
def parse mime message mime message if isinstance mime message email Message Message return mime messageelif isinstance mime message basestring return email message from string mime message else return email message from file mime message
def parse mime message mime message if isinstance mime message email Message Message return mime messageelif isinstance mime message basestring return email message from string mime message else return email message from file mime message
def get site path url path urlparse url pathif path '' path '/'return path
def get site path url path urlparse url pathif path '' path '/'return path
def corpus chrf list of references hypotheses min len 1 max len 6 beta 3 0 assert len list of references len hypotheses ' Thenumberofhypothesesandtheirreferencesshouldbethesame'for reference hypothesis in zip list of references hypotheses if type reference and type hypothesis str reference hypothesis '' join reference '' join hypothesis ref ngrams Counter everygrams reference min len max len hyp ngrams Counter everygrams hypothesis min len max len overlap ngrams ref ngrams & hyp ngrams tp sum overlap ngrams values tpfp sum hyp ngrams values tffn sum ref ngrams values precision tp / tpfp recall tp / tffn factor beta ** 2 score 1 + factor * precision * recall / factor * precision + recall return score
def corpus chrf list of references hypotheses min len 1 max len 6 beta 3 0 assert len list of references len hypotheses ' Thenumberofhypothesesandtheirreferencesshouldbethesame'for reference hypothesis in zip list of references hypotheses if type reference and type hypothesis str reference hypothesis '' join reference '' join hypothesis ref ngrams Counter everygrams reference min len max len hyp ngrams Counter everygrams hypothesis min len max len overlap ngrams ref ngrams & hyp ngrams tp sum overlap ngrams values tpfp sum hyp ngrams values tffn sum ref ngrams values precision tp / tpfp recall tp / tffn factor beta ** 2 score 1 + factor * precision * recall / factor * precision + recall return score
def item to job iterator resource return iterator client job from resource resource
def item to job iterator resource return iterator client job from resource resource
def inet pton family text if family AF INET return dns ipv 4 inet aton text elif family AF INET 6 return dns ipv 6 inet aton text else raise Not Implemented Error
def inet pton family text if family AF INET return dns ipv 4 inet aton text elif family AF INET 6 return dns ipv 6 inet aton text else raise Not Implemented Error
def on color clip size None color 0 0 0 pos None col opacity None if size is None size clip sizeif pos is None pos 'center'colorclip Color Clip size color if col opacity colorclip colorclip with mask set opacity col opacity return Composite Video Clip [colorclip clip set pos pos ] transparent col opacity is not None
def on color clip size None color 0 0 0 pos None col opacity None if size is None size clip sizeif pos is None pos 'center'colorclip Color Clip size color if col opacity colorclip colorclip with mask set opacity col opacity return Composite Video Clip [colorclip clip set pos pos ] transparent col opacity is not None
def extract gcs tokens full object name bucket name Noneobject name Nonetokens full object name split '/' if len tokens < 3 logging error " Malformed GC Spath'{ 0 }' Aborting GC Soperation " format full object name return bucket name object name bucket name tokens[ 2 ]object name ''for token in tokens[ 3 -1 ] object name + token + '/' object name + tokens[ -1 ]return bucket name object name
def extract gcs tokens full object name bucket name Noneobject name Nonetokens full object name split '/' if len tokens < 3 logging error " Malformed GC Spath'{ 0 }' Aborting GC Soperation " format full object name return bucket name object name bucket name tokens[ 2 ]object name ''for token in tokens[ 3 -1 ] object name + token + '/' object name + tokens[ -1 ]return bucket name object name
def is Left a b c return b[ 0 ] - a[ 0 ] * c[ 1 ] - a[ 1 ] - b[ 1 ] - a[ 1 ] * c[ 0 ] - a[ 0 ] > 0
def Get Http Context global thread Local Contextreturn thread Local Context dict setdefault 'http Ctx' dict
def Get Http Context global thread Local Contextreturn thread Local Context dict setdefault 'http Ctx' dict
def make stim channel trigger chs slope threshold stim code trigger values if slope '+' trig chs bin trigger chs > threshold elif slope '-' trig chs bin trigger chs < threshold else raise Value Error "slopeneedstobe'+'or'-'" if stim code 'binary' trigger values 2 ** np arange len trigger chs elif stim code 'channel' raise Value Error "stim codemustbe'binary'or'channel' got%s" % repr stim code trig chs trig chs bin * trigger values[ np newaxis] return np array trig chs sum axis 0 ndmin 2
def make stim channel trigger chs slope threshold stim code trigger values if slope '+' trig chs bin trigger chs > threshold elif slope '-' trig chs bin trigger chs < threshold else raise Value Error "slopeneedstobe'+'or'-'" if stim code 'binary' trigger values 2 ** np arange len trigger chs elif stim code 'channel' raise Value Error "stim codemustbe'binary'or'channel' got%s" % repr stim code trig chs trig chs bin * trigger values[ np newaxis] return np array trig chs sum axis 0 ndmin 2
def make stim channel trigger chs slope threshold stim code trigger values if slope '+' trig chs bin trigger chs > threshold elif slope '-' trig chs bin trigger chs < threshold else raise Value Error "slopeneedstobe'+'or'-'" if stim code 'binary' trigger values 2 ** np arange len trigger chs elif stim code 'channel' raise Value Error "stim codemustbe'binary'or'channel' got%s" % repr stim code trig chs trig chs bin * trigger values[ np newaxis] return np array trig chs sum axis 0 ndmin 2
@pytest fixturedef templates project 0 request templates project 0 from pootle translationproject models import Translation Projectreturn Translation Project objects get language templates project project 0
@pytest fixturedef templates project 0 request templates project 0 from pootle translationproject models import Translation Projectreturn Translation Project objects get language templates project project 0
def word wrap text max length if len text > max length return u'\n' join wrap text max length return text
def word wrap text max length if len text > max length return u'\n' join wrap text max length return text
def find split rechunk old chunks new chunks graph size limit ndim len old chunks chunks list old chunks for dim in range ndim graph size estimate graph size chunks new chunks if graph size > graph size limit breakif len old chunks[dim] > len new chunks[dim] continuemax number int len old chunks[dim] * graph size limit / graph size c merge to number new chunks[dim] max number assert len c < max number if len c > len old chunks[dim] and max c < max old chunks[dim] chunks[dim] creturn tuple chunks
def find split rechunk old chunks new chunks graph size limit ndim len old chunks chunks list old chunks for dim in range ndim graph size estimate graph size chunks new chunks if graph size > graph size limit breakif len old chunks[dim] > len new chunks[dim] continuemax number int len old chunks[dim] * graph size limit / graph size c merge to number new chunks[dim] max number assert len c < max number if len c > len old chunks[dim] and max c < max old chunks[dim] chunks[dim] creturn tuple chunks
def find split rechunk old chunks new chunks graph size limit ndim len old chunks chunks list old chunks for dim in range ndim graph size estimate graph size chunks new chunks if graph size > graph size limit breakif len old chunks[dim] > len new chunks[dim] continuemax number int len old chunks[dim] * graph size limit / graph size c merge to number new chunks[dim] max number assert len c < max number if len c > len old chunks[dim] and max c < max old chunks[dim] chunks[dim] creturn tuple chunks
def find split rechunk old chunks new chunks graph size limit ndim len old chunks chunks list old chunks for dim in range ndim graph size estimate graph size chunks new chunks if graph size > graph size limit breakif len old chunks[dim] > len new chunks[dim] continuemax number int len old chunks[dim] * graph size limit / graph size c merge to number new chunks[dim] max number assert len c < max number if len c > len old chunks[dim] and max c < max old chunks[dim] chunks[dim] creturn tuple chunks
def find split rechunk old chunks new chunks graph size limit ndim len old chunks chunks list old chunks for dim in range ndim graph size estimate graph size chunks new chunks if graph size > graph size limit breakif len old chunks[dim] > len new chunks[dim] continuemax number int len old chunks[dim] * graph size limit / graph size c merge to number new chunks[dim] max number assert len c < max number if len c > len old chunks[dim] and max c < max old chunks[dim] chunks[dim] creturn tuple chunks
def find split rechunk old chunks new chunks graph size limit ndim len old chunks chunks list old chunks for dim in range ndim graph size estimate graph size chunks new chunks if graph size > graph size limit breakif len old chunks[dim] > len new chunks[dim] continuemax number int len old chunks[dim] * graph size limit / graph size c merge to number new chunks[dim] max number assert len c < max number if len c > len old chunks[dim] and max c < max old chunks[dim] chunks[dim] creturn tuple chunks
def validate file path path validate path path if not CS FULLPATH REGEX match path raise Value Error ' Pathshouldhaveformat/bucket/filenamebutgot%s' % path
def validate file path path validate path path if not CS FULLPATH REGEX match path raise Value Error ' Pathshouldhaveformat/bucket/filenamebutgot%s' % path
def review request published cb sender user review request trivial changedesc **kwargs siteconfig Site Configuration objects get current if siteconfig get u'mail send review mail' and not trivial mail review request review request user changedesc
def Mk Dir List Widget w msg Tix Message w relief Tix FLAT width 240 anchor Tix N text ' The Tix Dir Listwidgetgivesagraphicalrepresentationofthefilesystemdirectoryandmakesiteasyfortheusertochooseandaccessdirectories ' dirlist Tix Dir List w options 'hlist pad Y 1 hlist width 25 hlist height 16 ' msg pack side Tix TOP expand 1 fill Tix BOTH padx 3 pady 3 dirlist pack side Tix TOP padx 3 pady 3
def Mk Dir List Widget w msg Tix Message w relief Tix FLAT width 240 anchor Tix N text ' The Tix Dir Listwidgetgivesagraphicalrepresentationofthefilesystemdirectoryandmakesiteasyfortheusertochooseandaccessdirectories ' dirlist Tix Dir List w options 'hlist pad Y 1 hlist width 25 hlist height 16 ' msg pack side Tix TOP expand 1 fill Tix BOTH padx 3 pady 3 dirlist pack side Tix TOP padx 3 pady 3
def get checkers for lang u'python' global NOTIFICATIONS CHECKER Sreturn NOTIFICATIONS CHECKERS get lang []
def get subgraph codons G subgraph {}for i in codons subgraph[i] {}for j in codons if i j subgraph[i][j] G[i][j]return subgraph
def Deletion Test f @functools wraps f def Decorator testinstance if testinstance TEST DELETION return f testinstance else return testinstance skip Test ' Teststhatusedeletionaredisabledforthisdatastore ' return Decorator
def count 0 Bits num num long num if num < 0 raise Value Error ' Onlypositive Numbersplease %s' % num ret 0while num > 0 if num & 1 1 breaknum num >> 1 ret + 1return ret
@help Bar Builder def Bar data label None values None color None stack None group None agg 'sum' xscale 'categorical' yscale 'linear' xgrid False ygrid True continuous range None **kw if continuous range and not isinstance continuous range Range 1 d raise Value Error 'continuous rangemustbeaninstanceofbokeh models ranges Range 1 d' if label is not None and values is None kw['label only'] Trueif agg 'sum' or agg 'mean' agg 'count'values labely range continuous rangekw['label'] labelkw['values'] valueskw['color'] colorkw['stack'] stackkw['group'] groupkw['agg'] aggkw['xscale'] xscalekw['yscale'] yscalekw['xgrid'] xgridkw['ygrid'] ygridkw['y range'] y rangechart create and build Bar Builder data **kw if len chart x range factors 1 and not label chart below[ 0 ] visible Falsereturn chart
@help Bar Builder def Bar data label None values None color None stack None group None agg 'sum' xscale 'categorical' yscale 'linear' xgrid False ygrid True continuous range None **kw if continuous range and not isinstance continuous range Range 1 d raise Value Error 'continuous rangemustbeaninstanceofbokeh models ranges Range 1 d' if label is not None and values is None kw['label only'] Trueif agg 'sum' or agg 'mean' agg 'count'values labely range continuous rangekw['label'] labelkw['values'] valueskw['color'] colorkw['stack'] stackkw['group'] groupkw['agg'] aggkw['xscale'] xscalekw['yscale'] yscalekw['xgrid'] xgridkw['ygrid'] ygridkw['y range'] y rangechart create and build Bar Builder data **kw if len chart x range factors 1 and not label chart below[ 0 ] visible Falsereturn chart
def p statement assign p print '%s %s' % p[ 2 ] p[ 4 ]
def p statement assign p print '%s %s' % p[ 2 ] p[ 4 ]
def run gdb *args **env vars if env vars env os environ copy env update env vars else env Nonebase cmd 'gdb' '--batch' '-nx' if gdb major version gdb minor version > 7 4 base cmd + '-iex' 'add-auto-load-safe-path' + checkout hook path out err subprocess Popen base cmd + args stdin subprocess PIPE stdout subprocess PIPE stderr subprocess PIPE env env communicate return out err
def parse global variables user cidr inventory user defined config if 'all' not in inventory inventory['all'] {}if 'vars' not in inventory['all'] inventory['all']['vars'] {}inventory['all']['vars']['container cidr'] user cidrif 'global overrides' in user defined config if isinstance user defined config['global overrides'] dict inventory['all']['vars'] update user defined config['global overrides'] logger debug ' Appliedglobal overrides' kept vars user defined config['global overrides'] keys kept vars append 'container cidr' for key in inventory['all']['vars'] keys if key not in kept vars logger debug ' Deletingkey%sfrominventory' key del inventory['all']['vars'][key]
def parse global variables user cidr inventory user defined config if 'all' not in inventory inventory['all'] {}if 'vars' not in inventory['all'] inventory['all']['vars'] {}inventory['all']['vars']['container cidr'] user cidrif 'global overrides' in user defined config if isinstance user defined config['global overrides'] dict inventory['all']['vars'] update user defined config['global overrides'] logger debug ' Appliedglobal overrides' kept vars user defined config['global overrides'] keys kept vars append 'container cidr' for key in inventory['all']['vars'] keys if key not in kept vars logger debug ' Deletingkey%sfrominventory' key del inventory['all']['vars'][key]
@preloader Stopdef Select Search Result list Items **kwargs return print List list Items show Selector True **kwargs
def create superuser print "\n Createasuperuserbelow Thesuperuseris Player# 1 the'owner'accountoftheserver \n" django core management call command 'createsuperuser' interactive True
def store outcome parameters request params user lti consumer result id request params get 'lis result sourcedid' None if result id result service request params get 'lis outcome service url' None if not result service log warn ' Outcome Service lis outcome service urlparametermissingfromscoredassignment wewillbeunabletoreturnascore Requestparameters %s' request params returnusage key request params['usage key']course key request params['course key'] outcomes Outcome Service objects get or create lis outcome service url result service lti consumer lti consumer Graded Assignment objects get or create lis result sourcedid result id course key course key usage key usage key user user outcome service outcomes
def store outcome parameters request params user lti consumer result id request params get 'lis result sourcedid' None if result id result service request params get 'lis outcome service url' None if not result service log warn ' Outcome Service lis outcome service urlparametermissingfromscoredassignment wewillbeunabletoreturnascore Requestparameters %s' request params returnusage key request params['usage key']course key request params['course key'] outcomes Outcome Service objects get or create lis outcome service url result service lti consumer lti consumer Graded Assignment objects get or create lis result sourcedid result id course key course key usage key usage key user user outcome service outcomes
def prefix subject if email prefix return '{}{}' format email prefix subject else return subject
def prefix subject if email prefix return '{}{}' format email prefix subject else return subject
def get package version base os path abspath os path dirname file with open os path join base 'flower/ init py' as initf for line in initf m version match line strip if not m continuereturn ' ' join m groups [0 ] split ' '
def setup hass config None log logging get Logger name log info "\n\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n Hello andwelcometo Home Assistant \n\n We'llhopethatwecanmakeallyourdreamscometrue \n\n Herearesomeresourcestogetstarted \n\n- Configuring Home Assistant \nhttps //home-assistant io/getting-started/configuration/\n\n- Availablecomponents \nhttps //home-assistant io/components/\n\n- Troubleshootingyourconfiguration \nhttps //home-assistant io/getting-started/troubleshooting-configuration/\n\n- Gettinghelp \nhttps //home-assistant io/help/\n\n Thismessageisgeneratedbytheintroductioncomponent Youcan\ndisableitinconfiguration yaml \n\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n" return True
def stack pages pages memmap False tempdir None *args **kwargs if len pages 0 raise Value Error 'nopages' if len pages 1 return pages[ 0 ] asarray memmap memmap *args **kwargs data 0 pages[ 0 ] asarray *args **kwargs shape len pages + data 0 shape if memmap with tempfile Named Temporary File dir tempdir as fh data numpy memmap fh dtype data 0 dtype shape shape else data numpy empty shape dtype data 0 dtype data[ 0 ] data 0 if memmap data flush del data 0 for i page in enumerate pages[ 1 ] data[ i + 1 ] page asarray *args **kwargs if memmap data flush return data
def get bin seeds X bin size min bin freq 1 bin sizes defaultdict int for point in X binned point np round point / bin size bin sizes[tuple binned point ] + 1bin seeds np array [point for point freq in six iteritems bin sizes if freq > min bin freq ] dtype np float 32 if len bin seeds len X warnings warn ' Binningdatafailedwithprovidedbin size %f usingdatapointsasseeds ' % bin size return Xbin seeds bin seeds * bin size return bin seeds
def get bin seeds X bin size min bin freq 1 bin sizes defaultdict int for point in X binned point np round point / bin size bin sizes[tuple binned point ] + 1bin seeds np array [point for point freq in six iteritems bin sizes if freq > min bin freq ] dtype np float 32 if len bin seeds len X warnings warn ' Binningdatafailedwithprovidedbin size %f usingdatapointsasseeds ' % bin size return Xbin seeds bin seeds * bin size return bin seeds
@frappe whitelist def get desk assets build version data get context {u'for mobile' True} assets [{u'type' u'js' u'data' u''} {u'type' u'css' u'data' u''}]if build version data[u'build version'] for path in data[u'include js'] with open os path join frappe local sites path path u'r' as f assets[ 0 ][u'data'] assets[ 0 ][u'data'] + u'\n' + unicode f read u'utf- 8 ' for path in data[u'include css'] with open os path join frappe local sites path path u'r' as f assets[ 1 ][u'data'] assets[ 1 ][u'data'] + u'\n' + unicode f read u'utf- 8 ' return {u'build version' data[u'build version'] u'boot' data[u'boot'] u'assets' assets}
def test multiple rng aliasing rng 1 MRG Random Streams 1234 rng 2 MRG Random Streams 2392 assert rng 1 state updates is not rng 2 state updates
def filter docker plays plays repo path items set for play in plays dockerfile pathlib 2 Path DOCKER PATH ROOT play ' Dockerfile' if dockerfile exists items add play else LOGGER warning "coveredplaybook'%s'doesnothave Dockerfile " % play return items
def filter docker plays plays repo path items set for play in plays dockerfile pathlib 2 Path DOCKER PATH ROOT play ' Dockerfile' if dockerfile exists items add play else LOGGER warning "coveredplaybook'%s'doesnothave Dockerfile " % play return items
def filter docker plays plays repo path items set for play in plays dockerfile pathlib 2 Path DOCKER PATH ROOT play ' Dockerfile' if dockerfile exists items add play else LOGGER warning "coveredplaybook'%s'doesnothave Dockerfile " % play return items
def get external ip try r requests get METADATA NETWORK INTERFACE URL headers {' Metadata- Flavor' ' Google'} timeout 2 return r textexcept requests Request Exception logging info ' Metadataservercouldnotbereached assuminglocal ' return 'localhost'
def list repos check apt repos {}sources sourceslist Sources List for source in sources list if source invalid continuerepo {}repo['file'] source filerepo['comps'] getattr source 'comps' [] repo['disabled'] source disabledrepo['dist'] source distrepo['type'] source typerepo['uri'] source uri rstrip '/' repo['line'] strip uri source line strip repo['architectures'] getattr source 'architectures' [] repos setdefault source uri [] append repo return repos
def windows memory usage from ctypes import windll Structure c uint 64 sizeof byreffrom ctypes wintypes import DWOR Dclass Memory Status Structure fields [ 'dw Length' DWORD 'dw Memory Load' DWORD 'ull Total Phys' c uint 64 'ull Avail Phys' c uint 64 'ull Total Page File' c uint 64 'ull Avail Page File' c uint 64 'ull Total Virtual' c uint 64 'ull Avail Virtual' c uint 64 'ull Avail Extended Virtual' c uint 64 ]memorystatus Memory Status memorystatus dw Length sizeof memorystatus windll kernel 32 Global Memory Status Ex byref memorystatus return float memorystatus dw Memory Load
def to Response stanza stanza Type None to Addr stanza get Attribute 'from' from Addr stanza get Attribute 'to' stanza ID stanza get Attribute 'id' response domish Element None stanza name if to Addr response['to'] to Addrif from Addr response['from'] from Addrif stanza ID response['id'] stanza I Dif stanza Type response['type'] stanza Typereturn response
def make subclasshook cls if isinstance cls extra abc ABC Meta def extrahook cls subclass valid for check cls res cls extra subclasshook subclass if res is not Not Implemented return resif cls extra in getattr subclass u' mro ' return Truefor scls in cls extra subclasses if isinstance scls Generic Meta continueif issubclass subclass scls return Truereturn Not Implementedelse def extrahook cls subclass valid for check cls if cls extra and issubclass subclass cls extra return Truereturn Not Implementedreturn classmethod extrahook
def make subclasshook cls if isinstance cls extra abc ABC Meta def extrahook cls subclass valid for check cls res cls extra subclasshook subclass if res is not Not Implemented return resif cls extra in getattr subclass u' mro ' return Truefor scls in cls extra subclasses if isinstance scls Generic Meta continueif issubclass subclass scls return Truereturn Not Implementedelse def extrahook cls subclass valid for check cls if cls extra and issubclass subclass cls extra return Truereturn Not Implementedreturn classmethod extrahook
def make subclasshook cls if isinstance cls extra abc ABC Meta def extrahook cls subclass valid for check cls res cls extra subclasshook subclass if res is not Not Implemented return resif cls extra in getattr subclass u' mro ' return Truefor scls in cls extra subclasses if isinstance scls Generic Meta continueif issubclass subclass scls return Truereturn Not Implementedelse def extrahook cls subclass valid for check cls if cls extra and issubclass subclass cls extra return Truereturn Not Implementedreturn classmethod extrahook
def get version if not os path exists os path join directories data Dir 'RELEASE-VERSION' try return subprocess check output 'gitdescribe--tags--match * * *' split strip except return 'unknown'fin open os path join directories data Dir 'RELEASE-VERSION' 'rb' v fin read strip fin close return v
def Transactional func None **kwargs if func is not None return Transactional func if not kwargs pop 'require new' None kwargs setdefault 'propagation' datastore rpc Transaction Options ALLOWED options datastore rpc Transaction Options **kwargs def outer wrapper func def inner wrapper *args **kwds return Run In Transaction Options options func *args **kwds return inner wrapperreturn outer wrapper
def token Map func *args def pa s l t return [func tokn *args for tokn in t]try func name getattr func ' name ' getattr func ' class ' name except Exception func name str func pa name func namereturn pa
@utils arg 'name' metavar '<name>' help ' Nameofthenewmonitortype' @utils service type 'monitor' def do type create cs args vtype cs monitor types create args name print monitor type list [vtype]
def test spinner non unicode console stream Fake TTY u'ascii' chars console Spinner default unicode charswith console Spinner u' Reticulatingsplines' file stream chars chars as s next s
def test spinner non unicode console stream Fake TTY u'ascii' chars console Spinner default unicode charswith console Spinner u' Reticulatingsplines' file stream chars chars as s next s
def test spinner non unicode console stream Fake TTY u'ascii' chars console Spinner default unicode charswith console Spinner u' Reticulatingsplines' file stream chars chars as s next s
def test spinner non unicode console stream Fake TTY u'ascii' chars console Spinner default unicode charswith console Spinner u' Reticulatingsplines' file stream chars chars as s next s
def test spinner non unicode console stream Fake TTY u'ascii' chars console Spinner default unicode charswith console Spinner u' Reticulatingsplines' file stream chars chars as s next s
def test spinner non unicode console stream Fake TTY u'ascii' chars console Spinner default unicode charswith console Spinner u' Reticulatingsplines' file stream chars chars as s next s
def test spinner non unicode console stream Fake TTY u'ascii' chars console Spinner default unicode charswith console Spinner u' Reticulatingsplines' file stream chars chars as s next s
def get pil version try import 'PIL' fromlist [str ' Image' ] return 0 except Import Error return None
def expiry range all session upper bound func yield upper bound func
def run sys exit main sys argv[ 1 ] or 0
def run sys exit main sys argv[ 1 ] or 0
def preprocess table if not len table return tablenew domain data Domain [a for a in table domain attributes if a is continuous] table domain class vars table domain metas new data data Table new domain table new data Skl Impute new data return new data
def version hostname timeout 20 username None password None return version connect hostname timeout username password
@keras testdef test temporal regression X train y train X test y test get test data nb train 500 nb test 400 input shape 3 5 output shape 2 classification False model Sequential model add GRU y train shape[ -1 ] input shape X train shape[ 1 ] X train shape[ 2 ] model compile loss 'hinge' optimizer 'adam' history model fit X train y train nb epoch 5 batch size 16 validation data X test y test verbose 0 assert history history['val loss'][ -1 ] < 1 0
@library filterdef urlparams url hash None **query url urlparse urlparse url fragment hash if hash is not None else url fragment q url queryquery dict dict urlparse parse qsl smart str q if q else {} query dict update k v for k v in query items query string urlencode [ k v for k v in query dict items if v is not None ] new urlparse Parse Result url scheme url netloc url path url params query string fragment return new geturl
def fixup old jsargs for i in range len sys argv if sys argv[i] '--build js' print 'WARNING --build js withunderscore isdeprecated use--build-js' sys argv[i] '--build-js'if sys argv[i] '--install js' print 'WARNING --install js withunderscore isdeprecated use--install-js' sys argv[i] '--install-js'
def create suggestion exploration id author id exploration version state name description suggestion content thread id create models for thread and first message exploration id state name author id description DEFAULT SUGGESTION THREAD INITIAL MESSAGE True feedback models Suggestion Model create exploration id thread id author id exploration version state name description suggestion content full thread id feedback models Feedback Thread Model generate full thread id exploration id thread id subscription services subscribe to thread author id full thread id enqueue suggestion email task exploration id thread id
def content fid share key None inline data None map data None url build url RESOURCE id fid route 'content' params make params share key share key inline data inline data map data map data return request 'get' url params params
def deserialize count specs text specs text splitlines specs [line split ' ' for line in specs if line strip ]return {int num slug strip lower for num slug in specs}
def safe readline handle line handle readline if not line raise Value Error ' Unexpectedendofstream ' return line
def minimum cut value G s t capacity 'capacity' flow func None **kwargs if flow func is None if kwargs raise nx Network X Error ' Youhavetoexplicitlysetaflow funcifyouneedtopassparametersviakwargs ' flow func default flow funcif not callable flow func raise nx Network X Error 'flow funchastobecallable ' if kwargs get 'cutoff' is not None and flow func in flow funcs raise nx Network X Error 'cutoffshouldnotbespecified ' R flow func G s t capacity capacity value only True **kwargs return R graph['flow value']
def sp value return dpi 2 px value 'sp'
def serializable property name docstring None def set obj value setattr obj ' ' + name value obj needs serialization Truedef get obj return getattr obj ' ' + name return property get set doc docstring
def tree lookup path lookup obj root sha path tree lookup obj root sha if not isinstance tree Tree raise Not Tree Error root sha return tree lookup path lookup obj path
def test bound logger isolation caplog slogging configure config string ' trace' real log slogging get Logger bound log 1 real log bind key 1 'value 1 ' with caplog at level slogging TRACE bound log 1 info 'test 1 ' records caplog recordsassert len records 1 assert 'test 1 ' in records[ 0 ] msg assert 'key 1 value 1 ' in records[ 0 ] msg with caplog at level slogging TRACE real log info 'test 2 ' records caplog recordsassert len records 2 assert 'test 2 ' in records[ 1 ] msg assert 'key 1 value 1 ' not in records[ 1 ] msg
def test bound logger isolation caplog slogging configure config string ' trace' real log slogging get Logger bound log 1 real log bind key 1 'value 1 ' with caplog at level slogging TRACE bound log 1 info 'test 1 ' records caplog recordsassert len records 1 assert 'test 1 ' in records[ 0 ] msg assert 'key 1 value 1 ' in records[ 0 ] msg with caplog at level slogging TRACE real log info 'test 2 ' records caplog recordsassert len records 2 assert 'test 2 ' in records[ 1 ] msg assert 'key 1 value 1 ' not in records[ 1 ] msg
def test bound logger isolation caplog slogging configure config string ' trace' real log slogging get Logger bound log 1 real log bind key 1 'value 1 ' with caplog at level slogging TRACE bound log 1 info 'test 1 ' records caplog recordsassert len records 1 assert 'test 1 ' in records[ 0 ] msg assert 'key 1 value 1 ' in records[ 0 ] msg with caplog at level slogging TRACE real log info 'test 2 ' records caplog recordsassert len records 2 assert 'test 2 ' in records[ 1 ] msg assert 'key 1 value 1 ' not in records[ 1 ] msg
def test bound logger isolation caplog slogging configure config string ' trace' real log slogging get Logger bound log 1 real log bind key 1 'value 1 ' with caplog at level slogging TRACE bound log 1 info 'test 1 ' records caplog recordsassert len records 1 assert 'test 1 ' in records[ 0 ] msg assert 'key 1 value 1 ' in records[ 0 ] msg with caplog at level slogging TRACE real log info 'test 2 ' records caplog recordsassert len records 2 assert 'test 2 ' in records[ 1 ] msg assert 'key 1 value 1 ' not in records[ 1 ] msg
def make fna sff fp output fp use sfftools False no trim False if use sfftools fail on gzipped sff sff fp check sffinfo if no trim check call ['sffinfo' '-notrim' '-s' sff fp] stdout open output fp 'w' else check call ['sffinfo' '-s' sff fp] stdout open output fp 'w' else try format binary sff as fna qiime open sff fp 'rb' open output fp 'w' except raise IO Error ' Couldnotparse SFF%s' % sff fp
def extract substructure for test test case substructure config try return extract substructure config substructure except Missing Config Error as e yaml add representer Optional lambda d x d represent scalar u'tag yaml org 2002 str' repr x test case skip ' Skippingtest couldnotgetconfiguration {}\n\n Inordertorunthistest addensurefileat$ACCEPTANCE YAM Lhasstructurelike \n\n{}' format e message yaml dump substructure default flow style False
def extract substructure for test test case substructure config try return extract substructure config substructure except Missing Config Error as e yaml add representer Optional lambda d x d represent scalar u'tag yaml org 2002 str' repr x test case skip ' Skippingtest couldnotgetconfiguration {}\n\n Inordertorunthistest addensurefileat$ACCEPTANCE YAM Lhasstructurelike \n\n{}' format e message yaml dump substructure default flow style False
def build binary response request data code return build response request data code None
def get hash f import hashlibm hashlib md 5 m update f return m hexdigest
def get user impact score user id model user models User Stats Model get user id strict False if model return model impact scoreelse return 0
def get build results build r url get results raw url build if not r url returnreturn convert json to df r url
def set owner obj name principal obj type 'file' sid get sid principal flags Flags new privs set luid win 32 security Lookup Privilege Value '' ' Se Take Ownership Privilege' new privs add luid win 32 con SE PRIVILEGE ENABLED luid win 32 security Lookup Privilege Value '' ' Se Restore Privilege' new privs add luid win 32 con SE PRIVILEGE ENABLED p handle win 32 api Get Current Process t handle win 32 security Open Process Token p handle win 32 security TOKEN ALL ACCESS win 32 con TOKEN ADJUST PRIVILEGES win 32 security Adjust Token Privileges t handle 0 new privs try win 32 security Set Named Security Info obj name flags obj type[obj type] flags element['owner'] sid None None None except pywintypes error as exc log debug ' Failedtomake{ 0 }theowner {1 }' format principal exc[ 2 ] raise Command Execution Error ' Failedtosetowner {0 }' format exc[ 2 ] return True
@dec skip win 32 def test find cmd ls path find cmd 'ls' nt assert true path endswith 'ls'
def pow high p max denom 1024 assert p > 1 p Fraction 1 / Fraction p limit denominator max denom if 1 / p int 1 / p return int 1 / p p 1 - p return 1 / p p 1 - p
def check integrity models messages dict error [] warning [] for model in models validators []for name in dir model if not name startswith ' check' continueobj getattr model name if getattr obj 'validator type' None validators append obj for func in validators messages[func validator type] extend func for msg in sorted messages['error'] logger error 'E-%d %s %s %s' % msg for msg in sorted messages['warning'] logger warning 'W-%d %s %s %s' % msg
def path to file uri abspath return path path to uri abspath
def path to file uri abspath return path path to uri abspath
def survey build Questionnaire From Series series id complete id None questions survey get All Questions For Series series id return build Questions Form questions complete id
def survey build Questionnaire From Series series id complete id None questions survey get All Questions For Series series id return build Questions Form questions complete id
def print results results print report info results print pagination info results print profile info results print query results print column headers results print totals for all results results print rows results
def print results results print report info results print pagination info results print profile info results print query results print column headers results print totals for all results results print rows results
def lmbda v x if not isscalar v and isscalar x raise Value Error 'argumentsmustbescalars ' if v < 0 raise Value Error 'argumentmustbe> 0 ' n int v v0 v - n if n < 1 n1 1else n1 nv 1 n1 + v0 if v floor v vm vl dl specfun lamv v1 x else vm vl dl specfun lamn v1 x return vl[ n + 1 ] dl[ n + 1 ]
def lmbda v x if not isscalar v and isscalar x raise Value Error 'argumentsmustbescalars ' if v < 0 raise Value Error 'argumentmustbe> 0 ' n int v v0 v - n if n < 1 n1 1else n1 nv 1 n1 + v0 if v floor v vm vl dl specfun lamv v1 x else vm vl dl specfun lamn v1 x return vl[ n + 1 ] dl[ n + 1 ]
def test huber scaling invariant rng np random Random State 0 X y make regression with outliers huber Huber Regressor fit intercept False alpha 0 0 max iter 100 huber fit X y n outliers mask 1 huber outliers assert false np all n outliers mask 1 huber fit X 2 0 * y n outliers mask 2 huber outliers assert array equal n outliers mask 2 n outliers mask 1 huber fit 2 0 * X 2 0 * y n outliers mask 3 huber outliers assert array equal n outliers mask 3 n outliers mask 1
def check orphans cursor orphans cursor all '\nselectusername\nfromparticipants\nwherenotexists select*fromelsewherewhereelsewhere participant username \nandnotexists select*fromabsorptionswherearchived as username \n' assert len orphans 0 'missingelsewheres {}' format list orphans
def check orphans cursor orphans cursor all '\nselectusername\nfromparticipants\nwherenotexists select*fromelsewherewhereelsewhere participant username \nandnotexists select*fromabsorptionswherearchived as username \n' assert len orphans 0 'missingelsewheres {}' format list orphans
def check orphans cursor orphans cursor all '\nselectusername\nfromparticipants\nwherenotexists select*fromelsewherewhereelsewhere participant username \nandnotexists select*fromabsorptionswherearchived as username \n' assert len orphans 0 'missingelsewheres {}' format list orphans
def check orphans cursor orphans cursor all '\nselectusername\nfromparticipants\nwherenotexists select*fromelsewherewhereelsewhere participant username \nandnotexists select*fromabsorptionswherearchived as username \n' assert len orphans 0 'missingelsewheres {}' format list orphans
def check orphans cursor orphans cursor all '\nselectusername\nfromparticipants\nwherenotexists select*fromelsewherewhereelsewhere participant username \nandnotexists select*fromabsorptionswherearchived as username \n' assert len orphans 0 'missingelsewheres {}' format list orphans
def check orphans cursor orphans cursor all '\nselectusername\nfromparticipants\nwherenotexists select*fromelsewherewhereelsewhere participant username \nandnotexists select*fromabsorptionswherearchived as username \n' assert len orphans 0 'missingelsewheres {}' format list orphans
def check orphans cursor orphans cursor all '\nselectusername\nfromparticipants\nwherenotexists select*fromelsewherewhereelsewhere participant username \nandnotexists select*fromabsorptionswherearchived as username \n' assert len orphans 0 'missingelsewheres {}' format list orphans
def check orphans cursor orphans cursor all '\nselectusername\nfromparticipants\nwherenotexists select*fromelsewherewhereelsewhere participant username \nandnotexists select*fromabsorptionswherearchived as username \n' assert len orphans 0 'missingelsewheres {}' format list orphans
def provider Is Authoritative provider ID canonical ID lastbang canonical ID rindex ' ' parent canonical ID[ lastbang]return parent provider ID
def iter token lines tokenlist line []for token c in explode tokens tokenlist line append token c if c u'\n' yield line line [] yield line
def check can access node user key None api node None if user is None return Falseif not node can view Auth user user and api node node if key in node private link keys deleted status push status message ' Theview-onlylinksyouusedareexpired ' trust False raise HTTP Error http FORBIDDEN data {'message long' ' Userhasrestrictedaccesstothispage Ifthisshouldnothaveoccurredandtheissuepersists pleasereportitto<ahref "mailto support@osf io">support@osf io</a> '} return True
def isorted to sort return sorted to sort key lambda x x lower
@with devicedef listdir directory '/' return list sorted Adb Client list directory
def run shell command cmd child sp Popen cmd shell True stdout sp PIPE stderr sp STDOUT output child communicate [0 ]rc child returncodereturn output rc
def test Dict suffix ' Test'trim len suffix fdict dict [ fname[ - trim ] f for fname f in inspect getmembers modules[ name ] inspect isfunction if fname endswith suffix ] return fdict
@event u'forget' def forget value with Session as session log debug u'forgetcalledwith%s' value count 0field count 0for se in session query Seen Entry filter or Seen Entry title value Seen Entry task value all field count + len se fields count + 1log debug u'forgetting%s' se session delete se for sf in session query Seen Field filter Seen Field value value all se session query Seen Entry filter Seen Entry id sf seen entry id first field count + len se fields count + 1log debug u'forgetting%s' se session delete se return count field count
def pick channels regexp ch names regexp r re compile regexp return [k for k name in enumerate ch names if r match name ]
def pick channels regexp ch names regexp r re compile regexp return [k for k name in enumerate ch names if r match name ]
def regenerate user certificates student course key course None forced grade None template file None insecure False xqueue X Queue Cert Interface if insecure xqueue use https Falsegenerate pdf not has html certificates enabled course key course return xqueue regen cert student course key course course forced grade forced grade template file template file generate pdf generate pdf
@pytest mark networkdef test git with non editable where egg contains dev string script tmpdir result script pip 'install' '%s#egg django-devserver' % local checkout 'git+git //github com/dcramer/django-devserver git' tmpdir join 'cache' devserver folder script site packages / 'devserver' assert devserver folder in result files created str result
def directed connected components digr if not digr DIRECTED raise Exception '%sisnotadirectedgraph' % digr finishing times DFS loop digr get transpose nodes explored connected components [] [] for node in finishing times[ -1 ] component []outer dfs digr node nodes explored component if component nodes explored + componentconnected components append component return connected components
def esc code return '\x 1 b[{}m' format code
def should ignore paypal return settings DEBUG and 'sandbox' not in settings PAYPAL PERMISSIONS URL
def parse cookie data return k v for k v in parse cookie data if valid cookie name k
def forms if request env request method 'GET' if auth permission format 'json' response headers[' Content- Type'] 'application/json'return s3 base S3 Mobile Form List json else error 415 ' Invalidrequestformat' else error 405 ' Unsupportedrequestmethod'
def dmp deflate f u K if dmp zero p f u return 1 * u + 1 f F dmp to dict f u B [0 ] * u + 1 for M in F keys for i m in enumerate M B[i] igcd B[i] m for i b in enumerate B if not b B[i] 1B tuple B if all b 1 for b in B return B f H {}for A coeff in F items N [ a // b for a b in zip A B ]H[tuple N ] coeffreturn B dmp from dict H u K
def dmp deflate f u K if dmp zero p f u return 1 * u + 1 f F dmp to dict f u B [0 ] * u + 1 for M in F keys for i m in enumerate M B[i] igcd B[i] m for i b in enumerate B if not b B[i] 1B tuple B if all b 1 for b in B return B f H {}for A coeff in F items N [ a // b for a b in zip A B ]H[tuple N ] coeffreturn B dmp from dict H u K
def calc text angle start end text angle start + end / 2 0 shift angles text angle > np pi / 2 & text angle < 3 * np pi / 2 text angle[shift angles] text angle[shift angles] + np pi return text angle
def load bytes value units magnitudes {' Ki B' 1 ' Mi B' 2 ' Gi B' 3 ' Ti B' 4}if units not in magnitudes raise Invalid Units '{}notarecognizedunit' format units return int value * 1024 ** magnitudes[units]
def aggregate raters data n cat None data np asarray data n rows data shape[ 0 ]if n cat is None cat uni cat int np unique data ravel return inverse True n cat len cat uni data cat int reshape data shape else cat uni np arange n cat data datatt np zeros n rows n cat int for idx row in enumerate data ro np bincount row tt[idx len ro ] roreturn tt cat uni
def aggregate raters data n cat None data np asarray data n rows data shape[ 0 ]if n cat is None cat uni cat int np unique data ravel return inverse True n cat len cat uni data cat int reshape data shape else cat uni np arange n cat data datatt np zeros n rows n cat int for idx row in enumerate data ro np bincount row tt[idx len ro ] roreturn tt cat uni
def get coursetalk course key course key return u'{ 0 org} {0 course}' format course key
def get long description path if path with open path 'rt' as fp return fp read return None
def get vispy font filename face bold italic name face + '-' name + ' Regular' if not bold and not italic else '' name + ' Bold' if bold else '' name + ' Italic' if italic else '' name + ' ttf'return load data file 'fonts/%s' % name
def finger hash type None if hash type is None hash type opts ['hash type']return salt utils pem finger os path join opts ['pki dir'] 'minion pub' sum type hash type
def remove callable dic for key value in dic items if callable value del dic[key]return dic
@frappe whitelist def get doctype name None filters None if filters and not name name frappe db get value doctype json loads filters if not name raise Exception u' Nodocumentfoundforgivenfilters'doc frappe get doc doctype name if not doc has permission u'read' raise frappe Permission Errorreturn frappe get doc doctype name as dict
def main if len sys argv > 1 write Output '' join sys argv[ 1 ] else settings start Main Loop From Constructor get New Repository
def make model tuple model try if isinstance model tuple model tuple modelelif isinstance model str app label model name model split ' ' model tuple app label model name lower else model tuple model meta app label model meta model name assert len model tuple 2 return model tupleexcept Value Error Assertion Error raise Value Error " Invalidmodelreference'%s' Stringmodelreferencesmustbeoftheform'app label Model Name' " % model
def preflight check desired fromrepo **kwargs if 'pkg check db' not in salt return {}ret {'suggest' {} 'no suggest' []}pkginfo salt ['pkg check db'] fromrepo fromrepo *list desired keys **kwargs for pkgname in pkginfo if pkginfo[pkgname]['found'] is False if pkginfo[pkgname]['suggestions'] ret['suggest'][pkgname] pkginfo[pkgname]['suggestions']else ret['no suggest'] append pkgname return ret
def Time From Ticks ticks return Time *time localtime ticks [3 6]
def parse html list dictionary prefix '' ret {}regex re compile '^%s\\[ [0 - 9 ]+ \\] * $' % re escape prefix for field value in dictionary items match regex match field if not match continue index key match groups index int index if not key ret[index] valueelif isinstance ret get index dict ret[index][key] valueelse ret[index] Multi Value Dict {key [value]} return [ret[item] for item in sorted ret keys ]
def atomic fn @functools wraps fn @writedef inner *args **kwargs cursor connection cursor cursor execute 'SETTRANSACTIONISOLATIONLEVELSERIALIZABLE' with transaction atomic return fn *args **kwargs inner non atomic fnreturn inner
def update module conn module remote module conn modules[module name ]local file inspect getsourcefile module remote file inspect getsourcefile remote module upload file conn local filem remote file reload remote module
def changed filename filename cache filename + ' md 5 ' try md 5 cached open filename cache 'rb' read except IO Error md 5 cached '0 'with open filename 'rb' as f md 5 new md 5 sum f with open filename cache 'wb' as cf cf write md 5 new encode 'utf- 8 ' return md 5 cached md 5 new encode 'utf- 8 '
def set Closed Attribute revolutions xml Element xml Element attribute Dictionary['closed'] str evaluate get Evaluated Boolean Default revolutions < 1 'closed' xml Element lower
def pre startup setup logging if options verbose logging get Logger set Level logging DEBUG if options enable openflow pox openflow launch
def notify context publisher id event type priority payload if priority not in log levels raise Bad Priority Exception '%snotinvalidpriorities' % priority payload jsonutils to primitive payload convert instances True msg dict message id str uuid uuid 4 publisher id publisher id event type event type priority priority payload payload timestamp str timeutils utcnow for driver in get drivers try driver notify context msg except Exception as e LOG exception " Problem'% e s'attemptingtosendtonotificationsystem Payload % payload s" % dict e e payload payload
def notify context publisher id event type priority payload if priority not in log levels raise Bad Priority Exception '%snotinvalidpriorities' % priority payload jsonutils to primitive payload convert instances True msg dict message id str uuid uuid 4 publisher id publisher id event type event type priority priority payload payload timestamp str timeutils utcnow for driver in get drivers try driver notify context msg except Exception as e LOG exception " Problem'% e s'attemptingtosendtonotificationsystem Payload % payload s" % dict e e payload payload
def click component from menu category component type is advanced if is advanced world retry on exception click advanced ignored exceptions Assertion Error link world retry on exception lambda find matching button category component type ignored exceptions Assertion Error world retry on exception lambda link click
def test gnb pfit wrong nb features clf Gaussian NB clf fit X y assert raises Value Error clf partial fit np hstack X X y
def get config profiles {}curr Nonecmd ['netsh' 'advfirewall' 'show' 'allprofiles']for line in salt ['cmd run'] cmd python shell False splitlines if not curr tmp re search ' * Profile Settings ' line if tmp curr tmp group 1 elif line startswith ' State' profiles[curr] line split [1 ] 'ON' curr Nonereturn profiles
def suppress output fn save stdout sys stdouttry sys stdout Dummy File fn finally sys stdout save stdout
def create oebbook log path or stream opts reader None encoding 'utf- 8 ' populate True for regex wizard False specialize None from calibre ebooks oeb base import OEB Bookhtml preprocessor HTML Pre Processor log opts regex wizard callback regex wizard callback if not encoding encoding Noneoeb OEB Book log html preprocessor pretty print opts pretty print input encoding encoding if not populate return oebif specialize is not None oeb specialize oeb or oeb log ' Parsingallcontent ' if reader is None from calibre ebooks oeb reader import OEB Readerreader OEB Readerreader oeb path or stream return oeb
def set permissions vhost user conf ' *' write ' *' read ' *' runas None if runas is None and not salt utils is windows runas salt utils get user res salt ['cmd run all'] [ context ['rabbitmqctl'] 'set permissions' '-p' vhost user conf write read] runas runas python shell False msg ' Permissions Set'return format response res msg
def catalogue pre save instance sender **kwargs record Nonetry catalogue get catalogue record catalogue get record instance uuid except Environment Error as err msg ' Couldnotconnecttocataloguetosaveinformationforlayer"%s"' % instance name LOGGER warn msg err raise errif record is None return
def yaml encode data yrepr yaml representer Safe Representer ynode yrepr represent data data if not isinstance ynode yaml Scalar Node raise Type Error 'yaml encode onlyworkswith YAM Lscalardata failedfor{ 0 }' format type data tag ynode tag rsplit ' ' 1 [ -1 ]ret ynode valueif tag 'str' ret yaml dquote ynode value return ret
def yaml encode data yrepr yaml representer Safe Representer ynode yrepr represent data data if not isinstance ynode yaml Scalar Node raise Type Error 'yaml encode onlyworkswith YAM Lscalardata failedfor{ 0 }' format type data tag ynode tag rsplit ' ' 1 [ -1 ]ret ynode valueif tag 'str' ret yaml dquote ynode value return ret
def set proxy proxy user None password '' from nltk import compatif proxy is None try proxy getproxies ['http']except Key Error raise Value Error ' Couldnotdetectdefaultproxysettings' proxy handler Proxy Handler {'http' proxy} opener build opener proxy handler if user is not None password manager HTTP Password Mgr With Default Realm password manager add password realm None uri proxy user user passwd password opener add handler Proxy Basic Auth Handler password manager opener add handler Proxy Digest Auth Handler password manager install opener opener
@register simple tagdef bootstrap css rendered urls [render link tag bootstrap css url ]if bootstrap theme url rendered urls append render link tag bootstrap theme url return mark safe u'' join [url for url in rendered urls]
def Get Field In Document document field name for f in document field list if f name field name return freturn None
def prompt and delete repo repo dir no input False if no input ok to delete Trueelse question u" You'vecloned{}before Isitokaytodeleteandre-cloneit?" format repo dir ok to delete read user yes no question u'yes' if ok to delete rmtree repo dir else sys exit
def resources from path instance path if ' ' in path path path split ' ' else path [path]seen set nextlevel set [instance] first time Truewhile nextlevel thislevel nextlevelnextlevel set if path relation path pop 0 else relation Nonefor resource in thislevel if resource in seen continueif first time first time Falseelse yield resource seen add resource if relation is not None if is like list resource relation update nextlevel updateelse update nextlevel addupdate getattr resource relation
def resources from path instance path if ' ' in path path path split ' ' else path [path]seen set nextlevel set [instance] first time Truewhile nextlevel thislevel nextlevelnextlevel set if path relation path pop 0 else relation Nonefor resource in thislevel if resource in seen continueif first time first time Falseelse yield resource seen add resource if relation is not None if is like list resource relation update nextlevel updateelse update nextlevel addupdate getattr resource relation
def pearson score list 1 list 2 size len list 1 sum 1 sum list 1 sum 2 sum list 2 sum sq 1 sum [pow l 2 for l in list 1 ] sum sq 2 sum [pow l 2 for l in list 2 ] prod sum sum [ list 1 [i] * list 2 [i] for i in range size ] num prod sum - sum 1 * sum 2 / float size den sqrt sum sq 1 - pow sum 1 2 0 / size * sum sq 2 - pow sum 2 2 0 / size return num / den
def translate s tex tex greek dictionary get s if tex return texelif s lower in greek letters set return '\\' + s lower elif s in other symbols return '\\' + s else for key in sorted modifier dict keys key lambda k len k reverse True if s lower endswith key and len s > len key return modifier dict[key] translate s[ - len key ] return s
def dots to camel case dots def return upper match return match groups [0 ] upper return str DOTS sub return upper dots
def dots to camel case dots def return upper match return match groups [0 ] upper return str DOTS sub return upper dots
def dots to camel case dots def return upper match return match groups [0 ] upper return str DOTS sub return upper dots
@conf commands registerdef dyndns del nameserver name type 'ALL' ttl 10 zone name[ name find ' ' + 1 ]r sr 1 IP dst nameserver / UDP / DNS opcode 5 qd [DNSQR qname zone qtype 'SOA' ] ns [DNSRR rrname name type type rclass 'ANY' ttl 0 rdata '' ] verbose 0 timeout 5 if r and r haslayer DNS return r getlayer DNS rcodeelse return -1
def get conn opts profile None if profile is None profile opts get 'etcd returner' path opts get 'etcd returner root' '/salt/return' return salt utils etcd util get conn opts profile path
def estimate gaussian covariances tied resp X nk means reg covar avg X2 np dot X T X avg means 2 np dot nk * means T means covariance avg X2 - avg means 2 covariance / nk sum covariance flat[ len covariance + 1 ] + reg covarreturn covariance
def get Manipulated Paths close element Node loop prefix side Length if len loop < 2 return [loop]derivation Outline Derivation element Node prefix side Length loop Complex euclidean get Complex Path loop if derivation is Closed loop Complexes intercircle get Arounds From Loop loop Complex derivation radius else loop Complexes intercircle get Arounds From Path loop Complex derivation radius return euclidean get Vector 3 Paths loop Complexes loop[ 0 ] z
def setup platform hass config add devices discovery info None dev id config get CONF ID devname config get CONF NAME add devices [ En Ocean Switch dev id devname ]
def get request ip request return request META get 'HTTP X FORWARDED FOR' or request META get 'REMOTE ADDR' or request META get 'HTTP X REAL IP'
def update repository repo ctx rev None commands update get configured ui repo rev ctx rev
def DB Subject Lock Test f @functools wraps f def Decorator testinstance if testinstance TEST DBSUBJECTLOCKS return f testinstance else return testinstance skip Test ' Teststhatuselocksaredisabledforthisdatastore ' return Decorator
def validate setup for nested quota use ctxt resources nested quota driver fix allocated quotas False try project roots get all root project ids ctxt for root in project roots root proj get project hierarchy ctxt root subtree as ids True nested quota driver validate nested setup ctxt resources {root proj id root proj subtree} fix allocated quotas fix allocated quotas except exceptions Version Not Available msg ' Keystoneversion 3 orgreatermustbeusedtogetnestedquotasupport ' raise exception Cinder Exception message msg except exceptions Forbidden msg ' Mustrunthiscommandascloudadminusinga Keystonepolicy jsonwhichallowscloudadmintolistandgetanyproject ' raise exception Cinder Exception message msg
def validate setup for nested quota use ctxt resources nested quota driver fix allocated quotas False try project roots get all root project ids ctxt for root in project roots root proj get project hierarchy ctxt root subtree as ids True nested quota driver validate nested setup ctxt resources {root proj id root proj subtree} fix allocated quotas fix allocated quotas except exceptions Version Not Available msg ' Keystoneversion 3 orgreatermustbeusedtogetnestedquotasupport ' raise exception Cinder Exception message msg except exceptions Forbidden msg ' Mustrunthiscommandascloudadminusinga Keystonepolicy jsonwhichallowscloudadmintolistandgetanyproject ' raise exception Cinder Exception message msg
def get known settings return KNOWN SETTINGS values
def test sparse oneclasssvm X blobs make blobs n samples 100 centers 10 random state 0 X blobs sparse csr matrix X blobs datasets [[X sp None T] [X 2 sp None T2 ] [X blobs[ 80 ] None X blobs[ 80 ]] [iris data None iris data]]kernels ['linear' 'poly' 'rbf' 'sigmoid']for dataset in datasets for kernel in kernels clf svm One Class SVM kernel kernel random state 0 sp clf svm One Class SVM kernel kernel random state 0 check svm model equal clf sp clf *dataset
def test sparse oneclasssvm X blobs make blobs n samples 100 centers 10 random state 0 X blobs sparse csr matrix X blobs datasets [[X sp None T] [X 2 sp None T2 ] [X blobs[ 80 ] None X blobs[ 80 ]] [iris data None iris data]]kernels ['linear' 'poly' 'rbf' 'sigmoid']for dataset in datasets for kernel in kernels clf svm One Class SVM kernel kernel random state 0 sp clf svm One Class SVM kernel kernel random state 0 check svm model equal clf sp clf *dataset
def update subnet subnet name profile None conn auth profile return conn update subnet subnet name
def get module cache dirname init args None global module cacheif init args is None init args {}if module cache is None module cache Module Cache dirname **init args atexit register module cache on atexit elif init args logger warning ' Ignoringinitargumentsformodulecachebecauseitwascreatedpriortothiscall' if module cache dirname dirname logger warning ' Returningmodulecacheinstancewithdifferentdirname %s thanyourequested %s ' module cache dirname dirname return module cache
def get module cache dirname init args None global module cacheif init args is None init args {}if module cache is None module cache Module Cache dirname **init args atexit register module cache on atexit elif init args logger warning ' Ignoringinitargumentsformodulecachebecauseitwascreatedpriortothiscall' if module cache dirname dirname logger warning ' Returningmodulecacheinstancewithdifferentdirname %s thanyourequested %s ' module cache dirname dirname return module cache
def user registered cb user **kwargs siteconfig Site Configuration objects get current if siteconfig get u'mail send new user mail' mail new user user
def get readme path file path dir os path dirname file path readme os path join REPO ROOT dir 'README md' return readme
def root mean square error y real y pred y real y pred check arrays y real y pred return np sqrt np sum y pred - y real ** 2 / y real shape[ 0 ]
def require open func def wrapper self *args **kwargs if self closed raise IO Error errno EBADF 'I/ Ooperationonclosedfile' return func self *args **kwargs return wrapper
def addrow row 1 row 2 K return [ element 1 + element 2 for element 1 element 2 in zip row 1 row 2 ]
def reset indent Token Class def callback lexer match context text match group context indent stack []context indent -1 context next indent 0context block scalar indent None yield match start Token Class text context pos match end return callback
def get reader identity global FORMAT READER Sif FORMAT READERS is None import readers return FORMAT READERS get identity None
def has change path cmd sql return u'setsearch path' in sql lower
def has change path cmd sql return u'setsearch path' in sql lower
def has change path cmd sql return u'setsearch path' in sql lower
def test feature max length on feature name feature Feature from string FEATURE 3 assert equals feature max length 78
def latest common snapshot some others others set set others for snapshot in reversed some if snapshot in others set return snapshotreturn None
def scatter input target gpus def scatter map obj if isinstance obj Variable return Scatter target gpus obj return tuple zip *map scatter map obj return scatter map input
def list repos basedir None basedirs normalize basedir basedir repos {}log debug ' Searchingforreposin%s' basedirs for bdir in basedirs if not os path exists bdir continuefor repofile in os listdir bdir repopath '{ 0 }/{ 1 }' format bdir repofile if not repofile endswith ' repo' continuefilerepos parse repo file repopath [1 ]for reponame in filerepos keys repo filerepos[reponame]repo['file'] repopathrepos[reponame] reporeturn repos
def get thread exploration id thread id model feedback models Feedback Thread Model get by exp and thread id exploration id thread id return get thread from model model
def py default type name return {'double' '123 0' 'long' '123 ' 'integer' '123 ' 'string' "'string'" 'blob' "b'bytes'" 'boolean' ' True False' 'list' '[ ]' 'map' '{ }' 'structure' '{ }' 'timestamp' 'datetime 2015 1 1 '} get type name ' '
def rm host ip alias if not has pair ip alias return Truehfn get or create hostfile with salt utils fopen hfn as fp lines fp readlines for ind in range len lines tmpline lines[ind] strip if not tmpline continueif tmpline startswith '#' continuecomps tmpline split if comps[ 0 ] ip newline '{ 0 } DCTB DCTB ' format comps[ 0 ] for existing in comps[ 1 ] if existing alias continuenewline + '{ 0 }' format existing if newline strip ip lines[ind] ''else lines[ind] newline + os linesep with salt utils fopen hfn 'w+' as ofile ofile writelines lines return True
def rm host ip alias if not has pair ip alias return Truehfn get or create hostfile with salt utils fopen hfn as fp lines fp readlines for ind in range len lines tmpline lines[ind] strip if not tmpline continueif tmpline startswith '#' continuecomps tmpline split if comps[ 0 ] ip newline '{ 0 } DCTB DCTB ' format comps[ 0 ] for existing in comps[ 1 ] if existing alias continuenewline + '{ 0 }' format existing if newline strip ip lines[ind] ''else lines[ind] newline + os linesep with salt utils fopen hfn 'w+' as ofile ofile writelines lines return True
def reject spurious dots *items for list in items for tok in list if tok ' ' and type tok Hy Symbol raise Lex Exception ' Malformeddottedlist' tok start line tok start column
def parse set header value on update None if not value return Header Set None on update return Header Set parse list header value on update
def to report name if name in REPORTS return nameraise Usage Error ' Unrecognizedreport{} {}' format name to report coerce Doc
def auto kwargs function supported introspect arguments function @wraps function def call function *args **kwargs return function *args **{key value for key value in kwargs items if key in supported } return call function
def auto kwargs function supported introspect arguments function @wraps function def call function *args **kwargs return function *args **{key value for key value in kwargs items if key in supported } return call function
def discretize center 2D model x range y range x np arange *x range y np arange *y range x y np meshgrid x y return model x y
def test invalid upgrade strategy causes error script result script pip install local '--upgrade' '--upgrade-strategy bazinga' 'simple' expect error True assert result returncodeassert 'invalidchoice' in result stderr
def marketing link context processor request marketing urls configuration helpers get value 'MKTG URLS' settings MKTG URLS return dict [ 'MKTG URL ' + k marketing link k for k in settings MKTG URL LINK MAP viewkeys marketing urls viewkeys ]
def marketing link context processor request marketing urls configuration helpers get value 'MKTG URLS' settings MKTG URLS return dict [ 'MKTG URL ' + k marketing link k for k in settings MKTG URL LINK MAP viewkeys marketing urls viewkeys ]
def marketing link context processor request marketing urls configuration helpers get value 'MKTG URLS' settings MKTG URLS return dict [ 'MKTG URL ' + k marketing link k for k in settings MKTG URL LINK MAP viewkeys marketing urls viewkeys ]
def marketing link context processor request marketing urls configuration helpers get value 'MKTG URLS' settings MKTG URLS return dict [ 'MKTG URL ' + k marketing link k for k in settings MKTG URL LINK MAP viewkeys marketing urls viewkeys ]
def from array like ary stream 0 gpu data None if ary ndim 0 ary ary reshape 1 return Device ND Array ary shape ary strides ary dtype writeback ary stream stream gpu data gpu data
def test attribute access can compile u' foobarbaz ' can compile u' foo[bar]baz ' can compile u' foobar[baz][ 0 ]quux[frob] ' can compile u' foobar[ +1234 ]quux[frob] ' cant compile u' foobar baz[ 0 ]quux[frob] ' cant compile u' foobarbaz 0 quux[frob] ' cant compile u' foobarbaz[ 0 ]quux{frob} '
def retrieve endpoint 'incidents' api url None page id None api key None api version None params get api params api url api url page id page id api key api key api version api version if not validate api params params log error ' Invalid AP Iparams ' log error params return {'result' False 'comment' ' Invalid AP Iparams Seelogfordetails'}headers get headers params retrieve url '{base url}/v{version}/pages/{page id}/{endpoint} json' format base url params['api url'] version params['api version'] page id params['api page id'] endpoint endpoint return http request retrieve url headers headers
def Set Level level global Level Level level
def load MNIST labels filename with open filename 'r' as f magic np fromfile f dtype np dtype '>i 4 ' count 1 num labels np fromfile f dtype np dtype '>i 4 ' count 1 labels np fromfile f dtype np ubyte f close return labels
def load MNIST labels filename with open filename 'r' as f magic np fromfile f dtype np dtype '>i 4 ' count 1 num labels np fromfile f dtype np dtype '>i 4 ' count 1 labels np fromfile f dtype np ubyte f close return labels
def setup platform hass config add devices discovery info None import pywinkadd devices Wink Cover Device shade hass for shade in pywink get shades add devices Wink Cover Device door hass for door in pywink get garage doors
def get cmd m subcommand is install subcommand in ['install' 'update' 'patch'] is refresh subcommand 'refresh' cmd ['/usr/bin/zypper' '--quiet' '--non-interactive' '--xmlout']if is install or is refresh and m params['disable gpg check'] cmd append '--no-gpg-checks' cmd append subcommand if subcommand 'patch' and not is refresh cmd extend ['--type' m params['type']] if m check mode and subcommand 'search' cmd append '--dry-run' if is install cmd append '--auto-agree-with-licenses' if m params['disable recommends'] cmd append '--no-recommends' if m params['force'] cmd append '--force' if m params['oldpackage'] cmd append '--oldpackage' return cmd
def HTTPS port 443 **kwargs return rule port **kwargs
def bump cache for item item cache bump version get namespace for item item
def delete local cache tex root print u" Deletinglocalcachefor'{ 0 }' " format repr tex root local cache paths [ hidden local cache path local cache path tex root ]for cache path in local cache paths if os path exists cache path print u" Deletelocalcachefolder'{ 0 }'" format repr cache path shutil rmtree cache path
@login requireddef project version delete html request project slug version slug project get object or 404 Project objects for admin user request user slug project slug version get object or 404 Version objects public user request user project project only active False slug version slug if not version active version built Falseversion save broadcast type 'app' task tasks clear artifacts args [version pk] else return Http Response Bad Request " Can'tdelete HTM Lforanactiveversion " return Http Response Redirect reverse 'project version list' kwargs {'project slug' project slug}
def format return data retcode stdout None stderr None ret {'retcode' retcode}if stdout is not None ret['stdout'] stdoutif stderr is not None ret['stderr'] stderrreturn ret
def get preferred environment encoding return locale getpreferredencoding or u'utf- 8 '
def init path ' ' bare False if not os path exists path os mkdir path if bare return Repo init bare path else return Repo init path
def validate id birthday gd fix coordination number day True today datetime date today day int gd['day'] if fix coordination number day and day > 60 day - 60 if gd['century'] is None current year today yearyear int today strftime '%Y' - int today strftime '%y' + int gd['year'] if '%s%s% 02 d' % gd['year'] gd['month'] day > today strftime '%y%m%d' year - 100 if gd['sign'] '+' year - 100 else year int gd['century'] + gd['year'] if year < 1800 raise Value Errorbirth day datetime date year int gd['month'] day if birth day > today raise Value Errorreturn birth day
def validate id birthday gd fix coordination number day True today datetime date today day int gd['day'] if fix coordination number day and day > 60 day - 60 if gd['century'] is None current year today yearyear int today strftime '%Y' - int today strftime '%y' + int gd['year'] if '%s%s% 02 d' % gd['year'] gd['month'] day > today strftime '%y%m%d' year - 100 if gd['sign'] '+' year - 100 else year int gd['century'] + gd['year'] if year < 1800 raise Value Errorbirth day datetime date year int gd['month'] day if birth day > today raise Value Errorreturn birth day
def extract arguments text regexp re compile '\\/\\w* @\\w* *\\s* [\\s\\S]* ' re IGNORECASE result regexp match text return result group 2 if is command text else None
def Element tag *args **kw if '{' not in tag tag '{%s}%s' % atom ns tag return atom parser makeelement tag *args **kw
@publicdef sring exprs *symbols **options single Falseif not is sequence exprs exprs single [exprs] True exprs list map sympify exprs opt build options symbols options reps opt parallel dict from expr exprs opt if opt domain is None coeffs sum [list rep values for rep in reps] [] opt domain construct domain coeffs opt opt ring Poly Ring opt gens opt domain opt order polys list map ring from dict reps if single return ring polys[ 0 ] else return ring polys
@publicdef sring exprs *symbols **options single Falseif not is sequence exprs exprs single [exprs] True exprs list map sympify exprs opt build options symbols options reps opt parallel dict from expr exprs opt if opt domain is None coeffs sum [list rep values for rep in reps] [] opt domain construct domain coeffs opt opt ring Poly Ring opt gens opt domain opt order polys list map ring from dict reps if single return ring polys[ 0 ] else return ring polys
def burt table data variables values [ var value for var in variables for value in var values]table numpy zeros len values len values counts [len attr values for attr in variables]offsets numpy r [ 0 numpy cumsum counts ]for i in range len variables for j in range i + 1 var 1 variables[i]var 2 variables[j]cm contingency get contingency data var 2 var 1 start 1 end 1 offsets[i] offsets[i] + counts[i] start 2 end 2 offsets[j] offsets[j] + counts[j] table[start 1 end 1 start 2 end 2 ] + cmif i j table[start 2 end 2 start 1 end 1 ] + cm Treturn values table
def decrypt int cyphertext dkey n assert int cyphertext 'cyphertext' assert int dkey 'dkey' assert int n 'n' message pow cyphertext dkey n return message
@validate 'form' def valid att in label arch return not arch xpath '//label[not @foror@string ]'
@validate 'form' def valid att in label arch return not arch xpath '//label[not @foror@string ]'
def cleanup return get impl cleanup
def assert calculated changes for deployer case deployer node state node config nonmanifest datasets additional node states additional node config expected changes local state leases Leases cluster state compute cluster state node state additional node states nonmanifest datasets cluster configuration Deployment nodes {node config} additional node config leases leases changes deployer calculate changes cluster configuration cluster state local state case assert Equal expected changes changes
def assert calculated changes for deployer case deployer node state node config nonmanifest datasets additional node states additional node config expected changes local state leases Leases cluster state compute cluster state node state additional node states nonmanifest datasets cluster configuration Deployment nodes {node config} additional node config leases leases changes deployer calculate changes cluster configuration cluster state local state case assert Equal expected changes changes
def create simple html directive name pre post has content True match titles False node class type name replace '-' ' ' nodes General nodes Element {} def visit html self node self body append pre def depart html self node self body append post def run directive self node node class if has content text self contentself state nested parse text self content offset node match titles match titles self state document settings record dependencies add file return [node]directive class type name title + ' Directive' Directive {'has content' has content 'run' run directive} def setup app app add node node class html visit html depart html app add directive name directive class return node class directive class setup
def generate zip package target sources sources dir zip zipfile Zip File target 'w' zipfile ZIP DEFLATED manifest archive package sources zip write sources sources dir zip writestr PACKAGE MANIFEST '\n' join manifest + '\n' zip close return None
def generate zip package target sources sources dir zip zipfile Zip File target 'w' zipfile ZIP DEFLATED manifest archive package sources zip write sources sources dir zip writestr PACKAGE MANIFEST '\n' join manifest + '\n' zip close return None
def lazy loading proxy for interface interface loader class Lazy Loading Proxy proxy For Interface interface ' original' cached original Nonedef init self '\n Theinitializerofaclassgeneratedby``proxy For Interface``\nexpectsthewrapped"original"objectasanargument Overrride\nthathere \n'@propertydef original self if self cached original is None self cached original loader return self cached originalreturn Lazy Loading Proxy
def lazy loading proxy for interface interface loader class Lazy Loading Proxy proxy For Interface interface ' original' cached original Nonedef init self '\n Theinitializerofaclassgeneratedby``proxy For Interface``\nexpectsthewrapped"original"objectasanargument Overrride\nthathere \n'@propertydef original self if self cached original is None self cached original loader return self cached originalreturn Lazy Loading Proxy
def repack pkgs pkgs normalize True if normalize and 'pkg normalize name' in salt normalize name salt ['pkg normalize name']else normalize name lambda pkgname pkgname return dict [ normalize name str x str y if y is not None else y for x y in six iteritems salt utils repack dictlist pkgs ]
def Make Destination Key directory filename return utils Smart Str utils Join Path directory filename lstrip '/'
def Make Destination Key directory filename return utils Smart Str utils Join Path directory filename lstrip '/'
def path and line req path line re match '-r * \\ line \\d+ \\ $' req comes from groups return path int line
def tamper payload **kwargs def process match word match group 'word' if word upper in kb keywords return match group replace word '/* %s*/' % word else return match group ret Val payloadif payload ret Val re sub ' ?< \\W ?P<word>[A- Za-z ]+ ? [^\\w ] \\Z ' lambda match process match ret Val ret Val ret Val replace '/* ' '/* ' replace '*/' '*/' return ret Val
def add input cmd immediate False if immediate process stdin cmd else mpstate input queue put cmd
@contextmanagerdef assert No F Ds Leaked test case gc collect def process fds path File Path '/dev/fd' if not path exists raise Skip Test '/dev/fdisnotavailable ' return set [child basename for child in path children ] fds process fds try yield finally test case assert Equal process fds fds
def get proctoring requirements course key from edx proctoring api import get all exams for courserequirements []for exam in get all exams for course unicode course key if exam['is proctored'] and exam['is active'] and not exam['is practice exam'] try usage key Usage Key from string exam['content id'] proctor block modulestore get item usage key except Invalid Key Error Item Not Found Error LOGGER info " Invalidcontent id'%s'forproctoredblock'%s'" exam['content id'] exam['exam name'] proctor block Noneif proctor block requirements append {'namespace' 'proctored exam' 'name' exam['content id'] 'display name' exam['exam name'] 'start date' proctor block start if proctor block start else None 'criteria' {}} if requirements log msg " Registeringthefollowingas'proctored exam'creditrequirements {log msg}" format log msg requirements LOGGER info log msg return requirements
def get proctoring requirements course key from edx proctoring api import get all exams for courserequirements []for exam in get all exams for course unicode course key if exam['is proctored'] and exam['is active'] and not exam['is practice exam'] try usage key Usage Key from string exam['content id'] proctor block modulestore get item usage key except Invalid Key Error Item Not Found Error LOGGER info " Invalidcontent id'%s'forproctoredblock'%s'" exam['content id'] exam['exam name'] proctor block Noneif proctor block requirements append {'namespace' 'proctored exam' 'name' exam['content id'] 'display name' exam['exam name'] 'start date' proctor block start if proctor block start else None 'criteria' {}} if requirements log msg " Registeringthefollowingas'proctored exam'creditrequirements {log msg}" format log msg requirements LOGGER info log msg return requirements
def Get Registered Exe exe Alias return win 32 api Reg Query Value Get Root Key Get App Paths Key + '\\' + exe Alias
def mimetype serial return {' Content- Type' 'application/vnd blaze+%s' % serial name }
def Create RPC service stubmap None if stubmap is None stubmap apiproxystub stubmap Get Stub service assert stub ' Noapiproxyfoundforservice"%s"' % service assert hasattr stub ' Create RPC' ' Theservice"%s"doesn\'thave' + 'a Create RP Cmethod ' % service return stub Create RPC
def add Introspection xmlrpc xmlrpc put Sub Handler 'system' XMLRPC Introspection xmlrpc
def recreate field unbound if not isinstance unbound Unbound Field raise Value Error 'recreate fieldexpects Unbound Fieldinstance %swaspassed ' % type unbound return unbound field class *unbound args **unbound kwargs
def unpack callbacks cbs if cbs return [[i for i in f if i] for f in zip *cbs ]else return [ ]
def create ofb cipher factory **kwargs cipher state factory create base cipher kwargs iv kwargs pop 'IV' None IV kwargs pop 'iv' None if None None iv IV iv get random bytes factory block size if iv is not None if IV is not None raise Type Error " Youmusteitheruse'iv'or'IV' notboth" else iv I Vif kwargs raise Type Error ' Unknownparametersfor OFB %s' % str kwargs return Ofb Mode cipher state iv
def create ofb cipher factory **kwargs cipher state factory create base cipher kwargs iv kwargs pop 'IV' None IV kwargs pop 'iv' None if None None iv IV iv get random bytes factory block size if iv is not None if IV is not None raise Type Error " Youmusteitheruse'iv'or'IV' notboth" else iv I Vif kwargs raise Type Error ' Unknownparametersfor OFB %s' % str kwargs return Ofb Mode cipher state iv
def in 6 ismlladdr str return in 6 isincluded str 'ff 02 ' 16
def find dynamicsymbols expression exclude None t set {dynamicsymbols t}if exclude if iterable exclude exclude set set exclude else raise Type Error 'excludekwargmustbeiterable' else exclude set set return set [i for i in expression atoms Applied Undef Derivative if i free symbols t set ] - exclude set
def top container client get client status base status copy try dcontainer get container infos container [' Id']if is running dcontainer ret client top dcontainer if ret ret['mprocesses'] []titles ret[' Titles']for i in ret[' Processes'] data salt utils odict Ordered Dict for k j in enumerate titles data[j] i[k]ret['mprocesses'] append data valid status out ret id container comment ' Currenttopforcontainer' if not status['id'] invalid status else invalid status comment ' Container{ 0 }isnotrunning' format container except Exception invalid status id container out traceback format exc return status
@cronjobs registerdef update l10 n metric if settings STAGE returntop 60 docs get top docs 60 end date today - timedelta days 1 start end - timedelta days 30 locale visits googleanalytics visitors by locale start end total visits sum locale visits itervalues coverage 0for locale visits in locale visits iteritems if locale settings WIKI DEFAULT LANGUAGE num docs MAX DOCS UP TO DAT Eup to date docs MAX DOCS UP TO DAT Eelse up to date docs num docs get up to date count top 60 docs locale if num docs and total visits coverage + float up to date docs / num docs * float visits / total visits metric kind Metric Kind objects get code L10 N METRIC CODE day date today Metric objects create kind metric kind start day end day + timedelta days 1 value int coverage * 100
def get human readable disk usage d if platform system in [' Linux' ' Free BSD'] try return subprocess Popen ['du' '-sh' d] stdout subprocess PIPE communicate [0 ] split [0 ]except raise Cleanup Exception 'roscleanisnotsupportedonthisplatform' else raise Cleanup Exception 'roscleanisnotsupportedonthisplatform'
def create event name message type routing key 'everyone' **kwargs ret {'name' name 'changes' {} 'result' None 'comment' ''}if opts ['test'] ret['comment'] ' Needtocreateevent {0 }' format name return retres salt ['victorops create event'] message type message type routing key routing key **kwargs if res['result'] 'success' ret['result'] Trueret['comment'] ' Createdevent {0 }forentity{ 1 }' format name res['entity id'] else ret['result'] Falseret['comment'] ' Failedtocreateevent {0 }' format res['message'] return ret
def check CRC data check return compute CRC data check
def test iter evoked raw events picks get data epochs Epochs raw events[ 5] event id tmin tmax picks picks for ii ev in enumerate epochs iter evoked x ev datay epochs get data [ii ]assert array equal x y
def create membership **kwargs project kwargs pop 'project' Project Factory project points add Points Factory create project project value None defaults {'project' project 'user' User Factory create 'role' Role Factory create project project permissions list map lambda x x[ 0 ] MEMBERS PERMISSIONS }defaults update kwargs return Membership Factory create **defaults
def check package data first command class Decorated Command command def run self check package data self package data command run self return Decorated Command
@cronjobs registerdef survey recent askers if settings STAGE returntwo days ago date today - timedelta days 2 yesterday date today - timedelta days 1 emails Question objects filter created gte two days ago created lt yesterday values list 'creator email' flat True for email in emails add email to campaign 'askers' email statsd gauge 'survey askers' len emails
@cronjobs registerdef survey recent askers if settings STAGE returntwo days ago date today - timedelta days 2 yesterday date today - timedelta days 1 emails Question objects filter created gte two days ago created lt yesterday values list 'creator email' flat True for email in emails add email to campaign 'askers' email statsd gauge 'survey askers' len emails
def dict subset d keys result {}for key in keys if ' ' in key field subfield key split ' ' 1 if isinstance d get field collections Mapping subvalue dict subset d[field] [subfield] result[field] dict merge subvalue result get field {} elif field in d result[field] d[field]elif key in d result[key] d[key]return result
def make half violin x y fillcolor '# 1 f 77 b 4 ' linecolor 'rgb 0 0 0 ' text [ ' pdf y y ' + '{ 0 2f}' format x[i] + ' ' + '{ 0 2f}' format y[i] + ' ' for i in range len x ]return graph objs Scatter x x y y mode 'lines' name '' text text fill 'tonextx' fillcolor fillcolor line graph objs Line width 0 5 color linecolor shape 'spline' hoverinfo 'text' opacity 0 5
def millisecond to clocktime value return value * Gst MSECOND
def get event loop return current loop
def libvlc media player get xwindow p mi f Cfunctions get 'libvlc media player get xwindow' None or Cfunction 'libvlc media player get xwindow' 1 None ctypes c uint 32 Media Player return f p mi
def activity create context activity dict **kw check access 'activity create' context activity dict if 'ignore auth' in kw raise Exception ' Activity Streamcallingparametershavechangedignore authmustbepassedinthecontextnotasaparam' if not paste deploy converters asbool config get 'ckan activity streams enabled' 'true' returnmodel context['model']if getattr model Session 'revision' None activity dict['revision id'] model Session revision idelse activity dict['revision id'] Noneschema context get 'schema' or ckan logic schema default create activity schema data errors validate activity dict schema context if errors raise Validation Error errors activity model save activity dict save data context if not context get 'defer commit' model repo commit log debug " Created'%s'activity" % activity activity type return model dictize activity dictize activity context
def groupfinder userid request backend getattr request registry 'permission' None if not backend return []if request prefixed userid userid request prefixed useridreify key userid + ' principals' if reify key not in request bound data principals backend get user principals userid request bound data[reify key] principalsreturn request bound data[reify key]
@register u'yank-pop' def yank pop event buff event current bufferdoc before paste buff document before pasteclipboard event cli clipboardif doc before paste is not None buff document doc before pasteclipboard rotate buff paste clipboard data clipboard get data paste mode Paste Mode EMACS
def create and add parameters params global current parameterif is simple type params current parameter Simple Parameter params current option add parameter current parameter else for i in params if is simple type i current parameter Simple Parameter i else current parameter Typed Parameter parse typed parameter i current option add parameter current parameter
def format p value for num iters p num iters if num iters < 10 return ' Toofewiterstocomputep-value num iters %d ' % num iters decimal places int log 10 num iters + 1 result '% 1 ' + '%df' % decimal places % p return result
def check classification toy name Forest Classifier FOREST CLASSIFIERS[name]clf Forest Classifier n estimators 10 random state 1 clf fit X y assert array equal clf predict T true result assert equal 10 len clf clf Forest Classifier n estimators 10 max features 1 random state 1 clf fit X y assert array equal clf predict T true result assert equal 10 len clf leaf indices clf apply X assert equal leaf indices shape len X clf n estimators
def logspace xmin xmax N return np exp np linspace np log xmin np log xmax N
def logspace xmin xmax N return np exp np linspace np log xmin np log xmax N
def logspace xmin xmax N return np exp np linspace np log xmin np log xmax N
def default deadline for credit eligibility return datetime datetime now pytz UTC + datetime timedelta days getattr settings 'CREDIT ELIGIBILITY EXPIRATION DAYS' 365
def get pdherr code code & 2 ** 32 - 1 return pdh errcodes get code code
def config name from full name full name projects configs result full name split '/' if projects 'projects' or configs 'configs' raise Value Error ' Unexpectedformatofresource' full name ' Expected"projects/{proj}/configs/{cfg}"' return result
@ignore warnings category Deprecation Warning def check estimators fit returns self name Estimator X y make blobs random state 0 n samples 9 n features 4 y multioutput estimator convert y 2d name y X - X min estimator Estimator set testing parameters estimator set random state estimator assert true estimator fit X y is estimator
@ignore warnings category Deprecation Warning def check estimators fit returns self name Estimator X y make blobs random state 0 n samples 9 n features 4 y multioutput estimator convert y 2d name y X - X min estimator Estimator set testing parameters estimator set random state estimator assert true estimator fit X y is estimator
def multi call function contentkey *args **kwargs ret function *args **kwargs position ret get 'position' while position more function position position *args **kwargs ret[contentkey] extend more[contentkey] position more get 'position' return ret get contentkey
def multi call function contentkey *args **kwargs ret function *args **kwargs position ret get 'position' while position more function position position *args **kwargs ret[contentkey] extend more[contentkey] position more get 'position' return ret get contentkey
def pre scm buildstep registry xml parent data bsp XML Sub Element xml parent 'org jenkinsci plugins pre SC Mbuildstep Pre SCM Build Steps Wrapper' bs XML Sub Element bsp 'build Steps' for step in data for edited node in create builders registry step bs append edited node
def pre scm buildstep registry xml parent data bsp XML Sub Element xml parent 'org jenkinsci plugins pre SC Mbuildstep Pre SCM Build Steps Wrapper' bs XML Sub Element bsp 'build Steps' for step in data for edited node in create builders registry step bs append edited node
def zalpha colors zs colors get colors colors len zs if len zs norm Normalize min zs max zs sats 1 - norm zs * 0 7 colors [ c[ 0 ] c[ 1 ] c[ 2 ] c[ 3 ] * s for c s in zip colors sats ]return colors
def zalpha colors zs colors get colors colors len zs if len zs norm Normalize min zs max zs sats 1 - norm zs * 0 7 colors [ c[ 0 ] c[ 1 ] c[ 2 ] c[ 3 ] * s for c s in zip colors sats ]return colors
def process and sort s force ascii full process True ts utils full process s force ascii force ascii if full process else s tokens ts split sorted string u'' join sorted tokens return sorted string strip
def get profiler results dir autodir return os path join autodir 'results' 'default' 'profiler sync' 'profiling'
def get profiler results dir autodir return os path join autodir 'results' 'default' 'profiler sync' 'profiling'
@ get clientdef image get all client filters None marker None limit None sort key None sort dir None member status 'accepted' is public None admin as user False return tag False v1 mode False sort key ['created at'] if not sort key else sort key sort dir ['desc'] if not sort dir else sort dir return client image get all filters filters marker marker limit limit sort key sort key sort dir sort dir member status member status is public is public admin as user admin as user return tag return tag v1 mode v1 mode
def get user id username rv query db 'selectuser idfromuserwhereusername ?' [username] one True return rv[ 0 ] if rv else None
def websafe val if val is None return ''if not isinstance val unicode val str val return htmlquote val
def translate output output sensors data dict {}sensors data array output split '\n\n' for sensor data in sensors data array sensor data dict process sensor sensor data if not sensor data dict continuesensor type get sensor type sensor data dict sensor id sensor data dict[' Sensor ID']if ' Sensor Reading' in sensor data dict sensors data dict setdefault sensor type {} [sensor id] sensor data dictif not sensors data dict raise ipmiexcept IPMI Exception 'parse IPM Isensordatafailed Nodataretrievedfromgiveninput' return sensors data dict
def build tool panel section select field app options []for section id section name in app toolbox get sections options append section name section id select field Select Field name 'tool panel section id' field id 'tool panel section select' for option tup in options select field add option option tup[ 0 ] option tup[ 1 ] return select field
def seconds to time x t int x * 10 ** 6 ms t % 10 ** 6 t t // 10 ** 6 s t % 60 t t // 60 m t % 60 t t // 60 h treturn time h m s ms
def test io subclass from nipype interfaces io import IO Basefrom nipype interfaces base import Dynamic Traited Specclass Test KV IO Base always run Trueoutput spec Dynamic Traited Specdef list outputs self outputs {}outputs[u'test'] 1outputs[u'foo'] u'bar'return outputswf pe Workflow u'testkv' def testx 2 test return test * 2 kvnode pe Node Test KV name u'testkv' from nipype interfaces utility import Functionfunc pe Node Function input names [u'test'] output names [u'test 2 '] function testx 2 name u'func' exception not raised Truetry wf connect kvnode u'test' func u'test' except Exception as e if u' Moduletestkvhasnooutputcalledtest' in e exception not raised Falseassert exception not raised
def test io subclass from nipype interfaces io import IO Basefrom nipype interfaces base import Dynamic Traited Specclass Test KV IO Base always run Trueoutput spec Dynamic Traited Specdef list outputs self outputs {}outputs[u'test'] 1outputs[u'foo'] u'bar'return outputswf pe Workflow u'testkv' def testx 2 test return test * 2 kvnode pe Node Test KV name u'testkv' from nipype interfaces utility import Functionfunc pe Node Function input names [u'test'] output names [u'test 2 '] function testx 2 name u'func' exception not raised Truetry wf connect kvnode u'test' func u'test' except Exception as e if u' Moduletestkvhasnooutputcalledtest' in e exception not raised Falseassert exception not raised
def test io subclass from nipype interfaces io import IO Basefrom nipype interfaces base import Dynamic Traited Specclass Test KV IO Base always run Trueoutput spec Dynamic Traited Specdef list outputs self outputs {}outputs[u'test'] 1outputs[u'foo'] u'bar'return outputswf pe Workflow u'testkv' def testx 2 test return test * 2 kvnode pe Node Test KV name u'testkv' from nipype interfaces utility import Functionfunc pe Node Function input names [u'test'] output names [u'test 2 '] function testx 2 name u'func' exception not raised Truetry wf connect kvnode u'test' func u'test' except Exception as e if u' Moduletestkvhasnooutputcalledtest' in e exception not raised Falseassert exception not raised
def tree hash fo hashes []hashes extend fo while len hashes > 1 new hashes []while True if len hashes > 1 first hashes pop 0 second hashes pop 0 new hashes append hashlib sha 256 first + second digest elif len hashes 1 only hashes pop 0 new hashes append only else breakhashes extend new hashes return hashes[ 0 ]
def tree hash fo hashes []hashes extend fo while len hashes > 1 new hashes []while True if len hashes > 1 first hashes pop 0 second hashes pop 0 new hashes append hashlib sha 256 first + second digest elif len hashes 1 only hashes pop 0 new hashes append only else breakhashes extend new hashes return hashes[ 0 ]
def relative luminance color rgb mpl colors color Converter to rgba array color [ 3]rgb np where rgb < 0 03928 rgb / 12 92 rgb + 0 055 / 1 055 ** 2 4 lum rgb dot [0 2126 0 7152 0 0722 ] try return lum item except Value Error return lum
def wait Until All Disconnected reactor protocols lc Nonedef check if not True in [x transport connected for x in protocols] lc stop lc task Looping Call check lc clock reactorreturn lc start 0 01 now True
def fix multiple roots node real nodes [x for x in node if not isinstance x SKIPPED ELEMENT TYPES ]if len real nodes > 1 data node etree Element 'data' for child in node data node append child node append data node
def check array instances evaluator instance if not settings dynamic array additions return instance var argsai Array Instance evaluator instance from jedi evaluate import paramreturn param Arguments evaluator [ Already Evaluated [ai] ]
def fitsopen name mode 'readonly' memmap None save backup False cache True lazy load hdus None **kwargs from import confif memmap is None memmap None if conf use memmap else False else memmap bool memmap if lazy load hdus is None lazy load hdus conf lazy load hduselse lazy load hdus bool lazy load hdus if 'uint 16 ' in kwargs and 'uint' not in kwargs kwargs['uint'] kwargs['uint 16 ']del kwargs['uint 16 ']warnings warn ' Theuint 16 keywordargumentisdeprecatedsincev 1 1 0 Usetheuintargumentinstead ' Astropy Deprecation Warning if 'uint' not in kwargs kwargs['uint'] conf enable uintif not name raise Value Error ' Emptyfilename {}' format repr name return HDU List fromfile name mode memmap save backup cache lazy load hdus **kwargs
def fitsopen name mode 'readonly' memmap None save backup False cache True lazy load hdus None **kwargs from import confif memmap is None memmap None if conf use memmap else False else memmap bool memmap if lazy load hdus is None lazy load hdus conf lazy load hduselse lazy load hdus bool lazy load hdus if 'uint 16 ' in kwargs and 'uint' not in kwargs kwargs['uint'] kwargs['uint 16 ']del kwargs['uint 16 ']warnings warn ' Theuint 16 keywordargumentisdeprecatedsincev 1 1 0 Usetheuintargumentinstead ' Astropy Deprecation Warning if 'uint' not in kwargs kwargs['uint'] conf enable uintif not name raise Value Error ' Emptyfilename {}' format repr name return HDU List fromfile name mode memmap save backup cache lazy load hdus **kwargs
def attach const node node name value if not name in node special attributes attach local node node const factory value name
def fontify Python document def matcher node return node node Name 'pre' and node has Attribute 'class' and node get Attribute 'class' 'python' for node in domhelpers find Elements document matcher fontify Python Node node
def query event None method 'GET' args None header dict None data None secret key salt ['config get'] 'ifttt secret key' or salt ['config get'] 'ifttt secret key' path 'https //maker ifttt com/trigger/{ 0 }/with/key/{ 1 }' format event secret key if header dict is None header dict {' Content-type' 'application/json'}if method 'POST' header dict[' Accept'] 'application/json'result salt utils http query path method params {} data data header dict header dict decode True decode type 'auto' text True status True cookies True persist session True opts opts backend 'requests' return result
@depends HAS PYVMOMI def get vsan enabled host username password protocol None port None host names None service instance salt utils vmware get service instance host host username username password password protocol protocol port port host names check hosts service instance host host names ret {}for host name in host names host ref get host ref service instance host host name host name vsan config host ref config vsan Host Configif vsan config is None msg "VSAN System Config Managerisunsetforhost'{ 0 }' " format host name log debug msg ret update {host name {' Error' msg}} else ret update {host name {'VSAN Enabled' vsan config enabled}} return ret
def get courses accessible to user request if Global Staff has user request user courses in process course actions accessible courses summary list request else try courses in process course actions accessible courses list from groups request except Access List Fallback courses in process course actions accessible courses summary list request return courses in process course actions
def delete manifestation node state manifestation dataset id manifestation dataset dataset idnode state node state transform ['manifestations' dataset id] discard node state node state transform ['paths' dataset id] discard node state node state transform ['devices' UUID dataset id ] discard return node state
def insert system roles system roles System Role get valid values for role name in system roles description role namerole db Role DB name role name description description system True try Role insert role db log not unique error as debug True except Stack Storm DB Object Conflict Error Not Unique Error pass
@register inclusion tag u'admin/widgets/w-actions html' takes context True def admin actions context request context get u'request' if u' popup' not in request REQUEST or u'pop' not in request REQUEST request context {u'show sidebar' True u'count users' User objects count u'count review groups' Group objects count u'count default reviewers' Default Reviewer objects count u'count repository' Repository objects accessible request user visible only False count u'count webhooks' Web Hook Target objects count u'count hosting accounts' Hosting Service Account objects count u'has cache stats' get has cache stats u'version' get version string }else request context {u'show sidebar' False}return Request Context request request context
def guess kern maxfiles return 65536
def remove identity node graph node portinputs portoutputs node ports graph node for field connections in list portoutputs items if portinputs propagate internal output graph node field connections portinputs else propagate root output graph node field connections graph remove nodes from [node] logger debug u' Removedtheidentitynode%sfromthegraph ' % node
def Wmi Time To Epoch cimdatetime str re match TIME WMI RE match cimdatetime str try t dict re match groupdict flt time time strptime t dict['date'] '%Y%m%d%H%M%S' epoch time int calendar timegm flt time * 1000000 epoch time + int t dict['subsecond'] return epoch timeexcept Key Error Attribute Error return 0
def list public ip blocks module driver network domain try blocks driver ex list public ip blocks network domain return blocksexcept Dimension Data API Exception e get exception module fail json msg ' Errorretreving Public IP Blocks %s' % e
def make opt parser command descriptions []for name in sorted commands iterkeys command commands[name]params '' join [ '<%s>' % param for param in command required] + [ '[<%s>]' % param for param in command optional] command descriptions append '%%prog[options]%s%s' % name params command usage 'usage %s\n' % '\n' join command descriptions parser optparse Option Parser usage command usage parser add option '-d' '--dest dir' dest 'dest dir' default os getcwd help ' Writegeneratedfilesto DIR' metavar 'DIR' parser add option '-f' '--force' action 'store true' dest 'force' default False help ' Forceoverwriteofexistingfiles' return parser
def ignore missing key data errors context value data get key if value is missing or value is None data pop key None raise Stop On Error
def get Reg Info disp host info {} sync True iq Iq 'get' NS REGISTER to host for i in info keys iq set Tag Data i info[i] if sync resp disp Send And Wait For Response iq Received Reg Info disp Dispatcher resp host return respelse disp Send And Call For Response iq Received Reg Info {'agent' host}
def Throttle Layout bandwidth limit http limit rps limit bulkloader limits dict remote api throttle NO LIMITS bulkloader limits update {remote api throttle BANDWIDTH UP bandwidth limit remote api throttle BANDWIDTH DOWN bandwidth limit remote api throttle REQUESTS http limit remote api throttle HTTPS BANDWIDTH UP bandwidth limit remote api throttle HTTPS BANDWIDTH DOWN bandwidth limit remote api throttle HTTPS REQUESTS http limit remote api throttle ENTITIES FETCHED rps limit remote api throttle ENTITIES MODIFIED rps limit} return bulkloader limits
def virtual if 'vmadm create' in salt and 'imgadm list' in salt return Trueelse return False '{ 0 }statemodulecanonlybeloadedon Smart O Scomputednodes' format virtualname
def exact ratio x try if type x is float or type x is Decimal return x as integer ratio try return x numerator x denominator except Attribute Error try return x as integer ratio except Attribute Error passexcept Overflow Error Value Error assert not isfinite x return x None msg "can'tconverttype'{}'tonumerator/denominator"raise Type Error msg format type x name
def exact ratio x try if type x is float or type x is Decimal return x as integer ratio try return x numerator x denominator except Attribute Error try return x as integer ratio except Attribute Error passexcept Overflow Error Value Error assert not isfinite x return x None msg "can'tconverttype'{}'tonumerator/denominator"raise Type Error msg format type x name
def assert logs log action node key index -1 def outer wrapper func @functools wraps func def wrapper self *args **kwargs node getattr self node key last log node logs latest func self *args **kwargs node reload new log node logs order by '-date' [ - index - 1 ]assert not equal last log id new log id assert equal new log action log action node save return wrapperreturn outer wrapper
def assert logs log action node key index -1 def outer wrapper func @functools wraps func def wrapper self *args **kwargs node getattr self node key last log node logs latest func self *args **kwargs node reload new log node logs order by '-date' [ - index - 1 ]assert not equal last log id new log id assert equal new log action log action node save return wrapperreturn outer wrapper
def propset dict propset if propset is None return {}return {prop name prop val for prop in propset}
def atleast 3d *arys res []for a in arys if not isinstance a cupy ndarray raise Type Error ' Onlycupyarrayscanbeatleast 3d' if a ndim 0 a a reshape 1 1 1 elif a ndim 1 a a[ None None]elif a ndim 2 a a[ None]res append a if len res 1 res res[ 0 ]return res
def cyclic pattern search buf result []pattern cyclic pattern p re compile '[' + re escape to binary string cyclic pattern charset + ']{ 4 }' found p finditer buf found list found for m in found s buf[m start m end ]i pattern find s k 0while i -1 and len s > 4 s s[ 1 ]k + 1i pattern find s if i -1 result + [ m start + k len s i ]return result
def cyclic pattern search buf result []pattern cyclic pattern p re compile '[' + re escape to binary string cyclic pattern charset + ']{ 4 }' found p finditer buf found list found for m in found s buf[m start m end ]i pattern find s k 0while i -1 and len s > 4 s s[ 1 ]k + 1i pattern find s if i -1 result + [ m start + k len s i ]return result
def set harddisk sleep minutes value validate sleep minutes cmd 'systemsetup-setharddisksleep{ 0 }' format value salt utils mac utils execute return success cmd return salt utils mac utils confirm updated str value get harddisk sleep
def get proto use ssl config get cloud config value 'use ssl' get configured provider opts search global False default True if use ssl is True return 'https'return 'http'
def libvlc vlm set mux p instance psz name psz mux f Cfunctions get 'libvlc vlm set mux' None or Cfunction 'libvlc vlm set mux' 1 1 1 None ctypes c int Instance ctypes c char p ctypes c char p return f p instance psz name psz mux
def test noall tmpmod with tmpmod mkdir 'xontrib' join 'spameggs py' open 'w' as x x write '\nspam 1\neggs 2\n foobar 3\n' ctx xontrib context 'spameggs' assert ctx {'spam' 1 'eggs' 2}
def salt syndic import salt utils processsalt utils process notify systemd import salt cli daemonspid os getpid try syndic salt cli daemons Syndic syndic start except Keyboard Interrupt os kill pid 15
def get model by resource ref db api ref ref obj Resource Reference from string reference ref ref result db api query name ref obj name pack ref obj pack first return result
def make subreddit traffic report subreddits None num None if subreddits subreddit summary traffic Pageviews By Subreddit last month subreddits else subreddit summary traffic Pageviews By Subreddit top last month num report []for srname data in subreddit summary if srname Default SR name name '[frontpage]' url Noneelif srname in Subreddit specials name '[%s]' % srname url Noneelse name '/r/%s' % srname url name + '/about/traffic' report append name url data return report
def pad method dict method dict for key in AUTH BACKEND NAME MAP if key not in method dict method dict[key] Falsereturn method dict
def extract auth vars request if request META get 'HTTP X SENTRY AUTH' '' startswith ' Sentry' return request META['HTTP X SENTRY AUTH']elif request META get 'HTTP AUTHORIZATION' '' startswith ' Sentry' return request META['HTTP AUTHORIZATION']else args [ '%s %s' % i for i in request GET items if i[ 0 ] startswith 'sentry ' and i[ 0 ] 'sentry data' ]if args return ' Sentry%s' % ' ' join args return None
def extract auth vars request if request META get 'HTTP X SENTRY AUTH' '' startswith ' Sentry' return request META['HTTP X SENTRY AUTH']elif request META get 'HTTP AUTHORIZATION' '' startswith ' Sentry' return request META['HTTP AUTHORIZATION']else args [ '%s %s' % i for i in request GET items if i[ 0 ] startswith 'sentry ' and i[ 0 ] 'sentry data' ]if args return ' Sentry%s' % ' ' join args return None
def elide text length if length < 1 raise Value Error 'lengthmustbe> 1 ' if len text < length return textelse return text[ length - 1 ] + '\\u 2026 '
@pipeline stagedef manipulate files session task if not task skip if task should remove duplicates task remove duplicates session lib task manipulate files move session config['move'] copy session config['copy'] write session config['write'] link session config['link'] session session task finalize session
@pipeline stagedef manipulate files session task if not task skip if task should remove duplicates task remove duplicates session lib task manipulate files move session config['move'] copy session config['copy'] write session config['write'] link session config['link'] session session task finalize session
def parse Sdr s assert isinstance s basestring sdr [int c for c in s if c in '0 ' '1 ' ]if len sdr len s raise Value Error " Theprovidedstring%sismalformed Thestringshouldhaveonly 0 'sand 1 's " return sdr
def tuplize dict data dict tuplized dict {}for key value in data dict iteritems key list key split ' ' for num key in enumerate key list if num % 2 1 try key list[num] int key except Value Error raise df Data Error ' Badkey' tuplized dict[tuple key list ] valuereturn tuplized dict
def topk k x if x ndim 1 raise Value Error ' Topkonlyworksonarraysofonedimension' token tokenize k x name 'chunk topk-' + token dsk dict name i chunk topk k key for i key in enumerate x keys name 2 'topk-' + token dsk[ name 2 0 ] getitem np sort np concatenate list dsk slice -1 - k - 1 -1 chunks k return Array merge dsk x dask name 2 chunks dtype x dtype
def topk k x if x ndim 1 raise Value Error ' Topkonlyworksonarraysofonedimension' token tokenize k x name 'chunk topk-' + token dsk dict name i chunk topk k key for i key in enumerate x keys name 2 'topk-' + token dsk[ name 2 0 ] getitem np sort np concatenate list dsk slice -1 - k - 1 -1 chunks k return Array merge dsk x dask name 2 chunks dtype x dtype
def calc expected status length status short url length 23 status length 0for word in re split u'\\s' status if is url word status length + short url lengthelse status length + len word status length + len re findall u'\\s' status return status length
def urllib 2 download client download url filename resuming False assert not resuming print ' Downloading' download url 'to' filename ' 'request urllib 2 Request download url headers {' Cookie' 'gdriveid ' + client get gdriveid } response urllib 2 urlopen request import shutilwith open filename 'wb' as output shutil copyfileobj response output
def urllib 2 download client download url filename resuming False assert not resuming print ' Downloading' download url 'to' filename ' 'request urllib 2 Request download url headers {' Cookie' 'gdriveid ' + client get gdriveid } response urllib 2 urlopen request import shutilwith open filename 'wb' as output shutil copyfileobj response output
def urllib 2 download client download url filename resuming False assert not resuming print ' Downloading' download url 'to' filename ' 'request urllib 2 Request download url headers {' Cookie' 'gdriveid ' + client get gdriveid } response urllib 2 urlopen request import shutilwith open filename 'wb' as output shutil copyfileobj response output
def urllib 2 download client download url filename resuming False assert not resuming print ' Downloading' download url 'to' filename ' 'request urllib 2 Request download url headers {' Cookie' 'gdriveid ' + client get gdriveid } response urllib 2 urlopen request import shutilwith open filename 'wb' as output shutil copyfileobj response output
def string from path path if not path return ''path [ path part escape compat to unicode s for s in path]if not all map RE ELEMENT match path get logger warn " Cannotconvertpathtostring keyscontaininvalidcharacters shouldbealpha-numericorunderscore '%s'" % path string PATH STRING SEPARATOR CHAR join path return string
def to int input default 0 exception Value Error Type Error regexp None if regexp is True regexp re compile ' \\d+ ' elif isinstance regexp six string types regexp re compile regexp elif hasattr regexp 'search' passelif regexp is not None raise Type Error 'unknownargumentforregexpparameter' try if regexp match regexp search input if match input match groups [ -1 ]return int input except exception return default
def to int input default 0 exception Value Error Type Error regexp None if regexp is True regexp re compile ' \\d+ ' elif isinstance regexp six string types regexp re compile regexp elif hasattr regexp 'search' passelif regexp is not None raise Type Error 'unknownargumentforregexpparameter' try if regexp match regexp search input if match input match groups [ -1 ]return int input except exception return default
def to int input default 0 exception Value Error Type Error regexp None if regexp is True regexp re compile ' \\d+ ' elif isinstance regexp six string types regexp re compile regexp elif hasattr regexp 'search' passelif regexp is not None raise Type Error 'unknownargumentforregexpparameter' try if regexp match regexp search input if match input match groups [ -1 ]return int input except exception return default
def to int input default 0 exception Value Error Type Error regexp None if regexp is True regexp re compile ' \\d+ ' elif isinstance regexp six string types regexp re compile regexp elif hasattr regexp 'search' passelif regexp is not None raise Type Error 'unknownargumentforregexpparameter' try if regexp match regexp search input if match input match groups [ -1 ]return int input except exception return default
def top contributors l10 n start None end None locale None product None count 10 page 1 query Revision Metrics Mapping Type search facet 'creator id' filtered True size BIG NUMBER if locale is None query query filter ~ F locale settings WIKI DEFAULT LANGUAGE query apply filters query start end locale product return get creator counts query count page
def PRE k n return XXX k n PRE
def PRE k n return XXX k n PRE
def packages pkg list update False pkg list [pkg for pkg in pkg list if not is installed pkg ]if pkg list install pkg list update
def upgrade migrate engine meta Meta Data meta bind migrate engineclusters Table 'clusters' meta autoload True replication status Column 'replication status' String length 36 default 'not-capable' active backend id Column 'active backend id' String length 255 frozen Column 'frozen' Boolean nullable False default False server default text 'false' clusters create column replication status clusters create column frozen clusters create column active backend id
def cmd action parent cmd fn *hotkeys return qtutils add action parent cmd name lambda cmds do cmd fn *hotkeys
def cmd action parent cmd fn *hotkeys return qtutils add action parent cmd name lambda cmds do cmd fn *hotkeys
def cmd action parent cmd fn *hotkeys return qtutils add action parent cmd name lambda cmds do cmd fn *hotkeys
def get results arg bookmarks tower get bookmarks BOOKMARKS FILE if arg '' results sorted bookmarks key lambda x x sort order else titles alp fuzzy search arg bookmarks key lambda x x title paths alp fuzzy search arg bookmarks key lambda x x path results set titles union set paths return results
def get latest repository metadata app decoded repository id downloadable False sa session app model context currentrepository sa session query app model Repository get decoded repository id repo hg util get repo for repository app repository repository repo path None create False if downloadable changeset revision get latest downloadable changeset revision app repository repo else changeset revision get latest changeset revision app repository repo return get repository metadata by changeset revision app app security encode id repository id changeset revision
def remove certificate exception course key student try certificate exception Certificate Whitelist objects get user student course id course key except Object Does Not Exist raise Value Error ' Certificateexception user {user} doesnotexistincertificatewhitelist Pleaserefreshthepageandtryagain ' format user student username try generated certificate Generated Certificate objects get user student course id course key generated certificate invalidate log info u' Certificateinvalidatedfor%sincourse%swhenremovedfromcertificateexceptionlist' student username course key except Object Does Not Exist passcertificate exception delete
def remove certificate exception course key student try certificate exception Certificate Whitelist objects get user student course id course key except Object Does Not Exist raise Value Error ' Certificateexception user {user} doesnotexistincertificatewhitelist Pleaserefreshthepageandtryagain ' format user student username try generated certificate Generated Certificate objects get user student course id course key generated certificate invalidate log info u' Certificateinvalidatedfor%sincourse%swhenremovedfromcertificateexceptionlist' student username course key except Object Does Not Exist passcertificate exception delete
def make minimal cs comment overrides None ret {'type' 'comment' 'id' 'dummy' 'commentable id' 'dummy' 'thread id' 'dummy' 'parent id' None 'user id' '0 ' 'username' 'dummy' 'anonymous' False 'anonymous to peers' False 'created at' '1970 - 01 - 01 T 00 00 00 Z' 'updated at' '1970 - 01 - 01 T 00 00 00 Z' 'body' 'dummy' 'abuse flaggers' [] 'votes' {'up count' 0} 'endorsed' False 'child count' 0 'children' []}ret update overrides or {} return ret
def make minimal cs comment overrides None ret {'type' 'comment' 'id' 'dummy' 'commentable id' 'dummy' 'thread id' 'dummy' 'parent id' None 'user id' '0 ' 'username' 'dummy' 'anonymous' False 'anonymous to peers' False 'created at' '1970 - 01 - 01 T 00 00 00 Z' 'updated at' '1970 - 01 - 01 T 00 00 00 Z' 'body' 'dummy' 'abuse flaggers' [] 'votes' {'up count' 0} 'endorsed' False 'child count' 0 'children' []}ret update overrides or {} return ret
def create palette light color color palette Q Palette palette set Color Q Palette Inactive Q Palette Light saturated light color 50 palette set Color Q Palette Inactive Q Palette Midlight saturated light color 90 palette set Color Q Palette Inactive Q Palette Button light color palette set Color Q Palette Active Q Palette Light saturated color 50 palette set Color Q Palette Active Q Palette Midlight saturated color 90 palette set Color Q Palette Active Q Palette Button color palette set Color Q Palette Button Text Q Color '# 515151 ' return palette
def region code for number numobj country code numobj country coderegions COUNTRY CODE TO REGION CODE get country code None if regions is None return Noneif len regions 1 return regions[ 0 ]else return region code for number from list numobj regions
def get node creation time node date string node extra get 'created' node extra get 'launch time' if date string is None return Noneelse return parse date date string
def get correct indentation diff code filename code buffer String IO code output buffer String IO reindenter reindent Reindenter code buffer reindenter run reindenter write output buffer reindent output output buffer getvalue output buffer close if code reindent output diff generator difflib unified diff code splitlines True reindent output splitlines True fromfile filename tofile filename + ' reindented ' diff tuple map clean diff line for python bug 2142 diff generator diff '' join diff tuple return diffelse return None
def get correct indentation diff code filename code buffer String IO code output buffer String IO reindenter reindent Reindenter code buffer reindenter run reindenter write output buffer reindent output output buffer getvalue output buffer close if code reindent output diff generator difflib unified diff code splitlines True reindent output splitlines True fromfile filename tofile filename + ' reindented ' diff tuple map clean diff line for python bug 2142 diff generator diff '' join diff tuple return diffelse return None
@get '/scan/<taskid>/log/<start>/<end>' def scan log limited taskid start end json log messages list if taskid not in Data Store tasks logger warning '[%s] Invalidtask I Dprovidedtoscan log limited ' % taskid return jsonize {'success' False 'message' ' Invalidtask ID'} if not start isdigit or not end isdigit or end < start logger warning '[%s] Invalidstartorendvalueprovidedtoscan log limited ' % taskid return jsonize {'success' False 'message' ' Invalidstartorendvalue mustbedigits'} start max 1 int start end max 1 int end for time level message in Data Store current db execute 'SELEC Ttime level message FRO Mlogs WHER Etaskid ?AN Did> ?AN Did< ?ORDERB Yid ASC' taskid start end json log messages append {'time' time 'level' level 'message' message} logger debug '[%s] Retrievedscanlogmessagessubset' % taskid return jsonize {'success' True 'log' json log messages}
def get first day dt d years 0 d months 0 dt getdate dt overflow years month divmod dt month + d months - 1 12 year dt year + d years + overflow years return datetime date year month + 1 1
def get first day dt d years 0 d months 0 dt getdate dt overflow years month divmod dt month + d months - 1 12 year dt year + d years + overflow years return datetime date year month + 1 1
def probvec r out n r shape[ 0 ]r sort out[ 0 ] r[ 0 ]for i in range 1 n out[i] r[i] - r[ i - 1 ] out[n] 1 - r[ n - 1 ]
def create transactions table session create table '\n CREATETABLEIFNOTEXIST Stransactions \ntxid hashblob \noperationtinyint \nnamespacetext \npathblob \nstart timetimestamp \nis xgboolean \nin progressblob \nentityblob \ntaskblob \n PRIMARYKEY txid hash operation namespace path \n \n'statement Simple Statement create table retry policy NO RETRIES try session execute statement except cassandra Operation Timed Out logging warning ' Encounteredanoperationtimeoutwhilecreatingtransactionstable Waiting 1 minuteforschematosettle ' time sleep 60 raise
def Topologically Sorted graph get edges get edges memoize get edges visited set visiting set ordered nodes []def Visit node if node in visiting raise Cycle Error visiting if node in visited returnvisited add node visiting add node for neighbor in get edges node Visit neighbor visiting remove node ordered nodes insert 0 node for node in sorted graph Visit node return ordered nodes
def expand action data if isinstance data string types return u'{"index" {}}' data data data copy op type data pop u' op type' u'index' action {op type {}}for key in u' index' u' parent' u' percolate' u' routing' u' timestamp' u' ttl' u' type' u' version' u' version type' u' id' u' retry on conflict' if key in data action[op type][key] data pop key if op type u'delete' return action None return action data get u' source' data
def is visible to specific content groups xblock if not xblock group access return Falsefor partition in get user partition info xblock if any g['selected'] for g in partition['groups'] return Truereturn False
def system name ret {'name' name 'changes' {} 'result' None 'comment' ''}try if salt ['locale get locale'] name ret['result'] Trueret['comment'] ' Systemlocale{ 0 }alreadyset' format name return retif opts ['test'] ret['comment'] ' Systemlocale{ 0 }needstobeset' format name return retif salt ['locale set locale'] name ret['changes'] {'locale' name}ret['result'] Trueret['comment'] ' Setsystemlocale{ 0 }' format name return retelse ret['result'] Falseret['comment'] ' Failedtosetsystemlocaleto{ 0 }' format name return retexcept Command Execution Error as err ret['result'] Falseret['comment'] ' Failedtosetsystemlocale {0 }' format err return ret
def get num host queue entries **filter data return models Host Queue Entry query count filter data
@frappe whitelist def set value doctype name fieldname value None if fieldname u'idx' and fieldname in frappe model default fields frappe throw u' Cannoteditstandardfields' if not value values fieldnameif isinstance fieldname basestring try values json loads fieldname except Value Error values {fieldname u''}else values {fieldname value}doc frappe db get value doctype name [u'parenttype' u'parent'] as dict True if doc and doc parent and doc parenttype doc frappe get doc doc parenttype doc parent child doc getone {u'doctype' doctype u'name' name} child update values else doc frappe get doc doctype name doc update values doc save return doc as dict
def set log file fname None output format '% message s' overwrite None logger logging get Logger 'mne' handlers logger handlersfor h in handlers if isinstance h logging File Handler logging Stream Handler if isinstance h logging File Handler h close logger remove Handler h if fname is not None if op isfile fname and overwrite is None warnings warn ' Logentrieswillbeappendedtothefile Useoverwrite Falsetoavoidthismessageinthefuture ' Runtime Warning stacklevel 2 overwrite Falsemode 'w' if overwrite else 'a' lh logging File Handler fname mode mode else 'weshouldjustbeabletodo \nlh logging Stream Handler sys stdout \nbutbecausedoctestsusessomemagiconstdout wehavetodothis \n'lh logging Stream Handler Wrap Std Out lh set Formatter logging Formatter output format logger add Handler lh
def set log file fname None output format '% message s' overwrite None logger logging get Logger 'mne' handlers logger handlersfor h in handlers if isinstance h logging File Handler logging Stream Handler if isinstance h logging File Handler h close logger remove Handler h if fname is not None if op isfile fname and overwrite is None warnings warn ' Logentrieswillbeappendedtothefile Useoverwrite Falsetoavoidthismessageinthefuture ' Runtime Warning stacklevel 2 overwrite Falsemode 'w' if overwrite else 'a' lh logging File Handler fname mode mode else 'weshouldjustbeabletodo \nlh logging Stream Handler sys stdout \nbutbecausedoctestsusessomemagiconstdout wehavetodothis \n'lh logging Stream Handler Wrap Std Out lh set Formatter logging Formatter output format logger add Handler lh
def resolve path urlconf None prefixer get url prefix if prefixer lang platform path fragment prefixer split path path path '/%s' % path fragment return django resolve path urlconf
def resolve path urlconf None prefixer get url prefix if prefixer lang platform path fragment prefixer split path path path '/%s' % path fragment return django resolve path urlconf
@app route '/' methods ['GET' 'POST'] def receive message labels []face annotations []attachments int request values get ' Num Media' 0 if not attachments return ' Nomediaattachmentsfound 'for i in range attachments media content type request values get ' Media Content Type%i' % i None if media content type in ACCEPTABLE FILE TYPES media url request values get ' Media Url%i' % i None image requests get media url content labels face annotations get labels image breakresp construct message labels face annotations return str resp
def dump privatekey type pkey cipher None passphrase None bio new mem buf if cipher is not None if passphrase is None raise Type Error 'ifavalueisgivenforcipheronemustalsobegivenforpassphrase' cipher obj lib EVP get cipherbyname byte string cipher if cipher obj ffi NULL raise Value Error ' Invalidciphername' else cipher obj ffi NUL Lhelper Passphrase Helper type passphrase if type FILETYPE PEM result code lib PEM write bio Private Key bio pkey pkey cipher obj ffi NULL 0 helper callback helper callback args helper raise if problem elif type FILETYPE ASN 1 result code lib i2 d Private Key bio bio pkey pkey elif type FILETYPE TEXT rsa ffi gc lib EVP PKEY get 1 RSA pkey pkey lib RSA free result code lib RSA print bio rsa 0 else raise Value Error 'typeargumentmustbe FILETYPE PEM FILETYPE ASN 1 or FILETYPE TEXT' openssl assert result code 0 return bio to string bio
def dump privatekey type pkey cipher None passphrase None bio new mem buf if cipher is not None if passphrase is None raise Type Error 'ifavalueisgivenforcipheronemustalsobegivenforpassphrase' cipher obj lib EVP get cipherbyname byte string cipher if cipher obj ffi NULL raise Value Error ' Invalidciphername' else cipher obj ffi NUL Lhelper Passphrase Helper type passphrase if type FILETYPE PEM result code lib PEM write bio Private Key bio pkey pkey cipher obj ffi NULL 0 helper callback helper callback args helper raise if problem elif type FILETYPE ASN 1 result code lib i2 d Private Key bio bio pkey pkey elif type FILETYPE TEXT rsa ffi gc lib EVP PKEY get 1 RSA pkey pkey lib RSA free result code lib RSA print bio rsa 0 else raise Value Error 'typeargumentmustbe FILETYPE PEM FILETYPE ASN 1 or FILETYPE TEXT' openssl assert result code 0 return bio to string bio
@pytest mark skipif 'not HAS BEAUTIFUL SOUP' def test no names table in ['<table>' '<tr><td> 1 </td></tr>' '<tr><td> 2 </td></tr>' '</table>']dat Table read table in format 'ascii html' assert dat colnames ['col 1 '] assert len dat 2 dat Table read table in format 'ascii html' names ['a'] assert dat colnames ['a'] assert len dat 2
def get path style path fill True style {}style['alpha'] path get alpha if style['alpha'] is None style['alpha'] 1style['edgecolor'] color to hex path get edgecolor if fill style['facecolor'] color to hex path get facecolor else style['facecolor'] 'none'style['edgewidth'] path get linewidth style['dasharray'] get dasharray path style['zorder'] path get zorder return style
def copy volume src dest size in m blocksize sync False execute utils execute ionice None throttle None sparse False if isinstance src six string types and isinstance dest six string types if not throttle throttle throttling Throttle get default with throttle subcommand src dest as throttle cmd copy volume with path throttle cmd['prefix'] src dest size in m blocksize sync sync execute execute ionice ionice sparse sparse else copy volume with file src dest size in m
def extract question values question required fields is reviewer response {'value' {'type' 'string'} 'comments' COMMENTS SCHEMA 'extra' {'type' 'array'}}if question get 'type' 'object' response['value'] get object jsonschema question required fields is reviewer elif question get 'type' 'choose' options question get 'options' if options response['value'] get options jsonschema options elif question get 'type' 'osf-upload' response['extra'] OSF UPLOAD EXTRA SCHEM Aif is reviewer del response['extra']if not question get 'type' 'object' del response['value']return response
def get object range page page size max id 5start min page - 1 * page size max id end min start + page size max id + 1 return range start end
def create gzip cache pelican for dirpath filenames in os walk pelican settings['OUTPUT PATH'] for name in filenames if should compress name filepath os path join dirpath name create gzip file filepath should overwrite pelican settings
def create gzip cache pelican for dirpath filenames in os walk pelican settings['OUTPUT PATH'] for name in filenames if should compress name filepath os path join dirpath name create gzip file filepath should overwrite pelican settings
def dll From Dll dllid if dllid None return Noneelif type '' type dllid return win 32 ui Load Library dllid else try dllid Get File Name except Attribute Error raise Type Error 'DL Lparametermustbe None afilenameoradllobject' return dllid
def new scratch view window text new view window new file new view set scratch True if is ST 3 new view run command 'append' {'characters' text} else new edit new view begin edit new view insert new edit 0 text new view end edit new edit return new view
def submittable timestamp timestamp return str timezone localtime timestamp split u' ' [0 ]
def submittable timestamp timestamp return str timezone localtime timestamp split u' ' [0 ]
@doctest decodef full path start Path files files list strings files base os path split start Path [0 ]return [os path join base f for f in files]
def mutate image dict to v1 image visibility image pop 'visibility' is image public 'public' visibility image['is public'] is image publicreturn image
def mutate image dict to v1 image visibility image pop 'visibility' is image public 'public' visibility image['is public'] is image publicreturn image
def sign int message dkey n return decrypt int message dkey n
def collapse braces src text nesting 0start index 0collapsed src text u''for index char in enumerate src text if nesting 0 collapsed src text + charif char u'{' if nesting 0 start index index + 1 nesting + 1if char u'}' if nesting > 0 nesting - 1if nesting 0 collapsed src text + charif nesting 0 collapsed src text + src text[start index ]return collapsed src text
def make paginated api response results None count 0 num pages 0 next link None previous link None return {'pagination' {'next' next link 'previous' previous link 'count' count 'num pages' num pages} 'results' results or [] }
def tgrep macro use action s l tokens assert len tokens 1 assert tokens[ 0 ][ 0 ] u'@' macro name tokens[ 0 ][ 1 ]def macro use n m None l None if m is None or macro name not in m raise Tgrep Exception u'macro{ 0 }notdefined' format macro name return m[macro name] n m l return macro use
def cms settings request from menus menu pool import Menu Renderer@lru cache lru cache maxsize None def get menu renderer from menus menu pool import menu poolreturn menu pool get renderer request toolbar get toolbar from request request get menu renderer lazy get menu renderer Menu Renderer return {'cms menu renderer' get menu renderer 'cms content renderer' toolbar content renderer 'CMS MEDIA URL' get cms setting 'MEDIA URL' 'CMS TEMPLATE' lambda get template from request request }
def rmse actual predicted return np sqrt mse actual predicted
def do collectstatic try build make collectstatic return Trueexcept OS Error System Error as ex LOG error " Failedtocollectthestaticfiles Pleasefixanyproblemandrun`%s--collectstatic'\n%s" % PROG NAME ex return False
def handle blacklist blacklist dirnames filenames for norecurs in blacklist if norecurs in dirnames dirnames remove norecurs elif norecurs in filenames filenames remove norecurs
def connected server and client case server factory client factory def connect client listening port return TCP 4 Client Endpoint reactor '127 0 0 1' listening port get Host port connect client factory return listen case TCP 4 Server Endpoint reactor 0 server factory add Callback connect client
def shanks A k n m 1 table [A subs k Integer j doit for j in range n + m + 2 ]table 2 table[ ]for i in range 1 m + 1 for j in range i n + m + 1 x y z table[ j - 1 ] table[j] table[ j + 1 ] table 2 [j] z * x - y ** 2 / z + x - 2 * y table table 2 [ ]return table[n]
def Get Unified Diff before after filename 'code' before before splitlines after after splitlines return '\n' join difflib unified diff before after filename filename ' original ' ' reformatted ' lineterm '' + '\n'
def set color formatter logger None **kw if logger is None logger logging get Logger if not logger handlers logging basic Config format msg logger handlers[ 0 ] formatter fmtfmt Color Formatter format msg **kw fmt colorfilters append xxx cyan logger handlers[ 0 ] set Formatter fmt
def update local plugin descriptor plugins structure []if os path isfile resources PLUGINS DESCRIPTOR structure json manager read json resources PLUGINS DESCRIPTOR for plug list in plugins plug {}plug[u'name'] plug list[ 0 ]plug[u'version'] plug list[ 1 ]plug[u'description'] plug list[ 2 ]plug[u'authors'] plug list[ 3 ]plug[u'home'] plug list[ 4 ]plug[u'download'] plug list[ 5 ]plug[u'plugin-descriptor'] plug list[ 6 ]structure append plug json manager write json structure resources PLUGINS DESCRIPTOR
def get queue name DEFAULT QUEUE NAME global queuesfullname add queue name prefix name try return queues[fullname]except Key Error log debug u' Initializingbackgroundjobqueue"{}"' format name redis conn connect queue queues[fullname] rq Queue fullname connection redis conn return queue
def fn outs mode None model None *args **kwargs model modelcontext model return model fn outs mode *args **kwargs
def test nospace entry tokenize ' foo onetwo ' [0 ]assert entry start line 1 assert entry start column 1 assert entry end line 1 assert entry end column 14 entry entry[ 1 ]assert entry start line 1 assert entry start column 5 assert entry end line 1 assert entry end column 13
def test nospace entry tokenize ' foo onetwo ' [0 ]assert entry start line 1 assert entry start column 1 assert entry end line 1 assert entry end column 14 entry entry[ 1 ]assert entry start line 1 assert entry start column 5 assert entry end line 1 assert entry end column 13
def auto Track clip pattern tt None fps None radius 20 xy 0 None if not autotracking possible raise IO Error ' Sorry autotrackrequires Open C Vforthemoment Install Open CV akacv 2 touseit ' if not xy 0 xy 0 find Around clip get frame tt[ 0 ] pattern if tt is None tt np arange 0 clip duration 1 0 / fps xys [xy 0 ]for t in tt[ 1 ] xys append find Around clip get frame t pattern xy xys[ -1 ] r radius xx yy zip *xys return Trajectory tt xx yy
def get info from caches app env account container None info get info from infocache env account container if info is None info get info from memcache app env account container return info
def encode bool name value dummy 0 dummy 1 return '\x 08 ' + name + value and '\x 01 ' or '\x 00 '
def add to path path if not os path isdir path raise Runtime Error ' Triedtoaddnonexistingpath' def samefile x y if x y return Truetry return os path samefile x y except IO Error OS Error Attribute Error return Falsesys path[ ] [x for x in sys path if not samefile path x ]sys path insert 0 path
@hook command @hook command 'tv prev' def tv last text bot None api key bot config get 'api keys' {} get 'tvdb' None if api key is None return 'error noapikeyset'episodes get episodes for series text api key if episodes['error'] return episodes['error']series name episodes['name']ended episodes['ended']episodes episodes['episodes']prev ep Nonetoday datetime date today for episode in reversed episodes ep info get episode info episode if ep info is None continue first aired air date episode desc ep infoif air date < today prev ep '{} {} ' format first aired episode desc breakif not prev ep return ' Therearenopreviouslyairedepisodesfor{} ' format series name if ended return '{}ended Thelastepisodeaired{} ' format series name prev ep return ' Thelastepisodeof{}aired{} ' format series name prev ep
@hook command @hook command 'tv prev' def tv last text bot None api key bot config get 'api keys' {} get 'tvdb' None if api key is None return 'error noapikeyset'episodes get episodes for series text api key if episodes['error'] return episodes['error']series name episodes['name']ended episodes['ended']episodes episodes['episodes']prev ep Nonetoday datetime date today for episode in reversed episodes ep info get episode info episode if ep info is None continue first aired air date episode desc ep infoif air date < today prev ep '{} {} ' format first aired episode desc breakif not prev ep return ' Therearenopreviouslyairedepisodesfor{} ' format series name if ended return '{}ended Thelastepisodeaired{} ' format series name prev ep return ' Thelastepisodeof{}aired{} ' format series name prev ep
def test world should be able to absorb lambdas assert not hasattr world 'named func' world absorb lambda 'absorbed' 'named func' assert hasattr world 'named func' assert callable world named func assert equals world named func 'absorbed' world spew 'named func' assert not hasattr world 'named func'
def snapper pre opts jid snapper pre Nonetry if not opts['test'] and opts get 'snapper states' snapper pre salt ['snapper create snapshot'] config opts get 'snapper states config' 'root' snapshot type 'pre' description ' Salt Staterunforjid{ 0 }' format jid pub jid jid except Exception log error ' Failedtocreatesnapperpresnapshotforjid {0 }' format jid return snapper pre
def get tox env from version version info sys version info[ 2]try return ACCEPTED VERSIONS[version info]except Key Error raise Environment Error ' Invalid Pythonversion' version info ' Acceptedversionsare' sorted ACCEPTED VERSIONS keys
def coherence x y fs 1 0 window 'hann' nperseg None noverlap None nfft None detrend 'constant' axis -1 freqs Pxx welch x fs window nperseg noverlap nfft detrend axis axis Pyy welch y fs window nperseg noverlap nfft detrend axis axis Pxy csd x y fs window nperseg noverlap nfft detrend axis axis Cxy np abs Pxy ** 2 / Pxx / Pyy return freqs Cxy
def TR 56 rv f g h max pow def f rv if not rv is Pow and rv base func f return rvif rv exp < 0 True return rvif rv exp > max True return rvif rv exp 2 return h g rv base args[ 0 ] ** 2 else if rv exp 4 e 2elif not pow if rv exp % 2 return rve rv exp // 2 else p perfect power rv exp if not p return rve rv exp // 2 return h g rv base args[ 0 ] ** 2 ** e return bottom up rv f
def TR 56 rv f g h max pow def f rv if not rv is Pow and rv base func f return rvif rv exp < 0 True return rvif rv exp > max True return rvif rv exp 2 return h g rv base args[ 0 ] ** 2 else if rv exp 4 e 2elif not pow if rv exp % 2 return rve rv exp // 2 else p perfect power rv exp if not p return rve rv exp // 2 return h g rv base args[ 0 ] ** 2 ** e return bottom up rv f
def cms documentation r default page default url row r recordif not row name r get vars get 'name' default page table r resource tablequery table name name & table deleted True row current db query select table id table title table body limitby 0 1 first if not row if name default page r error 404 current T ' Pagenotfound' next URL args current request args vars {} else from s3 import s3 redirect defaults 3 redirect default default url from s3 import S3 XML Contentsreturn {'bypass' True 'output' {'title' row title 'contents' S3 XML Contents row body }}
def prompt choice var name options choice map Ordered Dict u'{ 0 }' format i value for i value in enumerate options 1 if value[ 0 ] 'test' choices choice map keys default u' 1 'choice lines [u'{ 0 }-{ 1 }-{ 2 }' format c[ 0 ] c[ 1 ][ 0 ] c[ 1 ][ 1 ] for c in choice map items ]prompt u'\n' join u' Select{ 0 } ' format var name u'\n' join choice lines u' Choosefrom{ 0 }' format u' ' join choices user choice click prompt prompt type click Choice choices default default return choice map[user choice]
@contextmanagerdef inside transaction savepoint transaction savepoint try yield except Exception transaction savepoint rollback savepoint raiseelse transaction savepoint commit savepoint
@contextmanagerdef inside transaction savepoint transaction savepoint try yield except Exception transaction savepoint rollback savepoint raiseelse transaction savepoint commit savepoint
@task task ignore result True def retry open graph shares for user user from django facebook models import Open Graph Shareshares Open Graph Share objects recently failed filter user user [ 1000 ]shares list shares logger info 'retrying%ssharesforuser%s' len shares user for share in shares retry open graph share share reset retries True
@task task ignore result True def retry open graph shares for user user from django facebook models import Open Graph Shareshares Open Graph Share objects recently failed filter user user [ 1000 ]shares list shares logger info 'retrying%ssharesforuser%s' len shares user for share in shares retry open graph share share reset retries True
@task task ignore result True def retry open graph shares for user user from django facebook models import Open Graph Shareshares Open Graph Share objects recently failed filter user user [ 1000 ]shares list shares logger info 'retrying%ssharesforuser%s' len shares user for share in shares retry open graph share share reset retries True
def read file name with open name 'r' encoding 'utf- 8 ' as f return f read
def event timing True evt current context create event timing timing return evt
def sanitize Str value return get Unicode value replace '\n' '' replace '\r' ''
def pipeline property name **kwargs cache attr name ' %s' % name def getter self cached value getattr self cache attr name None if cached value return cached valueapp selfwhile True app getattr app 'app' None if not app breaktry value getattr app name except Attribute Error continuesetattr self cache attr name value return valueif 'default' in kwargs return kwargs['default']raise Attribute Error ' Noappsinpipelinehavea%sattribute' % name return property getter
def ball radius dtype np uint 8 n 2 * radius + 1 Z Y X np mgrid[ - radius radius n * 1j - radius radius n * 1j - radius radius n * 1j ]s X ** 2 + Y ** 2 + Z ** 2 return np array s < radius * radius dtype dtype
@taskdef sharejs ctx host None port None db url None cors allow origin None if host os environ['SHAREJS SERVER HOST'] hostif port os environ['SHAREJS SERVER PORT'] portif db url os environ['SHAREJS DB URL'] db urlif cors allow origin os environ['SHAREJS CORS ALLOW ORIGIN'] cors allow originif settings SENTRY DSN os environ['SHAREJS SENTRY DSN'] settings SENTRY DS Nshare server os path join settings ADDON PATH 'wiki' 'share Server js' ctx run 'node{ 0 }' format share server
@register inclusion tag 'bootstrap/breadcrumb html' takes context True def breadcrumb nav context breadcrumb []dashboard context request horizon['dashboard']try panel groups dashboard get panel groups except Key Error panel groups Nonepanel group Nonepanel context request horizon['panel']if panel groups for group in panel groups values if panel slug in group panels and group slug 'default' panel group groupbreakif panel get absolute url context request path panel Nonecustom breadcrumb context get 'custom breadcrumb' breadcrumb append dashboard name None if panel group breadcrumb append panel group name None if panel breadcrumb append panel name panel get absolute url if custom breadcrumb breadcrumb extend custom breadcrumb breadcrumb append context get 'page title' None return {'breadcrumb' breadcrumb}
def is builtin class method obj attr name classes [c for c in inspect getmro obj if attr name in c dict ]cls classes[ 0 ] if classes else object if not hasattr builtins safe getattr cls ' name ' '' return Falsereturn getattr builtins safe getattr cls ' name ' '' is cls
def is builtin class method obj attr name classes [c for c in inspect getmro obj if attr name in c dict ]cls classes[ 0 ] if classes else object if not hasattr builtins safe getattr cls ' name ' '' return Falsereturn getattr builtins safe getattr cls ' name ' '' is cls
def get key service None profile None if not profile get 'url' or not profile get 'token' raise Salt Configuration Error 'urland/ortokenmissingfromthetismsdbprofile' request {'token' profile['token'] 'encsecret' key}result http query profile['url'] method 'POST' data json dumps request decrypted result get 'body' if not decrypted log warning 'tism getsdbdecryptionrequestfailedwitherror{ 0 }' format result get 'error' 'unknown' return 'ERROR' + str result get 'status' 'unknown' return decrypted
def rackspace provisioner username key region keyname from libcloud compute providers import get driver Providerdriver get driver Provider RACKSPACE key username secret key region region provisioner Libcloud Provisioner driver driver keyname keyname image names IMAGE NAMES create node arguments lambda **kwargs {'ex config drive' 'true'} provision provision rackspace default size 'performance 1 - 8 ' get default user get default username return provisioner
def path wrapper func def wrapped node context None func func **kwargs 'wrapperfunctionhandlingcontext'if context is None context Inference Context context push node yielded set for res in func node context **kwargs if res class is Instance ares res proxiedelse ares resif not ares in yielded yield res yielded add ares return wrapped
def expand trig expr deep True return sympify expr expand deep deep trig True basic False log False mul False power exp False power base False multinomial False
def lookup Pointer name timeout None return get Resolver lookup Pointer name timeout
def split python version version None major version >> 24 & 255 minor version >> 16 & 255 micro version >> 8 & 255 release level version >> 4 & 15 serial version & 15 release level string RELEASE LEVEL NAMES get release level None if not release level string raise Value Error ' Badreleaselevel 0 x%xinversion 0 x% 08 x' % release level version return major minor micro release level string serial
def split python version version None major version >> 24 & 255 minor version >> 16 & 255 micro version >> 8 & 255 release level version >> 4 & 15 serial version & 15 release level string RELEASE LEVEL NAMES get release level None if not release level string raise Value Error ' Badreleaselevel 0 x%xinversion 0 x% 08 x' % release level version return major minor micro release level string serial
def set kernel var Popen ['sysctl' '-w' 'net ipv 4 conf all route localnet 1'] stdout DN stderr PIPE
def runner name **kwargs try jid orchestration jid except Name Error log debug ' Unabletofireargseventduetomissing orchestration jid ' jid Noneout salt ['saltutil runner'] name orchestration jid jid env env full return True **kwargs runner return out get 'return' if 'success' in out and not out['success'] ret {'name' name 'result' False 'changes' {} 'comment' runner return if runner return else " Runnerfunction'{ 0 }'failedwithoutcomment " format name }else ret {'name' name 'result' True 'changes' runner return if runner return else {} 'comment' " Runnerfunction'{ 0 }'executed " format name }ret[' orchestration '] Trueif 'jid' in out ret[' jid '] out['jid']return ret
def revoke config unused plugins config namespace installer config namespace authenticator ' None'if config key path is not None logger debug ' Revoking%susingcertkey%s' config cert path[ 0 ] config key path[ 0 ] key jose JWK load config key path[ 1 ] else logger debug ' Revoking%susing Account Key' config cert path[ 0 ] acc determine account config key acc keyacme client acme from config key config key cert crypto util pyopenssl load certificate config cert path[ 1 ] [0 ]logger debug ' Reasoncodeforrevocation %s' config reason try acme revoke jose Comparable X 509 cert config reason except acme errors Client Error as e return e messagedisplay ops success revocation config cert path[ 0 ]
def refresh app version inspect environment global cached confignew config fetch latest from memcache app version if not new config new config fetch latest from datastore app version if new config cached config new config
def where cond a b raise on error False use numexpr True if use numexpr return where cond a b raise on error raise on error return where standard cond a b raise on error raise on error
def get ip nonlocal bind namespace None cmd ['sysctl' '-bn' IP NONLOCAL BIND]ip wrapper IP Wrapper namespace return int ip wrapper netns execute cmd run as root True
def decode deflate content try try return zlib decompress content except zlib error return zlib decompress content -15 except zlib error return None
@register function@jinja 2 contextfunctiondef favorites widget context addon condensed False c dict context items request c['request']if request user is authenticated is favorite addon id in request user favorite addons faved class 'faved' if is favorite else '' unfaved text '' if condensed else ' Addtofavorites' faved text ' Favorite' if condensed else ' Removefromfavorites' add url reverse 'collections alter' args [request user username 'favorites' 'add'] remove url reverse 'collections alter' args [request user username 'favorites' 'remove'] c update locals t get env get template 'bandwagon/favorites widget html' render c return jinja 2 Markup t
@register function@jinja 2 contextfunctiondef favorites widget context addon condensed False c dict context items request c['request']if request user is authenticated is favorite addon id in request user favorite addons faved class 'faved' if is favorite else '' unfaved text '' if condensed else ' Addtofavorites' faved text ' Favorite' if condensed else ' Removefromfavorites' add url reverse 'collections alter' args [request user username 'favorites' 'add'] remove url reverse 'collections alter' args [request user username 'favorites' 'remove'] c update locals t get env get template 'bandwagon/favorites widget html' render c return jinja 2 Markup t
def get service exec executable 'update-rc d'salt utils check or die executable return executable
def get service exec executable 'update-rc d'salt utils check or die executable return executable
@step ' Icreatealogrecordwith' def step I create logrecord with table context assert context table 'REQUIRE context table'assert len context table rows 1 'REQUIRE table row size 1'step I create logrecords with table context
@step ' Icreatealogrecordwith' def step I create logrecord with table context assert context table 'REQUIRE context table'assert len context table rows 1 'REQUIRE table row size 1'step I create logrecords with table context
@step ' Icreatealogrecordwith' def step I create logrecord with table context assert context table 'REQUIRE context table'assert len context table rows 1 'REQUIRE table row size 1'step I create logrecords with table context
def types of fields fields expr if isinstance expr dshape measure Record return get fields expr dshape measure else if isinstance fields tuple list set assert len fields 1 fields fieldsassert fields expr name return expr dshape measure
def sign Wrangler poi for field in [' Text 1 ' ' Text 2 ' ' Text 3 ' ' Text 4 '] poi[field] json Text poi[field] return poi
def import pydot import pydotif parse version pydot version < parse version PYDOT VERSION MIN raise Import Error 'pydot%s<%s' % pydot version PYDOT VERSION MIN return pydot
def build dependency list deps version prefix u'' return sorted [ u'%s%s%s' % dep name version prefix dep version for dep name dep version in deps items ] key lambda s s lower
def ancillary Descriptor fd packed struct pack 'i' fd return [ socket SOL SOCKET sendmsg SCM RIGHTS packed ]
@commands u'setchanneltz' u'setctz' @example u' setctz America/ New York' def update channel bot trigger if bot privileges[trigger sender][trigger nick] < OP returnelif not pytz bot reply u" Sorry Idon'thavetimezonesupportinstalled " else tz trigger group 2 if not tz bot reply u' Whattimezonedoyouwanttoset? Tryonefromhttp //sopel chat/tz' returnif tz not in pytz all timezones bot reply u" Idon'tknowthattimezone Tryonefromhttp //sopel chat/tz" returnbot db set channel value trigger sender u'timezone' tz if len tz < 7 bot say u' Okay {} butyoushoulduseonefromhttp //sopel chat/tzifyouuse DST ' format trigger nick else bot reply u' Inowhave{}inthe{}timezone ' format trigger sender tz
def from record like rec stream 0 gpu data None return Device Record rec dtype stream stream gpu data gpu data
def ensure pynumpy import warningsfrom import numpy supportpyver sys version info[ 2]if pyver < 2 7 or 3 < pyver < 3 4 raise Import Error ' Numbaneeds Python 2 7orgreater or 3 4orgreater' np version numpy support version[ 2]if np version < 1 7 raise Import Error ' Numbaneeds Numpy 1 7orgreater'
def ensure pynumpy import warningsfrom import numpy supportpyver sys version info[ 2]if pyver < 2 7 or 3 < pyver < 3 4 raise Import Error ' Numbaneeds Python 2 7orgreater or 3 4orgreater' np version numpy support version[ 2]if np version < 1 7 raise Import Error ' Numbaneeds Numpy 1 7orgreater'
def create continuous query database name query **client args client client **client args full query 'CREATECONTINUOUSQUERY{ 0 }ON{ 1 }BEGIN{ 2 }END'query full query format name database query client query query return True
def apply assertion expected result log debug ' Expectedresult %s Actualresult %s' expected result if isinstance expected bool return result is expected elif isinstance expected dict try comparison getattr operator expected['comparison'] except Attribute Error if expected get 'comparison' 'search' comparison re searchelse raise Invalid Argument Error ' Comparison{ 0 }isnotavalidselection ' format expected get 'comparison' except Key Error log exception ' Thecomparisondictionaryprovidedismissingexpectedkeys Either"expected"or"comparison"arenotpresent ' raisereturn comparison expected['expected'] result else raise Type Error ' Expectedboolordictbutreceived{ 0 }' format type expected
def assert Volumes Equal test first second first first get filesystem get path second second get filesystem get path def get contents path result {}for child in path children if child isdir value get contents child else value child get Content result[child basename ] valuereturn resulttest assert Equal get contents first get contents second
def assert Volumes Equal test first second first first get filesystem get path second second get filesystem get path def get contents path result {}for child in path children if child isdir value get contents child else value child get Content result[child basename ] valuereturn resulttest assert Equal get contents first get contents second
@task@timeddef i18 n rtl sh 'i 18 n tooltransifexrtl' print ' Nowgeneratinglangugagefiles 'sh 'i 18 n toolgenerate--rtl' print ' Committingtranslations 'sh 'gitclean-fd Xconf/locale' sh 'gitaddconf/locale' sh 'gitcommit--amend'
def uplink Busy name ' Uplink Busy'a Tp Pd pd 6 b Message Type mes Type 42 packet a / b return packet
def task doctest return {'actions' ['py test--doctest-modulesnikola/'] 'verbosity' 2}
def install if runtime platform get Type 'posix' reactor Gtk 3 Reactor else reactor Portable Gtk 3 Reactor from twisted internet main import install Reactorinstall Reactor reactor return reactor
def install if runtime platform get Type 'posix' reactor Gtk 3 Reactor else reactor Portable Gtk 3 Reactor from twisted internet main import install Reactorinstall Reactor reactor return reactor
def show security rule call None kwargs None global netconnif not netconn netconn get conn Network Management Client if kwargs is None kwargs {}if kwargs get 'resource group' is None kwargs['resource group'] config get cloud config value 'resource group' {} opts search global True rule netconn security rules get resource group name kwargs['resource group'] network security group name kwargs['security group'] security rule name kwargs['name'] return make safe rule
def get user meta prefix server type return 'x-%s-%s-' % server type lower 'meta'
def split path path if not path startswith '/' path '/' + path return path rsplit '/' 1
def reflection matrix point normal normal unit vector normal[ 3] M numpy identity 4 M[ 3 3] - 2 0 * numpy outer normal normal M[ 3 3] 2 0 * numpy dot point[ 3] normal * normal return M
def ppcc max x brack 0 0 1 0 dist 'tukeylambda' dist parse dist kw dist osm uniform calc uniform order statistic medians len x osr sort x def tempfunc shape mi yvals func xvals func mi shape r prob stats pearsonr xvals yvals return 1 - r return optimize brent tempfunc brack brack args osm uniform osr dist ppf
def ppcc max x brack 0 0 1 0 dist 'tukeylambda' dist parse dist kw dist osm uniform calc uniform order statistic medians len x osr sort x def tempfunc shape mi yvals func xvals func mi shape r prob stats pearsonr xvals yvals return 1 - r return optimize brent tempfunc brack brack args osm uniform osr dist ppf
def ppcc max x brack 0 0 1 0 dist 'tukeylambda' dist parse dist kw dist osm uniform calc uniform order statistic medians len x osr sort x def tempfunc shape mi yvals func xvals func mi shape r prob stats pearsonr xvals yvals return 1 - r return optimize brent tempfunc brack brack args osm uniform osr dist ppf
def ppcc max x brack 0 0 1 0 dist 'tukeylambda' dist parse dist kw dist osm uniform calc uniform order statistic medians len x osr sort x def tempfunc shape mi yvals func xvals func mi shape r prob stats pearsonr xvals yvals return 1 - r return optimize brent tempfunc brack brack args osm uniform osr dist ppf
def ppcc max x brack 0 0 1 0 dist 'tukeylambda' dist parse dist kw dist osm uniform calc uniform order statistic medians len x osr sort x def tempfunc shape mi yvals func xvals func mi shape r prob stats pearsonr xvals yvals return 1 - r return optimize brent tempfunc brack brack args osm uniform osr dist ppf
def resource view list context data dict model context['model']id get or bust data dict 'id' resource model Resource get id if not resource raise Not Foundcontext['resource'] resource check access 'resource view list' context data dict q model Session query model Resource View filter by resource id id resource views [resource view for resource view in q order by model Resource View order all if datapreview get view plugin resource view view type ]return model dictize resource view list dictize resource views context
def create ports tree check config exists cmd 'poudriereports-c'ret salt ['cmd run'] cmd return ret
def serve application application prefix port None host None max children None class SCGI App Handler SWAP def init self *args **kwargs self prefix prefixself app obj application SWAP init self *args **kwargs kwargs dict handler class SCGI App Handler for kwarg in 'host' 'port' 'max children' if locals [kwarg] is not None kwargs[kwarg] locals [kwarg]scgi server SCGI Server **kwargs serve
def serve application application prefix port None host None max children None class SCGI App Handler SWAP def init self *args **kwargs self prefix prefixself app obj application SWAP init self *args **kwargs kwargs dict handler class SCGI App Handler for kwarg in 'host' 'port' 'max children' if locals [kwarg] is not None kwargs[kwarg] locals [kwarg]scgi server SCGI Server **kwargs serve
def main django setup try test rtr 1 Network Device objects get device name 'test-rtr 1 ' test rtr 2 Network Device objects get device name 'test-rtr 2 ' test rtr 1 delete test rtr 2 delete except Network Device Does Not Exist passprintdevices Network Device objects all for a device in devices print a deviceprint
def main django setup try test rtr 1 Network Device objects get device name 'test-rtr 1 ' test rtr 2 Network Device objects get device name 'test-rtr 2 ' test rtr 1 delete test rtr 2 delete except Network Device Does Not Exist passprintdevices Network Device objects all for a device in devices print a deviceprint
def main django setup try test rtr 1 Network Device objects get device name 'test-rtr 1 ' test rtr 2 Network Device objects get device name 'test-rtr 2 ' test rtr 1 delete test rtr 2 delete except Network Device Does Not Exist passprintdevices Network Device objects all for a device in devices print a deviceprint
def warning msg log msg logging WARNING
def find entry points ep ['ipython%s I Python start ipython' 'iptest%s I Python testing iptestcontroller main']suffix str sys version info[ 0 ] return [ e % '' for e in ep] + [ e % suffix for e in ep]
def check extension attrs cls extends cls extends eattrs extends Attributescattrs cls Attributesckeys set [k for k in vars cls Attributes if not k startswith ' ' ] ekeys set [k for k in vars extends Attributes if not k startswith ' ' ] diff set for k in ckeys ekeys if getattr eattrs k None getattr cattrs k None diff add k attr names ATTR NAMES[cls]retval Nonewhile extends is not None retval extendsif len diff & attr names > 0 return extendsextends extends extends return retval
def check extension attrs cls extends cls extends eattrs extends Attributescattrs cls Attributesckeys set [k for k in vars cls Attributes if not k startswith ' ' ] ekeys set [k for k in vars extends Attributes if not k startswith ' ' ] diff set for k in ckeys ekeys if getattr eattrs k None getattr cattrs k None diff add k attr names ATTR NAMES[cls]retval Nonewhile extends is not None retval extendsif len diff & attr names > 0 return extendsextends extends extends return retval
def check extension attrs cls extends cls extends eattrs extends Attributescattrs cls Attributesckeys set [k for k in vars cls Attributes if not k startswith ' ' ] ekeys set [k for k in vars extends Attributes if not k startswith ' ' ] diff set for k in ckeys ekeys if getattr eattrs k None getattr cattrs k None diff add k attr names ATTR NAMES[cls]retval Nonewhile extends is not None retval extendsif len diff & attr names > 0 return extendsextends extends extends return retval
def load shortcuts global SHORTCUTS CUSTOM SHORTCUT Ssettings Q Settings SETTINGS PATH Q Settings Ini Format for action in SHORTCUTS default action SHORTCUTS[action] to String shortcut action settings value u'shortcuts/%s' % action default action CUSTOM SHORTCUTS[action] Q Key Sequence shortcut action
def sh chebyt n monic False base sh jacobi n 0 0 0 5 monic monic if monic return baseif n > 0 factor 4 ** n / 2 0 else factor 1 0base scale factor return base
def Run Test test suite stream None out fd streamif stream out fd String IO String IO try test lib Grr Test Program argv [sys argv[ 0 ] test suite] test Loader GRR Everything Test Loader labels flags FLAGS labels test Runner unittest Text Test Runner stream out fd finally if stream stream write ' Testname %s\n' % test suite stream write out fd getvalue stream flush
def convert kvp list to dict kvp list if kvp list [' True'] return {}kvp map {}for kvp str in kvp list key value convert kvp str to list kvp str kvp map setdefault key set kvp map[key] add value return dict x list y for x y in kvp map iteritems
def generate index page index links index fp order [ index headers['run summary']] top level dir split split index fp [0 ] [1 ]index page header get index page header index lines [index page header]d {}for e in index links try d[e[ 2 ]] append e[ 0 ] e[ 1 ] except Key Error d[e[ 2 ]] [ e[ 0 ] e[ 1 ] ]index lines append '<tableborder 1>\n' ordered table entries order + [k for k in d if k not in order ] for k in ordered table entries v d[k]index lines append '<trcolspan 2align centerbgcolor #e 8 e 8 e 8 ><tdcolspan 2align center>%s</td></tr>\n' % k for description path in v path re sub '^ *%s\\/' % top level dir ' /' path index lines append '<tr>%s</tr>\n' % format index link description path index lines append '</table>\n' index page footer get index page footer index lines append index page footer open index fp 'w' write '' join index lines
def put api key url data url make url api key url req Request url headers {' Content- Type' 'application/json'} data json dumps data req get method lambda 'PUT' return json loads urlopen req read
def partial resids results focus exog model results modelresid model endog - results predict if isinstance model GLM GEE resid * model family link deriv results fittedvalues elif isinstance model OLS GLS WLS passelse raise Value Error " Partialresidualsfor'%s'notimplemented " % type model if type focus exog is str focus col model exog names index focus exog else focus col focus exogfocus val results params[focus col] * model exog[ focus col] return focus val + resid
def scan mail log line line collector m re match ' \\S+\\d+\\d+ \\d+ \\d+ \\S+ \\S+? \\[\\d+\\] ? * ' line if not m return date system service pid log m groups date dateutil parser parse date if service 'dovecot' scan dovecot line date log collector elif service 'postgrey' scan postgrey line date log collector elif service 'postfix/smtpd' scan postfix smtpd line date log collector elif service 'postfix/cleanup' scan postfix cleanup line date log collector elif service 'postfix/submission/smtpd' scan postfix submission line date log collector elif service in 'postfix/qmgr' 'postfix/pickup' 'postfix/cleanup' 'postfix/scache' 'spampd' 'postfix/anvil' 'postfix/master' 'opendkim' 'postfix/lmtp' 'postfix/tlsmgr' passelse collector['other-services'] add service
def extra host filters multiple labels extra args {}where str 'afe hosts idin selecthost idfromafe hosts labelswherelabel id %s 'extra args['where'] [where str] * len multiple labels extra args['params'] [models Label smart get label id for label in multiple labels]return extra args
def extra host filters multiple labels extra args {}where str 'afe hosts idin selecthost idfromafe hosts labelswherelabel id %s 'extra args['where'] [where str] * len multiple labels extra args['params'] [models Label smart get label id for label in multiple labels]return extra args
@contextlib contextmanagerdef with site configuration context domain 'test localhost' configuration None site Site objects get or create domain domain name domain site configuration created Site Configuration objects get or create site site defaults {'enabled' True 'values' configuration} if not created site configuration values configurationsite configuration save with patch 'openedx core djangoapps site configuration helpers get current site configuration' return value site configuration with patch 'openedx core djangoapps theming helpers get current site' return value site with patch 'django contrib sites models Site Manager get current' return value site yield
def media endpoint id file app media get id if file is None return abort 404 if modified since weak date request headers get ' If- Modified- Since' if if modified since is not None if if modified since tzinfo is None if modified since if modified since replace tzinfo tz util utc if if modified since > file upload date return Response status 304 headers {' Last- Modified' date to rfc 1123 file upload date ' Content- Length' file length}response Response file headers headers mimetype file content type direct passthrough True return response
def check pairs func pairs name getattr func 'func name' getattr func ' name ' '<unknown>' for inp expected in pairs out func inp assert out expected pair fail msg format name inp expected out
def bad request req resp **kwargs raise HTTP Bad Request ' Badrequest' ' Invalid HTT Pmethod'
def limited epoch train file path max epochs 1 train load train file file path train algorithm termination criterion Epoch Counter max epochs max epochs train main loop
def generate RSA Key bits implementations ['openssl' 'python'] for implementation in implementations if implementation 'openssl' and cryptomath m2 crypto Loaded return Open SSL RSA Key generate bits elif implementation 'python' return Python RSA Key generate bits raise Value Error ' Noacceptableimplementations'
def readline workaround if not sys platform startswith 'win 32 ' returntry import readlineexcept Import Error pass
def readline workaround if not sys platform startswith 'win 32 ' returntry import readlineexcept Import Error pass
def generate Metrics Substitutions options token Replacements options['logged Metrics'] [' *'] metric List optimize Metric Label generate Metric Specs options metric List String ' \n' join metric List metric List String indent Lines metric List String 2 indent First Line False perm Optimize Setting Str 'minimize "%s"' % optimize Metric Label logged Metrics List As Str '[%s]' % ' ' join [ "'%s'" % ptrn for ptrn in options['logged Metrics']] token Replacements['\\$LOGGED METRICS'] logged Metrics List As Strtoken Replacements['\\$METRICS'] metric List Stringtoken Replacements['\\$PERM OPTIMIZE SETTING'] perm Optimize Setting Str
@ replace If PY 3 passthru @ replace If not should Enable New Style ensure Old Class def old Style cls ensure Old Class cls bases cls bases + object return type cls name bases cls dict
def get resource container context return context get RESOURCE CONTAINER VAR NAME
def mongo client host port authenticate True direct False **kwargs client options client context ssl client options copy if client context replica set name and not direct client options['replica Set'] client context replica set nameclient options update kwargs client Mongo Client connection string host port authenticate port **client options return client
def mongo client host port authenticate True direct False **kwargs client options client context ssl client options copy if client context replica set name and not direct client options['replica Set'] client context replica set nameclient options update kwargs client Mongo Client connection string host port authenticate port **client options return client
def migration get context migration id return IMPL migration get context migration id
def test rechunk 2d a np random uniform 0 1 300 reshape 10 30 x da from array a chunks 1 2 3 4 5 * 6 new 5 5 15 * 2 x2 rechunk x chunks new assert x2 chunks new assert np all x2 compute a
def gaussian convolution h Xi x return 1 0 / np sqrt 4 * np pi * np exp - Xi - x ** 2 / h ** 2 * 4 0
def list designs request owner name order by '-last modified' data Document objects get docs request user Workflow extra 'jobsub' if owner data data filter owner username icontains owner if name data data filter name icontains name data data order by order by designs []for doc in data[ MAX DESIGNS] design doc content objectif design is not None ko design {'id' design id 'owner' design owner username 'name' design name 'description' design description 'node type' design start get child 'to' node type 'last modified' py time mktime design last modified timetuple 'editable' design owner id request user id 'is shared' design is shared 'is trashed' doc is trashed }designs append ko design return designs
@frappe whitelist def get backup delete temp backups odb Backup Generator frappe conf db name frappe conf db name frappe conf db password db host frappe db host odb get backup recipient list odb send email frappe msgprint u' Downloadlinkforyourbackupwillbeemailedonthefollowingemailaddress {0 }' format u' ' join recipient list
def lookup template namespace name return LOOKUP[namespace] get template name
def if firewall available distribution commands if is centos or rhel distribution firewall command 'firewall-cmd'elif is ubuntu distribution firewall command 'ufw'else raise Distribution Not Supported distribution distribution return run from args ['which' firewall command] on success lambda result commands error catch exit code 1
@pytest mark modelsdef test consistency bug EN tokens EN u' Whererapessentiallywentmainstream illustratedbyseminal Public Enemy Beastie Boysand L L Cool J tracks ' tokens EN u' Charityandothershort-termaidhavebuoyedthemsofar andatax-reliefbillworkingitswaythrough Congresswouldhelp Butthe September 11 Victim Compensation Fund enactedby Congresstodiscouragepeoplefromfilinglawsuits willdeterminetheshapeoftheirlivesforyearstocome \n\n' entity False tokens ents + tuple EN matcher tokens EN entity tokens
def cookie signature seed *parts sha 1 hmac new seed digestmod hashlib sha 1 for part in parts if part sha 1 update part return sha 1 hexdigest
def label present name value node None apiserver None ret salt ['k 8 s label present'] name value node apiserver return ret
def Post Vim Message message warning True truncate False echo command u'echom' if warning else u'echo' vim command u'redraw' if warning vim command u'echohl Warning Msg' message To Unicode message if truncate vim width Get Int Value u'&columns' message message replace u'\n' u'' if len message > vim width message message[ vim width - 4 ] + u' ' old ruler Get Int Value u'&ruler' old showcmd Get Int Value u'&showcmd' vim command u'setnorulernoshowcmd' vim command u"{ 0 }'{ 1 }'" format echo command Escape For Vim message Set Variable Value u'&ruler' old ruler Set Variable Value u'&showcmd' old showcmd else for line in message split u'\n' vim command u"{ 0 }'{ 1 }'" format echo command Escape For Vim line if warning vim command u'echohl None'
def delete network segment context segment id with context session begin subtransactions True context session query segments model Network Segment filter by id segment id delete
def get service hass config discovery info None from pushover import Init Errortry return Pushover Notification Service config[CONF USER KEY] config[CONF API KEY] except Init Error LOGGER error ' Wrong AP Ikeysupplied Getitathttps //pushover net' return None
def get field symbol return all lookups[field] get symbol lower
def create minibatch x minibatches minibatch markers epoch axis if epoch axis x np zeros minibatches last e 0for e idx e in enumerate minibatch markers e minibatches e - last e x[last e e] e idx + np arange float e minibatches / e minibatches last e eelse x np arange minibatches return x
def check known host user None hostname None key None fingerprint None config None port None if not hostname return {'status' 'error' 'error' 'hostnameargumentrequired'}if not user config config or '/etc/ssh/ssh known hosts' else config config or ' ssh/known hosts' known host get known host user hostname config config port port if not known host or 'fingerprint' not in known host return 'add'if key return 'exists' if key known host['key'] else 'update' elif fingerprint return 'exists' if fingerprint known host['fingerprint'] else 'update' else return 'exists'
def get file obj fname mode 'r' encoding None if is string like fname return open fname mode encoding try if 'r' in mode fname readif 'w' in mode or 'a' in mode fname writeexcept Attribute Error raise Value Error 'fnamemustbeastringorafile-likeobject' return Empty Context Manager fname
def get Radius By Prefix prefix side Length xml Element radius get Float By Prefix Side prefix + 'radius' side Length xml Element radius + 0 5 * get Float By Prefix Side prefix + 'diameter' side Length xml Element return radius + 0 5 * get Float By Prefix Side prefix + 'size' side Length xml Element
def get minions returner returners salt loader returners opts salt return returners['{ 0 } get minions' format returner ]
@require level 'staff' @require POS Tdef sale validation request course id try invoice number request POST['invoice number']except Key Error return Http Response Bad Request ' Missingrequiredinvoice numberparameter' try invoice number int invoice number except Value Error return Http Response Bad Request 'invoice numbermustbeaninteger {value}provided' format value invoice number try event type request POST['event type']except Key Error return Http Response Bad Request ' Missingrequiredevent typeparameter' course id Slash Separated Course Key from deprecated string course id try obj invoice Course Registration Code Invoice Item objects select related 'invoice' get invoice id invoice number course id course id obj invoice obj invoice invoiceexcept Course Registration Code Invoice Item Does Not Exist return Http Response Not Found " Invoicenumber'{num}'doesnotexist " format num invoice number if event type 'invalidate' return invalidate invoice obj invoice else return re validate invoice obj invoice
def clean to gce name identifier return unicode identifier lower replace u'+' u'-' replace u'/' u'-'
def describe api method rest Api Id resource Path http Method region None key None keyid None profile None try resource describe api resource rest Api Id resource Path region region key key keyid keyid profile profile get 'resource' if resource conn get conn region region key key keyid keyid profile profile method conn get method rest Api Id rest Api Id resource Id resource['id'] http Method http Method return {'method' convert datetime str method }return {'error' 'get AP Imethodfailed nosuchresource'}except Client Error as e return {'error' salt utils boto 3 get error e }
def set interface dev b Interface Number b Alternate Setting dev set interface altsetting b Interface Number b Alternate Setting
def warn nonexistent targets targets sections log printer for target in targets if target not in sections log printer warn " Therequestedsection'{section}'isnotexistent Thusitcannotbeexecuted " format section target files config absent warn config absent sections 'files' log printer bears config absent warn config absent sections 'bears' log printer if files config absent or bears config absent raise System Exit 2
def warn nonexistent targets targets sections log printer for target in targets if target not in sections log printer warn " Therequestedsection'{section}'isnotexistent Thusitcannotbeexecuted " format section target files config absent warn config absent sections 'files' log printer bears config absent warn config absent sections 'bears' log printer if files config absent or bears config absent raise System Exit 2
def warn nonexistent targets targets sections log printer for target in targets if target not in sections log printer warn " Therequestedsection'{section}'isnotexistent Thusitcannotbeexecuted " format section target files config absent warn config absent sections 'files' log printer bears config absent warn config absent sections 'bears' log printer if files config absent or bears config absent raise System Exit 2
def warn nonexistent targets targets sections log printer for target in targets if target not in sections log printer warn " Therequestedsection'{section}'isnotexistent Thusitcannotbeexecuted " format section target files config absent warn config absent sections 'files' log printer bears config absent warn config absent sections 'bears' log printer if files config absent or bears config absent raise System Exit 2
def warn nonexistent targets targets sections log printer for target in targets if target not in sections log printer warn " Therequestedsection'{section}'isnotexistent Thusitcannotbeexecuted " format section target files config absent warn config absent sections 'files' log printer bears config absent warn config absent sections 'bears' log printer if files config absent or bears config absent raise System Exit 2
def on property usage prop name stacklevel stacklevel + 1deprecated to new props {'slavename' 'workername'}if prop name in deprecated to new props report Deprecated Worker Name Usage " Property'{old name}'isdeprecated use'{new name}'instead " format old name prop name new name deprecated to new props[prop name] stacklevel stacklevel
def Day Time Strings To UTC Timestamp day time try hour minute second re match k Time Re time groups return util ISO 8601 To UTC Timestamp day hour int hour minute int minute second int second except Exception as e logging warning ' Errorparsingdayandtimestrings %s%s error %r' % day time e return None
def tamper payload **kwargs ret Val payloadif payload ret Val ''i 0while i < len payload if payload[i] '%' and i < len payload - 2 and payload[ i + 1 i + 2 ] in string hexdigits and payload[ i + 2 i + 3 ] in string hexdigits ret Val + payload[i i + 3 ]i + 3else if payload[i] not in string ascii letters + string digits ret Val + '%%C 0 %%% 2X' % 138 ord payload[i] else ret Val + payload[i]i + 1return ret Val
def parse snapshot description snapshot unix time False ret dict tree Element Tree fromstring snapshot get XML Desc for node in tree if node tag 'name' ret['name'] node textelif node tag 'creation Time' ret['created'] not unix time and datetime datetime fromtimestamp float node text isoformat '' or float node text elif node tag 'state' ret['running'] node text 'running' ret['current'] snapshot is Current 1 return ret
def receive share service if share in rx msgs if rx msgs[share] return rx msgs[share] popleft return None
def check dir directory failed files []for root dirs files in os walk directory for f in files if f endswith ' py' and os path basename f ' init py' filename os path join root f if not check header filename failed files append filename return failed files
def make dict copy from dict copy from dict {}for key value in from dict items if type value name 'dict' copy from dict[key] make dict copy value elif isinstance value list copy from dict[key] make list copy value else copy from dict[key] valuereturn copy from dict
def linear harvey collier res rr recursive olsresiduals res skip 3 alpha 0 95 from scipy import statsreturn stats ttest 1samp rr[ 3 ][ 3 ] 0
def pre Build Static static pass
def make generation hash x return Generation Hash hash value generation hash x
def load tool sources from path path load exception handler load exception handler recursive False register load errors False return load tools from path path load exception handler load exception handler recursive recursive register load errors register load errors loader func get tool source enable beta formats True
def write test files test dir names None names names or range 10 for i in names with open os path join test dir str i u'wb' as out out write u'' encode u'UTF- 8 '
def write test files test dir names None names names or range 10 for i in names with open os path join test dir str i u'wb' as out out write u'' encode u'UTF- 8 '
def write test files test dir names None names names or range 10 for i in names with open os path join test dir str i u'wb' as out out write u'' encode u'UTF- 8 '
def get specific user user get user if is windows if win current user is admin return 'sudo {0 }' format user else env vars 'SUDO USER' if user 'root' for evar in env vars if evar in os environ return 'sudo {0 }' format os environ[evar] return user
def points table for i in range 256 for j in itertools repeat i 256 yield j
def regions from boto elasticache layer 1 import Elasti Cache Connectionreturn get regions 'elasticache' connection cls Elasti Cache Connection
def serialize Path path Obj options return '' join [ cmd + scour Coordinates data options cmd 'a' for cmd data in path Obj]
def get tile set chunks tile set defaultdict int for chunkx chunkz chunkmtime in chunks iteritems col row tileset convert coords chunkx chunkz for tilec tiler in tileset get tiles by chunk col row tile tileset Render Tile compute path tilec tiler 5 tile set[tile path] max tile set[tile path] chunkmtime for tile tile mtime in tile set copy iteritems for i in reversed xrange 5 tile set[tile[ i]] max tile set[tile[ i]] tile mtime return dict tile set
def get tile set chunks tile set defaultdict int for chunkx chunkz chunkmtime in chunks iteritems col row tileset convert coords chunkx chunkz for tilec tiler in tileset get tiles by chunk col row tile tileset Render Tile compute path tilec tiler 5 tile set[tile path] max tile set[tile path] chunkmtime for tile tile mtime in tile set copy iteritems for i in reversed xrange 5 tile set[tile[ i]] max tile set[tile[ i]] tile mtime return dict tile set
def get tile set chunks tile set defaultdict int for chunkx chunkz chunkmtime in chunks iteritems col row tileset convert coords chunkx chunkz for tilec tiler in tileset get tiles by chunk col row tile tileset Render Tile compute path tilec tiler 5 tile set[tile path] max tile set[tile path] chunkmtime for tile tile mtime in tile set copy iteritems for i in reversed xrange 5 tile set[tile[ i]] max tile set[tile[ i]] tile mtime return dict tile set
def create annotation module annotation {}if module params['duration'] None duration module params['duration']else duration 0if module params['start'] None start module params['start']else start int time time if module params['stop'] None stop module params['stop']else stop int time time + duration annotation['start'] int start annotation['stop'] int stop annotation['category'] module params['category']annotation['description'] module params['description']annotation['title'] module params['title']return annotation
def build logger return log
def test cache config change cache size config stub tmpdir max cache size 1024 config stub data {'storage' {'cache-size' max cache size} 'general' {'private-browsing' False}}disk cache cache Disk Cache str tmpdir assert disk cache maximum Cache Size max cache size config stub set 'storage' 'cache-size' max cache size * 2 assert disk cache maximum Cache Size max cache size * 2
def Urn String To Client Id urn if urn startswith AFF 4 PREFIX urn urn[len AFF 4 PREFIX ]components urn split '/' return components[ 0 ]
def save instance form instance commit True from django db import modelsopts instance class metaif form errors raise Value Error " The%scouldnotbechangedbecausethedatadidn'tvalidate " % opts object name clean data form clean datafor f in opts fields if not f editable or isinstance f models Auto Field continuesetattr instance f name clean data[f name] if commit instance save for f in opts many to many setattr instance f attname clean data[f name] return instance
def save instance form instance commit True from django db import modelsopts instance class metaif form errors raise Value Error " The%scouldnotbechangedbecausethedatadidn'tvalidate " % opts object name clean data form clean datafor f in opts fields if not f editable or isinstance f models Auto Field continuesetattr instance f name clean data[f name] if commit instance save for f in opts many to many setattr instance f attname clean data[f name] return instance
def getconsole buffer 1 c Console buffer return c
def Gamma Inverse name a b return rv name Gamma Inverse Distribution a b
def generate frontpage pngs only if needed True for fn png fn py in FRONTPAGE PNGS items pn png os path join FRONTPAGE PNG PATH fn png pn py os path join FRONTPAGE PY PATH fn py mtime py os path getmtime pn py mtime png os path getmtime pn png if os path exists pn png else mtime py - 1 if only if needed and mtime py < mtime png continuesubprocess check call ['python' pn py] os rename fn png pn png
def add svc avail path path if os path exists path if path not in AVAIL SVR DIRS AVAIL SVR DIRS append path return Truereturn False
def parse options opts delim options {}for opt in opts split delim key val opt split ' ' if key lower 'readpreferencetags' options setdefault 'readpreferencetags' [] append val else if str key in options warnings warn ' Duplicate UR Ioption%s' % str key options[str key ] unquote plus val if 'wtimeout' in options if 'wtimeout MS' in options options pop 'wtimeout' warnings warn " Optionwtimeoutisdeprecated use'wtimeout MS'instead" return options
def parse options opts delim options {}for opt in opts split delim key val opt split ' ' if key lower 'readpreferencetags' options setdefault 'readpreferencetags' [] append val else if str key in options warnings warn ' Duplicate UR Ioption%s' % str key options[str key ] unquote plus val if 'wtimeout' in options if 'wtimeout MS' in options options pop 'wtimeout' warnings warn " Optionwtimeoutisdeprecated use'wtimeout MS'instead" return options
def instantiate bears section local bear list global bear list file dict message queue console printer local bear list [bear for bear in filter raising callables local bear list Runtime Error section message queue timeout 0 1 ]global bear list [bear for bear in filter raising callables global bear list Runtime Error file dict section message queue timeout 0 1 ]return local bear list global bear list
def assert python ok *args **env vars return assert python True *args **env vars
def db add group **kwargs name kwargs get 'name' group get object User Group name name users kwargs pop 'users id' if not group group User Group **kwargs group save for user id in users group add user group user id
def write megam file train toks encoding stream bernoulli True explicit True labels encoding labels labelnum dict label i for i label in enumerate labels for featureset label in train toks if hasattr encoding 'cost' stream write ' ' join str encoding cost featureset label l for l in labels else stream write '%d' % labelnum[label] if not explicit write megam features encoding encode featureset label stream bernoulli else for l in labels stream write '#' write megam features encoding encode featureset l stream bernoulli stream write '\n'
def pool create request **kwargs body {'pool' {'name' kwargs['name'] 'description' kwargs['description'] 'subnet id' kwargs['subnet id'] 'protocol' kwargs['protocol'] 'lb method' kwargs['lb method'] 'admin state up' kwargs['admin state up']}}pool quantumclient request create pool body get 'pool' return Pool pool
def get blockdeviceapi config get blockdevice config backend api args backend and api args from configuration config api get api backend backend api args api args reactor reactor cluster id make cluster id Test Types FUNCTIONAL return api
def get blockdeviceapi config get blockdevice config backend api args backend and api args from configuration config api get api backend backend api args api args reactor reactor cluster id make cluster id Test Types FUNCTIONAL return api
@get '/task/new' def task new taskid hexencode os urandom 8 remote addr request remote addr Data Store tasks[taskid] Task taskid remote addr logger debug " Creatednewtask '%s'" % taskid return jsonize {'success' True 'taskid' taskid}
def mutating method func def wrapper self * args ** kwargs old mutable self mutableself mutable Truetry return func self * args ** kwargs finally self mutable old mutablereturn wrapper
def setup platform hass config add devices callback discovery info None configured zones discovery info['zones']for zone num in configured zones device config data ZONE SCHEMA configured zones[zone num] device Envisalink Binary Sensor zone num device config data[CONF ZONENAME] device config data[CONF ZONETYPE] EVL CONTROLLER alarm state['zone'][zone num] EVL CONTROLLER add devices callback [ device]
def build Element Nsmap using elements this Map {}for e in using elements this Map[e attrib['prefix']] e attrib['namespace']return this Map
def filter String Value value char Regex replacement '' ret Val valueif value ret Val re sub char Regex replace '[' '[^' if '[^' not in char Regex else char Regex replace '[^' '[' replacement value return ret Val
def ek function *args **kwargs if name 'nt' result function *args **kwargs else result function *[ ss x if isinstance x str unicode else x for x in args] **kwargs if isinstance result list tuple return fix list encoding result if isinstance result str return to unicode result return result
def set recv attr status recvtable s3 db inv recvship status s3 db inv ship statusrecvtable sender id readable recvtable sender id writable Falserecvtable grn status readable recvtable grn status writable Falserecvtable cert status readable recvtable cert status writable Falserecvtable eta readable Falserecvtable req ref writable Trueif status ship status['IN PROCESS'] recvtable send ref writable Truerecvtable recv ref readable Falserecvtable sender id readable Falseelse for field in recvtable fields recvtable[field] writable Falseif status ship status['SENT'] recvtable date writable Truerecvtable recipient id readable recvtable recipient id writable Truerecvtable comments writable True
def serialize agent controlamp return str controlamp transport get Peer
@login required@enforce shopping cart enableddef show cart request cart Order get cart for user request user is any course expired expired cart items expired cart item names valid cart item tuples verify for closed enrollment request user cart site name configuration helpers get value 'SITE NAME' settings SITE NAME if is any course expired for expired item in expired cart items Order remove cart item from order expired item request user cart update order type callback url request build absolute uri reverse 'shoppingcart views postpay callback' form html render purchase form html cart callback url callback url context {'order' cart 'shoppingcart items' valid cart item tuples 'amount' cart total cost 'is course enrollment closed' is any course expired 'expired course names' expired cart item names 'site name' site name 'form html' form html 'currency symbol' settings PAID COURSE REGISTRATION CURRENCY[ 1 ] 'currency' settings PAID COURSE REGISTRATION CURRENCY[ 0 ] 'enable bulk purchase' configuration helpers get value 'ENABLE SHOPPING CART BULK PURCHASE' True }return render to response 'shoppingcart/shopping cart html' context
def list Open F Ds return detector list Open F Ds
def list Open F Ds return detector list Open F Ds
def enabled name **kwargs return info name [' Start Type'] ' Auto'
def enabled name **kwargs return info name [' Start Type'] ' Auto'
def clean old jobs for returner in opts [CONFIG KEY] fstr '{ 0 } clean old jobs' format returner if fstr in mminion returners mminion returners[fstr]
@superuser requireddef site settings request form class template name u'admin/settings html' return djblets site settings request form class template name {u'root path' settings SITE ROOT + u'admin/db/' }
def write pack index v1 f entries pack checksum f SHA 1 Writer f fan out table defaultdict lambda 0 for name offset entry checksum in entries fan out table[ord name[ 1] ] + 1for i in range 256 f write struct pack '>L' fan out table[i] fan out table[ i + 1 ] + fan out table[i]for name offset entry checksum in entries if not offset < 4294967295 raise Type Error 'packformat 1 onlysupportsoffsets< 2 Gb' f write struct pack '>L 20 s' offset name assert len pack checksum 20 f write pack checksum return f write sha
def saferepr object return safe repr object {} None 0 [0 ]
@command 'historyrecent' def recent history view history duplicates False
@command 'historyrecent' def recent history view history duplicates False
@click command @click option '--reloader/--no-reloader' default True @click option '--debug/--no-debug' default True @click option '--host' default '127 0 0 1' @click option '--port' default 5000 def runserver reloader debug host port app run use reloader reloader debug debug host host port port
def image shape img if hasattr img 'shape' return img shape[ 1 ] img shape[ 0 ] return img width img height
def dict to protobuf pb klass or instance values type callable map REVERSE TYPE CALLABLE MAP strict True if isinstance pb klass or instance Message instance pb klass or instanceelse instance pb klass or instance return dict to protobuf instance values type callable map strict
def test image equals mask assert close reconstruction np ones 7 5 np ones 7 5 1
def absent name ret {'name' name 'changes' {} 'result' True 'comment' ''}index template exists salt ['elasticsearch index template exists'] name name if index template exists if opts ['test'] ret['comment'] ' Indextemplate{ 0 }willberemoved' format name ret['result'] Noneelse ret['result'] salt ['elasticsearch index template delete'] name name if ret['result'] ret['comment'] ' Removedindextemplate{ 0 }successfully' format name else ret['comment'] ' Failedtoremoveindextemplate{ 0 }' format name elif not index template exists ret['comment'] ' Indextemplate{ 0 }isalreadyabsent' format name else ret['comment'] ' Failedtodeterminewhetherindextemplate{ 0 }isabsent see Minionlogformoreinformation' format name ret['result'] Falsereturn ret
def present name block icmp None default None masquerade False ports None port fwd None services None prune services True interfaces None sources None rich rules None ret present name block icmp default masquerade ports port fwd services prune services interfaces sources rich rules if ret['changes'] {} salt ['firewalld reload rules'] ret['result'] Trueif ret['changes'] {} ret['comment'] "'{ 0 }'isalreadyinthedesiredstate " format name return retif opts ['test'] ret['result'] Noneret['comment'] " Configurationfor'{ 0 }'willchange " format name return retret['comment'] "'{ 0 }'wasconfigured " format name return ret
def present name block icmp None default None masquerade False ports None port fwd None services None prune services True interfaces None sources None rich rules None ret present name block icmp default masquerade ports port fwd services prune services interfaces sources rich rules if ret['changes'] {} salt ['firewalld reload rules'] ret['result'] Trueif ret['changes'] {} ret['comment'] "'{ 0 }'isalreadyinthedesiredstate " format name return retif opts ['test'] ret['result'] Noneret['comment'] " Configurationfor'{ 0 }'willchange " format name return retret['comment'] "'{ 0 }'wasconfigured " format name return ret
def test precision exceeds 64 bit t1 Time 123456789000 0 format 'cxcsec' t2 t1 + dt tiny assert t1 jd t2 jd
def test precision exceeds 64 bit t1 Time 123456789000 0 format 'cxcsec' t2 t1 + dt tiny assert t1 jd t2 jd
def test precision exceeds 64 bit t1 Time 123456789000 0 format 'cxcsec' t2 t1 + dt tiny assert t1 jd t2 jd
def test precision exceeds 64 bit t1 Time 123456789000 0 format 'cxcsec' t2 t1 + dt tiny assert t1 jd t2 jd
def vm stopped name name name lower ret {'name' name 'changes' {} 'result' None 'comment' ''}if name in salt ['vmadm list'] order 'hostname' search 'state stopped' ret['result'] Trueret['comment'] 'vm{ 0 }alreadystopped' format name else ret['result'] True if opts ['test'] else salt ['vmadm stop'] name key 'hostname' if not isinstance ret['result'] bool and ret['result'] get ' Error' ret['result'] Falseret['comment'] 'failedtostop{ 0 }' format name else ret['changes'][name] 'stopped'ret['comment'] 'vm{ 0 }stopped' format name return ret
def custom tools registry xml parent data base 'com cloudbees jenkins plugins customtools'wrapper XML Sub Element xml parent base + ' Custom Tool Install Wrapper' wrapper tools XML Sub Element wrapper 'selected Tools' tools data get 'tools' [] tool node base + ' Custom Tool Install Wrapper - Selected Tool' for tool in tools tool wrapper XML Sub Element wrapper tools tool node XML Sub Element tool wrapper 'name' text str tool opts XML Sub Element wrapper 'multiconfig Options' skip install str data get 'skip-master-install' 'false' XML Sub Element opts 'skip Master Installation' text skip installconvert home str data get 'convert-homes-to-upper' 'false' XML Sub Element wrapper 'convert Homes To Uppercase' text convert home
def custom tools registry xml parent data base 'com cloudbees jenkins plugins customtools'wrapper XML Sub Element xml parent base + ' Custom Tool Install Wrapper' wrapper tools XML Sub Element wrapper 'selected Tools' tools data get 'tools' [] tool node base + ' Custom Tool Install Wrapper - Selected Tool' for tool in tools tool wrapper XML Sub Element wrapper tools tool node XML Sub Element tool wrapper 'name' text str tool opts XML Sub Element wrapper 'multiconfig Options' skip install str data get 'skip-master-install' 'false' XML Sub Element opts 'skip Master Installation' text skip installconvert home str data get 'convert-homes-to-upper' 'false' XML Sub Element wrapper 'convert Homes To Uppercase' text convert home
def remove tags html tags tags [re escape tag for tag in tags split ]tags re u' %s ' % u' ' join tags starttag re re compile u'<%s /?> \\s+[^>]*> ' % tags re re U endtag re re compile u'</%s>' % tags re html starttag re sub u'' html html endtag re sub u'' html return html
def parse address address m PCI ADDRESS REGEX match address if not m raise exception Pci Device Wrong Address Format address address return m groups
def bytelist 2 long Big Endian list imax len list / 4 hl [0 L] * imax j 0i 0while i < imax b0 long ord list[j] << 24 b1 long ord list[ j + 1 ] << 16 b2 long ord list[ j + 2 ] << 8 b3 long ord list[ j + 3 ] hl[i] b0 b1 b2 b3 i i + 1 j j + 4 return hl
def create collection index collection keys ignore created True ignore created opts True **kwargs INDEX ALREADY EXISTS 68 INDEX OPTIONS CONFLICT 85 try collection create index keys **kwargs except pymongo errors Operation Failure as exc errors to ignore []if ignore created errors to ignore append INDEX ALREADY EXISTS if ignore created opts errors to ignore append INDEX OPTIONS CONFLICT if exc code in errors to ignore logger warning " Existingindexincollection'{}'remainedunchanged {}" format collection full name exc details['errmsg'] else raise exc
def enable job name None if not name raise Salt Invocation Error ' Requiredparameter`name`ismissing ' server connect if not job exists name raise Salt Invocation Error ' Job`{ 0 }`doesnotexists ' format name try server enable job name except jenkins Jenkins Exception as err raise Salt Invocation Error ' Somethingwentwrong{ 0 } ' format err return True
def make cascade loader global conf catch '404 ' **local conf catch map int converters aslist catch apps []for name value in local conf items if not name startswith 'app' raise Value Error " Badconfigurationkey%r %r allconfigurationkeysmuststartwith'app'" % name value app loader get app value global conf global conf apps append name app apps sort apps [app for name app in apps]return Cascade apps catch catch
def make cascade loader global conf catch '404 ' **local conf catch map int converters aslist catch apps []for name value in local conf items if not name startswith 'app' raise Value Error " Badconfigurationkey%r %r allconfigurationkeysmuststartwith'app'" % name value app loader get app value global conf global conf apps append name app apps sort apps [app for name app in apps]return Cascade apps catch catch
def config present name ret {'name' name 'result' False 'changes' {} 'comment' ''}matches salt ['nxos cmd'] 'find' name if matches ret['result'] Trueret['comment'] ' Configisalreadyset'elif opts ['test'] is True ret['result'] Noneret['comment'] ' Configwillbeadded'ret['changes']['new'] nameelse salt ['nxos cmd'] 'add config' name matches salt ['nxos cmd'] 'find' name if matches ret['result'] Trueret['comment'] ' Successfullyaddedconfig'ret['changes']['new'] nameelse ret['result'] Falseret['comment'] ' Failedtoaddconfig'return ret
def config present name ret {'name' name 'result' False 'changes' {} 'comment' ''}matches salt ['nxos cmd'] 'find' name if matches ret['result'] Trueret['comment'] ' Configisalreadyset'elif opts ['test'] is True ret['result'] Noneret['comment'] ' Configwillbeadded'ret['changes']['new'] nameelse salt ['nxos cmd'] 'add config' name matches salt ['nxos cmd'] 'find' name if matches ret['result'] Trueret['comment'] ' Successfullyaddedconfig'ret['changes']['new'] nameelse ret['result'] Falseret['comment'] ' Failedtoaddconfig'return ret
def load multi database gb filename or handle gb filename or handle 2 TESTDB create database db name 'biosql-test'db name 2 'biosql-test 2 'server Bio Seq Database open database driver DBDRIVER user DBUSER passwd DBPASSWD host DBHOST db TESTDB db server new database db name iterator Seq IO parse gb filename or handle 'gb' count db load iterator db server new database db name 2 iterator Seq IO parse gb filename or handle 2 'gb' count 2 db load iterator server commit server close return count + count 2
def load multi database gb filename or handle gb filename or handle 2 TESTDB create database db name 'biosql-test'db name 2 'biosql-test 2 'server Bio Seq Database open database driver DBDRIVER user DBUSER passwd DBPASSWD host DBHOST db TESTDB db server new database db name iterator Seq IO parse gb filename or handle 'gb' count db load iterator db server new database db name 2 iterator Seq IO parse gb filename or handle 2 'gb' count 2 db load iterator server commit server close return count + count 2
def source model view if isinstance view model Q Sort Filter Proxy Model return view model source Model else return view model
def check coverage images used images uncovered set images - set [x[ 0 ] for x in used images] if uncovered LOGGER error ' Thefollowing Dockerfilesarenotdescribedintheparsefiles config ymlfile {} Pleaseseethefollowingdocumentationonhowtoadd Dockerfilerankstotheconfigurationfile {}' format uncovered 'https //github com/edx/configuration/blob/master/util/README md' sys exit 1
@require chanmsg@require privilege OP u' Youarenotachanneloperator ' @commands u'tmask' def set mask bot trigger bot db set channel value trigger sender u'topic mask' trigger group 2 bot say u' Gotcha ' + trigger nick
def get params mapper spec allowed keys None if 'output writer' not in mapper spec params message " Outputwriter'sparametersshouldbespecifiedinoutput writersubdictionary "if allowed keys raise errors Bad Writer Params Error message params mapper spec paramsparams dict str n v for n v in params iteritems else if not isinstance mapper spec params get 'output writer' dict raise errors Bad Writer Params Error ' Outputwriterparametersshouldbeadictionary' params mapper spec params get 'output writer' params dict str n v for n v in params iteritems if allowed keys params diff set params keys - allowed keys if params diff raise errors Bad Writer Params Error ' Invalidoutput writerparameters %s' % ' ' join params diff return params
def render from lms template name dictionary context None namespace 'main' return render to string template name dictionary context namespace 'lms ' + namespace
def render from lms template name dictionary context None namespace 'main' return render to string template name dictionary context namespace 'lms ' + namespace
def blended transform factory x transform y transform if isinstance x transform Affine 2 D Base and isinstance y transform Affine 2 D Base return Blended Affine 2 D x transform y transform return Blended Generic Transform x transform y transform
def blended transform factory x transform y transform if isinstance x transform Affine 2 D Base and isinstance y transform Affine 2 D Base return Blended Affine 2 D x transform y transform return Blended Generic Transform x transform y transform
def blended transform factory x transform y transform if isinstance x transform Affine 2 D Base and isinstance y transform Affine 2 D Base return Blended Affine 2 D x transform y transform return Blended Generic Transform x transform y transform
def setup platform hass config add devices discovery info None name config get CONF NAME host config get CONF HOST port config get CONF PORT device id config get CONF DEVICE try response requests get DEVICE LIST URL format host port json if device id in response[CONF DEVICES] keys add devices [ Fire TV Device host port device id name ] LOGGER info ' Device%saccessibleandreadyforcontrol' device id else LOGGER warning ' Device%sisnotregisteredwithfiretv-server' device id except requests exceptions Request Exception LOGGER error ' Couldnotconnecttofiretv-serverat%s' host
def try dbfield fn field class for cls in field class mro if cls is models Field continuedata fn cls if data return data
def try dbfield fn field class for cls in field class mro if cls is models Field continuedata fn cls if data return data
def try dbfield fn field class for cls in field class mro if cls is models Field continuedata fn cls if data return data
def extract cluster size line cluster size line split ' ' [ -1 ]try cluster size int cluster size except Value Error return 0return cluster size
def enable tab completion unused command libedit 'libedit' in readline doc command 'bind^ Irl complete' if libedit else 'tab complete' readline parse and bind command
def create meg coils chs acc t None coilset None do es False acc accuracy dict[acc] if isinstance acc string types else acc coilset read coil defs verbose False if coilset is None else coilset coils [ create meg coil coilset ch acc do es for ch in chs] transform orig meg coils coils t do es do es return coils
def upfirdn naive x h up 1 down 1 h np asarray h out np zeros len x * up x dtype out[ up] xout np convolve h out [ down][ output len len h len x up down ]return out
def sibpath filename return util sibpath file filename
def get course tag user course id key try record User Course Tag objects get user user course id course id key key return record valueexcept User Course Tag Does Not Exist return None
def get settings var directory DIRECTORY settings var {}settings var['EXTENSIONS'] EXTENSION Ssettings var['SELECT FORMATS'] SELECT FORMAT Ssettings var['ADMIN VERSIONS'] ADMIN VERSION Ssettings var['ADMIN THUMBNAIL'] ADMIN THUMBNAI Lsettings var['MAX UPLOAD SIZE'] MAX UPLOAD SIZ Esettings var['NORMALIZE FILENAME'] NORMALIZE FILENAM Esettings var['CONVERT FILENAME'] CONVERT FILENAM Esettings var['SEARCH TRAVERSE'] SEARCH TRAVERS Ereturn settings var
def set log file dir directory global log file dir log file dir directory
def get all metrics limit None metrics []def get leafs of node nodepath for obj in get matching metrics nodepath ['metrics'] if int obj['is leaf'] 1 metrics append obj['path'] else get leafs of node obj['path'] get leafs of node '' return metrics
def get all metrics limit None metrics []def get leafs of node nodepath for obj in get matching metrics nodepath ['metrics'] if int obj['is leaf'] 1 metrics append obj['path'] else get leafs of node obj['path'] get leafs of node '' return metrics
def shortest augmenting path G s t capacity 'capacity' residual None value only False two phase False cutoff None R shortest augmenting path impl G s t capacity residual two phase cutoff R graph['algorithm'] 'shortest augmenting path'return R
def shortest augmenting path G s t capacity 'capacity' residual None value only False two phase False cutoff None R shortest augmenting path impl G s t capacity residual two phase cutoff R graph['algorithm'] 'shortest augmenting path'return R
def get default object values return json loads utils get file contents feconf OBJECT DEFAULT VALUES FILE PATH
def compare Y Ascending point point Other if point y < point Other y return -1 return int point y > point Other y
def make image location size fmt if not os path isabs location return ''if not os path isdir os path dirname location return ''if not salt ['cmd retcode'] 'qemu-imgcreate-f{ 0 }{ 1 }{ 2 }M' format fmt location size python shell False return locationreturn ''
def salt auth tool if 'token' not in cherrypy session raise cherrypy HTTP Error 401 cherrypy response headers[' Cache- Control'] 'private'
@register filterdef bug url bug id review request if review request repository and review request repository bug tracker and u'%s' in review request repository bug tracker try return review request repository bug tracker % bug id except Type Error logging error u" Errorcreatingbug URL Thebugtracker URL'%s'islikelyinvalid " % review request repository bug tracker return None
@register filterdef bug url bug id review request if review request repository and review request repository bug tracker and u'%s' in review request repository bug tracker try return review request repository bug tracker % bug id except Type Error logging error u" Errorcreatingbug URL Thebugtracker URL'%s'islikelyinvalid " % review request repository bug tracker return None
def libvlc audio output device get mp f Cfunctions get 'libvlc audio output device get' None or Cfunction 'libvlc audio output device get' 1 None ctypes c char p Media Player return f mp
def check password guess hashed if hashed startswith 'PBKDF 2 ' if check password PBKDF 2 guess hashed return Trueelif hashlib sha 1 guess hexdigest hashed return Truereturn False
def relu x use cudnn True return Re LU use cudnn x
def publish file token room filepath message '' api url None if not os path isfile filepath raise Value Error " File'{ 0 }'doesnotexist" format filepath if len message > 1000 raise Value Error ' Messagetoolong' url '{ 0 }/v 2 /room/{ 1 }/share/file' format api url room headers {' Content-type' 'multipart/related boundary boundary 123456 '}headers[' Authorization'] ' Bearer' + token msg json dumps {'message' message} payload '--boundary 123456 \n Content- Type application/json charset UTF- 8 \n Content- Disposition attachment name "metadata"\n\n{ 0 }\n\n--boundary 123456 \n Content- Disposition attachment name "file" filename "{ 1 }"\n\n{ 2 }\n\n--boundary 123456 --' format msg os path basename filepath open filepath 'rb' read salt utils http query url method 'POST' header dict headers data payload
def publish file token room filepath message '' api url None if not os path isfile filepath raise Value Error " File'{ 0 }'doesnotexist" format filepath if len message > 1000 raise Value Error ' Messagetoolong' url '{ 0 }/v 2 /room/{ 1 }/share/file' format api url room headers {' Content-type' 'multipart/related boundary boundary 123456 '}headers[' Authorization'] ' Bearer' + token msg json dumps {'message' message} payload '--boundary 123456 \n Content- Type application/json charset UTF- 8 \n Content- Disposition attachment name "metadata"\n\n{ 0 }\n\n--boundary 123456 \n Content- Disposition attachment name "file" filename "{ 1 }"\n\n{ 2 }\n\n--boundary 123456 --' format msg os path basename filepath open filepath 'rb' read salt utils http query url method 'POST' header dict headers data payload
def exp x np import module 'numpy' if isinstance x int float return interval np exp x np exp x elif isinstance x interval return interval np exp x start np exp x end is valid x is valid else raise Not Implemented Error
def string to rgb s orig s ss s strip if s startswith '#' s s[ 1 ]if not len s 6 raise Value Error " String%sdoesn'tlooklikeahexstring" % orig s return int s[ 2] 16 int s[ 2 4] 16 int s[ 4 ] 16
def shellglob args expanded []unescape unescape glob if sys platform 'win 32 ' else lambda x x for a in args expanded extend glob glob a or [unescape a ] return expanded
def obscure string input string if input string is None or len input string < 4 return input stringlast four input string[ -4 ]obscured '*' * len input string - 4 return obscured + last four
def obscure string input string if input string is None or len input string < 4 return input stringlast four input string[ -4 ]obscured '*' * len input string - 4 return obscured + last four
def delete security group rule security group rule id profile None conn auth profile return conn delete security group rule security group rule id
def check meta data facility check fields ['user count' 'latitude' 'longitude' 'address' 'contact name' 'contact phone' 'contact email']return any [ getattr facility field None is None or getattr facility field '' for field in check fields]
def setvariable cursor mysqlvar value query 'SETGLOBAL%s ' % mysql quote identifier mysqlvar 'vars' try cursor execute query + '%s' value cursor fetchall result Trueexcept Exception e get exception result str e return result
def setvariable cursor mysqlvar value query 'SETGLOBAL%s ' % mysql quote identifier mysqlvar 'vars' try cursor execute query + '%s' value cursor fetchall result Trueexcept Exception e get exception result str e return result
def setvariable cursor mysqlvar value query 'SETGLOBAL%s ' % mysql quote identifier mysqlvar 'vars' try cursor execute query + '%s' value cursor fetchall result Trueexcept Exception e get exception result str e return result
def setvariable cursor mysqlvar value query 'SETGLOBAL%s ' % mysql quote identifier mysqlvar 'vars' try cursor execute query + '%s' value cursor fetchall result Trueexcept Exception e get exception result str e return result
def dark palette color n colors 6 reverse False as cmap False gray '# 222222 'colors [color gray] if reverse else [gray color] return blend palette colors n colors as cmap
def check non negative X whom X X data if sp issparse X else X if X < 0 any raise Value Error ' Negativevaluesindatapassedto%s' % whom
def main init Logging verbose True init Experiment Prng @staticmethoddef mock Create *args **kwargs kwargs pop 'implementation' None return CLA Classifier Diff *args **kwargs CLA Classifier Factory create mock Createrun Experiment sys argv[ 1 ]
def non structured query table query None **kwargs client get client client table tableif query is None query parts []for key value in kwargs items query parts append '{ 0 } {1 }' format key value query '^' join query parts query str query response client get query return response
def non structured query table query None **kwargs client get client client table tableif query is None query parts []for key value in kwargs items query parts append '{ 0 } {1 }' format key value query '^' join query parts query str query response client get query return response
def generate bins generic values binner closed lenidx len values lenbin len binner if lenidx < 0 or lenbin < 0 raise Value Error ' Invalidlengthforvaluesorforbinner' if values[ 0 ] < binner[ 0 ] raise Value Error ' Valuesfallsbeforefirstbin' if values[ lenidx - 1 ] > binner[ lenbin - 1 ] raise Value Error ' Valuesfallsafterlastbin' bins np empty lenbin - 1 dtype np int 64 j 0bc 0for i in range 0 lenbin - 1 r bin binner[ i + 1 ]while j < lenidx and values[j] < r bin or closed 'right' and values[j] r bin j + 1bins[bc] jbc + 1return bins
def generate bins generic values binner closed lenidx len values lenbin len binner if lenidx < 0 or lenbin < 0 raise Value Error ' Invalidlengthforvaluesorforbinner' if values[ 0 ] < binner[ 0 ] raise Value Error ' Valuesfallsbeforefirstbin' if values[ lenidx - 1 ] > binner[ lenbin - 1 ] raise Value Error ' Valuesfallsafterlastbin' bins np empty lenbin - 1 dtype np int 64 j 0bc 0for i in range 0 lenbin - 1 r bin binner[ i + 1 ]while j < lenidx and values[j] < r bin or closed 'right' and values[j] r bin j + 1bins[bc] jbc + 1return bins
@undocdef filehash path warn 'filehash isdeprecatedsince I Python 4 0' Deprecation Warning stacklevel 2 with open path 'r U' as f return md 5 py 3 compat str to bytes f read hexdigest
def get config by name section name for config in section if config['name'] name return configreturn None
def libvlc media player get fps p mi f Cfunctions get 'libvlc media player get fps' None or Cfunction 'libvlc media player get fps' 1 None ctypes c float Media Player return f p mi
def get ctf head to head t idx points fp idx points astype '>f 8 ' dp np sum fp[ 2 ] * fp[ 0 ] - fp[ 1 ] tmp 1 tmp 2 sum squared fp[ 2 ] sum squared fp[ 0 ] - fp[ 1 ] dcos - dp / np sqrt tmp 1 * tmp 2 dsin np sqrt 1 0 - dcos * dcos dt dp / np sqrt tmp 2 t np array [[dcos - dsin 0 0 dt] [dsin dcos 0 0 0 0] [0 0 0 0 1 0 0 0] [0 0 0 0 0 0 1 0]] return Transform 'ctf head' 'head' t
def camel to underscore name import stringfor c in string ascii uppercase name name replace c ' %c' % c return name strip ' ' lower
def camel to underscore name import stringfor c in string ascii uppercase name name replace c ' %c' % c return name strip ' ' lower
def write zfile file handle data compress 1 file handle write ZFILE PREFIX length hex str len data file handle write asbytes length ljust MAX LEN file handle write zlib compress asbytes data compress
def absolute flat glob pattern dirname basename os path split pattern if basename if os path exists pattern yield pattern elif os path isdir dirname yield pattern return
def absolute flat glob pattern dirname basename os path split pattern if basename if os path exists pattern yield pattern elif os path isdir dirname yield pattern return
def absolute flat glob pattern dirname basename os path split pattern if basename if os path exists pattern yield pattern elif os path isdir dirname yield pattern return
def run Experiment args model None opt parse Command Line Options args model run Experiment Impl opt model return model
def run Experiment args model None opt parse Command Line Options args model run Experiment Impl opt model return model
def check path traversal path user 'root' skip perm errors False for tpath in list path traversal path if not os access tpath os R OK msg ' Couldnotaccess{ 0 } ' format tpath if not os path exists tpath msg + ' Pathdoesnotexist 'else current user salt utils get user if user current user msg + ' Tryrunningasuser{ 0 } ' format user else msg + ' Pleasegive{ 0 }readpermissions ' format user if skip perm errors returnraise Salt Client Error msg
def check path traversal path user 'root' skip perm errors False for tpath in list path traversal path if not os access tpath os R OK msg ' Couldnotaccess{ 0 } ' format tpath if not os path exists tpath msg + ' Pathdoesnotexist 'else current user salt utils get user if user current user msg + ' Tryrunningasuser{ 0 } ' format user else msg + ' Pleasegive{ 0 }readpermissions ' format user if skip perm errors returnraise Salt Client Error msg
def make Printable data charset quote None to unicode False smart True if data if not isinstance data unicode data unicode data 'ISO- 8859 - 1 ' charset 'ASCII'data regex control code sub lambda regs controlchars[ord regs group 1 ] data if quote if quote in '"\'' data data replace quote '\\' + quote data '' join quote data quote elif quote data ' empty 'data data encode charset 'backslashreplace' if smart data re sub '\\\\x 0 [0 - 7 ] ? [^ 0 - 7 ] $ ' '\\\\\\ 1 ' data if to unicode data unicode data charset return data
def absent name region None key None keyid None profile None ret {'name' name 'result' True 'comment' '' 'changes' {}}exists salt ['boto elb exists'] name region key keyid profile if exists if opts ['test'] ret['comment'] 'ELB{ 0 }issettoberemoved ' format name ret['result'] Nonereturn retdeleted salt ['boto elb delete'] name region key keyid profile if deleted ret['changes']['old'] {'elb' name}ret['changes']['new'] {'elb' None}ret['comment'] 'ELB{ 0 }deleted ' format name else ret['result'] Falseret['comment'] ' Failedtodelete{ 0 }ELB ' format name else ret['comment'] '{ 0 }EL Bdoesnotexist ' format name return ret
def create lead email id from email utils import parseaddrfrom frappe model naming import get default naming series real name email id parseaddr email id if frappe db get value u' Lead' {u'email id' email id} returnlead frappe get doc {u'doctype' u' Lead' u'email id' email id u'lead name' real name or email id u'status' u' Lead' u'naming series' get default naming series u' Lead' u'company' frappe db get default u' Company' u'source' u' Email'} lead insert
def local home directory name '' with settings hide 'running' 'stdout' return local 'echo~' + name capture True
def tokenize buf try return parser parse lexer lex buf except Lexing Error as e pos e getsourcepos raise Lex Exception ' Couldnotidentifythenexttoken ' pos lineno pos colno except Lex Exception as e if e source is None e source bufraise
def auto decode data for bom encoding in BOMS if data startswith bom return data[len bom ] decode encoding for line in data split '\n' [ 2] if line[ 0 1] '#' and ENCODING RE search line encoding ENCODING RE search line groups [0 ] decode 'ascii' return data decode encoding return data decode locale getpreferredencoding False
def auto decode data for bom encoding in BOMS if data startswith bom return data[len bom ] decode encoding for line in data split '\n' [ 2] if line[ 0 1] '#' and ENCODING RE search line encoding ENCODING RE search line groups [0 ] decode 'ascii' return data decode encoding return data decode locale getpreferredencoding False
def linear m 1 b 0 def f i return m * i + b return partial force sequence advance f
def request user has resource api permission permission type def decorate func function name func name if function name not in ['post'] raise Exception ' Thisdecoratorshouldonlybeusedtowrappostmethods' @wraps func def func wrapper *args **kwargs resource api args[ 1 ]utils assert request user has resource api permission request pecan request resource api resource api permission type permission type return func *args **kwargs return func wrapperreturn decorate
def request user has resource api permission permission type def decorate func function name func name if function name not in ['post'] raise Exception ' Thisdecoratorshouldonlybeusedtowrappostmethods' @wraps func def func wrapper *args **kwargs resource api args[ 1 ]utils assert request user has resource api permission request pecan request resource api resource api permission type permission type return func *args **kwargs return func wrapperreturn decorate
def request user has resource api permission permission type def decorate func function name func name if function name not in ['post'] raise Exception ' Thisdecoratorshouldonlybeusedtowrappostmethods' @wraps func def func wrapper *args **kwargs resource api args[ 1 ]utils assert request user has resource api permission request pecan request resource api resource api permission type permission type return func *args **kwargs return func wrapperreturn decorate
def hamming u v u validate vector u v validate vector v if u shape v shape raise Value Error ' The 1 darraysmusthaveequallengths ' return u v mean
def Present Dialog message choices default choice index 0 to eval u"confirm '{ 0 }' '{ 1 }' {2 } " format Escape For Vim To Unicode message Escape For Vim To Unicode u'\n' join choices default choice index + 1 try return Get Int Value to eval - 1 except Keyboard Interrupt return -1
def Present Dialog message choices default choice index 0 to eval u"confirm '{ 0 }' '{ 1 }' {2 } " format Escape For Vim To Unicode message Escape For Vim To Unicode u'\n' join choices default choice index + 1 try return Get Int Value to eval - 1 except Keyboard Interrupt return -1
def Present Dialog message choices default choice index 0 to eval u"confirm '{ 0 }' '{ 1 }' {2 } " format Escape For Vim To Unicode message Escape For Vim To Unicode u'\n' join choices default choice index + 1 try return Get Int Value to eval - 1 except Keyboard Interrupt return -1
def new Action parent text slot None shortcut None icon None tip None checkable False enabled True a Q Action text parent if icon is not None a set Icon new Icon icon if shortcut is not None if isinstance shortcut list tuple a set Shortcuts shortcut else a set Shortcut shortcut if tip is not None a set Tool Tip tip a set Status Tip tip if slot is not None a triggered connect slot if checkable a set Checkable True a set Enabled enabled return a
def crop image offset height offset width crop height crop width original shape tf shape image rank assertion tf Assert tf equal tf rank image 3 [' Rankofimagemustbeequalto 3 '] cropped shape control flow ops with dependencies [rank assertion] tf pack [crop height crop width original shape[ 2 ]] size assertion tf Assert tf logical and tf greater equal original shape[ 0 ] crop height tf greater equal original shape[ 1 ] crop width [' Cropsizegreaterthantheimagesize '] offsets tf to int 32 tf pack [offset height offset width 0] image control flow ops with dependencies [size assertion] tf slice image offsets cropped shape return tf reshape image cropped shape
def get approved tools app sa session tools []for tool in sa session query app model Tool order by app model Tool table c name if tool state app model Tool states APPROVED tools append tool return tools
def migrate tags on taxes cr registry env api Environment cr SUPERUSER ID {} xml records env['ir model data'] search [ 'model' ' ' 'account tax template' 'module' 'like' 'l 10 n %' ] tax template ids [x['res id'] for x in xml records sudo read ['res id'] ]for tax template in env['account tax template'] browse tax template ids tax id env['account tax'] search [ 'name' ' ' tax template name 'type tax use' ' ' tax template type tax use 'description' ' ' tax template description ] if len tax id ids 1 tax id sudo write {'tag ids' [ 6 0 tax template tag ids ids ]}
def migrate tags on taxes cr registry env api Environment cr SUPERUSER ID {} xml records env['ir model data'] search [ 'model' ' ' 'account tax template' 'module' 'like' 'l 10 n %' ] tax template ids [x['res id'] for x in xml records sudo read ['res id'] ]for tax template in env['account tax template'] browse tax template ids tax id env['account tax'] search [ 'name' ' ' tax template name 'type tax use' ' ' tax template type tax use 'description' ' ' tax template description ] if len tax id ids 1 tax id sudo write {'tag ids' [ 6 0 tax template tag ids ids ]}
def migrate tags on taxes cr registry env api Environment cr SUPERUSER ID {} xml records env['ir model data'] search [ 'model' ' ' 'account tax template' 'module' 'like' 'l 10 n %' ] tax template ids [x['res id'] for x in xml records sudo read ['res id'] ]for tax template in env['account tax template'] browse tax template ids tax id env['account tax'] search [ 'name' ' ' tax template name 'type tax use' ' ' tax template type tax use 'description' ' ' tax template description ] if len tax id ids 1 tax id sudo write {'tag ids' [ 6 0 tax template tag ids ids ]}
def migrate tags on taxes cr registry env api Environment cr SUPERUSER ID {} xml records env['ir model data'] search [ 'model' ' ' 'account tax template' 'module' 'like' 'l 10 n %' ] tax template ids [x['res id'] for x in xml records sudo read ['res id'] ]for tax template in env['account tax template'] browse tax template ids tax id env['account tax'] search [ 'name' ' ' tax template name 'type tax use' ' ' tax template type tax use 'description' ' ' tax template description ] if len tax id ids 1 tax id sudo write {'tag ids' [ 6 0 tax template tag ids ids ]}
def get static welcome message return '\n<h 3 > Search Help</h 3 >\n<ul><li> Thedisplaybelowthelineisanexampleoftheoutputthebrowser\nshowsyouwhenyouenterasearchword Thesearchwordwas<b>green</b> </li>\n<li> Thesearchresultshowsfordifferentpartsofspeechthe<b>synsets</b>\ni e differentmeaningsfortheword </li>\n<li> Allunderlinedtextsarehypertextlinks Therearetwotypesoflinks \nwordlinksandothers Clickingawordlinkcarriesoutasearchfortheword\ninthe Wordnetdatabase </li>\n<li> Clickingalinkoftheothertypeopensadisplaysectionofdataattached\ntothatlink Clickingthatlinkasecondtimeclosesthesectionagain </li>\n<li> Clicking<u>S </u>opensasectionshowingtherelationsforthatsynset </li>\n<li> Clickingonarelationnameopensasectionthatdisplaystheassociated\nsynsets </li>\n<li> Typeasearchwordinthe<b> Next Word</b>fieldandstartthesearchbythe\n<b> Enter/ Return</b>keyorclickthe<b> Search</b>button </li>\n</ul>\n'
def get cursor source spelling root cursor source if isinstance source Cursor else source cursor for cursor in root cursor walk preorder if cursor spelling spelling return cursorreturn None
def sdm ecart f return sdm deg f - sdm monomial deg sdm LM f
def set log level for all handlers logger level logging DEBUG logger set Level level handlers logger handlersfor handler in handlers handler set Level level return logger
def parse interval value try return sorted aniso 8601 parse interval value except Value Error try return aniso 8601 parse datetime value None except Value Error return aniso 8601 parse date value None
def parse interval value try return sorted aniso 8601 parse interval value except Value Error try return aniso 8601 parse datetime value None except Value Error return aniso 8601 parse date value None
def cleanup version sender instance **kw if kw get 'raw' returnfor file in instance files all cleanup file file class file
def adjust processing time num cores workload timing epoch sigma 0 0for i in range num cores timing[i] workload[i] / timing[i] - epoch sigma + timing[i]spread [ None for x in range num cores ]for i in range num cores spread[i] timing[i] * num cores / sigma return spread
def adjust processing time num cores workload timing epoch sigma 0 0for i in range num cores timing[i] workload[i] / timing[i] - epoch sigma + timing[i]spread [ None for x in range num cores ]for i in range num cores spread[i] timing[i] * num cores / sigma return spread
def create change list from suggestion suggestion return [{'cmd' exp domain CMD EDIT STATE PROPERTY 'state name' suggestion state name 'property name' exp domain STATE PROPERTY CONTENT 'new value' [suggestion state content]}]
def create change list from suggestion suggestion return [{'cmd' exp domain CMD EDIT STATE PROPERTY 'state name' suggestion state name 'property name' exp domain STATE PROPERTY CONTENT 'new value' [suggestion state content]}]
def pseudocorpus source vocab sep for k in source vocab if sep not in k continueunigrams k split sep for i in range 1 len unigrams yield [sep join unigrams[ i] sep join unigrams[i ] ]
@ get clientdef task get client task id session None force show deleted False return client task get task id task id session session force show deleted force show deleted
def render subcommand args if args subcommand 'delete' return 'delete' + args delete subcommand if args subcommand in 'wal-prefetch' 'wal-push' 'wal-fetch' return Nonereturn args subcommand
@register as tagdef models for pages *args from warnings import warnwarn u'templatetagmodels for pagesisdeprectaed use Page Admin get content modelsinstead' from mezzanine pages admin import Page Adminreturn Page Admin get content models
@register as tagdef models for pages *args from warnings import warnwarn u'templatetagmodels for pagesisdeprectaed use Page Admin get content modelsinstead' from mezzanine pages admin import Page Adminreturn Page Admin get content models
@register as tagdef models for pages *args from warnings import warnwarn u'templatetagmodels for pagesisdeprectaed use Page Admin get content modelsinstead' from mezzanine pages admin import Page Adminreturn Page Admin get content models
@register as tagdef models for pages *args from warnings import warnwarn u'templatetagmodels for pagesisdeprectaed use Page Admin get content modelsinstead' from mezzanine pages admin import Page Adminreturn Page Admin get content models
@register as tagdef models for pages *args from warnings import warnwarn u'templatetagmodels for pagesisdeprectaed use Page Admin get content modelsinstead' from mezzanine pages admin import Page Adminreturn Page Admin get content models
def get inner objects vim base obj path inner type properties to collect None all False client factory vim client factorybase type base obj typetraversal spec vutil build traversal spec client factory 'inner' base type path False [] object spec vutil build object spec client factory base obj [traversal spec] property spec vutil build property spec client factory type inner type properties to collect properties to collect all properties all property filter spec vutil build property filter spec client factory [property spec] [object spec] options client factory create 'ns 0 Retrieve Options' options max Objects CONF vmware maximum objectsreturn vim Retrieve Properties Ex vim service content property Collector spec Set [property filter spec] options options
def convert val acceptable types if isinstance val acceptable types return valreturn parse expression val acceptable types raise type Parse Error
def hwaddr interfaces ret {}ifaces get interfaces for face in ifaces if 'hwaddr' in ifaces[face] ret[face] ifaces[face]['hwaddr']return {'hwaddr interfaces' ret}
def patched get children self usage key filter None def iter children 'skipchildrennotvisibletostudents'for child in GET CHILDREN self usage key filter usage key filter child field data cache {}if not child visible to staff only yield child return list iter children
def patched get children self usage key filter None def iter children 'skipchildrennotvisibletostudents'for child in GET CHILDREN self usage key filter usage key filter child field data cache {}if not child visible to staff only yield child return list iter children
def main if len sys argv > 1 write Output '' join sys argv[ 1 ] else settings start Main Loop From Constructor get New Repository
def write key file key filename banner public key secret key None metadata None encoding 'utf- 8 ' if isinstance public key bytes public key public key decode encoding if isinstance secret key bytes secret key secret key decode encoding with io open key filename 'w' encoding 'utf 8 ' as f f write banner format datetime datetime now f write u 'metadata\n' if metadata for k v in metadata items if isinstance k bytes k k decode encoding if isinstance v bytes v v decode encoding f write u '{ 0 } {1 }\n' format k v f write u 'curve\n' f write u 'public-key "{ 0 }"\n' format public key if secret key f write u 'secret-key "{ 0 }"\n' format secret key
def bootstrap request create fake data table Bootstrap Table Person objects all order by '-name' Request Config request paginate {'per page' 10 } configure table return render request 'bootstrap template html' {'table' table}
@taskdef generate self signed ctx domain cmd 'opensslreq-x 509 -nodes-days 365 -newkeyrsa 2048 -keyout{ 0 } key-out{ 0 } crt' format domain ctx run cmd
def parse descriptor try return json load descriptor except logger error " Thefilecouldn'tbeparsed'" logger error descriptor return {}
def pytest ignore collect path config if 'appengine/standard' in str path if six PY 3 return Trueif 'GAE SDK PATH' not in os environ return Truereturn False
def list team members team name profile 'github' ignore cache False cached team get team team name profile profile if not cached team log error ' Team{ 0 }doesnotexist ' format team name return Falseif cached team get 'members' and not ignore cache return cached team get 'members' try client get client profile organization client get organization get config value profile 'org name' team organization get team cached team['id'] except Unknown Object Exception as e log exception ' Resourcenotfound {0 }' format cached team['id'] try cached team['members'] [member login lower for member in team get members ]return cached team['members']except Unknown Object Exception as e log exception ' Resourcenotfound {0 }' format cached team['id'] return []
def has plugin permission user plugin type permission type from cms plugin pool import plugin poolplugin class plugin pool get plugin plugin type codename get model permission codename plugin class model action permission type return user has perm codename
def has plugin permission user plugin type permission type from cms plugin pool import plugin poolplugin class plugin pool get plugin plugin type codename get model permission codename plugin class model action permission type return user has perm codename
def has plugin permission user plugin type permission type from cms plugin pool import plugin poolplugin class plugin pool get plugin plugin type codename get model permission codename plugin class model action permission type return user has perm codename
def has plugin permission user plugin type permission type from cms plugin pool import plugin poolplugin class plugin pool get plugin plugin type codename get model permission codename plugin class model action permission type return user has perm codename
def manual search singleton artist input ' Artist ' name input ' Track ' if singleton else ' Album ' return artist strip name strip
def describe api method response rest Api Id resource Path http Method status Code region None key None keyid None profile None try resource describe api resource rest Api Id resource Path region region key key keyid keyid profile profile get 'resource' if resource conn get conn region region key key keyid keyid profile profile response conn get method response rest Api Id rest Api Id resource Id resource['id'] http Method http Method status Code str status Code return {'response' convert datetime str response }return {'error' 'nosuchresource'}except Client Error as e return {'error' salt utils boto 3 get error e }
def setup platform hass config add callback devices discovery info None if discovery info is None returnhomematic get component 'homematic' return homematic setup hmdevice discovery helper hass HM Switch discovery info add callback devices
def boykov kolmogorov G s t capacity 'capacity' residual None value only False cutoff None R boykov kolmogorov impl G s t capacity residual cutoff R graph['algorithm'] 'boykov kolmogorov'return R
def boykov kolmogorov G s t capacity 'capacity' residual None value only False cutoff None R boykov kolmogorov impl G s t capacity residual cutoff R graph['algorithm'] 'boykov kolmogorov'return R
@contextmanagerdef patch client target mock client None with mock patch target as client getter client mock client or Mock Box client getter return value client yield client
def get service hass config discovery info None import boto 3 aws config config copy del aws config[CONF PLATFORM]del aws config[CONF NAME]profile aws config get CONF PROFILE NAME if profile is not None boto 3 setup default session profile name profile del aws config[CONF PROFILE NAME]sqs client boto 3 client 'sqs' **aws config return AWSSQS sqs client
def test all db from applications sahana modules test cr import *test cr db from applications sahana modules test or import *test or db from applications sahana modules test pr import *test pr db
def make soap enveloped saml thingy thingy headers None soap envelope soapenv Envelope if headers header soapenv Header header add extension elements headers soap envelope header headersoap envelope body soapenv Body soap envelope body add extension element thingy return '%s' % soap envelope
def tgrep bind node label action s l tokens if len tokens 1 return tokens[ 0 ]else assert len tokens 3 assert tokens[ 1 ] u' ' node pred tokens[ 0 ]node label tokens[ 2 ]def node label bind pred n m None l None if node pred n m l if l is None raise Tgrep Exception u'cannotbindnode label{ 0 } label dictis None' format node label l[node label] nreturn Trueelse return Falsereturn node label bind pred
def tgrep bind node label action s l tokens if len tokens 1 return tokens[ 0 ]else assert len tokens 3 assert tokens[ 1 ] u' ' node pred tokens[ 0 ]node label tokens[ 2 ]def node label bind pred n m None l None if node pred n m l if l is None raise Tgrep Exception u'cannotbindnode label{ 0 } label dictis None' format node label l[node label] nreturn Trueelse return Falsereturn node label bind pred
def tgrep bind node label action s l tokens if len tokens 1 return tokens[ 0 ]else assert len tokens 3 assert tokens[ 1 ] u' ' node pred tokens[ 0 ]node label tokens[ 2 ]def node label bind pred n m None l None if node pred n m l if l is None raise Tgrep Exception u'cannotbindnode label{ 0 } label dictis None' format node label l[node label] nreturn Trueelse return Falsereturn node label bind pred
@api view u'GET' @renderer classes Template HTML Renderer def example request data {u'object' u'foobar'}return Response data template name u'example html'
def create Assembly file id namespace id bar num default filename 'foo' file name Directory Get Current Directory + '\\' + default filename + str file id + ' cs' file open file name 'w' print >>file cs ipy % str namespace id bar num file close compile Assembly file name
def compute node get by host context host session get session with session begin service session query models Service filter by host host binary 'monitor-bmc' first node session query models Compute Node options joinedload 'service' filter by deleted False service id service id return node first
def bin output func func argtypes [GEOM PTR POINTER c size t ]func errcheck check sized stringfunc restype c uchar preturn func
def bin output func func argtypes [GEOM PTR POINTER c size t ]func errcheck check sized stringfunc restype c uchar preturn func
@webob dec wsgify@util check accept 'application/json' def get inventory req context req environ['placement context']uuid util wsgi path item req environ 'uuid' resource class util wsgi path item req environ 'resource class' resource provider objects Resource Provider get by uuid context uuid inventory objects Inventory List get all by resource provider uuid context resource provider uuid find resource class if not inventory raise webob exc HTTP Not Found ' Noinventoryofclass% class sfor% rp uuid s' % {'class' resource class 'rp uuid' resource provider uuid} json formatter util json error formatter return send inventory req response resource provider inventory
def load name or file f name or fileopened Falseif isinstance name or file basestring f open name or file 'rb' opened Trueelif not hasattr f 'read' raise Value Error ' Readablestreamexpected' name values decode f read s SOL name for n v in values iteritems s[n] vif opened is True f close return s
def list passwords kwargs None call None response query 'support' 'password/list' ret {}for item in response['list'] if 'server' in item server item['server']['name']if server not in ret ret[server] []ret[server] append item return ret
def list passwords kwargs None call None response query 'support' 'password/list' ret {}for item in response['list'] if 'server' in item server item['server']['name']if server not in ret ret[server] []ret[server] append item return ret
def get date formats from django conf import settingsdate format 'DATE FORMAT' datetime format 'DATETIME FORMAT' time format 'TIME FORMAT' if date format 'DATE FORMAT' date format settings DATE FORMA Tif datetime format 'DATETIME FORMAT' datetime format settings DATETIME FORMA Tif time format 'TIME FORMAT' time format settings TIME FORMA Treturn date format datetime format time format
def env to statement env source file env get 'file' None if source file return ' %s' % escape source file env execute env get 'execute' None if execute return executename env['name']value escape env['value'] env return '%s %s export%s' % name value name
def describe file set modules descriptor File Set file descriptors []for module in modules file descriptors append describe file module if file descriptors descriptor files file descriptorsreturn descriptor
def get reviews by repository id changeset revision app repository id changeset revision sa session app model context currentreturn sa session query app model Repository Review filter and app model Repository Review repository id app security decode id repository id app model Repository Review changeset revision changeset revision all
def get reviews by repository id changeset revision app repository id changeset revision sa session app model context currentreturn sa session query app model Repository Review filter and app model Repository Review repository id app security decode id repository id app model Repository Review changeset revision changeset revision all
def setup hass config logger logging get Logger name from netdisco service import Discovery Servicelogging get Logger 'zeroconf' set Level logging CRITICAL lock threading Lock def new service listener service info ' Calledwhenanewserviceisfound 'with lock logger info ' Foundnewservice %s%s' service info comp plat SERVICE HANDLERS get service if not comp plat return component platform comp platif platform is None discover hass service info component config else load platform hass component platform info config def start discovery event ' Startdiscovering 'netdisco Discovery Service SCAN INTERVAL netdisco add listener new service listener netdisco start hass bus listen once EVENT HOMEASSISTANT START start discovery return True
def merge mean color graph src dst graph node[dst]['totalcolor'] + graph node[src]['totalcolor']graph node[dst]['pixelcount'] + graph node[src]['pixelcount']graph node[dst]['meancolor'] graph node[dst]['totalcolor'] / graph node[dst]['pixelcount']
def apiname funcname if funcname startswith 'gl' return funcnameelif funcname startswith ' ' return ' gl' + funcname[ 1 ] upper + funcname[ 2 ] else return 'gl' + funcname[ 0 ] upper + funcname[ 1 ]
def apiname funcname if funcname startswith 'gl' return funcnameelif funcname startswith ' ' return ' gl' + funcname[ 1 ] upper + funcname[ 2 ] else return 'gl' + funcname[ 0 ] upper + funcname[ 1 ]
def plot lbp model ax binary values theta np deg 2 rad 45 R 1r 0 15 w 1 5gray '0 5'plot circle ax 0 0 radius r color gray for i facecolor in enumerate binary values x R * np cos i * theta y R * np sin i * theta plot circle ax x y radius r color str facecolor for x in np linspace - w w 4 ax axvline x color gray ax axhline x color gray ax axis 'image' ax axis 'off' size w + 0 2 ax set xlim - size size ax set ylim - size size
def sew messages and reactions messages reactions for message in messages message['reactions'] []converted messages {message['id'] message for message in messages}for reaction in reactions converted messages[reaction['message id']]['reactions'] append reaction return list converted messages values
def prettify name name return name replace ' ' '' title
def assert all changes start state end state expected changes tracebackhide Truestart files start stateend files end stateif isinstance start state Test Pip Result start files start state files beforeif isinstance end state Test Pip Result end files end state files afterdiff diff states start files end files ignore expected changes if list diff values [{} {} {}] raise Test Failure ' Unexpectedchanges \n' + '\n' join [ k + ' ' + ' ' join v keys for k v in diff items ] return diff
def assert all changes start state end state expected changes tracebackhide Truestart files start stateend files end stateif isinstance start state Test Pip Result start files start state files beforeif isinstance end state Test Pip Result end files end state files afterdiff diff states start files end files ignore expected changes if list diff values [{} {} {}] raise Test Failure ' Unexpectedchanges \n' + '\n' join [ k + ' ' + ' ' join v keys for k v in diff items ] return diff
def assert all changes start state end state expected changes tracebackhide Truestart files start stateend files end stateif isinstance start state Test Pip Result start files start state files beforeif isinstance end state Test Pip Result end files end state files afterdiff diff states start files end files ignore expected changes if list diff values [{} {} {}] raise Test Failure ' Unexpectedchanges \n' + '\n' join [ k + ' ' + ' ' join v keys for k v in diff items ] return diff
def get vm key 'uuid' ret {}vmadm check vmadm if key not in ['uuid' 'alias' 'hostname'] ret[' Error'] ' Keymustbeeitheruuid aliasorhostname'return retvm lookup '{ 0 } {1 }' format key vm one True if ' Error' in vm return vmcmd '{vmadm}get{uuid}' format vmadm vmadm uuid vm res salt ['cmd run all'] cmd retcode res['retcode']if retcode 0 ret[' Error'] res['stderr'] if 'stderr' in res else exit status retcode return retreturn json loads res['stdout']
def get vm key 'uuid' ret {}vmadm check vmadm if key not in ['uuid' 'alias' 'hostname'] ret[' Error'] ' Keymustbeeitheruuid aliasorhostname'return retvm lookup '{ 0 } {1 }' format key vm one True if ' Error' in vm return vmcmd '{vmadm}get{uuid}' format vmadm vmadm uuid vm res salt ['cmd run all'] cmd retcode res['retcode']if retcode 0 ret[' Error'] res['stderr'] if 'stderr' in res else exit status retcode return retreturn json loads res['stdout']
def run Protocols With Reactor reactor Builder server Protocol client Protocol endpoint Creator reactor reactor Builder build Reactor server Protocol set Attributes reactor Deferred client Protocol set Attributes reactor Deferred server Factory Single Protocol Factory server Protocol client Factory Single Protocol Factory client Protocol server Endpoint endpoint Creator server reactor d server Endpoint listen server Factory def got Port p client Endpoint endpoint Creator client reactor p get Host return client Endpoint connect client Factory d add Callback got Port def failed result log err result ' Connectionsetupfailed ' disconnected gather Results [server Protocol done client Protocol done] d add Callback lambda disconnected d add Errback failed d add Callback lambda needs Running Reactor reactor reactor stop reactor Builder run Reactor reactor return reactor
def run Protocols With Reactor reactor Builder server Protocol client Protocol endpoint Creator reactor reactor Builder build Reactor server Protocol set Attributes reactor Deferred client Protocol set Attributes reactor Deferred server Factory Single Protocol Factory server Protocol client Factory Single Protocol Factory client Protocol server Endpoint endpoint Creator server reactor d server Endpoint listen server Factory def got Port p client Endpoint endpoint Creator client reactor p get Host return client Endpoint connect client Factory d add Callback got Port def failed result log err result ' Connectionsetupfailed ' disconnected gather Results [server Protocol done client Protocol done] d add Callback lambda disconnected d add Errback failed d add Callback lambda needs Running Reactor reactor reactor stop reactor Builder run Reactor reactor return reactor
def Fancy Analyzer expression '\\s+' stoplist STOP WORDS minsize 2 maxsize None gaps True splitwords True splitnums True mergewords False mergenums False ret Regex Tokenizer expression expression gaps gaps iwf Intra Word Filter splitwords splitwords splitnums splitnums mergewords mergewords mergenums mergenums lcf Lowercase Filter swf Stop Filter stoplist stoplist minsize minsize return ret iwf lcf swf
def packages pkg list repos None yes None options None pkg list [pkg for pkg in pkg list if not is installed pkg ]if pkg list install pkg list repos yes options
@removals remove message 'keystoneclientauthpluginsaredeprecated Usekeystoneauth ' version '2 1 0' removal version '3 0 0' def get available plugin names mgr stevedore Extension Manager namespace PLUGIN NAMESPACE invoke on load False return frozenset mgr names
def atfork User Friendly RNG reinit
@event listens for Service Router Binding resource type 'set' retval True def validate resource type target value oldvalue initiator maxlen Service Router Binding resource type property columns[ 0 ] type lengthif len value > maxlen raise Attribute Exception resource type value maxlen maxlen return value
@event listens for Service Router Binding resource type 'set' retval True def validate resource type target value oldvalue initiator maxlen Service Router Binding resource type property columns[ 0 ] type lengthif len value > maxlen raise Attribute Exception resource type value maxlen maxlen return value
def clean app id app id if app id startswith 's~' return app id[ 2 ]return app id
def clean app id app id if app id startswith 's~' return app id[ 2 ]return app id
def Make Other App Response reference json loads k Verify Response Renewed Expired new {'status' 0 'receipt' reference['receipt']}new['receipt']['bid'] 'com angrybirds Angry Birds'return json dumps new
def createservicesid svc uni '' join [ c + '\x 00 ' for c in svc] sha hashlib sha 1 uni upper digest dec list for i in range 5 dec append struct unpack '<I' sha[ i * 4 i * 4 + 4 ] [0 ] return 'S- 1 - 5 - 80 -' + '-' join [str n for n in dec]
def model form model db session None base class Form only None exclude None field args None converter None exclude pk True exclude fk True type name None if not hasattr model u' sa class manager' raise Type Error u'modelmustbeasqlalchemymappedmodel' if not exclude exclude []model mapper model mapper for prop in model mapper iterate properties if not hasattr prop u'direction' and prop columns[ 0 ] primary key if exclude pk exclude append prop key if hasattr prop u'direction' and exclude fk and prop direction name u'MANYTOMANY' for pair in prop local remote pairs exclude append pair[ 0 ] key type name type name or str model name + u' Form' field dict model fields model db session only exclude field args converter return type type name base class field dict
def mulmatscaler matlist scaler K return [mulrowscaler row scaler K for row in matlist]
def mulmatscaler matlist scaler K return [mulrowscaler row scaler K for row in matlist]
@memoize prefix 'get excluded in' def get excluded in region id aers list Addon Excluded Region objects filter region region id values list 'addon' flat True geodata qs Q region parse region region id if region in mkt regions BRA mkt regions DEU geodata qs Q **{ 'region %s iarc exclude' % region slug True} if region mkt regions DEU geodata qs Q **{'region de usk exclude' True} geodata exclusions []if geodata qs geodata exclusions list Geodata objects filter geodata qs values list 'addon' flat True return set aers + geodata exclusions
def stft Synth mY pY M H hM 1 int math floor M + 1 / 2 hM 2 int math floor M / 2 n Frames mY[ 0] sizey np zeros n Frames * H + hM 1 + hM 2 pin hM 1 for i in range n Frames y1 DFT dft Synth mY[i ] pY[i ] M y[ pin - hM 1 pin + hM 2 ] + H * y1 pin + Hy np delete y range hM 2 y np delete y range y size - hM 1 y size return y
def get task name host salt ['config option'] 'kapacitor host' 'localhost' port salt ['config option'] 'kapacitor port' 9092 if version < '0 13 ' url 'http //{ 0 } {1 }/task?name {2 }' format host port name else url 'http //{ 0 } {1 }/kapacitor/v 1 /tasks/{ 2 }?skip-format true' format host port name response salt utils http query url status True if response['status'] 404 return Nonedata json loads response['body'] if version < '0 13 ' return {'script' data['TIC Kscript'] 'type' data[' Type'] 'dbrps' data['DBR Ps'] 'enabled' data[' Enabled']}return {'script' data['script'] 'type' data['type'] 'dbrps' data['dbrps'] 'enabled' data['status'] 'enabled' }
def compact text text elidelength None lines []for line in text splitlines lines append line strip out '' join lines if elidelength is not None out elide out elidelength return out
def find channels ch names ch type 'EOG' substrings ch type substrings [s upper for s in substrings]if ch type 'EOG' substrings 'EOG' 'EYE' eog idx [idx for idx ch in enumerate ch names if any substring in ch upper for substring in substrings ]return eog idx
def find match ele lst for ele in lst for match key in MATCH KEYS if ele get match key ele get match key return ele
def dump objects blocks []lines []blocks append 'global' global registry dump objects for win id in window registry registry get registry 'window' window win id blocks append 'window-{}' format win id registry dump objects tab registry get 'tab-registry' scope 'window' window win id for tab id tab in tab registry items dump tab registry dump objects data [ '' + line for line in dump]blocks append 'tab-{}' format tab id data for name data in blocks lines append '' lines append '{}objectregistry-{}objects ' format name len data for line in data lines append '{}' format line return lines
def random organism genome random genome return Organism genome test fitness
def tree support master subsampled tree master tipnames set master get Tip Names subsampled tree trimmed copy deepcopy subsampled tree def delete test node if not node is Tip return Falseelse return node Name not in master tipnames subsampled tree trimmed remove Deleted delete test subsampled tree trimmed prune subsampled tree nodes names []for node in subsampled tree trimmed iter Nontips include self True subsampled tree nodes names append node get Tip Names subsampled tree nodes names map set subsampled tree nodes names for master node in master iter Nontips include self True if set master node get Tip Names in subsampled tree nodes names try master node bootstrap support + 1except Attribute Error master node bootstrap support 1
def tree support master subsampled tree master tipnames set master get Tip Names subsampled tree trimmed copy deepcopy subsampled tree def delete test node if not node is Tip return Falseelse return node Name not in master tipnames subsampled tree trimmed remove Deleted delete test subsampled tree trimmed prune subsampled tree nodes names []for node in subsampled tree trimmed iter Nontips include self True subsampled tree nodes names append node get Tip Names subsampled tree nodes names map set subsampled tree nodes names for master node in master iter Nontips include self True if set master node get Tip Names in subsampled tree nodes names try master node bootstrap support + 1except Attribute Error master node bootstrap support 1
def read cookie cookie path is safecookie if not os path exists cookie path exc msg " Authenticationfailed '%s'doesn'texist" % cookie path raise Unreadable Cookie File exc msg cookie path is safecookie auth cookie size os path getsize cookie path if auth cookie size 32 exc msg " Authenticationfailed authenticationcookie'%s'isthewrongsize %ibytesinsteadof 32 " % cookie path auth cookie size raise Incorrect Cookie Size exc msg cookie path is safecookie try with open cookie path 'rb' 0 as f return f read except IO Error as exc exc msg " Authenticationfailed unabletoread'%s' %s " % cookie path exc raise Unreadable Cookie File exc msg cookie path is safecookie
def showglobal **connection args mod sys getframe f code co namelog debug '{ 0 }<--' format mod conn connect **connection args if conn is None return []rtnv do query into hash conn 'SHOWGLOBALVARIABLES' conn close if len rtnv 0 rtnv append [] log debug '{ 0 }-->{ 1 }' format mod len rtnv[ 0 ] return rtnv
def build branches project branch list for branch in branch list versions project versions from branch name branch to build set not building set for version in versions log info ' Branch Build Processing%s %s' % project slug version slug ret build version project version slug already built to build if ret to build add ret else not building add version slug return to build not building
def build branches project branch list for branch in branch list versions project versions from branch name branch to build set not building set for version in versions log info ' Branch Build Processing%s %s' % project slug version slug ret build version project version slug already built to build if ret to build add ret else not building add version slug return to build not building
def virtual if HAS ALL IMPORTS return Truereturn False ' Themssqlexecutionmodulecannotbeloaded thepymssqlpythonlibraryisnotavailable '
def virtual if HAS ALL IMPORTS return Truereturn False ' Themssqlexecutionmodulecannotbeloaded thepymssqlpythonlibraryisnotavailable '
def acc check expected got rel err 2e- 15 abs err 5e- 323 if math isinf expected and got expected return Noneerror got - expected permitted error max abs err rel err * abs expected if abs error < permitted error return Nonereturn 'error {} permittederror {}' format error permitted error
def normalize step parameters steps param map legacy False already normalized False normalized param map {}for step in steps if already normalized param dict param map get str step order index {} else param dict step parameters step param map legacy legacy if param dict normalized param map[step id] param dictreturn normalized param map
def normalize step parameters steps param map legacy False already normalized False normalized param map {}for step in steps if already normalized param dict param map get str step order index {} else param dict step parameters step param map legacy legacy if param dict normalized param map[step id] param dictreturn normalized param map
def normalize step parameters steps param map legacy False already normalized False normalized param map {}for step in steps if already normalized param dict param map get str step order index {} else param dict step parameters step param map legacy legacy if param dict normalized param map[step id] param dictreturn normalized param map
@task@needs ['setup geoserver'] def setup options info ' Geo Nodedevelopmentenvironmentsuccessfullysetup Ifyouhavenotsetupanadministrativeaccount pleasedosonow Use"paverstart"tostartuptheserver '
def roll vectorized M roll indices axis assert axis in [0 1] ndim M ndimassert ndim 3 ndim roll roll indices ndimassert ndim roll 1 sh M shape r c sh[ -2 ]assert sh[ 0 ] roll indices shape[ 0 ] vec indices np arange sh[ 0 ] dtype np int 32 M roll np empty like M if axis 0 for ir in range r for ic in range c M roll[ ir ic] M[ vec indices - roll indices + ir % r ic ]elif axis 1 for ir in range r for ic in range c M roll[ ir ic] M[ vec indices ir - roll indices + ic % c ]return M roll
def expand expected codes codes retval set for code in codes replace ' ' '' split '' code code strip if not code continueelif '-' in code low hi code split '-' [ 2]retval update str i for i in xrange int low int hi + 1 else retval add code return retval
def observe lr optimizer name 'main' observation key 'lr' return observe value observation key lambda trainer trainer updater get optimizer optimizer name lr
def get enabled provider provider id enabled provider provider Registry get provider id if not enabled provider raise Value Error ' Provider%snotenabled' % provider id return enabled provider
def get enabled provider provider id enabled provider provider Registry get provider id if not enabled provider raise Value Error ' Provider%snotenabled' % provider id return enabled provider
def escape identifier text reg KWD RE if not text return ' 'if text[ 0 ] isdigit text ' ' + text return reg sub '\\ 1 ' text
def reload modules return True
def reload modules return True
def C Make String Escape a return a replace '\\' '\\\\' replace ' ' '\\ ' replace '"' '\\"'
def process tex lines new lines []for line in lines line re sub '^\\s*\\\\strong{ See Also }\\s*$' '\\paragraph{ See Also}' line if line startswith '\\section{scipy ' or line startswith '\\subsection{scipy ' or line startswith '\\subsubsection{scipy ' or line startswith '\\paragraph{scipy ' or line startswith '\\subparagraph{scipy ' passelse new lines append line return new lines
def run api port 8082 address None unix socket None scheduler None if scheduler is None scheduler Scheduler scheduler load init api scheduler scheduler api port api port address address unix socket unix socket pruner tornado ioloop Periodic Callback scheduler prune 60000 pruner start def shutdown handler signum frame exit handler sys exit 0 @atexit registerdef exit handler logger info ' Schedulerinstanceshuttingdown' scheduler dump stop signal signal signal SIGINT shutdown handler signal signal signal SIGTERM shutdown handler if os name 'nt' signal signal signal SIGBREAK shutdown handler else signal signal signal SIGQUIT shutdown handler logger info ' Schedulerstartingup' tornado ioloop IO Loop instance start
def build pillar data options pillar {'test transport' options test transport 'cloud only' options cloud only 'with coverage' options test without coverage is False }if options test git commit is not None pillar['test git commit'] options test git commitif options test git url is not None pillar['test git url'] options test git urlif options bootstrap salt url is not None pillar['bootstrap salt url'] options bootstrap salt urlif options bootstrap salt commit is not None pillar['bootstrap salt commit'] options bootstrap salt commitif options package source dir pillar['package source dir'] options package source dirif options package build dir pillar['package build dir'] options package build dirif options package artifact dir pillar['package artifact dir'] options package artifact dirif options pillar pillar update dict options pillar return yaml dump pillar default flow style True indent 0 width sys maxint rstrip
def build pillar data options pillar {'test transport' options test transport 'cloud only' options cloud only 'with coverage' options test without coverage is False }if options test git commit is not None pillar['test git commit'] options test git commitif options test git url is not None pillar['test git url'] options test git urlif options bootstrap salt url is not None pillar['bootstrap salt url'] options bootstrap salt urlif options bootstrap salt commit is not None pillar['bootstrap salt commit'] options bootstrap salt commitif options package source dir pillar['package source dir'] options package source dirif options package build dir pillar['package build dir'] options package build dirif options package artifact dir pillar['package artifact dir'] options package artifact dirif options pillar pillar update dict options pillar return yaml dump pillar default flow style True indent 0 width sys maxint rstrip
def lighten color percent return adjust color 2 percent
def apply single tag set tag set selection def tags match server tags for key value in tag set items if key not in server tags or server tags[key] value return Falsereturn Truereturn selection with server descriptions [s for s in selection server descriptions if tags match s tags ]
def apply single tag set tag set selection def tags match server tags for key value in tag set items if key not in server tags or server tags[key] value return Falsereturn Truereturn selection with server descriptions [s for s in selection server descriptions if tags match s tags ]
def server Factory For protocol factory Server Factory factory protocol protocolreturn factory
def load data get data names data dtype namesdataset Dataset data data names names return dataset
@domain constructor loss target -2 def distractor x hp uniform 'x' -15 15 f1 old div 1 0 1 0 + scope exp - x f2 2 * scope exp - x + 10 ** 2 return {'loss' - f1 - f2 'status' base STATUS OK}
def splittext text line len if len text < line len return text '' pos min len text - 1 line len while pos > 0 and text[pos] '' pos - 1if pos 0 pos min len text line len while len text > pos and text[pos] '' pos + 1return text[ pos] text[ pos + 1 ] strip
def splittext text line len if len text < line len return text '' pos min len text - 1 line len while pos > 0 and text[pos] '' pos - 1if pos 0 pos min len text line len while len text > pos and text[pos] '' pos + 1return text[ pos] text[ pos + 1 ] strip
def validate G for name in G nodes if 'value' not in G node[name] and 'template' not in G node[name] msg ' Dependecyunsatisfiedin%s' % name raise Param Exception msg if not nx is directed acyclic graph G msg ' Cyclicdependecyfound'raise Param Exception msg
def bzr wc default target test 'bzr wc default target'puts magenta ' Executingtest %s' % test from fabtools files import is dirfrom fabtools import requireassert not is dir DIR require bazaar working copy REMOTE URL assert wc exists DIR
@pytest mark cmd@pytest mark django dbdef test update tmserver files no displayname capfd settings tmpdir settings POOTLE TM SERVER {'external' {'ENGINE' 'pootle core search backends Elastic Search Backend' 'HOST' 'localhost' 'PORT' 9200 'INDEX NAME' 'translations-external'}}with pytest raises Command Error as e call command 'update tmserver' '--tm external' 'fake file po' assert '--display-name' in str e
@pytest mark cmd@pytest mark django dbdef test update tmserver files no displayname capfd settings tmpdir settings POOTLE TM SERVER {'external' {'ENGINE' 'pootle core search backends Elastic Search Backend' 'HOST' 'localhost' 'PORT' 9200 'INDEX NAME' 'translations-external'}}with pytest raises Command Error as e call command 'update tmserver' '--tm external' 'fake file po' assert '--display-name' in str e
def setup platform hass config add devices callback discovery info None add devices callback [ Demo Remote ' Remote One' False None Demo Remote ' Remote Two' True 'mdi remote' ]
def ansi method def wrapper self *args **kwargs def convert inp if isinstance inp basestring return parse ansi '{n%s{n' % inp elif hasattr inp ' iter ' li []for element in inp if isinstance element basestring li append convert element elif hasattr element ' iter ' li append convert element else li append element return lireturn inpargs [convert arg for arg in args]return method self *args **kwargs return wrapper
def is base text return min [ ord char in BASE CHARS for char in text]
def Add Cross Entropy batch size n cross entropies []def Pass return tf constant 0 dtype tf float 32 shape [1 ] for beam id in range batch size beam gold slot tf reshape tf slice n['gold slot'] [beam id] [1 ] [1 ] def Compute Cross Entropy ' Addsopstocomputecrossentropyofthegoldpathinabeam 'idx tf cast tf reshape tf where tf equal n['beam ids'] beam id [ -1 ] tf int 32 beam scores tf reshape tf gather n['all path scores'] idx [1 -1 ] num tf shape idx return tf nn softmax cross entropy with logits beam scores tf expand dims tf sparse to dense beam gold slot num [1 0] 0 0 0 cross entropies append cf cond beam gold slot[ 0 ] > 0 Compute Cross Entropy Pass return {'cross entropy' tf div tf add n cross entropies batch size }
def fix pyext mod path if mod path[ -4 ] in [' pyo' 'pyc'] mod path mod path[ -1 ]return mod path
def fix pyext mod path if mod path[ -4 ] in [' pyo' 'pyc'] mod path mod path[ -1 ]return mod path
def fit fr self data *args **kwds loc 0 scale 0 lmap kwds get ['loc' 'scale'] [0 0 1 0] Narg len args if Narg 0 and hasattr self ' fitstart' x0 self fitstart data elif Narg > self numargs raise Value Error ' Toomanyinputarguments ' else args + 1 0 * self numargs - Narg x0 args + loc 0 scale 0 if 'frozen' in kwds frmask np array kwds['frozen'] if len frmask self numargs + 2 raise Value Error ' Incorrectnumberoffrozenarguments ' else x0 np array x0 [np isnan frmask ]else frmask Nonereturn optimize fmin self nnlf fr x0 args np ravel data frmask disp 0
def fit fr self data *args **kwds loc 0 scale 0 lmap kwds get ['loc' 'scale'] [0 0 1 0] Narg len args if Narg 0 and hasattr self ' fitstart' x0 self fitstart data elif Narg > self numargs raise Value Error ' Toomanyinputarguments ' else args + 1 0 * self numargs - Narg x0 args + loc 0 scale 0 if 'frozen' in kwds frmask np array kwds['frozen'] if len frmask self numargs + 2 raise Value Error ' Incorrectnumberoffrozenarguments ' else x0 np array x0 [np isnan frmask ]else frmask Nonereturn optimize fmin self nnlf fr x0 args np ravel data frmask disp 0
def fit fr self data *args **kwds loc 0 scale 0 lmap kwds get ['loc' 'scale'] [0 0 1 0] Narg len args if Narg 0 and hasattr self ' fitstart' x0 self fitstart data elif Narg > self numargs raise Value Error ' Toomanyinputarguments ' else args + 1 0 * self numargs - Narg x0 args + loc 0 scale 0 if 'frozen' in kwds frmask np array kwds['frozen'] if len frmask self numargs + 2 raise Value Error ' Incorrectnumberoffrozenarguments ' else x0 np array x0 [np isnan frmask ]else frmask Nonereturn optimize fmin self nnlf fr x0 args np ravel data frmask disp 0
def maybe unwrap results results return getattr results ' results' results
def summarize items items singleton summary parts []if not singleton summary parts append '{ 0 }items' format len items format counts {}for item in items format counts[item format] format counts get item format 0 + 1 if len format counts 1 summary parts append items[ 0 ] format else for format count in format counts iteritems summary parts append '{ 0 }{ 1 }' format format count average bitrate sum [item bitrate for item in items] / len items total duration sum [item length for item in items] summary parts append '{ 0 }kbps' format int average bitrate / 1000 summary parts append ui human seconds short total duration return ' ' join summary parts
def summarize items items singleton summary parts []if not singleton summary parts append '{ 0 }items' format len items format counts {}for item in items format counts[item format] format counts get item format 0 + 1 if len format counts 1 summary parts append items[ 0 ] format else for format count in format counts iteritems summary parts append '{ 0 }{ 1 }' format format count average bitrate sum [item bitrate for item in items] / len items total duration sum [item length for item in items] summary parts append '{ 0 }kbps' format int average bitrate / 1000 summary parts append ui human seconds short total duration return ' ' join summary parts
def summarize items items singleton summary parts []if not singleton summary parts append '{ 0 }items' format len items format counts {}for item in items format counts[item format] format counts get item format 0 + 1 if len format counts 1 summary parts append items[ 0 ] format else for format count in format counts iteritems summary parts append '{ 0 }{ 1 }' format format count average bitrate sum [item bitrate for item in items] / len items total duration sum [item length for item in items] summary parts append '{ 0 }kbps' format int average bitrate / 1000 summary parts append ui human seconds short total duration return ' ' join summary parts
def get major version version None version get complete version version parts 2 if version[ 2 ] 0 else 3 major u' ' join str x for x in version[ parts] return major
def init pathinfo d set for dir in sys path try if os path isdir dir dir dircase makepath dir d add dircase except Type Error continuereturn d
def test output ret action params if action 'list' ret['comment'] + ' Thelistactionwilljustlistanentityandwillmakenochanges \n'elif action 'create' or action 'add' ret['comment'] + ' Thecreateactionwillattempttocreateanentityifitdoesnotalreadyexist \n'elif action 'delete' ret['comment'] + ' Thedeleteactionwillattempttodeleteanexistingentityifitexists \n'elif action 'manage' ret['comment'] + ' Themanageactionwillcreateanewentityifitdoesnotexist Ifitdoesexist itwillbeenforcedtothedesiredstate \n'elif action 'modify' ret['comment'] + ' Themodifyactionwillattempttomodifyanexistingentityonlyifitexists \n'ret['comment'] + ' Ani Control REST Requestwillbemadeusingtheparameters \n'ret['comment'] + json dumps params indent 4 ret['changes'] {}ret['result'] Nonereturn ret
def make compound key table key if not isinstance key list tuple key [key]return [table columns[name] for name in key]
def build id tuple params spec if spec is None return None None required class spec class required tag spec tagtag type params get u'tag type' spec tag type if tag type is not None required class 2required class params get u'class ' required class required tag params get u'tag' required tag return required class required tag
def build id tuple params spec if spec is None return None None required class spec class required tag spec tagtag type params get u'tag type' spec tag type if tag type is not None required class 2required class params get u'class ' required class required tag params get u'tag' required tag return required class required tag
def build id tuple params spec if spec is None return None None required class spec class required tag spec tagtag type params get u'tag type' spec tag type if tag type is not None required class 2required class params get u'class ' required class required tag params get u'tag' required tag return required class required tag
def DNS Service Resolve flags 0 interface Index NO DEFAULT name NO DEFAULT regtype NO DEFAULT domain NO DEFAULT call Back None NO DEFAULT check interface Index NO DEFAULT check name NO DEFAULT check regtype NO DEFAULT check domain @ DNS Service Resolve Replydef callback sd Ref flags interface Index error Code fullname hosttarget port txt Len txt Record context if call Back is not None port socket ntohs port txt Record length and void p to string txt Len txt Record call Back sd Ref flags interface Index error Code fullname decode hosttarget decode port txt Record global lock acquire try sd Ref DNS Service Resolve flags interface Index name regtype domain callback None finally global lock release sd Ref add callback callback return sd Ref
def DNS Service Resolve flags 0 interface Index NO DEFAULT name NO DEFAULT regtype NO DEFAULT domain NO DEFAULT call Back None NO DEFAULT check interface Index NO DEFAULT check name NO DEFAULT check regtype NO DEFAULT check domain @ DNS Service Resolve Replydef callback sd Ref flags interface Index error Code fullname hosttarget port txt Len txt Record context if call Back is not None port socket ntohs port txt Record length and void p to string txt Len txt Record call Back sd Ref flags interface Index error Code fullname decode hosttarget decode port txt Record global lock acquire try sd Ref DNS Service Resolve flags interface Index name regtype domain callback None finally global lock release sd Ref add callback callback return sd Ref
def get link name connection link if link return connection follow link link nameelse return None
def perform check prerelease current version is prerelease pypi current versiontry pypi available on pypi prerelease except Exception log warning ' Anissueoccurredwhilechecking Py PI' best max pypi current version where Nonecommand Nonecache cache file if cache os utime cache None if best current version log info ' Youhavethelatestversionof Pwntools %s ' % best returncommand ['pip' 'install' '-U']if best pypi where 'pypi'pypi package package nameif best is prerelease pypi package + ' %s' % best command + [pypi package]command str '' join command log info ' Anewerversionof%sisavailableon%s %s-->%s \n' % package name where current version best + ' Updatewith $%s' % command str return command
def virtual root resource request try reg request registryexcept Attribute Error reg get current registry url adapter reg query Multi Adapter resource request I Resource URL if url adapter is None url adapter Resource URL resource request vpath rpath url adapter virtual path url adapter physical path if rpath vpath and rpath endswith vpath vroot path rpath[ - len vpath ]return find resource resource vroot path try return request rootexcept Attribute Error return find root resource
def get annotated content infos course id thread user user info infos {}def annotate content infos[str content['id'] ] get annotated content info course id content user user info for child in content get 'children' [] + content get 'endorsed responses' [] + content get 'non endorsed responses' [] annotate child annotate thread return infos
def mount filesystem mountpoint options None filesystem I Mountable Filesystem filesystem command ['mount']if options command extend ['--options' ' ' join options ] command extend [filesystem identifier mountpoint path] try run process command except Called Process Error as e raise Mount Error blockdevice filesystem device path mountpoint mountpoint source message e output return Mounted File System mountpoint mountpoint
def strip remotes remote branches branches [utils strip one branch for branch in remote branches]return [branch for branch in branches if branch u'HEAD' ]
def present name filename section value parameter None if parameter is None parameter nameret {'name' name 'changes' {} 'result' False 'comment' ''}try old value salt ['openstack config get'] filename filename section section parameter parameter if old value value ret['result'] Trueret['comment'] ' Thevalueisalreadysettothecorrectvalue'return retif opts ['test'] ret['result'] Noneret['comment'] " Value'{ 0 }'issettobechangedto'{ 1 }' " format old value value return retexcept Command Execution Error as e if not str e lower startswith 'parameternotfound ' raise salt ['openstack config set'] filename filename section section parameter parameter value value ret['changes'] {' Value' ' Updated'}ret['result'] Trueret['comment'] ' Thevaluehasbeenupdated'return ret
def get summary rsync out return '-' + '\n-' join [elm for elm in rsync out split '\n\n' [ -1 ] replace '' '\n' split '\n' if elm]
def read handle record read handle remainder handle read if remainder raise Value Error ' Morethanone Prositerecordfound' return record
def parse comment message return {'event' 'commented' 'type' message['type'] 'values' {'user' get owner name message 'subject' get subject message }}
def fit edges polyfit x window length polyorder deriv delta axis y halflen window length // 2 fit edge x 0 window length 0 halflen axis polyorder deriv delta y n x shape[axis] fit edge x n - window length n n - halflen n axis polyorder deriv delta y
def fit edges polyfit x window length polyorder deriv delta axis y halflen window length // 2 fit edge x 0 window length 0 halflen axis polyorder deriv delta y n x shape[axis] fit edge x n - window length n n - halflen n axis polyorder deriv delta y
def asynchronous datastore False obj store False log store False def asynchronous method def wrapper self *args **kwargs ' Disablesautomatic HTT Presponsecompletiononexit 'self auto finish Falseif datastore self client DB Client Instance if obj store self obj store Object Store Get Instance Object Store PHOTO if log store self log store Object Store Get Instance Object Store USER LOG with util Exception Barrier self stack context handle exception return method self *args **kwargs return functools wraps method wrapper return asynchronous
def expand env var env var if not env var return env varwhile True interpolated os path expanduser os path expandvars str env var if interpolated env var return interpolatedelse env var interpolated
def expand env var env var if not env var return env varwhile True interpolated os path expanduser os path expandvars str env var if interpolated env var return interpolatedelse env var interpolated
def expand env var env var if not env var return env varwhile True interpolated os path expanduser os path expandvars str env var if interpolated env var return interpolatedelse env var interpolated
def expand env var env var if not env var return env varwhile True interpolated os path expanduser os path expandvars str env var if interpolated env var return interpolatedelse env var interpolated
def drt discourse demo reading command None dt Discourse Tester ['everydogchasesaboy' 'heruns'] reading command dt models print dt sentences print dt readings print dt readings show thread readings True print dt readings filter True show thread readings True
def quicksort a n len a if n < 1 return aelse from random import randrangepivot a pop randrange n lesser quicksort [x for x in a if x < pivot ] greater quicksort [x for x in a if x > pivot ] return lesser + [pivot] + greater
def quicksort a n len a if n < 1 return aelse from random import randrangepivot a pop randrange n lesser quicksort [x for x in a if x < pivot ] greater quicksort [x for x in a if x > pivot ] return lesser + [pivot] + greater
def crawl attribute this data this attr if isinstance this data list t list []for d in this data t list append crawl attribute d this attr return t listelif isinstance this attr dict t dict {}for k in this attr keys if hasattr this data k t dict[k] crawl attribute getattr this data k None this attr[k] return t dictelif isinstance this attr list this dict {}for l in this attr this dict dictupdate update this dict crawl attribute this data l return this dictelse return {this attr recurse config to dict getattr this data this attr None }
def get Elements By Tag Name i Node name matches []matches append matches appendslice [i Node]while len slice > 0 c slice pop 0 if c node Name name matches append c slice[ 0] c child Nodesreturn matches
def browser sessid session *args **kwargs if not session browserid print 'storedbrowserid ' session args[ 0 ]session browserid args[ 0 ]if not session logged in browsersession Browser Session Store session key args[ 0 ] uid browsersession get 'logged in' None if uid try player Player DB objects get pk uid except Exception returnsession sessionhandler login session player
def browser sessid session *args **kwargs if not session browserid print 'storedbrowserid ' session args[ 0 ]session browserid args[ 0 ]if not session logged in browsersession Browser Session Store session key args[ 0 ] uid browsersession get 'logged in' None if uid try player Player DB objects get pk uid except Exception returnsession sessionhandler login session player
def run checker for package checker package name extra ignore None ignore strings IGNORE ERROR Sif extra ignore ignore strings + extra ignorepackage path path for import package name for root dirs files in os walk str package path for f in files if f u'local settings py' or not f endswith u' py' or root split os sep [ -1 ] in [u'migrations'] continuefor warning in checker os path join root f for ignore in ignore strings if ignore in warning breakelse yield warning replace package path package name 1
def run checker for package checker package name extra ignore None ignore strings IGNORE ERROR Sif extra ignore ignore strings + extra ignorepackage path path for import package name for root dirs files in os walk str package path for f in files if f u'local settings py' or not f endswith u' py' or root split os sep [ -1 ] in [u'migrations'] continuefor warning in checker os path join root f for ignore in ignore strings if ignore in warning breakelse yield warning replace package path package name 1
def poll *args **kwargs return get poller *args **kwargs
def override pylons about with core template return render template u'home/about html'
def update tr radius Delta actual reduction predicted reduction step norm bound hit if predicted reduction > 0 ratio actual reduction / predicted reduction else ratio 0if ratio < 0 25 Delta 0 25 * step norm elif ratio > 0 75 and bound hit Delta * 2 0return Delta ratio
def run test on partitions job test partitions mountpoint func tag fs opt do fsck True **dargs for p in partitions p set fs options fs opt parallel partitions 'setup before test' mountpoint func mountpoint func mountpoint mountpoint func partitions[ 0 ] job run test test tag tag partitions partitions dir mountpoint **dargs parallel partitions 'unmount' if do fsck parallel partitions 'fsck'
def run test on partitions job test partitions mountpoint func tag fs opt do fsck True **dargs for p in partitions p set fs options fs opt parallel partitions 'setup before test' mountpoint func mountpoint func mountpoint mountpoint func partitions[ 0 ] job run test test tag tag partitions partitions dir mountpoint **dargs parallel partitions 'unmount' if do fsck parallel partitions 'fsck'
def format Example example substitutions yield u'** Example **{}' format example doc yield u'' yield u' Request' yield u'' yield u' sourcecode http' yield u'' lines example request % substitutions splitlines lines insert 1 u' Content- Type application/json' lines insert 1 u' Host api % DOMAIN s' % substitutions for line in lines yield u'' + line rstrip yield u'' yield u' Response' yield u'' yield u' sourcecode http' yield u'' lines example response % substitutions splitlines lines insert 1 u' Content- Type application/json' for line in lines yield u'' + line rstrip yield u''
def current sam False try if sam user name win 32 api Get User Name Ex win 32 con Name Sam Compatible else user name win 32 api Get User Name except pywintypes error as exc number context message exclog error ' Failedtogetcurrentuser' log error 'nbr {0 }' format number log error 'ctx {0 }' format context log error 'msg {0 }' format message return Falseif not user name return Falsereturn user name
def get Seconds str Time try x dt strptime str Time '%H %M %S' seconds int timedelta hours x hour minutes x minute seconds x second total seconds except Value Error seconds 0if seconds < 0 seconds 0return seconds
def create game directory dirname global GAMEDIRGAMEDIR os path abspath os path join CURRENT DIR dirname if os path exists GAMEDIR print " Cannotcreatenew Evenniagamedir '%s'alreadyexists " % dirname sys exit shutil copytree EVENNIA TEMPLATE GAMEDIR create settings file
def create game directory dirname global GAMEDIRGAMEDIR os path abspath os path join CURRENT DIR dirname if os path exists GAMEDIR print " Cannotcreatenew Evenniagamedir '%s'alreadyexists " % dirname sys exit shutil copytree EVENNIA TEMPLATE GAMEDIR create settings file
def build simple tree node Tree Node 1 node left Tree Node 2 node right Tree Node 3 node right left Tree Node 4 node right right Tree Node 5 return node
def show instance name call None if call 'action' raise Salt Cloud System Exit ' Theshow instanceactionmustbecalledwith-aor--action ' node get node name utils ['cloud cache node'] node active provider name opts return node
def show instance name call None if call 'action' raise Salt Cloud System Exit ' Theshow instanceactionmustbecalledwith-aor--action ' node get node name utils ['cloud cache node'] node active provider name opts return node
def show instance name call None if call 'action' raise Salt Cloud System Exit ' Theshow instanceactionmustbecalledwith-aor--action ' node get node name utils ['cloud cache node'] node active provider name opts return node
def get exploration recommendations exp id recommendations model recommendations models Exploration Recommendations Model get exp id strict False if recommendations model is None return []else return recommendations model recommended exploration ids
def add error codes new codes for code message in new codes iteritems error list[code] message errors[code] code
def affinity locality predicate write affinity str affinity str write affinity str strip if not affinity str return Nonematchers []pieces [s strip for s in affinity str split ' ' ]for piece in pieces match re match 'r \\d+ ? z \\d+ ?$' piece if match region zone match groups region int region zone int zone if zone else None matcher {'region' region}if zone is not None matcher['zone'] zonematchers append matcher else raise Value Error ' Invalidwrite-affinityvalue %r' % affinity str def is local ring node for matcher in matchers if matcher['region'] ring node['region'] and 'zone' not in matcher or matcher['zone'] ring node['zone'] return Truereturn Falsereturn is local
def get download cache locs from config paths import get cache dirpy version u'py' + str sys version info major datadir os path join get cache dir u'download' py version shelveloc os path join datadir u'urlmap' if not os path exists datadir try os makedirs datadir except OS Error as e if not os path exists datadir raiseelif not os path isdir datadir msg u' Datacachedirectory{ 0 }isnotadirectory'raise IO Error msg format datadir if os path isdir shelveloc msg u' Datacacheshelveobjectlocation{ 0 }isadirectory'raise IO Error msg format shelveloc return datadir shelveloc
def remove Dynamic Content page if page for item in kb dynamic Markings prefix suffix itemif prefix is None and suffix is None continueelif prefix is None page re sub ' ?s ^ +%s' % re escape suffix suffix replace '\\' '\\\\' page elif suffix is None page re sub ' ?s %s +$' % re escape prefix prefix replace '\\' '\\\\' page else page re sub ' ?s %s +%s' % re escape prefix re escape suffix '%s%s' % prefix replace '\\' '\\\\' suffix replace '\\' '\\\\' page return page
def xonsh pathsearch pattern pymode False lineno None col None pymode ast Name Constant value pymode lineno lineno col offset col searchfunc pattern RE SEARCHPATH match pattern groups pattern ast Str s pattern lineno lineno col offset col pathobj Falseif searchfunc startswith '@' func searchfunc[ 1 ]elif 'g' in searchfunc func ' xonsh globsearch 'pathobj 'p' in searchfunc else func ' xonsh regexsearch 'pathobj 'p' in searchfunc func ast Name id func ctx ast Load lineno lineno col offset col pathobj ast Name Constant value pathobj lineno lineno col offset col return xonsh call ' xonsh pathsearch ' args [func pattern pymode pathobj] lineno lineno col col
def test scenario post email feature Feature from string FEATURE 21 scenario 1 scenario 2 feature scenariosscenario 1 tags should be emptyscenario 2 tags should equal ['tag']
def test scenario post email feature Feature from string FEATURE 21 scenario 1 scenario 2 feature scenariosscenario 1 tags should be emptyscenario 2 tags should equal ['tag']
def test scenario post email feature Feature from string FEATURE 21 scenario 1 scenario 2 feature scenariosscenario 1 tags should be emptyscenario 2 tags should equal ['tag']
def qr a mode 'reduced' x [[ 2 1] [3 4]]if isinstance numpy linalg qr x mode tuple return QR Full mode a else return QR Incomplete mode a
def assert Response Failed self deferred reason Types return assert Wrapper Exception Types self deferred Response Failed reason Types
def enable inheritance path object Type clear False dc dacl Constants object Type dc get Object Type Bit object Type path dc process Path path object Type return set dacl inheritance path object Type True None clear
def has value key value None if not isinstance key six string types log debug "{ 0 } 'key'argumentisnotastringtype '{ 1 }'" format name key return Falsetry cur val os environ[key]if value is not None if cur val value return Trueelse return Falseexcept Key Error return Falsereturn True
def get Inclination end start if end None or start None return 0 0end Minus Start end - start return math atan 2 end Minus Start z abs end Minus Start drop Axis
def evaluate inipath path if sabnzbd WIN 32 path unicoder path path os path normpath os path abspath path inipath os path join path DEF INI FILE if os path isdir path return inipathelif os path isfile path or os path isfile path + ' bak' return pathelse dirpart name os path split path if name find ' ' < 1 return inipathelse return path
def evaluate inipath path if sabnzbd WIN 32 path unicoder path path os path normpath os path abspath path inipath os path join path DEF INI FILE if os path isdir path return inipathelif os path isfile path or os path isfile path + ' bak' return pathelse dirpart name os path split path if name find ' ' < 1 return inipathelse return path
@log calldef metadef tag get all context namespace name filters None marker None limit None sort key 'created at' sort dir None session None namespace metadef namespace get context namespace name check namespace visibility context namespace namespace name tags []for tag in DATA['metadef tags'] if tag['namespace id'] namespace['id'] tags append tag return tags
def clean db scenario call command 'flush' interactive False
def clean db scenario call command 'flush' interactive False
def replace name repl full match False ret {'name' name 'result' False 'changes' {} 'comment' ''}if full match is False search '^ *{ 0 } *$' format name else search namematches salt ['nxos cmd'] 'find' search if not matches ret['result'] Trueret['comment'] ' Nothingfoundtoreplace'return retif opts ['test'] is True ret['result'] Noneret['comment'] ' Configswillbechanged'ret['changes']['old'] matchesret['changes']['new'] [re sub name repl match for match in matches]return retret['changes'] salt ['nxos cmd'] 'replace' name repl full match full match matches salt ['nxos cmd'] 'find' search if matches ret['result'] Falseret['comment'] ' Failedtoreplaceallinstancesof"{ 0 }"' format name else ret['result'] Trueret['comment'] ' Successfullyreplacedallinstancesof"{ 0 }"with"{ 1 }"' format name repl return ret
def my trans data data t fft data data t np concatenate [data t[ None] data t[ None]] axis 2 return data t None
def my trans data data t fft data data t np concatenate [data t[ None] data t[ None]] axis 2 return data t None
@pytest mark parametrize u'collection' [[u'user action' u'user'] [u'user group' u'user'] [u'user group' u'user action']] def test should break ties using lexical order completer collection text u'user'matches completer find matches text collection assert matches[ 1 ] priority > matches[ 0 ] priority
@pytest mark parametrize u'collection' [[u'user action' u'user'] [u'user group' u'user'] [u'user group' u'user action']] def test should break ties using lexical order completer collection text u'user'matches completer find matches text collection assert matches[ 1 ] priority > matches[ 0 ] priority
def gist id num return gh gist id num
def create tree folders folder Name if os path exists folder Name raise Ninja IO Exception u' Thefolderalreadyexist' os makedirs folder Name
def volume metadata get context volume id return IMPL volume metadata get context volume id
def trimone x front 0 back 0 axis 0 shape np array x shape shape[axis] - front + back shapearr np array x shape startind np zeros x ndim startind[axis] frontendind startind + shape myslice [slice startind[k] endind[k] for k in range len endind ]return x[tuple myslice ]
def trimone x front 0 back 0 axis 0 shape np array x shape shape[axis] - front + back shapearr np array x shape startind np zeros x ndim startind[axis] frontendind startind + shape myslice [slice startind[k] endind[k] for k in range len endind ]return x[tuple myslice ]
@pytest mark parametrize 'attr' ['stderr' ' stderr '] def test init faulthandler stderr none monkeypatch attr monkeypatch setattr sys attr None earlyinit init faulthandler
def add path path config None log debug ' Addpath%s' % path if not path return []added []parent os path dirname path if parent and os path exists os path join path ' init py' added extend add path parent config elif not path in sys path log debug 'insert%sintosys path' path sys path insert 0 path added append path if config and config src Dirs for dirname in config src Dirs dirpath os path join path dirname if os path isdir dirpath sys path insert 0 dirpath added append dirpath return added
def compute average imlist averageim array Image open imlist[ 0 ] 'f' skipped 0for imname in imlist[ 1 ] try averageim + array Image open imname except print imname + ' skipped' skipped + 1averageim / len imlist - skipped return array averageim 'uint 8 '
def disassociate eip address public ip None association id None region None key None keyid None profile None conn get conn region region key key keyid keyid profile profile try return conn disassociate address public ip association id except boto exception Boto Server Error as e log error e return False
def generate data key without plaintext key id encryption context None number of bytes None key spec None grant tokens None region None key None keyid None profile None conn get conn region region key key keyid keyid profile profile r {}try data key conn generate data key without plaintext key id encryption context encryption context number of bytes number of bytes key spec key spec grant tokens grant tokens r['data key'] data keyexcept boto exception Boto Server Error as e r['error'] utils ['boto get error'] e return r
def test format config f HTML Formatter cfg Config with capture output as captured result f cfg nt assert is result None nt assert equal captured stderr '' with capture output as captured result f Config nt assert is result None nt assert equal captured stderr ''
def test format config f HTML Formatter cfg Config with capture output as captured result f cfg nt assert is result None nt assert equal captured stderr '' with capture output as captured result f Config nt assert is result None nt assert equal captured stderr ''
def test format config f HTML Formatter cfg Config with capture output as captured result f cfg nt assert is result None nt assert equal captured stderr '' with capture output as captured result f Config nt assert is result None nt assert equal captured stderr ''
def test format config f HTML Formatter cfg Config with capture output as captured result f cfg nt assert is result None nt assert equal captured stderr '' with capture output as captured result f Config nt assert is result None nt assert equal captured stderr ''
def test format config f HTML Formatter cfg Config with capture output as captured result f cfg nt assert is result None nt assert equal captured stderr '' with capture output as captured result f Config nt assert is result None nt assert equal captured stderr ''
def filtfilt x iir params picks n jobs copy from scipy signal import filtfiltpadlen min iir params['padlen'] len x n jobs check n jobs n jobs x orig shape picks prep for filtering x copy picks if 'sos' in iir params sosfiltfilt get sosfiltfilt fun partial sosfiltfilt sos iir params['sos'] padlen padlen check coefficients iir params['sos'] else fun partial filtfilt b iir params['b'] a iir params['a'] padlen padlen check coefficients iir params['b'] iir params['a'] if n jobs 1 for p in picks x[p] fun x x[p] else parallel p fun parallel func fun n jobs data new parallel p fun x x[p] for p in picks for pp p in enumerate picks x[p] data new[pp]x shape orig shapereturn x
def rand Split Features features part Train features Train []features Test []for i f in enumerate features [num Of Samples num Of Dims] f shaperandperm numpy random permutation range num Of Samples n Train Samples int round part Train * num Of Samples features Train append f[randperm[ 0 n Train Samples]] features Test append f[randperm[n Train Samples None]] return features Train features Test
def get name default None return getattr get config name default
def start port root directory '/tmp/s 3 ' bucket depth 0 application S3 Application root directory bucket depth http server httpserver HTTP Server application http server listen port ioloop IO Loop current start
def generate helper script pkg manager cmd os packages pip cmd failed deps temp dir tempfile gettempdir script path os path join temp dir SCRIPT NAME script file file script path 'w' script file write '# /bin/bash\n' if os packages missing pkgs '' join os packages script file write '%s%s\n' % pkg manager cmd missing pkgs if failed deps script file write '\n' if running in virtualenv script file write '# Runwithoutsudotoinstallinsidevenv\n' not git pkgs [fdep for fdep in failed deps if not fdep is git ]git pkgs [fdep git src for fdep in failed deps if fdep is git]if not git pkgs cmd generate pip install non git pip cmd not git pkgs script file write '%s\n' % cmd if git pkgs for missing git pkg in git pkgs cmd generate pip install git pip cmd missing git pkg script file write '%s\n' % cmd os chmod script path 493 script file close return script path
def generate helper script pkg manager cmd os packages pip cmd failed deps temp dir tempfile gettempdir script path os path join temp dir SCRIPT NAME script file file script path 'w' script file write '# /bin/bash\n' if os packages missing pkgs '' join os packages script file write '%s%s\n' % pkg manager cmd missing pkgs if failed deps script file write '\n' if running in virtualenv script file write '# Runwithoutsudotoinstallinsidevenv\n' not git pkgs [fdep for fdep in failed deps if not fdep is git ]git pkgs [fdep git src for fdep in failed deps if fdep is git]if not git pkgs cmd generate pip install non git pip cmd not git pkgs script file write '%s\n' % cmd if git pkgs for missing git pkg in git pkgs cmd generate pip install git pip cmd missing git pkg script file write '%s\n' % cmd os chmod script path 493 script file close return script path
def template file path None template contents None template source None context None **kwargs if template contents is None with open template source as template file template contents template file read if context is None context {}file path path contents template contents % context **kwargs
def cached query model filter fn filter identity def cached query decorator fn def cached query wrapper *args assert fn name startswith 'get ' row key components [fn name [len 'get ' ]]if len args > 0 if isinstance args[ 0 ] Thing args list args args[ 0 ] args[ 0 ] idif isinstance args[ 0 ] int long serialized to 36 args[ 0 ] else serialized str args[ 0 ] row key components append serialized row key components extend str x for x in args[ 1 ] row key ' ' join row key components query fn *args query sort query sorttry is precomputed query precomputedexcept Attribute Error is precomputed is query precomputed query return Cached Query model row key query sort filter fn is precomputed return cached query wrapperreturn cached query decorator
def cached query model filter fn filter identity def cached query decorator fn def cached query wrapper *args assert fn name startswith 'get ' row key components [fn name [len 'get ' ]]if len args > 0 if isinstance args[ 0 ] Thing args list args args[ 0 ] args[ 0 ] idif isinstance args[ 0 ] int long serialized to 36 args[ 0 ] else serialized str args[ 0 ] row key components append serialized row key components extend str x for x in args[ 1 ] row key ' ' join row key components query fn *args query sort query sorttry is precomputed query precomputedexcept Attribute Error is precomputed is query precomputed query return Cached Query model row key query sort filter fn is precomputed return cached query wrapperreturn cached query decorator
def get validation schema models default namespace None if default namespace is None default namespace models[ 0 ] get namespace fake app Fake Application fake app tns default namespacefake app services []interface Interface fake app for m in models m resolve namespace m default namespace interface add class m schema Xml Schema interface schema build validation schema return schema validation schema
def get Crafted Text file Name text lash Repository None return get Crafted Text From Text archive get Text If Empty file Name text lash Repository
@ helpers positional 2 def generate token key user id action id '' when None digester hmac new helpers to bytes key encoding 'utf- 8 ' digester update helpers to bytes str user id encoding 'utf- 8 ' digester update DELIMITER digester update helpers to bytes action id encoding 'utf- 8 ' digester update DELIMITER when helpers to bytes str when or int time time encoding 'utf- 8 ' digester update when digest digester digest token base 64 urlsafe b64 encode digest + DELIMITER + when return token
def make api request http http request retries 7 redirections REDIRECTIONS retry 0while True try return make api request no retry http http request redirections redirections except RETRYABLE EXCEPTIONS as exc retry + 1if retry > retries raiseretry after getattr exc 'retry after' None if retry after is None retry after calculate wait for retry retry reset http connections http logging debug ' Retryingrequesttourl%safterexception%s' http request url type exc name time sleep retry after
def get primary at source code offset retry True obj ''left re split '[^ 0 - 9 a-z A-Z ]' source code[ offset] if left and left[ -1 ] obj left[ -1 ]right re split '\\W' source code[offset ] if right and right[ 0 ] obj + right[ 0 ]if obj and obj[ 0 ] isdigit obj ''if not obj and retry and offset and source code[ offset - 1 ] in ' [ ' return get primary at source code offset - 1 retry False return obj
def get primary at source code offset retry True obj ''left re split '[^ 0 - 9 a-z A-Z ]' source code[ offset] if left and left[ -1 ] obj left[ -1 ]right re split '\\W' source code[offset ] if right and right[ 0 ] obj + right[ 0 ]if obj and obj[ 0 ] isdigit obj ''if not obj and retry and offset and source code[ offset - 1 ] in ' [ ' return get primary at source code offset - 1 retry False return obj
def plt show show True **kwargs import matplotlibimport matplotlib pyplot as pltif show and matplotlib get backend 'agg' plt show **kwargs
def get http data data get stack trace data real data['request'] {'cookies' VARS 'data' VARS 'env' VARS 'headers' VARS 'method' 'GET' 'query string' '' 'url' 'http //localhost/'}return data
@world absorbdef verify setting entry setting display name value explicitly set label element setting find by css ' setting-label' [0 ]assert equal display name label element html strip label for label element['for']if setting has class 'metadata-list-enum' or setting has class 'metadata-dict' or setting has class 'metadata-video-translations' list value ' ' join ele value for ele in setting find by css ' list-settings-item' assert equal value list value elif setting has class 'metadata-videolist-enum' list value ' ' join ele find by css 'input' [0 ] value for ele in setting find by css ' videolist-settings-item' assert equal value list value else assert equal value setting find by id label for value if not setting has class 'metadata-videolist-enum' setting Clear Button setting find by css ' setting-clear' [0 ]assert equal explicitly set setting Clear Button has class 'active' assert equal not explicitly set setting Clear Button has class 'inactive'
@world absorbdef verify setting entry setting display name value explicitly set label element setting find by css ' setting-label' [0 ]assert equal display name label element html strip label for label element['for']if setting has class 'metadata-list-enum' or setting has class 'metadata-dict' or setting has class 'metadata-video-translations' list value ' ' join ele value for ele in setting find by css ' list-settings-item' assert equal value list value elif setting has class 'metadata-videolist-enum' list value ' ' join ele find by css 'input' [0 ] value for ele in setting find by css ' videolist-settings-item' assert equal value list value else assert equal value setting find by id label for value if not setting has class 'metadata-videolist-enum' setting Clear Button setting find by css ' setting-clear' [0 ]assert equal explicitly set setting Clear Button has class 'active' assert equal not explicitly set setting Clear Button has class 'inactive'
def ensure not exists filename try os unlink filename except OS Error as e if e errno ENOENT raise
def get credentials yaml key 'nginx admin password 'try with open 'security yml' 'r' as f for line in f if yaml key in line password line[len yaml key ] strip return 'admin ' + password except IO Error logging info 'security ymlmissing return""forunittestinstead' return ''
def get legen lut fast x lut block None n interp lut shape[ 0 ] - 1 0 mm x * n interp / 2 0 mm + 0 5 * n interp idx np round mm astype int if block is None vals lut[idx]else vals lut[idx block]return vals
def get legen lut fast x lut block None n interp lut shape[ 0 ] - 1 0 mm x * n interp / 2 0 mm + 0 5 * n interp idx np round mm astype int if block is None vals lut[idx]else vals lut[idx block]return vals
def get Cascade Float Without Self default Float element Node key if key in element Node attributes value element Node attributes[key]function Name 'get' + key[ 0 ] upper + key[ 1 ] if function Name in value if element Node parent Node None return default Floatelse element Node element Node parent Nodereturn element Node get Cascade Float default Float key
def seed seed None if isinstance seed str and seed 'default' backend id srando elif hasattr seed ' len ' state np asfortranarray seed dtype float if state shape 55 raise Value Error 'invalidinputsize' elif state min < 0 or state max > 1 raise Value Error 'valuesnotinrange[ 0 1]' backend id srandi state elif seed is None backend id srandi np random rand 55 else rnd np random Random State seed backend id srandi rnd rand 55
def seed seed None if isinstance seed str and seed 'default' backend id srando elif hasattr seed ' len ' state np asfortranarray seed dtype float if state shape 55 raise Value Error 'invalidinputsize' elif state min < 0 or state max > 1 raise Value Error 'valuesnotinrange[ 0 1]' backend id srandi state elif seed is None backend id srandi np random rand 55 else rnd np random Random State seed backend id srandi rnd rand 55
def validate constraints supported constraints model message u' Optimizercannothandle{ 0 }constraints 'if any six itervalues model fixed and u'fixed' not in supported constraints raise Unsupported Constraint Error message format u'fixedparameter' if any six itervalues model tied and u'tied' not in supported constraints raise Unsupported Constraint Error message format u'tiedparameter' if any tuple b None None for b in six itervalues model bounds and u'bounds' not in supported constraints raise Unsupported Constraint Error message format u'boundparameter' if model eqcons and u'eqcons' not in supported constraints raise Unsupported Constraint Error message format u'equality' if model ineqcons and u'ineqcons' not in supported constraints raise Unsupported Constraint Error message format u'inequality'
@verbosedef spatial tris connectivity tris remap vertices False verbose None return spatio temporal tris connectivity tris 1 remap vertices
def get tests for python name def extract ids t if isinstance t Test Suite result pset for sub tests in t result result extract ids sub tests return resultelse return pset [t id ] loader Test Loader tests loader load By Name python name recurse True return extract ids tests
def Files Matching root predicate lambda f True matches []for path files in os walk root matches + [os path join path f for f in files if predicate f ]return matches
def swappable dependency value return Swappable Tuple value split ' ' 1 [0 ] ' first ' value
def fetch nb dependencies files repo REPO raw RAW branch BRANCH deps DEPS overwrite False verbose True if type files list files {'' files}for directory in files keys if directory '' if verbose print ' Parsingdirectory %s'for fl in files[directory] if directory '' fl directory + '/' + fl if not overwrite if os path isfile fl if verbose print ' Afilenamed%salreadyexistsinthespecifieddirectory skippingdownload ' % fl continueelif verbose print ' Overwritingfile%s ' % fl if verbose print ' Fetchingfile %s' % fl url '/' join [repo raw branch deps fl] r requests get url with open fl 'wb' as fl fl write r content
def has method arg method return hasattr arg method and callable getattr arg method
def describe key key id region None key None keyid None profile None conn get conn region region key key keyid keyid profile profile r {}try key conn describe key key id r['key metadata'] key[' Key Metadata']except boto exception Boto Server Error as e r['error'] utils ['boto get error'] e return r
def filter ticks lims fscale if fscale 'linear' return None None lims np array lims ticks list for exp in range int np floor np log 10 lims[ 0 ] int np floor np log 10 lims[ 1 ] + 1 ticks + np array [1 2 4] * 10 ** exp tolist ticks np array ticks ticks ticks[ ticks > lims[ 0 ] & ticks < lims[ 1 ] ]ticklabels [ '%g' if t < 1 else '%d' % t for t in ticks]return ticks ticklabels
def filter ticks lims fscale if fscale 'linear' return None None lims np array lims ticks list for exp in range int np floor np log 10 lims[ 0 ] int np floor np log 10 lims[ 1 ] + 1 ticks + np array [1 2 4] * 10 ** exp tolist ticks np array ticks ticks ticks[ ticks > lims[ 0 ] & ticks < lims[ 1 ] ]ticklabels [ '%g' if t < 1 else '%d' % t for t in ticks]return ticks ticklabels
def sum shapes shapes rows max [shape[ 0 ] for shape in shapes] cols max [shape[ 1 ] for shape in shapes] for shape in shapes if not shape 1 1 and shape rows cols raise Value Error ' Incompatibledimensions' + len shapes * '%s' % tuple shapes return rows cols
def atomic rename oldpath newpath if iswindows import win 32 filefor i in xrange 10 try win 32 file Move File Ex oldpath newpath win 32 file MOVEFILE REPLACE EXISTING win 32 file MOVEFILE WRITE THROUGH breakexcept Exception if i > 8 raisetime sleep 1 else os rename oldpath newpath
@mock ec 2 def test eip boto 3 vpc association session boto 3 session Session region name u'us-west- 1 ' service session resource u'ec 2 ' client session client u'ec 2 ' vpc res client create vpc Cidr Block u' 10 0 0 0/ 24 ' subnet res client create subnet Vpc Id vpc res[u' Vpc'][u' Vpc Id'] Cidr Block u' 10 0 0 0/ 24 ' instance service create instances **{u' Instance Type' u't 2 micro' u' Image Id' u'ami-test' u' Min Count' 1 u' Max Count' 1 u' Subnet Id' subnet res[u' Subnet'][u' Subnet Id']} [0 ]allocation id client allocate address Domain u'vpc' [u' Allocation Id']association id client associate address Instance Id instance id Allocation Id allocation id Allow Reassociation False instance load instance public ip address should not be noneinstance public dns name should not be none
def track forum event request event name course obj data id map None user request userdata['id'] obj idcommentable id data['commentable id']team get team commentable id if team is not None data update team id team team id if id map is None id map get cached discussion id map course [commentable id] user if commentable id in id map data['category name'] id map[commentable id]['title']data['category id'] commentable iddata['url'] request META get 'HTTP REFERER' '' data['user forums roles'] [role name for role in user roles filter course id course id ]data['user course roles'] [role role for role in user courseaccessrole set filter course id course id ]tracker emit event name data
def track forum event request event name course obj data id map None user request userdata['id'] obj idcommentable id data['commentable id']team get team commentable id if team is not None data update team id team team id if id map is None id map get cached discussion id map course [commentable id] user if commentable id in id map data['category name'] id map[commentable id]['title']data['category id'] commentable iddata['url'] request META get 'HTTP REFERER' '' data['user forums roles'] [role name for role in user roles filter course id course id ]data['user course roles'] [role role for role in user courseaccessrole set filter course id course id ]tracker emit event name data
def chown log dir uid gid if log dir is None return Falsetry os chown log dir uid gid for entry in os listdir log dir os chown os path join log dir entry uid gid return Trueexcept OS Error as ex print >>sys stderr ' Failedtochownlogdirectory%s ex' % log dir ex return False
def Dihedral Group n if n 1 return Permutation Group [ Permutation [1 0] ] if n 2 return Permutation Group [ Permutation [1 0 3 2] Permutation [2 3 0 1] Permutation [3 2 1 0] ] a list range 1 n a append 0 gen 1 af new a a list range n a reverse gen 2 af new a G Permutation Group [gen 1 gen 2 ] if n & n - 1 0 G is nilpotent Trueelse G is nilpotent False G is abelian False G is solvable True G degree nG is transitive True G order 2 * n return G
def get osc stats directory fs ost out []for fspath in os listdir directory if fs in fspath and ost in fspath logging debug 'openingfile' + str directory + '/' + str fspath + '/stats' try osc statsfile open '%s/%s/stats' % directory fspath except IO Error osc statsfile []for line in osc statsfile item re split '\\s+' line rstrip out append item return out
def test optimizer nan detected [ False]def detect nan i node fn for output in fn outputs if numpy isnan output[ 0 ] any print '*** Na Ndetected***' theano printing debugprint node print ' Inputs %s' % [input[ 0 ] for input in fn inputs] print ' Outputs %s' % [output[ 0 ] for output in fn outputs] nan detected[ 0 ] Truebreakx theano tensor dscalar 'x' mode theano compile Monitor Mode post func detect nan mode mode excluding 'fusion' f theano function [x] [ theano tensor log x * x ] mode mode assert len f maker fgraph apply nodes 2 f 0 assert nan detected[ 0 ]
def str File p f case Sensitive True buf type p buf len max len p 2 ** 2 ** 2 ** 2 if not case Sensitive p p lower while 1 r f read buf len - len p if not case Sensitive r r lower bytes read len r if bytes read 0 return Falsel len buf + bytes read - buf len if l < 0 buf buf + r else buf buf[l ] + r if buf find p -1 return True
def str File p f case Sensitive True buf type p buf len max len p 2 ** 2 ** 2 ** 2 if not case Sensitive p p lower while 1 r f read buf len - len p if not case Sensitive r r lower bytes read len r if bytes read 0 return Falsel len buf + bytes read - buf len if l < 0 buf buf + r else buf buf[l ] + r if buf find p -1 return True
def str File p f case Sensitive True buf type p buf len max len p 2 ** 2 ** 2 ** 2 if not case Sensitive p p lower while 1 r f read buf len - len p if not case Sensitive r r lower bytes read len r if bytes read 0 return Falsel len buf + bytes read - buf len if l < 0 buf buf + r else buf buf[l ] + r if buf find p -1 return True
def replace slices index if isinstance index hashable list return list index elif isinstance index slice return index as slice elif isinstance index tuple return tuple map replace slices index return index
def find xontrib name if name startswith ' ' spec importlib util find spec name package 'xontrib' else spec importlib util find spec ' ' + name package 'xontrib' return spec or importlib util find spec name
def Element With Reading tag text reading False if text is None reading Text ''elif isinstance text basestring reading Text textelse reading Text text[ 1 ]text text[ 0 ]if not reading reading Text ''return Element With Text tag text reading reading Text
def build mock object obj id mock object Mock object config {'pk' obj id 'name' 'object{}' format obj id }mock object configure mock **object config return mock object
@db api context manager writerdef delete request spec context instance uuid context session query api models Request Spec filter by instance uuid instance uuid delete
def get best match target name names exact []wildcard start []wildcard end []regex []for name in names if exact match target name name exact append name elif wildcard match target name name True wildcard start append name elif wildcard match target name name False wildcard end append name elif regex match target name name regex append name if len exact > 0 match min exact key len return 'exact' match if len wildcard start > 0 match max wildcard start key len return 'wildcard start' match if len wildcard end > 0 match max wildcard end key len return 'wildcard end' match if len regex > 0 match regex[ 0 ]return 'regex' match return None None
def get best match target name names exact []wildcard start []wildcard end []regex []for name in names if exact match target name name exact append name elif wildcard match target name name True wildcard start append name elif wildcard match target name name False wildcard end append name elif regex match target name name regex append name if len exact > 0 match min exact key len return 'exact' match if len wildcard start > 0 match max wildcard start key len return 'wildcard start' match if len wildcard end > 0 match max wildcard end key len return 'wildcard end' match if len regex > 0 match regex[ 0 ]return 'regex' match return None None
def get patterns installed only None patterns {}for element in zypper nolock xml call 'se' '-t' 'pattern' get Elements By Tag Name 'solvable' installed element get Attribute 'status' 'installed' if installed only and installed or not installed only patterns[element get Attribute 'name' ] {'installed' installed 'summary' element get Attribute 'summary' }return patterns
def get patterns installed only None patterns {}for element in zypper nolock xml call 'se' '-t' 'pattern' get Elements By Tag Name 'solvable' installed element get Attribute 'status' 'installed' if installed only and installed or not installed only patterns[element get Attribute 'name' ] {'installed' installed 'summary' element get Attribute 'summary' }return patterns
def mig Pipe deme k pipein pipeout selection replacement None emigrants selection deme k if replacement is None immigrants emigrantselse immigrants replacement deme k pipeout send emigrants buf pipein recv for place immigrant in zip immigrants buf indx deme index place deme[indx] immigrant
def allocate ids model size **kwargs return allocate ids async model size **kwargs get result
def expected observed o observedif len o 0 return []if len o 1 return [ [ sum o[ 0 ] / float len o[ 0 ] ] * len o[ 0 ] ]n [sum o[i] for i in xrange len o ]m [sum o[i][j] for i in xrange len o for j in xrange len o[ 0 ] ]s float sum n return [[ n[i] * m[j] / s for j in xrange len o[i] ] for i in xrange len o ]
def Trimmed Mean Var t p 0 01 t Trim t p mu var Mean Var t return mu var
def get Empty Z shape z zone Index round z / shape zone Interval if zone Index not in shape z Zone Table return zzone Around 1while 1 zone Down zone Index - zone Around if zone Down not in shape z Zone Table return zone Down * shape zone Interval zone Up zone Index + zone Around if zone Up not in shape z Zone Table return zone Up * shape zone Interval zone Around + 1
def has metadata trait metadata value None recursive True count 0if hasattr trait u' metadata' and metadata in list trait metadata keys and trait metadata[metadata] value or value is None count + 1if recursive if hasattr trait u'inner traits' for inner trait in trait inner traits count + has metadata inner trait trait type metadata recursive if hasattr trait u'handlers' and trait handlers is not None for handler in trait handlers count + has metadata handler metadata recursive return count > 0
def has metadata trait metadata value None recursive True count 0if hasattr trait u' metadata' and metadata in list trait metadata keys and trait metadata[metadata] value or value is None count + 1if recursive if hasattr trait u'inner traits' for inner trait in trait inner traits count + has metadata inner trait trait type metadata recursive if hasattr trait u'handlers' and trait handlers is not None for handler in trait handlers count + has metadata handler metadata recursive return count > 0
def munge name name if isinstance name unicode name substitute ascii equivalents name name re sub '[ /]' '-' name name re sub '[^a-z A-Z 0 - 9 - ]' '' name lower name munge to length name model PACKAGE NAME MIN LENGTH model PACKAGE NAME MAX LENGTH return name
def munge name name if isinstance name unicode name substitute ascii equivalents name name re sub '[ /]' '-' name name re sub '[^a-z A-Z 0 - 9 - ]' '' name lower name munge to length name model PACKAGE NAME MIN LENGTH model PACKAGE NAME MAX LENGTH return name
def get bufsize linux iface ret {'result' False}cmd '/sbin/ethtool-g{ 0 }' format iface out salt ['cmd run'] cmd pat re compile '^ + \\s+ \\d+ $' suffix 'max-'for line in out splitlines res pat match line if res ret[ res group 1 lower replace '' '-' + suffix ] int res group 2 ret['result'] Trueelif line endswith 'maximums ' suffix '-max'elif line endswith 'settings ' suffix ''if not ret['result'] parts out split if parts[ 0 ] endswith 'sh ' out '' join parts[ 1 ] ret['comment'] outreturn ret
def draw random G **kwargs draw G random layout G **kwargs
def skip if not available modules None datasets None configurations None if modules is None modules []if datasets is None datasets []if configurations is None configurations []for module in modules try import module module except Exception raise Skip Testif module 'bokeh' Connection Error import module 'requests exceptions' Connection Errorsession import module 'bokeh session' Session try session execute 'get' session base url except Connection Error raise Skip Testif datasets and not hasattr config 'data path' raise Skip Testfor dataset in datasets if not os path exists os path join config data path dataset raise Skip Testfor configuration in configurations if not hasattr config configuration raise Skip Test
def skip if not available modules None datasets None configurations None if modules is None modules []if datasets is None datasets []if configurations is None configurations []for module in modules try import module module except Exception raise Skip Testif module 'bokeh' Connection Error import module 'requests exceptions' Connection Errorsession import module 'bokeh session' Session try session execute 'get' session base url except Connection Error raise Skip Testif datasets and not hasattr config 'data path' raise Skip Testfor dataset in datasets if not os path exists os path join config data path dataset raise Skip Testfor configuration in configurations if not hasattr config configuration raise Skip Test
def meta links req count meta {config QUERY PAGE req page config QUERY MAX RESULTS req max results}if config OPTIMIZE PAGINATION FOR SPEED is False meta['total'] countreturn meta
def main global settingscreate Settings File settings alp read Plist SETTINGS PATH if settings['first Run'] 'true' udpate Database From Kippt settings['first Run'] 'false'settings['credentials Changed'] 'false'alp write Plist settings SETTINGS PATH elif settings['credentials Changed'] 'true' udpate Database From Kippt settings['credentials Changed'] 'false'alp write Plist settings SETTINGS PATH elif settings['update Clips'] 'true' udpate Database From Kippt settings['update Clips'] 'false'alp write Plist settings SETTINGS PATH args alp args if len args < 1 returnitems search args if items is not None alp feedback items else print ' Noitemsfound'
@download tool 'urllib 2 ' def urllib 2 download client download url filename resuming False assert not resuming print ' Downloading' download url 'to' filename ' 'request urllib 2 Request download url headers {' Cookie' 'gdriveid ' + client get gdriveid } response urllib 2 urlopen request import shutilwith open filename 'wb' as output shutil copyfileobj response output
@download tool 'urllib 2 ' def urllib 2 download client download url filename resuming False assert not resuming print ' Downloading' download url 'to' filename ' 'request urllib 2 Request download url headers {' Cookie' 'gdriveid ' + client get gdriveid } response urllib 2 urlopen request import shutilwith open filename 'wb' as output shutil copyfileobj response output
@download tool 'urllib 2 ' def urllib 2 download client download url filename resuming False assert not resuming print ' Downloading' download url 'to' filename ' 'request urllib 2 Request download url headers {' Cookie' 'gdriveid ' + client get gdriveid } response urllib 2 urlopen request import shutilwith open filename 'wb' as output shutil copyfileobj response output
@download tool 'urllib 2 ' def urllib 2 download client download url filename resuming False assert not resuming print ' Downloading' download url 'to' filename ' 'request urllib 2 Request download url headers {' Cookie' 'gdriveid ' + client get gdriveid } response urllib 2 urlopen request import shutilwith open filename 'wb' as output shutil copyfileobj response output
def get userprofile from registry user sid profile dir salt ['reg read value'] 'HKEY LOCAL MACHINE' u'SOFTWARE\\ Microsoft\\ Windows NT\\ Current Version\\ Profile List\\{ 0 }' format sid ' Profile Image Path' ['vdata']log debug u'user{ 0 }withsid {2 }profileislocatedat"{ 1 }"' format user profile dir sid return profile dir
def get userprofile from registry user sid profile dir salt ['reg read value'] 'HKEY LOCAL MACHINE' u'SOFTWARE\\ Microsoft\\ Windows NT\\ Current Version\\ Profile List\\{ 0 }' format sid ' Profile Image Path' ['vdata']log debug u'user{ 0 }withsid {2 }profileislocatedat"{ 1 }"' format user profile dir sid return profile dir
def get userprofile from registry user sid profile dir salt ['reg read value'] 'HKEY LOCAL MACHINE' u'SOFTWARE\\ Microsoft\\ Windows NT\\ Current Version\\ Profile List\\{ 0 }' format sid ' Profile Image Path' ['vdata']log debug u'user{ 0 }withsid {2 }profileislocatedat"{ 1 }"' format user profile dir sid return profile dir
def close logger for handler in logger handlers logger remove Handler handler if isinstance handler logging File Handler handler close
def orbits transversals from bsgs base strong gens distr transversals only False from sympy combinatorics perm groups import orbit transversalbase len len base degree strong gens distr[ 0 ][ 0 ] sizetransversals [ None] * base len if transversals only is False basic orbits [ None] * base len for i in range base len transversals[i] dict orbit transversal degree strong gens distr[i] base[i] pairs True if transversals only is False basic orbits[i] list transversals[i] keys if transversals only return transversalselse return basic orbits transversals
def map version version version map if version is None raise Type Errorif not version map raise Value Errorif isinstance version map dict version map sorted Loose Version k v for k v in version map items req version Loose Version version for min version value in reversed version map if req version > min version return valueelse return version map[ 0 ][ 1 ]
def load drivers service type plugin service type manager sdb Service Type Manager get instance providers service type manager get service providers None filters {'service type' [service type]} if not providers msg LE " Noprovidersspecifiedfor'%s'service exiting" % service type LOG error msg raise System Exit 1 drivers {}for provider in providers try drivers[provider['name']] importutils import object provider['driver'] plugin LOG debug " Loaded'% provider s'providerforservice% service type s" {'provider' provider['driver'] 'service type' service type} except Import Error with excutils save and reraise exception LOG exception LE " Errorloadingprovider'% provider s'forservice% service type s" {'provider' provider['driver'] 'service type' service type} default provider Nonetry provider service type manager get default service provider None service type default provider provider['name']except pconf Default Service Provider Not Found LOG info LI ' Defaultproviderisnotspecifiedforservicetype%s' service type return drivers default provider
def get Half Simplified Path path radius remainder if len path < 2 return pathchannel Radius radius * 0 01 simplified [path[ 0 ]]for point Index in xrange 1 len path - 1 point path[point Index]if point Index % 2 remainder simplified append point elif not is Within Channel channel Radius point Index path simplified append point simplified append path[ -1 ] return simplified
def encrypt ARC s iv helpers random Key 8 key helpers random Key 8 arc 4 main ARC 4 new key encrypted arc 4 main encrypt s return encrypted key iv
def solve Bilinear Transform points 1 points 2 import numpy linalg A np array [[ points 1 [i] x * points 1 [i] y points 1 [i] x points 1 [i] y 1] for i in range 4 ] B np array [[points 2 [i] x points 2 [i] y ] for i in range 4 ] matrix np zeros 2 4 for i in range 2 matrix[i] numpy linalg solve A B[ i] return matrix
def solve Bilinear Transform points 1 points 2 import numpy linalg A np array [[ points 1 [i] x * points 1 [i] y points 1 [i] x points 1 [i] y 1] for i in range 4 ] B np array [[points 2 [i] x points 2 [i] y ] for i in range 4 ] matrix np zeros 2 4 for i in range 2 matrix[i] numpy linalg solve A B[ i] return matrix
def libvlc media player get chapter count for title p mi i title f Cfunctions get 'libvlc media player get chapter count for title' None or Cfunction 'libvlc media player get chapter count for title' 1 1 None ctypes c int Media Player ctypes c int return f p mi i title
def remove indents txt txt re sub ' ?miu ^\\s+' '' txt return txt
def escape backslashes data jinja env if '\\' in data and '{{' in data new data []d 2 jinja env preprocess data in var Falsefor token in jinja env lex d2 if token[ 1 ] 'variable begin' in var Truenew data append token[ 2 ] elif token[ 1 ] 'variable end' in var Falsenew data append token[ 2 ] elif in var and token[ 1 ] 'string' new data append token[ 2 ] replace '\\' '\\\\' else new data append token[ 2 ] data '' join new data return data
def escape backslashes data jinja env if '\\' in data and '{{' in data new data []d 2 jinja env preprocess data in var Falsefor token in jinja env lex d2 if token[ 1 ] 'variable begin' in var Truenew data append token[ 2 ] elif token[ 1 ] 'variable end' in var Falsenew data append token[ 2 ] elif in var and token[ 1 ] 'string' new data append token[ 2 ] replace '\\' '\\\\' else new data append token[ 2 ] data '' join new data return data
def create volume ctxt host 'test host' display name 'test volume' display description 'thisisatestvolume' status 'available' migration status None size 1 availability zone 'fake az' volume type id None replication status 'disabled' replication extended status None replication driver data None consistencygroup id None group id None previous status None testcase instance None **kwargs vol {}vol['size'] sizevol['host'] hostvol['user id'] ctxt user idvol['project id'] ctxt project idvol['status'] statusif migration status vol['migration status'] migration statusvol['display name'] display namevol['display description'] display descriptionvol['attach status'] fields Volume Attach Status DETACHE Dvol['availability zone'] availability zoneif consistencygroup id vol['consistencygroup id'] consistencygroup idif group id vol['group id'] group idif volume type id vol['volume type id'] volume type idfor key in kwargs vol[key] kwargs[key]vol['replication status'] replication statusif replication extended status vol['replication extended status'] replication extended statusif replication driver data vol['replication driver data'] replication driver dataif previous status vol['previous status'] previous statusvolume objects Volume ctxt **vol volume create if testcase instance testcase instance add Cleanup volume destroy return volume
def get root versions dir config root dir get package root dir config script location config get main option 'script location' part 1 part 2 script location split ' ' parts part 1 split ' ' + part 2 split ' ' + ['versions'] return os path join root dir *parts
def get root versions dir config root dir get package root dir config script location config get main option 'script location' part 1 part 2 script location split ' ' parts part 1 split ' ' + part 2 split ' ' + ['versions'] return os path join root dir *parts
def pw affine fromim toim fp tp tri im toim copy is color len fromim shape 3 im t zeros im shape 'uint 8 ' for t in tri H homography Haffine from points tp[ t] fp[ t] if is color for col in range fromim shape[ 2 ] im t[ col] ndimage affine transform fromim[ col] H[ 2 2] H[ 0 2 ] H[ 1 2 ] im shape[ 2] else im t ndimage affine transform fromim H[ 2 2] H[ 0 2 ] H[ 1 2 ] im shape[ 2] alpha alpha for triangle tp[ t] im shape[ 0 ] im shape[ 1 ] im[ alpha > 0 ] im t[ alpha > 0 ]return im
def save password password port password file abspath 'parameters %i py' % port if password '<random>' chars string letters + string digits password '' join [random choice chars for in range 8 ] cpassword CRYPT password [0 ]print '*******************IMPORTANT ************************' print 'youradminpasswordis"%s"' % password print '*********************************************************' elif password '<recycle>' if exists password file returnelse password ''elif password startswith '<pam user ' cpassword password[ 1 -1 ]else cpassword CRYPT password [0 ]fp open password file 'w' if password fp write 'password "%s"\n' % cpassword else fp write 'password None\n' fp close
def save password password port password file abspath 'parameters %i py' % port if password '<random>' chars string letters + string digits password '' join [random choice chars for in range 8 ] cpassword CRYPT password [0 ]print '*******************IMPORTANT ************************' print 'youradminpasswordis"%s"' % password print '*********************************************************' elif password '<recycle>' if exists password file returnelse password ''elif password startswith '<pam user ' cpassword password[ 1 -1 ]else cpassword CRYPT password [0 ]fp open password file 'w' if password fp write 'password "%s"\n' % cpassword else fp write 'password None\n' fp close
def save password password port password file abspath 'parameters %i py' % port if password '<random>' chars string letters + string digits password '' join [random choice chars for in range 8 ] cpassword CRYPT password [0 ]print '*******************IMPORTANT ************************' print 'youradminpasswordis"%s"' % password print '*********************************************************' elif password '<recycle>' if exists password file returnelse password ''elif password startswith '<pam user ' cpassword password[ 1 -1 ]else cpassword CRYPT password [0 ]fp open password file 'w' if password fp write 'password "%s"\n' % cpassword else fp write 'password None\n' fp close
def set argv process name if Py Get Argc Argv is None returnglobal PROCESS NAM Ecurrent name get process name argv argc ctypes c int 0 argc t Py Get Argc Argv argv ctypes pointer argc if len process name > MAX NAME LENGTH raise IO Error " Can'trenameprocesstosomethinglongerthanourinitialname thiswouldoverwritememoryusedfortheenv " zero size max len current name len process name ctypes memset argc contents 0 zero size + 1 process name encoded process name encode 'utf 8 ' ctypes memmove argc contents process name encoded len process name PROCESS NAME process name
def set argv process name if Py Get Argc Argv is None returnglobal PROCESS NAM Ecurrent name get process name argv argc ctypes c int 0 argc t Py Get Argc Argv argv ctypes pointer argc if len process name > MAX NAME LENGTH raise IO Error " Can'trenameprocesstosomethinglongerthanourinitialname thiswouldoverwritememoryusedfortheenv " zero size max len current name len process name ctypes memset argc contents 0 zero size + 1 process name encoded process name encode 'utf 8 ' ctypes memmove argc contents process name encoded len process name PROCESS NAME process name
def set argv process name if Py Get Argc Argv is None returnglobal PROCESS NAM Ecurrent name get process name argv argc ctypes c int 0 argc t Py Get Argc Argv argv ctypes pointer argc if len process name > MAX NAME LENGTH raise IO Error " Can'trenameprocesstosomethinglongerthanourinitialname thiswouldoverwritememoryusedfortheenv " zero size max len current name len process name ctypes memset argc contents 0 zero size + 1 process name encoded process name encode 'utf 8 ' ctypes memmove argc contents process name encoded len process name PROCESS NAME process name
def attach notify policies queryset as field 'notify policies attr' model queryset modelsql '\n SELEC Tjson agg row to json notifications notifypolicy \n FRO Mnotifications notifypolicy\n WHER Enotifications notifypolicy project id {tbl} id\n'sql sql format tbl model meta db table queryset queryset extra select {as field sql} return queryset
@taskdef get healthz url 'https //localhost 8443 /healthz'ret 'FAIL'with settings warn only True ret run 'curl-k%s' % url fprint ' Healthzstatus %s' % ret return ret 'OK'
def build set context builder set type items nitems len items inst Set Instance allocate context builder set type nitems array cgutils pack array builder items array ptr cgutils alloca once value builder array count context get constant types intp nitems with cgutils for range builder count as loop item builder load cgutils gep builder array ptr 0 loop index inst add item return impl ret new ref context builder set type inst value
def Multifield Parser fieldnames schema fieldboosts None **kwargs from whoosh qparser plugins import Multifield Pluginp Query Parser None schema **kwargs mfp Multifield Plugin fieldnames fieldboosts fieldboosts p add plugin mfp return p
def Multifield Parser fieldnames schema fieldboosts None **kwargs from whoosh qparser plugins import Multifield Pluginp Query Parser None schema **kwargs mfp Multifield Plugin fieldnames fieldboosts fieldboosts p add plugin mfp return p
def libvlc media player get agl p mi f Cfunctions get 'libvlc media player get agl' None or Cfunction 'libvlc media player get agl' 1 None ctypes c uint 32 Media Player return f p mi
def format histogram one count counts bin edges lines []lines append ' Length DCTB Count' for edge count in zip bin edges counts lines append ' DCTB ' join map str [edge count] return '\n' join lines
def rm alias alias if not get target alias return Truelines parse aliases out []for line alias line target line comment in lines if line alias alias out append line alias line target line comment write aliases file out return True
def destroy sink sink global sinksdel sinks[sink sink id]del sink
def destroy sink sink global sinksdel sinks[sink sink id]del sink
def get nova v2 client session region return Nova Client session session region name region version 2
def apply penalty tensor or tensors penalty **kwargs try return sum penalty x **kwargs for x in tensor or tensors except Type Error Value Error return penalty tensor or tensors **kwargs
def lsmr operator Jop d active set m n Jop shapedef matvec x x free x ravel copy x free[active set] 0return Jop matvec x * d def rmatvec x r d * Jop rmatvec x r[active set] 0return rreturn Linear Operator m n matvec matvec rmatvec rmatvec dtype float
def follow subrequest request subrequest **kwargs try try return request invoke subrequest subrequest **kwargs subrequest except Exception as e resp render view to response e subrequest if not resp or resp status code > 500 raise eraise respexcept httpexceptions HTTP Redirection as e new location e headers[' Location']new request Request blank path new location headers subrequest headers POST subrequest body method subrequest method new request bound data subrequest bound datanew request parent getattr subrequest 'parent' None return request invoke subrequest new request **kwargs new request
def plain text return re sub ' \x 08 ' '' text
@api wrapperdef update export module export filesystem system changed Falsename module params['name']client list module params['client list']if export is None if not module check mode export system exports create export path name filesystem filesystem if client list export update permissions client list changed Trueelif client list if set map transform unmunchify export get permissions set map transform client list if not module check mode export update permissions client list changed Truemodule exit json changed changed
def get Bridge Loops layer Thickness loop half Width 1 5 * layer Thickness slightly Greater Than Half Width 1 1 * half Width extrudate Loops []centers intercircle get Centers From Loop loop slightly Greater Than Half Width for center in centers extrudate Loop intercircle get Simplified Inset From Clockwise Loop center half Width if intercircle is Large Same Direction extrudate Loop center half Width if euclidean is Path Inside Loop loop extrudate Loop euclidean is Widdershins loop extrudate Loop reverse extrudate Loops append extrudate Loop return extrudate Loops
def find cover image container strict False ver container opf version parsedif ver major < 3 return find cover image 2 container strict strict else return find cover image 3 container
def pipeline code wrapper pipeline code return '\nexported pipeline {}\n\nexported pipeline fit training features training classes \nresults exported pipeline predict testing features \n' format pipeline code
def pipeline code wrapper pipeline code return '\nexported pipeline {}\n\nexported pipeline fit training features training classes \nresults exported pipeline predict testing features \n' format pipeline code
def libvlc audio get track count p mi f Cfunctions get 'libvlc audio get track count' None or Cfunction 'libvlc audio get track count' 1 None ctypes c int Media Player return f p mi
def pcoa lines dist mtx Distance Matrix read lines pcoa obj P Co A dist mtx return pcoa obj scores
def del password name cmd "dscl -passwd/ Users/{ 0 }''" format name try salt utils mac utils execute return success cmd except Command Execution Error as exc if 'e DS Unknown Node Name' in exc strerror raise Command Execution Error ' Usernotfound {0 }' format name raise Command Execution Error ' Unknownerror {0 }' format exc strerror cmd "dscl -create/ Users/{ 0 } Password'*'" format name salt utils mac utils execute return success cmd return info name ['passwd'] '*'
def parse dbus locale bus dbus System Bus localed bus get object 'org freedesktop locale 1 ' '/org/freedesktop/locale 1 ' properties dbus Interface localed 'org freedesktop D Bus Properties' system locale properties Get 'org freedesktop locale 1 ' ' Locale' ret {}for env var in system locale match re match '^ [A-Z ]+ * $' env var if match ret[match group 1 ] match group 2 replace '"' '' else log error ' Oddlocaleparameter"{ 0 }"detectedindbuslocaleoutput Thisshouldnothappen Youshouldprobablyinvestigatewhatcausedthis ' format env var return ret
def expand to match items cfg 2 newlines {}for configuration lines in items cfg 2 newlines[configuration] []maxguard 2 ** 30 while True minimalsourceline maxguardfor configuration lines in items if lines minimalsourceline min minimalsourceline lines[ 0 ] sourceline if minimalsourceline maxguard breakfor configuration lines in items if lines and lines[ 0 ] sourceline < minimalsourceline cfg 2 newlines[configuration] append lines[ 0 ] del lines[ 0 ]number of lines max len x for x in cfg 2 newlines values for newlines in cfg 2 newlines values add number of lines - len newlines newlines extend ['\n'] * add return cfg 2 newlines
def expand to match items cfg 2 newlines {}for configuration lines in items cfg 2 newlines[configuration] []maxguard 2 ** 30 while True minimalsourceline maxguardfor configuration lines in items if lines minimalsourceline min minimalsourceline lines[ 0 ] sourceline if minimalsourceline maxguard breakfor configuration lines in items if lines and lines[ 0 ] sourceline < minimalsourceline cfg 2 newlines[configuration] append lines[ 0 ] del lines[ 0 ]number of lines max len x for x in cfg 2 newlines values for newlines in cfg 2 newlines values add number of lines - len newlines newlines extend ['\n'] * add return cfg 2 newlines
def expand to match items cfg 2 newlines {}for configuration lines in items cfg 2 newlines[configuration] []maxguard 2 ** 30 while True minimalsourceline maxguardfor configuration lines in items if lines minimalsourceline min minimalsourceline lines[ 0 ] sourceline if minimalsourceline maxguard breakfor configuration lines in items if lines and lines[ 0 ] sourceline < minimalsourceline cfg 2 newlines[configuration] append lines[ 0 ] del lines[ 0 ]number of lines max len x for x in cfg 2 newlines values for newlines in cfg 2 newlines values add number of lines - len newlines newlines extend ['\n'] * add return cfg 2 newlines
def resolve all anno task return x for x in first match anno task first match any anno if x
def normalize to string host string return join host strings *normalize host string
def splitunc p import warningswarnings warn 'ntpath splituncisdeprecated usentpath splitdriveinstead' Deprecation Warning 2 drive path splitdrive p if len drive 2 return p[ 0] p return drive path
def arr 2 img ar return Image frombytes 'L' ar shape[ 1 ] ar shape[ 0 ] ar astype numpy ubyte tostring
def safe loads arg try loaded json loads arg except Type Error Value Error loaded argreturn loaded
def safe loads arg try loaded json loads arg except Type Error Value Error loaded argreturn loaded
def string eval source node ast parse source '<source>' mode 'eval' if not isinstance node body ast Str raise Value Error '%risnotastringliteral' % source return node body s
def test start no items hist with pytest raises cmdhistory History Empty Error hist start 'k' assert not hist tmphist
def add Observer section name target attr None dtype str callback None default None observers config observers setdefault section lower name lower {} if not attr tokens name lower split attr tokens[ 0 ] + '' join t title for t in tokens[ 1 ] log debug ' Subscribing%s %s' target attr attr intern attr targetref weakref ref target observers setdefault targetref attr callback val get Property section name dtype default setattr target attr val if callback callback val
def check vlim vlim return not np isscalar vlim and vlim is not None
def call test function func *args **dargs try return func *args **dargs except error Autotest Error raiseexcept Exception as e raise error Unhandled Test Fail e
def Create MDI Interactive Window make Doc None make Frame None global editif make Doc is None make Doc Interactive Documentif make Frame is None make Frame Interactive Frameedit C Interactive Python make Doc make Doc make Frame make Frame
def compute change labels before after result {}for label before after in zip labels before after matched keys set before & set after value {key after[key] - before[key] for key in matched keys}result[label] valuereturn result
def main if len sys argv > 1 write Output '' join sys argv[ 1 ] else settings start Main Loop From Constructor get New Repository
@pytest mark parametrize 'parallel' [ True False] def test default data start parallel read basic text 'ignorethisline\nabc\n 123 \n 456 'table read basic text header start 1 parallel parallel expected Table [[ 1 4] [2 5] [3 6]] names 'a' 'b' 'c' assert table equal table expected
def strordict fullname item key 'fullname' try d pickle loads item except d {key item}if not isinstance d dict or key not in d or not isinstance d[key] str raise Value Error ' Errortryingtomigrate%r %r ' % item d return d
def strordict fullname item key 'fullname' try d pickle loads item except d {key item}if not isinstance d dict or key not in d or not isinstance d[key] str raise Value Error ' Errortryingtomigrate%r %r ' % item d return d
def image locations delete all context image id delete time None session None session session or get session location refs session query models Image Location filter by image id image id filter by deleted False all for loc id in [loc ref id for loc ref in location refs] image location delete context image id loc id 'deleted' delete time delete time session session
def write double matrix fid kind mat FIFFT MATRIX 1 << 30 FIFFT MATRIX DOUBLE FIFF FIFFT DOUBLE FIFFT MATRIX data size 8 * mat size + 4 * mat ndim + 1 fid write np array kind dtype '>i 4 ' tostring fid write np array FIFFT MATRIX DOUBLE dtype '>i 4 ' tostring fid write np array data size dtype '>i 4 ' tostring fid write np array FIFF FIFFV NEXT SEQ dtype '>i 4 ' tostring fid write np array mat dtype '>f 8 ' tostring dims np empty mat ndim + 1 dtype np int 32 dims[ mat ndim] mat shape[ -1 ]dims[ -1 ] mat ndimfid write np array dims dtype '>i 4 ' tostring check fiff length fid
def make logged in client username 'test' password 'test' is superuser True recreate False groupname None try user User objects get username username if recreate user delete raise User Does Not Existexcept User Does Not Exist user User objects create user username username + '@localhost' password user is superuser is superuseruser save else if user is superuser is superuser user is superuser is superuseruser save if groupname is not None group created Group objects get or create name groupname if not user groups filter name group name exists user groups add group user save c Client ret c login username username password password assert ret " Loginfailed user'%s' " % username return c
@taskdef virtualenv verify requirements revision None req rev requirements revision or latest requirements revision env dir 'env %s' % req rev package dir 'python-package %s' % req rev requirements file 'prod-requirements txt %s' % req rev with settings warn only True out run '~/%s/viewfinder/bin/pipinstall-ffile //$HOME/%s--no-index-r~/%s--no-install--no-download-q' % env dir package dir requirements file if out return code 0 fprint ' Validvirtualenvironmentforprod-requirements rev%s ' % req rev return Trueelse fprint ' Badvirtualenvironmentforprod-requirements rev%s ' % req rev return False
def get logging manager manage stdout and stderr False redirect fds False if redirect fds manager Fd Redirection Logging Manager else manager Logging Manager if manage stdout and stderr manager manage stdout manager manage stderr return manager
def get logging manager manage stdout and stderr False redirect fds False if redirect fds manager Fd Redirection Logging Manager else manager Logging Manager if manage stdout and stderr manager manage stdout manager manage stderr return manager
@app route '/<slug candidate>' def index slug candidate check slug candidate slug candidate add request REQUEST LOAD request path global stay open download in progressdeny download not stay open and download in progress if deny download return render template string open helpers get resource path 'html/denied html' read return render template string open helpers get resource path 'html/index html' read slug slug file info file info filename os path basename zip filename filesize zip filesize filesize human helpers human readable filesize zip filesize
def run remotely username address commands port 22 log command filter identity return Effect Run Remotely username username address address commands commands port port log command filter log command filter
def main password getpass for a dict in pynet 1 pynet 2 juniper srx a dict['password'] passworda dict['verbose'] Falsenet connect Connect Handler **pynet 2 config commands ['loggingbuffered 20000 ']net connect send config set config commands output net connect send command 'showrun incloggingbuffer' printprint '#' * 80 print ' Device {} {}' format net connect ip net connect port printprint outputprint '#' * 80 print
def main password getpass for a dict in pynet 1 pynet 2 juniper srx a dict['password'] passworda dict['verbose'] Falsenet connect Connect Handler **pynet 2 config commands ['loggingbuffered 20000 ']net connect send config set config commands output net connect send command 'showrun incloggingbuffer' printprint '#' * 80 print ' Device {} {}' format net connect ip net connect port printprint outputprint '#' * 80 print
def main password getpass for a dict in pynet 1 pynet 2 juniper srx a dict['password'] passworda dict['verbose'] Falsenet connect Connect Handler **pynet 2 config commands ['loggingbuffered 20000 ']net connect send config set config commands output net connect send command 'showrun incloggingbuffer' printprint '#' * 80 print ' Device {} {}' format net connect ip net connect port printprint outputprint '#' * 80 print
def iter traceback frames tb while tb and hasattr tb 'tb frame' f locals getattr tb tb frame 'f locals' {} if not getitem from frame f locals ' traceback hide ' yield tb tb frame getattr tb 'tb lineno' None tb tb tb next
def fix index builder idx size is negative builder icmp signed '<' idx ir Constant size type 0 wrapped index builder add idx size return builder select is negative wrapped index idx
@ Profiler profiledef test dbapi raw n conn engine pool creator cursor conn cursor compiled Customer table insert values name bindparam 'name' description bindparam 'description' compile dialect engine dialect if compiled positional args 'customername%d' % i 'customerdescription%d' % i for i in range n else args dict name 'customername%d' % i description 'customerdescription%d' % i for i in range n cursor executemany str compiled list args conn commit conn close
def table proportion count nobs table np column stack count nobs - count expected table sum 0 * table sum 1 [ None] * 1 0 / table sum n rows table shape[ 0 ]return table expected n rows
def get DB Tables uri None DB TABLES []for table in DB SCHEMA if table name in TABLES REPOSITORY DB TABLES append TABLES REPOSITORY[table name] continueattrs {' imdbpy Name' table name ' imdbpy Schema' table 'add Indexes' add Indexes 'add Foreign Keys' add Foreign Keys}for col in table cols if col name 'id' continueattrs[col name] MAP COLS[col kind] **col params cls type table name SQL Object attrs DB TABLES append cls TABLES REPOSITORY[table name] clsreturn DB TABLES
def Install Template Package virtualenv bin os path dirname sys executable extension os path splitext sys executable [1 ]pip '%s/pip%s' % virtualenv bin extension major minor version ' ' join pkg resources get distribution 'grr-response-core' version split ' ' [0 2] subprocess check call [sys executable pip 'install' '--upgrade' '-f' 'https //storage googleapis com/releases grr-response com/index html' 'grr-response-templates %s *' % major minor version ]
def add Accelerator Command accelerator Binding command Function master menu text accelerator Text accelerator Binding[ 1 -1 ]last Index Of Minus accelerator Text rfind '-' if last Index Of Minus > -1 accelerator Text accelerator Text[ last Index Of Minus + 1 ] + accelerator Text[ last Index Of Minus + 1 ] capitalize accelerator Text accelerator Text replace ' Key Press-' '' accelerator Text accelerator Text replace '-' '+' accelerator Text accelerator Text replace ' Control' ' Ctrl' accelerator Binding accelerator Binding replace ' Key Press' '' menu add command accelerator accelerator Text label text underline 0 command command Function master bind accelerator Binding command Function
def get parent unit xblock while xblock xblock xblock get parent if xblock is None return Noneparent xblock get parent if parent is None return Noneif parent category 'sequential' return xblock
def get parent unit xblock while xblock xblock xblock get parent if xblock is None return Noneparent xblock get parent if parent is None return Noneif parent category 'sequential' return xblock
def start TLS transport context Factory normal bypass if normal client transport tls Client Defaultelse client not transport tls Client Default producer streaming None None if transport producer is not None producer streaming transport producer transport streaming Producer transport unregister Producer tls Factory TLS Memory BIO Factory context Factory client None tls Protocol TLS Memory BIO Protocol tls Factory transport protocol False transport protocol tls Protocoltransport get Handle tls Protocol get Handletransport get Peer Certificate tls Protocol get Peer Certificatedirectly Provides transport ISSL Transport transport TLS Truetransport protocol make Connection Bypass TLS bypass transport if producer transport register Producer producer streaming
def mock resource with filename resource type VALID RESOURCES ['html' 'txt']if resource type not in VALID RESOURCES raise Exception ' Mockedresourcemustbeoneof %s' % ' ' join VALID RESOURCES subfolder 'text' if resource type 'txt' else 'html' resource path os path join TEST DIR 'data/%s/%s %s' % subfolder filename resource type with open resource path 'r' as f return f read
def check paypal id name d dict version settings PAYPAL API VERSION buttoncode 'cleartext' buttontype 'donate' method 'BM Create Button' l buttonvar 0 'business %s' % name d['user'] settings PAYPAL EMBEDDED AUTH['USER']d['pwd'] settings PAYPAL EMBEDDED AUTH['PASSWORD']d['signature'] settings PAYPAL EMBEDDED AUTH['SIGNATURE']r requests get settings PAYPAL API URL params d timeout 10 response dict urlparse parse qsl r text valid response['ACK'] ' Success' msg None if valid else response['L LONGMESSAGE 0 '] return valid msg
def check paypal id name d dict version settings PAYPAL API VERSION buttoncode 'cleartext' buttontype 'donate' method 'BM Create Button' l buttonvar 0 'business %s' % name d['user'] settings PAYPAL EMBEDDED AUTH['USER']d['pwd'] settings PAYPAL EMBEDDED AUTH['PASSWORD']d['signature'] settings PAYPAL EMBEDDED AUTH['SIGNATURE']r requests get settings PAYPAL API URL params d timeout 10 response dict urlparse parse qsl r text valid response['ACK'] ' Success' msg None if valid else response['L LONGMESSAGE 0 '] return valid msg
def check for obj leakage f *args **kwargs f gc collect gc collect gc collect f gc collect gc collect gc collect r1 gc get objects f gc collect gc collect gc collect r2 gc get objects d2 dict [ id x x for x in r2 ] del d2 [id r1 ]for o in r1 if id o in d2 del d2 [id o ]return len r2 - len r1 - 1 d2
def test mark done problem pg xlog monkeypatch seg make segment 1 explicit False with pytest raises exception User Critical seg mark done
def signalcommand func def inner self *args **kwargs pre command send self class args args kwargs kwargs ret func self *args **kwargs post command send self class args args kwargs kwargs outcome ret return retreturn inner
def signalcommand func def inner self *args **kwargs pre command send self class args args kwargs kwargs ret func self *args **kwargs post command send self class args args kwargs kwargs outcome ret return retreturn inner
def encode short string pieces value encoded value as bytes value length len encoded value if length > 255 raise exceptions Short String Too Long encoded value pieces append struct pack 'B' length pieces append encoded value return 1 + length
def handle protectederror obj request e dependent objects e[ 1 ]try dep class dependent objects[ 0 ] meta verbose name pluralexcept Index Error raise eif type obj in list tuple err message ' Unabletodeletetherequested{} Thefollowingdependent{}werefound ' format obj[ 0 ] meta verbose name plural dep class else err message ' Unabletodelete{}{} Thefollowingdependent{}werefound ' format obj meta verbose name obj dep class dependent objects []for o in e[ 1 ] if hasattr o 'get absolute url' dependent objects append '<ahref "{}">{}</a>' format o get absolute url str o else dependent objects append str o err message + ' ' join dependent objects messages error request err message
def handle protectederror obj request e dependent objects e[ 1 ]try dep class dependent objects[ 0 ] meta verbose name pluralexcept Index Error raise eif type obj in list tuple err message ' Unabletodeletetherequested{} Thefollowingdependent{}werefound ' format obj[ 0 ] meta verbose name plural dep class else err message ' Unabletodelete{}{} Thefollowingdependent{}werefound ' format obj meta verbose name obj dep class dependent objects []for o in e[ 1 ] if hasattr o 'get absolute url' dependent objects append '<ahref "{}">{}</a>' format o get absolute url str o else dependent objects append str o err message + ' ' join dependent objects messages error request err message
def test replace update column via setitem warnings always t table Table [[ 1 2 3] [4 5 6]] names ['a' 'b'] with catch warnings as w with table conf set temp 'replace warnings' ['always'] t['a'] 0assert len w 0 from inspect import currentframe getframeinfoframeinfo getframeinfo currentframe t['a'] [10 20 30 ]assert len w 1 assert "replacedcolumn'a'" str w[ 0 ] message assert w[ 0 ] lineno frameinfo lineno + 1 assert w[ 0 ] category is table Table Replace Warning assert 'test table' in w[ 0 ] filename
def penn to wordnet tag if tag in u'NN' u'NNS' u'NNP' u'NNPS' return wordnet NOU Nif tag in u'JJ' u'JJR' u'JJS' return wordnet AD Jif tag in u'VB' u'VBD' u'VBG' u'VBN' u'VBP' u'VBZ' return wordnet VER Bif tag in u'RB' u'RBR' u'RBS' return wordnet AD Vreturn None
def penn to wordnet tag if tag in u'NN' u'NNS' u'NNP' u'NNPS' return wordnet NOU Nif tag in u'JJ' u'JJR' u'JJS' return wordnet AD Jif tag in u'VB' u'VBD' u'VBG' u'VBN' u'VBP' u'VBZ' return wordnet VER Bif tag in u'RB' u'RBR' u'RBS' return wordnet AD Vreturn None
def passphrase callback passphrase def f *args return passphrasereturn f
def hex 2 rgb 255 hex Color if hex Color[ 0 ] '#' hex Color hex Color[ 1 ]elif hex Color[ 0 2] lower '0 x' hex Color hex Color[ 2 ]if len hex Color 3 hex Color hex Color[ 0 ] + '0 ' + hex Color[ 1 ] + '0 ' + hex Color[ 2 ] + '0 ' rgb int hex Color[ 0 2] 16 int hex Color[ 2 4] 16 int hex Color[ 4 6] 16 return rgb
def demo error analysis postag error output 'errors txt'
def demo error analysis postag error output 'errors txt'
def combine types x y if isinstance x Unknown return yif isinstance y Unknown return xif isinstance x Any return xif isinstance y Any return yif isinstance x Union return combine either x y if isinstance y Union return combine either y x if x y return xreturn simplify either [x] [y]
def checks sfile logger if sfile['idkey'] 'idkey' logger error 'idkeyhasnotbeenspecified' return Falseif os pathi isfile sfile['idkey'] False logger error 'couldnotlocateyour ID Key' return Falseelif sfile['lp'] '' logger error 'lpiphasnotbeenspecified' return Falseelif sfile['implant'] '' logger error 'implantiphasnotbeenspecified' return Falseelif sfile['sport'] '' logger error 'sourceporthasnotbeenspecified' return Falseelif sfile['dport'] '' logger error 'destinationporthadnotbeenspecified' return Falseelif sfile['target'] '' logger error 'targetiphasnotbeenspecified' return Falseelif sfile['hostname'] '' logger error 'targethostnamehasnotbeenspecified' return Falseelse logger debug 'allcheckshavepassed' return True
def islink p return false
def islink p return false
def Build Token request execution time token access control ACL Token username request user reason request REQ get 'reason' '' process 'GRR Admin UI' expiry rdfvalue RDF Datetime Now + execution time for field in ['REMOTE ADDR' 'HTTP X FORWARDED FOR'] remote addr request META get field '' if remote addr token source ips append remote addr return token
def libvlc media get duration p md f Cfunctions get 'libvlc media get duration' None or Cfunction 'libvlc media get duration' 1 None ctypes c longlong Media return f p md
def run examples windowed False quiet False summary True successes []failures []examples TERMINAL EXAMPLE Sif windowed examples + WINDOWED EXAMPLE Sif quiet from sympy utilities runtests import Py Test Reporterreporter Py Test Reporter reporter write ' Testing Examples\n' reporter write '-' * reporter terminal width else reporter Nonefor example in examples if run example example reporter reporter successes append example else failures append example if summary show summary successes failures reporter reporter return len failures 0
def run examples windowed False quiet False summary True successes []failures []examples TERMINAL EXAMPLE Sif windowed examples + WINDOWED EXAMPLE Sif quiet from sympy utilities runtests import Py Test Reporterreporter Py Test Reporter reporter write ' Testing Examples\n' reporter write '-' * reporter terminal width else reporter Nonefor example in examples if run example example reporter reporter successes append example else failures append example if summary show summary successes failures reporter reporter return len failures 0
def decode file data json load file features []for feature in data['features'] if feature['type'] ' Feature' continueif feature['geometry']['type'] ' Geometry Collection' continueprop feature['properties']geom transform as Shape feature['geometry'] mercator features append geom wkb prop return features
def get extended due course unit user try override Student Field Override objects get course id course id student user location unit location field 'due' return DATE FIELD from json json loads override value except Student Field Override Does Not Exist return None
def int From Bytes data byteorder signed False assert byteorder 'big' assert not signed if len data % 4 0 data '\x 00 ' * 4 - len data % 4 + data result 0while len data > 0 digit struct unpack '>I' data[ 4] result result << 32 + digit data data[ 4 ]return result
def get cluster manager config file None cache False cfg get config config file cache return cfg get cluster manager
def invitation detail request token invitation Invitation objects get invitation token if not invitation return invitation error request ' Thisinvitationisnolongervalid ' backend getattr settings 'REGISTRATION BACKEND' 'registration backends default Default Backend' return register request backend
def wrap fragment fragment new content wrapper frag Fragment content new content wrapper frag add frag resources fragment return wrapper frag
def wrap fragment fragment new content wrapper frag Fragment content new content wrapper frag add frag resources fragment return wrapper frag
def test performance clock task Clock call task Looping Call lambda None call clock clockcall start 0 1 clock advance 1000000
def test performance clock task Clock call task Looping Call lambda None call clock clockcall start 0 1 clock advance 1000000
def initialize Zone Interval Table shape vertexes shape zone Interval shape layer Thickness / math sqrt len vertexes / 1000 0 shape z Zone Table {}for point in vertexes add To Zone Table point shape
@pytest mark parametrize 'fast writer' [ True False] @pytest mark parametrize 'fmt' ['% 0 1f' ' 1f' '0 1f' '{ 0 0 1f}'] def test write format fast writer fmt data ascii read '#c 1 \n#c 2 DCTB \na b c\n#c 3 \n 1 11 2 22 3 33 ' out String IO expected ['#c 1 ' '#c 2 ' '#c 3 ' 'abc' '1 12 223 33 ']data['a'] format fmtascii write data out format 'basic' fast writer fast writer assert out getvalue splitlines expected
def E n n omega return hbar * omega * n + Rational 1 2
def E n n omega return hbar * omega * n + Rational 1 2
def on plugin shutdown config pass
def libvlc audio equalizer get band count f Cfunctions get 'libvlc audio equalizer get band count' None or Cfunction 'libvlc audio equalizer get band count' None ctypes c uint return f
@ File System in directory current directory 'django' 'alfaces' def test django specifying scenarios to run status out commands getstatusoutput 'pythonmanage pyharvest--verbosity 3--no-color--scenarios 2 5-afoobar' assert equals status 0 out assert '2 ndscenario' in out assert '5 thscenario' in out assert '1 stscenario' not in out assert '3 rdscenario' not in out assert '4 thscenario' not in out assert '6 thscenario' not in out
def handle error result if result return error string get error if not isinstance error string str cls error string try decode error string raise OS Error error string
def test datasource untouched original data copy deepcopy MEMORY DATA table Unordered Table MEMORY DATA table order by u'i'list table rows assert MEMORY DATA original data table Unordered Table MEMORY DATA table order by u'beta'list table rows assert MEMORY DATA original data
def build options gens args None if args is None gens args gens if len args 1 or 'opt' not in args or gens return Options gens args else return args['opt']
def postprocess for cse expr optimizations for pre post in reversed optimizations if post is not None expr post expr return expr
def new value pb entity pb name return entity pb properties get or create name
def boundaries x depth None kind None if not isinstance kind dict kind dict i kind for i in range x ndim if not isinstance depth dict depth dict i depth for i in range x ndim for i in range x ndim d depth get i 0 if d 0 continuethis kind kind get i 'none' if this kind 'none' continueelif this kind 'periodic' x periodic x i d elif this kind 'reflect' x reflect x i d elif this kind 'nearest' x nearest x i d elif i in kind x constant x i d kind[i] return x
def boundaries x depth None kind None if not isinstance kind dict kind dict i kind for i in range x ndim if not isinstance depth dict depth dict i depth for i in range x ndim for i in range x ndim d depth get i 0 if d 0 continuethis kind kind get i 'none' if this kind 'none' continueelif this kind 'periodic' x periodic x i d elif this kind 'reflect' x reflect x i d elif this kind 'nearest' x nearest x i d elif i in kind x constant x i d kind[i] return x
def dangling prune False force False all images images all True dangling images [x[ 12 ] for x in get top level images all images if all images[x][' Repo Tags'] is None ]if not prune return dangling imagesret {}for image in dangling images try ret setdefault image {} [' Removed'] rmi image force force except Exception as exc err '{ 0 }' format exc log error err ret setdefault image {} [' Comment'] errret[image][' Removed'] Falsereturn ret
def dangling prune False force False all images images all True dangling images [x[ 12 ] for x in get top level images all images if all images[x][' Repo Tags'] is None ]if not prune return dangling imagesret {}for image in dangling images try ret setdefault image {} [' Removed'] rmi image force force except Exception as exc err '{ 0 }' format exc log error err ret setdefault image {} [' Comment'] errret[image][' Removed'] Falsereturn ret
def dangling prune False force False all images images all True dangling images [x[ 12 ] for x in get top level images all images if all images[x][' Repo Tags'] is None ]if not prune return dangling imagesret {}for image in dangling images try ret setdefault image {} [' Removed'] rmi image force force except Exception as exc err '{ 0 }' format exc log error err ret setdefault image {} [' Comment'] errret[image][' Removed'] Falsereturn ret
def greedy Q Policy Qs dim len Qs num A len Qs[ 0 ] policy zeros dim num A for si in range dim actions all argmax Qs[si] for a in actions policy[ si a ] 1 0 / len actions return policy
def date from adverb base date name adverb date datetime base date year base date month base date day if name 'today' or name 'tonite' or name 'tonight' return adverb date today elif name 'yesterday' return adverb date - timedelta days 1 elif name 'tomorrow' or name 'tom' return adverb date + timedelta days 1
def date from adverb base date name adverb date datetime base date year base date month base date day if name 'today' or name 'tonite' or name 'tonight' return adverb date today elif name 'yesterday' return adverb date - timedelta days 1 elif name 'tomorrow' or name 'tom' return adverb date + timedelta days 1
def rand uuid return uuidutils generate uuid
def randprime a b if a > b return a b map int a b n random randint a - 1 b p nextprime n if p > b p prevprime b if p < a raise Value Error 'noprimesexistinthespecifiedrange' return p
def randprime a b if a > b return a b map int a b n random randint a - 1 b p nextprime n if p > b p prevprime b if p < a raise Value Error 'noprimesexistinthespecifiedrange' return p
def get Service Endpoints input url flt None result discover input url try endpoints apply Filter result normalized uri result response text flt except XRDS Error as err raise Discovery Failure str err None return result normalized uri endpoints
def get Service Endpoints input url flt None result discover input url try endpoints apply Filter result normalized uri result response text flt except XRDS Error as err raise Discovery Failure str err None return result normalized uri endpoints
def get Service Endpoints input url flt None result discover input url try endpoints apply Filter result normalized uri result response text flt except XRDS Error as err raise Discovery Failure str err None return result normalized uri endpoints
def value present name datastore path config ret {'name' name 'result' False 'changes' {} 'comment' ''}existing salt ['cisconso get data'] datastore path if cmp existing config ret['result'] Trueret['comment'] ' Configisalreadyset'elif opts ['test'] is True ret['result'] Noneret['comment'] ' Configwillbeadded'diff Dict Differ existing config ret['changes']['new'] diff added ret['changes']['removed'] diff removed ret['changes']['changed'] diff changed else salt ['cisconso set data value'] datastore path config ret['result'] Trueret['comment'] ' Successfullyaddedconfig'diff Dict Differ existing config ret['changes']['new'] diff added ret['changes']['removed'] diff removed ret['changes']['changed'] diff changed return ret
@api versions wraps '2 8' @utils arg 'server' metavar '<server>' help ' Nameor I Dofserver ' def do get mks console cs args server find server cs args server data server get mks console print console cs data
def get config path home dir None val op join get extra data path home dir home dir 'mne-python json' return val
def show growth limit 10 peak stats {} shortnames True gc collect stats typestats shortnames shortnames deltas {}for name count in iteritems stats old count peak stats get name 0 if count > old count deltas[name] count - old count peak stats[name] countdeltas sorted deltas items key operator itemgetter 1 reverse True if limit deltas deltas[ limit]if deltas width max len name for name count in deltas for name delta in deltas print '%-*s% 9 d%+ 9 d' % width name stats[name] delta
def range error message error message what to enter minimum maximum if error message is None error message ' Enter' + what to enter if minimum is not None and maximum is not None error message + 'between% min gand% max g'elif minimum is not None error message + 'greaterthanorequalto% min g'elif maximum is not None error message + 'lessthanorequalto% max g'if type maximum in [int long] maximum - 1return translate error message % dict min minimum max maximum
def names to indices names ordered names indices []names list list names for ordered name in ordered names if ordered name in names list indices append names list index ordered name return np array indices
def fmin bfgs f x0 fprime None args gtol 1e- 05 norm Inf epsilon epsilon maxiter None full output 0 disp 1 retall 0 callback None opts {'gtol' gtol 'norm' norm 'eps' epsilon 'disp' disp 'maxiter' maxiter 'return all' retall}res minimize bfgs f x0 args fprime callback callback **opts if full output retlist res['x'] res['fun'] res['jac'] res['hess inv'] res['nfev'] res['njev'] res['status'] if retall retlist + res['allvecs'] return retlistelif retall return res['x'] res['allvecs'] else return res['x']
def MACDFIX ds count signalperiod - 2 ** 31 ret call talib with ds ds count talib MACDFIX signalperiod if ret is None ret None None None return ret
def get key reference scope name user None if scope SYSTEM SCOPE or scope FULL SYSTEM SCOPE return nameelif scope USER SCOPE or scope FULL USER SCOPE if not user raise Invalid User Exception ' Avalidusermustbespecifiedforuserkeyref ' return User Key Reference name name user user refelse raise Invalid Scope Exception ' Scope"%s"isnotvalid Allowedscopesare%s ' % scope ALLOWED SCOPES
def get key reference scope name user None if scope SYSTEM SCOPE or scope FULL SYSTEM SCOPE return nameelif scope USER SCOPE or scope FULL USER SCOPE if not user raise Invalid User Exception ' Avalidusermustbespecifiedforuserkeyref ' return User Key Reference name name user user refelse raise Invalid Scope Exception ' Scope"%s"isnotvalid Allowedscopesare%s ' % scope ALLOWED SCOPES
def get key reference scope name user None if scope SYSTEM SCOPE or scope FULL SYSTEM SCOPE return nameelif scope USER SCOPE or scope FULL USER SCOPE if not user raise Invalid User Exception ' Avalidusermustbespecifiedforuserkeyref ' return User Key Reference name name user user refelse raise Invalid Scope Exception ' Scope"%s"isnotvalid Allowedscopesare%s ' % scope ALLOWED SCOPES
def get key reference scope name user None if scope SYSTEM SCOPE or scope FULL SYSTEM SCOPE return nameelif scope USER SCOPE or scope FULL USER SCOPE if not user raise Invalid User Exception ' Avalidusermustbespecifiedforuserkeyref ' return User Key Reference name name user user refelse raise Invalid Scope Exception ' Scope"%s"isnotvalid Allowedscopesare%s ' % scope ALLOWED SCOPES
def add remote path name remote url use sudo False user None fetch True if path is None raise Value Error ' Pathtotheworkingcopyisneededtoaddaremote' if fetch cmd 'gitremoteadd-f%s%s' % name remote url else cmd 'gitremoteadd%s%s' % name remote url with cd path if use sudo and user is None run as root cmd elif use sudo sudo cmd user user else run cmd
def Eval Hypergeom Pmf k N K n return stats hypergeom pmf k N K n
def test sorted bases assert u m * u Jy bases u Jy * u m bases
@gen enginedef Run Once client job callback today util Now UTC To ISO 8601 last run yield gen Task job Find Last Success with payload key 'stats last day' if last run is not None and last run['stats last day'] today and not options options force recompute logging info ' Alreadyransuccessfullytoday skipping Specify--force recomputetorecompute ' callback None returnday stats yield gen Task Process Tables client assert day stats is not None hms logs util k Daily Metrics Time By Log Type['dynamodb user'] yield gen Task logs util Update Metrics client {today day stats} dry run options options dry run hms tuple hms prefix to erase 'dynamodb user' callback today
def placeholder shape None ndim None dtype None sparse False name None if dtype is None dtype floatx if shape is None and ndim is None raise Value Error ' Specifyeitherashapeorndimvalue ' if shape is not None ndim len shape else shape tuple [ None for in range ndim ] broadcast False * ndim if sparse assert sparse module x th sparse module csr matrix name name dtype dtype else x T Tensor Type dtype broadcast name x keras shape shapex uses learning phase Falsereturn x
def test rechunk 1d a np random uniform 0 1 300 x da from array a chunks 100 * 3 new 50 * 6 x2 rechunk x chunks new assert x2 chunks new assert np all x2 compute a
def get filters for doctype config get notification config return config get u'for doctype' get doctype {}
def assert has line matching output expression match re search '^%s$' % expression output flags re MULTILINE assert match is not None " Nolinematchingexpression'%s'wasfoundinoutputfile " % expression
def assert has line matching output expression match re search '^%s$' % expression output flags re MULTILINE assert match is not None " Nolinematchingexpression'%s'wasfoundinoutputfile " % expression
def test discard invalid filenames runner Runner join abspath dirname file 'invalid module name' verbosity 0 runner run
def quote s if not isinstance s str s s encode 'utf 8 ' quoted stdlib quote s if isinstance quoted bytes quoted quoted decode 'utf 8 ' return quoted
def strip uri prefix path return re sub '^ /v\\d+ ?' '' six text type path
def dynamic string param registry xml parent data dynamic param common registry xml parent data ' String Parameter Definition'
def is minimal bsgs base gens base 1 []sgs 1 gens[ ]size gens[ 0 ] sizefor i in range size if not all h array form[i] i for h in sgs 1 base 1 append i sgs 1 [h for h in sgs 1 if h array form[i] i ]return base 1 base
def is minimal bsgs base gens base 1 []sgs 1 gens[ ]size gens[ 0 ] sizefor i in range size if not all h array form[i] i for h in sgs 1 base 1 append i sgs 1 [h for h in sgs 1 if h array form[i] i ]return base 1 base
def is minimal bsgs base gens base 1 []sgs 1 gens[ ]size gens[ 0 ] sizefor i in range size if not all h array form[i] i for h in sgs 1 base 1 append i sgs 1 [h for h in sgs 1 if h array form[i] i ]return base 1 base
@utils arg 'hypervisor' metavar '<hypervisor>' help ' Nameor I Dofthehypervisortoshowthedetailsof ' @utils arg '--wrap' dest 'wrap' metavar '<integer>' default 40 help ' Wraptheoutputtoaspecifiedlength Defaultis 40 or 0 todisable' def do hypervisor show cs args hyper find hypervisor cs args hypervisor utils print dict utils flatten dict hyper to dict wrap int args wrap
def ui open *files if files osname get os name opener OPENER BY OS get osname if opener opener files else raise Open Error u' Opencurrentlynotsupportedfor' + osname
def get Evaluated Int default Value element Node key if element Node None return Noneif key in element Node attributes try return get Int From Float String get Evaluated Value Obliviously element Node key except print ' Warning couldnotevaluatetheint 'print keyprint element Node attributes[key]return default Value
def is pure elemwise graph inputs allowed ops tensor basic Dim Shuffle tensor basic Elemwise owner graph ownerop graph owner op if graph owner is not None else None if owner is None and graph in inputs return Trueelif owner is None and isinstance graph tensor basic Tensor Constant return Trueelif owner is None and graph not in inputs return Falseelif op is not None and not isinstance op allowed ops return Falseelse if isinstance graph owner op tensor basic Dim Shuffle shuffled graph owner inputs[ 0 ]if not isinstance shuffled tensor basic Tensor Constant return Falsefor inp in graph owner inputs if not is pure elemwise inp inputs return Falsereturn True
def instance get floating address context instance id return IMPL instance get floating address context instance id
def replace reps if not reps return lambda x x D lambda match reps[match group 0 ] pattern re compile ' ' join [ re escape k for k v in reps items ] re M return lambda string pattern sub D string
def config check name passed default module diff Default VM Config passed default if len diff shallow diff module fail json msg ' Missingrequiredkey/pair[%s] %smustcontain%s' % ' ' join diff shallow diff name default if diff recursive diff module fail json msg ' Configmismatchfor%son%s' % name diff recursive diff return True
def config check name passed default module diff Default VM Config passed default if len diff shallow diff module fail json msg ' Missingrequiredkey/pair[%s] %smustcontain%s' % ' ' join diff shallow diff name default if diff recursive diff module fail json msg ' Configmismatchfor%son%s' % name diff recursive diff return True
def make secgroup list security groups secgroups objects Security Group List secgroups objects []for sg in security groups secgroup objects Security Group if uuidutils is uuid like sg secgroup uuid sgelse secgroup name sgsecgroups objects append secgroup return secgroups
def str 2 gib size s size in bytes str 2 size s return size in bytes // units Gi
def str 2 gib size s size in bytes str 2 size s return size in bytes // units Gi
def base 64 decode string string want bytes string encoding 'ascii' errors 'ignore' return base 64 urlsafe b64 decode string + ' ' * - len string % 4
def modifiers dict modifiers return {mod[ 4 ] lower modifiers & getattr sys modules[ name ] mod > 0 for mod in ['MOD SHIFT' 'MOD CTRL' 'MOD ALT' 'MOD CAPSLOCK' 'MOD NUMLOCK' 'MOD WINDOWS' 'MOD COMMAND' 'MOD OPTION' 'MOD SCROLLLOCK']}
def read certificates glob path ret {}for path in glob glob glob path if os path isfile path try ret[path] read certificate certificate path except Value Error passreturn ret
def wheel name **kwargs ret {'name' name 'result' False 'changes' {} 'comment' ''}try jid orchestration jid except Name Error log debug ' Unabletofireargseventduetomissing orchestration jid ' jid Noneout salt ['saltutil wheel'] name orchestration jid jid env env **kwargs ret['result'] Trueret['comment'] " Wheelfunction'{ 0 }'executed " format name ret[' orchestration '] Trueif 'jid' in out ret[' jid '] out['jid']runner return out get 'return' if runner return ret['changes'] runner returnreturn ret
@check dataset access permission@check dataset edition permission def edit coordinator dataset request dataset response {'status' -1 'data' ' None'}if request method 'POST' dataset form Dataset Form request POST instance dataset prefix 'edit' if dataset form is valid dataset dataset form save response['status'] 0response['data'] reverse 'oozie edit coordinator' kwargs {'coordinator' dataset coordinator id} + '#list Dataset' request info ' Datasetmodified' if dataset start > dataset coordinator start request warn ' Beware datasetstartdatewasafterthecoordinatorstartdate ' else response['data'] dataset form errorselse dataset form Dataset Form instance dataset prefix 'edit' if response['status'] 0 response['data'] render 'editor/edit coordinator dataset mako' request {'coordinator' dataset coordinator 'dataset form' dataset form 'dataset' dataset 'path' request path} force template True contentreturn Json Response response safe False
def is proj plane distorted wcs maxerr 1e- 05 cwcs wcs celestialreturn not is cd orthogonal cwcs pixel scale matrix maxerr or has distortion cwcs
def test continue on collection errors testdir testdir makepyfile **COLLECTION ERROR PY FILES res testdir runpytest '--continue-on-collection-errors' assert res ret 1 res stdout fnmatch lines ['collected 2 items/ 2 errors' '* 1 failed 1passed 2error*']
def Global Process return dev process
@pytest fixturedef key config stub stubs stub stubs Key Config Stub objreg register 'key-config' stub yield stub objreg delete 'key-config'
def calculate children evaluator children iterator iter children types evaluator eval element next iterator for operator in iterator right next iterator if tree is node operator 'comp op' operator '' join str c value for c in operator children if operator in 'and' 'or' left bools set [left py bool for left in types] if left bools set [ True] if operator 'and' types evaluator eval element right elif left bools set [ False] if operator 'and' types evaluator eval element right else types calculate evaluator types operator evaluator eval element right debug dbg 'calculate childrentypes%s' types return types
def test cos dataset skip if no data dataset Cos Dataset sample batch dataset get batch design batch size 10000 assert sample batch shape 10000 2 assert sample batch[ 0] min > dataset min x assert sample batch[ 0] max < dataset max x
def test cos dataset skip if no data dataset Cos Dataset sample batch dataset get batch design batch size 10000 assert sample batch shape 10000 2 assert sample batch[ 0] min > dataset min x assert sample batch[ 0] max < dataset max x
def detect config path try proc subprocess Popen ['nginx' '-V'] stderr subprocess PIPE except OS Error error exit ' Accesslogfileorformatwasnotsetandnginxconfigfilecannotbedetected ' + ' Perhapsnginxisnotinyour PATH?' stdout stderr proc communicate version output stderr decode 'utf- 8 ' conf path match re search '--conf-path \\S* ' version output if conf path match is not None return conf path match group 1 prefix match re search '--prefix \\S* ' version output if prefix match is not None return prefix match group 1 + '/conf/nginx conf' return '/etc/nginx/nginx conf'
def can list access key secret key if not access key and secret key return Falsetry connect s3 access key secret key get all buckets except exception S3 Response Error return Falsereturn True
def normalize keys upper data return dict key upper val for key val in data items
def http request url method 'GET' headers None data None req requests request method url headers headers data data ret default ret ok status METHOD OK STATUS get method 200 if req status code ok status ret update {'comment' req json get 'error' '' } return retret update {'result' True 'out' req json if method 'DELETE' else None } return ret
def est time to hour cluster summary now None if now is None now datetime utcnow timeline getattr getattr cluster summary 'status' None 'timeline' None creationdatetime getattr timeline 'creationdatetime' None if creationdatetime start iso 8601 to datetime creationdatetime else return timedelta minutes 60 run time now - start return timedelta seconds - run time seconds % 3600 0 or 3600 0
def est time to hour cluster summary now None if now is None now datetime utcnow timeline getattr getattr cluster summary 'status' None 'timeline' None creationdatetime getattr timeline 'creationdatetime' None if creationdatetime start iso 8601 to datetime creationdatetime else return timedelta minutes 60 run time now - start return timedelta seconds - run time seconds % 3600 0 or 3600 0
def est time to hour cluster summary now None if now is None now datetime utcnow timeline getattr getattr cluster summary 'status' None 'timeline' None creationdatetime getattr timeline 'creationdatetime' None if creationdatetime start iso 8601 to datetime creationdatetime else return timedelta minutes 60 run time now - start return timedelta seconds - run time seconds % 3600 0 or 3600 0
def Get Secret File secret if sys platform startswith 'linux' if secret not in tempfile map f tempfile Temporary File set close exec f fileno f write Get Secret secret f flush tempfile map[secret] freturn '/dev/fd/%d' % tempfile map[secret] fileno else if secret not in tempfile map name tempfile mkstemp with open name 'w' as f f write Get Secret secret tempfile map[secret] nameatexit register os remove name return tempfile map[secret]
def Get Secret File secret if sys platform startswith 'linux' if secret not in tempfile map f tempfile Temporary File set close exec f fileno f write Get Secret secret f flush tempfile map[secret] freturn '/dev/fd/%d' % tempfile map[secret] fileno else if secret not in tempfile map name tempfile mkstemp with open name 'w' as f f write Get Secret secret tempfile map[secret] nameatexit register os remove name return tempfile map[secret]
def Get Secret File secret if sys platform startswith 'linux' if secret not in tempfile map f tempfile Temporary File set close exec f fileno f write Get Secret secret f flush tempfile map[secret] freturn '/dev/fd/%d' % tempfile map[secret] fileno else if secret not in tempfile map name tempfile mkstemp with open name 'w' as f f write Get Secret secret tempfile map[secret] nameatexit register os remove name return tempfile map[secret]
def test instantiate regression yaml "{'a' &test obj pylearn 2 config tests test yaml parse Dum Dum{} 'b' *test}"obj load yaml assert obj['a'] is obj['b']
def test instantiate regression yaml "{'a' &test obj pylearn 2 config tests test yaml parse Dum Dum{} 'b' *test}"obj load yaml assert obj['a'] is obj['b']
def test instantiate regression yaml "{'a' &test obj pylearn 2 config tests test yaml parse Dum Dum{} 'b' *test}"obj load yaml assert obj['a'] is obj['b']
def test instantiate regression yaml "{'a' &test obj pylearn 2 config tests test yaml parse Dum Dum{} 'b' *test}"obj load yaml assert obj['a'] is obj['b']
def convert etree element to topic entry element topic Topic invalid topic Truetopic element entry element find ' /atom content/sb Topic Description' etree sb feed namespaces if topic element is not None mappings [ ' Default Message Time To Live' 'default message time to live' None ' Max Size In Megabytes' 'max size in megabytes' int ' Requires Duplicate Detection' 'requires duplicate detection' parse bool ' Duplicate Detection History Time Window' 'duplicate detection history time window' None ' Enable Batched Operations' 'enable batched operations' parse bool ' Size In Bytes' 'size in bytes' int ]for map in mappings if read etree element topic element map[ 0 ] topic map[ 1 ] map[ 2 ] invalid topic Falseif invalid topic raise Azure Service Bus Resource Not Found ERROR TOPIC NOT FOUND for name value in E Tree Xml To Object get entry properties from element entry element True items setattr topic name value return topic
def convert etree element to topic entry element topic Topic invalid topic Truetopic element entry element find ' /atom content/sb Topic Description' etree sb feed namespaces if topic element is not None mappings [ ' Default Message Time To Live' 'default message time to live' None ' Max Size In Megabytes' 'max size in megabytes' int ' Requires Duplicate Detection' 'requires duplicate detection' parse bool ' Duplicate Detection History Time Window' 'duplicate detection history time window' None ' Enable Batched Operations' 'enable batched operations' parse bool ' Size In Bytes' 'size in bytes' int ]for map in mappings if read etree element topic element map[ 0 ] topic map[ 1 ] map[ 2 ] invalid topic Falseif invalid topic raise Azure Service Bus Resource Not Found ERROR TOPIC NOT FOUND for name value in E Tree Xml To Object get entry properties from element entry element True items setattr topic name value return topic
def filter none **kwargs return dict k v for k v in six iteritems kwargs if v is not None
@processor for Category exact page True def category processor request page settings clear cache products Product objects published for user request user filter page category filters distinct sort options [ slugify option[ 0 ] option[ 1 ] for option in settings SHOP PRODUCT SORT OPTIONS]sort by request GET get u'sort' sort options[ 0 ][ 1 ] if sort options else u'-date added' products paginate products order by sort by request GET get u'page' 1 settings SHOP PER PAGE CATEGORY settings MAX PAGING LINKS products sort by sort bysub categories page category children published child categories Category objects filter id in sub categories return {u'products' products u'child categories' child categories}
@click command u'use' @click argument u'site' def use site sites path u' ' use site sites path sites path
def security group get all context return IMPL security group get all context
def enabled name runas None ret {'name' name 'result' True 'comment' '' 'changes' {}}try plugin enabled salt ['rabbitmq plugin is enabled'] name runas runas except Command Execution Error as err ret['result'] Falseret['comment'] ' Error {0 }' format err return retif plugin enabled ret['comment'] " Plugin'{ 0 }'isalreadyenabled " format name return retif not opts ['test'] try salt ['rabbitmq enable plugin'] name runas runas except Command Execution Error as err ret['result'] Falseret['comment'] ' Error {0 }' format err return retret['changes'] update {'old' '' 'new' name} if opts ['test'] and ret['changes'] ret['result'] Noneret['comment'] " Plugin'{ 0 }'issettobeenabled " format name return retret['comment'] " Plugin'{ 0 }'wasenabled " format name return ret
def cc arg return mcolors to rgba arg alpha 0 6
def generate age issue time td datetime datetime now - issue time age td microseconds + td seconds + td days * 24 * 3600 * 10 ** 6 / 10 ** 6 return unicode type age
def maximal independent set G result set remaining set G while remaining G G subgraph remaining v min remaining key G degree result add v remaining - set G[v] {v} return result
def to unicode obj encoding 'utf- 8 ' force string False if force string and not isinstance obj basestring if hasattr obj ' str ' obj obj str elif hasattr obj ' unicode ' obj obj unicode else obj str obj if isinstance obj basestring and not isinstance obj unicode try obj unicode obj encoding return objexcept Unicode Decode Error for alt encoding in ENCODINGS try obj unicode obj alt encoding return objexcept Unicode Decode Error passraise Exception " Error '%s'containsinvalidcharacter s notin%s " % obj encoding return obj
def opt factory name default value desc type help '' tabid '' option klasses {BOOL Bool Option INT Integer Option POSITIVE INT Positive Integer Option FLOAT Float Option STRING String Option URL URL Option URL LIST URL List Option IPPORT IP Port Option LIST List Option REGEX Regex Option COMBO Combo Option INPUT FILE Input File Option OUTPUT FILE Output File Option PORT Port Option IP IP Option}return option klasses[ type] name default value desc help help tabid tabid
def test grouped copy T1 for masked in False True t1 Table T1 masked masked tg t1 group by 'a' tgc tg copy assert np all tgc groups indices tg groups indices assert np all tgc groups keys tg groups keys tac tg['a'] copy assert np all tac groups indices tg['a'] groups indices c1 t1 ['a'] copy gc 1 c1 group by t1 ['a'] gc 1 c gc 1 copy assert np all gc 1 c groups indices np array [0 1 4 8]
def tidy fragment text options None keep doc False document errors tidy document text options keep doc match RE BODY search document if match document match group 1 strip return document errors else raise Value Error 'tidy fragmentfailedtoprocesstext'
def mostfunc lhs func X None fterms [tmp for tmp in lhs atoms func if not X or X is Symbol and X in tmp free symbols or not X is Symbol and tmp has X ]if len fterms 1 return fterms[ 0 ]elif fterms return max list ordered fterms key lambda x x count func return None
def require change password self if 'desktop auth backend Allow First User Django Backend' in desktop conf AUTH BACKEND get and self first login and desktop conf AUTH CHANGE DEFAULT PASSWORD get return True
def toset thing if thing is None return set if isinstance thing six string types return set thing try return set str x for x in thing except Type Error return set str thing
def toset thing if thing is None return set if isinstance thing six string types return set thing try return set str x for x in thing except Type Error return set str thing
def circle perimeter aa r c radius shape None return circle perimeter aa r c radius shape
@deprecated since u' 1 3' message DEPRECATION MESSAGE alternative u' func `~astropy coordinates matrix utilities angle axis`' def angle axis matrix m np asmatrix matrix return matrix utilities angle axis m view np ndarray
def haddr to int addr try return int addr replace ' ' '' 16 except raise Value Error
def ansi expand style cmap for key val in list cmap items if key 'NO COLOR' continueelif len val 0 cmap[ 'BOLD ' + key ] '1 'cmap[ 'UNDERLINE ' + key ] '4 'cmap[ 'BOLD UNDERLINE ' + key ] '1 4'cmap[ 'BACKGROUND ' + key ] valelse cmap[ 'BOLD ' + key ] '1 ' + val cmap[ 'UNDERLINE ' + key ] '4 ' + val cmap[ 'BOLD UNDERLINE ' + key ] '1 4 ' + val cmap[ 'BACKGROUND ' + key ] val replace '38 ' '48 ' 1
def ansi expand style cmap for key val in list cmap items if key 'NO COLOR' continueelif len val 0 cmap[ 'BOLD ' + key ] '1 'cmap[ 'UNDERLINE ' + key ] '4 'cmap[ 'BOLD UNDERLINE ' + key ] '1 4'cmap[ 'BACKGROUND ' + key ] valelse cmap[ 'BOLD ' + key ] '1 ' + val cmap[ 'UNDERLINE ' + key ] '4 ' + val cmap[ 'BOLD UNDERLINE ' + key ] '1 4 ' + val cmap[ 'BACKGROUND ' + key ] val replace '38 ' '48 ' 1
def Setup Sim After fname IOS FNAME fname IOS FNAME BACKUP '%s backup' % fname IOS FNAME TEMP '%s temp' % fname SNAPSHOTS BACKUP PATH os path join SNAPSHOTS PATH IOS FNAME BACKUP ios sim path '/ Users/%s/ Library/ Application Support/i Phone Simulator/%s/' % os environ['USER'] SCHEME['ios'] ios fname path os path join ios sim path IOS FNAME ios fname temp path os path join ios sim path IOS FNAME TEMP try shutil move ios fname path ios fname temp path shutil copytree SNAPSHOTS BACKUP PATH ios fname path shutil rmtree ios fname temp path True None shutil rmtree SNAPSHOTS BACKUP PATH True None except Environment Error as e print ' Anerroroccurredin Setup Sim After %s %s' % fname e raiseelse print ' Setup Sim After %s successful ' % fname return 1
def Setup Sim After fname IOS FNAME fname IOS FNAME BACKUP '%s backup' % fname IOS FNAME TEMP '%s temp' % fname SNAPSHOTS BACKUP PATH os path join SNAPSHOTS PATH IOS FNAME BACKUP ios sim path '/ Users/%s/ Library/ Application Support/i Phone Simulator/%s/' % os environ['USER'] SCHEME['ios'] ios fname path os path join ios sim path IOS FNAME ios fname temp path os path join ios sim path IOS FNAME TEMP try shutil move ios fname path ios fname temp path shutil copytree SNAPSHOTS BACKUP PATH ios fname path shutil rmtree ios fname temp path True None shutil rmtree SNAPSHOTS BACKUP PATH True None except Environment Error as e print ' Anerroroccurredin Setup Sim After %s %s' % fname e raiseelse print ' Setup Sim After %s successful ' % fname return 1
def get iterable **attrs def predicate elem for attr val in attrs items nested attr split ' ' obj elemfor attribute in nested obj getattr obj attribute if obj val return Falsereturn Truereturn find predicate iterable
def get iterable **attrs def predicate elem for attr val in attrs items nested attr split ' ' obj elemfor attribute in nested obj getattr obj attribute if obj val return Falsereturn Truereturn find predicate iterable
def get iterable **attrs def predicate elem for attr val in attrs items nested attr split ' ' obj elemfor attribute in nested obj getattr obj attribute if obj val return Falsereturn Truereturn find predicate iterable
def get iterable **attrs def predicate elem for attr val in attrs items nested attr split ' ' obj elemfor attribute in nested obj getattr obj attribute if obj val return Falsereturn Truereturn find predicate iterable
def submit albums collection id release ids for i in range 0 len release ids SUBMISSION CHUNK SIZE chunk release ids[i i + SUBMISSION CHUNK SIZE ]mb call musicbrainzngs add releases to collection collection id chunk
def get other dvr serviced device owners return [n const DEVICE OWNER LOADBALANCER n const DEVICE OWNER LOADBALANCERV 2 n const DEVICE OWNER DHCP]
def get other dvr serviced device owners return [n const DEVICE OWNER LOADBALANCER n const DEVICE OWNER LOADBALANCERV 2 n const DEVICE OWNER DHCP]
def get other dvr serviced device owners return [n const DEVICE OWNER LOADBALANCER n const DEVICE OWNER LOADBALANCERV 2 n const DEVICE OWNER DHCP]
def remove compiled application folder try shutil rmtree pjoin folder 'compiled' path pjoin folder 'controllers' for file in listdir path ' *\\ pyc$' drop False os unlink file except OS Error pass
def remove compiled application folder try shutil rmtree pjoin folder 'compiled' path pjoin folder 'controllers' for file in listdir path ' *\\ pyc$' drop False os unlink file except OS Error pass
def in a b msg None assert a in b msg or '%rnotin%r' % a b
def freemem extra alloc 0 gc collect gc collect gc collect n mallocs cuda cuda ndarray cuda ndarray outstanding mallocs if hasattr cuda cuda ndarray cuda ndarray 'theano allocated' theano alloc cuda cuda ndarray cuda ndarray theano allocated return ' nmalloc/theanomemallocatedin KB ' n mallocs + extra alloc int theano alloc / 1024 return 'nmalloconthegpu' n mallocs + extra alloc mem info cuda cuda ndarray cuda ndarray mem info gpu used mem info[ 1 ] - mem info[ 0 ] / 1024 ** 2 mem info msg ' nmalloc/gpumemusedin MB 'return mem info msg n mallocs int gpu used
def make singlethread inner func def func *args length len args[ 0 ] result np empty length dtype np float 64 inner func result *args return resultreturn func
def get closest ansi color r g b exclude assert isinstance exclude tuple saturation abs r - g + abs g - b + abs b - r if saturation > 30 exclude + u'ansilightgray' u'ansidarkgray' u'ansiwhite' u'ansiblack' distance 257 * 257 * 3 match u'ansidefault'for name r2 g2 b2 in ANSI COLORS TO RGB items if name u'ansidefault' and name not in exclude d r - r2 ** 2 + g - g2 ** 2 + b - b2 ** 2 if d < distance match namedistance dreturn match
def get Nearest Distance Index point loop smallest Distance 1e+ 18 nearest Distance Index Nonefor point Index in xrange len loop segment Begin loop[point Index]segment End loop[ point Index + 1 % len loop ]distance get Distance To Plane Segment segment Begin segment End point if distance < smallest Distance smallest Distance distancenearest Distance Index Distance Index distance point Index return nearest Distance Index
def create vm None call None if call raise Salt Cloud System Exit ' Youcannotcreateaninstancewith-aor-f ' node info request instance vm if isinstance node info bool raise Salt Cloud System Exit ' Therewasanerrorcreatingthe GC Einstance ' node dict node info[ 0 ]node data node info[ 1 ] ssh user ssh key get ssh credentials vm vm ['ssh host'] get host node data vm vm ['key filename'] ssh key utils ['cloud bootstrap'] vm opts log info " Created Cloud VM'{ 0 [name]}'" format vm log trace "'{ 0 [name]}'V Mcreationdetails \n{ 1 }" format vm pprint pformat node dict utils ['cloud fire event'] 'event' 'createdinstance' 'salt/cloud/{ 0 }/created' format vm ['name'] args {'name' vm ['name'] 'profile' vm ['profile'] 'provider' vm ['driver']} sock dir opts ['sock dir'] transport opts ['transport'] return node dict
def launch reaper id pid from subprocess import Popen PIP Eme file if me endswith ' pyc' me me[ -1 ]myloc os path dirname me if not myloc myloc os getcwd reaper cmd os path join myloc 'run on me or pid quit' Popen [reaper cmd str pid me '--free' str id ] stdout open '/dev/null' 'w'
def launch reaper id pid from subprocess import Popen PIP Eme file if me endswith ' pyc' me me[ -1 ]myloc os path dirname me if not myloc myloc os getcwd reaper cmd os path join myloc 'run on me or pid quit' Popen [reaper cmd str pid me '--free' str id ] stdout open '/dev/null' 'w'
def consume iterator deque iterator maxlen 0
def survey get Template From Series series id s3 db current s3 dbstable s3 db survey seriesttable s3 db survey templatequery stable id series id & ttable id stable template id row current db query select ttable ALL limitby 0 1 first return row
def survey get Template From Series series id s3 db current s3 dbstable s3 db survey seriesttable s3 db survey templatequery stable id series id & ttable id stable template id row current db query select ttable ALL limitby 0 1 first return row
def get authenticated user auth provider username uid match models Django Storage user get social auth provider auth provider backend name uid uid if not match or match user username username raise User Does Not Existuser match useruser backend auth provider get authentication backend return user
def fiducials subject None fid file None subjects dir None check mayavi version from backend import check backend check backend from fiducials gui import Fiducials Framegui Fiducials Frame subject subjects dir fid file fid file gui configure traits return gui
def meta nonempty x if isinstance x pd Index return nonempty index x elif isinstance x pd Series idx nonempty index x index return nonempty series x idx elif isinstance x pd Data Frame idx nonempty index x index data {i nonempty series x iloc[ i] idx for i c in enumerate x columns }res pd Data Frame data index idx columns np arange len x columns res columns x columnsreturn reselif is scalar x return nonempty scalar x else raise Type Error ' Expected Index Series Data Frame orscalar got{ 0 }' format type x name
def meta nonempty x if isinstance x pd Index return nonempty index x elif isinstance x pd Series idx nonempty index x index return nonempty series x idx elif isinstance x pd Data Frame idx nonempty index x index data {i nonempty series x iloc[ i] idx for i c in enumerate x columns }res pd Data Frame data index idx columns np arange len x columns res columns x columnsreturn reselif is scalar x return nonempty scalar x else raise Type Error ' Expected Index Series Data Frame orscalar got{ 0 }' format type x name
def logger name from path path return name from project path path None LOGGER TEMPLATE
def logger name from path path return name from project path path None LOGGER TEMPLATE
def diff f *symbols **kwargs kwargs setdefault 'evaluate' True try return f eval diff *symbols **kwargs except Attribute Error passreturn Derivative f *symbols **kwargs
def enable microsites pre startup log if is feature enabled BACKEND enable microsites pre startup log
def enable microsites pre startup log if is feature enabled BACKEND enable microsites pre startup log
def skip If DB Feature *features return deferred Skip lambda any getattr connection features feature False for feature in features ' Databasehasfeature s %s' % ' ' join features
def Gompertz name b eta return rv name Gompertz Distribution b eta
def Test Remove Viewpoint tester user cookie request dict validator tester validator user id device id tester Get Ids From Cookie user cookie request dict deepcopy request dict viewpoint id request dict['viewpoint id']actual dict tester Send Request 'remove viewpoint' user cookie request dict op dict tester Derive Notification Op Dict user id device id request dict request dict['user id'] user idfollower validator Get Model Object Follower DB Key user id viewpoint id if not follower Is Removed labels follower labels union [ Follower REMOVED] validator Validate Update DB Object Follower user id user id viewpoint id viewpoint id labels labels invalidate {'viewpoints' [{'viewpoint id' viewpoint id 'get attributes' True}]}validator Validate Notification 'remove viewpoint' user id op dict invalidate viewpoint id viewpoint id validator Validate Viewpoint Accounting viewpoint id tester Compare Response Dicts 'remove viewpoint' user id request dict {} actual dict return actual dict
def Put Secret secret secret value Get Secrets Manager For Secret secret Put Secret secret secret value
def test seed same skip if no scipy rng np random Random State [1 2 3] seed rng randint 2147462579 dim 3mu rng randn dim rank dim X rng randn rank dim cov np dot X T X mnd 1 MND sigma cov mu mu seed seed num samples 5rd 1 mnd 1 random design matrix num samples rd 1 function [] rd 1 mnd 2 MND sigma cov mu mu seed seed rd 2 mnd 2 random design matrix num samples rd 2 function [] rd 2 assert np all rd 1 rd 2
def test seed same skip if no scipy rng np random Random State [1 2 3] seed rng randint 2147462579 dim 3mu rng randn dim rank dim X rng randn rank dim cov np dot X T X mnd 1 MND sigma cov mu mu seed seed num samples 5rd 1 mnd 1 random design matrix num samples rd 1 function [] rd 1 mnd 2 MND sigma cov mu mu seed seed rd 2 mnd 2 random design matrix num samples rd 2 function [] rd 2 assert np all rd 1 rd 2
def api github v1 user profile event payload branches stream **kwargs commit stream streamissue stream 'issues'return api github v2 user profile event payload branches stream commit stream issue stream **kwargs
def full archive path config obj cli config lineagename if config obj and 'archive dir' in config obj return config obj['archive dir']else return os path join cli config default archive dir lineagename
def full archive path config obj cli config lineagename if config obj and 'archive dir' in config obj return config obj['archive dir']else return os path join cli config default archive dir lineagename
def connect action bool action fn action triggered[bool] connect fn
def prepare routes def expand route route if isinstance route Mapping list tuple return Map Route route if isinstance route string t return mlazy expand router string route return routeif routes is None return if not isinstance routes list tuple routes routes return [expand route route for route in routes]
def add Y Intersection Path To List path Index point Index y y Intersection y Intersection Paths if y Intersection None returny Intersection Path Y Intersection Path path Index point Index y Intersection y Intersection Path y Minus Center y Intersection - y y Intersection Paths append y Intersection Path
def form ntuples from machines machines n 2 mapping func default mappings ntuples [] mappings failures mapping func machines for key in mappings key machines mappings[key]total machines len key machines while len key machines > n ntuples append key machines[ 0 n] key machines key machines[n ]for mach in key machines failures append mach 'machinecannotbetupled' return ntuples failures
def form ntuples from machines machines n 2 mapping func default mappings ntuples [] mappings failures mapping func machines for key in mappings key machines mappings[key]total machines len key machines while len key machines > n ntuples append key machines[ 0 n] key machines key machines[n ]for mach in key machines failures append mach 'machinecannotbetupled' return ntuples failures
def dfs postorder nodes G source None post v for u v d in nx dfs labeled edges G source source if d 'reverse' return post
def delete exploration committer id exploration id force deletion False exploration rights model exp models Exploration Rights Model get exploration id exploration rights model delete committer id '' force deletion force deletion exploration model exp models Exploration Model get exploration id exploration model delete committer id feconf COMMIT MESSAGE EXPLORATION DELETED force deletion force deletion exploration memcache key get exploration memcache key exploration id memcache services delete exploration memcache key delete documents from search index [exploration id] delete exploration summary exploration id activity services remove featured activity feconf ACTIVITY TYPE EXPLORATION exploration id
def delete exploration committer id exploration id force deletion False exploration rights model exp models Exploration Rights Model get exploration id exploration rights model delete committer id '' force deletion force deletion exploration model exp models Exploration Model get exploration id exploration model delete committer id feconf COMMIT MESSAGE EXPLORATION DELETED force deletion force deletion exploration memcache key get exploration memcache key exploration id memcache services delete exploration memcache key delete documents from search index [exploration id] delete exploration summary exploration id activity services remove featured activity feconf ACTIVITY TYPE EXPLORATION exploration id
def package finder argv try command Install Command except Type Error from pip baseparser import create main parsercommand Install Command create main parser options loads dumps command parser parse args argv possible options ['find links' FORMAT CONTROL ARG 'allow external' 'allow unverified' 'allow all external' 'allow all prereleases' 'pre' 'process dependency links']kwargs {}for option in possible options kw attr option if isinstance option tuple else option option value getattr options attr MARKER if value is not MARKER kwargs[kw] valueindex urls [options index url] + options extra index urls if options no index index urls []index urls + getattr options 'mirrors' [] if hasattr command ' build session' kwargs['session'] command build session options return Package Finder index urls index urls **kwargs
def package finder argv try command Install Command except Type Error from pip baseparser import create main parsercommand Install Command create main parser options loads dumps command parser parse args argv possible options ['find links' FORMAT CONTROL ARG 'allow external' 'allow unverified' 'allow all external' 'allow all prereleases' 'pre' 'process dependency links']kwargs {}for option in possible options kw attr option if isinstance option tuple else option option value getattr options attr MARKER if value is not MARKER kwargs[kw] valueindex urls [options index url] + options extra index urls if options no index index urls []index urls + getattr options 'mirrors' [] if hasattr command ' build session' kwargs['session'] command build session options return Package Finder index urls index urls **kwargs
def step runner environ from lettuce import registryregistry clear @step ' Ihaveadefinedstep' def have a defined step *args **kw assert True@step 'otherstepfails' def and another *args **kw assert False ' Itshouldfail'@step 'defineastep' def define a step *args **kw assert True@step u' When Ihaveastepthatraisesanexception' def raises exception step raise Exception @step ' Ihaveastepwhichcallsthe" * "stepwithbehave as' def runs some other step with behave as step something else step behave as ' When% i do something else s' % {'i do something else' something else}
def step runner environ from lettuce import registryregistry clear @step ' Ihaveadefinedstep' def have a defined step *args **kw assert True@step 'otherstepfails' def and another *args **kw assert False ' Itshouldfail'@step 'defineastep' def define a step *args **kw assert True@step u' When Ihaveastepthatraisesanexception' def raises exception step raise Exception @step ' Ihaveastepwhichcallsthe" * "stepwithbehave as' def runs some other step with behave as step something else step behave as ' When% i do something else s' % {'i do something else' something else}
def has uncommitted files uncommitted files subprocess check output GIT IS DIRTY CMD split '' return bool len uncommitted files
def compare Attribute Key Ascending key other Key if key 'id' return -1 if other Key 'id' return 1if key 'name' return -1 if other Key 'name' return 1if key < other Key return -1 return int key > other Key
def render template template **context if current user is authenticated and current user theme theme current user themeelse theme session get 'theme' flaskbb config['DEFAULT THEME'] return render theme template theme template **context
def render template template **context if current user is authenticated and current user theme theme current user themeelse theme session get 'theme' flaskbb config['DEFAULT THEME'] return render theme template theme template **context
def render template template **context if current user is authenticated and current user theme theme current user themeelse theme session get 'theme' flaskbb config['DEFAULT THEME'] return render theme template theme template **context
def setup platform hass config add devices discovery info None from amcrest import Amcrest Cameracamera Amcrest Camera config get CONF HOST config get CONF PORT config get CONF USERNAME config get CONF PASSWORD camerapersistent notification loader get component 'persistent notification' try camera current timeexcept Connect Timeout HTTP Error as ex LOGGER error ' Unabletoconnectto Amcrestcamera %s' str ex persistent notification create hass ' Error {}<br/> Youwillneedtorestarthassafterfixing ' format ex title NOTIFICATION TITLE notification id NOTIFICATION ID return Falsesensors []for sensor type in config get CONF MONITORED CONDITIONS sensors append Amcrest Sensor config camera sensor type add devices sensors True return True
def find address range addresses first last addresses[ 0 ]for ip in addresses[ 1 ] if ip ip last ip + 1 last ipelse breakreturn first last
def url prefix mat return '/' + mat string[ mat start ] strip '/'
def get profile id service domain accounts service management accounts list execute account ids [a['id'] for a in accounts get 'items' ]for account id in account ids webproperties service management webproperties list account Id account id execute webproperty ids [p['id'] for p in webproperties get 'items' ]for webproperty id in webproperty ids profiles service management profiles list account Id account id web Property Id webproperty id execute for p in profiles get 'items' if ' //' in p['website Url'] name p['website Url'] partition ' //' [ -1 ]else name p['website Url']if name domain return p['id']
def nice join seq sep ' ' seq [str x for x in seq]if len seq < 1 return sep join seq else return '%sor%s' % sep join seq[ -1 ] seq[ -1 ]
def nice join seq sep ' ' seq [str x for x in seq]if len seq < 1 return sep join seq else return '%sor%s' % sep join seq[ -1 ] seq[ -1 ]
def nice join seq sep ' ' seq [str x for x in seq]if len seq < 1 return sep join seq else return '%sor%s' % sep join seq[ -1 ] seq[ -1 ]
def nice join seq sep ' ' seq [str x for x in seq]if len seq < 1 return sep join seq else return '%sor%s' % sep join seq[ -1 ] seq[ -1 ]
def nice join seq sep ' ' seq [str x for x in seq]if len seq < 1 return sep join seq else return '%sor%s' % sep join seq[ -1 ] seq[ -1 ]
def create url hostname port None is Secure False if port is not None netloc '%s %d' % hostname port elif is Secure netloc u'{} 443 ' format hostname else netloc u'{} 80 ' format hostname if is Secure scheme u'rss'else scheme u'rs'return u'{} //{}' format scheme netloc
def lookup connections backend identities if isinstance backend string types backend Backend objects get or create name backend connections []for identity in identities connection backend connection set get or create identity identity connections append connection return connections
def get timeline data doctype name from frappe desk form load import get communication datadata get communication data doctype name fields u'unix timestamp date creation count name ' after add years None -1 strftime u'%Y-%m-%d' limit 366 group by u'groupbydate creation ' as dict False return dict data
def pyramid soap 11 application services tns 'spyne simple soap' validator None name None from spyne protocol soap import Soap 11 from spyne server pyramid import Pyramid Applicationapplication Application services tns name name in protocol Soap 11 validator validator out protocol Soap 11 return Pyramid Application application
def pyramid soap 11 application services tns 'spyne simple soap' validator None name None from spyne protocol soap import Soap 11 from spyne server pyramid import Pyramid Applicationapplication Application services tns name name in protocol Soap 11 validator validator out protocol Soap 11 return Pyramid Application application
def validate row app id row zookeeper db access row key row keys [0 ]entity row values [0 ]if APP ENTITY SCHEMA[ 1 ] not in entity return rowrow txn long entity[APP ENTITY SCHEMA[ 1 ]] valid txn zookeeper get valid transaction id app id row txn row key if row txn valid txn return rowif valid txn 0 return Nonepadded version str valid txn zfill ID KEY LENGTH journal key dbconstants KEY DELIMITER join [row key padded version] journal results db access batch get entity dbconstants JOURNAL TABLE [journal key] dbconstants JOURNAL SCHEMA journal row journal results[journal key]if dbconstants JOURNAL SCHEMA[ 0 ] not in journal row return Nonevalid entity journal row[dbconstants JOURNAL SCHEMA[ 0 ]]return {row key {APP ENTITY SCHEMA[ 0 ] valid entity APP ENTITY SCHEMA[ 1 ] str valid txn }}
def get changed files if not ci diff helper return Nonetry config ci diff helper get config except OS Error return Nonechanged files ci diff helper get changed files 'HEAD' config base changed files set [' /{}' format filename for filename in changed files] return changed files
def test install package with root script data root dir script scratch path / 'root' result script pip 'install' '--root' root dir '-f' data find links '--no-index' 'simple 1 0' normal install path script base path / script site packages / 'simple- 1 0-py%s egg-info' % pyversion from distutils util import change rootroot path change root os path join script scratch 'root' normal install path assert root path in result files created str result
def test install package with root script data root dir script scratch path / 'root' result script pip 'install' '--root' root dir '-f' data find links '--no-index' 'simple 1 0' normal install path script base path / script site packages / 'simple- 1 0-py%s egg-info' % pyversion from distutils util import change rootroot path change root os path join script scratch 'root' normal install path assert root path in result files created str result
def make lpdf mu sigma x T matrix mu theano shared mu a x dimshuffle 0 'x' 1 - mu dimshuffle 'x' 0 1 / sigma E log mean exp -0 5 * a ** 2 sum 2 Z mu shape[ 1 ] * T log sigma * numpy sqrt numpy pi * 2 return theano function [x] E - Z
def make lpdf mu sigma x T matrix mu theano shared mu a x dimshuffle 0 'x' 1 - mu dimshuffle 'x' 0 1 / sigma E log mean exp -0 5 * a ** 2 sum 2 Z mu shape[ 1 ] * T log sigma * numpy sqrt numpy pi * 2 return theano function [x] E - Z
def make lpdf mu sigma x T matrix mu theano shared mu a x dimshuffle 0 'x' 1 - mu dimshuffle 'x' 0 1 / sigma E log mean exp -0 5 * a ** 2 sum 2 Z mu shape[ 1 ] * T log sigma * numpy sqrt numpy pi * 2 return theano function [x] E - Z
def relevent issue issue after return closed issue issue after and issue completed issue and issue section issue
def after function annotate False def decorated matcher def make matcher *args **kwargs return After Preprocessing function matcher *args **kwargs annotate annotate return make matcherreturn decorated
def after function annotate False def decorated matcher def make matcher *args **kwargs return After Preprocessing function matcher *args **kwargs annotate annotate return make matcherreturn decorated
def replace dots in field names document for key value in list document items if isinstance value dict value replace dots in field names value if isinstance key string types and key find ' ' -1 del document[key]document[key replace ' ' ' ' ] valuereturn document
def replace dots in field names document for key value in list document items if isinstance value dict value replace dots in field names value if isinstance key string types and key find ' ' -1 del document[key]document[key replace ' ' ' ' ] valuereturn document
def find dependent monitors monitors monitor names last iteration count 0while len monitor names last iteration count last iteration count len monitor names for mon in monitors for auditor in mon auditors for support index in auditor support auditor indexes if support index in monitor names and mon watcher index not in monitor names monitor names append mon watcher index for support index in auditor support watcher indexes if support index in monitor names and mon watcher index not in monitor names monitor names append mon watcher index return monitor names
def at initial setup modname settings AT INITIAL SETUP HOOK MODUL Eif not modname returntry mod import modname fromlist [ None] except Import Error Value Error returnlogger log info ' Runningat initial setup hook ' if mod dict get 'at initial setup' None mod at initial setup
def copy descriptor descriptor newname None if newname is None newname descriptor nameif descriptor is discrete newf Orange data Discrete Variable newname values descriptor values base value descriptor base value ordered descriptor ordered newf attributes dict descriptor attributes elif descriptor is continuous newf Orange data Continuous Variable newname newf number of decimals descriptor number of decimalsnewf attributes dict descriptor attributes else newf type descriptor newname newf attributes dict descriptor attributes return newf
def new extension name value critical 0 issuer None pyfree 1 if name 'subject Key Identifier' and value strip '0123456789 abcdef ABCDEF ' is not '' raise salt exceptions Salt Invocation Error 'valuemustbeprecomputedhash' try ctx M2 Crypto m2 x509 v 3 set nconf fix ctx ctx issuer if ctx is None raise Memory Error ' Notenoughmemorywhencreatinganew X 509 extension' x509 ext ptr M2 Crypto m2 x509 v 3 ext conf None ctx name value lhash Noneexcept Attribute Error lhash M2 Crypto m2 x509 v 3 lhash ctx M2 Crypto m2 x509 v 3 set conf lhash lhash fix ctx ctx issuer x509 ext ptr M2 Crypto m2 x509 v 3 ext conf lhash ctx name value if x509 ext ptr is None raise M2 Crypto X509 X509 Error " Cannotcreate X 509 Extensionwithname'{ 0 }'andvalue'{ 1 }'" format name value x509 ext M2 Crypto X509 X509 Extension x509 ext ptr pyfree x509 ext set critical critical return x509 ext
def set modified on f from olympia amo tasks import set modified on object@functools wraps f def wrapper *args **kw objs kw pop 'set modified on' None result f *args **kw if objs and result for obj in objs task log info ' Delayingsettingmodifiedonobject %s %s' % obj class name obj pk set modified on object apply async args [obj] kwargs None eta datetime datetime now + datetime timedelta seconds settings NFS LAG DELAY return resultreturn wrapper
def mkdirs path if not os path isdir path try os makedirs path except OS Error as err if err errno errno EEXIST or not os path isdir path raise
def Zero Pad addr string chunks addr string split ' ' total length len chunks if total length > 8 raise socket error ' Toomanyaddresschunksin%s expected 8 ' % addr string double colon Falseaddr array []for chunk in chunks if chunk chunk len len chunk if chunk len > 4 raise socket error ' Chunkmustbelength 4 %s' % addr string if chunk len 4 chunk '0 ' * 4 - chunk len + chunk addr array append chunk elif double colon raise socket error ' Morethanonedoublecolonin%s' % addr string else double colon Trueaddr array extend [' 0000 '] * 8 - total length + 1 if len addr array 8 raise socket error ' Badaddresslength expected 8 chunks %s' % addr array return '' join addr array
def make overload method template typ attr overload func return make overload attribute template typ attr overload func base Overload Method Template
def add like obj user obj type apps get model 'contenttypes' ' Content Type' objects get for model obj with atomic like created Like objects get or create content type obj type object id obj id user user if like project is not None like project refresh totals return like
def Get Remote App Id servername path auth func rpc server factory appengine rpc Http Rpc Server rtok None secure False save cookies False server rpc server factory servername auth func Get User Agent Get Source Name save cookies save cookies debug data False secure secure app id Get Remote App Id From Server server path rtok return app id server
def get repo info alias repos cfg None try meta dict repos cfg or get configured repos items alias meta['alias'] aliasfor key val in six iteritems meta if val in [' 0 ' '1 '] meta[key] int meta[key] 1 elif val 'NONE' meta[key] Nonereturn metaexcept Value Error configparser No Section Error return {}
def dict to keyval value key base None val iter key func None None if isinstance value dict val iter six iteritems value key func lambda k key base + ' ' + k if key base else k elif isinstance value tuple list val iter enumerate value key func lambda k key base + '[%d]' % k if val iter for k v in val iter key gen key func k if isinstance v dict or isinstance v tuple list for key gen v in dict to keyval v key gen yield key gen v else yield key gen v
def is shell needed for subprocess calls return os name u'nt'
def get object data position obj end opts dummy obj size UNPACK INT data[position position + 4 ] [0 ]end position + obj size - 1 if data[end position + obj size ] '\x 00 ' raise Invalid BSON 'badeoo' if end > obj end raise Invalid BSON 'invalidobjectlength' if raw document class opts document class return opts document class data[position end + 1 ] opts position + obj size obj elements to dict data position + 4 end opts position + obj sizeif '$ref' in obj return DB Ref obj pop '$ref' obj pop '$id' None obj pop '$db' None obj position return obj position
def connected return {'out' proxy ['napalm ping'] }
def test redirect Client get '/' redirect shortcuts redirect 'home' assert redirect[' Location'] '/en-US/firefox/'
def effective get get None collection None collection get collection default get if collection else None return get or globals get 'get' or collection get
def effective get get None collection None collection get collection default get if collection else None return get or globals get 'get' or collection get
def effective get get None collection None collection get collection default get if collection else None return get or globals get 'get' or collection get
def remove excess padding text text re sub '^\\n' '' text text re sub '\\n$' '' text return text
def overridable property name doc None getter name intern 'get ' + name setter name intern 'set ' + name return property lambda self getattr self getter name lambda self value getattr self setter name value None doc
def overridable property name doc None getter name intern 'get ' + name setter name intern 'set ' + name return property lambda self getattr self getter name lambda self value getattr self setter name value None doc
def overridable property name doc None getter name intern 'get ' + name setter name intern 'set ' + name return property lambda self getattr self getter name lambda self value getattr self setter name value None doc
def overridable property name doc None getter name intern 'get ' + name setter name intern 'set ' + name return property lambda self getattr self getter name lambda self value getattr self setter name value None doc
def decrypt object obj if isinstance obj six string types return fetch secret obj elif isinstance obj dict for pass key pass path in six iteritems obj obj[pass key] decrypt object pass path elif isinstance obj list for pass key pass path in enumerate obj obj[pass key] decrypt object pass path return obj
def warn deprecated since message '' name '' alternative '' pending False obj type 'attribute' addendum '' message generate deprecation message since message name alternative pending obj type warnings warn message mpl Deprecation stacklevel 1
@frappe whitelist def get app list out {}installed frappe get installed apps for app in frappe get all apps True app hooks frappe get hooks app name app if app not in installed and app hooks get u'hide in installer' continueout[app] {}for key in u'app name' u'app title' u'app description' u'app icon' u'app publisher' u'app version' u'app url' u'app color' val app hooks get key or [] out[app][key] val[ 0 ] if len val else u'' if app in installed out[app][u'installed'] 1for app from list in get app listing values if app from list app name in out out[app from list app name] update app from list elif not frappe conf disallow app listing out[app from list app name] app from listreturn out
def get options ret None attrs {'host' 'host' 'port' 'port' 'db' 'db' 'user' 'user' 'password' 'password'} options salt returners get returner options virtualname ret attrs salt salt opts opts return options
def const compare digest backport a b result abs len a - len b for l r in zip bytearray a bytearray b result l ^ r return result 0
def lsb release info return distro lsb release info
def is valid url url validate URL Validator try validate url return Trueexcept Validation Error return False
def Register Utility utility name version mapping None def Method Decorator utility method version ' Decoratesamethodintheutilityclass 'registry name '%s/%s' % utility name version if version else utility name @wraps utility method def Wrapper *args **kwargs with UTILITY LOCK utility registry Add registry name return utility method *args **kwargs return Wrapperdef Class Decorator cls ' Decoratesautilityclass 'for name method in inspect getmembers cls inspect ismethod if not name startswith ' ' if not getattr method ' self ' None setattr cls name Method Decorator method version mapping get name if version mapping else None return clsreturn Class Decorator
def add X Intersections From Loops loops x Intersections y for loop in loops add X Intersections loop x Intersections y
def get expr vars operator if operator type lo VARIABLE return [ operator data operator size ]else vars []for arg in operator args vars + get expr vars arg return vars
def alpha max emp cov A np copy emp cov A flat[ A shape[ 0 ] + 1 ] 0return np max np abs A
def get storage storage class cached load u'SHUUP BASKET STORAGE CLASS SPEC' return storage class
def cg simp e if isinstance e Add return cg simp add e elif isinstance e Sum return cg simp sum e elif isinstance e Mul return Mul *[cg simp arg for arg in e args] elif isinstance e Pow return Pow cg simp e base e exp else return e
def cg simp e if isinstance e Add return cg simp add e elif isinstance e Sum return cg simp sum e elif isinstance e Mul return Mul *[cg simp arg for arg in e args] elif isinstance e Pow return Pow cg simp e base e exp else return e
def cg simp e if isinstance e Add return cg simp add e elif isinstance e Sum return cg simp sum e elif isinstance e Mul return Mul *[cg simp arg for arg in e args] elif isinstance e Pow return Pow cg simp e base e exp else return e
def enhance info description info line length 50 paragraphs info['description'] split '\n\n' lines [paragraph replace '\n' '' for paragraph in paragraphs]text '\n' join lines info['files'] [ info['file'] + ' ' + info['ext'] ]regex '[t T]he ? file image [\\w\\/]+\\ \\w+ 'for name in re findall regex text if name not in info['files'] info['files'] append name folder ' ' join info['source'] split sep [ -1 ] + ' ' text re sub ' [t T]he ? file image [\\w\\/]+\\ \\w+ ' '\\ 1 ref `\\ 2 <$folder$\\ 2 >`' text text text replace '$folder$' folder lines text split '\n' paragraphs [textwrap wrap line line length for line in lines]info['enhanced description'] paragraphs
def certificate create context values return IMPL certificate create context values
def make digest acl credential username password credential username encode 'utf- 8 ' + ' ' + password encode 'utf- 8 ' cred hash b64 encode hashlib sha 1 credential digest strip return username + ' ' + cred hash decode 'utf- 8 '
def set backend name None possible list BACKENDS if name is None names []else names name split ' ' for name in reversed names for backend in list possible if backend NAME name possible remove backend possible insert 0 backend breakelse raise Lookup Error ' Unkownbackend %r' % name if 'null' not in names possible [b for b in possible if b NAME 'null' ] ACTIVE BACKENDS[ ] possible
def make stc data vertices tmin None tstep None subject None if isinstance vertices list and len vertices 2 stc Source Estimate data vertices vertices tmin tmin tstep tstep subject subject elif isinstance vertices np ndarray or isinstance vertices list and len vertices 1 stc Vol Source Estimate data vertices vertices tmin tmin tstep tstep subject subject elif isinstance vertices list and len vertices > 2 stc Mixed Source Estimate data vertices vertices tmin tmin tstep tstep subject subject else raise Value Error 'verticeshastobeeitheralistwithoneormorearraysoranarray' return stc
def test magic parse options ip get ipython path 'c \\x'm Dummy Magics ip opts m parse options '-f%s' % path 'f ' [0 ]if os name 'posix' expected 'c x'else expected pathnt assert equal opts['f'] expected
def test magic parse options ip get ipython path 'c \\x'm Dummy Magics ip opts m parse options '-f%s' % path 'f ' [0 ]if os name 'posix' expected 'c x'else expected pathnt assert equal opts['f'] expected
def test magic parse options ip get ipython path 'c \\x'm Dummy Magics ip opts m parse options '-f%s' % path 'f ' [0 ]if os name 'posix' expected 'c x'else expected pathnt assert equal opts['f'] expected
def confidence Interval Size stdev nbsamples return 2 * 1 98 * stdev / sqrt nbsamples
def get new file id secs usecs divmod time time 1 0 secs usecs int secs int usecs * 1000000 0 return {'machid' get machid 'version' FIFF FIFFC VERSION 'secs' secs 'usecs' usecs}
def find iso sr session host session host reffor sr ref sr rec in session get all refs and recs 'SR' LOG debug 'ISO lookingat SR%s' sr rec if not sr rec['content type'] 'iso' LOG debug 'ISO notisocontent' continueif 'i 18 n-key' not in sr rec['other config'] LOG debug "ISO isocontent type no'i 18 n-key'key" continueif not sr rec['other config']['i 18 n-key'] 'local-storage-iso' LOG debug "ISO isocontent type i18 n-keyvaluenot'local-storage-iso'" continue LOG debug 'ISO SRMATC Hingourcriteria' for pbd ref in sr rec['PB Ds'] LOG debug 'ISO ISO lookingtoseeifitishostlocal' pbd rec session get rec 'PBD' pbd ref if not pbd rec LOG debug 'ISO PBD%sdisappeared' pbd ref continuepbd rec host pbd rec['host']LOG debug 'ISO PB Dmatching want% pbd rec s have% host s' {'pbd rec' pbd rec 'host' host} if pbd rec host host LOG debug 'ISO S Rwithlocal PBD' return sr refreturn None
def get resource docname resource is list if inspect isclass resource class name resource name else class name resource class name class name class name replace ' Resource' '' docname uncamelcase class name '-' if is list and resource name resource name plural docname '%s-list' % docname return docname
def set power state state utils write one line '/sys/power/state' state
def test ast invalid unary op cant compile u' not 234 ' cant compile u' not ' cant compile u' not 234 ' cant compile u' ~2234 ' cant compile u' ~ '
def test ast invalid unary op cant compile u' not 234 ' cant compile u' not ' cant compile u' not 234 ' cant compile u' ~2234 ' cant compile u' ~ '
def test ast invalid unary op cant compile u' not 234 ' cant compile u' not ' cant compile u' not 234 ' cant compile u' ~2234 ' cant compile u' ~ '
def test ast invalid unary op cant compile u' not 234 ' cant compile u' not ' cant compile u' not 234 ' cant compile u' ~2234 ' cant compile u' ~ '
def tropo from tropo import Tropo Sessiontry s Session request body read t Tropo try row id s parameters['row id']table s3 db msg tropo scratchquery table row id row id row db query select first t call to row recipient network row network t say row message outbox s3 db msg outboxdb outbox id row row id update status 2 db query delete return t Render Json except try message s initial Textuuid s idrecipient s to['id']try fromaddress s fromaddress['id']except fromaddress ''reply msg parse message message t say [reply] return t Render Json except raise HTTP 501 except pass
def tropo from tropo import Tropo Sessiontry s Session request body read t Tropo try row id s parameters['row id']table s3 db msg tropo scratchquery table row id row id row db query select first t call to row recipient network row network t say row message outbox s3 db msg outboxdb outbox id row row id update status 2 db query delete return t Render Json except try message s initial Textuuid s idrecipient s to['id']try fromaddress s fromaddress['id']except fromaddress ''reply msg parse message message t say [reply] return t Render Json except raise HTTP 501 except pass
def rax find bootable volume module rax module server exit True cs rax module cloudserverscbs rax module cloud blockstorageserver id rax module utils get id server volumes cs volumes get server volumes server id bootable volumes []for volume in volumes vol cbs get volume if module boolean vol bootable bootable volumes append vol if not bootable volumes if exit module fail json msg ' Nobootablevolumescouldbefoundforserver%s' % server id else return Falseelif len bootable volumes > 1 if exit module fail json msg ' Multiplebootablevolumesfoundforserver%s' % server id else return Falsereturn bootable volumes[ 0 ]
def clear memo cache source d pth os path join settings MEMO DIR domain to filename source domain if os path exists d pth os remove d pth else print 'memofilefor' source domain 'hasalreadybeendeleted '
def coerce to dtype dtype value name dtype nameif name startswith 'datetime 64 ' if name 'datetime 64 [D]' return make datetime 64 D value elif name 'datetime 64 [ns]' return make datetime 64 ns value else raise Type Error " Don'tknowhowtocoercevaluesofdtype%s" % dtype return dtype type value
def cc stats x1 x2 demean True nobs 1 k1 x1 shape nobs 2 k2 x2 shapecc cancorr x1 x2 demean demean cc 2 cc ** 2 lam cc 2 / 1 - cc 2 df model k1 * k2 df resid k1 * nobs 1 - k2 - demean s min df model k1 m 0 5 * df model - k1 n 0 5 * df resid - k1 - 1 df 1 k1 * df model df 2 k2 pt value cc 2 sum wl value np product 1 / 1 + lam ht value lam sum rm value lam max res {}res['canonicalcorrelationcoefficient'] ccres['eigenvalues'] lamres[" Pillai's Trace"] pt valueres[" Wilk's Lambda"] wl valueres[" Hotelling's Trace"] ht valueres[" Roy's Largest Root"] rm valueres['df resid'] df residres['df m'] mreturn res
def cc stats x1 x2 demean True nobs 1 k1 x1 shape nobs 2 k2 x2 shapecc cancorr x1 x2 demean demean cc 2 cc ** 2 lam cc 2 / 1 - cc 2 df model k1 * k2 df resid k1 * nobs 1 - k2 - demean s min df model k1 m 0 5 * df model - k1 n 0 5 * df resid - k1 - 1 df 1 k1 * df model df 2 k2 pt value cc 2 sum wl value np product 1 / 1 + lam ht value lam sum rm value lam max res {}res['canonicalcorrelationcoefficient'] ccres['eigenvalues'] lamres[" Pillai's Trace"] pt valueres[" Wilk's Lambda"] wl valueres[" Hotelling's Trace"] ht valueres[" Roy's Largest Root"] rm valueres['df resid'] df residres['df m'] mreturn res
def tril m k 0 m np asarray m out tri m shape[ 0 ] m shape[ 1 ] k k dtype m dtype char * m return out
def collection creation options return CREATION ONLY OPTION
def collection creation options return CREATION ONLY OPTION
def collection creation options return CREATION ONLY OPTION
def make hidden alias argument table existing name alias name current argument table[existing name]copy arg copy argument argument table existing name alias name copy arg UNDOCUMENTED Trueif current required copy arg required Falsecurrent required Falsecurrent DOCUMENT AS REQUIRED True
def minibatches inputs None targets None batch size None shuffle False assert len inputs len targets if shuffle indices np arange len inputs np random shuffle indices for start idx in range 0 len inputs - batch size + 1 batch size if shuffle excerpt indices[start idx start idx + batch size ]else excerpt slice start idx start idx + batch size yield inputs[excerpt] targets[excerpt]
def stop on read fd triggered clear fdref CF File Descriptor Create None fd False c input callback None CF File Descriptor Enable Call Backs fdref kCF File Descriptor Read Call Back source CF File Descriptor Create Run Loop Source None fdref 0 loop CF Run Loop Get Current CF Run Loop Add Source loop source kCF Run Loop Common Modes CF Release source
def connect host kwargs None call None if call 'function' raise Salt Cloud System Exit ' Theconnect hostfunctionmustbecalledwith-for--function ' host name kwargs get 'host' if kwargs and 'host' in kwargs else None if not host name raise Salt Cloud System Exit ' Youmustspecifynameofthehostsystem ' si get si host ref salt utils vmware get mor by property si vim Host System host name if not host ref raise Salt Cloud System Exit ' Specifiedhostsystemdoesnotexist ' if host ref runtime connection State 'connected' return {host name 'hostsystemalreadyconnected'}try task host ref Reconnect Host Task salt utils vmware wait for task task host name 'connecthost' 5 'info' except Exception as exc log error ' Errorwhileconnectinghost{ 0 } {1 }' format host name exc exc info on loglevel logging DEBUG return {host name 'failedtoconnecthost'}return {host name 'connectedhost'}
def initial state layer dimensions None if dimensions is None return layer initial hidden state if has hidden layer else None else return matrixify layer initial hidden state dimensions if has hidden layer else None
def initial state layer dimensions None if dimensions is None return layer initial hidden state if has hidden layer else None else return matrixify layer initial hidden state dimensions if has hidden layer else None
def load context context file path get context filepath if os path exists file path with io open file path encoding 'utf- 8 ' as f for line in f execute line context
def get children x collection None if collection is None collection random variables node dict {node value node for node in collection}output set [] nodes set [x] while nodes node nodes pop if isinstance node Random Variable node node value candidate node node dict get node None if candidate node and candidate node x output add candidate node else for op in node consumers nodes update op outputs return list output
def password change email user from r2 lib pages import Password Change Emailreturn system email user email Password Change Email user user render style 'email' Email Kind PASSWORD CHANGE user user
def get Minimum first Complex second Complex return complex min first Complex real second Complex real min first Complex imag second Complex imag
def test dont collect non function callable testdir testdir makepyfile '\nclass Oh object \ndef call self \npass\n\ntest a Oh \n\ndeftest real \npass\n' result testdir runpytest '-rw' result stdout fnmatch lines ['*collected 1 item*' 'WC 2 *' '* 1 passed 1pytest-warningsin*']
def test dont collect non function callable testdir testdir makepyfile '\nclass Oh object \ndef call self \npass\n\ntest a Oh \n\ndeftest real \npass\n' result testdir runpytest '-rw' result stdout fnmatch lines ['*collected 1 item*' 'WC 2 *' '* 1 passed 1pytest-warningsin*']
def test dont collect non function callable testdir testdir makepyfile '\nclass Oh object \ndef call self \npass\n\ntest a Oh \n\ndeftest real \npass\n' result testdir runpytest '-rw' result stdout fnmatch lines ['*collected 1 item*' 'WC 2 *' '* 1 passed 1pytest-warningsin*']
def test dont collect non function callable testdir testdir makepyfile '\nclass Oh object \ndef call self \npass\n\ntest a Oh \n\ndeftest real \npass\n' result testdir runpytest '-rw' result stdout fnmatch lines ['*collected 1 item*' 'WC 2 *' '* 1 passed 1pytest-warningsin*']
def test dont collect non function callable testdir testdir makepyfile '\nclass Oh object \ndef call self \npass\n\ntest a Oh \n\ndeftest real \npass\n' result testdir runpytest '-rw' result stdout fnmatch lines ['*collected 1 item*' 'WC 2 *' '* 1 passed 1pytest-warningsin*']
def test dont collect non function callable testdir testdir makepyfile '\nclass Oh object \ndef call self \npass\n\ntest a Oh \n\ndeftest real \npass\n' result testdir runpytest '-rw' result stdout fnmatch lines ['*collected 1 item*' 'WC 2 *' '* 1 passed 1pytest-warningsin*']
def test dont collect non function callable testdir testdir makepyfile '\nclass Oh object \ndef call self \npass\n\ntest a Oh \n\ndeftest real \npass\n' result testdir runpytest '-rw' result stdout fnmatch lines ['*collected 1 item*' 'WC 2 *' '* 1 passed 1pytest-warningsin*']
def test dont collect non function callable testdir testdir makepyfile '\nclass Oh object \ndef call self \npass\n\ntest a Oh \n\ndeftest real \npass\n' result testdir runpytest '-rw' result stdout fnmatch lines ['*collected 1 item*' 'WC 2 *' '* 1 passed 1pytest-warningsin*']
def test dont collect non function callable testdir testdir makepyfile '\nclass Oh object \ndef call self \npass\n\ntest a Oh \n\ndeftest real \npass\n' result testdir runpytest '-rw' result stdout fnmatch lines ['*collected 1 item*' 'WC 2 *' '* 1 passed 1pytest-warningsin*']
def test dont collect non function callable testdir testdir makepyfile '\nclass Oh object \ndef call self \npass\n\ntest a Oh \n\ndeftest real \npass\n' result testdir runpytest '-rw' result stdout fnmatch lines ['*collected 1 item*' 'WC 2 *' '* 1 passed 1pytest-warningsin*']
def test dont collect non function callable testdir testdir makepyfile '\nclass Oh object \ndef call self \npass\n\ntest a Oh \n\ndeftest real \npass\n' result testdir runpytest '-rw' result stdout fnmatch lines ['*collected 1 item*' 'WC 2 *' '* 1 passed 1pytest-warningsin*']
def load router full router path path bits full router path split u' ' if len path bits < 2 raise Improperly Configured u" Theprovidedrouter'%s'isnotacomplete Pythonpathtoa Base Routersubclass " % full router path return import class full router path
def create test message sqs SQS Connection sqs q sqs get queue g sitemap sqs queue assert sqs q 'failedtoconnecttoqueue'message sqs q new message body json dumps {'job name' 'daily-sr-sitemap-reporting' 'location' 's 3 //reddit-data-analysis/big-data/r 2 /prod/' + 'daily sr sitemap reporting/dt 2016 - 06 - 14 ' 'timestamp' current timestamp } sqs q write message
def create test message sqs SQS Connection sqs q sqs get queue g sitemap sqs queue assert sqs q 'failedtoconnecttoqueue'message sqs q new message body json dumps {'job name' 'daily-sr-sitemap-reporting' 'location' 's 3 //reddit-data-analysis/big-data/r 2 /prod/' + 'daily sr sitemap reporting/dt 2016 - 06 - 14 ' 'timestamp' current timestamp } sqs q write message
def Image Header Factory stream from docx image import SIGNATURE Sdef read 32 stream stream seek 0 return stream read 32 header read 32 stream for cls offset signature bytes in SIGNATURES end offset + len signature bytes found bytes header[offset end]if found bytes signature bytes return cls from stream stream raise Unrecognized Image Error
def Image Header Factory stream from docx image import SIGNATURE Sdef read 32 stream stream seek 0 return stream read 32 header read 32 stream for cls offset signature bytes in SIGNATURES end offset + len signature bytes found bytes header[offset end]if found bytes signature bytes return cls from stream stream raise Unrecognized Image Error
def broadcast change res Send Message Timeout HWND BROADCAST WM SETTINGCHANGE 0 0 SMTO ABORTIFHUNG 5000 return not bool res
def index for type try type n normalize type type return INDICES[ type n] except Key Error as ke log warn ' Unknownsearchtype %s' % type return Noop Search Index
def on report to master client id data data['content-length'] stats['content-length']stats['content-length'] 0
def on report to master client id data data['content-length'] stats['content-length']stats['content-length'] 0
def on report to master client id data data['content-length'] stats['content-length']stats['content-length'] 0
def create all dirs path umask False result Trueif sabnzbd WIN 32 try os makedirs path except result Falseelse lst []lst extend path split '/' path ''for d in lst if d path + '/' + d if not os path exists path try os mkdir path result Trueexcept result Falseif umask mask cfg umask if mask try os chmod path int mask 8 448 except passreturn result
def create all dirs path umask False result Trueif sabnzbd WIN 32 try os makedirs path except result Falseelse lst []lst extend path split '/' path ''for d in lst if d path + '/' + d if not os path exists path try os mkdir path result Trueexcept result Falseif umask mask cfg umask if mask try os chmod path int mask 8 448 except passreturn result
def latex check build if sys platform 'win 32 ' if os system 'sphinx-build-blatex-dbuild/doctrees build/latex' raise System Exit ' Building La Te Xfailed ' os chdir 'build/latex' if os system 'make' raise System Exit ' Rendering La Te Xfailed ' os chdir ' / ' else print 'latexbuildhasnotbeentestedonwindows'
def set Up Module global context models adaptercontext {'sys path' sys path[ ] 'sys modules' sys modules copy 'os environ' os environ copy }if init django from pyamf tests adapters django app adapters import modelsfrom pyamf adapters import django db models base as adaptersetup test environment settings DATABASE NAME create test db 0 True
def set Up Module global context models adaptercontext {'sys path' sys path[ ] 'sys modules' sys modules copy 'os environ' os environ copy }if init django from pyamf tests adapters django app adapters import modelsfrom pyamf adapters import django db models base as adaptersetup test environment settings DATABASE NAME create test db 0 True
def selected row view if view selection Mode in [Q Abstract Item View Multi Selection Q Abstract Item View Extended Selection] raise Value Error "invalid'selection Mode'" sel model view selection Model indexes sel model selected Rows if indexes assert len indexes 1 return indexes[ 0 ] row else return None
def only ci decorated func @wraps decorated func def inner func *args **kwds if is running on ci return decorated func *args **kwds return inner func
def only ci decorated func @wraps decorated func def inner func *args **kwds if is running on ci return decorated func *args **kwds return inner func
def restart name sig None proxy fn 'rest sample service restart'return proxy [proxy fn] name
def get votes obj obj type apps get model 'contenttypes' ' Content Type' objects get for model obj try return Votes objects get content type obj type object id obj id countexcept Votes Does Not Exist return 0
def get build id offsets return {'i 386 ' [372 ] 'arm' [372 ] 'thumb' [372 ] 'aarch 64 ' [568 ] 'amd 64 ' [624 372 ] 'powerpc' [372 ] 'powerpc 64 ' [568 ] 'sparc' [372 ] 'sparc 64 ' [624 ]} get context arch []
def get precision currency global cacheif cache is None cache generate cache return cache[currency]
@pytest fixturedef pytyping pytyping pytest importorskip 'typing' return pytyping
def gen jid return '{ 0 %Y%m%d%H%M%S%f}' format datetime datetime now
@partial partialdef set logged in cookies backend None user None strategy None auth entry None *args **kwargs if not is api auth entry and user is not None and user is authenticated request strategy request if strategy else None if request is not None has cookie student cookies is logged in cookie set request if not has cookie try redirect url get complete url backend name except Value Error passelse response redirect redirect url return student cookies set logged in cookies request response user
def clean path filename url filename url get file name path url get path without file encode DEFAULT ENCODING if filename res path[ 1 ]res + clean filename filename else res clean path url get path encode DEFAULT ENCODING [1 ]return res
def clean path filename url filename url get file name path url get path without file encode DEFAULT ENCODING if filename res path[ 1 ]res + clean filename filename else res clean path url get path encode DEFAULT ENCODING [1 ]return res
def odd ext x n axis -1 if n < 1 return xif n > x shape[axis] - 1 raise Value Error ' Theextensionlengthn %d istoobig ' + ' Itmustnotexceedx shape[axis]- 1 whichis%d ' % n x shape[axis] - 1 left end axis slice x start 0 stop 1 axis axis left ext axis slice x start n stop 0 step -1 axis axis right end axis slice x start -1 axis axis right ext axis slice x start -2 stop - n + 2 step -1 axis axis ext np concatenate 2 * left end - left ext x 2 * right end - right ext axis axis return ext
def graph atlas g return list generate graphs
def get cache key default None struct channel repository cache get key {} expires struct get 'expires' if expires and expires > time time return struct get 'data' return default
def get possible name fields for model model if hasattr model u'name field' yield model name field for field in model meta local fields if field name in [u'name' u'title'] yield field name if hasattr model u' parler meta' for field in model parler meta root model meta get fields if field name not in u'master' u'id' u'language code' u'description' yield field name
def get possible name fields for model model if hasattr model u'name field' yield model name field for field in model meta local fields if field name in [u'name' u'title'] yield field name if hasattr model u' parler meta' for field in model parler meta root model meta get fields if field name not in u'master' u'id' u'language code' u'description' yield field name
def setup generic relations model class Action get model 'actstream' 'action' if Action is None raise Registration Error ' Unablegetactstream Action Potentialcircularimportsininitialisation Trymovingactstreamapptocomeaftertheappswhichhavemodelstoregisterinthe INSTALLED APP Ssetting ' related attr name 'related name'related attr value 'actions with %s' % label model class if django VERSION[ 2] > 1 7 related attr name 'related query name'relations {}for field in 'actor' 'target' 'action object' attr '%s actions' % field attr value '%s as %s' % related attr value field kwargs {'content type field' '%s content type' % field 'object id field' '%s object id' % field related attr name attr value}rel generic Generic Relation 'actstream Action' **kwargs rel contribute to class model class attr relations[field] relsetattr Action attr value None return relations
def encode as multipart multipart container boundary v vars v files split vars files multipart container data multipart encode v vars v files boundary boundary return data
def determine default project project None if project is None project get gcd project if project is None project base default project project project return project
def validate int name value limits strip '%' comment ''try if isinstance value string types value value strip '' + strip value int value except Type Error Value Error comment + '{ 0 }mustbeaninteger' format name else if len limits 2 if value < limits[ 0 ] or value > limits[ 1 ] comment + '{ 0 }mustbeintherange[{ 1 [ 0 ]} {1 [ 1 ]}]' format name limits return value comment
def timedtest max time tolerance TOLERANCE def timedtest function def wrapper *args **kw start time time time try function *args **kw finally total time time time - start time if total time > max time + tolerance raise Duration Error ' Testwastoolong % 2fs ' % total time return wrapperreturn timedtest
def timedtest max time tolerance TOLERANCE def timedtest function def wrapper *args **kw start time time time try function *args **kw finally total time time time - start time if total time > max time + tolerance raise Duration Error ' Testwastoolong % 2fs ' % total time return wrapperreturn timedtest
def timedtest max time tolerance TOLERANCE def timedtest function def wrapper *args **kw start time time time try function *args **kw finally total time time time - start time if total time > max time + tolerance raise Duration Error ' Testwastoolong % 2fs ' % total time return wrapperreturn timedtest
def timedtest max time tolerance TOLERANCE def timedtest function def wrapper *args **kw start time time time try function *args **kw finally total time time time - start time if total time > max time + tolerance raise Duration Error ' Testwastoolong % 2fs ' % total time return wrapperreturn timedtest
def timedtest max time tolerance TOLERANCE def timedtest function def wrapper *args **kw start time time time try function *args **kw finally total time time time - start time if total time > max time + tolerance raise Duration Error ' Testwastoolong % 2fs ' % total time return wrapperreturn timedtest
def timedtest max time tolerance TOLERANCE def timedtest function def wrapper *args **kw start time time time try function *args **kw finally total time time time - start time if total time > max time + tolerance raise Duration Error ' Testwastoolong % 2fs ' % total time return wrapperreturn timedtest
def construct **kwargs point x kwargs pop 'point x' None point y kwargs pop 'point y' None if 'point' in kwargs raise Type Error ' Unknownkeyword point' if None not in point x point y kwargs['point'] Ecc Point point x point y eq 1 pow Integer point y 2 curve p x Integer point x eq 2 pow x 3 curve p x * -3 eq 2 + xeq 2 + curve beq 2 % curve pif eq 1 eq 2 raise Value Error ' Thepointisnotonthecurve' d kwargs get 'd' None if d is not None and 'point' in kwargs pub key curve G * d if pub key x point x or pub key y point y raise Value Error ' Privateandpublic EC Ckeysdonotmatch' return Ecc Key **kwargs
def test fits hst unit x u Unit u'erg/s/cm** 2 /angstrom' assert x u erg * u s ** -1 * u cm ** -2 * u angstrom ** -1
def build files list root dir return [os path join dirpath file path for dirpath subdirs files in os walk root dir for file path in files]
def build files list root dir return [os path join dirpath file path for dirpath subdirs files in os walk root dir for file path in files]
def Shard Name name number return Suffix Name name str number
def update cmd 'eix-update--quiet'return salt ['cmd retcode'] cmd 0
def min weight graph src dst n default {'weight' np inf}w 1 graph[n] get src default ['weight']w 2 graph[n] get dst default ['weight']return {'weight' min w1 w2 }
def notify about server group update context event suffix sg payload notifier rpc get notifier service 'servergroup' notifier info context 'servergroup %s' % event suffix sg payload
def make cidx file fp if which 'cdbfasta' args ['cdbfasta' fp] stdout stderr Popen args stderr PIPE stdout PIPE communicate else raise Application Not Found Error
def get info photo id api key query urlencode {'method' 'flickr photos get Info' 'api key' api key 'photo id' photo id 'format' 'json' 'nojsoncallback' '1 '} r urlopen 'https //api flickr com/services/rest/?' + query info json loads r read decode 'utf- 8 ' if info['stat'] 'fail' raise Value Error info['message'] return info
def add users autogroup apps schema editor Group apps get model u'auth' u' Group' Auto Group apps get model u'accounts' u' Auto Group' group Group objects get or create name u' Users' [0 ]if not Auto Group objects filter group group exists Auto Group objects create group group match u'^ *$'
@register filter def oneline value return value replace '\n' ''
def task locale def set nikola test locales try out subprocess check output ['locale' '-a'] out out decode 'utf- 8 ' locales []languages set for line in out splitlines if line endswith ' utf 8 ' or line endswith ' UTF- 8 ' and ' ' in line lang line split ' ' [0 ]if lang not in languages try locale setlocale locale LC ALL str line except continuelanguages add lang locales append lang line if len locales 2 breakif len locales 2 return Falseelse os environ['NIKOLA LOCALE DEFAULT'] ' ' join locales[ 0 ] os environ['NIKOLA LOCALE OTHER'] ' ' join locales[ 1 ] finally locale resetlocale return {'actions' [set nikola test locales] 'verbosity' 2}
def create default context purpose Purpose SERVER AUTH cafile None capath None cadata None if not isinstance purpose ASN 1 Object raise Type Error purpose context SSL Context PROTOCOL SS Lv 23 context options OP NO SS Lv 2 context options OP NO SS Lv 3 context options getattr ssl 'OP NO COMPRESSION' 0 if purpose Purpose SERVER AUTH context verify mode CERT REQUIRE Dcontext check hostname Trueelif purpose Purpose CLIENT AUTH context options getattr ssl 'OP CIPHER SERVER PREFERENCE' 0 context options getattr ssl 'OP SINGLE DH USE' 0 context options getattr ssl 'OP SINGLE ECDH USE' 0 context set ciphers RESTRICTED SERVER CIPHERS if cafile or capath or cadata context load verify locations cafile capath cadata elif context verify mode CERT NONE context load default certs purpose return context
def init console logging formatter logging Formatter '% asctime s[% name s]% levelname s % message s' ch Console Handler ch set Formatter formatter log add Handler ch log set Level logging INFO
def access settings service group Id settings group service groups g group get group Unique Id group Id execute print '\n Grouppropertiesforgroup%s\n' % g['name'] pprint pprint g if not settings keys print '\n Giveaccessparameterstoupdategroupaccesspermissions\n' returnbody {}for key in settings iterkeys if settings[key] is not None body[key] settings[key]g 1 group update group Unique Id group Id body body execute print '\n Updated Access Permissionstothegroup\n' pprint pprint g1
def access settings service group Id settings group service groups g group get group Unique Id group Id execute print '\n Grouppropertiesforgroup%s\n' % g['name'] pprint pprint g if not settings keys print '\n Giveaccessparameterstoupdategroupaccesspermissions\n' returnbody {}for key in settings iterkeys if settings[key] is not None body[key] settings[key]g 1 group update group Unique Id group Id body body execute print '\n Updated Access Permissionstothegroup\n' pprint pprint g1
def exists *nictag **kwargs ret {}nictagadm check nictagadm if len nictag 0 return {' Error' ' Pleaseprovideatleastonenictagtocheck '}cmd '{nictagadm}exists-l{nictags}' format nictagadm nictagadm nictags '' join nictag res salt ['cmd run all'] cmd if not kwargs get 'verbose' False ret res['retcode'] 0 else missing res['stderr'] splitlines for nt in nictag ret[nt] nt not in missing return ret
def consolidate blocks gkey lambda x x consolidate key grouper itertools groupby sorted blocks key gkey gkey new blocks []for can consolidate dtype group blocks in grouper merged blocks merge blocks list group blocks dtype dtype can consolidate can consolidate new blocks extend blocks merged blocks new blocks return new blocks
def test edf annotations raw read raw edf edf path preload True edf events find events raw output 'step' shortest event 0 stim channel 'STI 014 ' events [[ 0 1344 0 256 2] [0 3904 1 0 2] [2 0 0 0 3] [2 5 2 5 2]]events np array events events[ 2] * 512 events np array events dtype int events[ 1] - 1events[ events[ 1] < 0 1 ] 1events[ 1] + events[ 0]onsets events[ [0 2]]offsets events[ [1 2]]events np zeros 2 * events shape[ 0 ] 3 dtype int events[ 0 2 [0 2]] onsetsevents[ 1 2 [0 1]] offsetsassert array equal edf events events
def stop vm name call None if call 'action' raise Salt Cloud System Exit ' Thestopactionmustbecalledwith-aor--action ' conn get conn utils ['cloud fire event'] 'event' 'stopinstance' 'salt/cloud/{ 0 }/stopping' format vm name args {'name' vm name} sock dir opts ['sock dir'] transport opts ['transport'] result conn ex stop node conn ex get node vm name utils ['cloud fire event'] 'event' 'stopinstance' 'salt/cloud/{ 0 }/stopped' format vm name args {'name' vm name} sock dir opts ['sock dir'] transport opts ['transport'] return result
def get value from user message default value '' hidden False return validate user input Input Dialog message default value is truthy hidden
def tied rank x sorted x sorted zip x range len x r [0 for k in x]cur val sorted x[ 0 ][ 0 ]last rank 0for i in range len sorted x if cur val sorted x[i][ 0 ] cur val sorted x[i][ 0 ]for j in range last rank i r[sorted x[j][ 1 ]] float last rank + 1 + i / 2 0 last rank iif i len sorted x - 1 for j in range last rank i + 1 r[sorted x[j][ 1 ]] float last rank + i + 2 / 2 0 return r
def hilbert n values 1 0 / 1 0 + np arange 2 * n - 1 h hankel values[ n] r values[ n - 1 ] return h
def xml decode string string string replace '&amp ' '&' string string replace '&lt ' '<' string string replace '&gt ' '>' string string replace '&quot ' '"' string string replace '/' SLASH return string
@registry add binding Keys Control C eager True @registry add binding Keys Control Q eager True def event event cli set return value None
@registry add binding Keys Control C eager True @registry add binding Keys Control Q eager True def event event cli set return value None
@registry add binding Keys Control C eager True @registry add binding Keys Control Q eager True def event event cli set return value None
def push notebook document None state None handle None if state is None state stateif state server enabled raise Runtime Error 'output server hasbeencalled whichisincompatiblewithpush notebook' if not document document state documentif not document warnings warn ' Nodocumenttopush' returnif handle is None handle state last comms handleif not handle warnings warn ' Cannotfindalastshownplottoupdate Calloutput notebook andshow notebook handle True beforepush notebook ' returnto json document to json if handle doc is not document msg dict doc to json else msg Document compute patch between json handle json to json handle comms send json dumps msg handle update document to json
def push notebook document None state None handle None if state is None state stateif state server enabled raise Runtime Error 'output server hasbeencalled whichisincompatiblewithpush notebook' if not document document state documentif not document warnings warn ' Nodocumenttopush' returnif handle is None handle state last comms handleif not handle warnings warn ' Cannotfindalastshownplottoupdate Calloutput notebook andshow notebook handle True beforepush notebook ' returnto json document to json if handle doc is not document msg dict doc to json else msg Document compute patch between json handle json to json handle comms send json dumps msg handle update document to json
def push notebook document None state None handle None if state is None state stateif state server enabled raise Runtime Error 'output server hasbeencalled whichisincompatiblewithpush notebook' if not document document state documentif not document warnings warn ' Nodocumenttopush' returnif handle is None handle state last comms handleif not handle warnings warn ' Cannotfindalastshownplottoupdate Calloutput notebook andshow notebook handle True beforepush notebook ' returnto json document to json if handle doc is not document msg dict doc to json else msg Document compute patch between json handle json to json handle comms send json dumps msg handle update document to json
def test unicode column tmpdir t Table [np array [u'a' u'b' u'cd'] ] t write str tmpdir join 'test fits' overwrite True with fits open str tmpdir join 'test fits' as hdul assert np all hdul[ 1 ] data['col 0 '] ['a' 'b' 'cd'] assert hdul[ 1 ] header['TFORM 1 '] '2 A' t2 Table [np array [u'\u 2603 '] ] with pytest raises Unicode Encode Error t2 write str tmpdir join 'test fits' overwrite True
def test unicode column tmpdir t Table [np array [u'a' u'b' u'cd'] ] t write str tmpdir join 'test fits' overwrite True with fits open str tmpdir join 'test fits' as hdul assert np all hdul[ 1 ] data['col 0 '] ['a' 'b' 'cd'] assert hdul[ 1 ] header['TFORM 1 '] '2 A' t2 Table [np array [u'\u 2603 '] ] with pytest raises Unicode Encode Error t2 write str tmpdir join 'test fits' overwrite True
def test unicode column tmpdir t Table [np array [u'a' u'b' u'cd'] ] t write str tmpdir join 'test fits' overwrite True with fits open str tmpdir join 'test fits' as hdul assert np all hdul[ 1 ] data['col 0 '] ['a' 'b' 'cd'] assert hdul[ 1 ] header['TFORM 1 '] '2 A' t2 Table [np array [u'\u 2603 '] ] with pytest raises Unicode Encode Error t2 write str tmpdir join 'test fits' overwrite True
def matmul a b transa False transb False return Mat Mul transa transa transb transb a b
def test scenario may own outlines scenario Scenario from string OUTLINED SCENARIO assert equals len scenario steps 4 expected sentences [' Given Ihaveentered<input 1>intothecalculator' ' And Ihaveentered<input 2>intothecalculator' ' When Ipress<button>' ' Thentheresultshouldbe<output>onthescreen']for step expected sentence in zip scenario steps expected sentences assert equals type step Step assert equals step sentence expected sentence assert equals scenario name ' Addtwonumbers' assert equals scenario outlines [{'input 1' '20 ' 'input 2' '30 ' 'button' 'add' 'output' '50 '} {'input 1' '2 ' 'input 2' '5 ' 'button' 'add' 'output' '7 '} {'input 1' '0 ' 'input 2' '40 ' 'button' 'add' 'output' '40 '}]
def Bdb Quit excepthook et ev tb excepthook None warnings warn '` Bdb Quit excepthook`isdeprecatedsinceversion 5 1' Deprecation Warning stacklevel 2 if et bdb Bdb Quit print ' Exiting Debugger 'elif excepthook is not None excepthook et ev tb else Bdb Quit excepthook excepthook ori et ev tb
def Bdb Quit excepthook et ev tb excepthook None warnings warn '` Bdb Quit excepthook`isdeprecatedsinceversion 5 1' Deprecation Warning stacklevel 2 if et bdb Bdb Quit print ' Exiting Debugger 'elif excepthook is not None excepthook et ev tb else Bdb Quit excepthook excepthook ori et ev tb
def get nets vif subnet version net num link id if subnet get meta 'dhcp server' is not None net info {'id' 'network%d' % net num 'type' 'ipv%d dhcp' % version 'link' link id 'network id' vif['network']['id']}return net infoip subnet['ips'][ 0 ]address ip['address']if version 4 netmask model get netmask ip subnet elif version 6 netmask str subnet as netaddr netmask net info {'id' 'network%d' % net num 'type' 'ipv%d' % version 'link' link id 'ip address' address 'netmask' netmask 'routes' get default route version subnet 'network id' vif['network']['id']}for route in subnet['routes'] route addr netaddr IP Network route['cidr'] new route {'network' str route addr network 'netmask' str route addr netmask 'gateway' route['gateway']['address']}net info['routes'] append new route return net info
def add views to dataset resources context dataset dict view types [] create datastore views False created views []for resource dict in dataset dict get 'resources' [] new views add views to resource context resource dict dataset dict view types create datastore views created views extend new views return created views
def remove value module consul api get consul api module key module params get 'key' value module params get 'value' index existing consul api kv get key recurse module params get 'recurse' changed existing None if changed and not module check mode consul api kv delete key module params get 'recurse' module exit json changed changed index index key key data existing
def make paginator request items per page 50 try page int request GET get 'page' '1 ' except Value Error page 1paginator Paginator items per page try items paginator page page except Invalid Page Empty Page items paginator page paginator num pages return items
def read double fid return unpack simple fid '>f 8 ' np float 64
def test example 2 vert template Function '\nvoidmain void \n{\ngl Position $position \n}\n' transform Scale Function '\nvec 4 transform scale vec 4 pos \n{\npos xyz* $scale \nreturnpos \n}\n' class Transform object def init self self func Function transform Scale self func['scale'] 'uniformfloat'def set scale self scale self func['scale'] value scaletransforms [ Transform Transform Transform ]code Function vert template ob Variable 'attributevec 3 a position' for trans in transforms ob trans func ob code['position'] obprint code
def hash obj hash name 'md 5 ' coerce mmap False if 'numpy' in sys modules hasher Numpy Hasher hash name hash name coerce mmap coerce mmap else hasher Hasher hash name hash name return hasher hash obj
def edgelist for workflow steps steps edges []steps to index dict step i for i step in enumerate steps for step in steps edges append steps to index[step] steps to index[step] for conn in step input connections edges append steps to index[conn output step] steps to index[conn input step] return edges
def edgelist for workflow steps steps edges []steps to index dict step i for i step in enumerate steps for step in steps edges append steps to index[step] steps to index[step] for conn in step input connections edges append steps to index[conn output step] steps to index[conn input step] return edges
def stub out registry image update stubs test stubs stub out registry server stubs def fake image update ctx image id values purge props False return {'properties' {}}stubs Set db api 'image update' fake image update
def stub out registry image update stubs test stubs stub out registry server stubs def fake image update ctx image id values purge props False return {'properties' {}}stubs Set db api 'image update' fake image update
def button action button action connect button button action trigger
def cx Two Point Copy ind 1 ind 2 size len ind 1 cxpoint 1 random randint 1 size cxpoint 2 random randint 1 size - 1 if cxpoint 2 > cxpoint 1 cxpoint 2 + 1else cxpoint 1 cxpoint 2 cxpoint 2 cxpoint 1 ind 1 [cxpoint 1 cxpoint 2 ] ind 2 [cxpoint 1 cxpoint 2 ] ind 2 [cxpoint 1 cxpoint 2 ] copy ind 1 [cxpoint 1 cxpoint 2 ] copy return ind 1 ind 2
def cx Two Point Copy ind 1 ind 2 size len ind 1 cxpoint 1 random randint 1 size cxpoint 2 random randint 1 size - 1 if cxpoint 2 > cxpoint 1 cxpoint 2 + 1else cxpoint 1 cxpoint 2 cxpoint 2 cxpoint 1 ind 1 [cxpoint 1 cxpoint 2 ] ind 2 [cxpoint 1 cxpoint 2 ] ind 2 [cxpoint 1 cxpoint 2 ] copy ind 1 [cxpoint 1 cxpoint 2 ] copy return ind 1 ind 2
def denoms eq symbols None pot preorder traversal eq dens set for p in pot den denom p if den is S One continuefor d in Mul make args den dens add d if not symbols return densrv []for d in dens free d free symbolsif any s in free for s in symbols rv append d return set rv
def denoms eq symbols None pot preorder traversal eq dens set for p in pot den denom p if den is S One continuefor d in Mul make args den dens add d if not symbols return densrv []for d in dens free d free symbolsif any s in free for s in symbols rv append d return set rv
def Unicode 2 Str s d return s encode
def build request with data url data api key method http redirect with data handler HTTP Redirect With Data Handler method method opener urllib 2 build opener http redirect with data handler urllib 2 install opener opener url make url url api key api key args None request urllib 2 Request url headers {' Content- Type' 'application/json'} data json dumps data request method request get method if request method method request get method lambda method return opener request
def roles accepted *roles def wrapper fn @wraps fn def decorated view *args **kwargs perm Permission *[ Role Need role for role in roles] if perm can return fn *args **kwargs if security unauthorized callback return security unauthorized callback else return get unauthorized view return decorated viewreturn wrapper
def roles accepted *roles def wrapper fn @wraps fn def decorated view *args **kwargs perm Permission *[ Role Need role for role in roles] if perm can return fn *args **kwargs if security unauthorized callback return security unauthorized callback else return get unauthorized view return decorated viewreturn wrapper
def roles accepted *roles def wrapper fn @wraps fn def decorated view *args **kwargs perm Permission *[ Role Need role for role in roles] if perm can return fn *args **kwargs if security unauthorized callback return security unauthorized callback else return get unauthorized view return decorated viewreturn wrapper
def has uniform batch size mode return resolve iterator class mode uniform batch size
def has uniform batch size mode return resolve iterator class mode uniform batch size
def swap inf nan val if isinstance val string types return valelif isinstance val collections Sequence return [swap inf nan v for v in val]elif isinstance val collections Mapping return dict [ swap inf nan k swap inf nan v for k v in iteritems val ] elif isinstance val float if math isnan val return ' Na N 'elif val float 'inf' return ' Infinity 'elif val float '-inf' return ' - Infinity 'else return valelse return val
def filer file from upload request path upload data sha 1 None return filer file from upload model File request request path path upload data upload data sha 1 sha 1
def write timeseries value client project resource custom metric type instance id metric kind now get now rfc 3339 timeseries data {'metric' {'type' custom metric type 'labels' {'environment' 'STAGING'}} 'resource' {'type' 'gce instance' 'labels' {'instance id' instance id 'zone' 'us-central 1 -f'}} 'points' [{'interval' {'start Time' now 'end Time' now} 'value' {'int 64 Value' get custom data point }}]}request client projects time Series create name project resource body {'time Series' [timeseries data]} request execute
def write timeseries value client project resource custom metric type instance id metric kind now get now rfc 3339 timeseries data {'metric' {'type' custom metric type 'labels' {'environment' 'STAGING'}} 'resource' {'type' 'gce instance' 'labels' {'instance id' instance id 'zone' 'us-central 1 -f'}} 'points' [{'interval' {'start Time' now 'end Time' now} 'value' {'int 64 Value' get custom data point }}]}request client projects time Series create name project resource body {'time Series' [timeseries data]} request execute
def update cyg arch 'x 86 64 ' mirrors None args []args append '--upgrade-also' if not check cygwin installed cyg arch LOG debug ' Cygwin {0 } notinstalled couldnotupdate' format cyg arch return Falsereturn run silent cygwin cyg arch cyg arch args args mirrors mirrors
def messy split long line new list []old list long line split ' ' for line in old list if len line 0 line + ' ' * 4 - len line % 4 % 4 new list append line return new list
def cancel Repository repository get Read Repository repository for setting in repository display Entities if setting in repository preferences setting set State To Value
def load ptb dataset path 'data/ptb/' print ' Loador Download Penn Tree Bank PTB dataset>{}' format path filename 'simple-examples tgz'url 'http //www fit vutbr cz/~imikolov/rnnlm/'maybe download and extract filename path url extract True data path os path join path 'simple-examples' 'data' train path os path join data path 'ptb train txt' valid path os path join data path 'ptb valid txt' test path os path join data path 'ptb test txt' word to id nlp build vocab nlp read words train path train data nlp words to word ids nlp read words train path word to id valid data nlp words to word ids nlp read words valid path word to id test data nlp words to word ids nlp read words test path word to id vocabulary len word to id return train data valid data test data vocabulary
def load ptb dataset path 'data/ptb/' print ' Loador Download Penn Tree Bank PTB dataset>{}' format path filename 'simple-examples tgz'url 'http //www fit vutbr cz/~imikolov/rnnlm/'maybe download and extract filename path url extract True data path os path join path 'simple-examples' 'data' train path os path join data path 'ptb train txt' valid path os path join data path 'ptb valid txt' test path os path join data path 'ptb test txt' word to id nlp build vocab nlp read words train path train data nlp words to word ids nlp read words train path word to id valid data nlp words to word ids nlp read words valid path word to id test data nlp words to word ids nlp read words test path word to id vocabulary len word to id return train data valid data test data vocabulary
def test successful update config stub basedir download stub data tmpdir tmpdir win registry caplog config stub data {'content' {'host-block-lists' generic blocklists tmpdir 'host-blocking-enabled' True 'host-blocking-whitelist' None}}host blocker adblock Host Blocker host blocker adblock update while host blocker in progress current download host blocker in progress[ 0 ]with caplog at level logging ERROR current download finished emit host blocker read hosts assert urls host blocker whitelisted []
def stat filename retry params None account id None common validate file path filename api storage api get storage api retry params retry params account id account id status headers content api head object api utils quote filename filename errors check status status [200 ] filename resp headers headers body content file stat common GCS File Stat filename filename st size common get stored content length headers st ctime common http time to posix headers get 'last-modified' etag headers get 'etag' content type headers get 'content-type' metadata common get metadata headers return file stat
def create router name ext network None admin state up True profile None conn auth profile return conn create router name ext network admin state up
def shells shells fn '/etc/shells'ret []if os path exists shells fn try with salt utils fopen shells fn 'r' as shell fp lines shell fp read splitlines for line in lines line line strip if line startswith '#' continueelif not line continueelse ret append line except OS Error log error " File'{ 0 }'wasnotfound" format shells fn return ret
def shells shells fn '/etc/shells'ret []if os path exists shells fn try with salt utils fopen shells fn 'r' as shell fp lines shell fp read splitlines for line in lines line line strip if line startswith '#' continueelif not line continueelse ret append line except OS Error log error " File'{ 0 }'wasnotfound" format shells fn return ret
def setup platform hass config add devices discovery info None name config get CONF NAME resource config get CONF RESOURCE method 'GET'payload auth headers Noneverify ssl config get CONF VERIFY SSL select config get CONF SELECT unit config get CONF UNIT OF MEASUREMENT value template config get CONF VALUE TEMPLATE if value template is not None value template hass hassrest Rest Data method resource auth headers payload verify ssl rest update if rest data is None LOGGER error ' Unabletofetchdatafrom%s' resource return Falseadd devices [ Scrape Sensor hass rest name select value template unit ]
def cap alert is template alert id if not alert id return Falsetable current s3 db cap alertquery table id alert id r current db query select table is template limitby 0 1 first return r and r is template
def salt ssh import salt cli sshif '' in sys path sys path remove '' try client salt cli ssh Salt SSH install signal handlers client client run except Salt Client Error as err trace traceback format exc try hardcrash client options hard crashexcept Attribute Error Key Error hardcrash False handle interrupt System Exit err err hardcrash trace trace
def get status code from code response code last valid line from code [line for line in code split u'\n' if line][ -1 ]status code from last line int last valid line from code split [0 ] status code from first digits int code[ 3] if status code from last line status code from first digits log warning u'FT Presponsestatuscodeseemstobeinconsistent \n Codereceived %s extracted %sand%s' code status code from last line status code from first digits return status code from last line
def quota get per project resources return IMPL quota get per project resources
def node region patched ast node return patched ast node region
@verbosedef lookup by userid demo oauth credsfromfile client Query **oauth user info client user info from id USERIDS for info in user info name info['screen name']followers info['followers count']following info['friends count']print '{ 0 } followers {1 } following {2 }' format name followers following
def get module user request usage key field data cache position None log if not found True wrap xmodule display True grade bucket type None depth 0 static asset path '' course None try descriptor modulestore get item usage key depth depth return get module for descriptor user request descriptor field data cache usage key course key position position wrap xmodule display wrap xmodule display grade bucket type grade bucket type static asset path static asset path course course except Item Not Found Error if log if not found log debug ' Erroringet module Item Not Found Error' return Noneexcept log exception ' Erroringet module' return None
def get module user request usage key field data cache position None log if not found True wrap xmodule display True grade bucket type None depth 0 static asset path '' course None try descriptor modulestore get item usage key depth depth return get module for descriptor user request descriptor field data cache usage key course key position position wrap xmodule display wrap xmodule display grade bucket type grade bucket type static asset path static asset path course course except Item Not Found Error if log if not found log debug ' Erroringet module Item Not Found Error' return Noneexcept log exception ' Erroringet module' return None
def pnio get config pkt ether get ethernet pkt config Noneif ether is not None and ether src ether dst in conf contribs['PNIO RTC'] config conf contribs['PNIO RTC'][ ether src ether dst ]return config
def test override column class names class My Table tables Table population tables Column verbose name u' Population' def get column class names self classes set bound column classes set add u'prefix-%s' % bound column name return classes set TEST DATA [{u'name' u' Belgium' u'population' 11200000 } {u'name' u' Luxembourgh' u'population' 540000 } {u'name' u' France' u'population' 66000000 }]html My Table TEST DATA as html build request assert u'<tdclass "prefix-population"> 11200000 </td>' in html
def test override column class names class My Table tables Table population tables Column verbose name u' Population' def get column class names self classes set bound column classes set add u'prefix-%s' % bound column name return classes set TEST DATA [{u'name' u' Belgium' u'population' 11200000 } {u'name' u' Luxembourgh' u'population' 540000 } {u'name' u' France' u'population' 66000000 }]html My Table TEST DATA as html build request assert u'<tdclass "prefix-population"> 11200000 </td>' in html
def matching details field our args []our kwargs {}for classes args kwargs in introspection details if any [isinstance field x for x in classes] our args extend args our kwargs update kwargs return our args our kwargs
def maybe add read preference spec read preference mode read preference modetag sets read preference tag setsmax staleness read preference max stalenessif mode and mode Read Preference SECONDARY PREFERRED mode or tag sets [{}] or max staleness -1 if '$query' not in spec spec SON [ '$query' spec ] spec['$read Preference'] read preference documentreturn spec
def maybe add read preference spec read preference mode read preference modetag sets read preference tag setsmax staleness read preference max stalenessif mode and mode Read Preference SECONDARY PREFERRED mode or tag sets [{}] or max staleness -1 if '$query' not in spec spec SON [ '$query' spec ] spec['$read Preference'] read preference documentreturn spec
def yield clusters max days ago None now None **runner kwargs if now is None now datetime utcnow emr conn EMR Job Runner **runner kwargs make emr conn created after Noneif max days ago is not None created after now - timedelta days max days ago for cluster summary in yield all clusters emr conn created after created after delay DELAY cluster id cluster summary idsleep DELAY cluster patched describe cluster emr conn cluster id cluster steps list all steps emr conn cluster id delay DELAY cluster bootstrapactions list yield all bootstrap actions emr conn cluster id delay DELAY yield cluster
@pytest yield fixturedef dir with hooks tmpdir hooks dir tmpdir mkdir 'hooks' pre hook content textwrap dedent u"\n# /usr/bin/envpython\n#-*-coding utf- 8 -*-\nprint 'pre gen project py~' \n" pre gen hook file hooks dir / 'pre gen project py~' pre gen hook file write text pre hook content encoding 'utf 8 ' post hook content textwrap dedent u"\n# /usr/bin/envpython\n#-*-coding utf- 8 -*-\nprint 'post gen project py~' \n" post gen hook file hooks dir / 'post gen project py~' post gen hook file write text post hook content encoding 'utf 8 ' yield str tmpdir pre gen hook file remove post gen hook file remove
def get power **kwargs with Ipmi Command **kwargs as s return s get power ['powerstate']
def get timestamp from url url obj urllib 2 urlopen url return time strptime obj info [' Last- Modified'] '%a %d%b%Y%H %M %SGMT'
def ssh ip address keyname cmd method subprocess check call key file '{}/{} key' format KEY DIRECTORY keyname ssh cmd ['ssh' '-i' key file '-o' ' Strict Host Key Checking no' ip address cmd]return method ssh cmd
def delete tags filesystemid tags keyid None key None profile None region None **kwargs client get conn key key keyid keyid profile profile region region client delete tags File System Id filesystemid Tags tags
@declareddef down obj output set value obj output None 1
def set key value profile None if not profile return False conn cur table connect profile value buffer msgpack packb value q profile get 'set query' 'INSERTORREPLACEINTO{ 0 }VALUES key value ' format table conn execute q {'key' key 'value' value} conn commit return True
def fetch pack index index url None logger None allow empty False logger logger or LOG index urls build index list index url index status fetch and compile index index urls logger if not index and not allow empty raise Value Error ' Noresultsfromthe%s tried%s \n Status %s' % 'index' if len index urls 1 else 'indexes' ' ' join index urls json dumps status indent 4 return index status
def ckan after request response response check session cookie response response set cors headers for response response return response
def setup hass config def handle receive event ' Callbackallsubscribersfor RF Xtrxgateway 'if not event device id string return LOGGER debug ' Receive RFXCO Meventfrom Device id %s Class %s Sub %s Pkt id %s ' slugify event device id string lower event device class name event device subtype '' join '{ 0 02 x}' format x for x in event data for subscriber in RECEIVED EVT SUBSCRIBERS subscriber event import RF Xtrx as rfxtrxmodglobal RFXOBJEC Tdevice config[DOMAIN][ATTR DEVICE]debug config[DOMAIN][ATTR DEBUG]dummy connection config[DOMAIN][ATTR DUMMY]if dummy connection RFXOBJECT rfxtrxmod Connect device handle receive debug debug transport protocol rfxtrxmod Dummy Transport 2 else RFXOBJECT rfxtrxmod Connect device handle receive debug debug def shutdown rfxtrx event ' Closeconnectionwith RF Xtrx 'RFXOBJECT close connection hass bus listen once EVENT HOMEASSISTANT STOP shutdown rfxtrx return True
def auth backends request return {u'auth backends' get enabled auth backends }
def cla Model Control Disable SP Learning Cb cla Model assert isinstance cla Model CLA Model cla Model get SP Region set Parameter 'learning Mode' False return
def push mirrors config git dir log logging get Logger 'gitosis mirror push mirrors' repository dir os path abspath util get Repository Dir config git dir os path abspath git dir git name get git name repository dir git dir log info " Updating%s'smirrors " % git name for remote in get mirrors config git name log info ' Updating%s ' % remote repository mirror git dir remote
def push mirrors config git dir log logging get Logger 'gitosis mirror push mirrors' repository dir os path abspath util get Repository Dir config git dir os path abspath git dir git name get git name repository dir git dir log info " Updating%s'smirrors " % git name for remote in get mirrors config git name log info ' Updating%s ' % remote repository mirror git dir remote
def push mirrors config git dir log logging get Logger 'gitosis mirror push mirrors' repository dir os path abspath util get Repository Dir config git dir os path abspath git dir git name get git name repository dir git dir log info " Updating%s'smirrors " % git name for remote in get mirrors config git name log info ' Updating%s ' % remote repository mirror git dir remote
def push mirrors config git dir log logging get Logger 'gitosis mirror push mirrors' repository dir os path abspath util get Repository Dir config git dir os path abspath git dir git name get git name repository dir git dir log info " Updating%s'smirrors " % git name for remote in get mirrors config git name log info ' Updating%s ' % remote repository mirror git dir remote
def mock streams which both which 'both' stdout which 'stdout' or both stderr which 'stderr' or both def mocked streams decorator func @wraps func def inner wrapper *args **kwargs if both sys stdall String IO fake stdout Carbon Copy cc sys stdall fake stderr Carbon Copy cc sys stdall else fake stdout fake stderr String IO String IO if stdout my stdout sys stdout sys stdout fake stdout if stderr my stderr sys stderr sys stderr fake stderr try func *args **kwargs finally if stdout sys stdout my stdoutif stderr sys stderr my stderrif both del sys stdallreturn inner wrapperreturn mocked streams decorator
def prepare trans tar name mods None saltenv 'base' pillar None chunks compile state mods saltenv refs salt client ssh state lowstate file refs chunks mk fileclient trans tar salt client ssh state prep trans tar opts context ['cp fileclient'] chunks refs pillar name return trans tar
def prepare trans tar name mods None saltenv 'base' pillar None chunks compile state mods saltenv refs salt client ssh state lowstate file refs chunks mk fileclient trans tar salt client ssh state prep trans tar opts context ['cp fileclient'] chunks refs pillar name return trans tar
def prepare trans tar name mods None saltenv 'base' pillar None chunks compile state mods saltenv refs salt client ssh state lowstate file refs chunks mk fileclient trans tar salt client ssh state prep trans tar opts context ['cp fileclient'] chunks refs pillar name return trans tar
@contextmanagerdef assert produces warning expected warning Warning filter level u'always' clear None with warnings catch warnings record True as w if clear is not None if not is list like clear clear [clear]for m in clear getattr m u' warningregistry ' {} clear saw warning Falsewarnings simplefilter filter level yield w extra warnings []for actual warning in w if expected warning and issubclass actual warning category expected warning saw warning Trueelse extra warnings append actual warning category name if expected warning assert saw warning u' Didnotseeexpectedwarningofclass%r ' % expected warning name assert not extra warnings u' Causedunexpectedwarning s %r ' % extra warnings
@contextmanagerdef assert produces warning expected warning Warning filter level u'always' clear None with warnings catch warnings record True as w if clear is not None if not is list like clear clear [clear]for m in clear getattr m u' warningregistry ' {} clear saw warning Falsewarnings simplefilter filter level yield w extra warnings []for actual warning in w if expected warning and issubclass actual warning category expected warning saw warning Trueelse extra warnings append actual warning category name if expected warning assert saw warning u' Didnotseeexpectedwarningofclass%r ' % expected warning name assert not extra warnings u' Causedunexpectedwarning s %r ' % extra warnings
def setup test episode file if not os path exists FILE DIR os makedirs FILE DIR try with open FILE PATH 'wb' as ep file ep file write 'foobar' ep file flush except Exception print ' Unabletosetuptestepisode'raise
def discriminant a b c return math sqrt b ** 2 - 4 * a * c
def discriminant a b c return math sqrt b ** 2 - 4 * a * c
def load Image filename path GUI DATA PATH im gtk Image filename os path join path filename im set from file filename im show return im
def convert seconds seconds return u'{ 0 0f} {1 02 0f}' format *divmod float seconds 60
def get session conf requests session None group None group group or DEFAULT GROUP auth plugin ka loading load auth from conf options conf group session ka loading load session from conf options conf group auth auth plugin session requests session return session
def get Profile Base Name Synonym repository if repository get Profile Directory None return repository base Name Synonymreturn os path join repository get Profile Directory repository base Name Synonym
def configure logging logging config **kwargs Logging Manager logging config object logging configlogging config configure logging **kwargs
def is readable gs handle gs handle try with files open gs handle as bak file bak file read 1 except files Permission Denied Error return Falsereturn True
def cpu usage for process results process process results [r for r in results if r['metric']['type'] 'cputime' and r['process'] process ]cpu values sum r['value'] for r in process results wallclock values sum r['wallclock'] for r in process results if wallclock values > 0 return float cpu values / wallclock values return None
def test match assert match Command u'ps-ef \xa 0 grepfoo' stderr u'-bash \xa 0 grep commandnotfound' assert not match Command 'ps-ef grepfoo' assert not match Command
def test register client rv register client 'user 1 ' 'default' assert ' Youweresuccessfullyregisteredandcanloginnow' in rv data rv register client 'user 1 ' 'default' assert ' Theusernameisalreadytaken' in rv data rv register client '' 'default' assert ' Youhavetoenterausername' in rv data rv register client 'meh' '' assert ' Youhavetoenterapassword' in rv data rv register client 'meh' 'x' 'y' assert ' Thetwopasswordsdonotmatch' in rv data rv register client 'meh' 'foo' email 'broken' assert ' Youhavetoenteravalidemailaddress' in rv data
def test unknown enum with pytest raises Attribute Error enum three
def on join session print 'sessionconnected {}' format session def on leave details print 'on leave' details session on leave on leave session leave
def on join session print 'sessionconnected {}' format session def on leave details print 'on leave' details session on leave on leave session leave
def generate conflicting plot options with json writes of config def gen test plot options def test self config json load open CONFIG FILE with open CONFIG FILE 'w' as f config update plot options f write json dumps config self assert Raises Plotly Error py plot option logic {} return testfor i plot options in enumerate Test Plot Option Logic conflicting option set setattr Test Plot Option Logic 'test conflicting plot options with json writes of config{}' format i gen test plot options
def generate conflicting plot options with json writes of config def gen test plot options def test self config json load open CONFIG FILE with open CONFIG FILE 'w' as f config update plot options f write json dumps config self assert Raises Plotly Error py plot option logic {} return testfor i plot options in enumerate Test Plot Option Logic conflicting option set setattr Test Plot Option Logic 'test conflicting plot options with json writes of config{}' format i gen test plot options
def prefix to attr attr id attr by prefix {'fsmt-' ' Mount Target Id' 'subnet-' ' Subnet Id' 'eni-' ' Network Interface Id' 'sg-' ' Security Groups'}prefix first or default filter lambda pref str attr id startswith pref attr by prefix keys if prefix return attr by prefix[prefix]return ' Ip Address'
def prefix to attr attr id attr by prefix {'fsmt-' ' Mount Target Id' 'subnet-' ' Subnet Id' 'eni-' ' Network Interface Id' 'sg-' ' Security Groups'}prefix first or default filter lambda pref str attr id startswith pref attr by prefix keys if prefix return attr by prefix[prefix]return ' Ip Address'
def new test client cls **kwargs client cls debug logging True client login **kwargs return client
def create ansi color dict color cls return {u'ansidefault' color cls BLACK u'ansiblack' color cls BLACK u'ansidarkgray' color cls BLACK color cls INTENSITY u'ansilightgray' color cls GRAY u'ansiwhite' color cls GRAY color cls INTENSITY u'ansidarkred' color cls RED u'ansidarkgreen' color cls GREEN u'ansibrown' color cls YELLOW u'ansidarkblue' color cls BLUE u'ansipurple' color cls MAGENTA u'ansiteal' color cls CYAN u'ansired' color cls RED color cls INTENSITY u'ansigreen' color cls GREEN color cls INTENSITY u'ansiyellow' color cls YELLOW color cls INTENSITY u'ansiblue' color cls BLUE color cls INTENSITY u'ansifuchsia' color cls MAGENTA color cls INTENSITY u'ansiturquoise' color cls CYAN color cls INTENSITY }
def create ansi color dict color cls return {u'ansidefault' color cls BLACK u'ansiblack' color cls BLACK u'ansidarkgray' color cls BLACK color cls INTENSITY u'ansilightgray' color cls GRAY u'ansiwhite' color cls GRAY color cls INTENSITY u'ansidarkred' color cls RED u'ansidarkgreen' color cls GREEN u'ansibrown' color cls YELLOW u'ansidarkblue' color cls BLUE u'ansipurple' color cls MAGENTA u'ansiteal' color cls CYAN u'ansired' color cls RED color cls INTENSITY u'ansigreen' color cls GREEN color cls INTENSITY u'ansiyellow' color cls YELLOW color cls INTENSITY u'ansiblue' color cls BLUE color cls INTENSITY u'ansifuchsia' color cls MAGENTA color cls INTENSITY u'ansiturquoise' color cls CYAN color cls INTENSITY }
def Null Controller * args ** kwargs return None
def find interface resource class or interface if I Interface provided By class or interface test class or interface provided Byelse test lambda arg isinstance arg class or interface for location in lineage resource if test location return location
def find interface resource class or interface if I Interface provided By class or interface test class or interface provided Byelse test lambda arg isinstance arg class or interface for location in lineage resource if test location return location
def custom url generator metadata global global siteurlglobal siteurl generator settings['SITEURL']
def kname obj if isinstance obj dict return [obj get 'metadata' {} get 'name' '' ]elif isinstance obj list tuple names []for i in obj names append i get 'metadata' {} get 'name' '' return nameselse return ' Unknowntype'
@importorskip 'PIL' @importorskip modname tkinter @xfail is darwin reason ' Issue# 1895 Knowntofailwithmacpython-python orgbinary ' def test pil tkinter pyi builder pyi builder test source '\nimport PIL Image\n\n# Staticallyimportingthe Tkinterpackageshouldsucceed implyingthis\n#importationsuccessfullyoverrodetheexclusionofthispackage\n#requestedby"PIL"packagehooks Toensure Py Installerparsesthis\n#importandfreezesthispackagewiththistest thisimportisstatic \ntry \nimport{modname tkinter}\nexcept Import Error \nraise System Exit \'ERROR Module{modname tkinter}is NO Tbundled \' \n' format modname tkinter modname tkinter
@importorskip 'PIL' @importorskip modname tkinter @xfail is darwin reason ' Issue# 1895 Knowntofailwithmacpython-python orgbinary ' def test pil tkinter pyi builder pyi builder test source '\nimport PIL Image\n\n# Staticallyimportingthe Tkinterpackageshouldsucceed implyingthis\n#importationsuccessfullyoverrodetheexclusionofthispackage\n#requestedby"PIL"packagehooks Toensure Py Installerparsesthis\n#importandfreezesthispackagewiththistest thisimportisstatic \ntry \nimport{modname tkinter}\nexcept Import Error \nraise System Exit \'ERROR Module{modname tkinter}is NO Tbundled \' \n' format modname tkinter modname tkinter
def pr api url from web url url path '/' join map partial replace 'pull' 'pulls' url path parts url return API BASE URL + REPOS API PATH + path
def write proj fid projs if len projs 0 returnstart block fid FIFF FIFFB PROJ for proj in projs start block fid FIFF FIFFB PROJ ITEM write int fid FIFF FIFF NCHAN proj['data']['ncol'] write name list fid FIFF FIFF PROJ ITEM CH NAME LIST proj['data']['col names'] write string fid FIFF FIFF NAME proj['desc'] write int fid FIFF FIFF PROJ ITEM KIND proj['kind'] if proj['kind'] FIFF FIFFV PROJ ITEM FIELD write float fid FIFF FIFF PROJ ITEM TIME 0 0 write int fid FIFF FIFF PROJ ITEM NVEC proj['data']['nrow'] write int fid FIFF FIFF MNE PROJ ITEM ACTIVE proj['active'] write float matrix fid FIFF FIFF PROJ ITEM VECTORS proj['data']['data'] if proj['explained var'] is not None write float fid FIFF FIFF MNE ICA PCA EXPLAINED VAR proj['explained var'] end block fid FIFF FIFFB PROJ ITEM end block fid FIFF FIFFB PROJ
def parse backend conf backend **kwargs conf settings CACHES get backend None if conf is not None args conf copy args update kwargs backend args pop 'BACKEND' location args pop 'LOCATION' '' return backend location args else try mod path cls name backend rsplit ' ' 1 mod importlib import module mod path backend cls getattr mod cls name except Attribute Error Import Error Value Error raise Invalid Cache Backend Error " Couldnotfindbackend'%s'" % backend location kwargs pop 'LOCATION' '' return backend location kwargs raise Invalid Cache Backend Error " Couldn'tfindacachebackendnamed'%s'" % backend
def parse backend conf backend **kwargs conf settings CACHES get backend None if conf is not None args conf copy args update kwargs backend args pop 'BACKEND' location args pop 'LOCATION' '' return backend location args else try mod path cls name backend rsplit ' ' 1 mod importlib import module mod path backend cls getattr mod cls name except Attribute Error Import Error Value Error raise Invalid Cache Backend Error " Couldnotfindbackend'%s'" % backend location kwargs pop 'LOCATION' '' return backend location kwargs raise Invalid Cache Backend Error " Couldn'tfindacachebackendnamed'%s'" % backend
def parse backend conf backend **kwargs conf settings CACHES get backend None if conf is not None args conf copy args update kwargs backend args pop 'BACKEND' location args pop 'LOCATION' '' return backend location args else try mod path cls name backend rsplit ' ' 1 mod importlib import module mod path backend cls getattr mod cls name except Attribute Error Import Error Value Error raise Invalid Cache Backend Error " Couldnotfindbackend'%s'" % backend location kwargs pop 'LOCATION' '' return backend location kwargs raise Invalid Cache Backend Error " Couldn'tfindacachebackendnamed'%s'" % backend
def regions from boto machinelearning layer 1 import Machine Learning Connectionreturn get regions 'machinelearning' connection cls Machine Learning Connection
def depth limited walk top max depth None for root dirs files in os walk top if max depth is not None rel depth root count os sep - top count os sep if rel depth > max depth del dirs[ ] yield str root list dirs list files
def depth limited walk top max depth None for root dirs files in os walk top if max depth is not None rel depth root count os sep - top count os sep if rel depth > max depth del dirs[ ] yield str root list dirs list files
def depth limited walk top max depth None for root dirs files in os walk top if max depth is not None rel depth root count os sep - top count os sep if rel depth > max depth del dirs[ ] yield str root list dirs list files
def parse name and version p m NAME VERSION RE match p if not m raise Distlib Exception " Ill-formedname/versionstring '%s'" % p d m groupdict return d['name'] strip lower d['ver']
def initial image sum width height channels if channels 1 return np zeros height width np float 64 else return np zeros height width channels np float 64
@require POST@csrf protectdef reposync request if not test user authenticated request return login request next '/cobbler web/reposync' expired True remote background reposync {'names' '' 'tries' 3} request session['token'] return Http Response Redirect '/cobbler web/task created'
def js to url function converter if hasattr converter 'js to url function' data converter js to url function else for cls in getmro type converter if cls in js to url functions data js to url functions[cls] converter breakelse return 'encode URI Component'return ' function value {%s} ' % data
def Get Tensor Op Name x t x name rsplit ' ' 1 if len t 1 return x nameelse return t[ 0 ]
def get changectx for changeset repo changeset revision **kwd for changeset in repo changelog ctx repo changectx changeset if str ctx changeset revision return ctxreturn None
def main input output offset 0bytes per line 16 bytes per sentence 2input chunk bytes per line * 10 while True data input read bytes per line if data '' returnfor off ordinals printable in xxd offset data bytes per line bytes per sentence def ashex ord return '% 02 x' % ord hex '' join ['' join map ashex sentence for sentence in ordinals] hex hex ljust bytes per line * 2 + bytes per line / bytes per sentence - 1 output write '% 07 x %s%s\n' % off hex printable offset + len data
def main input output offset 0bytes per line 16 bytes per sentence 2input chunk bytes per line * 10 while True data input read bytes per line if data '' returnfor off ordinals printable in xxd offset data bytes per line bytes per sentence def ashex ord return '% 02 x' % ord hex '' join ['' join map ashex sentence for sentence in ordinals] hex hex ljust bytes per line * 2 + bytes per line / bytes per sentence - 1 output write '% 07 x %s%s\n' % off hex printable offset + len data
def minute frame to session frame minute frame calendar how Ordered Dict c MINUTE TO SESSION OHCLV HOW[c] for c in minute frame columns return minute frame groupby calendar minute to session label agg how
def register sentry client worker def send to sentry job *exc info client capture Exception exc info exc info extra {u'job id' job id u'func' job func name u'args' job args u'kwargs' job kwargs u'description' job description} worker push exc handler send to sentry
def is matching G matching if isinstance matching dict matching matching dict to set matching return all len set e1 & set e2 0 for e1 e2 in combinations matching 2
def progressbar iterable None length None label None show eta True show percent None show pos False item show func None fill char '#' empty char '-' bar template '% label s[% bar s]% info s' info sep '' width 36 file None color None from termui impl import Progress Barcolor resolve color default color return Progress Bar iterable iterable length length show eta show eta show percent show percent show pos show pos item show func item show func fill char fill char empty char empty char bar template bar template info sep info sep file file label label width width color color
def progressbar iterable None length None label None show eta True show percent None show pos False item show func None fill char '#' empty char '-' bar template '% label s[% bar s]% info s' info sep '' width 36 file None color None from termui impl import Progress Barcolor resolve color default color return Progress Bar iterable iterable length length show eta show eta show percent show percent show pos show pos item show func item show func fill char fill char empty char empty char bar template bar template info sep info sep file file label label width width color color
def progressbar iterable None length None label None show eta True show percent None show pos False item show func None fill char '#' empty char '-' bar template '% label s[% bar s]% info s' info sep '' width 36 file None color None from termui impl import Progress Barcolor resolve color default color return Progress Bar iterable iterable length length show eta show eta show percent show percent show pos show pos item show func item show func fill char fill char empty char empty char bar template bar template info sep info sep file file label label width width color color
def progressbar iterable None length None label None show eta True show percent None show pos False item show func None fill char '#' empty char '-' bar template '% label s[% bar s]% info s' info sep '' width 36 file None color None from termui impl import Progress Barcolor resolve color default color return Progress Bar iterable iterable length length show eta show eta show percent show percent show pos show pos item show func item show func fill char fill char empty char empty char bar template bar template info sep info sep file file label label width width color color
def adv index broadcastable pattern a idx def replace slice v if isinstance v gof Apply if len v outputs 1 raise Value Error ' Itisambiguouswhichoutputofamulti-output Ophastobefetched ' v else v v outputs[ 0 ]if None Const equals v return Noneif isinstance v type Slice Type return slice None None return numpy zeros 2 * v ndim int newidx tuple map replace slice idx fakeshape [ 2 - bc for bc in a broadcastable]retshape numpy empty fakeshape [newidx] shapereturn tuple [ dim 1 for dim in retshape]
def user has passed entrance exam request course if not course has entrance exam course return Trueif not request user is authenticated return Falseentrance exam score get entrance exam score request course if entrance exam score > course entrance exam minimum score pct return Truereturn False
def user has passed entrance exam request course if not course has entrance exam course return Trueif not request user is authenticated return Falseentrance exam score get entrance exam score request course if entrance exam score > course entrance exam minimum score pct return Truereturn False
def user has passed entrance exam request course if not course has entrance exam course return Trueif not request user is authenticated return Falseentrance exam score get entrance exam score request course if entrance exam score > course entrance exam minimum score pct return Truereturn False
def user has passed entrance exam request course if not course has entrance exam course return Trueif not request user is authenticated return Falseentrance exam score get entrance exam score request course if entrance exam score > course entrance exam minimum score pct return Truereturn False
def user has passed entrance exam request course if not course has entrance exam course return Trueif not request user is authenticated return Falseentrance exam score get entrance exam score request course if entrance exam score > course entrance exam minimum score pct return Truereturn False
def create sink sink name destination bucket filter logging client logging Client destination 'storage googleapis com/{bucket}' format bucket destination bucket sink logging client sink sink name filter destination if sink exists print ' Sink{}alreadyexists ' format sink name returnsink create print ' Createdsink{}' format sink name
def create sink sink name destination bucket filter logging client logging Client destination 'storage googleapis com/{bucket}' format bucket destination bucket sink logging client sink sink name filter destination if sink exists print ' Sink{}alreadyexists ' format sink name returnsink create print ' Createdsink{}' format sink name
def setup hass config mqtt loader get component 'mqtt' topic config[DOMAIN] get 'topic' DEFAULT TOPIC entity id 'mqtt example last message'def message received topic payload qos ' Anew MQT Tmessagehasbeenreceived 'hass states set entity id payload mqtt subscribe hass topic message received hass states set entity id ' Nomessages' def set state service call ' Servicetosendamessage 'mqtt publish hass topic call data get 'new state' hass services register DOMAIN 'set state' set state service return True
def get Points From File num Points file points []for point Index in xrange num Points x get Little Endian Float Given File file y get Little Endian Float Given File file points append complex x y return points
def get tile filename coord db connect filename db text factory bytesformats {'png' 'image/png' 'jpg' 'image/jpeg' 'json' 'application/json' None None}format db execute "SELEC Tvalue FRO Mmetadata WHER Ename 'format'" fetchone format format and format[ 0 ] or None mime type formats[format]tile row 2 ** coord zoom - 1 - coord row q 'SELEC Ttile data FRO Mtiles WHER Ezoom level ?AN Dtile column ?AN Dtile row ?'content db execute q coord zoom coord column tile row fetchone content content and content[ 0 ] or None return mime type content
def absent name profile 'splunk' ret {'name' name 'changes' {} 'result' True 'comment' '{ 0 }isabsent ' format name }target salt ['splunk search get'] name profile profile if target if opts ['test'] ret {}ret['name'] nameret['comment'] ' Woulddelete{ 0 }' format name ret['result'] Nonereturn retresult salt ['splunk search delete'] name profile profile if result ret['comment'] '{ 0 }wasdeleted' format name else ret['comment'] ' Failedtodelete{ 0 }' format name ret['result'] Falsereturn ret
def indent elem level 0 i '\n' + level * '' if len elem if not elem text or not elem text strip elem text i + '' if not elem tail or not elem tail strip elem tail ifor child in elem indent child level + 1 if not child tail or not child tail strip child tail iif not elem tail or not elem tail strip elem tail ielif level and not elem tail or not elem tail strip elem tail i
def safe update dict to dict from for key val in dict dict from iteritems if key in dict to raise Key Error key dict to[key] valreturn dict to
def locate prefix by name ctx name if name ROOT ENV NAME return ctx root dirfor envs dir in chain ctx envs dirs + os getcwd prefix join envs dir name if isdir prefix return prefixraise Conda Environment Not Found Error name
@control command def enable events state dispatcher state consumer event dispatcherif dispatcher groups and u'task' not in dispatcher groups dispatcher groups add u'task' logger info u' Eventsofgroup{task}enabledbyremote ' return ok u'taskeventsenabled' return ok u'taskeventsalreadyenabled'
def setup platform hass config add devices discovery info None from heatmiser V 3 import heatmiser connectionipaddress config get CONF IPADDRESS port str config get CONF PORT tstats config get CONF TSTATS serport connection connection ipaddress port serport open for thermostat tstat in tstats items add devices [ Heatmiser V 3 Thermostat heatmiser tstat get CONF ID tstat get CONF NAME serport ] return
def add git host key module url accept hostkey True create dir True if is ssh url url fqdn get fqdn url if fqdn known host check hostkey module fqdn if not known host if accept hostkey rc out err add host key module fqdn create dir create dir if rc 0 module fail json msg 'failedtoadd%shostkey %s' % fqdn out + err else module fail json msg '%shasanunknownhostkey Setaccept hostkeyto Trueormanuallyaddthehostkeypriortorunningthegitmodule' % fqdn
def set lang request profile if profile language request session[LANGUAGE SESSION KEY] profile language
def get storage path path app id app id app id replace ' ' ' ' rpartition '~' if path is None for path in generate storage paths app id try os mkdir path 448 except OS Error as e if e errno errno EEXIST if sys platform 'win 32 ' or os stat path st mode & 511 448 and os path isdir path return pathelse continueraiseelse return pathelif not os path exists path os mkdir path return pathelif not os path isdir path raise IO Error 'thegivenstoragepath%risafile adirectorywasexpected' % path else return path
@declareddef ok obj output set value obj output None 0
def notice send self print ' Sending Local Notification'growl Growl Growl Notifier application Name self headers[' Application- Name'] notifications [self headers[' Notification- Name']] notice Icon get resource self ' Notification- Icon' growl notify note Type self headers[' Notification- Name'] title self headers[' Notification- Title'] description self headers get ' Notification- Text' '' icon notice Icon return self encode
def ip for request request meta request MET Areturn meta get u'HTTP X FORWARDED FOR' meta[u'REMOTE ADDR'] split u' ' [0 ]
def add Grid Row diameter grid Path loops Complex maximum Complex row Index x y zigzag row []while x < maximum Complex real point complex x y if euclidean get Is In Filled Region loops Complex point row append point x + diameter realif zigzag and row Index % 2 1 row reverse grid Path + row
def list 2 hexstr intlist intsize 4 result ''for value in intlist if isinstance value str result + valueelse result + int 2 hexstr value intsize return result
def list 2 hexstr intlist intsize 4 result ''for value in intlist if isinstance value str result + valueelse result + int 2 hexstr value intsize return result
def find intermediate color lowcolor highcolor intermed diff 0 float highcolor[ 0 ] - lowcolor[ 0 ] diff 1 float highcolor[ 1 ] - lowcolor[ 1 ] diff 2 float highcolor[ 2 ] - lowcolor[ 2 ] return lowcolor[ 0 ] + intermed * diff 0 lowcolor[ 1 ] + intermed * diff 1 lowcolor[ 2 ] + intermed * diff 2
def get context context host get request site address links []for route page in get pages iteritems if not page no sitemap links append {u'loc' urllib basejoin host urllib quote page name encode u'utf- 8 ' u'lastmod' nowdate } for route data in get all page context from doctypes iteritems links append {u'loc' urllib basejoin host urllib quote route or u'' encode u'utf- 8 ' u'lastmod' get datetime data get u'modified' strftime u'%Y-%m-%d' } return {u'links' links}
def translate sequence table ' Standard' stop symbol '*' to stop False cds False gap None if isinstance sequence Seq return sequence translate table stop symbol to stop cds elif isinstance sequence Mutable Seq return sequence toseq translate table stop symbol to stop cds else try codon table Codon Table ambiguous generic by id[int table ]except Value Error codon table Codon Table ambiguous generic by name[table]except Attribute Error Type Error if isinstance table Codon Table Codon Table codon table tableelse raise Value Error ' Badtableargument' return translate str sequence codon table stop symbol to stop cds gap gap
def dehydrate content ratings content ratings for body in content ratings or {} content ratings[body] dehydrate content rating content ratings[body] return content ratings
def make local path s return s replace '/' os sep
def bayesian info criterion log likelihood n params n samples return n params * np log n samples - 2 0 * log likelihood
def bayesian info criterion log likelihood n params n samples return n params * np log n samples - 2 0 * log likelihood
def bayesian info criterion log likelihood n params n samples return n params * np log n samples - 2 0 * log likelihood
def find cover page container ver container opf version parsedif ver major < 3 mm container mime mapguide type map container guide type mapfor ref type name in guide type map iteritems if ref type lower u'cover' and mm get name u'' lower in OEB DOCS return nameelse for name in container manifest items with property u'calibre title-page' return name
def get valid user user None if user is None theuser get default user elif isinstance user basestring theuser get user model objects get username user elif user user get anonymous raise Geo Node Exception ' Theuseruploadingfilesmustnotbeanonymous' else theuser userassert isinstance theuser get user model return theuser
def add application with volume node state manifestation list node state manifestations values [0 ]return node state set 'applications' { Application name u'myapplication' image Docker Image from string u'image' volume Attached Volume manifestation manifestation mountpoint File Path '/data' }
def add application with volume node state manifestation list node state manifestations values [0 ]return node state set 'applications' { Application name u'myapplication' image Docker Image from string u'image' volume Attached Volume manifestation manifestation mountpoint File Path '/data' }
def add application with volume node state manifestation list node state manifestations values [0 ]return node state set 'applications' { Application name u'myapplication' image Docker Image from string u'image' volume Attached Volume manifestation manifestation mountpoint File Path '/data' }
def add application with volume node state manifestation list node state manifestations values [0 ]return node state set 'applications' { Application name u'myapplication' image Docker Image from string u'image' volume Attached Volume manifestation manifestation mountpoint File Path '/data' }
@pytest fixture scope u'session' def celery worker pool return u'solo'
@pytest fixture scope u'session' def celery worker pool return u'solo'
def export cwd remote target None user None username None password None revision 'HEAD' *opts opts + remote if target opts + target revision args '-r'opts + revision args str revision return run svn 'export' cwd user username password opts
def polynomial reduce mod poly polymod p assert polymod[ -1 ] 1 assert len polymod > 1 while len poly > len polymod if poly[ -1 ] 0 for i in range 2 len polymod + 1 poly[ - i ] poly[ - i ] - poly[ -1 ] * polymod[ - i ] % p poly poly[ 0 -1 ]return poly
def cache global name generate try result read global name except Cache Miss result generate write global name result return result
def restrict forward to stc fwd stc fwd out deepcopy fwd src sel stc src sel fwd['src'] stc fwd out['source rr'] fwd['source rr'][src sel]fwd out['nsource'] len src sel if is fixed orient fwd idx src selelse idx 3 * src sel[ None] + np arange 3 ravel fwd out['source nn'] fwd['source nn'][idx]fwd out['sol']['data'] fwd['sol']['data'][ idx]fwd out['sol']['ncol'] len idx for i in range 2 fwd out['src'][i]['vertno'] stc vertices[i]fwd out['src'][i]['nuse'] len stc vertices[i] fwd out['src'][i]['inuse'] fwd['src'][i]['inuse'] copy fwd out['src'][i]['inuse'] fill 0 fwd out['src'][i]['inuse'][stc vertices[i]] 1fwd out['src'][i]['use tris'] np array [] int fwd out['src'][i]['nuse tri'] np array [0 ] return fwd out
def restrict forward to stc fwd stc fwd out deepcopy fwd src sel stc src sel fwd['src'] stc fwd out['source rr'] fwd['source rr'][src sel]fwd out['nsource'] len src sel if is fixed orient fwd idx src selelse idx 3 * src sel[ None] + np arange 3 ravel fwd out['source nn'] fwd['source nn'][idx]fwd out['sol']['data'] fwd['sol']['data'][ idx]fwd out['sol']['ncol'] len idx for i in range 2 fwd out['src'][i]['vertno'] stc vertices[i]fwd out['src'][i]['nuse'] len stc vertices[i] fwd out['src'][i]['inuse'] fwd['src'][i]['inuse'] copy fwd out['src'][i]['inuse'] fill 0 fwd out['src'][i]['inuse'][stc vertices[i]] 1fwd out['src'][i]['use tris'] np array [] int fwd out['src'][i]['nuse tri'] np array [0 ] return fwd out
def critical pair f g ring domain ring domainltf Polyn f L Tltg Polyn g L Tlt monomial lcm ltf[ 0 ] ltg[ 0 ] domain one um term div lt ltf domain vm term div lt ltg domain fr lbp mul term lbp Sign f Polyn f leading term Num f um gr lbp mul term lbp Sign g Polyn g leading term Num g vm if lbp cmp fr gr -1 return Sign gr vm g Sign fr um f else return Sign fr um f Sign gr vm g
def get namespace choices return NAMESPACE CHOICES
def test description on big sentenced steps feature Feature from string FEATURE 4 assert equals feature description ' Asacleverguy\n Iwanttodescribethis Feature\n Sothat Icantakecareofmy Scenario'
def add handler app handler name func key None handler adder getattr app handler name handler funcs name '{ 0 } funcs' format handler name handler funcs getattr app handler funcs name if func not in handler funcs get key [] handler adder func
def Out Rbrace Dedent Level Output '}'
def multiplexer conditions def multiplexer rl expr for key rule in conditions items if key expr return rule expr return multiplexer rl
def stop server port 7000 conn httplib HTTP Connection 'localhost %d' % port conn request 'QUIT' '/' conn getresponse
def stop server port 7000 conn httplib HTTP Connection 'localhost %d' % port conn request 'QUIT' '/' conn getresponse
def invhilbert n exact False from scipy special import combif exact if n > 14 dtype objectelse dtype np int 64 else dtype np float 64 invh np empty n n dtype dtype for i in xrange n for j in xrange 0 i + 1 s i + j invh[ i j ] -1 ** s * s + 1 * comb n + i n - j - 1 exact * comb n + j n - i - 1 exact * comb s i exact ** 2 if i j invh[ j i ] invh[ i j ]return invh
def shared cluster conf False cluster shared cluster internal closers []if conf closers extend [hadoop conf HDFS CLUSTERS['default'] NN HOST set for testing 'localhost' hadoop conf HDFS CLUSTERS['default'] NN HDFS PORT set for testing cluster namenode port hadoop conf MR CLUSTERS['default'] HOST set for testing 'localhost' hadoop conf MR CLUSTERS['default'] JT THRIFT PORT set for testing cluster jt thrift port ] old caches clear sys caches def finish if conf restore sys caches old caches for x in closers x cluster shutdown finishreturn cluster
def filetime from timestamp timestamp moment datetime fromtimestamp timestamp delta from utc moment - datetime utcfromtimestamp timestamp return dt to filetime moment delta from utc
def setup platform hass config add devices discovery info None channels config get CONF CHANNELS [] add devices [ Twitch Sensor channel for channel in channels]
@ docstring 'release-groups' browse True def browse release groups artist None release None release type [] includes [] limit None offset None valid includes VALID BROWSE INCLUDES['release-groups']params {'artist' artist 'release' release}return browse impl 'release-group' includes valid includes limit offset params [] release type
def Momentum Adjustor final momentum start saturate warnings warn 'sgd Momentum Adjustorinterfaceisdeprecatedandwillbecomeofficiallyunsupportedasof May 9 2014 Pleaseuse`learning rule Momentum Adjustor`instead ' return LR Momentum Adjustor final momentum start saturate
def safe quote val SAFE QUOTE CHARS '/ ?& 'try ret urllib parse quote val safe SAFE QUOTE CHARS except Key Error ret urllib parse quote val encode 'utf- 8 ' safe SAFE QUOTE CHARS return ret
def fake Target Function pass
def build article url '' config None **kwargs config config or Configuration config extend config config kwargs url url or '' a Article url config config return a
def uncache zipdir path from zipimport import zip directory cache as zdc uncache path zdc uncache path sys path importer cache
def uncache zipdir path from zipimport import zip directory cache as zdc uncache path zdc uncache path sys path importer cache
def uncache zipdir path from zipimport import zip directory cache as zdc uncache path zdc uncache path sys path importer cache
def uncache zipdir path from zipimport import zip directory cache as zdc uncache path zdc uncache path sys path importer cache
def beacon config ret []with salt utils fopen WTMP 'rb' as fp loc context get LOC KEY 0 if loc 0 fp seek 0 2 context [LOC KEY] fp tell return retelse fp seek loc while True raw fp read SIZE if len raw SIZE return ret context [LOC KEY] fp tell pack struct unpack FMT raw event {}for ind field in enumerate FIELDS event[field] pack[ind]if isinstance event[field] str event[field] event[field] strip '\x 00 ' ret append event return ret
def beacon config ret []with salt utils fopen WTMP 'rb' as fp loc context get LOC KEY 0 if loc 0 fp seek 0 2 context [LOC KEY] fp tell return retelse fp seek loc while True raw fp read SIZE if len raw SIZE return ret context [LOC KEY] fp tell pack struct unpack FMT raw event {}for ind field in enumerate FIELDS event[field] pack[ind]if isinstance event[field] str event[field] event[field] strip '\x 00 ' ret append event return ret
def expose func None alias None def expose func func exposed Trueif alias is not None if isinstance alias text or bytes parents[alias replace ' ' ' ' ] funcelse for a in alias parents[a replace ' ' ' ' ] funcreturn funcimport sysimport typesdecoratable types types Function Type types Method Type type if six PY 2 decoratable types + types Class Type if isinstance func decoratable types if alias is None func exposed Truereturn funcelse parents sys getframe 1 f localsreturn expose func elif func is None if alias is None parents sys getframe 1 f localsreturn expose else parents sys getframe 1 f localsreturn expose else parents sys getframe 1 f localsalias funcreturn expose
def unicode sorter input key 1 input lower key 1 key 1 replace u'\xe 4 ' u'a' key 1 key 1 replace u'\xf 6 ' u'o' key 1 key 1 replace u'\xfc' u'u' key 1 key 1 replace u'\xdf' u'ss' return key 1
def unicode sorter input key 1 input lower key 1 key 1 replace u'\xe 4 ' u'a' key 1 key 1 replace u'\xf 6 ' u'o' key 1 key 1 replace u'\xfc' u'u' key 1 key 1 replace u'\xdf' u'ss' return key 1
def setup platform hass config add devices discovery info None name config get CONF NAME sink name config get CONF SINK NAME source name config get CONF SOURCE NAME host config get CONF HOST port config get CONF PORT buffer size config get CONF BUFFER SIZE tcp timeout config get CONF TCP TIMEOUT server id str format '{ 0 } {1 }' host port if server id in PULSEAUDIO SERVERS server PULSEAUDIO SERVERS[server id]else server PA Server host port buffer size tcp timeout PULSEAUDIO SERVERS[server id] serveradd devices [PA Loopback Switch hass name server sink name source name ]
def wrap exceptions fun @functools wraps fun def wrapper self *args **kwargs try return fun self *args **kwargs except OS Error as err if err errno in ACCESS DENIED SET raise Access Denied self pid self name if err errno errno ESRCH raise No Such Process self pid self name raisereturn wrapper
def get file subs from folder addon user kind path name folder dict kind kind path path name name file tree addon get file tree filenode folder user user version 'latest-published' return list of files file tree
def get file subs from folder addon user kind path name folder dict kind kind path path name name file tree addon get file tree filenode folder user user version 'latest-published' return list of files file tree
def task package install package name distribution package source Package Source base url installer get base url and installer for distro distribution package source build server package source branch return installer package name distribution package source base url
def quote x if istask x or type x is list return literal x return x
def quote x if istask x or type x is list return literal x return x
def quote x if istask x or type x is list return literal x return x
def quote x if istask x or type x is list return literal x return x
def fsync files filenames touched directories set mode os O RDONL Yif hasattr os 'O BINARY' mode os O BINAR Yfor filename in filenames fd os open filename mode os fsync fd os close fd touched directories add os path dirname filename if hasattr os 'O DIRECTORY' for dirname in touched directories fd os open dirname os O RDONLY os O DIRECTORY os fsync fd os close fd
def fsync files filenames touched directories set mode os O RDONL Yif hasattr os 'O BINARY' mode os O BINAR Yfor filename in filenames fd os open filename mode os fsync fd os close fd touched directories add os path dirname filename if hasattr os 'O DIRECTORY' for dirname in touched directories fd os open dirname os O RDONLY os O DIRECTORY os fsync fd os close fd
def validate is document type option value if not isinstance value collections Mutable Mapping Raw BSON Document raise Type Error '%smustbeaninstanceofdict bson son SON bson raw bson Raw BSON Document oratypethatinheritsfromcollections Mutable Mapping' % option
def validate is document type option value if not isinstance value collections Mutable Mapping Raw BSON Document raise Type Error '%smustbeaninstanceofdict bson son SON bson raw bson Raw BSON Document oratypethatinheritsfromcollections Mutable Mapping' % option
def get port mapper return search upnp device add Callback lambda x U Pn P Mapper x
def upgrade migrate engine meta Meta Data bind migrate engine key pairs Table 'key pairs' meta autoload True shadow key pairs Table 'shadow key pairs' meta autoload True enum Enum 'ssh' 'x 509 ' metadata meta name 'keypair types' enum create keypair type Column 'type' enum nullable False server default keypair KEYPAIR TYPE SSH if hasattr key pairs c 'type' key pairs c type drop if hasattr shadow key pairs c 'type' shadow key pairs c type drop key pairs create column keypair type shadow key pairs create column keypair type copy
def suffix handlers default None error ' Therequestedsuffixdoesnotmatchanyofthoseallowed' def output type data request response path request pathhandler defaultfor suffix test suffix handler in handlers items if path endswith suffix test handler suffix handlerbreakif not handler raise falcon HTTP Not Acceptable error response content type handler content typereturn handler data request request response response output type doc ' Supportsanyofthefollowingformats {0 }' format ' ' join function doc for function in handlers values output type content type ' ' join handlers keys return output type
def suffix handlers default None error ' Therequestedsuffixdoesnotmatchanyofthoseallowed' def output type data request response path request pathhandler defaultfor suffix test suffix handler in handlers items if path endswith suffix test handler suffix handlerbreakif not handler raise falcon HTTP Not Acceptable error response content type handler content typereturn handler data request request response response output type doc ' Supportsanyofthefollowingformats {0 }' format ' ' join function doc for function in handlers values output type content type ' ' join handlers keys return output type
def get best unit unit a unit b a DATETIME UNITS[unit a]b DATETIME UNITS[unit b]if a 14 return unit bif b 14 return unit aif b > a return unit breturn unit a
def to base 85 x islong False size 10 if islong else 5 rems ''for i in xrange size rems b85 chars[ x % 85 ] + rems x // 85 return rems
def to base 85 x islong False size 10 if islong else 5 rems ''for i in xrange size rems b85 chars[ x % 85 ] + rems x // 85 return rems
@verbosedef load data condition 'visual' data format 'raw' data type 'experimental' path None force update False update path None verbose None if not condition lower in valid conditions raise Value Error ' Unknowncondition"%s"' % condition if data format not in valid data formats raise Value Error ' Unknowndata format"%s"' % data format if data type not in valid data types raise Value Error ' Unknowndata type"%s"' % data type urls url match condition data format data type data paths list for url in urls data paths extend data path url path force update update path return data paths
@nottestdef subtest iterator * names def dec f @wraps f def wrapped *args **kwargs names namesfailures []for scope in iterator scope tuple scope try f * args + scope **kwargs except Exception as e if not names names count failures append dict zip names scope e if failures raise Sub Test Failures *failures return wrappedreturn dec
@nottestdef subtest iterator * names def dec f @wraps f def wrapped *args **kwargs names namesfailures []for scope in iterator scope tuple scope try f * args + scope **kwargs except Exception as e if not names names count failures append dict zip names scope e if failures raise Sub Test Failures *failures return wrappedreturn dec
def match coordinates sky matchcoord catalogcoord nthneighbor 1 storekdtree u'kdtree sky' if catalogcoord isscalar or len catalogcoord < 1 raise Value Error u' Thecatalogforcoordinatematchingcannotbeascalarorlength- 0 ' newmatch matchcoord transform to catalogcoord match urepr newmatch data represent as Unit Spherical Representation newmatch u newmatch realize frame match urepr cat urepr catalogcoord data represent as Unit Spherical Representation newcat u catalogcoord realize frame cat urepr storekdtree catalogcoord cache get storekdtree storekdtree idx sep 2 d sep 3 d match coordinates 3d newmatch u newcat u nthneighbor storekdtree if not isinstance catalogcoord data Unit Spherical Representation or isinstance newmatch data Unit Spherical Representation sep 3 d catalogcoord[idx] separation 3d newmatch if isinstance storekdtree six string types catalogcoord cache[storekdtree] newcat u cache[storekdtree]elif storekdtree is True catalogcoord cache[u'kdtree'] newcat u cache[u'kdtree']return idx sep 2 d sep 3 d
def copy cache obj funcname cacheobj cacheattr get cache impl obj funcname cacheattrtry setattr obj cacheattr cacheobj dict [cacheattr] except Key Error pass
def get more info for log more info []site getattr frappe local u'site' None if site more info append u' Site {0 }' format site form dict getattr frappe local u'form dict' None if form dict more info append u' Form Dict {0 }' format frappe as json form dict if more info more info more info + [u''] return u'\n' join more info
def get max denom tup return max Fraction f denominator for f in tup
def update and define min max config minimum default maximum default minimum value minimum defaultmaximum value maximum defaultif config get CONF MINIMUM minimum value config get CONF MINIMUM if config get CONF MAXIMUM maximum value config get CONF MAXIMUM return minimum value maximum value
def update and define min max config minimum default maximum default minimum value minimum defaultmaximum value maximum defaultif config get CONF MINIMUM minimum value config get CONF MINIMUM if config get CONF MAXIMUM maximum value config get CONF MAXIMUM return minimum value maximum value
def test settings start date datetime datetime now for single date in start date + datetime timedelta n for n in range 370 print single dates Simple Scheduler settings s set trigger single date
def polar a side 'right' if side not in ['right' 'left'] raise Value Error "`side`mustbeeither'right'or'left'" a np asarray a if a ndim 2 raise Value Error '`a`mustbea 2 - Darray ' w s vh svd a full matrices False u w dot vh if side 'right' p vh T conj * s dot vh else p w * s dot w T conj return u p
def Make Expired Response reference json loads k Verify Response Renewed Expired return json dumps {'status' reference['status'] 'receipt' reference['receipt']}
def truncatechars value arg try length int arg except Value Error return valueif len value > length return value[ length - 3 ] + ' ' return value
def Names Of Defined Flags return ['tmod bar x' 'tmod bar y' 'tmod bar z' 'tmod bar t' 'tmod bar u' 'tmod bar v']
def lod sort by key list indexkey list sort lambda a b a[indexkey] < b[indexkey] return list
def lod sort by key list indexkey list sort lambda a b a[indexkey] < b[indexkey] return list
def reshape 2D X if hasattr X u'shape' if len X shape 1 if hasattr X[ 0 ] u'shape' X list X else X [X]elif len X shape 2 nrows ncols X shapeif nrows 1 X [X]elif ncols 1 X [X ravel ]else X [X[ i] for i in xrange ncols ]else raise Value Error u'input`X`musthave 2 orfewerdimensions' if not hasattr X[ 0 ] u' len ' X [X]else X [np ravel x for x in X]return X
def reshape 2D X if hasattr X u'shape' if len X shape 1 if hasattr X[ 0 ] u'shape' X list X else X [X]elif len X shape 2 nrows ncols X shapeif nrows 1 X [X]elif ncols 1 X [X ravel ]else X [X[ i] for i in xrange ncols ]else raise Value Error u'input`X`musthave 2 orfewerdimensions' if not hasattr X[ 0 ] u' len ' X [X]else X [np ravel x for x in X]return X
def reshape 2D X if hasattr X u'shape' if len X shape 1 if hasattr X[ 0 ] u'shape' X list X else X [X]elif len X shape 2 nrows ncols X shapeif nrows 1 X [X]elif ncols 1 X [X ravel ]else X [X[ i] for i in xrange ncols ]else raise Value Error u'input`X`musthave 2 orfewerdimensions' if not hasattr X[ 0 ] u' len ' X [X]else X [np ravel x for x in X]return X
def extra config user defined config base dir for root dir files in os walk base dir for name in files if name endswith ' yml' ' yaml' with open os path join root dir name 'rb' as f du merge dict user defined config yaml safe load f read or {} logger debug ' Mergedoverridesfromfile{}' format name
def extra config user defined config base dir for root dir files in os walk base dir for name in files if name endswith ' yml' ' yaml' with open os path join root dir name 'rb' as f du merge dict user defined config yaml safe load f read or {} logger debug ' Mergedoverridesfromfile{}' format name
def rand infiniband guid address guid []for i in range 8 guid append '% 02 x' % random randint 0 255 return ' ' join guid
def page not found request page name return page missing request page name True
def page not found request page name return page missing request page name True
def email outbox if not auth s3 logged in session error T ' Requires Login ' redirect URL c 'default' f 'user' args 'login' tablename 'msg email'table s3 db msg emails 3 filter table inbound False table inbound readable Falses 3 crud strings[tablename] Storage title display T ' Email Details' title list T ' Sent Emails' label list button T ' View Sent Emails' label delete button T ' Delete Email' msg record deleted T ' Emaildeleted' msg list empty T ' No Emailscurrentlyin Outbox' def postp r output if isinstance output dict add btn A T ' Compose' class 'action-btn' href URL f 'compose' output['rheader'] add btnreturn outputs 3 postp postps 3 db configure tablename editable False insertable False listadd False list fields ['id' 'date' 'to address' 'subject' 'body'] return s3 rest controller module 'email'
@app route '/' def resize app path os path dirname os path realpath file image path os path join app path 'assets/google logo jpg' img scipy misc imread image path img tinted scipy misc imresize img 300 300 output image path os path join app path 'assets/resized google logo jpg' scipy misc imsave output image path img tinted return ' Imageresized '
@app route '/' def resize app path os path dirname os path realpath file image path os path join app path 'assets/google logo jpg' img scipy misc imread image path img tinted scipy misc imresize img 300 300 output image path os path join app path 'assets/resized google logo jpg' scipy misc imsave output image path img tinted return ' Imageresized '
def compute node update context compute id values return IMPL compute node update context compute id values
@transaction non atomic requests@require POST@ensure csrf cookie@cache control no cache True no store True must revalidate True @require level 'staff' def get proctored exam results request course id query features ['user email' 'exam name' 'attempt code' 'allowed time limit mins' 'is sample attempt' 'started at' 'completed at' 'status']course key Course Key from string course id try lms djangoapps instructor task api submit proctored exam results report request course key query features status response ' Theproctoredexamresultsreportisbeingcreated Toviewthestatusofthereport see Pending Tasksbelow ' except Already Running Error status response ' Theproctoredexamresultsreportiscurrentlybeingcreated Toviewthestatusofthereport see Pending Tasksbelow Youwillbeabletodownloadthereportwhenitiscomplete ' return Json Response {'status' status response}
def get tempest default config dir global conf dir '/etc/tempest'xdg config os environ get 'XDG CONFIG HOME' os path expanduser '~/ config' user xdg global path os path join xdg config 'tempest' user global path os path join os path expanduser '~' ' tempest/etc' if os path isdir global conf dir return global conf direlif os path isdir user xdg global path return user xdg global pathelif os path isdir user global path return user global pathelse os makedirs user global path return user global path
def get tempest default config dir global conf dir '/etc/tempest'xdg config os environ get 'XDG CONFIG HOME' os path expanduser '~/ config' user xdg global path os path join xdg config 'tempest' user global path os path join os path expanduser '~' ' tempest/etc' if os path isdir global conf dir return global conf direlif os path isdir user xdg global path return user xdg global pathelif os path isdir user global path return user global pathelse os makedirs user global path return user global path
@task@log calldef remove if exists env venv path run u'rm-rf%s' % env venv path if exists env proj path run u'rm-rf%s' % env proj path for template in get templates values remote path template[u'remote path']if exists remote path sudo u'rm%s' % remote path if exists env repo path run u'rm-rf%s' % env repo path sudo u'supervisorctlupdate' psql u'DROPDATABASEIFEXISTS%s ' % env proj name psql u'DROPUSERIFEXISTS%s ' % env proj name
def create cover title authors series None series index 1 prefs None as qimage False u'templatesareignored toensurethatthespecifiedmetadataisused 'mi Metadata title authors if series mi series mi series index series series index d cprefs defaultsprefs override prefs prefs or cprefs title template d[u'title template'] subtitle template d[u'subtitle template'] footer template d[u'footer template'] return generate cover mi prefs prefs as qimage as qimage
def default loader name code '\nfrompackage controlimportsys path\nsys path add dependency %s \n' % repr name return dedent code lstrip
@handle db data error@require contextdef attachment specs update or create context attachment id specs session get session with session begin spec ref Nonefor key value in specs items try spec ref attachment specs get item context attachment id key session except exception Attachment Specs Not Found spec ref models Attachment Specs spec ref update {'key' key 'value' value 'attachment id' attachment id 'deleted' False} spec ref save session session return specs
def array repr oneline array r np array 2 string array separator u' ' suppress small True return u'' join l strip for l in r splitlines
def group if auth permission format 'popup' return ''def prep r if r method 'create' return Falsereturn Trues 3 prep prepoutput s3 rest controller 'pr' 'group' return output
def test g0 from import g0 assert g0 value 9 80665 assert g0 si value 9 80665 assert g0 cgs value 980 665 assert g0 uncertainty 0 assert g0 nameassert g0 referenceassert g0 unitassert g0 unit physical type u'acceleration'
def test g0 from import g0 assert g0 value 9 80665 assert g0 si value 9 80665 assert g0 cgs value 980 665 assert g0 uncertainty 0 assert g0 nameassert g0 referenceassert g0 unitassert g0 unit physical type u'acceleration'
def find igw vpc conn vpc id igw vpc conn get all internet gateways filters {'attachment vpc-id' vpc id} if not igw raise Ansible Igw Search Exception ' No IG Wfoundfor VPC{ 0 }' format vpc id elif len igw 1 return igw[ 0 ] idelse raise Ansible Igw Search Exception ' Multiple IG Wsfoundfor VPC{ 0 }' format vpc id
def retrieve discovery doc url http cache discovery cache None if cache discovery from import discovery cachefrom discovery cache import baseif cache is None cache discovery cache autodetect if cache content cache get url if content return contentactual url urlif 'REMOTE ADDR' in os environ actual url add query parameter url 'user Ip' os environ['REMOTE ADDR'] logger info 'UR Lbeingrequested GET%s' actual url resp content http request actual url if resp status > 400 raise Http Error resp content uri actual url try content content decode 'utf- 8 ' except Attribute Error passtry service json loads content except Value Error as e logger error ' Failedtoparseas JSON ' + content raise Invalid Json Error if cache discovery and cache cache set url content return content
def generate password hash password method 'sha 1 ' salt length 8 salt method 'plain' and gen salt salt length or '' h hash internal method salt password if h is None raise Type Error 'invalidmethod%r' % method return '%s$%s$%s' % method salt h
def cmidrule colindex dataset width rule '\\cmidrule %s {%d-%d}'if colindex 1 return rule % 'r' colindex colindex if colindex dataset width return rule % 'l' colindex colindex return rule % 'lr' colindex colindex
def cmidrule colindex dataset width rule '\\cmidrule %s {%d-%d}'if colindex 1 return rule % 'r' colindex colindex if colindex dataset width return rule % 'l' colindex colindex return rule % 'lr' colindex colindex
def adjustments from deltas no sids dense dates sparse dates column idx column name asset idx deltas ad series deltas[AD FIELD NAME]idx 0 0 return {dense dates get loc kd overwrite from dates ad series loc[kd] dense dates sparse dates idx v for kd v in deltas[column name] iteritems }
def adjustments from deltas no sids dense dates sparse dates column idx column name asset idx deltas ad series deltas[AD FIELD NAME]idx 0 0 return {dense dates get loc kd overwrite from dates ad series loc[kd] dense dates sparse dates idx v for kd v in deltas[column name] iteritems }
def adjustments from deltas no sids dense dates sparse dates column idx column name asset idx deltas ad series deltas[AD FIELD NAME]idx 0 0 return {dense dates get loc kd overwrite from dates ad series loc[kd] dense dates sparse dates idx v for kd v in deltas[column name] iteritems }
def adjustments from deltas no sids dense dates sparse dates column idx column name asset idx deltas ad series deltas[AD FIELD NAME]idx 0 0 return {dense dates get loc kd overwrite from dates ad series loc[kd] dense dates sparse dates idx v for kd v in deltas[column name] iteritems }
def adjustments from deltas no sids dense dates sparse dates column idx column name asset idx deltas ad series deltas[AD FIELD NAME]idx 0 0 return {dense dates get loc kd overwrite from dates ad series loc[kd] dense dates sparse dates idx v for kd v in deltas[column name] iteritems }
def adjustments from deltas no sids dense dates sparse dates column idx column name asset idx deltas ad series deltas[AD FIELD NAME]idx 0 0 return {dense dates get loc kd overwrite from dates ad series loc[kd] dense dates sparse dates idx v for kd v in deltas[column name] iteritems }
def test handshake protocol unsupported log message transport proto 'chat'message headers extend gen ws headers 'test' [0 ] with log 'aiohttp websocket' as ctx protocol do handshake message method message headers transport protocols [proto] assert protocol is None assert ctx records[ -1 ] msg ' Clientprotocols%rdon\xe 2 \x 80 \x 99 toverlapserver-knownones%r'
def create account directory id email password given Name surname **kwargs items {'email' email 'password' password 'given Name' given Name 'surname' surname}items update **kwargs status result query action 'directories' command '{ 0 }/accounts' format directory id data json dumps items header dict {' Content- Type' 'application/json charset UTF- 8 '} method 'POST' comps result['href'] split '/' return show account comps[ -1 ]
def gis update location tree feature user id None if user id auth s3 impersonate user id feature json loads feature path gis update location tree feature db commit return path
def gis update location tree feature user id None if user id auth s3 impersonate user id feature json loads feature path gis update location tree feature db commit return path
def fill defaults context builder sig args defaults ty sig return typellty context get data type ty args tuple args + tuple ir Constant llty d for d in defaults[len args ] sig signature * ty * len args + 1 return sig args
def unicode code code try if code isdigit return unichr int code else match unicode pattern match code if match value match group 1 or match group 2 return unichr int value 16 else return codeexcept Overflow Error as detail raise Value Error 'codetoolarge %s ' % detail
def generate Category filename 'simple csv' num Sequences 2 elements Per Seq 1 num Repeats 10 script Dir os path dirname file pathname os path join script Dir 'datasets' filename print ' Creating%s ' % pathname fields [ 'classification' 'string' '' 'field 1 ' 'string' '' ]out File File Record Stream pathname write True fields fields sequences []for i in range num Sequences seq [x for x in range i * elements Per Seq i + 1 * elements Per Seq ]sequences append seq seq Idxs []for i in range num Repeats seq Idxs + range num Sequences random shuffle seq Idxs for seq Idx in seq Idxs seq sequences[seq Idx]for x in seq out File append Record [str seq Idx str x ] out File close
def Current Audit Log now sec rdfvalue RDF Datetime Now As Seconds From Epoch rollover config lib CONFIG[' Logging aff 4 audit log rollover']current log now sec // rollover * rollover return ROOT URN Add 'audit' Add 'logs' Add str current log
def toint number if isinstance number float if number > 1 number round number 0 else number round math ceil number 0 return int number
def toint number if isinstance number float if number > 1 number round number 0 else number round math ceil number 0 return int number
def identify landmark gcs uri max results 4 batch request [{'image' {'source' {'gcs image uri' gcs uri}} 'features' [{'type' 'LANDMARK DETECTION' 'max Results' max results}]}]service get vision service request service images annotate body {'requests' batch request} response request execute return response['responses'][ 0 ] get 'landmark Annotations' None
def identify landmark gcs uri max results 4 batch request [{'image' {'source' {'gcs image uri' gcs uri}} 'features' [{'type' 'LANDMARK DETECTION' 'max Results' max results}]}]service get vision service request service images annotate body {'requests' batch request} response request execute return response['responses'][ 0 ] get 'landmark Annotations' None
@pytest mark django dbdef test save store fs change pootle path or store po directory tp 0 store fs fs store tp 0 store fsstore fs store storeother path '/en/project 0 /other po'fs store pootle path other pathwith pytest raises Validation Error fs store save fs store store Nonefs store save assert fs store store is None assert fs store pootle path other path fs store store storewith pytest raises Validation Error fs store save fs store pootle path store pootle pathfs store save assert fs store store store assert fs store pootle path store pootle path
@pytest mark django dbdef test save store fs change pootle path or store po directory tp 0 store fs fs store tp 0 store fsstore fs store storeother path '/en/project 0 /other po'fs store pootle path other pathwith pytest raises Validation Error fs store save fs store store Nonefs store save assert fs store store is None assert fs store pootle path other path fs store store storewith pytest raises Validation Error fs store save fs store pootle path store pootle pathfs store save assert fs store store store assert fs store pootle path store pootle path
@pytest mark django dbdef test save store fs change pootle path or store po directory tp 0 store fs fs store tp 0 store fsstore fs store storeother path '/en/project 0 /other po'fs store pootle path other pathwith pytest raises Validation Error fs store save fs store store Nonefs store save assert fs store store is None assert fs store pootle path other path fs store store storewith pytest raises Validation Error fs store save fs store pootle path store pootle pathfs store save assert fs store store store assert fs store pootle path store pootle path
@register inclusion tag u'breadcrumbs html' def feincms breadcrumbs page include self True ancs page get ancestors bc [ anc get absolute url anc short title for anc in ancs]if include self bc append None page short title return {u'trail' bc}
def convert to example filename image buffer label text height width colorspace 'RGB'channels 3image format 'JPEG'example tf train Example features tf train Features feature {'image/height' int 64 feature height 'image/width' int 64 feature width 'image/colorspace' bytes feature tf compat as bytes colorspace 'image/channels' int 64 feature channels 'image/class/label' int 64 feature label 'image/class/text' bytes feature tf compat as bytes text 'image/format' bytes feature tf compat as bytes image format 'image/filename' bytes feature tf compat as bytes os path basename filename 'image/encoded' bytes feature tf compat as bytes image buffer } return example
def create addon name icon type application **extra kwargs kwargs {'status' STATUS PUBLIC 'name' name 'slug' slugify name 'bayesian rating' random uniform 1 5 'average daily users' random randint 200 2000 'weekly downloads' random randint 200 2000 'created' datetime now 'last updated' datetime now 'icon type' icon type}kwargs update extra kwargs addon Addon objects create type ADDON EXTENSION **kwargs generate version addon addon app application addon update version addon status STATUS PUBLI Caddon save return addon
def rundeck registry xml parent data p XML Sub Element xml parent 'org jenkinsci plugins rundeck Rundeck Notifier' mappings [ 'job-id' 'job Id' None 'options' 'options' '' 'node-filters' 'node Filters' '' 'tag' 'tag' '' 'wait-for-rundeck' 'should Wait For Rundeck Job' False 'fail-the-build' 'should Fail The Build' False ]helpers convert mapping to xml p data mappings fail required True
def rundeck registry xml parent data p XML Sub Element xml parent 'org jenkinsci plugins rundeck Rundeck Notifier' mappings [ 'job-id' 'job Id' None 'options' 'options' '' 'node-filters' 'node Filters' '' 'tag' 'tag' '' 'wait-for-rundeck' 'should Wait For Rundeck Job' False 'fail-the-build' 'should Fail The Build' False ]helpers convert mapping to xml p data mappings fail required True
def rundeck registry xml parent data p XML Sub Element xml parent 'org jenkinsci plugins rundeck Rundeck Notifier' mappings [ 'job-id' 'job Id' None 'options' 'options' '' 'node-filters' 'node Filters' '' 'tag' 'tag' '' 'wait-for-rundeck' 'should Wait For Rundeck Job' False 'fail-the-build' 'should Fail The Build' False ]helpers convert mapping to xml p data mappings fail required True
def write file list cache opts data list cache w lock serial salt payload Serial opts with salt utils fopen list cache 'w+b' as fp fp write serial dumps data unlock cache w lock log trace ' Lockfile{ 0 }removed' format w lock
def normalize proj info make projector info['projs'] info get 'ch names' info get 'names' info['bads'] include active True inplace True
def normalize proj info make projector info['projs'] info get 'ch names' info get 'names' info['bads'] include active True inplace True
def Get Request Context global thread Local Contextreturn thread Local Context dict setdefault 'req Ctx' String Dict
def get bufsize iface if grains ['kernel'] ' Linux' if os path exists '/sbin/ethtool' return get bufsize linux iface return {}
def squeeze value return re sub '[\\x 00 -\\x 20 ]+' '' value strip
def install p Poll Reactor from twisted internet main import install Reactorinstall Reactor p
def run background process cmd out log None err log None cwd None kwargs {'shell' True 'cwd' cwd}if out log out log file open out log 'w' kwargs['stdout'] out log fileif err log err log file open err log 'w' kwargs['stderr'] err log fileproc subprocess Popen cmd **kwargs def exit handler "\n Send SIGIN Ttotheprocess'schildren Thisisimportant\nforrunningcommandsundercoverage ascoveragewillnot\nproducethecorrectartifactsifthechildprocessisn't\nkilledproperly \n"p 1 group psutil Process proc pid child pids p1 group get children recursive True for child pid in child pids os kill child pid pid signal SIGINT proc wait atexit register exit handler
def address ret {}cmd 'hciconfig'out salt ['cmd run'] cmd splitlines dev ''for line in out if line startswith 'hci' comps line split ' ' dev comps[ 0 ]ret[dev] {'device' dev 'path' '/sys/class/bluetooth/{ 0 }' format dev }if 'BD Address' in line comps line split ret[dev]['address'] comps[ 2 ]if 'DOWN' in line ret[dev]['power'] 'off'if 'UPRUNNING' in line ret[dev]['power'] 'on'return ret
def zconfint generic mean std mean alpha alternative if alternative in ['two-sided' '2 -sided' '2 s'] zcrit stats norm ppf 1 - alpha / 2 0 lower mean - zcrit * std mean upper mean + zcrit * std mean elif alternative in ['larger' 'l'] zcrit stats norm ppf alpha lower mean + zcrit * std mean upper np infelif alternative in ['smaller' 's'] zcrit stats norm ppf 1 - alpha lower - np inf upper mean + zcrit * std mean else raise Value Error 'invalidalternative' return lower upper
def interp net layers for l in layers m k h w net params[l][ 0 ] data shapeif m k and k 1 print 'input+outputchannelsneedtobethesameor output 1'raiseif h w print 'filtersneedtobesquare'raisefilt upsample filt h net params[l][ 0 ] data[range m range k ] filt
def formset *args **kw prefix kw pop 'prefix' 'form' total count kw pop 'total count' len args initial count kw pop 'initial count' len args data { prefix + '-TOTAL FORMS' total count prefix + '-INITIAL FORMS' initial count}for idx d in enumerate args data update '%s-%s-%s' % prefix idx k v for k v in d items data update kw return data
@register specialize@gof local optimizer [T mul] def local mul to sqr node if node op T mul if len node inputs 2 if node inputs[ 0 ] is node inputs[ 1 ] return [T sqr node inputs[ 0 ] ]
@pytest mark django dbdef test get path obj rf po directory default tp 0 language code tp 0 language codeproject code tp 0 project codelanguage code fake 'faf'project code fake 'fake-tutorial'request rf get '/' request user defaultfunc get path obj lambda x y x y func request project code project code assert isinstance request ctx obj Project with pytest raises Http 404 func request project code project code fake func request language code language code assert isinstance request ctx obj Language with pytest raises Http 404 func request language code language code fake func request language code language code project code project code assert isinstance request ctx obj Translation Project with pytest raises Http 404 func request language code language code fake project code project code
def log sum exp input tensor reduction indices None keep dims False input tensor tf convert to tensor input tensor dependencies [tf verify tensor all finite input tensor msg '' ]input tensor control flow ops with dependencies dependencies input tensor x max tf reduce max input tensor reduction indices keep dims True return tf squeeze x max + tf log tf reduce sum tf exp input tensor - x max reduction indices keep dims
def start new background thread target args kwargs None if kwargs is None kwargs {}request system service pb Start Background Request Request response system service pb Start Background Request Response try apiproxy stub map Make Sync Call 'system' ' Start Background Request' request response except apiproxy errors Application Error as error raise ERROR MAP[error application error] error error detail else return background Enqueue Background Thread response request id target args kwargs
def get data x ch idx if isinstance x Base Raw return x[ch idx][ 0 ]elif isinstance x Evoked return x data[ch idx]
def virtual if grains ['kernel'] ' Sun OS' and salt utils which 'profiles' return virtualname return False '{ 0 }modulecanonlybeloadedonasolarislikesystem' format virtualname
def virtual if grains ['kernel'] ' Sun OS' and salt utils which 'profiles' return virtualname return False '{ 0 }modulecanonlybeloadedonasolarislikesystem' format virtualname
def plot occlusion net X target square length 7 figsize 9 None return plot heat map net X figsize lambda net X n occlusion heatmap net X target[n] square length
def cleanup files patterns dry run False workdir ' ' current dir Path workdir python basedir Path Path sys executable dirname joinpath ' ' abspath error message Noneerror count 0for file pattern in patterns for file in path glob file pattern current dir if file abspath startswith python basedir continueif dry run print 'REMOVE %s dry-run ' % file else print 'REMOVE %s' % file try file remove p except os error as e message '%s %s' % e class name e print message + 'basedir ' + python basedir error count + 1if not error message error message messageif False and error message class Cleanup Error Runtime Error passraise Cleanup Error error message
def rfe single fit rfe estimator X y train test scorer X train y train safe split estimator X y train X test y test safe split estimator X y test train return rfe fit X train y train lambda estimator features score estimator X test[ features] y test scorer scores
def lineage resource while resource is not None yield resource try resource resource parent except Attribute Error resource None
def Rec Annotate tree annotate name annotate value for child in tree children Rec Annotate child annotate name annotate value if isinstance tree pytree Leaf cur annotate pytree utils Get Node Annotation tree annotate name default 0 if cur annotate < annotate value pytree utils Set Node Annotation tree annotate name annotate value
def Rec Annotate tree annotate name annotate value for child in tree children Rec Annotate child annotate name annotate value if isinstance tree pytree Leaf cur annotate pytree utils Get Node Annotation tree annotate name default 0 if cur annotate < annotate value pytree utils Set Node Annotation tree annotate name annotate value
def chain *brules def chain brl expr if not brules yield expr return head tail brules[ 0 ] brules[ 1 ] for nexpr in head expr for nnexpr in chain *tail nexpr yield nnexpr return chain brl
def unicodise safe string encoding None return unicodise deunicodise string encoding encoding replace u'\ufffd' '?'
@dispatch object basestring list tuple def create index t column name or names name None raise Not Implemented Error 'create indexnotimplementedfortype%r' % type t name
def handle errors errors format error func filename errors list sorted errors key str if not errors returnerror msg u'\n' join format error func error for error in errors raise Configuration Error u' The Composefile{file msg}isinvalidbecause \n{error msg}' format file msg u"'{}'" format filename if filename else u'' error msg error msg
def handle errors errors format error func filename errors list sorted errors key str if not errors returnerror msg u'\n' join format error func error for error in errors raise Configuration Error u' The Composefile{file msg}isinvalidbecause \n{error msg}' format file msg u"'{}'" format filename if filename else u'' error msg error msg
def validate min score min score if min score message '% min score sisnotavalidgradepercentage' % {'min score' min score} try min score int min score except Value Error raise Gating Validation Error message if min score < 0 or min score > 100 raise Gating Validation Error message
def read pyc source pyc trace lambda x None try fp open pyc 'rb' except IO Error return Nonewith fp try mtime int source mtime size source size data fp read 12 except Environment Error as e trace ' read pyc %s Environment Error%s' % source e return Noneif len data 12 or data[ 4] imp get magic or struct unpack '<ll' data[ 4 ] mtime size trace ' read pyc %s invalidoroutofdatepyc' % source return Nonetry co marshal load fp except Exception as e trace ' read pyc %s marshal loaderror%s' % source e return Noneif not isinstance co types Code Type trace ' read pyc %s notacodeobject' % source return Nonereturn co
def read pyc source pyc trace lambda x None try fp open pyc 'rb' except IO Error return Nonewith fp try mtime int source mtime size source size data fp read 12 except Environment Error as e trace ' read pyc %s Environment Error%s' % source e return Noneif len data 12 or data[ 4] imp get magic or struct unpack '<ll' data[ 4 ] mtime size trace ' read pyc %s invalidoroutofdatepyc' % source return Nonetry co marshal load fp except Exception as e trace ' read pyc %s marshal loaderror%s' % source e return Noneif not isinstance co types Code Type trace ' read pyc %s notacodeobject' % source return Nonereturn co
def find predicates expr if not isinstance expr Boolean Function return {expr}return set union * find predicates i for i in expr args
def find predicates expr if not isinstance expr Boolean Function return {expr}return set union * find predicates i for i in expr args
def join host strings user host port None if port template '%s@[%s] %s' if host count ' ' > 1 else '%s@%s %s' return template % user host port else return '%s@%s' % user host
def join host strings user host port None if port template '%s@[%s] %s' if host count ' ' > 1 else '%s@%s %s' return template % user host port else return '%s@%s' % user host
def spawnd path args pidfile None daemonize no close True pidfile pidfile os execv path args
def get course date blocks course user block classes Course End Date Course Start Date Todays Date Verification Deadline Date Verified Upgrade Deadline Date blocks cls course user for cls in block classes def block key fn block "\n Iftheblock'sdateis None returnthemaximumdatetimeinorder\ntoforceittotheendofthelistofdisplayedblocks \n"if block date is None return datetime max replace tzinfo pytz UTC return block datereturn sorted b for b in blocks if b is enabled key block key fn
def parse graftpoints graftpoints grafts {}for l in graftpoints raw graft l split None 1 commit raw graft[ 0 ]if len raw graft 2 parents raw graft[ 1 ] split else parents []for sha in [commit] + parents check hexsha sha ' Invalidgraftpoint' grafts[commit] parentsreturn grafts
@contextlib contextmanagerdef record audio rate chunk buff queue Queue audio interface pyaudio Py Audio audio stream audio interface open format pyaudio pa Int 16 channels 1 rate rate input True frames per buffer chunk stream callback functools partial fill buffer buff yield audio data generator buff audio stream stop stream audio stream close buff put None audio interface terminate
@contextlib contextmanagerdef record audio rate chunk buff queue Queue audio interface pyaudio Py Audio audio stream audio interface open format pyaudio pa Int 16 channels 1 rate rate input True frames per buffer chunk stream callback functools partial fill buffer buff yield audio data generator buff audio stream stop stream audio stream close buff put None audio interface terminate
def bind row anchor column column name def decorator method @functools wraps method def wrapper table row cell row cells[column name]action element cell find element by By CSS SELECTOR 'td %s>a' % NORMAL COLUMN CLASS return method table action element row return wrapperreturn decorator
def get Process Results cmd time Limit 20 output ''start Time time time child pexpect spawn cmd timeout 10 child logfile sys stdoutwhile 1 try output + child read nonblocking timeout time Limit replace '\r' '' except pexpect EOF as e print str e breakexcept pexpect TIMEOUT as e print str e output + '\n Processabortedby Flash Testafter%sseconds \n' % time Limit print child isalive child kill 9 breakend Time time time child close force True duration end Time - start Time exit Status child exitstatusreturn output duration exit Status
def take time iter secs album out []total time 0 0for obj in iter length length obj album if total time + length < secs out append obj total time + lengthreturn out
@bdd when bdd parsers parse ' Ispawnanewwindow' def invoke with quteproc quteproc log summary ' Createanewwindow' quteproc send ipc [] target arg 'window' quteproc wait for category 'init' module 'app' function ' open startpage' message ' Openingstartpage'
def preserve torrent directory albumpath from headphones import loggernew folder os path join albumpath 'headphones-modified' encode headphones SYS ENCODING 'replace' logger info " Copyingfilesto'headphones-modified'subfoldertopreservedownloadedfilesforseeding" try shutil copytree albumpath new folder return new folderexcept Exception as e logger warn ' Cannotcopy/movefilestotempfolder ' + new folder decode headphones SYS ENCODING 'replace' + ' Notcontinuing Error ' + str e return None
def download api data filename coord api base projection s host path p q f urlparse api base bbox coordinate latlon bbox coord projection path join path 'api/ 0 6/map?bbox % 6f % 6f % 6f % 6f' % bbox conn HTTP Connection host conn request 'GET' path headers {' Accept- Encoding' 'compress gzip'} resp conn getresponse assert resp status 200 resp status resp read if resp getheader ' Content- Encoding' 'gzip' disk open filename 'w' else raise Exception host path disk Gzip File filename 'w' bytes resp read disk write bytes disk close return len bytes / 1024 0
def top **kwargs url opts ['cobbler url']user opts ['cobbler user']password opts ['cobbler password']minion id kwargs['opts']['id']log info ' Queryingcobblerforinformationfor%r' minion id try server salt ext six moves xmlrpc client Server url allow none True if user server login user password data server get blended data None minion id except Exception log exception ' Couldnotconnecttocobbler ' return {}return {data['status'] data['mgmt classes']}
def init journalist is admin False username crypto util genrandomid user pw crypto util genrandomid user db Journalist username user pw is admin db db session add user db db session commit return user user pw
def num answers user return Answer objects filter creator user count
def keep lazy text func return keep lazy str func
def pluralize num 0 text '' return '{ }{}{}' format num text 's'[ num 1 ]
def Multi Arg Max x m x max return i for i v in enumerate x if v m
def check filenames select None ignore None if select and ignore raise Value Error ' Cannotpassbothselectandignore Theyaremutuallyexclusive ' elif select or ignore checked codes select or set Error Registry get error codes - set ignore else checked codes Conventions pep 257 for filename in filenames log info ' Checkingfile%s ' filename try with tokenize open filename as file source file read for error in PEP 257 Checker check source source filename code getattr error 'code' None if code in checked codes yield error except Environment Error All Error yield sys exc info [1 ] except tk Token Error yield Syntax Error 'invalidsyntaxinfile%s' % filename
def check filenames select None ignore None if select and ignore raise Value Error ' Cannotpassbothselectandignore Theyaremutuallyexclusive ' elif select or ignore checked codes select or set Error Registry get error codes - set ignore else checked codes Conventions pep 257 for filename in filenames log info ' Checkingfile%s ' filename try with tokenize open filename as file source file read for error in PEP 257 Checker check source source filename code getattr error 'code' None if code in checked codes yield error except Environment Error All Error yield sys exc info [1 ] except tk Token Error yield Syntax Error 'invalidsyntaxinfile%s' % filename
def nonzero features data combine None if combine is None combine functools partial reduce numpy logical and masks numpy asarray [subset sum axis 0 for subset in data] squeeze nz feats combine masks nonzero [0 ]return nz feats
def symmetric n for perm in variations list range n n yield Permutation perm
def install runas None installer 'https //raw githubusercontent com/rvm/rvm/master/binscripts/rvm-installer'ret salt ['cmd run all'] 'curl- Ls{installer} bash-sstable' format installer installer runas runas python shell True if ret['retcode'] > 0 msg ' Errorencounteredwhiledownloadingthe RV Minstaller'if ret['stderr'] msg + ' stderrfollows \n\n' + ret['stderr'] raise Command Execution Error msg return True
def gci return gcf gci
def insert enterprise fields request form desc if not enterprise enabled returnadd data sharing consent field request form desc
def insert enterprise fields request form desc if not enterprise enabled returnadd data sharing consent field request form desc
def message url path course key access point return Restricted Course message url path course key access point
def credentials from request request if oauth 2 settings storage model is None or request user is authenticated return get storage request get else return None
def has filename filter module return getattr module 'filename' None is not None
def has filename filter module return getattr module 'filename' None is not None
def has filename filter module return getattr module 'filename' None is not None
def run gevent from gevent import monkeymonkey patch all
@ refresh mine cache@ ensure existsdef kill name return change state name 'kill' 'stopped'
def libvlc video get track p mi f Cfunctions get 'libvlc video get track' None or Cfunction 'libvlc video get track' 1 None ctypes c int Media Player return f p mi
def Discrete Uniform name items return rv name Discrete Uniform Distribution *items
def Discrete Uniform name items return rv name Discrete Uniform Distribution *items
def quotify list words wordout []for word in words qtype qif word and not re search '[\\s\\"\\\']' word qtype ''elif q in word and qq not in word qtype qqwordout append quotify qtype word True return '' join wordout
def setup platform hass config add devices discover info None from pycmus import exceptionshost config get CONF HOST password config get CONF PASSWORD port config get CONF PORT name config get CONF NAME try cmus remote Cmus Device host password port name except exceptions Invalid Password LOGGER error ' Theprovidedpasswordwasrejectedbycmus' return Falseadd devices [cmus remote]
def save rev and notify rev form creator document based on id None base rev None new rev rev form save creator document based on id base rev statsd incr 'wiki revision' Reviewable Revision In Locale Event new rev fire exclude new rev creator Edit Document Event new rev fire exclude new rev creator
def save rev and notify rev form creator document based on id None base rev None new rev rev form save creator document based on id base rev statsd incr 'wiki revision' Reviewable Revision In Locale Event new rev fire exclude new rev creator Edit Document Event new rev fire exclude new rev creator
def dump data stream None **kwargs kwargs[' Dumper'] Astropy Dumperreturn yaml dump data stream stream **kwargs
def auth disallow anonymous access action @functools wraps action def wrapper context data dict return action context data dict wrapper auth allow anonymous access Falsereturn wrapper
def auth disallow anonymous access action @functools wraps action def wrapper context data dict return action context data dict wrapper auth allow anonymous access Falsereturn wrapper
def auth disallow anonymous access action @functools wraps action def wrapper context data dict return action context data dict wrapper auth allow anonymous access Falsereturn wrapper
def auth disallow anonymous access action @functools wraps action def wrapper context data dict return action context data dict wrapper auth allow anonymous access Falsereturn wrapper
def auth disallow anonymous access action @functools wraps action def wrapper context data dict return action context data dict wrapper auth allow anonymous access Falsereturn wrapper
def auth disallow anonymous access action @functools wraps action def wrapper context data dict return action context data dict wrapper auth allow anonymous access Falsereturn wrapper
def is valid endpoint url endpoint url parts urlsplit endpoint url hostname parts hostnameif hostname is None return Falseif len hostname > 255 return Falseif hostname[ -1 ] ' ' hostname hostname[ -1 ]allowed re compile '^ ? - [A-Z\\d-]{ 1 63 } ?< - \\ * ? - [A-Z\\d-]{ 1 63 } ?< - $' re IGNORECASE return allowed match hostname
def get Geometry Utilities Path sub Name '' return get Joined Path get Geometry Path 'geometry utilities' sub Name
def get view id list user site check global True use cache True page ids get page ids for action user user site site action 'view page' check global check global use cache use cache return page ids
def ssl wrap socket sock utils validate key cert CONF key file CONF cert file ssl kwargs {'server side' True 'certfile' CONF cert file 'keyfile' CONF key file 'cert reqs' ssl CERT NONE}if CONF ca file ssl kwargs['ca certs'] CONF ca filessl kwargs['cert reqs'] ssl CERT REQUIRE Dreturn ssl wrap socket sock **ssl kwargs
def status return statuscmd
def cleanup es elasticsearch Elasticsearch connection class Urllib 3 Http Connection host HOST port PORT http auth HTTP AUTH if es indices exists MARKER INDEX es indices delete MARKER INDEX if es indices exists INDEX es indices delete INDEX
def change music new music repeat False if music and new music is not current music if new music new playlist Play List [new music] repeat repeat else new playlist Nonechange playlist new playlist
def metadef tag get context namespace name name session None session session or get session return metadef tag api get context namespace name name session
def get type atype size None res TYPE DESCRIPTOR get atype if res is None if atype[ 0 ] 'L' if atype startswith ' Ljava/lang' res atype[ 1 -1 ] lstrip 'java/lang/' replace '/' ' ' else res atype[ 1 -1 ] replace '/' ' ' elif atype[ 0 ] '[' if size is None res '%s[]' % get type atype[ 1 ] else res '%s[%s]' % get type atype[ 1 ] size else res atypelogger debug ' Unknowndescriptor "%s" ' atype return res
@dispatch Join Sequence Sequence def compute up t lhs rhs **kwargs if lhs rhs lhs rhs itertools tee lhs 2 on left [t lhs fields index col for col in listpack t on left ]on right [t rhs fields index col for col in listpack t on right ]left default None if t how in 'right' 'outer' else toolz itertoolz no default right default None if t how in 'left' 'outer' else toolz itertoolz no default pairs toolz join on left lhs on right rhs left default left default right default right default assemble pair assemble t on left on right return map assemble pairs
@dispatch Join Sequence Sequence def compute up t lhs rhs **kwargs if lhs rhs lhs rhs itertools tee lhs 2 on left [t lhs fields index col for col in listpack t on left ]on right [t rhs fields index col for col in listpack t on right ]left default None if t how in 'right' 'outer' else toolz itertoolz no default right default None if t how in 'left' 'outer' else toolz itertoolz no default pairs toolz join on left lhs on right rhs left default left default right default right default assemble pair assemble t on left on right return map assemble pairs
def fix region region region region or '' lower return ALIAS TO REGION get region or region
def regions from boto ec 2 containerservice layer 1 import EC 2 Container Service Connectionreturn get regions 'ec 2 containerservice' connection cls EC 2 Container Service Connection
def get Memory Limit return None
def cleaned Up Generic Network original network network caffe pb 2 Net Parameter network Copy From original network for i layer in enumerate network layer if ' Data' in layer type assert layer type in [' Data'] ' Unsupporteddatalayertype%s' % layer type elif layer type ' Input' del network layer[i]elif layer type ' Inner Product' assert layer inner product param Has Field 'num output' " Don'tleaveinner product param num outputunsetforgenericnetworks layer%s " % layer name return network
def test feature finder finds all feature files within a dir ff Feature Loader cjoin files ff find feature files assert equals sorted files sorted [cjoin '1 st feature dir' 'one more feature' cjoin '1 st feature dir' 'some feature' cjoin '1 st feature dir' 'more features here' 'another feature' cjoin '2 nd feature dir' 'before and after all feature' cjoin '2 nd feature dir' 'with defined steps feature' cjoin '3 rd feature dir' 'my steps are anywhere feature' ]
def test feature finder finds all feature files within a dir ff Feature Loader cjoin files ff find feature files assert equals sorted files sorted [cjoin '1 st feature dir' 'one more feature' cjoin '1 st feature dir' 'some feature' cjoin '1 st feature dir' 'more features here' 'another feature' cjoin '2 nd feature dir' 'before and after all feature' cjoin '2 nd feature dir' 'with defined steps feature' cjoin '3 rd feature dir' 'my steps are anywhere feature' ]
def corr nearest corr threshold 1e- 15 n fact 100 k vars corr shape[ 0 ]if k vars corr shape[ 1 ] raise Value Error 'matrixisnotsquare' diff np zeros corr shape x new corr copy diag idx np arange k vars for ii in range int len corr * n fact x adj x new - diff x psd clipped clip evals x adj value threshold if not clipped x new x psdbreakdiff x psd - x adj x new x psd copy x new[ diag idx diag idx ] 1else import warningswarnings warn iteration limit doc Iteration Limit Warning return x new
def serialize query with map builtin function test serial fcn t symbol 't' discover iris expr t species map fcn 'int' query {'expr' to tree expr }response test post '/compute' data serial dumps query headers mimetype serial assert 'OK' in response status respdata serial loads response data result serial data loads respdata['data'] exp res compute expr {t iris} return type list return exp res result
def serialize query with map builtin function test serial fcn t symbol 't' discover iris expr t species map fcn 'int' query {'expr' to tree expr }response test post '/compute' data serial dumps query headers mimetype serial assert 'OK' in response status respdata serial loads response data result serial data loads respdata['data'] exp res compute expr {t iris} return type list return exp res result
def serialize query with map builtin function test serial fcn t symbol 't' discover iris expr t species map fcn 'int' query {'expr' to tree expr }response test post '/compute' data serial dumps query headers mimetype serial assert 'OK' in response status respdata serial loads response data result serial data loads respdata['data'] exp res compute expr {t iris} return type list return exp res result
def get signature signature data try signature base 64 decode as bytes signature data except Type Error binascii Error raise exception Signature Verification Error reason ' Thesignaturedatawasnotproperlyencodedusingbase 64 ' return signature
def site request return {'site' Site objects get id settings SITE ID }
def has access f if hasattr f ' permission name' permission str f permission nameelse permission str f name def wraps self *args **kwargs permission str PERMISSION PREFIX + f permission name if self appbuilder sm has access permission str self class name return f self *args **kwargs else log warning LOGMSG ERR SEC ACCESS DENIED format permission str self class name flash as unicode FLAMSG ERR SEC ACCESS DENIED 'danger' return redirect url for self appbuilder sm auth view class name + ' login' f permission name permission strreturn functools update wrapper wraps f
def Yaml Loader string representation yaml load string result cls aff 4 FACTORY AFF 4 Object representation['aff 4 class'] aff 4 attributes {}for predicate values in representation['attributes'] items attribute aff 4 Attribute PREDICATES[predicate]tmp aff 4 attributes[attribute] []for rdfvalue cls name value age in values rdfvalue cls aff 4 FACTORY RDF Value rdfvalue cls name value rdfvalue cls value age rdfvalue RDF Datetime age tmp append value result result cls urn representation[' urn'] clone aff 4 attributes mode 'rw' age representation['age policy'] result new attributes result synced attributes result synced attributes {} result dirty Truereturn result
def Yaml Loader string representation yaml load string result cls aff 4 FACTORY AFF 4 Object representation['aff 4 class'] aff 4 attributes {}for predicate values in representation['attributes'] items attribute aff 4 Attribute PREDICATES[predicate]tmp aff 4 attributes[attribute] []for rdfvalue cls name value age in values rdfvalue cls aff 4 FACTORY RDF Value rdfvalue cls name value rdfvalue cls value age rdfvalue RDF Datetime age tmp append value result result cls urn representation[' urn'] clone aff 4 attributes mode 'rw' age representation['age policy'] result new attributes result synced attributes result synced attributes {} result dirty Truereturn result
def download and extract URL if URL None logger warning ' Pleaseprovide URL' return Nonetmpdir tempfile mkdtemp filename os path basename URL path tmpdir + '/' + filename zdata urllib 2 urlopen URL print ' Savingfiletodiskpleasewait 'with open path 'wb' as local file local file write zdata read zfile zipfile Zip File path print ' Extractingzipfile'try zfile extractall tmpdir except logger warning " Couldn'textractzipfile" return Nonereturn tmpdir
def reload jboss config host None log debug ' MODULEFUNCTION jboss 7 reload' if host is None operation ' reload'else operation '/host "{host}"/ reload' format host host reload result salt ['jboss 7 cli run operation'] jboss config operation fail on error False if reload result['success'] or not reload result['success'] and ' Operationfailed Channelclosed' in reload result['stdout'] or ' Communicationerror java util concurrent Execution Exception Operationfailed' in reload result['stdout'] return reload resultelse raise Exception " Cannothandleerror returncode {retcode} stdout '{stdout}' stderr '{stderr}'" format **reload result
def make flat dict name selector None subselector None ns None if ns is None elemname nametagname Selector 0 else elemname '{%s}%s' % ns name tagname lambda obj do raise False '{%s}%s' % ns obj[ 0 ] if selector is None selector nameroot Template Element elemname selector selector subselector subselector elem Sub Template Element root tagname selector get items elem text 1return root
def make flat dict name selector None subselector None ns None if ns is None elemname nametagname Selector 0 else elemname '{%s}%s' % ns name tagname lambda obj do raise False '{%s}%s' % ns obj[ 0 ] if selector is None selector nameroot Template Element elemname selector selector subselector subselector elem Sub Template Element root tagname selector get items elem text 1return root
def put acquire memoryviewslice lhs cname lhs type lhs pos rhs code have gil False first assignment True assert rhs type is memoryviewslicepretty rhs rhs result in temp or rhs is simple if pretty rhs rhstmp rhs result else rhstmp code funcstate allocate temp lhs type manage ref False code putln '%s %s ' % rhstmp rhs result as lhs type put assign to memviewslice lhs cname rhs rhstmp lhs type code have gil have gil first assignment first assignment if not pretty rhs code funcstate release temp rhstmp
def put acquire memoryviewslice lhs cname lhs type lhs pos rhs code have gil False first assignment True assert rhs type is memoryviewslicepretty rhs rhs result in temp or rhs is simple if pretty rhs rhstmp rhs result else rhstmp code funcstate allocate temp lhs type manage ref False code putln '%s %s ' % rhstmp rhs result as lhs type put assign to memviewslice lhs cname rhs rhstmp lhs type code have gil have gil first assignment first assignment if not pretty rhs code funcstate release temp rhstmp
def put acquire memoryviewslice lhs cname lhs type lhs pos rhs code have gil False first assignment True assert rhs type is memoryviewslicepretty rhs rhs result in temp or rhs is simple if pretty rhs rhstmp rhs result else rhstmp code funcstate allocate temp lhs type manage ref False code putln '%s %s ' % rhstmp rhs result as lhs type put assign to memviewslice lhs cname rhs rhstmp lhs type code have gil have gil first assignment first assignment if not pretty rhs code funcstate release temp rhstmp
def make chunk iter stream separator limit None buffer size 10 * 1024 stream make limited stream stream limit read stream read split re compile ' %s ' % re escape separator splitbuffer []while 1 new data read buffer size if not new data breakchunks split new data new buf []for item in chain buffer chunks if item separator yield '' join new buf new buf []else new buf append item buffer new bufif buffer yield '' join buffer
def categories level keys res []for i in zip *keys tuplefied tuplify i res append list Ordered Dict [ j None for j in tuplefied] return res
def categories level keys res []for i in zip *keys tuplefied tuplify i res append list Ordered Dict [ j None for j in tuplefied] return res
def gemset copy source destination runas None return rvm ['gemset' 'copy' source destination] runas runas
def find unit course url def find node url '\n Findnodeincoursetreeforurl \n'if node location to deprecated string url return nodefor child in node get children found find child url if found return foundreturn Noneunit find course url if unit is None raise Dashboard Error " Couldn'tfindmoduleforurl {0 }" format url return unit
def find unit course url def find node url '\n Findnodeincoursetreeforurl \n'if node location to deprecated string url return nodefor child in node get children found find child url if found return foundreturn Noneunit find course url if unit is None raise Dashboard Error " Couldn'tfindmoduleforurl {0 }" format url return unit
def build product order arg gens gens 2 idx {}for i g in enumerate gens gens 2 idx[g] iorder []for expr in arg name expr[ 0 ]var expr[ 1 ]def makelambda var return Item Getter gens 2 idx[g] for g in var order append monomial key name makelambda var return Product Order *order
def toposort rules rules graph {}class dict {}for rule in rules if rule class in class dict raise Value Error ' Duplicateclassrulesarenotallowed %s' % rule class class dict[rule class ] rulefor rule in rules if not is iterable rule dependency and rule dependency rule dependencies [rule dependency]else rule dependencies rule dependencydependencies set if rule dependencies for dependency in rule dependencies if inspect isclass dependency dependency class dict get dependency if dependency dependencies add dependency graph[rule] dependenciesreturn toposort graph
def requires app credentials func @wraps func def auth wrapper self *args **kwargs client id client secret self session retrieve client credentials if client id and client secret return func self *args **kwargs else from exceptions import error forr generate fake error response '{"message" " Requiresusername/passwordauthentication"}' raise error for r return auth wrapper
def error query msg q None if q is None q Null Query q error msgreturn q
def error query msg q None if q is None q Null Query q error msgreturn q
def error query msg q None if q is None q Null Query q error msgreturn q
@commands u'announce' @example u' announce Someimportantmessagehere' def announce bot trigger if not trigger admin bot reply u" Sorry Ican'tletyoudothat" returnfor channel in bot channels bot msg channel u'[ANNOUNCEMENT]%s' % trigger group 2 bot reply u' Announcecomplete '
def find folders under root db add root True follow links False cancel callback lambda False lp db library pathif lp lp os path abspath lp root os path abspath root ans set [] for dirpath dirnames in os walk root topdown True followlinks follow links if cancel callback breakfor x in list dirnames path os path join dirpath x if lp and path startswith lp dirnames remove x if lp and dirpath startswith lp continueans add dirpath if not add root ans remove root return ans
def zrange key start stop host None port None db None password None server connect host port db password return server zrange key start stop
def zrange key start stop host None port None db None password None server connect host port db password return server zrange key start stop
def extract mentions txt return re findall u' ? [^\\w] ^ @ [\\w]* ' txt
def read cz lsm info fh byteorder dtype count assert byteorder '<' magic number structure size struct unpack '<II' fh read 8 if magic number not in 50350412 67127628 raise Value Error 'notavalid CS LSM INF Ostructure' fh seek -8 1 if structure size < numpy dtype CZ LSM INFO itemsize cz lsm info []size 0for name dtype in CZ LSM INFO size + numpy dtype dtype itemsizeif size > structure size breakcz lsm info append name dtype else cz lsm info CZ LSM INF Oreturn fh read record cz lsm info byteorder byteorder
def fmin func x0 args xtol 0 0001 ftol 0 0001 maxiter None maxfun None full output 0 disp 1 retall 0 callback None initial simplex None opts {'xatol' xtol 'fatol' ftol 'maxiter' maxiter 'maxfev' maxfun 'disp' disp 'return all' retall 'initial simplex' initial simplex}res minimize neldermead func x0 args callback callback **opts if full output retlist res['x'] res['fun'] res['nit'] res['nfev'] res['status'] if retall retlist + res['allvecs'] return retlistelif retall return res['x'] res['allvecs'] else return res['x']
def print environ usage print '\n<H 3 > Theseenvironmentvariablescouldhavebeenset </H 3 >\n<UL>\n<LI>AUTH TYPE\n<LI>CONTENT LENGTH\n<LI>CONTENT TYPE\n<LI>DATE GMT\n<LI>DATE LOCAL\n<LI>DOCUMENT NAME\n<LI>DOCUMENT ROOT\n<LI>DOCUMENT URI\n<LI>GATEWAY INTERFACE\n<LI>LAST MODIFIED\n<LI>PATH\n<LI>PATH INFO\n<LI>PATH TRANSLATED\n<LI>QUERY STRING\n<LI>REMOTE ADDR\n<LI>REMOTE HOST\n<LI>REMOTE IDENT\n<LI>REMOTE USER\n<LI>REQUEST METHOD\n<LI>SCRIPT NAME\n<LI>SERVER NAME\n<LI>SERVER PORT\n<LI>SERVER PROTOCOL\n<LI>SERVER ROOT\n<LI>SERVER SOFTWARE\n</UL>\n Inaddition HTT Pheaderssentbytheservermaybepassedinthe\nenvironmentaswell Herearesomecommonvariablenames \n<UL>\n<LI>HTTP ACCEPT\n<LI>HTTP CONNECTION\n<LI>HTTP HOST\n<LI>HTTP PRAGMA\n<LI>HTTP REFERER\n<LI>HTTP USER AGENT\n</UL>\n'
def create lock name lock path get lock path name if not check lock lock path return touch file lock path else return False
def create lock name lock path get lock path name if not check lock lock path return touch file lock path else return False
def set Tex If No Shaders obj if hasattr obj 'use Shaders' and not obj use Shaders if hasattr obj ' need Texture Update' obj need Texture Update True
def set Tex If No Shaders obj if hasattr obj 'use Shaders' and not obj use Shaders if hasattr obj ' need Texture Update' obj need Texture Update True
def set Tex If No Shaders obj if hasattr obj 'use Shaders' and not obj use Shaders if hasattr obj ' need Texture Update' obj need Texture Update True
def slug validator s ok SLUG OK lower True spaces False delimiter '-' message validate slug message code validate slug code if not s and slugify s ok lower spaces delimiter s raise Validation Error message code code
def with metaclass meta *bases class metaclass meta call type call init type init def new cls name this bases d if this bases is None return type new cls name d return meta name bases d return metaclass 'temporary class' None {}
def with metaclass meta *bases class metaclass meta call type call init type init def new cls name this bases d if this bases is None return type new cls name d return meta name bases d return metaclass 'temporary class' None {}
def check permission permission codename request if request user is superuser return Trueif permission codename 'view' path obj Noneif hasattr request 'translation project' path obj request translation projectelif hasattr request 'project' path obj request projectif path obj is None return Truereturn path obj is accessible by request user return 'administrate' in request permissions or permission codename in request permissions
def train yaml file path save path yaml open '{ 0 }/gae random yaml' format yaml file path 'r' read data os path join save path 'train preprocessed pkl' params {'save path' save path 'region' 13 'nvis X' 169 'nvis Y' 169 'max epochs' 3 'batch size' 100 'train data' data 'nfac' 196 'nmap' 50 'lr' 0 01 }yaml yaml % params train yaml yaml
def pack shards used images num shards sorted images sorted used images key lambda x x[ 1 ] reverse True shards []for i in range 0 num shards shards append {'images' [] 'sum' 0} for image in sorted images shard min shards key lambda x x['sum'] shard['images'] append image shard['sum'] + image[ 1 ]return shards
def pack shards used images num shards sorted images sorted used images key lambda x x[ 1 ] reverse True shards []for i in range 0 num shards shards append {'images' [] 'sum' 0} for image in sorted images shard min shards key lambda x x['sum'] shard['images'] append image shard['sum'] + image[ 1 ]return shards
def pack shards used images num shards sorted images sorted used images key lambda x x[ 1 ] reverse True shards []for i in range 0 num shards shards append {'images' [] 'sum' 0} for image in sorted images shard min shards key lambda x x['sum'] shard['images'] append image shard['sum'] + image[ 1 ]return shards
def find common parent a b a parents list a iterancestors b parents list b iterancestors a parents set set a parents b parents set set b parents if a b return aif b in a parents set return bif a in b parents set return aif len a parents < len b parents for elem in a parents if elem b or elem in b parents set return elemelse for elem in b parents if elem a or elem in a parents set return elem
def testing suite unittest suite unittest Test Suite test loader unittest Test Loader test loader test Method Prefix 'test 'tests [ Test PSW]for test in tests cur suite test loader load Tests From Test Case test unittest suite add Test cur suite doctest suite doctest Doc Test Suite psw big suite unittest Test Suite unittest suite doctest suite return big suite
def get disk timeout scheme None return get powercfg minute values scheme 'SUB DISK' 'DISKIDLE' ' Turnoffharddiskafter'
def notify doc print html None print format None attachments None recipients None cc None fetched from email account False recipients cc get recipients and cc doc recipients cc fetched from email account fetched from email account if not recipients returndoc emails not sent to set doc all email addresses - set doc sent email addresses if frappe flags in test doc notify print html print html print format print format attachments attachments recipients recipients cc cc else check email limit list set doc sent email addresses enqueue sendmail queue u'default' timeout 300 event u'sendmail' communication name doc name print html print html print format print format attachments attachments recipients recipients cc cc lang frappe local lang session frappe local session
def concat bags name 'concat-' + tokenize *bags counter itertools count 0 dsk dict name next counter key for bag in bags for key in sorted bag keys return Bag merge dsk *[b dask for b in bags] name len dsk
def test pdbbreakpoint op b tensor fmatrix condition tensor gt b sum 0 b monitored Pdb Breakpoint name ' Test Breakpoint' condition b output b monitored ** 2 f theano function [b] output mode mode with gpu topo f maker fgraph toposort assert isinstance topo[ -2 ] op cuda Gpu Elemwise assert topo[ -1 ] op cuda host from gpu
def test pdbbreakpoint op b tensor fmatrix condition tensor gt b sum 0 b monitored Pdb Breakpoint name ' Test Breakpoint' condition b output b monitored ** 2 f theano function [b] output mode mode with gpu topo f maker fgraph toposort assert isinstance topo[ -2 ] op cuda Gpu Elemwise assert topo[ -1 ] op cuda host from gpu
def test pdbbreakpoint op b tensor fmatrix condition tensor gt b sum 0 b monitored Pdb Breakpoint name ' Test Breakpoint' condition b output b monitored ** 2 f theano function [b] output mode mode with gpu topo f maker fgraph toposort assert isinstance topo[ -2 ] op cuda Gpu Elemwise assert topo[ -1 ] op cuda host from gpu
@pytest fixturedef mozilla user db return amo tests user factory id settings TASK USER ID
@pytest fixturedef mozilla user db return amo tests user factory id settings TASK USER ID
@core helper@maintain deprecated 'h time ago in words from strisdeprecatedin 2 2andwillberemoved Pleaseuseh time ago from timestampinstead' def time ago in words from str date str granularity 'month' if date str return date time ago in words date str to datetime date str granularity granularity else return ' Unknown'
def create sample bookstore store bookstore Bookstore shelf bookstore pb 2 Shelf shelf theme ' Fiction' fiction store create shelf shelf book bookstore pb 2 Book book title 'README'book author ' Neal Stephenson'store create book fiction book shelf bookstore pb 2 Shelf shelf theme ' Fantasy' fantasy store create shelf shelf book bookstore pb 2 Book book title 'A Gameof Thrones'book author ' George R R Martin'store create book fantasy book return store
def linereader f while 1 line f readline if not line break yield line[ -1 ]
def data sharing consent requirement at login request if not enterprise enabled return Noneif data sharing consent required at login request return 'required'if data sharing consent requested request return 'optional'return None
def fix list encoding var if isinstance var list tuple return filter lambda x x is not None map to unicode var return var
def submit facility form context facility form find id with wait context 'facility form' name field find id with wait context 'id name' name field send keys ' The Fortressof Solitude' facility form submit
def not 26 func @wraps func def errfunc *args **kwargs raise Not Implemented Errorif hexversion < 34013184 return errfuncelse return func
def not 26 func @wraps func def errfunc *args **kwargs raise Not Implemented Errorif hexversion < 34013184 return errfuncelse return func
def not 26 func @wraps func def errfunc *args **kwargs raise Not Implemented Errorif hexversion < 34013184 return errfuncelse return func
def get user role user course id if auth user has role user Course Instructor Role course id return 'instructor'else return 'staff'
def get random sequence length exclude None seen set def add seen kmer seen add kmer seen add revcomp kmer if exclude is not None for pos in range 0 len exclude - K add seen exclude[pos pos + K - 1 ] seq [random choice 'ACGT' for in range K - 1 ]add seen '' join seq while len seq < length next base random choice 'ACGT' next kmer '' join seq[ - K + 2 ] + [next base] assert len next kmer K - 1 if next kmer not in seen seq append next base add seen next kmer else continuereturn '' join seq
def remove whitespace tokens return [token for token in tokens if token type u'S' ]
def remove whitespace tokens return [token for token in tokens if token type u'S' ]
def radio text u'' tooltip u'' checked None return checkbox Qt Widgets Q Radio Button text tooltip checked
def row *args **kwargs responsive kwargs pop 'responsive' None sizing mode kwargs pop 'sizing mode' 'fixed' children kwargs pop 'children' None if responsive sizing mode convert responsive responsive verify sizing mode sizing mode children handle children children children *args row children []for item in children if isinstance item Layout DOM item sizing mode sizing moderow children append item else raise Value Error ' Only Layout DO Mitemscanbeinsertedintoarow \n Triedtoinsert %softype%s' % item type item return Row children row children sizing mode sizing mode **kwargs
def create record with sa engine resource type attributes sa table db utils get table engine 'standardattributes' sa record engine execute sa table insert values {'resource type' resource type} attributes['standard attr id'] sa record inserted primary key[ 0 ]resource table db utils get table engine resource type engine execute resource table insert values attributes
def zero mul simp l index while index > 0 and index < len l - 1 and l[index][ 0 ] is l[ index + 1 ][ 0 ] exp l[index][ 1 ] + l[ index + 1 ][ 1 ] base l[index][ 0 ]l[index] base exp del l[ index + 1 ]if l[index][ 1 ] 0 del l[index]index - 1
def pearsonr x y x np asarray x y np asarray y n len x mx x mean my y mean xm ym x - mx y - my r num np add reduce xm * ym r den np sqrt sum of squares xm * sum of squares ym r r num / r den r max min r 1 0 -1 0 df n - 2 if abs r 1 0 prob 0 0else t squared r ** 2 * df / 1 0 - r * 1 0 + r prob betai 0 5 * df 0 5 df / df + t squared return r prob
def split line endings data lines NEWLINE RE split data if not lines[ -1 ] lines lines[ -1 ]return lines
def extract war version war basename os path basename war war package os path splitext basename [0 ]version re findall '- [\\d -]+ $' war package return version[ 0 ] if version and len version 1 else None
def get option file name section option separator ' ' inifile Ini get ini file file name separator separator return inifile get section {} get option None
def check for external modification file Name old mtime new modification time get last modification file Name if new modification time > old mtime return Truereturn False
def Get Calling Module return Get Calling Module Object And Name [1 ]
def process queue queue quantity 1 backend 'sqlite' event salt utils event get event 'master' opts ['sock dir'] opts ['transport'] opts opts listen False try items pop queue queue quantity quantity backend backend except Salt Invocation Error as exc error txt '{ 0 }' format exc jid event fire event {'errors' error txt} 'progress' return Falsedata {'items' items 'backend' backend 'queue' queue}event fire event data tagify [queue 'process'] prefix 'queue'
def process queue queue quantity 1 backend 'sqlite' event salt utils event get event 'master' opts ['sock dir'] opts ['transport'] opts opts listen False try items pop queue queue quantity quantity backend backend except Salt Invocation Error as exc error txt '{ 0 }' format exc jid event fire event {'errors' error txt} 'progress' return Falsedata {'items' items 'backend' backend 'queue' queue}event fire event data tagify [queue 'process'] prefix 'queue'
def get selinux context path out salt ['cmd run'] ['ls' '-Z' path] python shell False try ret re search '\\w+ \\w+ \\w+ \\w+' out group 0 except Attribute Error ret ' Noselinuxcontextinformationisavailablefor{ 0 }' format path return ret
def read uint 16 f return np uint 16 struct unpack '>H' f read 4 [2 4] [0 ]
def adam consensus trees clades [tree root for tree in trees]return Base Tree Tree root part clades rooted True
@pytest fixturedef numbered po test fs project 0 tp Translation Project Factory project project 0 language Language DB Factory store Store DB Factory name 'numbered po' translation project tp parent tp directory with test fs open 'data/po/ 1234 po' as src store update store deserialize src read return store
def do merge pr url pr session response session put pr url + '/merge' data json dumps dict sha pr['head']['sha'] if response status code 200 print 'P Rfailedtomerge {}' format response json ['message'] return Falseelse print '{}at{}' format response json ['message'] response json ['sha'] del resp delete branch pr session if del resp status code 204 print ' Branchdeletionfailed {}' format del resp content return Falseprint ' Branchdeleted' return True
def do merge pr url pr session response session put pr url + '/merge' data json dumps dict sha pr['head']['sha'] if response status code 200 print 'P Rfailedtomerge {}' format response json ['message'] return Falseelse print '{}at{}' format response json ['message'] response json ['sha'] del resp delete branch pr session if del resp status code 204 print ' Branchdeletionfailed {}' format del resp content return Falseprint ' Branchdeleted' return True
def do merge pr url pr session response session put pr url + '/merge' data json dumps dict sha pr['head']['sha'] if response status code 200 print 'P Rfailedtomerge {}' format response json ['message'] return Falseelse print '{}at{}' format response json ['message'] response json ['sha'] del resp delete branch pr session if del resp status code 204 print ' Branchdeletionfailed {}' format del resp content return Falseprint ' Branchdeleted' return True
def psed text before after limit flags atext textif limit limit re compile limit comps text split limit atext '' join comps[ 1 ] count 1if 'g' in flags count 0flags flags replace 'g' '' aflags 0for flag in flags aflags RE FLAG TABLE[flag]before re compile before flags aflags text re sub before after atext count count return text
def yield fixture scope 'function' params None autouse False ids None name None if callable scope and params is None and not autouse return Fixture Function Marker 'function' params autouse ids ids name name scope else return Fixture Function Marker scope params autouse ids ids name name
def dirents buf d []while buf try ent linux dirent buf except Value Error breakd append ent d name buf buf[len ent ]return sorted d
def randslice from slicelen slicelen listlen maxstart listlen - slicelen start randrange maxstart + 1 maxstep listlen - start // slicelen if slicelen else 1 step randrange 1 maxstep + 1 stop start + slicelen * step s slice start stop step control slice indices s listlen if control slicelen raise Runtime Errorreturn s
def get group info for cohort cohort use cached False request cache Request Cache get request cache cache key u'cohorts get group info for cohort {}' format cohort id if use cached and cache key in request cache data return request cache data[cache key]request cache data pop cache key None try partition group Course User Group Partition Group objects get course user group cohort return request cache data setdefault cache key partition group group id partition group partition id except Course User Group Partition Group Does Not Exist passreturn request cache data setdefault cache key None None
def clean path root path subdir False if not os path isabs root return ''if not os path isabs path path os path join root path path os path normpath path if subdir if path startswith root return pathelif os path dirname path os path normpath root return pathreturn ''
def clean path root path subdir False if not os path isabs root return ''if not os path isabs path path os path join root path path os path normpath path if subdir if path startswith root return pathelif os path dirname path os path normpath root return pathreturn ''
def change smb enum shares table if not table return tableresult {}for field in ['account used' 'note'] if field in table result[field] table pop field result['shares'] []for key value in table iteritems value update {' Share' key} result['shares'] append value return result
def write descriptor js output root return write js output root list descriptors
def encode multipart values boundary None charset 'utf- 8 ' stream length boundary stream encode multipart values use tempfile False boundary boundary charset charset return boundary stream read
def celery settings request capital re compile '^[A-Z]' settings [key for key in dir current app conf if capital match key ]sorted settings [{'key' key 'value' '*****' if 'password' in key lower else getattr current app conf key } for key in sorted settings ]return render to response 'kadmin/settings html' {'settings' sorted settings 'title' ' Celery Settings'} Request Context request {}
def test transform path pri frame transform graph invalidate cache tpath td frame transform graph find shortest path ICRS Galactic assert tpath [ICRS FK 5 Galactic] assert td 2 tpath td frame transform graph find shortest path FK 4 Galactic assert tpath [FK 4 FK 4 No E Terms Galactic] assert td 2
def RANGE value if u' ' in value start stop value split u' ' 1 start UINT start if stop strip stop UINT stop if start > stop raise Value Error u' Endmustbelargerthanstart' else stop Noneelse start UINT value stop start + 1 return slice start stop
def test inverse np random seed 3285 for link in Links for k in range 10 p np random uniform 0 1 d link inverse link p assert allclose d p atol 1e- 08 err msg str link z get domainvalue link d link link inverse z assert allclose d z atol 1e- 08 err msg str link
def contains cycle fgraph orderings outputs fgraph outputsassert isinstance outputs tuple list deque parent counts {}node to children {}visitable deque for var in fgraph variables owner var ownerif owner node to children setdefault owner [] append var parent counts[var] 1else visitable append var parent counts[var] 0for a n in fgraph apply nodes parents list a n inputs parents extend orderings get a n [] if parents for parent in parents node to children setdefault parent [] append a n parent counts[a n] len parents else visitable append a n parent counts[a n] 0visited 0while visitable node visitable popleft visited + 1for client in node to children get node [] parent counts[client] - 1if not parent counts[client] visitable append client return visited len parent counts
def contains cycle fgraph orderings outputs fgraph outputsassert isinstance outputs tuple list deque parent counts {}node to children {}visitable deque for var in fgraph variables owner var ownerif owner node to children setdefault owner [] append var parent counts[var] 1else visitable append var parent counts[var] 0for a n in fgraph apply nodes parents list a n inputs parents extend orderings get a n [] if parents for parent in parents node to children setdefault parent [] append a n parent counts[a n] len parents else visitable append a n parent counts[a n] 0visited 0while visitable node visitable popleft visited + 1for client in node to children get node [] parent counts[client] - 1if not parent counts[client] visitable append client return visited len parent counts
def contains cycle fgraph orderings outputs fgraph outputsassert isinstance outputs tuple list deque parent counts {}node to children {}visitable deque for var in fgraph variables owner var ownerif owner node to children setdefault owner [] append var parent counts[var] 1else visitable append var parent counts[var] 0for a n in fgraph apply nodes parents list a n inputs parents extend orderings get a n [] if parents for parent in parents node to children setdefault parent [] append a n parent counts[a n] len parents else visitable append a n parent counts[a n] 0visited 0while visitable node visitable popleft visited + 1for client in node to children get node [] parent counts[client] - 1if not parent counts[client] visitable append client return visited len parent counts
def get jid jid options get options ret None response request 'GET' options['url'] + options['db'] + '/' + jid if 'error' in response log error ' Unabletoget JID"{ 0 }" "{ 1 }"' format jid response return {}return { response['id'] response}
@pytest mark hasgpudef test hist nbin offset dim dtype inp backend pair nbins offset dim dtype name inp gen nbin offset dim dtype inpgpuflag check gpu get compute capability 0 > 3 0 if gpuflag is False raise Runtime Error ' Devicedoesnothave CUD Acomputecapability 3 0orgreater' ng nc backend pairng set hist buffers nbins offset nc set hist buffers nbins offset np inp inp gen dim astype dtype np hist ref hist np inp nbins nbins offset offset for be in [ng nc] be inp be array np inp dtype dtype be hist be inp hist name assert tensors allclose np hist be hist
def test options from venv config script virtualenv from pip locations import config basenameconf '[global]\nno-index true'ini virtualenv location / config basename with open ini 'w' as f f write conf result script pip 'install' '-vvv' 'INI Tools' expect error True assert ' Ignoringindexes ' in result stdout str result assert ' Distribution Not Found Nomatchingdistributionfoundfor INI Tools' in result stdout
def compute Digest Response auth map password method 'GET' A1 None **kwargs params auth mapalgorithm params get 'algorithm' MD 5 H DIGEST AUTH ENCODERS[algorithm]KD lambda secret data H secret + ' ' + data qop params get 'qop' None H A2 H A2 params method kwargs if algorithm MD 5 SESS and A1 is not None H A1 H A1 else H A1 H A1 params password if qop in 'auth' 'auth-int' request '%s %s %s %s %s' % params['nonce'] params['nc'] params['cnonce'] params['qop'] H A2 elif qop is None request '%s %s' % params['nonce'] H A2 return KD H A1 request
def compute Digest Response auth map password method 'GET' A1 None **kwargs params auth mapalgorithm params get 'algorithm' MD 5 H DIGEST AUTH ENCODERS[algorithm]KD lambda secret data H secret + ' ' + data qop params get 'qop' None H A2 H A2 params method kwargs if algorithm MD 5 SESS and A1 is not None H A1 H A1 else H A1 H A1 params password if qop in 'auth' 'auth-int' request '%s %s %s %s %s' % params['nonce'] params['nc'] params['cnonce'] params['qop'] H A2 elif qop is None request '%s %s' % params['nonce'] H A2 return KD H A1 request
def get default persistent db instance return get default temp db instance
def get default persistent db instance return get default temp db instance
def get Key Map my Map 'wsrep last committed' 'wsrep replicated' 'wsrep repl keys' 'wsrep local commits' 'wsrep received' 'wsrep local send queue avg' 'wsrep local recv queue avg' return my Map
def get Key Map my Map 'wsrep last committed' 'wsrep replicated' 'wsrep repl keys' 'wsrep local commits' 'wsrep received' 'wsrep local send queue avg' 'wsrep local recv queue avg' return my Map
def get Key Map my Map 'wsrep last committed' 'wsrep replicated' 'wsrep repl keys' 'wsrep local commits' 'wsrep received' 'wsrep local send queue avg' 'wsrep local recv queue avg' return my Map
def test file class Fake Response object passlogo path os path join BASE DIRECTORY 'artwork' 'logo png' fake response Fake Response assert hasattr hug output format file logo path fake response 'read' assert fake response content type 'image/png' with open logo path 'rb' as image file hasattr hug output format file image file fake response 'read' assert not hasattr hug output format file 'NONEXISTENTFILE' fake response 'read'
def batch norm dnn layer **kwargs nonlinearity getattr layer 'nonlinearity' None if nonlinearity is not None layer nonlinearity nonlinearities identityif hasattr layer 'b' and layer b is not None del layer params[layer b]layer b Nonebn name kwargs pop 'name' None or getattr layer 'name' None and layer name + ' bn' layer Batch Norm DNN Layer layer name bn name **kwargs if nonlinearity is not None from special import Nonlinearity Layernonlin name bn name and bn name + ' nonlin' layer Nonlinearity Layer layer nonlinearity name nonlin name return layer
def get func list stats sel list if stats fcn list list stats fcn list[ ]order message ' Orderedby ' + stats sort type else list stats stats keys order message ' Randomlistingorderwasused'select message ''for selection in sel list list select message stats eval print amount selection list select message return list order message select message
def get func list stats sel list if stats fcn list list stats fcn list[ ]order message ' Orderedby ' + stats sort type else list stats stats keys order message ' Randomlistingorderwasused'select message ''for selection in sel list list select message stats eval print amount selection list select message return list order message select message
def cyclen n iterable return chain from iterable repeat tuple iterable n
def cyclen n iterable return chain from iterable repeat tuple iterable n
def mask non positives a mask a < 0 0 if mask any return ma Masked Array a mask mask return a
def mask non positives a mask a < 0 0 if mask any return ma Masked Array a mask mask return a
def isarray a try validity isinstance a ndarray except validity Falsereturn validity
def encode data marker passphrase None randfunc None if randfunc is None randfunc get random bytesout '-----BEGIN%s-----\n' % marker if passphrase salt randfunc 8 key PBKDF 1 passphrase salt 16 1 MD 5 key + PBKDF 1 key + passphrase salt 8 1 MD 5 objenc DES 3 new key DES 3 MODE CBC salt out + ' Proc- Type 4 ENCRYPTED\n DEK- Info DES-EDE 3 -CBC %s\n\n' % tostr hexlify salt upper data objenc encrypt pad data objenc block size chunks [tostr b2 a base 64 data[i i + 48 ] for i in range 0 len data 48 ]out + '' join chunks out + '-----END%s-----' % marker return out
def is sphinx markup docstring return '`' in docstring or ' ' in docstring
def setup options **kwargs params dict kwargs params update level options log level logging basic Config **params
def find Local Port ports ret Val Nonefor port in ports try try s socket orig socket socket AF INET socket SOCK STREAM except Attribute Error s socket socket socket AF INET socket SOCK STREAM s connect LOCALHOST port ret Val portbreakexcept socket error passfinally try s close except socket error passreturn ret Val
def add credential username password proxy T411 Proxy is new proxy add credential username username password password if is new console u' Credentialsuccessfullyadded' else console u' Credentialsuccessfullyupdated'
def os bootstrap names sys builtin module namesjoin Noneif 'posix' in names sep '/'from posix import statelif 'nt' in names sep '\\'from nt import statelif 'dos' in names sep '\\'from dos import statelif 'os 2 ' in names sep '\\'from os 2 import statelse raise Import Error 'noosspecificmodulefound'if join is None def join a b sep sep if a '' return blastchar a[ -1 ]if lastchar '/' or lastchar sep return a + b return a + sep + b global os stat os stat statglobal os path join os path join join
def get all sharing strategies return all sharing strategies
def get all sharing strategies return all sharing strategies
def pci device get by addr context node id dev addr return IMPL pci device get by addr context node id dev addr
def test download wheel script data result script pip 'download' '--no-index' '-f' data packages '-d' ' ' 'meta' assert Path 'scratch' / 'meta- 1 0-py 2 py 3 -none-any whl' in result files created assert script site packages / 'piptestpackage' not in result files created
def weekend to monday dt if dt weekday 6 return dt + timedelta 1 elif dt weekday 5 return dt + timedelta 2 return dt
def check reg match sss py sss mf comp tol info py sss py info['proc history'][ 0 ]['max info']['sss info']assert true info py is not None assert true len info py > 0 info mf sss mf info['proc history'][ 0 ]['max info']['sss info']n in Nonefor inf in info py info mf if n in is None n in get n moments inf['in order'] else assert equal n in get n moments inf['in order'] assert equal inf['components'][ n in] sum inf['nfree'] assert allclose info py['nfree'] info mf['nfree'] atol comp tol err msg sss py filenames[ 0 ]
def application init args update False setup environment process args args app new application args model new model app args repo prompt args prompt settings args settings if update model update status cfg gitcfg current return Application Context args app cfg model
def application init args update False setup environment process args args app new application args model new model app args repo prompt args prompt settings args settings if update model update status cfg gitcfg current return Application Context args app cfg model
def test get debug values exc prev value config compute test valuetry config compute test value 'raise'x T vector try for x val in op get debug values x assert Falseraised Falseexcept Attribute Error raised Trueassert raisedfinally config compute test value prev value
def test get debug values exc prev value config compute test valuetry config compute test value 'raise'x T vector try for x val in op get debug values x assert Falseraised Falseexcept Attribute Error raised Trueassert raisedfinally config compute test value prev value
def test get debug values exc prev value config compute test valuetry config compute test value 'raise'x T vector try for x val in op get debug values x assert Falseraised Falseexcept Attribute Error raised Trueassert raisedfinally config compute test value prev value
def test get debug values exc prev value config compute test valuetry config compute test value 'raise'x T vector try for x val in op get debug values x assert Falseraised Falseexcept Attribute Error raised Trueassert raisedfinally config compute test value prev value
def dataset version path name ver fname op join path 'version txt' if op exists ver fname with open ver fname 'r' as fid version fid readline strip else version '0 3' if name 'sample' else '0 7' return version
def parse xmlsec output output for line in output split '\n' if line 'OK' return Trueelif line 'FAIL' raise Xmlsec Error output raise Xmlsec Error output
def vb stop vm name None timeout 10000 **kwargs vbox vb get box machine vbox find Machine name log info ' Stoppingmachine%s' name session virtualbox Manager open Machine Session machine try console session consoleprogress console power Down progress wait For Completion timeout finally virtualbox Manager close Machine Session session vb wait for session state session log info ' Stoppedmachine%sisnow%s' name vb machinestate to str machine state return vb xpcom to attribute dict machine 'I Machine'
def get Four Significant Figures number if number None return Noneabsolute Number abs number if absolute Number > 100 0 return get Rounded To Places String 2 number if absolute Number < 1e- 09 return get Rounded To Places String 13 number return get Rounded To Places String 3 - math floor math log 10 absolute Number number
def get Four Significant Figures number if number None return Noneabsolute Number abs number if absolute Number > 100 0 return get Rounded To Places String 2 number if absolute Number < 1e- 09 return get Rounded To Places String 13 number return get Rounded To Places String 3 - math floor math log 10 absolute Number number
@skip if not win 32 @with environmentdef test get home dir 8 os name 'nt'for key in ['HOME' 'HOMESHARE' 'HOMEDRIVE' 'HOMEPATH' 'USERPROFILE'] env pop key None class key def Close self passwith patch object wreg ' Open Key' return value key with patch object wreg ' Query Value Ex' return value [abspath HOME TEST DIR ] home dir path get home dir nt assert equal home dir abspath HOME TEST DIR
def Generate Output target list target dicts data params if params['options'] generator output raise Not Implemented Error '--generator outputnotimplementedforeclipse' user config params get 'generator flags' {} get 'config' None if user config Generate Output For Config target list target dicts data params user config else config names target dicts[target list[ 0 ]]['configurations'] keys for config name in config names Generate Output For Config target list target dicts data params config name
def get arch run function run arch run function '/bin/uname-m' stdout rstrip if re match 'i\\d 86 $' arch arch 'i 386 'return arch
def plot option logic plot options from call signature default plot options copy deepcopy DEFAULT PLOT OPTIONS file options tools get config file session options session get session plot options plot options from call signature copy deepcopy plot options from call signature for option set in [plot options from call signature session options file options] utils validate world readable and sharing settings option set utils set sharing and world readable option set if 'filename' in option set and 'fileopt' not in option set option set['fileopt'] 'overwrite'user plot options {}user plot options update default plot options user plot options update file options user plot options update session options user plot options update plot options from call signature user plot options {k v for k v in user plot options items if k in default plot options }return user plot options
def plot option logic plot options from call signature default plot options copy deepcopy DEFAULT PLOT OPTIONS file options tools get config file session options session get session plot options plot options from call signature copy deepcopy plot options from call signature for option set in [plot options from call signature session options file options] utils validate world readable and sharing settings option set utils set sharing and world readable option set if 'filename' in option set and 'fileopt' not in option set option set['fileopt'] 'overwrite'user plot options {}user plot options update default plot options user plot options update file options user plot options update session options user plot options update plot options from call signature user plot options {k v for k v in user plot options items if k in default plot options }return user plot options
def update hash dict filehash filename try with open file path + '/hash dict pickle' 'rb' as f hash dict c Pickle load f except IO Error hash dict {}hash dict update {filename filehash} with open os path join file path 'hash dict pickle' 'wb' as f c Pickle dump hash dict f
def manage Roles mo first Half mo group 1 second Half mo group 2 new Roles []roles second Half split '/' for role in roles role role strip if not role continuerole ID analyze imdbid role if role ID is None role ID u'/'else role ID + u'/'new Roles append u'<divclass " imdbpyrole"roleid "%s">%s</div>' % role ID role strip return first Half + u'/' join new Roles + mo group 3
def manage Roles mo first Half mo group 1 second Half mo group 2 new Roles []roles second Half split '/' for role in roles role role strip if not role continuerole ID analyze imdbid role if role ID is None role ID u'/'else role ID + u'/'new Roles append u'<divclass " imdbpyrole"roleid "%s">%s</div>' % role ID role strip return first Half + u'/' join new Roles + mo group 3
def list option option opt value parser if value lower 'true' dest Trueelse dest [s for s in value split ' ' ]setattr parser values option dest dest
def list option option opt value parser if value lower 'true' dest Trueelse dest [s for s in value split ' ' ]setattr parser values option dest dest
def render hjson data saltenv 'base' sls '' **kws if not isinstance hjson data string types hjson data hjson data read if hjson data startswith '# ' hjson data hjson data[ hjson data find '\n' + 1 ]if not hjson data strip return {}return hjson loads hjson data
def test scenarios parsed by feature has feature feature Feature from string FEATURE 2 for scenario in feature scenarios assert equals scenario feature feature
def test scenarios parsed by feature has feature feature Feature from string FEATURE 2 for scenario in feature scenarios assert equals scenario feature feature
def validate keys key file ret {}linere re compile '^ *? \\s? ? ssh\\- ecds [\\w-]+\\s + $' try with salt utils fopen key file 'r' as fh for line in fh if line startswith '#' continuesearch re search linere line if not search continueopts search group 1 comps search group 2 split if len comps < 2 continueif opts options opts split ' ' else options []enc comps[ 0 ]key comps[ 1 ]comment '' join comps[ 2 ] fingerprint fingerprint key if fingerprint is None continueret[key] {'enc' enc 'comment' comment 'options' options 'fingerprint' fingerprint}except IO Error OS Error raise Command Execution Error ' Problemreadingsshkeyfile{ 0 }' format key file return ret
@contextmanagerdef pushd path cwd os getcwd os chdir os path abspath path try yield finally os chdir cwd
@contextmanagerdef pushd path cwd os getcwd os chdir os path abspath path try yield finally os chdir cwd
def date year None month None day None obj False today dt datetime utcnow if year is None year today yearif month is None month today monthif day is None day today dayvalue dt date year month day if obj return valuereturn format date value
def getall return load copy
def getall return load copy
def oo haproxy backend masters hosts port servers []for idx host info in enumerate hosts server dict name 'master%s' % idx server ip host info['openshift']['common']['ip']server['address'] '%s %s' % server ip port server['opts'] 'check'servers append server return servers
def fix up private attr clsname spec out Ordered Dict for k v in spec items if k startswith ' ' and not k endswith ' ' k ' ' + clsname + k out[k] vreturn out
def test grouped item access T1 for masked in False True t1 Table T1 masked masked tg t1 group by 'a' tgs tg[ 'a' 'c' 'd' ]assert np all tgs groups keys tg groups keys assert np all tgs groups indices tg groups indices tgsa tgs groups aggregate np sum assert tgsa pformat ['acd' '----------' '00 04 ' '16 018 ' '222 06 '] tgs tg[ 'c' 'd' ]assert np all tgs groups keys tg groups keys assert np all tgs groups indices tg groups indices tgsa tgs groups aggregate np sum assert tgsa pformat ['cd' '-------' '0 04 ' '6 018 ' '22 06 ']
def test grouped item access T1 for masked in False True t1 Table T1 masked masked tg t1 group by 'a' tgs tg[ 'a' 'c' 'd' ]assert np all tgs groups keys tg groups keys assert np all tgs groups indices tg groups indices tgsa tgs groups aggregate np sum assert tgsa pformat ['acd' '----------' '00 04 ' '16 018 ' '222 06 '] tgs tg[ 'c' 'd' ]assert np all tgs groups keys tg groups keys assert np all tgs groups indices tg groups indices tgsa tgs groups aggregate np sum assert tgsa pformat ['cd' '-------' '0 04 ' '6 018 ' '22 06 ']
def dict dir obj ns {}for key in dir 2 obj try ns[key] getattr obj key except Attribute Error passreturn ns
def elu x alpha 1 return tensor switch x > 0 x alpha * tensor exp x - 1
def csrtodok csr smat {} A JA IA shape csrfor i in range len IA - 1 indices slice IA[i] IA[ i + 1 ] for l m in zip A[indices] JA[indices] smat[ i m ] lreturn Sparse Matrix * shape + [smat]
def csrtodok csr smat {} A JA IA shape csrfor i in range len IA - 1 indices slice IA[i] IA[ i + 1 ] for l m in zip A[indices] JA[indices] smat[ i m ] lreturn Sparse Matrix * shape + [smat]
def has catalog visibility course visibility type return ACCESS GRANTED if course catalog visibility visibility type else ACCESS DENIED
def sel Random individuals k return [random choice individuals for i in xrange k ]
def sel Random individuals k return [random choice individuals for i in xrange k ]
def ensure local plotly files if check file permissions for fn in [CREDENTIALS FILE CONFIG FILE] utils ensure file exists fn contents utils load json dict fn for key val in list FILE CONTENT[fn] items if key not in contents contents[key] valcontents keys list contents keys for key in contents keys if key not in FILE CONTENT[fn] del contents[key]utils save json dict fn contents else warnings warn " Lookslikeyoudon'thave'read-write'permissiontoyour'home' '~' directoryortoour'~/ plotly'directory Thatmeansplotly'spythonapican'tsetuplocalconfigurationfiles Noproblemthough You'lljusthavetosign-inusing'plotly plotly sign in ' Forhelpwiththat 'help plotly plotly sign in ' \n Questions? Visitcommunity plot lyorupgradetoa Proplanfor 1 - 1 help https //goo gl/ 1 YU Vu 9 "
def ensure local plotly files if check file permissions for fn in [CREDENTIALS FILE CONFIG FILE] utils ensure file exists fn contents utils load json dict fn for key val in list FILE CONTENT[fn] items if key not in contents contents[key] valcontents keys list contents keys for key in contents keys if key not in FILE CONTENT[fn] del contents[key]utils save json dict fn contents else warnings warn " Lookslikeyoudon'thave'read-write'permissiontoyour'home' '~' directoryortoour'~/ plotly'directory Thatmeansplotly'spythonapican'tsetuplocalconfigurationfiles Noproblemthough You'lljusthavetosign-inusing'plotly plotly sign in ' Forhelpwiththat 'help plotly plotly sign in ' \n Questions? Visitcommunity plot lyorupgradetoa Proplanfor 1 - 1 help https //goo gl/ 1 YU Vu 9 "
def notes document notes domhelpers find Elements With Attribute document 'class' 'note' note Prefix dom parse String '<strong> Note </strong>' document Elementfor note in notes note child Nodes insert 0 note Prefix
def function 1 individual position height width value 0 0for x p in zip individual position value + x - p ** 2 return height / 1 + width * value
def setup platform hass config add devices discovery info None name config get CONF NAME add devices [ Cpu Speed Sensor name ]
def all from module module mod mod import module if not mod return {}members getmembers mod predicate lambda obj getmodule obj in mod None return dict key val for key val in members if not key startswith ' '
@contextmanagerdef args **kwargs kwargs str ' ' join [ '%s %r' % k v for k v in kwargs items ] raise Deprecation Warning '\n\nsh args hasbeendeprecatedbecauseitwasneverthreadsafe usethe\nfollowinginstead \n\nsh 2 sh {kwargs} \nsh 2 your command \n\nor\n\nsh 2 sh {kwargs} \nfromsh 2 importyour command\nyour command \n\n' format kwargs kwargs str
@contextmanagerdef args **kwargs kwargs str ' ' join [ '%s %r' % k v for k v in kwargs items ] raise Deprecation Warning '\n\nsh args hasbeendeprecatedbecauseitwasneverthreadsafe usethe\nfollowinginstead \n\nsh 2 sh {kwargs} \nsh 2 your command \n\nor\n\nsh 2 sh {kwargs} \nfromsh 2 importyour command\nyour command \n\n' format kwargs kwargs str
def add handlers handler list subparsers command handlers [ List Artifacts Handler 'screenboard' None 'list datadog screenboards' ' Getthelistof Screenboardsfrom Datadog ' List Artifacts Handler 'timeboard' None 'list datadog timeboards' ' Getthelistof Timeboardsfrom Datadog ' Get Artifact Handler 'screenboard' None 'get datadog screenboard' ' Getthea Datadog Screenboard ' Get Artifact Handler 'timeboard' None 'get datadog timeboard' ' Getthea Datadog Timeboard ' ]for handler in command handlers handler add argparser subparsers handler list append handler
@pytest mark parametrize u'poly' [ Chebyshev 2 D 1 2 Polynomial 2 D 2 Legendre 2 D 1 2 Chebyshev 1 D 5 Legendre 1 D 5 Polynomial 1 D 5 ] def test compound with polynomials poly poly parameters [1 2 3 4 1 2]shift Shift 3 model poly shift x y np mgrid[ 20 37 ]result compound model x y result shift poly x y assert allclose result result compound
@pytest mark parametrize u'poly' [ Chebyshev 2 D 1 2 Polynomial 2 D 2 Legendre 2 D 1 2 Chebyshev 1 D 5 Legendre 1 D 5 Polynomial 1 D 5 ] def test compound with polynomials poly poly parameters [1 2 3 4 1 2]shift Shift 3 model poly shift x y np mgrid[ 20 37 ]result compound model x y result shift poly x y assert allclose result result compound
@pytest mark parametrize u'poly' [ Chebyshev 2 D 1 2 Polynomial 2 D 2 Legendre 2 D 1 2 Chebyshev 1 D 5 Legendre 1 D 5 Polynomial 1 D 5 ] def test compound with polynomials poly poly parameters [1 2 3 4 1 2]shift Shift 3 model poly shift x y np mgrid[ 20 37 ]result compound model x y result shift poly x y assert allclose result result compound
def add lease mac ip address api network rpcapi Network API api lease fixed ip context get admin context ip address CONF host
def Read Url Contents url req urllib 2 Request url return urllib 2 urlopen req read
def get power command power type if power type power path 1 '/sbin/fence %s' % power type power path 2 '/usr/sbin/fence %s' % power type for power path in power path 1 power path 2 if os path isfile power path and os access power path os X OK return power pathreturn None
def get Data Provider dataset assert dataset in ['flickr 8 k' 'flickr 30 k' 'coco'] 'dataset%sunknown' % dataset return Basic Data Provider dataset
def get Data Provider dataset assert dataset in ['flickr 8 k' 'flickr 30 k' 'coco'] 'dataset%sunknown' % dataset return Basic Data Provider dataset
def validate name name name str name name length len name regex re compile '^[a-z A-Z 0 - 9 ][A- Za-z 0 - 9 -]*[a-z A-Z 0 - 9 ]$' if name length < 3 or name length > 48 ret Falseelif not re match regex name ret Falseelse ret Trueif ret is False log warning 'A Linodelabelmayonlycontain ASCI Ilettersornumbers dashes andunderscores mustbeginandendwithlettersornumbers andbeatleastthreecharactersinlength ' return ret
def validate name name name str name name length len name regex re compile '^[a-z A-Z 0 - 9 ][A- Za-z 0 - 9 -]*[a-z A-Z 0 - 9 ]$' if name length < 3 or name length > 48 ret Falseelif not re match regex name ret Falseelse ret Trueif ret is False log warning 'A Linodelabelmayonlycontain ASCI Ilettersornumbers dashes andunderscores mustbeginandendwithlettersornumbers andbeatleastthreecharactersinlength ' return ret
@xframe options sameorigin@login required@process document pathdef edit attachment request document slug document locale document get object or 404 Document locale document locale slug document slug if request method 'POST' return redirect document get edit url if not allow add attachment by request user raise Permission Deniedform Attachment Revision Form data request POST files request FILES if form is valid revision form save commit False revision creator request userattachment Attachment objects create title revision title revision attachment attachmentrevision save attachment attach document request user revision return redirect document get edit url else context {'form' form 'document' document}return render request 'attachments/edit attachment html' context
@xframe options sameorigin@login required@process document pathdef edit attachment request document slug document locale document get object or 404 Document locale document locale slug document slug if request method 'POST' return redirect document get edit url if not allow add attachment by request user raise Permission Deniedform Attachment Revision Form data request POST files request FILES if form is valid revision form save commit False revision creator request userattachment Attachment objects create title revision title revision attachment attachmentrevision save attachment attach document request user revision return redirect document get edit url else context {'form' form 'document' document}return render request 'attachments/edit attachment html' context
@xframe options sameorigin@login required@process document pathdef edit attachment request document slug document locale document get object or 404 Document locale document locale slug document slug if request method 'POST' return redirect document get edit url if not allow add attachment by request user raise Permission Deniedform Attachment Revision Form data request POST files request FILES if form is valid revision form save commit False revision creator request userattachment Attachment objects create title revision title revision attachment attachmentrevision save attachment attach document request user revision return redirect document get edit url else context {'form' form 'document' document}return render request 'attachments/edit attachment html' context
@xframe options sameorigin@login required@process document pathdef edit attachment request document slug document locale document get object or 404 Document locale document locale slug document slug if request method 'POST' return redirect document get edit url if not allow add attachment by request user raise Permission Deniedform Attachment Revision Form data request POST files request FILES if form is valid revision form save commit False revision creator request userattachment Attachment objects create title revision title revision attachment attachmentrevision save attachment attach document request user revision return redirect document get edit url else context {'form' form 'document' document}return render request 'attachments/edit attachment html' context
@xframe options sameorigin@login required@process document pathdef edit attachment request document slug document locale document get object or 404 Document locale document locale slug document slug if request method 'POST' return redirect document get edit url if not allow add attachment by request user raise Permission Deniedform Attachment Revision Form data request POST files request FILES if form is valid revision form save commit False revision creator request userattachment Attachment objects create title revision title revision attachment attachmentrevision save attachment attach document request user revision return redirect document get edit url else context {'form' form 'document' document}return render request 'attachments/edit attachment html' context
@xframe options sameorigin@login required@process document pathdef edit attachment request document slug document locale document get object or 404 Document locale document locale slug document slug if request method 'POST' return redirect document get edit url if not allow add attachment by request user raise Permission Deniedform Attachment Revision Form data request POST files request FILES if form is valid revision form save commit False revision creator request userattachment Attachment objects create title revision title revision attachment attachmentrevision save attachment attach document request user revision return redirect document get edit url else context {'form' form 'document' document}return render request 'attachments/edit attachment html' context
def twitter outbox if not auth s3 logged in session error T ' Requires Login ' redirect URL c 'default' f 'user' args 'login' tablename 'msg twitter'table s3 db msg twitters 3 filter table inbound False table inbound readable Falses 3 crud strings[tablename] Storage title display T ' Tweet Details' title list T ' Sent Tweets' label list button T ' View Sent Tweets' label delete button T ' Delete Tweet' msg record deleted T ' Tweetdeleted' msg list empty T ' No Tweetscurrentlyin Outbox' def postp r output if isinstance output dict add btn A T ' Compose' class 'action-btn' href URL f 'compose' output['rheader'] add btnreturn outputs 3 postp postps 3 db configure tablename editable False insertable False listadd False list fields ['id' 'date' 'to address' 'body'] return s3 rest controller module 'twitter'
def get localzone global cache tzif cache tz is None cache tz get localzone return cache tz
def get localzone global cache tzif cache tz is None cache tz get localzone return cache tz
def in encoding return stream encoding sys stdin
def check update montage info montage path None update ch names False if montage is not None if not isinstance montage string types Montage err ' Montagemustbestr None orinstanceof Montage %swasprovided' % type montage raise Type Error err if montage is not None if isinstance montage string types montage read montage montage path path set montage info montage update ch names update ch names missing positions []exclude FIFF FIFFV EOG CH FIFF FIFFV MISC CH FIFF FIFFV STIM CH for ch in info['chs'] if not ch['kind'] in exclude if np unique ch['loc'] size 1 missing positions append ch['ch name'] if missing positions raise Key Error ' Thefollowingpositionsaremissingfromthemontagedefinitions %s Ifthosechannelslackpositionsbecausetheyare EO Gchannelsusetheeogparameter ' % str missing positions
def check update montage info montage path None update ch names False if montage is not None if not isinstance montage string types Montage err ' Montagemustbestr None orinstanceof Montage %swasprovided' % type montage raise Type Error err if montage is not None if isinstance montage string types montage read montage montage path path set montage info montage update ch names update ch names missing positions []exclude FIFF FIFFV EOG CH FIFF FIFFV MISC CH FIFF FIFFV STIM CH for ch in info['chs'] if not ch['kind'] in exclude if np unique ch['loc'] size 1 missing positions append ch['ch name'] if missing positions raise Key Error ' Thefollowingpositionsaremissingfromthemontagedefinitions %s Ifthosechannelslackpositionsbecausetheyare EO Gchannelsusetheeogparameter ' % str missing positions
def libvlc media list lock p ml f Cfunctions get 'libvlc media list lock' None or Cfunction 'libvlc media list lock' 1 None None Media List return f p ml
@register opt 'low memory' @local optimizer [ Gpu CA Reduce Cuda] def local gpu elemwise careduce node if isinstance node op Gpu CA Reduce Cuda and node op pre scalar op is None and node inputs[ 0 ] owner and isinstance node inputs[ 0 ] owner op Gpu Elemwise and isinstance node inputs[ 0 ] owner op scalar op scalar basic Sqr op node opinp node inputs[ 0 ] owner inputs[ 0 ]return [gpu ca reduce cuda scalar op op scalar op axis op axis reduce mask op reduce mask pre scalar op scalar basic sqr inp ]
def save obj base mapper states uowtransaction single False if not single and not base mapper batch for state in sort states states save obj base mapper [state] uowtransaction single True return states to insert states to update organize states for save base mapper states uowtransaction cached connections cached connection dict base mapper for table mapper in base mapper sorted tables items insert collect insert commands base mapper uowtransaction table states to insert update collect update commands base mapper uowtransaction table states to update if update emit update statements base mapper uowtransaction cached connections mapper table update if insert emit insert statements base mapper uowtransaction cached connections mapper table insert finalize insert update commands base mapper uowtransaction states to insert states to update
def mpl runner safe execfile def mpl execfile fname *where **kw 'matplotlib-awarewrapperaroundsafe execfile \n\n Itsinterfaceisidenticaltothatofthe func `execfile`builtin \n\n Thisisultimatelyacalltoexecfile butwrappedinsafetiesto\nproperlyhandleinteractiverendering 'import matplotlibimport matplotlib pyplot as pltis interactive matplotlib rc Params['interactive']matplotlib interactive False safe execfile fname *where **kw matplotlib interactive is interactive if plt draw if interactive called plt draw plt draw if interactive called Falsetry da plt draw allexcept Attribute Error passelse da return mpl execfile
def cloudnetwork vm return config get cloud config value 'cloudnetwork' vm opts default False search global False
def cloudnetwork vm return config get cloud config value 'cloudnetwork' vm opts default False search global False
def cloudnetwork vm return config get cloud config value 'cloudnetwork' vm opts default False search global False
def test grouping identifier list subquery p sqlparse parse 'select*from selecta b+casdfromtable sub' [0 ]subquery p tokens[ -1 ] tokens[ 0 ] idx iden list subquery token next by i sql Identifier List assert iden list is not None ilist subquery token next by i sql Identifier idx idx assert ilist is None
def test grouping identifier list subquery p sqlparse parse 'select*from selecta b+casdfromtable sub' [0 ]subquery p tokens[ -1 ] tokens[ 0 ] idx iden list subquery token next by i sql Identifier List assert iden list is not None ilist subquery token next by i sql Identifier idx idx assert ilist is None
def test grouping identifier list subquery p sqlparse parse 'select*from selecta b+casdfromtable sub' [0 ]subquery p tokens[ -1 ] tokens[ 0 ] idx iden list subquery token next by i sql Identifier List assert iden list is not None ilist subquery token next by i sql Identifier idx idx assert ilist is None
def test ast bad except cant compile u' except 1 ' cant compile u' try 1 except 1 ' cant compile u' try 1 except[ 13 ] ' cant compile u' try 1 except[x[ Foo Bar] Bar Bar] '
def get default profile image urls return get profile image urls configuration helpers get value 'PROFILE IMAGE DEFAULT FILENAME' settings PROFILE IMAGE DEFAULT FILENAME staticfiles storage file extension settings PROFILE IMAGE DEFAULT FILE EXTENSION
def Get Connection connection Noneif os getenv ENV KEY try connection thread local connectionexcept Attribute Error passif connection is None connection datastore rpc Connection adapter adapter Set Connection connection return connection
def run hive script script if not os path isfile script raise Runtime Error ' Hivescript {0 }doesnotexist ' format script return run hive ['-f' script]
def run hive script script if not os path isfile script raise Runtime Error ' Hivescript {0 }doesnotexist ' format script return run hive ['-f' script]
def rsync upload excludes [u'* pyc' u'* pyo' u'* db' u' DS Store' u' coverage' u'local settings py' u'/static' u'/ git' u'/ hg']local dir os getcwd + os sep return rsync project remote dir env proj path local dir local dir exclude excludes
def rsync upload excludes [u'* pyc' u'* pyo' u'* db' u' DS Store' u' coverage' u'local settings py' u'/static' u'/ git' u'/ hg']local dir os getcwd + os sep return rsync project remote dir env proj path local dir local dir exclude excludes
def rsync upload excludes [u'* pyc' u'* pyo' u'* db' u' DS Store' u' coverage' u'local settings py' u'/static' u'/ git' u'/ hg']local dir os getcwd + os sep return rsync project remote dir env proj path local dir local dir exclude excludes
def get gdp year rdint vs random request Request vs MACRO URL % vs P TYPE['http'] vs DOMAINS['sina'] rdint vs MACRO TYPE[ 0 ] 0 70 rdint text urlopen request timeout 10 read text text decode 'gbk' if ct PY 3 else text reg Sym re compile '\\ count *? \\}' datastr reg Sym findall text datastr datastr[ 0 ]datastr datastr split 'data ' [1 ]datastr datastr replace '"' '' replace 'null' '0 ' js json loads datastr df pd Data Frame js columns vs GDP YEAR COLS df[ df 0 ] np Na Nreturn df
def test keypoints censure moon image dob detector CENSURE detector detect img expected keypoints np array [[ 21 497 ] [36 46 ] [119 350 ] [185 177 ] [287 250 ] [357 239 ] [463 116 ] [464 132 ] [467 260 ]] expected scales np array [3 4 4 2 2 3 2 2 2] assert array equal expected keypoints detector keypoints assert array equal expected scales detector scales
def filter displayed blocks block unused view frag unused context if getattr block 'show in read only mode' False return fragreturn Fragment u' Thistypeofcomponentcannotbeshownwhileviewingthecourseasaspecificstudent '
def filter displayed blocks block unused view frag unused context if getattr block 'show in read only mode' False return fragreturn Fragment u' Thistypeofcomponentcannotbeshownwhileviewingthecourseasaspecificstudent '
def delete router router profile None conn auth profile return conn delete router router
def is protected type obj return isinstance obj types None Type int long datetime datetime datetime date datetime time float Decimal basestring
def is protected type obj return isinstance obj types None Type int long datetime datetime datetime date datetime time float Decimal basestring
def is protected type obj return isinstance obj types None Type int long datetime datetime datetime date datetime time float Decimal basestring
def is protected type obj return isinstance obj types None Type int long datetime datetime datetime date datetime time float Decimal basestring
def find tag fid node findkind if node['directory'] is not None for subnode in node['directory'] if subnode kind findkind return read tag fid subnode pos return None
def add parse callback callback options add parse callback callback
@mock streams 'stderr' @with patched object output 'aborts' True def test abort message try abort ' Test' except System Exit passresult sys stderr getvalue eq '\n Fatalerror Test\n\n Aborting \n' result
@app route '/drip' def drip args Case Insensitive Dict request args items duration float args get 'duration' 2 numbytes min int args get 'numbytes' 10 10 * 1024 * 1024 code int args get 'code' 200 pause duration / numbytes delay float args get 'delay' 0 if delay > 0 time sleep delay def generate bytes for i in xrange numbytes yield u'*' encode 'utf- 8 ' time sleep pause response Response generate bytes headers {' Content- Type' 'application/octet-stream' ' Content- Length' str numbytes } response status code codereturn response
def set cache version version from django core cache import cachecache set CMS PAGE CACHE VERSION KEY version get cms setting 'CACHE DURATIONS' ['content']
def attachment destroy context attachment id return IMPL attachment destroy context attachment id
def add team name description None repo names None privacy None permission None profile 'github' try client get client profile organization client get organization get config value profile 'org name' parameters {}parameters['name'] nameif description is not None parameters['description'] descriptionif repo names is not None parameters['repo names'] repo namesif permission is not None parameters['permission'] permissionif privacy is not None parameters['privacy'] privacyorganization requester request Json And Check 'POST' organization url + '/teams' input parameters list teams ignore cache True return Trueexcept github Github Exception as e log exception ' Errorcreatingateam {0 }' format str e return False
def add team name description None repo names None privacy None permission None profile 'github' try client get client profile organization client get organization get config value profile 'org name' parameters {}parameters['name'] nameif description is not None parameters['description'] descriptionif repo names is not None parameters['repo names'] repo namesif permission is not None parameters['permission'] permissionif privacy is not None parameters['privacy'] privacyorganization requester request Json And Check 'POST' organization url + '/teams' input parameters list teams ignore cache True return Trueexcept github Github Exception as e log exception ' Errorcreatingateam {0 }' format str e return False
def Open Filename filename options {} command Get Vim Command options get u'command' u'horizontal-split' u'horizontal-split' size options get u'size' u'' if command in [u'split' u'vsplit'] else u'' focus options get u'focus' False if not focus and command u'tabedit' previous tab Get Int Value u'tabpagenr ' else previous tab Nonetry vim command u'{ 0 }{ 1 }{ 2 }' format size command filename except vim error as e if u'E 325 ' not in str e raiseif filename Get Current Buffer Filepath returnexcept Keyboard Interrupt return Set Up Loaded Buffer command filename options get u'fix' False options get u'position' u'start' options get u'watch' False if not focus if command u'tabedit' Jump To Tab previous tab if command in [u'split' u'vsplit'] Jump To Previous Window
def Object the Type offset vm name None **kwargs name name or the Type offset int offset try if vm profile has type the Type result vm profile types[the Type] offset offset vm vm name name **kwargs return resultexcept Invalid Offset Error return None Object ' Invalid Address 0 x{ 0 08 X} instantiating{ 1 }' format offset name strict vm profile strict debug warning ' Cantfindobject{ 0 }inprofile{ 1 }?' format the Type vm profile
def Object the Type offset vm name None **kwargs name name or the Type offset int offset try if vm profile has type the Type result vm profile types[the Type] offset offset vm vm name name **kwargs return resultexcept Invalid Offset Error return None Object ' Invalid Address 0 x{ 0 08 X} instantiating{ 1 }' format offset name strict vm profile strict debug warning ' Cantfindobject{ 0 }inprofile{ 1 }?' format the Type vm profile
@pytest fixturedef xonsh execer monkeypatch monkeypatch setattr xonsh built ins 'load builtins' lambda *args **kwargs None execer Execer login False unload False builtins xonsh execer execerreturn execer
def deserialize key value value secret False if secret Key Value Pair API setup crypto value symmetric decrypt Key Value Pair API crypto key value return value
def get cache conf if conf cache url return get cache region for legacy conf cache url elif conf cache enabled return get cache region conf else return False
def initialize decorator init def initialize self *args **kwargs cls type self for k v in kwargs items if hasattr cls k attr getattr cls k if isinstance attr Instrumented Attribute column attr property columns[ 0 ]if isinstance column type String if not isinstance v six text type v six text type v if column type length and column type length < len v raise exception String Length Exceeded string v type k length column type length init self *args **kwargs return initialize
def initialize decorator init def initialize self *args **kwargs cls type self for k v in kwargs items if hasattr cls k attr getattr cls k if isinstance attr Instrumented Attribute column attr property columns[ 0 ]if isinstance column type String if not isinstance v six text type v six text type v if column type length and column type length < len v raise exception String Length Exceeded string v type k length column type length init self *args **kwargs return initialize
def initialize decorator init def initialize self *args **kwargs cls type self for k v in kwargs items if hasattr cls k attr getattr cls k if isinstance attr Instrumented Attribute column attr property columns[ 0 ]if isinstance column type String if not isinstance v six text type v six text type v if column type length and column type length < len v raise exception String Length Exceeded string v type k length column type length init self *args **kwargs return initialize
def initialize decorator init def initialize self *args **kwargs cls type self for k v in kwargs items if hasattr cls k attr getattr cls k if isinstance attr Instrumented Attribute column attr property columns[ 0 ]if isinstance column type String if not isinstance v six text type v six text type v if column type length and column type length < len v raise exception String Length Exceeded string v type k length column type length init self *args **kwargs return initialize
@when u'wedroptable' def step drop table context context cli sendline u'droptablea '
def get cpu stat key stats []stat file open '/proc/stat' 'r' line stat file readline while line if line startswith key stats line split [1 ]breakline stat file readline return stats
@utils expects func args 'image id' 'instance' def delete image on error function @functools wraps function def decorated function self context image id instance *args **kwargs try return function self context image id instance *args **kwargs except Exception with excutils save and reraise exception LOG debug ' Cleaningupimage%s' image id exc info True instance instance try self image api delete context image id except exception Image Not Found passexcept Exception LOG exception LE ' Errorwhiletryingtocleanupimage%s' image id instance instance return decorated function
@utils expects func args 'image id' 'instance' def delete image on error function @functools wraps function def decorated function self context image id instance *args **kwargs try return function self context image id instance *args **kwargs except Exception with excutils save and reraise exception LOG debug ' Cleaningupimage%s' image id exc info True instance instance try self image api delete context image id except exception Image Not Found passexcept Exception LOG exception LE ' Errorwhiletryingtocleanupimage%s' image id instance instance return decorated function
def xframe options exempt view func def wrapped view *args **kwargs resp view func *args **kwargs resp xframe options exempt Truereturn respreturn wraps view func assigned available attrs view func wrapped view
def xframe options exempt view func def wrapped view *args **kwargs resp view func *args **kwargs resp xframe options exempt Truereturn respreturn wraps view func assigned available attrs view func wrapped view
def xframe options exempt view func def wrapped view *args **kwargs resp view func *args **kwargs resp xframe options exempt Truereturn respreturn wraps view func assigned available attrs view func wrapped view
def xframe options exempt view func def wrapped view *args **kwargs resp view func *args **kwargs resp xframe options exempt Truereturn respreturn wraps view func assigned available attrs view func wrapped view
def xframe options exempt view func def wrapped view *args **kwargs resp view func *args **kwargs resp xframe options exempt Truereturn respreturn wraps view func assigned available attrs view func wrapped view
def xframe options exempt view func def wrapped view *args **kwargs resp view func *args **kwargs resp xframe options exempt Truereturn respreturn wraps view func assigned available attrs view func wrapped view
def course context from course id course id if course id is None return {'course id' '' 'org id' ''}assert isinstance course id Course Key return {'course id' course id to deprecated string 'org id' course id org}
def colspec dataset width spec 'l'for in range 1 dataset width spec + 'r'return spec
def make formatters config stream openers default stream opener Stream Opener stream sys stdout formatter list []for i name in enumerate config format stream opener default stream openerif i < len stream openers stream opener stream openers[i]formatter class select formatter class name formatter object formatter class stream opener config formatter list append formatter object return formatter list
def set fw rules subprocess call 'iptables-tnat-APREROUTING-ptcp--dport 80 -j DNAT--to-destination%s %s' % NETWORK GW IP PORT shell True subprocess call 'iptables-tnat-APREROUTING-pudp--dport 53 -j DNAT--to-destination%s %s' % NETWORK GW IP 53 shell True subprocess call 'iptables-tnat-APREROUTING-ptcp--dport 53 -j DNAT--to-destination%s %s' % NETWORK GW IP 53 shell True subprocess call 'iptables-tnat-APREROUTING-ptcp--dport 443 -j DNAT--to-destination%s %s' % NETWORK GW IP SSL PORT shell True
def setup database via manager engine settings DATABASES['default']['ENGINE']rdbms type database manager engine to rdbms type engine manager database manager get manager from config rdbms type rdbms type manager create instance manager grant privileges
def backoff Policy initial Delay 1 0 max Delay 60 0 factor 1 5 jitter good Enough Random def policy attempt return min initial Delay * factor ** attempt max Delay + jitter return policy
def backoff Policy initial Delay 1 0 max Delay 60 0 factor 1 5 jitter good Enough Random def policy attempt return min initial Delay * factor ** attempt max Delay + jitter return policy
def open repo in new window dirname qtutils opendir dialog N u' Open Git Repository ' main model getcwd if not dirname returncmds do cmds Open New Repo dirname
def App Log Init logging debug ' Initializing Application Logger ' return Grr Application Logger
def normal ordered form expr independent False recursive limit 10 recursive depth 0 if recursive depth > recursive limit warnings warn ' Toomanyrecursions aborting' return exprif isinstance expr Add return normal ordered form terms expr recursive limit recursive limit recursive depth recursive depth independent independent elif isinstance expr Mul return normal ordered form factor expr recursive limit recursive limit recursive depth recursive depth independent independent else return expr
def date format date None format '%Y-%m-%d' return date cast date strftime format
def date format date None format '%Y-%m-%d' return date cast date strftime format
def is site configuration enabled configuration get current site configuration if configuration return configuration enabledreturn False
def archive repository revision app repository archive dir changeset revision repo get repo for repository app repository repository repo path None create False options dict get mercurial default options dict 'archive' options dict['rev'] changeset revisionerror message ''return code Nonetry return code commands archive get configured ui repo archive dir **options dict except Exception as e error message ' Errorattemptingtoarchiverevision<b>%s</b>ofrepository%s %s\n Returncode %s\n' % str changeset revision str repository name str e str return code log exception error message return return code error message
def cherry pick call func *args **dargs p args p dargs cherry pick args func args dargs return func *p args **p dargs
def cherry pick call func *args **dargs p args p dargs cherry pick args func args dargs return func *p args **p dargs
def del Account Rights sid Object user right try pol Handle win 32 security Lsa Open Policy None win 32 security POLICY ALL ACCESS user rights list [user right] ret win 32 security Lsa Remove Account Rights pol Handle sid Object False user rights list return Trueexcept Exception as e log error ' Errorattemptingtodeleteaccountright exceptionwas{ 0 }' format e return False
def strip dev device name return dev sub '' device name if device name else device name
def establish connection ip username '' password '' delay 1 remote conn telnetlib Telnet ip TELNET PORT TELNET TIMEOUT output remote conn read until 'sername ' READ TIMEOUT remote conn write username + '\n' output remote conn read until 'ssword ' READ TIMEOUT remote conn write password + '\n' time sleep delay return remote conn
def filter non model columns data model columns [c name for c in model table columns]return dict k v for k v in six iteritems data if k in columns or isinstance getattr model k None associationproxy Association Proxy
def lfsr sequence key fill n if not isinstance key list raise Type Error 'keymustbealist' if not isinstance fill list raise Type Error 'fillmustbealist' p key[ 0 ] mod F FF p s fillk len fill L []for i in range n s0 s[ ]L append s[ 0 ] s s[ 1 k]x sum [int key[i] * s0 [i] for i in range k ] s append F x return L
def file descriptors used pid try pid int pid if pid < 0 raise IO Error " Processpidscan'tbenegative %s" % pid except Value Error Type Error raise IO Error ' Processpidwasnon-numeric %s' % pid try return len os listdir '/proc/%i/fd' % pid except Exception as exc raise IO Error ' Unabletochecknumberoffiledescriptorsused %s' % exc
def dict to xml tag d elem Element tag for key val in d items child Element key child text str val elem append child return elem
def create Parser filename real filename None tags None if not tags tags []stream File Input Stream filename real filename tags tags return guess Parser stream
def f1 score y true y pred labels None pos label 1 average 'binary' sample weight None return fbeta score y true y pred 1 labels labels pos label pos label average average sample weight sample weight
def start request request id with request states lock request states[request id] Request State request id
def testtextextraction document opendocx TEST FILE paratextlist getdocumenttext document assert len paratextlist > 0
def getdirs dirs [i for i in os listdir dname ]dirs filter lambda x not os path isfile os path join dname x dirs return dirs
def getdirs dirs [i for i in os listdir dname ]dirs filter lambda x not os path isfile os path join dname x dirs return dirs
def enable ssh current global settings if current[' Global Settings']['SSH STATUS']['VALUE'] 'Y' return True xml '<RIBCLVERSION "2 0">\n<LOGINUSER LOGIN "adminname"PASSWORD "password">\n<RIB INFOMODE "write">\n<MOD GLOBAL SETTINGS>\n<SSH STATU Svalue " Yes"/>\n</MOD GLOBAL SETTINGS>\n</RIB INFO>\n</LOGIN>\n</RIBCL>'return execute cmd ' Enable SSH' xml
@register uncanonicalize@gof local optimizer [ Dim Shuffle] def local dimshuffle alloc node if isinstance node op Dim Shuffle and node inputs[ 0 ] owner input node inputs[ 0 ]if isinstance input owner op T Alloc new order node op new orderexpected new order 'x' * len new order - input ndim + tuple range input ndim if new order expected new order return Falsenb new dims len new order - input ndim new shape input 1 * nb new dims + tuple input owner inputs[ 1 ] return [T alloc input owner inputs[ 0 ] *new shape input ]return False
@register uncanonicalize@gof local optimizer [ Dim Shuffle] def local dimshuffle alloc node if isinstance node op Dim Shuffle and node inputs[ 0 ] owner input node inputs[ 0 ]if isinstance input owner op T Alloc new order node op new orderexpected new order 'x' * len new order - input ndim + tuple range input ndim if new order expected new order return Falsenb new dims len new order - input ndim new shape input 1 * nb new dims + tuple input owner inputs[ 1 ] return [T alloc input owner inputs[ 0 ] *new shape input ]return False
def imrotate arr angle interp 'bilinear' arr asarray arr func {'nearest' 0 'lanczos' 1 'bilinear' 2 'bicubic' 3 'cubic' 3}im toimage arr im im rotate angle resample func[interp] return fromimage im
def covar mstep spherical *args cv covar mstep diag *args return np tile cv mean axis 1 [ np newaxis] 1 cv shape[ 1 ]
def locale details request locale code leader form None reviewer form None editor form None locale get object or 404 Locale locale locale code leaders locale leaders all select related 'profile' reviewers locale reviewers all select related 'profile' editors locale editors all select related 'profile' active active contributors from date date today - timedelta days 90 locale locale code user can edit user can edit request user locale return render request 'wiki/locale details html' {'locale' locale 'leaders' leaders 'reviewers' reviewers 'editors' editors 'active' active 'user can edit' user can edit 'leader form' leader form or Add User Form 'reviewer form' reviewer form or Add User Form 'editor form' editor form or Add User Form }
@gen coroutinedef Update Device client obj store user id device id request device dict request['device dict']if device dict has key 'device id' and device dict['device id'] device id raise web HTTP Error 400 'badauthcookie deviceidmismatch%d %d' % device dict['device id'] device id request['user id'] user idrequest['device id'] device id yield gen Task Operation Create And Execute client user id device id ' Device Update Operation' request logging info 'UPDATEDEVICE user %d device %d' % user id device id raise gen Return {}
def multinomial loss grad w X Y alpha sample weight n classes Y shape[ 1 ]n features X shape[ 1 ]fit intercept w size n classes * n features + 1 grad np zeros n classes n features + bool fit intercept loss p w multinomial loss w X Y alpha sample weight sample weight sample weight[ np newaxis]diff sample weight * p - Y grad[ n features] safe sparse dot diff T X grad[ n features] + alpha * w if fit intercept grad[ -1 ] diff sum axis 0 return loss grad ravel p
def has access course key user action course key checkers {'staff' lambda has staff access to location user None course key 'instructor' lambda has instructor access to location user None course key }return dispatch checkers action user course key
def has access course key user action course key checkers {'staff' lambda has staff access to location user None course key 'instructor' lambda has instructor access to location user None course key }return dispatch checkers action user course key
def aggr mode in List value Counts dict non None 0for elem in in List if elem SENTINEL VALUE FOR MISSING DATA continuenon None + 1if elem in value Counts value Counts[elem] + 1else value Counts[elem] 1if non None 0 return Nonesorted Counts value Counts items sorted Counts sort cmp lambda x y x[ 1 ] - y[ 1 ] reverse True return sorted Counts[ 0 ][ 0 ]
def aggr mode in List value Counts dict non None 0for elem in in List if elem SENTINEL VALUE FOR MISSING DATA continuenon None + 1if elem in value Counts value Counts[elem] + 1else value Counts[elem] 1if non None 0 return Nonesorted Counts value Counts items sorted Counts sort cmp lambda x y x[ 1 ] - y[ 1 ] reverse True return sorted Counts[ 0 ][ 0 ]
def make message command id arguments tuple return MESSAGE START + command id + arguments + midi SYSEX END
def do with python python cmdline runas None if python cmd 'PYENV VERSION {0 }{ 1 }' format python cmdline else cmd cmdlinereturn do cmd runas runas
def save signal sender instance **kw if not kw get 'raw' save translations make key instance
def save signal sender instance **kw if not kw get 'raw' save translations make key instance
def get rc timezone s matplotlib rc Params[u'timezone']if s u'UTC' return UT Cimport pytzreturn pytz timezone s
def get rc timezone s matplotlib rc Params[u'timezone']if s u'UTC' return UT Cimport pytzreturn pytz timezone s
@log calldef metadef object get all context namespace name namespace metadef namespace get context namespace name objects [] check namespace visibility context namespace namespace name for object in DATA['metadef objects'] if object['namespace id'] namespace['id'] objects append object return objects
def Normal Probability Plot sample fit color '0 8' **options xs ys Normal Probability sample mean var Mean Var sample std math sqrt var fit Fit Line xs mean std thinkplot Plot color fit color label 'model' *fit xs ys Normal Probability sample thinkplot Plot xs ys **options
def Normal Probability Plot sample fit color '0 8' **options xs ys Normal Probability sample mean var Mean Var sample std math sqrt var fit Fit Line xs mean std thinkplot Plot color fit color label 'model' *fit xs ys Normal Probability sample thinkplot Plot xs ys **options
@slow test@testing requires testing data@requires mayavi@requires nibabel def test render mri tempdir Temp Dir trans fname new op join tempdir 'temp-trans fif' for a b in [[trans fname trans fname new]] shutil copyfile a b report Report info fname raw fname subject 'sample' subjects dir subjects dir with warnings catch warnings record True warnings simplefilter 'always' report parse folder data path tempdir mri decim 30 pattern '*' n jobs 2 report save op join tempdir 'report html' open browser False assert true repr report
def aggregate label u'' def wrap f f label labelreturn freturn wrap
def aggregate label u'' def wrap f f label labelreturn freturn wrap
def aggregate label u'' def wrap f f label labelreturn freturn wrap
def notebook div model notebook comms target None model check one model model with Model In Empty Document model docs json render items standalone docs json and render items [model] item render items[ 0 ]if notebook comms target item['notebook comms target'] notebook comms targetelse notebook comms target ''script wrap in onload DOC JS render docs json serialize json docs json render items serialize json render items resources EMPT Yjs AUTOLOAD NB JS render comms target notebook comms target js urls resources js files css urls resources css files js raw resources js raw + [script] css raw resources css raw str elementid item['elementid'] div div for render item item html NOTEBOOK DIV render plot script js plot div div return encode utf 8 html
def notebook div model notebook comms target None model check one model model with Model In Empty Document model docs json render items standalone docs json and render items [model] item render items[ 0 ]if notebook comms target item['notebook comms target'] notebook comms targetelse notebook comms target ''script wrap in onload DOC JS render docs json serialize json docs json render items serialize json render items resources EMPT Yjs AUTOLOAD NB JS render comms target notebook comms target js urls resources js files css urls resources css files js raw resources js raw + [script] css raw resources css raw str elementid item['elementid'] div div for render item item html NOTEBOOK DIV render plot script js plot div div return encode utf 8 html
def notebook div model notebook comms target None model check one model model with Model In Empty Document model docs json render items standalone docs json and render items [model] item render items[ 0 ]if notebook comms target item['notebook comms target'] notebook comms targetelse notebook comms target ''script wrap in onload DOC JS render docs json serialize json docs json render items serialize json render items resources EMPT Yjs AUTOLOAD NB JS render comms target notebook comms target js urls resources js files css urls resources css files js raw resources js raw + [script] css raw resources css raw str elementid item['elementid'] div div for render item item html NOTEBOOK DIV render plot script js plot div div return encode utf 8 html
def notebook div model notebook comms target None model check one model model with Model In Empty Document model docs json render items standalone docs json and render items [model] item render items[ 0 ]if notebook comms target item['notebook comms target'] notebook comms targetelse notebook comms target ''script wrap in onload DOC JS render docs json serialize json docs json render items serialize json render items resources EMPT Yjs AUTOLOAD NB JS render comms target notebook comms target js urls resources js files css urls resources css files js raw resources js raw + [script] css raw resources css raw str elementid item['elementid'] div div for render item item html NOTEBOOK DIV render plot script js plot div div return encode utf 8 html
def inv item packs try item id request args[ 0 ]except raise HTTP 400 current xml json message False 400 ' Novalueprovided ' table s3 db inv inv itemptable db supply item packquery table id item id & table item id ptable item id records db query select ptable id ptable name ptable quantity output records json response headers[' Content- Type'] 'application/json'return output
def prevent recursion default def decorator func name ' calling %s ' % func name def newfunc self *args **kwds if getattr self name False return default setattr self name True try return func self *args **kwds finally setattr self name False return newfuncreturn decorator
def prevent recursion default def decorator func name ' calling %s ' % func name def newfunc self *args **kwds if getattr self name False return default setattr self name True try return func self *args **kwds finally setattr self name False return newfuncreturn decorator
def int To ID idnum rid ''while idnum > 0 idnum - 1rid chr idnum % 26 + ord 'a' + rid idnum int idnum / 26 return rid
def get updated changeset revisions app name owner changeset revision repository tool shed util repository util get repository by name and owner app name owner repo hg util get repo for repository app repository repository repo path None create False upper bound changeset revision get next downloadable changeset revision repository repo changeset revision changeset hashes []for changeset in hg util reversed lower upper bounded changelog repo changeset revision upper bound changeset revision if changeset upper bound changeset revision changeset hashes append str repo changectx changeset if changeset hashes changeset hashes str ' ' join changeset hashes return changeset hashes strreturn ''
def read page header file obj tin T File Transport file obj pin T Compact Protocol Factory get protocol tin page header parquet thrift Page Header page header read pin return page header
@contextlib contextmanagerdef get xapi session xenapi check xenapi xapi uri salt ['config option'] 'xapi uri' xapi login salt ['config option'] 'xapi login' xapi password salt ['config option'] 'xapi password' if not xapi uri xapi uri 'httpu ///var/run/xend/xen-api sock'if not xapi login xapi login ''if not xapi password xapi password ''try session xenapi Session xapi uri session xenapi login with password xapi login xapi password yield session xenapi except Exception raise Command Execution Error ' Failedtoconnectto Xen AP Isocket ' finally session xenapi session logout
def Append Subtype Rec node subtype force True if isinstance node pytree Leaf Append Token Subtype node subtype returnfor child in node children Append Subtype Rec child subtype force force
def rewrite sin m n s a b from sympy import expand mul pi ceiling gamma m n m nm expand mul m / pi n expand mul n / pi r ceiling - m * a - n as real imag [0 ] return gamma m * s + n + r gamma 1 - n - r - m * s -1 ** r * pi
def add wsgi intercept host port app create fn script name '' wsgi intercept[ host port ] app create fn script name
def add wsgi intercept host port app create fn script name '' wsgi intercept[ host port ] app create fn script name
def ceil x np import module 'numpy' if isinstance x int float return interval np ceil x elif isinstance x interval if x is valid is False return interval - np inf np inf is valid False else start np ceil x start end np ceil x end if start end return interval start end is valid x is valid else return interval start end is valid None else return Not Implemented Error
def check olecf data offset 512 if data startswith '\xec\xa 5 \xc 1 \x 00 ' offset return 'application/msword'elif ' Microsoft Excel' in data return 'application/vnd ms-excel'elif ppt pattern match data offset return 'application/vnd ms-powerpoint'return False
def check olecf data offset 512 if data startswith '\xec\xa 5 \xc 1 \x 00 ' offset return 'application/msword'elif ' Microsoft Excel' in data return 'application/vnd ms-excel'elif ppt pattern match data offset return 'application/vnd ms-powerpoint'return False
def system path ca path Nonepaths [u'/usr/lib/ssl/certs/ca-certificates crt' u'/etc/ssl/certs/ca-certificates crt' u'/etc/ssl/certs/ca-bundle crt' u'/etc/pki/tls/certs/ca-bundle crt' u'/etc/ssl/ca-bundle pem' u'/usr/local/share/certs/ca-root-nss crt' u'/etc/ssl/cert pem']if u'SSL CERT FILE' in os environ paths insert 0 os environ[u'SSL CERT FILE'] for path in paths if os path exists path and os path getsize path > 0 ca path pathbreakif not ca path raise OS Error pretty message u'\n Unabletofinda C Acertsbundleincommonlocations-try\nsettingthe SSL CERT FIL Eenvironmentalvariable\n' return ca path
def system path ca path Nonepaths [u'/usr/lib/ssl/certs/ca-certificates crt' u'/etc/ssl/certs/ca-certificates crt' u'/etc/ssl/certs/ca-bundle crt' u'/etc/pki/tls/certs/ca-bundle crt' u'/etc/ssl/ca-bundle pem' u'/usr/local/share/certs/ca-root-nss crt' u'/etc/ssl/cert pem']if u'SSL CERT FILE' in os environ paths insert 0 os environ[u'SSL CERT FILE'] for path in paths if os path exists path and os path getsize path > 0 ca path pathbreakif not ca path raise OS Error pretty message u'\n Unabletofinda C Acertsbundleincommonlocations-try\nsettingthe SSL CERT FIL Eenvironmentalvariable\n' return ca path
def system path ca path Nonepaths [u'/usr/lib/ssl/certs/ca-certificates crt' u'/etc/ssl/certs/ca-certificates crt' u'/etc/ssl/certs/ca-bundle crt' u'/etc/pki/tls/certs/ca-bundle crt' u'/etc/ssl/ca-bundle pem' u'/usr/local/share/certs/ca-root-nss crt' u'/etc/ssl/cert pem']if u'SSL CERT FILE' in os environ paths insert 0 os environ[u'SSL CERT FILE'] for path in paths if os path exists path and os path getsize path > 0 ca path pathbreakif not ca path raise OS Error pretty message u'\n Unabletofinda C Acertsbundleincommonlocations-try\nsettingthe SSL CERT FIL Eenvironmentalvariable\n' return ca path
def get signed query params credentials expiration string to sign if not isinstance credentials google auth credentials Signing auth uri 'http //google-cloud-python readthedocs io/en/latest/google-cloud-auth html#setting-up-a-service-account'raise Attribute Error 'youneedaprivatekeytosigncredentials thecredentialsyouarecurrentlyusing%sjustcontainsatoken see%sformoredetails ' % type credentials auth uri signature bytes credentials sign bytes string to sign signature base 64 b64 encode signature bytes service account name credentials signer emailreturn {' Google Access Id' service account name ' Expires' str expiration ' Signature' signature}
def get score funcs from scipy import statsfrom scipy spatial import distancescore funcs Bunch xy arg dist funcs [ n f for n f in vars distance items if isfunction f and not n startswith ' ' ]xy arg stats funcs [ n f for n f in vars stats items if isfunction f and not n startswith ' ' ]score funcs update dict n make xy sfunc f for n f in xy arg dist funcs if get args f ['u' 'v'] score funcs update dict n make xy sfunc f ndim output True for n f in xy arg stats funcs if get args f ['x' 'y'] return score funcs
def zk group path key project key app if key name space namespace key name space else namespace ' default'first element key path element 0 kind first element type if first element has id suffix ' {}' format first element id else suffix ' {}' format first element name return LOCK PATH TEMPLATE format project project namespace namespace group kind + suffix
def create update gitdir if not os path exists gitdname retcode subprocess call 'gitclone' + repo shell True stdout sys stdout stderr sys stderr if retcode 0 msg ' Therewasaproblemcloningtherepo'raise Exception msg else shutil rmtree gitdname create update gitdir
def pure nash brute g return list pure nash brute gen g
def pure nash brute g return list pure nash brute gen g
def normalize word if not isinstance word basestring word str word if not isinstance word str try word word encode 'utf- 8 ' 'ignore' except passfor k v in DIACRITICS items for v in v word word replace v k return word
def ipv 4 to bits ipaddr return '' join [bin int x [2 ] rjust 8 '0 ' for x in ipaddr split ' ' ]
def l2 norm tensors squared False summed [tensor sqr tensor as tensor variable t sum for t in tensors]joined tensor stack summed axis 0 return joined sum if squared else tensor sqrt joined sum
def wait started name path None timeout 300 if not exists name path path raise Command Execution Error ' Container{ 0 }doesdoesexists' format name if not state name path path 'running' raise Command Execution Error ' Container{ 0 }isnotrunning' format name ret Falseif running systemd name path path test started test sd started statelogger log errorelse test started test bare started statelogger log debugnow time time expire now + timeout now time time started test started name path path while time time < expire and not started time sleep 0 3 started test started name path path if started is None logger ' Assuming{ 0 }isstarted althoughwefailedtodetectthatisfullystartedcorrectly' format name ret Trueelse ret startedreturn ret
def wait started name path None timeout 300 if not exists name path path raise Command Execution Error ' Container{ 0 }doesdoesexists' format name if not state name path path 'running' raise Command Execution Error ' Container{ 0 }isnotrunning' format name ret Falseif running systemd name path path test started test sd started statelogger log errorelse test started test bare started statelogger log debugnow time time expire now + timeout now time time started test started name path path while time time < expire and not started time sleep 0 3 started test started name path path if started is None logger ' Assuming{ 0 }isstarted althoughwefailedtodetectthatisfullystartedcorrectly' format name ret Trueelse ret startedreturn ret
def moved global old name new module None new name None assert new module or new name if isinstance new module Moved Globals new module new module mg old refold module inspect getmodule inspect stack [1 ][ 0 ] new module new module or old module new name new name or old name Moved Globals mg moves[ old module old name ] new module new name
def roles trans roles {}for role in ROLE PERMISSIONS roles[role] trans role role return roles
def create benefit benefit class **kwargs if benefit class description is Benefit description raise Runtime Error " Yourcustombenefitmustimplementitsown'description'property" return Benefit objects create proxy class class path benefit class **kwargs
def set key yaml data yaml key yaml value changes []ptr yaml datafinal key yaml key split ' ' [ -1 ]for key in yaml key split ' ' if key not in ptr and key final key ptr[key] {}ptr ptr[key]elif key final key if key in ptr and module safe eval ptr[key] yaml value or key not in ptr ptr[key] yaml valuechanges append yaml key yaml value else if ptr[key] is None and key final key ptr[key] {}ptr ptr[key]return changes
def set key yaml data yaml key yaml value changes []ptr yaml datafinal key yaml key split ' ' [ -1 ]for key in yaml key split ' ' if key not in ptr and key final key ptr[key] {}ptr ptr[key]elif key final key if key in ptr and module safe eval ptr[key] yaml value or key not in ptr ptr[key] yaml valuechanges append yaml key yaml value else if ptr[key] is None and key final key ptr[key] {}ptr ptr[key]return changes
def set key yaml data yaml key yaml value changes []ptr yaml datafinal key yaml key split ' ' [ -1 ]for key in yaml key split ' ' if key not in ptr and key final key ptr[key] {}ptr ptr[key]elif key final key if key in ptr and module safe eval ptr[key] yaml value or key not in ptr ptr[key] yaml valuechanges append yaml key yaml value else if ptr[key] is None and key final key ptr[key] {}ptr ptr[key]return changes
@staff member requireddef admin keywords submit request keyword ids titles [] [] remove punctuation replace u'-' u'' for title in request POST get u'text keywords' u'' split u' ' title u'' join [c for c in title if c not in remove ] strip if title kw created Keyword objects get or create iexact title title keyword id str kw id if keyword id not in keyword ids keyword ids append keyword id titles append title return Http Response u'%s %s' % u' ' join keyword ids u' ' join titles content type u'text/plain'
def append Xml Text Node tag name text parent el xml Text Node tag name text parent append el return el
def next device return select free device find allocated devices
def taggedsent to conll sentence for i word tag in enumerate sentence start 1 input str [str i word ' ' tag tag ' ' '0 ' 'a' ' ' ' ']input str ' DCTB ' join input str + '\n' yield input str
def convert db torrent to json torrent include rel score False torrent name torrent[ 2 ]if torrent name is None or len torrent name strip 0 torrent name ' Unnamedtorrent'res json {'id' torrent[ 0 ] 'infohash' torrent[ 1 ] encode 'hex' 'name' torrent name 'size' torrent[ 3 ] 'category' torrent[ 4 ] 'num seeders' torrent[ 5 ] or 0 'num leechers' torrent[ 6 ] or 0 'last tracker check' torrent[ 7 ] or 0 }if include rel score res json['relevance score'] torrent[ 9 ]return res json
def get tests stanza tests is server prepend None append None client control file '' assert not client control file and is server if not prepend prepend []if not append append []raw control files [read control file test for test in tests]return get tests stanza raw control files is server prepend append client control file client control file
def drag page source index target index placeholder height 0 draggables page q css ' drag-handle' source draggables[source index]target draggables[target index]action Action Chains page browser action click and hold source move to element with offset target 0 placeholder height if placeholder height 0 action release target perform else action release perform wait for notification page
def drag page source index target index placeholder height 0 draggables page q css ' drag-handle' source draggables[source index]target draggables[target index]action Action Chains page browser action click and hold source move to element with offset target 0 placeholder height if placeholder height 0 action release target perform else action release perform wait for notification page
def get pack file abs path pack ref file path pack base path get pack base path pack name pack ref path components []path components append pack base path normalized file path os path normpath '/' + file path lstrip '/' if normalized file path file path raise Value Error ' Invalidfilepath %s' % file path path components append normalized file path result os path join *path components assert normalized file path in result common prefix os path commonprefix [pack base path result] if common prefix pack base path raise Value Error ' Invalidfile path %s' % file path return result
def create candlestick open high low close dates None direction 'both' **kwargs if dates is not None utils validate equal length open high low close dates else utils validate equal length open high low close validate ohlc open high low close direction **kwargs if direction is 'increasing' candle incr data make increasing candle open high low close dates **kwargs data candle incr dataelif direction is 'decreasing' candle decr data make decreasing candle open high low close dates **kwargs data candle decr dataelse candle incr data make increasing candle open high low close dates **kwargs candle decr data make decreasing candle open high low close dates **kwargs data candle incr data + candle decr data layout graph objs Layout return graph objs Figure data data layout layout
def start tls server test port context factory server endpoint SSL 4 Server Endpoint reactor port context factory interface '127 0 0 1' server factory Wait For Disconnects Factory for Protocol Sending Protocol test add Cleanup lambda server factory wait for disconnects d server endpoint listen server factory d add Callback lambda port test add Cleanup port stop Listening return d
def deflood s n 3 if n 0 return s[ 0 0]return re sub ' \\ 2 {%s } ' % n - 1 lambda m m group 1 [0 ] * n s
def bistochastic normalize X max iter 1000 tol 1e- 05 X make nonnegative X X scaled Xdist Nonefor in range max iter X new scale normalize X scaled if issparse X dist norm X scaled data - X data else dist norm X scaled - X new X scaled X newif dist is not None and dist < tol breakreturn X scaled
@dispatch Projection def rowfunc t from toolz itertoolz import getterindices [t child fields index col for col in t fields]return getter indices
@dispatch Projection def rowfunc t from toolz itertoolz import getterindices [t child fields index col for col in t fields]return getter indices
@dispatch Projection def rowfunc t from toolz itertoolz import getterindices [t child fields index col for col in t fields]return getter indices
@pytest fixturedef issue 2401 po po directory settings afrikaans tutorial return require store afrikaans tutorial settings POOTLE TRANSLATION DIRECTORY 'issue 2401 po'
def validate bucket name name validate path name if not GCS BUCKET REGEX match name raise Value Error ' Bucketshouldbe 3 - 63 characterslongusingonlya-z 0- 9 underscore dashordotbutgot%s' % name
def get num escape turns x y c complex x y z complex x y num iterations 0while MIN MAGNITUDE < np absolute z < ESCAPE MAGNITUDE and num iterations < MAX ITERATIONS z z ** 2 + c num iterations + 1return float num iterations / float MAX ITERATIONS
def waterbutler url for route provider path node user None internal False **kwargs url furl furl website settings WATERBUTLER INTERNAL URL if internal else website settings WATERBUTLER URL url path segments append waterbutler action map[route] url args update {'path' path 'nid' node id 'provider' provider} if user url args['cookie'] user get or create cookie elif website settings COOKIE NAME in request cookies url args['cookie'] request cookies[website settings COOKIE NAME]view only Falseif 'view only' in kwargs view only kwargs get 'view only' else view only request args get 'view only' url args['view only'] view onlyurl args update kwargs return url url
def finite diff kauers sum function sum functionfor l in sum limits function function subs l[ 0 ] l[ -1 ] + 1 return function
def finite diff kauers sum function sum functionfor l in sum limits function function subs l[ 0 ] l[ -1 ] + 1 return function
def generate reset password token user password hash md 5 user password if user password else None data [str user id password hash]return security reset serializer dumps data
def send commit return s3 db req send commit
def seed seed None get random state seed seed
@pytest fixturedef reset standarddir no cachedir tag standarddir init None yield standarddir init None
@pytest fixturedef reset standarddir no cachedir tag standarddir init None yield standarddir init None
def bad Decorator fn def name Collision *args **kwargs return fn *args **kwargs return name Collision
def mod run check cmd cmd filename **check cmd opts log debug 'runningourcheck cmd' cmd '{ 0 }{ 1 }' format cmd filename cret salt ['cmd run all'] cmd **check cmd opts if cret['retcode'] 0 ret {'comment' 'check cmdexecutionfailed' 'skip watch' True 'result' False}if cret get 'stdout' ret['comment'] + '\n' + cret['stdout'] if cret get 'stderr' ret['comment'] + '\n' + cret['stderr'] return retreturn True
def strategy connected sequential dfs G colors return strategy connected sequential G colors 'dfs'
def repo absent name profile 'github' **kwargs ret {'name' name 'changes' {} 'result' None 'comment' ''}try target salt ['github get repo info'] name profile profile **kwargs except Command Execution Error target Noneif not target ret['comment'] ' Repo{ 0 }doesnotexist' format name ret['result'] Truereturn retelse if opts ['test'] ret['comment'] ' Repo{ 0 }willbedeleted' format name ret['result'] Nonereturn retresult salt ['github remove repo'] name profile profile **kwargs if result ret['comment'] ' Deletedrepo{ 0 }' format name ret['changes'] setdefault 'old' ' Repo{ 0 }exists' format name ret['changes'] setdefault 'new' ' Repo{ 0 }deleted' format name ret['result'] Trueelse ret['comment'] ' Failedtodeleterepo{ 0 } Ensurethedelete reposcopeisenabledifusing O Auth ' format name ret['result'] Falsereturn ret
def validate timedelta unit arg try return unit map[arg]except if arg is None return 'ns'raise Value Error 'invalidtimedeltaunit{ 0 }provided' format arg
def servicegroup server add sg name s name s port **connection args ret Trueserver servicegroup get server sg name s name s port **connection args if server is not None return Falsenitro connect **connection args if nitro is None return Falsesgsb NS Service Group Server Binding sgsb set servicegroupname sg name sgsb set servername s name sgsb set port s port try NS Service Group Server Binding add nitro sgsb except NS Nitro Error as error log debug 'netscalermoduleerror-NS Service Group Server Binding failed {0 }' format error ret False disconnect nitro return ret
def nonisomorphic trees order create 'graph' if order < 2 raise Value Errorlayout list range order // 2 + 1 + list range 1 order + 1 // 2 while layout is not None layout next tree layout if layout is not None if create 'graph' yield layout to graph layout elif create 'matrix' yield layout to matrix layout layout next rooted tree layout
def nonisomorphic trees order create 'graph' if order < 2 raise Value Errorlayout list range order // 2 + 1 + list range 1 order + 1 // 2 while layout is not None layout next tree layout if layout is not None if create 'graph' yield layout to graph layout elif create 'matrix' yield layout to matrix layout layout next rooted tree layout
def append domain opts if opts['id'] endswith opts['append domain'] return opts['id']if opts['id'] endswith ' ' return opts['id']return '{ 0 [id]} {0 [append domain]}' format opts
def is bare console if platform system ' Windows' try import ctypes Get Console Process List ctypes windll kernel 32 Get Console Process Listnum Get Console Process List ctypes byref ctypes c int 0 ctypes c int 1 if num 1 return Trueexcept Exception passreturn False
def is bare console if platform system ' Windows' try import ctypes Get Console Process List ctypes windll kernel 32 Get Console Process Listnum Get Console Process List ctypes byref ctypes c int 0 ctypes c int 1 if num 1 return Trueexcept Exception passreturn False
def bonferroni correction pvals return array pvals dtype float * len pvals
def bonferroni correction pvals return array pvals dtype float * len pvals
def get integration service events events {}for service in frappe get all u' Integration Service' filters {u'enabled' 1} fields [u'name'] controller get integration controller service name if hasattr controller u'scheduler events' for key handlers in controller scheduler events items events setdefault key [] extend handlers return events
def Get Available Report Plugins return sorted REGISTRY Get Registered Plugins itervalues key lambda cls cls name
def determine is pv session vdi ref disk image type os type LOG debug ' Lookingupvdi%sfor P Vkernel' vdi ref if disk image type Image Type DISK VHD if os type 'windows' is pv Falseelse is pv Trueelif disk image type Image Type DISK RAW with vdi attached here session vdi ref read only True as dev is pv is vdi pv dev elif disk image type Image Type DISK is pv Trueelif disk image type Image Type DISK ISO is pv Falseelif not disk image type LOG warning ' Imageformatis None tryingtodetermine P Vstatususingpygrub ifinstancewithvdi%sdoesnotbootcorrectly trywithimagemetadata ' % vdi ref with vdi attached here session vdi ref read only True as dev is pv is vdi pv dev else msg ' Unknownimageformat% disk image type s' % locals raise exception Nova Exception msg return is pv
def determine is pv session vdi ref disk image type os type LOG debug ' Lookingupvdi%sfor P Vkernel' vdi ref if disk image type Image Type DISK VHD if os type 'windows' is pv Falseelse is pv Trueelif disk image type Image Type DISK RAW with vdi attached here session vdi ref read only True as dev is pv is vdi pv dev elif disk image type Image Type DISK is pv Trueelif disk image type Image Type DISK ISO is pv Falseelif not disk image type LOG warning ' Imageformatis None tryingtodetermine P Vstatususingpygrub ifinstancewithvdi%sdoesnotbootcorrectly trywithimagemetadata ' % vdi ref with vdi attached here session vdi ref read only True as dev is pv is vdi pv dev else msg ' Unknownimageformat% disk image type s' % locals raise exception Nova Exception msg return is pv
def namespaced function function global dict defaults None preserve context False if defaults is None defaults function defaults if preserve context global dict function globals copy global dict update global dict global dict global dictnew namespaced function types Function Type function code global dict name function name argdefs defaults new namespaced function dict update function dict return new namespaced function
def with metaclass meta *bases class metaclass meta call type call init type init def new cls name this bases d if this bases is None return type new cls name d return meta name bases d return metaclass 'temporary class' None {}
def equate Spherical Dot Elevation point return Value radius abs point if radius < 0 0 returnazimuth Complex point drop Axis azimuth Radius abs azimuth Complex if azimuth Radius < 0 0 returnelevation Complex euclidean get Widdershins Unit Polar math radians return Value azimuth Complex * radius / azimuth Radius * elevation Complex real point x azimuth Complex realpoint y azimuth Complex imagpoint z elevation Complex imag * radius
@register simple tag takes context True def avatar urls context user size service id None service avatar services for user user service id if service is None logging error u' Couldnotgetasuitableavatarserviceforuser%s ' user urls {}else urls {resolution url for resolution url in six iteritems service get avatar urls request context[u'request'] user user size size }return mark safe json dumps urls
def write custom metric client project id now rfc 3339 color size count timeseries descriptor {'project' project id 'metric' CUSTOM METRIC NAME 'labels' {'{}/color' format CUSTOM METRIC DOMAIN color '{}/size' format CUSTOM METRIC DOMAIN size}}timeseries data {'timeseries Desc' timeseries descriptor 'point' {'start' now rfc 3339 'end' now rfc 3339 'int 64 Value' count}}request client timeseries write project project id body {'timeseries' [timeseries data]} try request execute except Exception as e print ' Failedtowritedatatocustommetric exception {}' format e raise
def translate jobconf dict jobconf hadoop version None translated jobconf jobconf copy translation warnings {}for variable value in jobconf items if hadoop version variants [translate jobconf variable hadoop version ]else variants translate jobconf for all versions variable for variant in variants if variant in jobconf continuetranslated jobconf[variant] valueif hadoop version translation warnings[variable] variantif translation warnings log warning ' Detectedhadoopconfigurationpropertynamesthatdonotmatchhadoopversion%s \n Thehavebeentranslatedasfollows\n%s' hadoop version '\n' join [ '%s %s' % variable variant for variable variant in sorted translation warnings items ] return translated jobconf
def translate jobconf dict jobconf hadoop version None translated jobconf jobconf copy translation warnings {}for variable value in jobconf items if hadoop version variants [translate jobconf variable hadoop version ]else variants translate jobconf for all versions variable for variant in variants if variant in jobconf continuetranslated jobconf[variant] valueif hadoop version translation warnings[variable] variantif translation warnings log warning ' Detectedhadoopconfigurationpropertynamesthatdonotmatchhadoopversion%s \n Thehavebeentranslatedasfollows\n%s' hadoop version '\n' join [ '%s %s' % variable variant for variable variant in sorted translation warnings items ] return translated jobconf
def translate jobconf dict jobconf hadoop version None translated jobconf jobconf copy translation warnings {}for variable value in jobconf items if hadoop version variants [translate jobconf variable hadoop version ]else variants translate jobconf for all versions variable for variant in variants if variant in jobconf continuetranslated jobconf[variant] valueif hadoop version translation warnings[variable] variantif translation warnings log warning ' Detectedhadoopconfigurationpropertynamesthatdonotmatchhadoopversion%s \n Thehavebeentranslatedasfollows\n%s' hadoop version '\n' join [ '%s %s' % variable variant for variable variant in sorted translation warnings items ] return translated jobconf
def cmp by asn local asn path 1 path 2 def get path source asn path asn Noneif path source is None asn local asnelse asn path source remote asreturn asnp 1 asn get path source asn path 1 p2 asn get path source asn path 2 if p1 asn local asn and p2 asn local asn return path 2 if p2 asn local asn and p1 asn local asn return path 1 return None
def model 2 dataframe model endog model exog model type OLS **kwargs model result model type model endog model exog **kwargs fit statistics pd Series {'r 2 ' model result rsquared 'adj r2 ' model result rsquared adj} result df pd Data Frame {'params' model result params 'pvals' model result pvalues 'std' model result bse 'statistics' statistics} fisher df pd Data Frame {'params' {' f test' model result fvalue} 'pvals' {' f test' model result f pvalue}} res series pd concat [result df fisher df] unstack return res series dropna
def main if len sys argv > 1 write Output '' join sys argv[ 1 ] else settings start Main Loop From Constructor get New Repository
def training mode application calls application calls from bricks import Batch Normalizationout []for app call in application calls assert isinstance app call application brick Batch Normalization assert app call application application Batch Normalization apply if app call metadata get 'training mode' False out append app call return out
def get Median alist tmp list alist tmp sort alen len tmp if alen % 2 1 return tmp[ alen // 2 ]else return tmp[ alen // 2 ] + tmp[ alen // 2 - 1 ] / 2
def determine toggles payload toggles for toggle definition in six iteritems toggles if definition['value'] is not None if definition['value'] is True or definition['value'] 'yes' and definition['type'] 'yes no' payload[toggle] 'yes'elif definition['value'] is False or definition['value'] 'no' and definition['type'] 'yes no' payload[toggle] 'no'if definition['value'] is True or definition['value'] 'yes' and definition['type'] 'true false' payload[toggle] Trueelif definition['value'] is False or definition['value'] 'no' and definition['type'] 'true false' payload[toggle] Falsereturn payload
def determine toggles payload toggles for toggle definition in six iteritems toggles if definition['value'] is not None if definition['value'] is True or definition['value'] 'yes' and definition['type'] 'yes no' payload[toggle] 'yes'elif definition['value'] is False or definition['value'] 'no' and definition['type'] 'yes no' payload[toggle] 'no'if definition['value'] is True or definition['value'] 'yes' and definition['type'] 'true false' payload[toggle] Trueelif definition['value'] is False or definition['value'] 'no' and definition['type'] 'true false' payload[toggle] Falsereturn payload
def determine toggles payload toggles for toggle definition in six iteritems toggles if definition['value'] is not None if definition['value'] is True or definition['value'] 'yes' and definition['type'] 'yes no' payload[toggle] 'yes'elif definition['value'] is False or definition['value'] 'no' and definition['type'] 'yes no' payload[toggle] 'no'if definition['value'] is True or definition['value'] 'yes' and definition['type'] 'true false' payload[toggle] Trueelif definition['value'] is False or definition['value'] 'no' and definition['type'] 'true false' payload[toggle] Falsereturn payload
def determine toggles payload toggles for toggle definition in six iteritems toggles if definition['value'] is not None if definition['value'] is True or definition['value'] 'yes' and definition['type'] 'yes no' payload[toggle] 'yes'elif definition['value'] is False or definition['value'] 'no' and definition['type'] 'yes no' payload[toggle] 'no'if definition['value'] is True or definition['value'] 'yes' and definition['type'] 'true false' payload[toggle] Trueelif definition['value'] is False or definition['value'] 'no' and definition['type'] 'true false' payload[toggle] Falsereturn payload
def wns prepare toast data **kwargs root ET Element 'toast' visual ET Sub Element root 'visual' binding ET Sub Element visual 'binding' binding attrib['template'] kwargs pop 'template' ' Toast Text 01 ' if 'text' in data for count item in enumerate data['text'] start 1 elem ET Sub Element binding 'text' elem text itemelem attrib['id'] str count if 'image' in data for count item in enumerate data['image'] start 1 elem ET Sub Element binding 'img' elem attrib['src'] itemelem attrib['id'] str count return ET tostring root
def restore ccx collection field value ccx id None if ccx id is None return field valueif isinstance field value list field value [restore ccx fv ccx id for fv in field value]elif isinstance field value dict for key val in field value iteritems field value[key] restore ccx val ccx id else field value restore ccx field value ccx id return field value
def get owner obj name security descriptor win 32 security Get File Security obj name win 32 security OWNER SECURITY INFORMATION owner sid security descriptor Get Security Descriptor Owner return get name win 32 security Convert Sid To String Sid owner sid
def get tenant network creds provider compute networks client shared network name caller test utils find test caller net creds creds provider get primary creds network getattr net creds 'network' None if not network or not network get 'name' if shared network name msg ' Novalidnetworkprovidedorcreated defaultingtofixed network name'if caller msg ' %s %s' % caller msg LOG debug msg try network get network from name shared network name compute networks client except exceptions Invalid Test Resource network {}msg ' Foundnetwork%savailablefortenant' % network if caller msg ' %s %s' % caller msg LOG info msg return network
def set peers *peers **options test options pop 'test' False commit options pop 'commit' True return salt ['net load template'] 'set ntp peers' peers peers test test commit commit
def transform key key seed rounds cipher AES new seed AES MODE ECB for n in range 0 rounds key cipher encrypt key return sha 256 key
def get bound method obj method name method getattr obj method name None if method is not None if six get method self method is None msg '{ 0 }mustbeaboundmethod' format method raise Attribute Error msg return method
def string from module module variable None default None val variable from module module variable variable default default if val if variable return valelse result [v for v in make iter val if isinstance v basestring ]return result if result else default return default
def virtual if grains get 'kernel' '' not in ' Linux' return False ' Thevbox guestexecutionmodulefailedtoload onlyavailableon Linuxsystems ' return virtualname
@pytest mark skipif u'not HAS SCIPY' def test scipy poisson limit assert allclose funcs scipy kraft burrows nousek 5 0 2 5 0 99 0 10 67 rtol 0 001 conf funcs poisson conf interval [5 0 6 0] u'kraft-burrows-nousek' background [2 5 2 0] conflevel [0 99 0 9] assert allclose conf[ 0] 0 10 67 rtol 0 001 assert allclose conf[ 1] 0 81 8 99 rtol 0 005
@pytest mark skipif u'not HAS SCIPY' def test scipy poisson limit assert allclose funcs scipy kraft burrows nousek 5 0 2 5 0 99 0 10 67 rtol 0 001 conf funcs poisson conf interval [5 0 6 0] u'kraft-burrows-nousek' background [2 5 2 0] conflevel [0 99 0 9] assert allclose conf[ 0] 0 10 67 rtol 0 001 assert allclose conf[ 1] 0 81 8 99 rtol 0 005
def test changing timer with messages shown qtbot view config stub config stub['ui']['message-timeout'] 900000 view show message usertypes Message Level info 'test' with qtbot wait Signal view clear timer timeout config stub set 'ui' 'message-timeout' 100
def get options ret None defaults {'color' 'yellow' 'notify' False 'api url' 'api hipchat com'}attrs {'hipchat profile' 'profile' 'room id' 'room id' 'from name' 'from name' 'api key' 'api key' 'api version' 'api version' 'color' 'color' 'notify' 'notify' 'api url' 'api url'}profile attr 'hipchat profile'profile attrs {'from jid' 'from jid' 'api key' 'api key' 'api version' 'api key' 'api url' 'api url'} options salt returners get returner options virtualname ret attrs profile attr profile attr profile attrs profile attrs salt salt opts opts defaults defaults return options
def previous current next items extend itertools chain [ None] items [ None] prev cur nex itertools tee extend 3 next cur next nex next nex return zip prev cur nex
def upload param dict timeout data param dict['format'] 'json'param dict['wait'] 'true'param dict['bucket'] 'audio summary'result util callm 'track/upload' param dict POST True socket timeout 300 data data return track from response result timeout
def botocore exception maybe if HAS BOTO 3 return botocore exceptions Client Errorreturn type None
def generate dropout mask mlp default include prob 0 5 input include probs None rng 2013 5 17 if input include probs is None input include probs {}if not hasattr rng 'uniform' rng np random Random State rng total units 0mask 0for layer in mlp layers if layer layer name in input include probs p input include probs[layer layer name]else p default include probfor in xrange layer get input space get total dimension mask int rng uniform < p << total units total units + 1return mask
def escape node node result []for i char in enumerate node if char u'\\' if u'' join node[i i + 3 ] in JID ESCAPE SEQUENCES result append u'\\ 5 c' continueresult append char for i char in enumerate result if char u'\\' result[i] JID ESCAPE TRANSFORMATIONS get char char escaped u'' join result if escaped startswith u'\\ 20 ' or escaped endswith u'\\ 20 ' raise Invalid JID u' Escapedlocalpartstartsorendswith"\\ 20 "' validate node escaped return escaped
def hash path account container None object None raw digest False if object and not container raise Value Error 'containerisrequiredifobjectisprovided' paths [account]if container paths append container if object paths append object if raw digest return md 5 HASH PATH PREFIX + '/' + '/' join paths + HASH PATH SUFFIX digest else return md 5 HASH PATH PREFIX + '/' + '/' join paths + HASH PATH SUFFIX hexdigest
@receiver m2 m changed sender Sale products through def sale update products sender instance action *args **kwargs if action u'post add' instance update products
@receiver m2 m changed sender Sale products through def sale update products sender instance action *args **kwargs if action u'post add' instance update products
@receiver m2 m changed sender Sale products through def sale update products sender instance action *args **kwargs if action u'post add' instance update products
def get status from instructor task instructor task status {}if instructor task is not None status['task id'] instructor task task idstatus['task state'] instructor task task statestatus['in progress'] instructor task task state not in READY STATES if instructor task task output is not None status['task progress'] json loads instructor task task output return status
def subdivide interval by hour start end start hour start replace minute 0 second 0 microsecond 0 end hour end replace minute 0 second 0 microsecond 0 if start hour end hour hour to secs {start hour to secs end - start }else hour to secs {}hour to secs[start hour] to secs start hour + timedelta hours 1 - start hour to secs[end hour] to secs end - end hour cur hour start hour + timedelta hours 1 while cur hour < end hour hour to secs[cur hour] to secs timedelta hours 1 cur hour + timedelta hours 1 hour to secs dict h secs for h secs in hour to secs items if secs return hour to secs
def attach cd session vm ref vdi ref userdevice vbd ref create vbd session vm ref None userdevice vbd type 'cd' read only True bootable True empty True unpluggable False session call xenapi 'VBD insert' vbd ref vdi ref return vbd ref
def gametime to realtime secs 0 mins 0 hrs 0 days 0 weeks 0 months 0 yrs 0 format False realtime secs + mins * MIN + hrs * HOUR + days * DAY + weeks * WEEK + months * MONTH + yrs * YEAR / TIMEFACTOR if format return format realtime 31536000 2628000 604800 86400 3600 60 return realtime
def gametime to realtime secs 0 mins 0 hrs 0 days 0 weeks 0 months 0 yrs 0 format False realtime secs + mins * MIN + hrs * HOUR + days * DAY + weeks * WEEK + months * MONTH + yrs * YEAR / TIMEFACTOR if format return format realtime 31536000 2628000 604800 86400 3600 60 return realtime
def write info fname info data type None reset range True fid start file fname start block fid FIFF FIFFB MEAS write meas info fid info data type reset range end block fid FIFF FIFFB MEAS end file fid
def write info fname info data type None reset range True fid start file fname start block fid FIFF FIFFB MEAS write meas info fid info data type reset range end block fid FIFF FIFFB MEAS end file fid
def pop context local stack pop
def get Path Copy path path Copy []for point in path path Copy append point copy return path Copy
def present profile 'pagerduty' subdomain None api key None **kwargs kwargs['service']['name'] kwargs['name']escalation policy id kwargs['service']['escalation policy id']escalation policy salt ['pagerduty util get resource'] 'escalation policies' escalation policy id ['name' 'id'] profile profile subdomain subdomain api key api key if escalation policy kwargs['service']['escalation policy id'] escalation policy['id']r salt ['pagerduty util resource present'] 'services' ['name' 'id'] diff profile subdomain api key **kwargs return r
def setup platform hass config add devices discovery info None lights []for address device config in config[CONF DEVICES] items device {}device['name'] device config[CONF NAME]device['address'] addresslight Zengge Light device if light is valid lights append light add devices lights
def binary is text data if not isinstance data bytes raise Type Error "datamustbebytes got'%s'" % type data name return all c not in BINARYCHARS for c in data
def binary is text data if not isinstance data bytes raise Type Error "datamustbebytes got'%s'" % type data name return all c not in BINARYCHARS for c in data
def binary is text data if not isinstance data bytes raise Type Error "datamustbebytes got'%s'" % type data name return all c not in BINARYCHARS for c in data
def parse description factory default 'tcp' return endpoints parse Server description factory default
def spline filter Iin lmbda 5 0 intype Iin dtype charhcol array [1 0 4 0 1 0] 'f' / 6 0 if intype in ['F' 'D'] Iin Iin astype 'F' ckr cspline 2 d Iin real lmbda cki cspline 2 d Iin imag lmbda outr sepfir 2 d ckr hcol hcol outi sepfir 2 d cki hcol hcol out outr + 1j * outi astype intype elif intype in ['f' 'd'] ckr cspline 2 d Iin lmbda out sepfir 2 d ckr hcol hcol out out astype intype else raise Type Error ' Invaliddatatypefor Iin' return out
def Alternating Group n if n in 1 2 return Permutation Group [ Permutation [0 ] ] a list range n a[ 0 ] a[ 1 ] a[ 2 ] a[ 1 ] a[ 2 ] a[ 0 ] gen 1 aif n % 2 a list range 1 n a append 0 gen 2 aelse a list range 2 n a append 1 a insert 0 0 gen 2 agens [gen 1 gen 2 ]if gen 1 gen 2 gens gens[ 1]G Permutation Group [ af new a for a in gens] dups False if n < 4 G is abelian True G is nilpotent Trueelse G is abelian False G is nilpotent Falseif n < 5 G is solvable Trueelse G is solvable False G degree nG is transitive True G is alt Truereturn G
def get global aliases return {u'shop' [u'store' u'store id' u' store'] u'default price value' [u'price' u'original price' u'originalprice' u'default price'] u'first name' [u'firstname'] u'last name' [u'lastname'] u'street' [u'street address' u'address street' u'addr street' u'address[street]'] u'country' [u'country id'] u'slug' [u'url key' u'url'] u'phone' [u'telephone'] u'postal code' [u'postcode' u'postalcode' u'address postcode' u'address postalcode' u'address postal code' u'address[postcode]' u'address[postalcode]' u'address[postal code]']}
def enforce required arguments module missing args []for arg in 'min size' 'max size' 'launch config name' if module params[arg] is None missing args append arg if missing args module fail json msg ' Missingrequiredargumentsforautoscalinggroupcreate/update %s' % ' ' join missing args
def grid out property field name docstring def getter self self ensure file if field name 'length' return self file get field name 0 return self file get field name None docstring + '\n\n Thisattributeisread-only 'return property getter doc docstring
def discard draft exp id user id exp user data user models Exploration User Data Model get user id exp id if exp user data exp user data draft change list Noneexp user data draft change list last updated Noneexp user data draft change list exp version Noneexp user data put
def walk children level 0 path None usename True if level 0 path {}if not children yield path copy return head tail children[ 0 ] children[ 1 ] name func headfor child in func if usename path[name] childelse path[level] childfor child paths in walk tail level + 1 path usename yield child paths
def walk children level 0 path None usename True if level 0 path {}if not children yield path copy return head tail children[ 0 ] children[ 1 ] name func headfor child in func if usename path[name] childelse path[level] childfor child paths in walk tail level + 1 path usename yield child paths
def source tmux files pl args tmux version None source tmux file source tmux file tmux version tmux version or get tmux version pl source tmux file os path join TMUX CONFIG DIRECTORY u'powerline-base conf' for fname priority in sorted get tmux configs tmux version key lambda v v[ 1 ] source tmux file fname if not os environ get u'POWERLINE COMMAND' cmd deduce command if cmd set tmux environment u'POWERLINE COMMAND' deduce command remove False try run tmux command u'refresh-client' except subprocess Called Process Error pass
def prompt msg title None text u'' if title is None title msgresult Qt Widgets Q Input Dialog get Text active window msg title Qt Widgets Q Line Edit Normal text return result[ 0 ] result[ 1 ]
def synchronize iterables iterables out list []iterable items [ field iter fvals for field fvals in sorted iterables items ]while True cur dict {}for field iter values in iterable items try cur dict[field] next iter values except Stop Iteration passif cur dict out list append cur dict else breakreturn out list
def synchronize iterables iterables out list []iterable items [ field iter fvals for field fvals in sorted iterables items ]while True cur dict {}for field iter values in iterable items try cur dict[field] next iter values except Stop Iteration passif cur dict out list append cur dict else breakreturn out list
def Sub Plot plot number rows None cols None rows rows or SUBPLOT ROWS cols cols or SUBPLOT COLS pyplot subplot rows cols plot number
def Sub Plot plot number rows None cols None rows rows or SUBPLOT ROWS cols cols or SUBPLOT COLS pyplot subplot rows cols plot number
def get client func @functools wraps func def wrapper context *args **kwargs client api get registry client context return func client *args **kwargs return wrapper
def DFS loop digr node explored set [] finishing times []for node in digr nodes if node not in node explored leader node nodeinner DFS digr node node explored finishing times return finishing times
def DFS loop digr node explored set [] finishing times []for node in digr nodes if node not in node explored leader node nodeinner DFS digr node node explored finishing times return finishing times
def wildcards 2 patterns wildcards return [re compile '^' + wc replace ' ' '\\ ' replace '*' ' *' + '$' for wc in wildcards]
def read user choice var name options if not isinstance options list raise Type Errorif not options raise Value Errorchoice map Ordered Dict u'{}' format i value for i value in enumerate options 1 choices choice map keys default u' 1 'choice lines [u'{}-{}' format *c for c in choice map items ]prompt u'\n' join u' Select{} ' format var name u'\n' join choice lines u' Choosefrom{}' format u' ' join choices user choice click prompt prompt type click Choice choices default default return choice map[user choice]
def get full file list file path glob file list []for file name in glob glob file path glob full file path os path abspath file name file list append full file path return file list
def get num hosts multiple labels exclude only if needed labels False exclude atomic group hosts False valid only True **filter data hosts rpc utils get host query multiple labels exclude only if needed labels exclude atomic group hosts valid only filter data return hosts count
def display page request virtual path page Nonefor page model in Abstract Page subclasses try page page model objects live request user get virtual path virtual path except Object Does Not Exist passif page is None raise Http 404 if page url return redirect page url template name 'staticpages/page display html'if request is ajax template name 'staticpages/ body html'ctx {'page' page}return render request template name ctx
def display page request virtual path page Nonefor page model in Abstract Page subclasses try page page model objects live request user get virtual path virtual path except Object Does Not Exist passif page is None raise Http 404 if page url return redirect page url template name 'staticpages/page display html'if request is ajax template name 'staticpages/ body html'ctx {'page' page}return render request template name ctx
def l1 l2 regularizer weight l1 1 0 weight l2 1 0 scope None def regularizer tensor with tf name scope scope 'L 1 L 2 Regularizer' [tensor] weight l1 t tf convert to tensor weight l1 dtype tensor dtype base dtype name 'weight l1 ' weight l2 t tf convert to tensor weight l2 dtype tensor dtype base dtype name 'weight l2 ' reg l1 tf multiply weight l1 t tf reduce sum tf abs tensor name 'value l1 ' reg l2 tf multiply weight l2 t tf nn l2 loss tensor name 'value l2 ' return tf add reg l1 reg l2 name 'value' return regularizer
def pysiphash uint 64 assert 0 < uint 64 < 1 << 64 if uint 64 > 1 << 63 - 1 int 64 uint 64 - 1 << 64 else int 64 uint 64 uint 32 uint 64 ^ uint 64 >> 32 & 4294967295 if uint 32 > 1 << 31 - 1 int 32 uint 32 - 1 << 32 else int 32 uint 32 return int 32 int 64
def pysiphash uint 64 assert 0 < uint 64 < 1 << 64 if uint 64 > 1 << 63 - 1 int 64 uint 64 - 1 << 64 else int 64 uint 64 uint 32 uint 64 ^ uint 64 >> 32 & 4294967295 if uint 32 > 1 << 31 - 1 int 32 uint 32 - 1 << 32 else int 32 uint 32 return int 32 int 64
def create snapshot volume id size 1 metadata None ctxt None **kwargs metadata metadata or {} snap objects Snapshot ctxt or context get admin context snap volume size sizesnap user id fake USER I Dsnap project id fake PROJECT I Dsnap volume id volume idsnap status 'creating'if metadata is not None snap metadata metadatasnap update kwargs snap create return snap
def Object Specification direct cls return Provides cls direct
def Object Specification direct cls return Provides cls direct
def effective n jobs n jobs -1 backend get active backend return backend effective n jobs n jobs n jobs
def effective n jobs n jobs -1 backend get active backend return backend effective n jobs n jobs n jobs
def test arg of sigmoid bad X T matrix Y T nnet softmax X try Z arg of sigmoid Y except Type Error returnassert False
def test arg of sigmoid bad X T matrix Y T nnet softmax X try Z arg of sigmoid Y except Type Error returnassert False
def get Loop Layer Append loop Layers z settings print Progress len loop Layers 'slice' loop Layer euclidean Loop Layer z loop Layers append loop Layer return loop Layer
def get Loop Layer Append loop Layers z settings print Progress len loop Layers 'slice' loop Layer euclidean Loop Layer z loop Layers append loop Layer return loop Layer
def generate noise info cov iir filter random state n samples zi None from scipy signal import lfilternoise cov pick channels cov cov include info['ch names'] exclude [] if set info['ch names'] set noise cov ch names raise Value Error ' Evokedandcovariancechannelnamesarenotidentical Cannotgeneratethenoisematrix Channelsmissingincovariance%s ' % np setdiff 1 d info['ch names'] noise cov ch names rng check random state random state c np diag noise cov data if noise cov['diag'] else noise cov data mu channels np zeros len c with warnings catch warnings record True noise rng multivariate normal mu channels c n samples Tif iir filter is not None if zi is None zi np zeros len c len iir filter - 1 noise zf lfilter [1 ] iir filter noise axis -1 zi zi else zf Nonereturn noise zf
def build nodegraph args descr None epilog None parser None citations None parser build graph args descr descr epilog epilog parser parser citations citations return parser
def CAN CHANGE PERMISSIONS article user return is staff for article article user
def CAN CHANGE PERMISSIONS article user return is staff for article article user
def Get Module For Typelib typelib CLSID lcid major minor mod Name Get Generated File Name typelib CLSID lcid major minor mod Get Module mod Name if ' in gencache ' not in mod dict Add Module To Cache typelib CLSID lcid major minor assert ' in gencache ' in mod dict return mod
def Filter Fixture fixture None regex ' ' result []regex re compile regex if fixture is None fixture client fixture VF Sfor path attributes in fixture if regex match path result append path attributes return result
def psql cmd *args **kwargs user host port maintenance db password connection defaults kwargs get 'user' kwargs get 'host' kwargs get 'port' kwargs get 'maintenance db' kwargs get 'password' PSQL BIN find pg binary 'psql' cmd [ PSQL BIN '--no-align' '--no-readline' '--no-psqlrc' '--no-password']if user cmd + ['--username' user]if host cmd + ['--host' host]if port cmd + ['--port' str port ]if not maintenance db maintenance db 'postgres'cmd extend ['--dbname' maintenance db] cmd extend args return cmd
def console pool get by host type context compute host proxy host console type return IMPL console pool get by host type context compute host proxy host console type
def add local bypass table chain ipv 6 run iptables cmd '-t%s-A%s-ptcp-msocket-j RETURN' % table chain ipv 6 ipv 6 v4 addrs v6 addrs get interface addresses for addr in v4 addrs run iptables cmd '-t%s-A%s-ptcp-d%s-j RETURN' % table chain addr ipv 6 False for addr in v6 addrs run iptables cmd '-t%s-A%s-ptcp-d%s-j RETURN' % table chain addr ipv 4 False ipv 6 ipv 6
@pytest fixturedef quickmark manager stub stubs stub stubs Quickmark Manager Stub objreg register 'quickmark-manager' stub yield stub objreg delete 'quickmark-manager'
def get rabbitmq plugin rabbitmq context get 'rabbitmq-plugins' if rabbitmq is None version salt ['pkg version'] 'rabbitmq-server' split '-' [0 ]rabbitmq '/usr/lib/rabbitmq/lib/rabbitmq server-{ 0 }/sbin/rabbitmq-plugins' format version context ['rabbitmq-plugins'] rabbitmqreturn rabbitmq
def get rabbitmq plugin rabbitmq context get 'rabbitmq-plugins' if rabbitmq is None version salt ['pkg version'] 'rabbitmq-server' split '-' [0 ]rabbitmq '/usr/lib/rabbitmq/lib/rabbitmq server-{ 0 }/sbin/rabbitmq-plugins' format version context ['rabbitmq-plugins'] rabbitmqreturn rabbitmq
def get rabbitmq plugin rabbitmq context get 'rabbitmq-plugins' if rabbitmq is None version salt ['pkg version'] 'rabbitmq-server' split '-' [0 ]rabbitmq '/usr/lib/rabbitmq/lib/rabbitmq server-{ 0 }/sbin/rabbitmq-plugins' format version context ['rabbitmq-plugins'] rabbitmqreturn rabbitmq
def get rabbitmq plugin rabbitmq context get 'rabbitmq-plugins' if rabbitmq is None version salt ['pkg version'] 'rabbitmq-server' split '-' [0 ]rabbitmq '/usr/lib/rabbitmq/lib/rabbitmq server-{ 0 }/sbin/rabbitmq-plugins' format version context ['rabbitmq-plugins'] rabbitmqreturn rabbitmq
def info dev if 'sys' in dev qtype 'path'else qtype 'name'cmd 'udevadminfo--export--query all--{ 0 } {1 }' format qtype dev udev result salt ['cmd run all'] cmd output loglevel 'quiet' if udev result['retcode'] 0 raise Command Execution Error udev result['stderr'] return parse udevadm info udev result['stdout'] [0 ]
def preload module *modules for m in modules s 'import%sasx x ' % m Script s 1 len s None completions
def preload module *modules for m in modules s 'import%sasx x ' % m Script s 1 len s None completions
def preload module *modules for m in modules s 'import%sasx x ' % m Script s 1 len s None completions
def converge service strategy Convergence Strategy changed plan service convergence plan strategy return service execute convergence plan plan timeout 1
def converge service strategy Convergence Strategy changed plan service convergence plan strategy return service execute convergence plan plan timeout 1
def setting list request if not test user authenticated request return login request next '/cobbler web/setting/list' expired True settings remote get settings skeys settings keys skeys sort results []for k in skeys results append [k settings[k]] t get template 'settings tmpl' html t render Request Context request {'settings' results 'version' remote extended version request session['token'] ['version'] 'username' username} return Http Response html
def get keystone session **config return Session auth openstack auth from config **config verify openstack verify from config **config
def splint a b tck full output 0 if isinstance tck B Spline if tck c ndim > 1 mesg ' Callingsplint with B Splineobjectswithc ndim> 1 isnotrecommended Use B Spline integrate instead 'warnings warn mesg Deprecation Warning if full output 0 mesg 'full output %sisnotsupported Proceedingasiffull output 0' % full output return tck integrate a b extrapolate False else return impl splint a b tck full output
@cache returndef may be null is nullable repo GI Repository repo require 'G Lib' '2 0' 0 info repo find by name 'G Lib' 'spawn sync' return not info get arg 8 may be null
def apply momentum updates params None momentum 0 9 if params is None params updates keys updates Ordered Dict updates for param in params value param get value borrow True velocity theano shared np zeros value shape dtype value dtype broadcastable param broadcastable x momentum * velocity + updates[param] updates[velocity] x - param updates[param] xreturn updates
def notification handler fn notification handlers add fn return fn
def mod watch name **kwargs if kwargs['sfun'] in 'wait' 'run' 'watch' if kwargs get 'stateful' kwargs pop 'stateful' return reinterpreted state run name **kwargs return run name **kwargs elif kwargs['sfun'] 'wait script' or kwargs['sfun'] 'script' if kwargs get 'stateful' kwargs pop 'stateful' return reinterpreted state script name **kwargs return script name **kwargs elif kwargs['sfun'] 'wait call' or kwargs['sfun'] 'call' if kwargs get 'func' func kwargs pop 'func' return call name func **kwargs else return {'name' name 'changes' {} 'comment' 'cmd {0 [sfun]}needsanamedparameterfunc' format kwargs 'result' False}return {'name' name 'changes' {} 'comment' 'cmd {0 [sfun]}doesnotworkwiththewatchrequisite pleaseusecmd waitorcmd wait script' format kwargs 'result' False}
def create virtualenv root run command ['virtualenv' '--python /usr/bin/python 2 7' '--quiet' root path] added env dict PYTHONDONTWRITEBYTECODE '1 ' for module name in virtualenv REQUIRED MODULES py base root descendant ['lib' 'python 2 7' module name] py py base sibling Extension ' py' if py exists and py islink pyc py base sibling Extension ' pyc' py target py realpath pyc target File Path py target splitext [0 ] sibling Extension ' pyc' if pyc exists pyc remove if pyc target exists pyc target link To pyc return Virtual Env root root
def get pull request files project num auth False url 'https //api github com/repos/{project}/pulls/{num}/files' format project project num num if auth header make auth header else header Nonereturn get paged request url headers header
def data path paths environ None return zipline path ['data'] + list paths environ environ
def make auth cookie app global conf cookie name 'PASTE AUTH COOKIE' scanlist 'REMOTE USER' 'REMOTE SESSION' secret None timeout 30 maxlen 4096 if isinstance scanlist six string types scanlist scanlist split if secret is None and global conf get 'secret' secret global conf['secret']try timeout int timeout except Value Error raise Value Error ' Badvaluefortimeout mustbeint %r' % timeout try maxlen int maxlen except Value Error raise Value Error ' Badvalueformaxlen mustbeint %r' % maxlen return Auth Cookie Handler app cookie name cookie name scanlist scanlist secret secret timeout timeout maxlen maxlen
def get credential sets global credential set 2 global credential set 1 if credential set 1 is None credential set 1 Credential Set create credential set 2 Credential Set create return credential set 1 credential set 2
def Open Document Spreadsheet doc Open Document 'application/vnd oasis opendocument spreadsheet' doc spreadsheet Spreadsheet doc body add Element doc spreadsheet return doc
def convert from bcd bcd place decimal 1 0 while bcd > 0 nibble bcd & 15 decimal + nibble * place bcd >> 4place * 10 return decimal
def convert from bcd bcd place decimal 1 0 while bcd > 0 nibble bcd & 15 decimal + nibble * place bcd >> 4place * 10 return decimal
def convert range to list tgt range server r seco range Range range server try return r expand tgt except seco range Range Exception as err log error ' Rangeserverexception {0 }' format err return []
def extract link from link header http response header name header value re match LINK HEADER RE search header value if re match try url str re match group 1 except Index Error raise Stop Iterationif not url str raise Stop Iterationtry yield http response get url url join url str except Value Error msg ' Theapplicationsenta"%s"headerthatw 3 affailedtocorrectlyparseasan URL theheadervaluewas "%s"'om out debug msg % header name header value
def kmap registry xml parent data kmap XML Sub Element xml parent 'org jenkinsci plugins Kmap Jenkins Builder' kmap set 'plugin' 'kmap-jenkins' publish data get 'publish-optional' False mapping [ 'username' 'username' None 'password' 'password' None 'url' 'kmap Client' None 'categories' 'categories' None 'file-path' 'file Path' None 'app-name' 'app Name' None 'bundle' 'bundle' '' 'version' 'version' None 'description' 'description' '' 'icon-path' 'icon Path' '' ]convert mapping to xml kmap data mapping fail required True if publish is True publish optional XML Sub Element kmap 'publish Optional' publish mapping [ 'groups' 'teams' '' 'users' 'users' '' 'notify-users' 'send Notifications' False ]convert mapping to xml publish optional data publish mapping fail required True
def kmap registry xml parent data kmap XML Sub Element xml parent 'org jenkinsci plugins Kmap Jenkins Builder' kmap set 'plugin' 'kmap-jenkins' publish data get 'publish-optional' False mapping [ 'username' 'username' None 'password' 'password' None 'url' 'kmap Client' None 'categories' 'categories' None 'file-path' 'file Path' None 'app-name' 'app Name' None 'bundle' 'bundle' '' 'version' 'version' None 'description' 'description' '' 'icon-path' 'icon Path' '' ]convert mapping to xml kmap data mapping fail required True if publish is True publish optional XML Sub Element kmap 'publish Optional' publish mapping [ 'groups' 'teams' '' 'users' 'users' '' 'notify-users' 'send Notifications' False ]convert mapping to xml publish optional data publish mapping fail required True
def decode txt nid Name ID for part in txt split ' ' if part find ' ' -1 i val part split ' ' try setattr nid ATTR[int i ] unquote val except passreturn nid
def decode txt nid Name ID for part in txt split ' ' if part find ' ' -1 i val part split ' ' try setattr nid ATTR[int i ] unquote val except passreturn nid
@register inclusion tag u'generic/includes/disqus sso html' takes context True def disqus sso script context settings context[u'settings']public key getattr settings u'COMMENTS DISQUS API PUBLIC KEY' u'' secret key getattr settings u'COMMENTS DISQUS API SECRET KEY' u'' user context[u'request'] userif public key and secret key and user is authenticated context[u'public key'] public keycontext[u'sso data'] get disqus sso user public key secret key return context
@register inclusion tag u'generic/includes/disqus sso html' takes context True def disqus sso script context settings context[u'settings']public key getattr settings u'COMMENTS DISQUS API PUBLIC KEY' u'' secret key getattr settings u'COMMENTS DISQUS API SECRET KEY' u'' user context[u'request'] userif public key and secret key and user is authenticated context[u'public key'] public keycontext[u'sso data'] get disqus sso user public key secret key return context
@register inclusion tag u'generic/includes/disqus sso html' takes context True def disqus sso script context settings context[u'settings']public key getattr settings u'COMMENTS DISQUS API PUBLIC KEY' u'' secret key getattr settings u'COMMENTS DISQUS API SECRET KEY' u'' user context[u'request'] userif public key and secret key and user is authenticated context[u'public key'] public keycontext[u'sso data'] get disqus sso user public key secret key return context
def extract param list params prefix '' key re re compile '%s\\ member\\ [0 - 9 ]+ \\ * ' % prefix def get param data params for param name value in params items match key re match param name if match try index int match group 1 except Value Error passelse key match group 2 yield index key value def key func d return d[ 0 ]data sorted get param data params key key func members itertools groupby data key func return [dict kv for di kv in m for mi m in members]
def get attr data attribute None if not attribute raise errors Ansible Filter Error ' failedexpectsattributetobeset' ptr datafor attr in attribute split ' ' if attr in ptr ptr ptr[attr]else ptr Nonebreakreturn ptr
def test lex mangling hyphen entry tokenize 'foo-bar' assert entry [ Hy Symbol 'foo bar' ] entry tokenize '-' assert entry [ Hy Symbol '-' ]
def test lex mangling hyphen entry tokenize 'foo-bar' assert entry [ Hy Symbol 'foo bar' ] entry tokenize '-' assert entry [ Hy Symbol '-' ]
def stub out glanceclient create stubs sent to glance orig add image glanceclient v1 images Image Manager createdef fake create context metadata data None sent to glance['metadata'] metadatasent to glance['data'] datareturn orig add image metadata data stubs Set glanceclient v1 images Image Manager 'create' fake create
def stub out glanceclient create stubs sent to glance orig add image glanceclient v1 images Image Manager createdef fake create context metadata data None sent to glance['metadata'] metadatasent to glance['data'] datareturn orig add image metadata data stubs Set glanceclient v1 images Image Manager 'create' fake create
def populate filter properties filter properties host state if isinstance host state dict host host state['host']nodename host state['nodename']limits host state['limits']else host host state hostnodename host state nodenamelimits host state limits add retry host filter properties host nodename if not filter properties get 'force hosts' filter properties['limits'] limits
def populate filter properties filter properties host state if isinstance host state dict host host state['host']nodename host state['nodename']limits host state['limits']else host host state hostnodename host state nodenamelimits host state limits add retry host filter properties host nodename if not filter properties get 'force hosts' filter properties['limits'] limits
def check conversion condition message if not condition raise Invalid Conversion Error message
def generate failed chall msg failed achalls error failed achalls[ 0 ] errortyp error typif messages is acme error error typ error codemsg [' Thefollowingerrorswerereportedbytheserver ']for achall in failed achalls msg append '\n\n Domain %s\n Type %s\n Detail %s' % achall domain typ achall error detail if typ in ERROR HELP msg append '\n\n' msg append ERROR HELP[typ] return '' join msg
def get region service region profile region get profile service region None None profile return region
@register inclusion tag 'downloads/templatetags/os release files html' def os release files release os slug return {'release' release 'files' release files for os os slug }
@pytest fixture scope u'session' def celery worker parameters return {}
def pack unit value pack np zeros value shape + 4 dtype np ubyte for i in range 4 value pack[ i] np modf value * 256 0 return pack
def write cron lines user lines path salt utils files mkstemp if check instance uid match user or grains get 'os family' in ' Solaris' 'AIX' with salt utils fpopen path 'w+' uid salt ['file user to uid'] user mode 384 as fp fp writelines lines ret salt ['cmd run all'] get cron cmdstr path runas user python shell False else with salt utils fpopen path 'w+' mode 384 as fp fp writelines lines ret salt ['cmd run all'] get cron cmdstr path user python shell False os remove path return ret
def test mixed newstyle oldstyle init class foo def init self self x 3class bar foo def init self self x 4class baz foo passclass ns object passclass full bar baz ns passa full Are Equal a x 4 class full bar baz ns def init self self x 5a full Are Equal a x 5 class ns object def init self self x 6class full bar baz ns passa full Are Equal a x 4
def running return salt utils minion running opts
def process bezout output poly seq x L poly seq[ ]d degree L[ 1 ] x i 2while i < len L d i degree L[i] x if d i < 0 L remove L[i] i i - 1 if d d i L remove L[i] i i - 1 if d i > 0 d d ii i + 1 return L
def strip Formatting text formatted parse Formatted Text text return textattributes flatten formatted textattributes Default Formatting State
def pytest addoption parser parser addoption '--all' action 'store true' help 'runalltests' parser addoption '--device id' type int default 0 help 'GP Udevicetouse' return
def pytest addoption parser parser addoption '--all' action 'store true' help 'runalltests' parser addoption '--device id' type int default 0 help 'GP Udevicetouse' return
def pytest addoption parser parser addoption '--all' action 'store true' help 'runalltests' parser addoption '--device id' type int default 0 help 'GP Udevicetouse' return
def load key bindings get search state None enable abort and exit bindings False enable system bindings False enable search False enable open in editor False enable extra page navigation False enable auto suggest bindings False assert get search state is None or callable get search state enable abort and exit bindings to cli filter enable abort and exit bindings enable system bindings to cli filter enable system bindings enable search to cli filter enable search enable open in editor to cli filter enable open in editor enable extra page navigation to cli filter enable extra page navigation enable auto suggest bindings to cli filter enable auto suggest bindings registry Merged Registry [load basic bindings load mouse bindings Conditional Registry load abort and exit bindings enable abort and exit bindings Conditional Registry load basic system bindings enable system bindings load emacs bindings Conditional Registry load emacs open in editor bindings enable open in editor Conditional Registry load emacs search bindings get search state get search state enable search Conditional Registry load emacs system bindings enable system bindings Conditional Registry load extra emacs page navigation bindings enable extra page navigation load vi bindings get search state get search state Conditional Registry load vi open in editor bindings enable open in editor Conditional Registry load vi search bindings get search state get search state enable search Conditional Registry load vi system bindings enable system bindings Conditional Registry load extra vi page navigation bindings enable extra page navigation Conditional Registry load auto suggestion bindings enable auto suggest bindings ] return registry
def load key bindings get search state None enable abort and exit bindings False enable system bindings False enable search False enable open in editor False enable extra page navigation False enable auto suggest bindings False assert get search state is None or callable get search state enable abort and exit bindings to cli filter enable abort and exit bindings enable system bindings to cli filter enable system bindings enable search to cli filter enable search enable open in editor to cli filter enable open in editor enable extra page navigation to cli filter enable extra page navigation enable auto suggest bindings to cli filter enable auto suggest bindings registry Merged Registry [load basic bindings load mouse bindings Conditional Registry load abort and exit bindings enable abort and exit bindings Conditional Registry load basic system bindings enable system bindings load emacs bindings Conditional Registry load emacs open in editor bindings enable open in editor Conditional Registry load emacs search bindings get search state get search state enable search Conditional Registry load emacs system bindings enable system bindings Conditional Registry load extra emacs page navigation bindings enable extra page navigation load vi bindings get search state get search state Conditional Registry load vi open in editor bindings enable open in editor Conditional Registry load vi search bindings get search state get search state enable search Conditional Registry load vi system bindings enable system bindings Conditional Registry load extra vi page navigation bindings enable extra page navigation Conditional Registry load auto suggestion bindings enable auto suggest bindings ] return registry
def load key bindings get search state None enable abort and exit bindings False enable system bindings False enable search False enable open in editor False enable extra page navigation False enable auto suggest bindings False assert get search state is None or callable get search state enable abort and exit bindings to cli filter enable abort and exit bindings enable system bindings to cli filter enable system bindings enable search to cli filter enable search enable open in editor to cli filter enable open in editor enable extra page navigation to cli filter enable extra page navigation enable auto suggest bindings to cli filter enable auto suggest bindings registry Merged Registry [load basic bindings load mouse bindings Conditional Registry load abort and exit bindings enable abort and exit bindings Conditional Registry load basic system bindings enable system bindings load emacs bindings Conditional Registry load emacs open in editor bindings enable open in editor Conditional Registry load emacs search bindings get search state get search state enable search Conditional Registry load emacs system bindings enable system bindings Conditional Registry load extra emacs page navigation bindings enable extra page navigation load vi bindings get search state get search state Conditional Registry load vi open in editor bindings enable open in editor Conditional Registry load vi search bindings get search state get search state enable search Conditional Registry load vi system bindings enable system bindings Conditional Registry load extra vi page navigation bindings enable extra page navigation Conditional Registry load auto suggestion bindings enable auto suggest bindings ] return registry
def find tex file filename format None cmd [str u'kpsewhich' ]if format is not None cmd + [ u'--format ' + format ]cmd + [filename]matplotlib verbose report u'find tex file %s %s' % filename cmd u'debug' pipe subprocess Popen cmd stdout subprocess PIPE stderr subprocess PIPE result pipe communicate [0 ] rstrip matplotlib verbose report u'find tex fileresult %s' % result u'debug' return result decode u'ascii'
def inject create tags event name class attributes **kwargs class attributes['create tags'] create tags
def inject create tags event name class attributes **kwargs class attributes['create tags'] create tags
def inject create tags event name class attributes **kwargs class attributes['create tags'] create tags
def inject create tags event name class attributes **kwargs class attributes['create tags'] create tags
def inject create tags event name class attributes **kwargs class attributes['create tags'] create tags
def inject create tags event name class attributes **kwargs class attributes['create tags'] create tags
def dispatch by operation entity type entity operation try index index for entity type if operation model domain object Domain Object Operation new index insert dict entity elif operation model domain object Domain Object Operation changed index update dict entity elif operation model domain object Domain Object Operation deleted index remove dict entity else log warn ' Unknownoperation %s' % operation except Exception as ex log exception ex raise
def virtual if HAS DEPS return Truereturn False
def insert header network str incomings outgoings line 1 deque [] if incomings line 1 append ' In-->' line 1 append ' Layer' if outgoings line 1 append '--> Out' line 1 append ' Description' line 2 deque [] if incomings line 2 append '-------' line 2 append '-----' if outgoings line 2 append '-------' line 2 append '-----------' network str appendleft line 2 network str appendleft line 1 return network str
def save session l filename with open filename 'w' as fd fd write dumps l -1
def survey get Priority Question For Series series id template rec survey get Template From Series series id if template rec None priority question code template rec['priority qstn']question survey get Question From Code priority question code series id return questionelse return None
def label all rag attr name node rag nodes [0 ]new label rag node[node]['labels'][ 0 ]for n d in rag nodes iter data True d[attr name] new label
def label all rag attr name node rag nodes [0 ]new label rag node[node]['labels'][ 0 ]for n d in rag nodes iter data True d[attr name] new label
def get server id if salt utils is proxy return {}return {'server id' abs hash opts get 'id' '' % 2 ** 31 }
def gid From String gid String try return int gid String except Value Error if grp is None raisereturn grp getgrnam gid String [2 ]
def custom model *args **kwargs fit deriv kwargs get u'fit deriv' None if len args 1 and six callable args[ 0 ] return custom model wrapper args[ 0 ] fit deriv fit deriv elif not args return functools partial custom model wrapper fit deriv fit deriv else raise Type Error u'{ 0 }takesatmostonepositionalargument thecallable/functiontobeturnedintoamodel Whenusedasadecoratoritshouldbepassedkeywordargumentsonly ifany ' format name
def audio Time Callback event movie Instance Ref stream Player if movie Instance Ref tm - event u new time / 1000 0 movie Instance Ref audio stream clock reset tm
def audio Time Callback event movie Instance Ref stream Player if movie Instance Ref tm - event u new time / 1000 0 movie Instance Ref audio stream clock reset tm
def nti distmat marginals group iters group marginals [marginals index i for i in group]mn y obs mntd reduce mtx distmat group marginals mn y n sd y n random mntd distmat len group marginals iters if abs sd y n < 1e- 05 raise Value Error ' Thestandarddeviationofthemeansoftherandom' + 'drawsfromthedistancematrixwaslessthan 00001 Thisis' + 'likelydotoaphylogenywithdistancestoalltipsequal ' + ' Thisphylogenyisnotsuitablefor NRI/NT Ianalysis ' return -1 0 * mn y obs - mn y n / sd y n
def geoexplorer bing key settings get gis api bing google key settings get gis api google yahoo key settings get gis api yahoo print service settings get gis print service geoserver url settings get gis geoserver url response title ' Geo Explorer'return dict bing key bing key google key google key yahoo key yahoo key print service print service geoserver url geoserver url
def master event type master None event map {'connected' ' master connected' 'disconnected' ' master disconnected' 'failback' ' master failback' 'alive' ' master alive'}if type 'alive' and master is not None return '{ 0 } {1 }' format event map get type master return event map get type None
def master event type master None event map {'connected' ' master connected' 'disconnected' ' master disconnected' 'failback' ' master failback' 'alive' ' master alive'}if type 'alive' and master is not None return '{ 0 } {1 }' format event map get type master return event map get type None
def master event type master None event map {'connected' ' master connected' 'disconnected' ' master disconnected' 'failback' ' master failback' 'alive' ' master alive'}if type 'alive' and master is not None return '{ 0 } {1 }' format event map get type master return event map get type None
def migration get by id and instance context migration id instance uuid return IMPL migration get by id and instance context migration id instance uuid
def guess lexer text **options best lexer [0 0 None]for lexer in iter lexerclasses rv lexer analyse text text if rv 1 0 return lexer **options if rv > best lexer[ 0 ] best lexer[ ] rv lexer if not best lexer[ 0 ] or best lexer[ 1 ] is None raise Class Not Found 'nolexermatchingthetextfound' return best lexer[ 1 ] **options
def convert colors colors to rgb mpl colors color Converter to rgbif isinstance colors pd Data Frame return pd Data Frame {col colors[col] map to rgb for col in colors} elif isinstance colors pd Series return colors map to rgb else try to rgb colors[ 0 ] return list map to rgb colors except Value Error return [list map to rgb l for l in colors]
@anonymous csrf@mobile template 'questions/{mobile/}marketplace developer request html' def marketplace developer request request template error message Noneif request method 'GET' form Marketplace Developer Request Form request user else form Marketplace Developer Request Form request user request POST if form is valid try form submit ticket return Http Response Redirect reverse 'questions marketplace aaq success' except Zendesk Error error message ZENDESK ERROR MESSAG Ereturn render request template {'form' form 'error message' error message}
def RGS enum m if m < 1 return 0elif m 1 return 1else return bell m
def RGS enum m if m < 1 return 0elif m 1 return 1else return bell m
def dnsdomain get all context return IMPL dnsdomain get all context
def get Doc Block Region view point start end pointwhile start > 0 and view scope name start - 1 find 'comment block' > -1 start start - 1 while end < view size and view scope name end find 'comment block' > -1 end end + 1 return sublime Region start end
def setup hass config hass states set 'hello world Hello World' ' Works ' return True
def tmp access rule method ip None ttl None port None direction 'in' port origin 'd' ip origin 'd' comment '' if status csf if ip is None return {'error' ' Youmustsupplyanipaddressor CIDR '}if ttl is None return {'error' ' Youmustsupplyattl '}args build tmp access args method ip ttl port direction comment return csf cmd args
def compare medians ms group 1 group 2 axis None med 1 med 2 ma median group 1 axis axis ma median group 2 axis axis std 1 std 2 mstats stde median group 1 axis axis mstats stde median group 2 axis axis W np abs med 1 - med 2 / ma sqrt std 1 ** 2 + std 2 ** 2 return 1 - norm cdf W
def mkdir newdir if os path isdir newdir passelif os path isfile newdir raise OS Error "afilewiththesamenameasthedesireddir '%s' alreadyexists " % newdir else head tail os path split newdir if head and not os path isdir head mkdir head if tail os mkdir newdir
def get unique name check prefix '' suffix '' length None skip None if length name ' ' join [ for in prefix '%s' suffix if ] for in xrange 1000 name name % generate random string length if check name return nameelse name ' ' join [ for in prefix '%s' suffix if ] for i in xrange skip skip + 1000 name name % i if check name return nameraise Stop Iteration ' Failtogetuniquenamein 1000 iterations %s ' % name
def make streaming request sample language code max alternatives profanity filter speech context single utterance interim results config Recognition Config encoding sample encoding sample rate sample sample rate language code language code max alternatives max alternatives profanity filter profanity filter speech context speech context streaming config Streaming Recognition Config config config single utterance single utterance interim results interim results config request Streaming Recognize Request streaming config streaming config return config request
@ ec dispatcher dispatch for ops Migration Script def migration script ops context directive phase version path cli get version branch path context config release cli CURRENT RELEASE branch phase autogen kwargs {}cli check bootstrap new branch phase version path autogen kwargs op ops Migration Script new rev id ops Upgrade Ops ops [d for d in assign directives context directive upgrade ops ops phase ] ops Downgrade Ops ops [] message directive message **autogen kwargs if not op upgrade ops is empty return op
def handshake in memory client conn server conn client conn set connect state server conn set accept state for conn in [client conn server conn] try conn do handshake except Want Read Error passinteract in memory client conn server conn
def handshake in memory client conn server conn client conn set connect state server conn set accept state for conn in [client conn server conn] try conn do handshake except Want Read Error passinteract in memory client conn server conn
def median high name num minimum 0 maximum 0 ref None return calc name num 'median high' ref
@np deprecate new name 'expm' def expm 2 A A asarray square A t A dtype charif t not in ['f' 'F' 'd' 'D'] A A astype 'd' t 'd' s vr eig A vri inv vr r dot dot vr diag exp s vri if t in ['f' 'd'] return r real astype t else return r astype t
def test cmp a frozenset [1 2] b set [1 2] abig frozenset [1 2 3] bbig set [1 2 3] Are Equal cmp a b 0 Are Equal cmp a bbig -1 Are Equal cmp abig b 1 class sset set passclass fset frozenset passa fset [1 2] b sset [1 2] abig fset [1 2 3] bbig sset [1 2 3] Are Equal cmp a b 0 Are Equal cmp a bbig -1 Are Equal cmp abig b 1
def do inf pots mri rr bem rr mri Q sol bounds np concatenate [np arange 0 len mri rr 200 [len mri rr ]] B np empty len mri rr * 3 sol shape[ 1 ] for bi in range len bounds - 1 v0 s bem inf pots mri rr[bounds[bi] bounds[ bi + 1 ]] bem rr mri Q v0 s shape v0 s shape[ 0 ] * 3 v0 s shape[ 2 ] B[ 3 * bounds[bi] 3 * bounds[ bi + 1 ] ] np dot v0 s sol return B
def resolve document request docid permission 'base change resourcebase' msg PERMISSION MSG GENERIC **kwargs return resolve object request Document {'pk' docid} permission permission permission msg msg **kwargs
def read json fh byteorder dtype count data fh read count try return json loads unicode stripnull data 'utf- 8 ' except Value Error warnings warn "invalid JSON'%s'" % data
def popup inputbox title text par widget h2 1w 2 par widget width * 6 // 7 x par widget width - w2 // 2 - 1 + par widget x y par widget height - h2 // 2 - 1 + par widget y borders curses newwin h2 + 2 w2 + 2 y x borders border borders addstr 0 w2 - len title // 2 '%s' % title borders refresh return inputbox text x + 1 y + 1 w2 h2
def popup inputbox title text par widget h2 1w 2 par widget width * 6 // 7 x par widget width - w2 // 2 - 1 + par widget x y par widget height - h2 // 2 - 1 + par widget y borders curses newwin h2 + 2 w2 + 2 y x borders border borders addstr 0 w2 - len title // 2 '%s' % title borders refresh return inputbox text x + 1 y + 1 w2 h2
def locate config apache ctl try proc subprocess Popen [apache ctl '-V'] stdout subprocess PIPE stderr subprocess PIPE output proc communicate except OS Error sys exit NO APACHECTL server root config file ''for line in output splitlines if 'HTTPD ROOT' in line server root line[ line find '"' + 1 -1 ]elif 'SERVER CONFIG FILE' in line config file line[ line find '"' + 1 -1 ]if not server root and config file sys exit ' Unabletolocate Apacheconfiguration Pleaserunthisscriptagainandspecify--server-rootand--config-file' return server root config file
def locate config apache ctl try proc subprocess Popen [apache ctl '-V'] stdout subprocess PIPE stderr subprocess PIPE output proc communicate except OS Error sys exit NO APACHECTL server root config file ''for line in output splitlines if 'HTTPD ROOT' in line server root line[ line find '"' + 1 -1 ]elif 'SERVER CONFIG FILE' in line config file line[ line find '"' + 1 -1 ]if not server root and config file sys exit ' Unabletolocate Apacheconfiguration Pleaserunthisscriptagainandspecify--server-rootand--config-file' return server root config file
def locate config apache ctl try proc subprocess Popen [apache ctl '-V'] stdout subprocess PIPE stderr subprocess PIPE output proc communicate except OS Error sys exit NO APACHECTL server root config file ''for line in output splitlines if 'HTTPD ROOT' in line server root line[ line find '"' + 1 -1 ]elif 'SERVER CONFIG FILE' in line config file line[ line find '"' + 1 -1 ]if not server root and config file sys exit ' Unabletolocate Apacheconfiguration Pleaserunthisscriptagainandspecify--server-rootand--config-file' return server root config file
def is BPF Socket obj return isinstance obj L2 bpf Listen Socket or isinstance obj L2 bpf Listen Socket or isinstance obj L3 bpf Socket
def fake team db teamowner teamname None isapproved [ True False]productorservice [' Product' ' Service']if teamname is None teamname faker first name + fake text id 3 ctime teamowner ctime + datetime timedelta days 7 try teamslug slugize teamname homepage 'http //www example org/' + fake text id 3 insert fake data db 'teams' slug teamslug slug lower teamslug lower name teamname homepage homepage ctime ctime product or service random sample productorservice 1 [0 ] onboarding url homepage + '/contributing' owner teamowner username is approved random sample isapproved 1 [0 ] receiving 0 1 nreceiving from 3 except Integrity Error Invalid Team Name return fake team db teamowner return Team from slug teamslug
def pop from stack section args if len args 0 return ''parts []for idx in xrange len args parts append 'self->arg%d self->arguments stack[self->deeplevel "arg%d"] \n DCTB self->arguments stack[self->deeplevel "arg%d"] 0 ' % idx idx idx parts append '--self->deeplevel ' return '\n DCTB ' + '\n DCTB ' join parts
@with config DEBUG True ASSETS DEBUG True def test no output no merge bundle to joblist Bundle 's 1 ' 's 2 '
def cat extract tar member targetpath assert member isreg targetpath targetpath rstrip '/' targetpath targetpath replace '/' os sep upperdirs os path dirname targetpath if upperdirs and not os path exists upperdirs try os makedirs upperdirs except Environment Error as e if e errno errno EEXIST passelse raisewith files Delete On Error targetpath as dest with pipeline get cat pipeline pipeline PIPE dest f as pl fp tar extractfile member copyfileobj copyfileobj fp pl stdin if sys version info < 3 5 tar chown member targetpath else tar chown member targetpath False tar chmod member targetpath tar utime member targetpath
def url replace regex prefix return u'\n ?x #flags re VERBOSE\n ?P<quote>\\\\?[\'"] #theopeningquotes\n ?P<prefix>{prefix} #theprefix\n ?P<rest> *? #everythingelseintheurl\n ?P quote #thefirstmatchingclosingquote\n' format prefix prefix
def url replace regex prefix return u'\n ?x #flags re VERBOSE\n ?P<quote>\\\\?[\'"] #theopeningquotes\n ?P<prefix>{prefix} #theprefix\n ?P<rest> *? #everythingelseintheurl\n ?P quote #thefirstmatchingclosingquote\n' format prefix prefix
def recreate image codebook labels w h d codebook shape[ 1 ]image np zeros w h d label idx 0for i in range w for j in range h image[i][j] codebook[labels[label idx]]label idx + 1return image
def try using parallel type def print number number '\n Simplefunctiontogiveasimpletasktoexecute \n'print numberif parallel type 'multiprocessing' from multiprocessing import Process as Bucketelif parallel type 'threading' from threading import Thread as Bucketqueue Queue Queue jobs Job Queue 5 queue jobs debug Truefor x in range 20 jobs append Bucket target print number args [x] kwargs {} jobs close jobs run
def dynamic choice scriptler param registry xml parent data dynamic scriptler param common registry xml parent data ' Scriptler Choice Parameter Definition'
@contextmanagerdef wrap ptyprocess err try yield except ptyprocess Pty Process Error as e raise Exception Pexpect *e args
@contextmanagerdef wrap ptyprocess err try yield except ptyprocess Pty Process Error as e raise Exception Pexpect *e args
def write latest release file filename ' latest release rst'template " orphan \n\n Somecommonre Structured Textsubstitutions \n\n** Thisfileisautogenerated ** Sodon'tedititbyhand \n\n Youcanincludethisfileatthetopofyour``* rst``filewithaline\nlike \n\n include {filename}\n\n Thenusethesubstitutionsinthisfile e g \n\n latest release version \n\n latest release tag replace {latest tag}\n latest release version replace {latest version}\n latest package name precise replace {package name precise}\n latest package name trusty replace {package name trusty}\n\n"open filename 'w' write template format filename filename latest tag latest release tag latest version latest release version package name precise latest package name 'precise' package name trusty latest package name 'trusty'
def write latest release file filename ' latest release rst'template " orphan \n\n Somecommonre Structured Textsubstitutions \n\n** Thisfileisautogenerated ** Sodon'tedititbyhand \n\n Youcanincludethisfileatthetopofyour``* rst``filewithaline\nlike \n\n include {filename}\n\n Thenusethesubstitutionsinthisfile e g \n\n latest release version \n\n latest release tag replace {latest tag}\n latest release version replace {latest version}\n latest package name precise replace {package name precise}\n latest package name trusty replace {package name trusty}\n\n"open filename 'w' write template format filename filename latest tag latest release tag latest version latest release version package name precise latest package name 'precise' package name trusty latest package name 'trusty'
def write latest release file filename ' latest release rst'template " orphan \n\n Somecommonre Structured Textsubstitutions \n\n** Thisfileisautogenerated ** Sodon'tedititbyhand \n\n Youcanincludethisfileatthetopofyour``* rst``filewithaline\nlike \n\n include {filename}\n\n Thenusethesubstitutionsinthisfile e g \n\n latest release version \n\n latest release tag replace {latest tag}\n latest release version replace {latest version}\n latest package name precise replace {package name precise}\n latest package name trusty replace {package name trusty}\n\n"open filename 'w' write template format filename filename latest tag latest release tag latest version latest release version package name precise latest package name 'precise' package name trusty latest package name 'trusty'
def connect WS factory context Factory None timeout 30 bind Address None if hasattr factory 'reactor' reactor factory reactorelse from twisted internet import reactorif factory is Secure if context Factory is None from twisted internet import sslcontext Factory ssl Client Context Factory if factory proxy is not None factory context Factory context Factoryconn reactor connect TCP factory proxy[u'host'] factory proxy[u'port'] factory timeout bind Address elif factory is Secure conn reactor connect SSL factory host factory port factory context Factory timeout bind Address else conn reactor connect TCP factory host factory port factory timeout bind Address return conn
def quantize t quant scale max value 1 0 t tf minimum max value tf maximum t - max value big quant scale * t + max value + 0 5 with tf get default graph gradient override map {' Floor' ' Custom Id G'} res tf floor big / quant scale - max value return res
def delete table dataset name table name project None bigquery client bigquery Client project project dataset bigquery client dataset dataset name table dataset table table name table delete print ' Table{} {}deleted ' format dataset name table name
def survey get All Widgets For Template template id s3 db current s3 dbqltable s3 db survey question listqtable s3 db survey questionquery qltable template id template id & qltable question id qtable id rows current db query select qtable id qtable code qtable type qltable posn widgets {}for row in rows sqrow row survey questionqstn type sqrow typeqstn id sqrow idqstn code sqrow codeqstn posn row survey question list posnwidget obj survey question type[qstn type] qstn id widgets[qstn code] widget objwidget obj question['posn'] qstn posnreturn widgets
def get docker client cluster address def get path name return cluster certificates path child name pathtls TLS Config client cert get path 'user crt' get path 'user key' ssl version ssl PROTOCOL TL Sv 1 assert hostname False verify get path 'cluster crt' return dockerpy client base url 'https //{} {}' format address DOCKER PORT tls tls timeout 100 version '1 21 '
def load file location with open location as f s f read return load s
@register u'transpose-chars' def transpose chars event b event current bufferp b cursor positionif p 0 returnelif p len b text or b text[p] u'\n' b swap characters before cursor else b cursor position + b document get cursor right position b swap characters before cursor
def import image uuid verbose False ret {}imgadm check imgadm cmd '{ 0 }import{ 1 }' format imgadm uuid res salt ['cmd run all'] cmd python shell False retcode res['retcode']if retcode 0 ret[' Error'] exit status retcode return retreturn {uuid parse image meta get uuid verbose }
def clebsch gordan j 1 j 2 j 3 m 1 m 2 m 3 res -1 ** sympify j 1 - j 2 + m 3 * sqrt 2 * j 3 + 1 * wigner 3j j 1 j 2 j 3 m 1 m 2 - m 3 return res
def parse host hostname hostname hostname strip if host is ipv 6 hostname return hostname split '] ' 1 [0 ] strip '[]' else return hostname split ' ' 1 [0 ]
def get xunit setup teardown holder attr name param obj None param obj param obj if param obj is not None else holder result get xunit func holder attr name if result is not None arg count result code co argcountif inspect ismethod result arg count - 1if arg count return lambda result param obj else return result
@preloader Pausedef Get User Credentials try login Nonepassword Noneif login is None login raw Input ' Login ' if password is None password raw Input ' Password ' True except Keyboard Interrupt System Exit as e if e message tools exit e message else tools exitreturn login password
def cross entropy loss logits one hot labels label smoothing 0 weight 1 0 scope None logits get shape assert is compatible with one hot labels get shape with tf name scope scope ' Cross Entropy Loss' [logits one hot labels] num classes one hot labels get shape [ -1 ] valueone hot labels tf cast one hot labels logits dtype if label smoothing > 0 smooth positives 1 0 - label smoothing smooth negatives label smoothing / num classes one hot labels one hot labels * smooth positives + smooth negatives cross entropy tf contrib nn deprecated flipped softmax cross entropy with logits logits one hot labels name 'xentropy' weight tf convert to tensor weight dtype logits dtype base dtype name 'loss weight' loss tf multiply weight tf reduce mean cross entropy name 'value' tf add to collection LOSSES COLLECTION loss return loss
def cross entropy loss logits one hot labels label smoothing 0 weight 1 0 scope None logits get shape assert is compatible with one hot labels get shape with tf name scope scope ' Cross Entropy Loss' [logits one hot labels] num classes one hot labels get shape [ -1 ] valueone hot labels tf cast one hot labels logits dtype if label smoothing > 0 smooth positives 1 0 - label smoothing smooth negatives label smoothing / num classes one hot labels one hot labels * smooth positives + smooth negatives cross entropy tf contrib nn deprecated flipped softmax cross entropy with logits logits one hot labels name 'xentropy' weight tf convert to tensor weight dtype logits dtype base dtype name 'loss weight' loss tf multiply weight tf reduce mean cross entropy name 'value' tf add to collection LOSSES COLLECTION loss return loss
def test timeout from time import sleepsleep 2
def distrib desc with settings hide 'running' 'stdout' if not is file '/etc/redhat-release' return run 'lsb release--desc--short' return run 'cat/etc/redhat-release'
def construct message labels face annotations response text PRETEX Tlabel desc ''pos labels ['verylikely' 'likely' 'possibly']for i in range len labels label desc + '\n Scoreis%sfor%s' % labels[i]['score'] labels[i]['description'] joy anger sorrow surprise extract sentiment face annotations for i in range len pos labels if joy[i] > 0 label desc + '\n Wefound%speoplewhoare%sexperiencingjoy' % joy[i] pos labels[i] if anger[i] > 0 label desc + '\n Wefound%speoplewhoare%sexperiencinganger' % anger[i] pos labels[i] if sorrow[i] > 0 label desc + '\n Wefound%speoplewhoare%sexperiencingsorrow' % sorrow[i] pos labels[i] if surprise[i] > 0 label desc + '\n Wefound%speoplewhoare%sexperiencingsurprise' % surprise[i] pos labels[i] if not label desc label desc ' Nolabelsfound 'response text + label descresp twilio twiml Response resp message response text return resp
def graphviz layout G prog 'neato' root None **kwds return pydot layout G G prog prog root root **kwds
def arp interface '' ipaddr '' macaddr '' proxy output proxy ['napalm call'] 'get arp table' **{} if not proxy output get 'result' return proxy outputarp table proxy output get 'out' if interface arp table filter list arp table 'interface' interface if ipaddr arp table filter list arp table 'ip' ipaddr if macaddr arp table filter list arp table 'mac' macaddr proxy output update {'out' arp table} return proxy output
def arp interface '' ipaddr '' macaddr '' proxy output proxy ['napalm call'] 'get arp table' **{} if not proxy output get 'result' return proxy outputarp table proxy output get 'out' if interface arp table filter list arp table 'interface' interface if ipaddr arp table filter list arp table 'ip' ipaddr if macaddr arp table filter list arp table 'mac' macaddr proxy output update {'out' arp table} return proxy output
def mean absolute error y real y pred y real y pred check arrays y real y pred return np sum np abs y pred - y real / y real size
def Strptime arg strptime format split arg arg split ' ' datetime obj datetime datetime strptime split arg[ 0 ] strptime format if len split arg 2 datetime obj datetime obj replace microsecond int split arg[ 1 ] return datetime obj
def instance system metadata get context instance uuid return IMPL instance system metadata get context instance uuid
def get res pool ref session cluster res pool ref session call method vutil 'get object property' cluster 'resource Pool' return res pool ref
def get table str table table str ''col size [max len str val for val in column for column in zip *table ]for line in table table str + '\n'table str + '' join '{ 0 <{ 1 }}' format val col size[i] for i val in enumerate line return table str
def convert regex to flask path url path for token in [u'$'] url path url path replace token u'' def caller reg match name match pattern reg groups return u'<regex "{ 0 }" {1 }>' format match pattern match name url path re sub u'\\ \\?P< *? > *? \\ ' caller url path if url path endswith u'/?' url path url path rstrip u'/?' return url path
def reboot vm force False key 'uuid' ret {}vmadm check vmadm if key not in ['uuid' 'alias' 'hostname'] ret[' Error'] ' Keymustbeeitheruuid aliasorhostname'return retvm lookup '{ 0 } {1 }' format key vm one True if ' Error' in vm return vmcmd '{vmadm}reboot{force}{uuid}' format vmadm vmadm force '-F' if force else '' uuid vm res salt ['cmd run all'] cmd retcode res['retcode']if retcode 0 ret[' Error'] res['stderr'] if 'stderr' in res else exit status retcode return retreturn True
def bytes to num bval num 0num + ord bval[ 0 ] << 24 num + ord bval[ 1 ] << 16 num + ord bval[ 2 ] << 8 num + ord bval[ 3 ] return num
def Plist Value To Plain Value plist if isinstance plist dict ret value dict for key value in plist items ret value[key] Plist Value To Plain Value value return ret valueelif isinstance plist list return [ Plist Value To Plain Value value for value in plist]elif isinstance plist binplist Raw Value return plist valueelif isinstance plist binplist Corrupt Reference or isinstance plist binplist Unknown Object return Noneelif isinstance plist datetime datetime return calendar timegm plist utctimetuple * 1000000 + plist microsecond return plist
def Plist Value To Plain Value plist if isinstance plist dict ret value dict for key value in plist items ret value[key] Plist Value To Plain Value value return ret valueelif isinstance plist list return [ Plist Value To Plain Value value for value in plist]elif isinstance plist binplist Raw Value return plist valueelif isinstance plist binplist Corrupt Reference or isinstance plist binplist Unknown Object return Noneelif isinstance plist datetime datetime return calendar timegm plist utctimetuple * 1000000 + plist microsecond return plist
def url replace param url name value url components urlparse force str url query params parse qs url components query query params[name] valuequery urlencode query params doseq True return force text urlunparse [url components scheme url components netloc url components path url components params query url components fragment]
@commands u'title' @example u' titlehttp //google com' u'[ Google]-google com' def title command bot trigger if not trigger group 2 if trigger sender not in bot memory[u'last seen url'] returnmatched check callbacks bot trigger bot memory[u'last seen url'][trigger sender] True if matched returnelse urls [bot memory[u'last seen url'][trigger sender]]else urls re findall url finder trigger results process urls bot trigger urls for title domain in results[ 4] bot reply u'[%s]-%s' % title domain
def highlight code lexer formatter outfile None return format lex code lexer formatter outfile
def Make Entity For Query query *path pseudo pb entity pb Entity Proto pseudo pb mutable entity group pseudo pk pseudo pb mutable key pseudo pk set app query app if query has name space pseudo pk set name space query name space for i in xrange 0 len path 2 pseudo pe pseudo pk mutable path add element pseudo pe set type path[i] if isinstance path[ i + 1 ] basestring pseudo pe set name path[ i + 1 ] else pseudo pe set id path[ i + 1 ] return pseudo pb
def main print '\n Initializingserialconnection'console serial Serial port 'COM 1 ' baudrate 9600 parity 'N' stopbits 1 bytesize 8 timeout READ TIMEOUT if not console is Open sys exit login console print send command console cmd 'showipintbrief' logout console
def main print '\n Initializingserialconnection'console serial Serial port 'COM 1 ' baudrate 9600 parity 'N' stopbits 1 bytesize 8 timeout READ TIMEOUT if not console is Open sys exit login console print send command console cmd 'showipintbrief' logout console
def is unedited config file content template content None content content encode u'latin- 1 ' content re sub '\njquery url\\s* \\s*[^\n]+' '' content buffer io Bytes IO content buffer seek 0 raw cfg configobj Config Obj buffer interpolation True for v in six itervalues raw cfg if len v breakelse return Trueknown configs set [u' 7 d 4 b 4 f 1120304 b 286 d 71 f 205975 b 1286 ' u' 5 df 7 e 409425 e 5 bfe 7 ed 041513 fda 3288 ' u' 8355 f 99 a 01 b 3 bdfd 8761 ef 45 d 5 d 8 b 7 e 5 ' u' 4 ea 5 a 84 de 146 dc 3 fcea 2 a 5 b 93735 e 634 '] md 5 hashlib md 5 md 5 update content digest md 5 hexdigest return digest in known configs
def is unedited config file content template content None content content encode u'latin- 1 ' content re sub '\njquery url\\s* \\s*[^\n]+' '' content buffer io Bytes IO content buffer seek 0 raw cfg configobj Config Obj buffer interpolation True for v in six itervalues raw cfg if len v breakelse return Trueknown configs set [u' 7 d 4 b 4 f 1120304 b 286 d 71 f 205975 b 1286 ' u' 5 df 7 e 409425 e 5 bfe 7 ed 041513 fda 3288 ' u' 8355 f 99 a 01 b 3 bdfd 8761 ef 45 d 5 d 8 b 7 e 5 ' u' 4 ea 5 a 84 de 146 dc 3 fcea 2 a 5 b 93735 e 634 '] md 5 hashlib md 5 md 5 update content digest md 5 hexdigest return digest in known configs
def is unedited config file content template content None content content encode u'latin- 1 ' content re sub '\njquery url\\s* \\s*[^\n]+' '' content buffer io Bytes IO content buffer seek 0 raw cfg configobj Config Obj buffer interpolation True for v in six itervalues raw cfg if len v breakelse return Trueknown configs set [u' 7 d 4 b 4 f 1120304 b 286 d 71 f 205975 b 1286 ' u' 5 df 7 e 409425 e 5 bfe 7 ed 041513 fda 3288 ' u' 8355 f 99 a 01 b 3 bdfd 8761 ef 45 d 5 d 8 b 7 e 5 ' u' 4 ea 5 a 84 de 146 dc 3 fcea 2 a 5 b 93735 e 634 '] md 5 hashlib md 5 md 5 update content digest md 5 hexdigest return digest in known configs
def is unedited config file content template content None content content encode u'latin- 1 ' content re sub '\njquery url\\s* \\s*[^\n]+' '' content buffer io Bytes IO content buffer seek 0 raw cfg configobj Config Obj buffer interpolation True for v in six itervalues raw cfg if len v breakelse return Trueknown configs set [u' 7 d 4 b 4 f 1120304 b 286 d 71 f 205975 b 1286 ' u' 5 df 7 e 409425 e 5 bfe 7 ed 041513 fda 3288 ' u' 8355 f 99 a 01 b 3 bdfd 8761 ef 45 d 5 d 8 b 7 e 5 ' u' 4 ea 5 a 84 de 146 dc 3 fcea 2 a 5 b 93735 e 634 '] md 5 hashlib md 5 md 5 update content digest md 5 hexdigest return digest in known configs
def split by array group size filler args [iter array ] * group size return list map list zip longest fillvalue filler *args
def split by array group size filler args [iter array ] * group size return list map list zip longest fillvalue filler *args
def reachable step Function start destinations alreadyseen None if len start 0 or len destinations 0 return {}if alreadyseen is None alreadyseen [] alreadyseen extend start res {}for s in start if s in destinations res[s] 0start remove s new set for s in start new update step Function s new difference update alreadyseen ndestinations list destinations for s in list new if s in destinations res[s] 1new remove s ndestinations remove s alreadyseen append s deeper reachable step Function new ndestinations alreadyseen for k val in list deeper items res[k] val + 1 return res
def http request method url session requests **kwargs kwargs setdefault 'timeout' 30 0 kwargs setdefault 'verify' False try return getattr session method lower url **kwargs except requests exceptions Missing Schema requests exceptions Invalid Schema print error ' Invalid UR Lformat {}' format url returnexcept requests exceptions Connection Error print error ' Connectionerror {}' format url returnexcept requests Request Exception as error print error error returnexcept socket error as err print error err returnexcept Keyboard Interrupt print info print status ' Modulehasbeenstopped'
def mb parser xml resp try return mbxml parse message resp except Unicode Error as exc raise Response Error cause exc except Exception as exc if isinstance exc ETREE EXCEPTIONS raise Response Error cause exc else raise
def mb parser xml resp try return mbxml parse message resp except Unicode Error as exc raise Response Error cause exc except Exception as exc if isinstance exc ETREE EXCEPTIONS raise Response Error cause exc else raise
def upgrade migrate engine meta Meta Data meta bind migrate engineworkers Table 'workers' meta autoload True if migrate engine name startswith 'mysql' try workers c updated at alter mysql DATETIME fsp 6 except Exception passwi workers insert now timeutils utcnow replace microsecond 123 wi execute {'created at' now 'updated at' now 'deleted' False 'resource type' 'SENTINEL' 'resource id' 'SUB-SECOND' 'status' 'OK'}
def upgrade migrate engine meta Meta Data meta bind migrate engineworkers Table 'workers' meta autoload True if migrate engine name startswith 'mysql' try workers c updated at alter mysql DATETIME fsp 6 except Exception passwi workers insert now timeutils utcnow replace microsecond 123 wi execute {'created at' now 'updated at' now 'deleted' False 'resource type' 'SENTINEL' 'resource id' 'SUB-SECOND' 'status' 'OK'}
@snippetdef client run sync query paged client TIMEOUT MS 1000 PAGE SIZE 100 LIMIT 1000 LIMITED '%s LIMIT%d' % QUERY LIMIT all rows []def do something with rows all rows extend rows query client run sync query LIMITED query timeout ms TIMEOUT M Squery max results PAGE SIZ Equery run assert query completeassert query page token is not None assert len query rows PAGE SIZE assert [field name for field in query schema] ['name'] rows query rowstoken query page tokenwhile True do something with rows if token is None break rows total count token query fetch data page token token assert total count LIMIT assert len all rows LIMIT
def set le script version venv dir version with open join venv dir 'letsencrypt' 'bin' 'letsencrypt' 'w' as script script write "# /usr/bin/envpython\nfromsysimportstderr\nstderr write 'letsencrypt%s\\n' " % version
def set le script version venv dir version with open join venv dir 'letsencrypt' 'bin' 'letsencrypt' 'w' as script script write "# /usr/bin/envpython\nfromsysimportstderr\nstderr write 'letsencrypt%s\\n' " % version
def pypackable name pytype format size items formatinfo format return type Packable name pytype Packable {' format ' format ' size ' size ' items ' items}
def Authenticate opener host user pwd otp entry request dict {'username' user 'password' pwd 'otp' otp entry}req Make Request host '/otp' request dict return Handle Response 'authentication' opener open req
def apply template on contents contents template context defaults saltenv if template in salt utils templates TEMPLATE REGISTRY context dict defaults if defaults else {} if context context dict update context contents salt utils templates TEMPLATE REGISTRY[template] contents from str True to str True context context dict saltenv saltenv grains opts ['grains'] pillar pillar salt salt opts opts ['data'] encode 'utf- 8 ' else ret {}ret['result'] Falseret['comment'] ' Specifiedtemplateformat{ 0 }isnotsupported' format template return retreturn contents
def Skip Fixed 32 buffer pos end pos + 4if pos > end raise Decode Error ' Truncatedmessage ' return pos
def check stats permission request addon for contributions False if addon public stats and not for contributions returnif not request user is authenticated raise Permission Deniedif not for contributions if addon has author request user or acl action allowed request ' Stats' ' View' returnelif addon has author request user or acl action allowed request ' Revenue Stats' ' View' returnraise Permission Denied
def largest interface instance return superlative interface 1 instance
def largest interface instance return superlative interface 1 instance
def versionize app pagename templatename context doctree if not app config canonical root and app config versions returncontext['versions'] [ vs build url app config canonical root vs pagename for vs in app config versions split ' ' if vs app config version ]
def versionize app pagename templatename context doctree if not app config canonical root and app config versions returncontext['versions'] [ vs build url app config canonical root vs pagename for vs in app config versions split ' ' if vs app config version ]
def sweep B best worst front stairs fstairs [] [] iter best iter best next best next iter best False for h in worst while next best and h[ 2] < next best[ 2] insert Truefor i fstair in enumerate fstairs if front[fstair] front[next best] if fstair[ 1 ] > next best[ 1 ] insert Falseelse del stairs[i] fstairs[i]breakif insert idx bisect bisect right stairs - next best[ 1 ] stairs insert idx - next best[ 1 ] fstairs insert idx next best next best next iter best False idx bisect bisect right stairs - h[ 1 ] if 0 < idx < len stairs fstair max fstairs[ idx] key front getitem front[h] max front[h] front[fstair] + 1
def mb call func *args **kwargs try return func *args **kwargs except musicbrainzngs Authentication Error raise ui User Error u'authenticationwith Music Brainzfailed' except musicbrainzngs Response Error musicbrainzngs Network Error as exc raise ui User Error u' Music Brainz AP Ierror {0 }' format exc except musicbrainzngs Usage Error raise ui User Error u' Music Brainzcredentialsmissing'
def complete y return linkage y method 'complete' metric 'euclidean'
def complete y return linkage y method 'complete' metric 'euclidean'
def run tests argv None default Test None topleveldir None xmloutput None verbosity 1 nomultiproc False if xmloutput is not None import xmlrunnerrunner xmlrunner XML Test Runner output xmloutput else runner Noneprog Numba Test Program argv argv module None default Test default Test topleveldir topleveldir test Runner runner exit False verbosity verbosity nomultiproc nomultiproc return prog result
def run tests argv None default Test None topleveldir None xmloutput None verbosity 1 nomultiproc False if xmloutput is not None import xmlrunnerrunner xmlrunner XML Test Runner output xmloutput else runner Noneprog Numba Test Program argv argv module None default Test default Test topleveldir topleveldir test Runner runner exit False verbosity verbosity nomultiproc nomultiproc return prog result
def run tests argv None default Test None topleveldir None xmloutput None verbosity 1 nomultiproc False if xmloutput is not None import xmlrunnerrunner xmlrunner XML Test Runner output xmloutput else runner Noneprog Numba Test Program argv argv module None default Test default Test topleveldir topleveldir test Runner runner exit False verbosity verbosity nomultiproc nomultiproc return prog result
def dmp eval tail f A u K if not A return fif dmp zero p f u return dmp zero u - len A e rec eval tail f 0 A u K if u len A - 1 return eelse return dmp strip e u - len A
def handle wallclock metric common props sample wallclock samples []wallclock sample dict common props wallclock sample['value'] sample['value']wallclock samples append wallclock sample return wallclock samples
def exception traceback exc info excout String IO exc type exc val exc tb exc infotraceback print exception exc type exc val exc tb file excout return excout getvalue
def strip course id path course id unicode FAKE COURSE KEY return path split course id [0 ]
def strip course id path course id unicode FAKE COURSE KEY return path split course id [0 ]
def Check Location for url in config lib CONFIG[' Client server urls'] + config lib CONFIG[' Client control urls'] if 'staging' in url or 'localhost' in url returnlogging error ' Poolclientshouldonlyberunagainsttestorstaging ' exit
def member with tags server selector tag sets selection return apply tag sets tag sets readable server selector selection
def multi Evaluate repeat def decorator func def inner *args **kwargs result 0 0for dummy in range repeat result + func *args **kwargs return result / repeat return innerreturn decorator
def logout if current user is authenticated logout user return redirect request args get 'next' None or get url security post logout view
def set gpu fraction sess None gpu fraction 0 3 print 'tensorlayer GPUMEM Fraction%f' % gpu fraction gpu options tf GPU Options per process gpu memory fraction gpu fraction sess tf Session config tf Config Proto gpu options gpu options return sess
def add uids doctree condition for node in doctree traverse condition node uid uuid 4 hex yield node
def snapshot from bdm snapshot id template copy from template 'disk bus' 'device type' 'boot index' 'delete on termination' 'volume size' 'device name' snapshot dict {'source type' 'snapshot' 'destination type' 'volume' 'snapshot id' snapshot id}for key in copy from template snapshot dict[key] template get key return Block Device Dict snapshot dict
def mark negation document double neg flip False shallow False if not shallow document deepcopy document labeled document and isinstance document[ 0 ] tuple list if labeled doc document[ 0 ]else doc documentneg scope Falsefor i word in enumerate doc if NEGATION RE search word if not neg scope or neg scope and double neg flip neg scope not neg scope continueelse doc[i] + ' NEG'elif neg scope and CLAUSE PUNCT RE search word neg scope not neg scope elif neg scope and not CLAUSE PUNCT RE search word doc[i] + ' NEG'return document
def make ip network port network ip address netaddr IP Address port['fixed ips'][ 0 ]['ip address'] return netaddr IP Network ip address value network prefixlen
def make ip network port network ip address netaddr IP Address port['fixed ips'][ 0 ]['ip address'] return netaddr IP Network ip address value network prefixlen
def instance group get by instance context instance uuid return IMPL instance group get by instance context instance uuid
def f List To String a list a precision 3 from numpy import arounds list ' ' join '%g' % around x a precision ljust a precision + 3 for x in a list return '[%s]' % s list
def test enhancements plugin domains supported plugin supported enhancements if 'redirect' not in supported logger error ' Thepluginandthisprogramsupportnocommonenhancements' return Falsefor domain in domains try plugin enhance domain 'redirect' plugin save except le errors Plugin Error as error logger warning ' Pluginfailedtoenableredirectfor%s ' domain logger warning '%s' error except le errors Error as error logger error ' Anerroroccurredwhileenablingredirectfor%s ' domain logger exception error if not save and restart plugin 'enhanced' return Falsesuccess Truefor domain in domains verify functools partial validator Validator redirect 'localhost' plugin http port headers {' Host' domain} if not try until true verify logger error ' Improperredirectfordomain%s' domain success Falseif success logger info ' Enhancmentstestsucceeded' return success
def loss y hat y return T sqr y hat - y mean
def loss y hat y return T sqr y hat - y mean
def Add Properties For Field field cls assert Field Descriptor MAX CPPTYPE 10 constant name field name upper + ' FIELD NUMBER' setattr cls constant name field number if field label Field Descriptor LABEL REPEATED Add Properties For Repeated Field field cls elif field cpp type Field Descriptor CPPTYPE MESSAGE Add Properties For Non Repeated Composite Field field cls else Add Properties For Non Repeated Scalar Field field cls
@strategy options loader option def baked lazyload loadopt attr return loadopt set relationship strategy attr {'lazy' 'baked select'}
def Get Module Object And Name globals dict for name module in sys modules items if getattr module ' dict ' None is globals dict if name ' main ' name sys argv[ 0 ]return module name return None None
def no freesurfer if Info version is None return Trueelse return False
def no freesurfer if Info version is None return Trueelse return False
def no freesurfer if Info version is None return Trueelse return False
def set scroll commands widget hbar vbar if vbar widget['yscrollcommand'] vbar 'set' vbar['command'] widget 'yview' if hbar widget['xscrollcommand'] hbar 'set' hbar['command'] widget 'xview' widget vbar vbarwidget hbar hbar
def make double frame master None class None name None relief RAISED borderwidth 1 if name if class frame Frame master class class name name else frame Frame master name name elif class frame Frame master class class else frame Frame master top Frame frame name 'topframe' relief relief borderwidth borderwidth bottom Frame frame name 'bottomframe' bottom pack fill X padx '1 m' pady '1 m' side BOTTOM top pack expand 1 fill BOTH padx '1 m' pady '1 m' frame pack expand 1 fill BOTH top Frame top top pack expand 1 fill BOTH padx '2 m' pady '2 m' return frame top bottom
def check caller authority caller role if not caller is authenticated and caller is active raise Permission Deniedif Global Staff has user caller returnif isinstance role Global Staff Course Creator Role raise Permission Deniedelif isinstance role Course Role if not user has role caller Course Instructor Role role course key raise Permission Denied
def check caller authority caller role if not caller is authenticated and caller is active raise Permission Deniedif Global Staff has user caller returnif isinstance role Global Staff Course Creator Role raise Permission Deniedelif isinstance role Course Role if not user has role caller Course Instructor Role role course key raise Permission Denied
@taskdef bootstrap try import virtualenvexcept Import Error raise Runtime Error 'virtualenvisneededforbootstrap' bdir options bootstrap dirif not os path exists bdir os makedirs bdir bscript 'boostrap py'options virtualenv script name os path join options bootstrap dir bscript options bootstrap no site packages Falsecall task 'paver virtual bootstrap' sh 'cd%s %s%s' % bdir sys executable bscript
def set log level for all loggers level logging DEBUG root logger logging get Logger loggers logging Logger manager logger Dict values loggers + [root logger]for logger in loggers if not isinstance logger logging Logger continueset log level for all handlers logger logger
def get class lookup view if isinstance lookup view str mod name func name get mod func lookup view if func name '' lookup view getattr import mod name {} {} ['*'] func name if not callable lookup view raise Attribute Error "'%s %s'isnotacallable " % mod name func name return lookup view
def co findloadednames co names {}names update co code findloadednames co for c in co co consts if isinstance c type co names update co findloadednames c return names
def create table dataset name table name project None bigquery client bigquery Client project project dataset bigquery client dataset dataset name if not dataset exists print ' Dataset{}doesnotexist ' format dataset name returntable dataset table table name table schema bigquery Schema Field ' Name' 'STRING' bigquery Schema Field ' Age' 'INTEGER' bigquery Schema Field ' Weight' 'FLOAT' table create print ' Createdtable{}indataset{} ' format table name dataset name
def create table dataset name table name project None bigquery client bigquery Client project project dataset bigquery client dataset dataset name if not dataset exists print ' Dataset{}doesnotexist ' format dataset name returntable dataset table table name table schema bigquery Schema Field ' Name' 'STRING' bigquery Schema Field ' Age' 'INTEGER' bigquery Schema Field ' Weight' 'FLOAT' table create print ' Createdtable{}indataset{} ' format table name dataset name
def npz to W pdf path None regx 'w 1 pre [0 - 9 ]+\\ npz ' file list load file list path path regx regx for f in file list W load npz path f [0 ]print '%s-->%s' % f f split ' ' [0 ] + ' pdf' visualize W W second 10 saveable True name f split ' ' [0 ] fig idx 2012
def add build arguments parser parser add argument '--involucro-path' dest 'involucro path' default None help ' Pathtoinvolucro ifnotsetwilllookinworkingdirectoryandon PATH ' parser add argument '--force-rebuild' dest 'force rebuild' action 'store true' help ' Rebuildpackageevenifalreadypublished ' parser add argument '--dry-run' dest 'dry run' action 'store true' help ' Justprintcommandsinsteadofexecutingthem ' parser add argument '-n' '--namespace' dest 'namespace' default 'mulled' help 'quay ionamespace ' parser add argument '-r' '--repository template' dest 'repository template' default DEFAULT REPOSITORY TEMPLATE help ' Dockerrepositorytargetforpublication onlyquay ioorcompat AP Iiscurrentlysupported ' parser add argument '-c' '--channel' dest 'channel' default DEFAULT CHANNEL help ' Targetcondachannel' parser add argument '--extra-channels' dest 'extra channels' default ' ' join DEFAULT EXTRA CHANNELS help ' Dependentcondachannels '
def add build arguments parser parser add argument '--involucro-path' dest 'involucro path' default None help ' Pathtoinvolucro ifnotsetwilllookinworkingdirectoryandon PATH ' parser add argument '--force-rebuild' dest 'force rebuild' action 'store true' help ' Rebuildpackageevenifalreadypublished ' parser add argument '--dry-run' dest 'dry run' action 'store true' help ' Justprintcommandsinsteadofexecutingthem ' parser add argument '-n' '--namespace' dest 'namespace' default 'mulled' help 'quay ionamespace ' parser add argument '-r' '--repository template' dest 'repository template' default DEFAULT REPOSITORY TEMPLATE help ' Dockerrepositorytargetforpublication onlyquay ioorcompat AP Iiscurrentlysupported ' parser add argument '-c' '--channel' dest 'channel' default DEFAULT CHANNEL help ' Targetcondachannel' parser add argument '--extra-channels' dest 'extra channels' default ' ' join DEFAULT EXTRA CHANNELS help ' Dependentcondachannels '
def loop template list loop positions instance instance type default template registery {} templates []local loop position loop positions[ 1 ]global loop position loop positions[ 0 ]instance string slugify str instance for key in [ '%s-%s' % instance type instance string instance string instance type 'default'] try templates append registery[key][global loop position] except Key Error passtemplates append append position default template global loop position '-' templates append append position default template local loop position ' ' templates append default template return templates
def loop template list loop positions instance instance type default template registery {} templates []local loop position loop positions[ 1 ]global loop position loop positions[ 0 ]instance string slugify str instance for key in [ '%s-%s' % instance type instance string instance string instance type 'default'] try templates append registery[key][global loop position] except Key Error passtemplates append append position default template global loop position '-' templates append append position default template local loop position ' ' templates append default template return templates
def pathlist 2 filename pathlist fullpath ''for elem in pathlist fullpath os path join fullpath elem try return fullpath decode 'utf- 8 ' except Unicode Decode Error charenc chardet detect fullpath ['encoding']return fullpath decode charenc
def load entry point dist group name return get distribution dist load entry point group name
def builds chain fingerprinter registry xml parent data fingerprinter XML Sub Element xml parent 'org jenkinsci plugins buildschainfingerprinter Automatic Fingerprint Job Property' XML Sub Element fingerprinter 'is Per Builds Chain Enabled' text str data get 'per-builds-chain' False lower XML Sub Element fingerprinter 'is Per Jobs Chain Enabled' text str data get 'per-job-chain' False lower
def builds chain fingerprinter registry xml parent data fingerprinter XML Sub Element xml parent 'org jenkinsci plugins buildschainfingerprinter Automatic Fingerprint Job Property' XML Sub Element fingerprinter 'is Per Builds Chain Enabled' text str data get 'per-builds-chain' False lower XML Sub Element fingerprinter 'is Per Jobs Chain Enabled' text str data get 'per-job-chain' False lower
def get credit requirement status course key username namespace None name None requirements Credit Requirement get course requirements course key namespace namespace name name requirement statuses Credit Requirement Status get statuses requirements username requirement statuses dict o requirement o for o in requirement statuses statuses []for requirement in requirements requirement status requirement statuses get requirement statuses append {'namespace' requirement namespace 'name' requirement name 'display name' requirement display name 'criteria' requirement criteria 'reason' requirement status reason if requirement status else None 'status' requirement status status if requirement status else None 'status date' requirement status modified if requirement status else None 'order' requirement order} return statuses
def project activity year options db current dbtable current s3 db project activityquery table deleted False min field table date min start date min db query select min field orderby min field limitby 0 1 first [min field]if start date min start year start date min yearelse start year Nonemax field table end date max end date max db query select max field orderby max field limitby 0 1 first [max field]if end date max end year end date max yearelse end year Noneif not start year or not end year return {start year start year} or {end year end year} years {}for year in xrange start year end year + 1 years[year] yearreturn years
def test root normalized mean absolute error max rating 5 0min rating 1 0y real np array [0 0 1 0 0 0 2 0 3 0] y pred np array [0 0 1 0 0 0 2 0 3 0] assert equals 0 0 normalized mean absolute error y real y pred max rating min rating y real np array [3 0 1 0 2 0 1 0 1 0] y pred np array [0 0 1 0 0 0 2 0 3 0] assert almost equals 0 4 normalized mean absolute error y real y pred max rating min rating
def init externals if version 'git' sys path insert 0 osp join osp dirname file 'ext' 'gitdb' try import gitdbexcept Import Error raise Import Error "'gitdb'couldnotbefoundinyour PYTHONPATH"
def init externals if version 'git' sys path insert 0 osp join osp dirname file 'ext' 'gitdb' try import gitdbexcept Import Error raise Import Error "'gitdb'couldnotbefoundinyour PYTHONPATH"
@register filterdef thumbnailer passive obj thumbnailer get thumbnailer obj thumbnailer generate Falsereturn thumbnailer
@register filterdef thumbnailer passive obj thumbnailer get thumbnailer obj thumbnailer generate Falsereturn thumbnailer
@register filterdef thumbnailer passive obj thumbnailer get thumbnailer obj thumbnailer generate Falsereturn thumbnailer
@register filterdef thumbnailer passive obj thumbnailer get thumbnailer obj thumbnailer generate Falsereturn thumbnailer
def generate signing key args if os path exists args keyfile raise esptool Fatal Error 'ERROR Keyfile%salreadyexists' % args keyfile sk ecdsa Signing Key generate curve ecdsa NIST 256 p with open args keyfile 'wb' as f f write sk to pem print 'ECDSANIST 256 pprivatekeyin PE Mformatwrittento%s' % args keyfile
def concat series axis 0 allow mix False is pandas np r [[ is using pandas s None for s in series]]if np all is pandas concatenated pd concat series axis axis elif np all ~ is pandas or allow mix concatenated np concatenate series axis axis else raise Value Error ' Attemptedtoconcatenate Pandasobjectswithnon- Pandasobjectswith`allow mix False` ' return concatenated
def scale x y pt None rv eye 3 rv[ 0 0 ] xrv[ 1 1 ] yif pt from sympy geometry point import Pointpt Point pt dim 2 tr 1 translate * - pt args tr 2 translate *pt args return tr 1 * rv * tr 2 return rv
@task failure connectdef process failure signal exception traceback sender task id signal args kwargs einfo **kw exc info type exception exception traceback log error u' Celery TAS Kexception {0 name } {1 }' format *exc info exc info exc info extra {'data' {'task id' task id 'sender' sender 'args' args 'kwargs' kwargs}}
def display bitmask kind bitmap value col 1 width max map len list bitmap keys + [kind] col 2 width 7FMT '{name >{col 1 width}}{value >{col 2 width}}{description}'print FMT format name kind value ' Value' description ' Description' col 1 width col 1 width col 2 width col 2 width print '{ 0 }{ 1 }{ 2 }' format '-' * col 1 width '-' * col 2 width '-' * max map len bitmap values for flag name description in bitmap items try bitmask getattr termios flag name bit val 'on' if bool value & bitmask else 'off' except Attribute Error bit val 'undef'print FMT format name flag name value bit val description description col 1 width col 1 width col 2 width col 2 width print
def make linear colorscale colors scale 1 0 / len colors - 1 return [[ i * scale color] for i color in enumerate colors ]
def get current inventory resources conn rp cur res sel sa select [ INV TBL c resource class id] where INV TBL c resource provider id rp id existing resources conn execute cur res sel fetchall return set [r[ 0 ] for r in existing resources]
def get current inventory resources conn rp cur res sel sa select [ INV TBL c resource class id] where INV TBL c resource provider id rp id existing resources conn execute cur res sel fetchall return set [r[ 0 ] for r in existing resources]
def get current inventory resources conn rp cur res sel sa select [ INV TBL c resource class id] where INV TBL c resource provider id rp id existing resources conn execute cur res sel fetchall return set [r[ 0 ] for r in existing resources]
def setup platform hass config add devices discovery info None add devices [ Demo Sensor ' Outside Temperature' 15 6 TEMP CELSIUS 12 Demo Sensor ' Outside Humidity' 54 '%' None ]
def is possible short number for region short number region dialing from if isinstance short number Phone Number short number national significant number short number metadata Phone Metadata short metadata for region region dialing from if metadata is None return Falsegeneral desc metadata general descreturn is number possible for desc short number general desc
def pagebreak type 'page' orient 'portrait' validtypes ['page' 'section']if type not in validtypes tmpl ' Pagebreakstyle"%s"notimplemented Validstyles %s 'raise Value Error tmpl % type validtypes pagebreak makeelement 'p' if type 'page' run makeelement 'r' br makeelement 'br' attributes {'type' type} run append br pagebreak append run elif type 'section' p Pr makeelement 'p Pr' sect Pr makeelement 'sect Pr' if orient 'portrait' pg Sz makeelement 'pg Sz' attributes {'w' '12240 ' 'h' '15840 '} elif orient 'landscape' pg Sz makeelement 'pg Sz' attributes {'h' '12240 ' 'w' '15840 ' 'orient' 'landscape'} sect Pr append pg Sz p Pr append sect Pr pagebreak append p Pr return pagebreak
def get timezone zone None if zone is None return LOCALT Zif not isinstance zone string types return zonetry return pytz timezone zone except pytz Unknown Time Zone Error raise Lookup Error ' Unknowntimezone%s' % zone
def get filter query args query Q for arg in args if hasattr Change Set arg and args[arg] kwargs {str arg + ' id' long args[arg] }query query & Q **kwargs if 'status' not in args query query & Q status hidden False return query
def proxy info from environment method 'http' if method not in ['http' 'https'] returnenv var method + ' proxy' url os environ get env var os environ get env var upper if not url returnpi proxy info from url url method no proxy os environ get 'no proxy' os environ get 'NO PROXY' '' bypass hosts []if no proxy bypass hosts no proxy split ' ' if no proxy '*' bypass hosts All Hostspi bypass hosts bypass hostsreturn pi
def load notebook resources None verbose False hide banner False load timeout 5000 html js load notebook html resources verbose hide banner load timeout publish display data {'text/html' html} publish display data {'application/javascript' js}
def host memory size obj s e host memory extents obj assert e > s 'memoryextendofnegativesize'return e - s
def sample count value len uris len value if len uris 1 return 'ten'if len uris > 10 return 'ten'else return human number len uris
def sample count value len uris len value if len uris 1 return 'ten'if len uris > 10 return 'ten'else return human number len uris
def add billed ops to map billed ops map billed ops list for billed op in billed ops list if billed op op not in billed ops map update me datamodel pb Billed Op Proto update me set op billed op op update me set num ops 0 billed ops map[billed op op ] update meupdate me billed ops map[billed op op ]update me set num ops update me num ops + billed op num ops
def warns expected warning *args **kwargs wcheck Warnings Checker expected warning if not args return wcheckelif isinstance args[ 0 ] str code argsassert isinstance code str frame sys getframe 1 loc frame f locals copy loc update kwargs with wcheck code pytest code Source code compile py builtin exec code frame f globals loc else func args[ 0 ]with wcheck return func *args[ 1 ] **kwargs
def warns expected warning *args **kwargs wcheck Warnings Checker expected warning if not args return wcheckelif isinstance args[ 0 ] str code argsassert isinstance code str frame sys getframe 1 loc frame f locals copy loc update kwargs with wcheck code pytest code Source code compile py builtin exec code frame f globals loc else func args[ 0 ]with wcheck return func *args[ 1 ] **kwargs
def take a indices axis None out None return a take indices axis out
def tunnel write and run remote write fn remote cmd fn with tempfile Named Temporary File as tmp fh rando text str uuid uuid 4 tmp fh write rando text encode tmp fh flush remote tmp file '/tmp/' + str uuid uuid 4 remote write fn src tmp fh name dst remote tmp file returned text remote cmd fn cmd ['cat' remote tmp file] decode 'utf- 8 ' strip '\n' assert returned text rando text
def tunnel write and run remote write fn remote cmd fn with tempfile Named Temporary File as tmp fh rando text str uuid uuid 4 tmp fh write rando text encode tmp fh flush remote tmp file '/tmp/' + str uuid uuid 4 remote write fn src tmp fh name dst remote tmp file returned text remote cmd fn cmd ['cat' remote tmp file] decode 'utf- 8 ' strip '\n' assert returned text rando text
def pre order list node filter func no filter l stack [] [] poped index 0 0 while node if filter func node if not poped l append node if node children and not poped stack append node index index 0node node children[ 0 ]else index + 1try node stack[ -1 ][ 0 ] children[index]except Index Error node Noneelse node Nonepoped 0if node is None and len stack > 1 node index stack pop poped 1return l
def pre order list node filter func no filter l stack [] [] poped index 0 0 while node if filter func node if not poped l append node if node children and not poped stack append node index index 0node node children[ 0 ]else index + 1try node stack[ -1 ][ 0 ] children[index]except Index Error node Noneelse node Nonepoped 0if node is None and len stack > 1 node index stack pop poped 1return l
def corner peaks image min distance 1 threshold abs None threshold rel 0 1 exclude border True indices True num peaks np inf footprint None labels None peaks peak local max image min distance min distance threshold abs threshold abs threshold rel threshold rel exclude border exclude border indices False num peaks num peaks footprint footprint labels labels if min distance > 0 coords np transpose peaks nonzero for r c in coords if peaks[ r c ] peaks[ r - min distance r + min distance + 1 c - min distance c + min distance + 1 ] Falsepeaks[ r c ] Trueif indices is True return np transpose peaks nonzero else return peaks
@register filterdef external url url return urlresolvers get outgoing url unicode url
def create gs key async filename rpc None if not isinstance filename basestring raise Type Error 'filenamemustbestr %s' % filename if not filename startswith GS PREFIX raise Value Error 'filenamemuststartwith"/gs/" %s' % filename if not '/' in filename[ 4 ] raise Value Error 'filenamemusthavetheformat"/gs/bucket name/object name" %s' % filename request blobstore service pb Create Encoded Google Storage Key Request response blobstore service pb Create Encoded Google Storage Key Response request set filename filename return make async call rpc ' Create Encoded Google Storage Key' request response get result hook lambda rpc rpc response blob key
def test credentials in url auth flag has priority httpbin both url add auth httpbin both url + '/basic-auth/user/password' auth 'user wrong' r http '--auth user password' 'GET' url assert HTTP OK in r assert r json {'authenticated' True 'user' 'user'}
@with setup prepare stdout def test background with header from lettuce import step world@step u'thevariable" \\w+ "holds \\d+ ' def set variable step name value setattr world name int value @step u'thevariable" \\w+ "isequalto \\d+ ' def check variable step name expected expected int expected expect world to have property name being equal expected @step u'thevariable" \\w+ "times \\d+ isequalto \\d+ ' def multiply and verify step name times expected times int times expected int expected getattr world name * times should equal expected filename bg feature name 'header' runner Runner filename verbosity 1 runner run assert stdout lines ' \n 1 feature 1passed \n 2 scenarios 2passed \n 7 steps 7passed \n'
@with setup prepare stdout def test background with header from lettuce import step world@step u'thevariable" \\w+ "holds \\d+ ' def set variable step name value setattr world name int value @step u'thevariable" \\w+ "isequalto \\d+ ' def check variable step name expected expected int expected expect world to have property name being equal expected @step u'thevariable" \\w+ "times \\d+ isequalto \\d+ ' def multiply and verify step name times expected times int times expected int expected getattr world name * times should equal expected filename bg feature name 'header' runner Runner filename verbosity 1 runner run assert stdout lines ' \n 1 feature 1passed \n 2 scenarios 2passed \n 7 steps 7passed \n'
@task@use masterdef fetch icon pk version pk None **kw from mkt extensions models import Extensionextension Extension objects get pk pk if version pk version extension versions get pk version pk else version extension latest public versionicon path version manifest get 'icons' {} get '128 ' '' lstrip '/' if not icon path returnwith private storage open version file path as fd with Zip File fd as zfd icon contents zfd read icon path save icon extension icon contents
def attach userstory statuses queryset as field 'userstory statuses attr' model queryset modelsql '\n SELEC Tjson agg \nrow to json projects userstorystatus \n ORDERB Yprojects userstorystatus order\n \n FRO Mprojects userstorystatus\n WHER Eprojects userstorystatus project id {tbl} id\n'sql sql format tbl model meta db table queryset queryset extra select {as field sql} return queryset
def server security groups request instance id security groups []nclient novaclient request resp body nclient client get '/servers/%s/os-security-groups' % instance id if body sg objs [ Nova Security Group nclient security groups sg loaded True for sg in body get 'security groups' [] ]security groups [ Security Group sg for sg in sg objs]for sg in security groups rule objects [ Security Group Rule rule for rule in sg rules]sg rules rule objectsreturn security groups
def reader macroexpand char tree compiler load macros compiler module name reader macro hy reader[compiler module name] get char if reader macro is None try reader macro hy reader[ None][char]except Key Error raise Hy Type Error char "`{ 0 }'isnotadefinedreadermacro " format char expr reader macro tree return replace hy obj wrap value expr tree
def test system threading tasks temp list range 10000 temp list output [] Parallel For Overloads[ int int System Action[int] ] 0 len temp list lambda x temp list output append x Are Equal len temp list len temp list output temp list output sort Are Equal temp list temp list output temp list range 10000 temp list output [] Parallel For Each xrange 10000 lambda x temp list output append x Are Equal len temp list len temp list output temp list output sort Are Equal temp list temp list output
def create cache timestamp cache path access path os path join cache path CACHE TIMESTAMP FILE if not os path exists access path print u' Writingcachecreationtimestamp'created long time time try with open access path 'w' as f f write str created except Exception as e print u' Erroroccuredwritingcachecreationtimestamp'print e
@verbosedef make ad hoc cov info verbose None info pick info info pick types info meg True eeg True exclude [] info check consistency grad std 5e- 13 mag std 2e- 14 eeg std 2e- 07 logger info ' Usingstandardnoisevalues ME Ggrad %6 1ff T/cm ME Gmag %6 1ff TEEG %6 1fu V ' % 10000000000000 0 * grad std 1000000000000000 0 * mag std 1000000 0 * eeg std data np zeros len info['ch names'] for meg eeg val in zip 'grad' 'mag' False False False True grad std mag std eeg std data[pick types info meg meg eeg eeg ] val * val return Covariance data info['ch names'] info['bads'] info['projs'] nfree 0
def parse params params ignore keys None parsed {}for key in params if ignore keys and key in ignore keys continuevalue params getall key if not value value ''if len value 1 value value[ 0 ]parsed[key] valuereturn parsed
def generate replace result xml result sourcedid score elem Element Maker nsmap { None 'http //www imsglobal org/services/ltiv 1 p 1 /xsd/imsoms v1 p 0 '} xml elem imsx POX Envelope Request elem imsx POX Header elem imsx POX Request Header Info elem imsx version 'V 1 0' elem imsx message Identifier str uuid uuid 4 elem imsx POX Body elem replace Result Request elem result Record elem sourced GUID elem sourced Id result sourcedid elem result elem result Score elem language 'en' elem text String str score return etree tostring xml xml declaration True encoding 'UTF- 8 '
def generate replace result xml result sourcedid score elem Element Maker nsmap { None 'http //www imsglobal org/services/ltiv 1 p 1 /xsd/imsoms v1 p 0 '} xml elem imsx POX Envelope Request elem imsx POX Header elem imsx POX Request Header Info elem imsx version 'V 1 0' elem imsx message Identifier str uuid uuid 4 elem imsx POX Body elem replace Result Request elem result Record elem sourced GUID elem sourced Id result sourcedid elem result elem result Score elem language 'en' elem text String str score return etree tostring xml xml declaration True encoding 'UTF- 8 '
def filter sum dict align dict filter attribute low bound high bound new sum dict FSSP FSSP Sum Dict new align dict copy deepcopy align dict for prot num in sum dict attr value getattr sum dict[prot num] filter attribute if attr value > low bound and attr value < high bound new sum dict[prot num] sum dict[prot num]prot numbers sorted new sum dict for pos num in new align dict abs res dict new align dict abs pos num pos align dict {}for prot num in prot numbers new align dict abs pos num pos align dict[prot num] align dict abs pos num pos align dict[prot num]return new sum dict new align dict
def filter sum dict align dict filter attribute low bound high bound new sum dict FSSP FSSP Sum Dict new align dict copy deepcopy align dict for prot num in sum dict attr value getattr sum dict[prot num] filter attribute if attr value > low bound and attr value < high bound new sum dict[prot num] sum dict[prot num]prot numbers sorted new sum dict for pos num in new align dict abs res dict new align dict abs pos num pos align dict {}for prot num in prot numbers new align dict abs pos num pos align dict[prot num] align dict abs pos num pos align dict[prot num]return new sum dict new align dict
def get account for tenant test auth tenant id return '%s%s' % test auth reseller prefixes[ 0 ] tenant id
def get params mapper spec allowed keys None if 'input reader' not in mapper spec params message " Inputreader'sparametersshouldbespecifiedininput readersubdictionary "if allowed keys raise errors Bad Reader Params Error message params mapper spec paramsparams dict str n v for n v in params iteritems else if not isinstance mapper spec params get 'input reader' dict raise errors Bad Reader Params Error ' Inputreaderparametersshouldbeadictionary' params mapper spec params get 'input reader' params dict str n v for n v in params iteritems if allowed keys params diff set params keys - allowed keys if params diff raise errors Bad Reader Params Error ' Invalidinput readerparameters %s' % ' ' join params diff return params
def check if doc is linked doc method u' Delete' from frappe model rename doc import get link fieldslink fields get link fields doc doctype link fields [[lf[u'parent'] lf[u'fieldname'] lf[u'issingle']] for lf in link fields]for link dt link field issingle in link fields if not issingle for item in frappe db get values link dt {link field doc name} [u'name' u'parent' u'parenttype' u'docstatus'] as dict True if item and item parent or item name doc name and method u' Delete' and item docstatus < 2 or method u' Cancel' and item docstatus 1 frappe throw u' Cannotdeleteorcancelbecause{ 0 }<ahref "# Form/{ 0 }/{ 1 }">{ 1 }</a>islinkedwith{ 2 }<ahref "# Form/{ 2 }/{ 3 }">{ 3 }</a>' format doc doctype doc name item parenttype if item parent else link dt item parent or item name frappe Link Exists Error
def oauth signature consumer token method url parameters {} token None parts urlparse urlparse url scheme netloc path parts[ 3]normalized url scheme lower + ' //' + netloc lower + path base elems []base elems append method upper base elems append normalized url base elems append '&' join '%s %s' % k oauth escape str v for k v in sorted parameters items base string '&' join oauth escape e for e in base elems key elems [escape utf 8 consumer token['secret'] ]key elems append escape utf 8 token['secret'] if token else '' key '&' join key elems hash hmac new key escape utf 8 base string hashlib sha 1 return binascii b2 a base 64 hash digest [ -1 ]
def is option value selected browser query value select Select browser query first results[ 0 ] ddl selected value select first selected option get attribute 'value' return ddl selected value value
def Expand Directories filenames expanded set for filename in filenames if not os path isdir filename expanded add filename continuefor root files in os walk filename for loopfile in files fullname os path join root loopfile if fullname startswith ' ' + os path sep fullname fullname[len ' ' + os path sep ]expanded add fullname filtered []for filename in expanded if os path splitext filename [1 ][ 1 ] in Get All Extensions filtered append filename return filtered
def Expand Directories filenames expanded set for filename in filenames if not os path isdir filename expanded add filename continuefor root files in os walk filename for loopfile in files fullname os path join root loopfile if fullname startswith ' ' + os path sep fullname fullname[len ' ' + os path sep ]expanded add fullname filtered []for filename in expanded if os path splitext filename [1 ][ 1 ] in Get All Extensions filtered append filename return filtered
def lstrip s chars None return s lstrip chars
def quantile data quantile index quantile * len data - 1 bottom index int floor index top index int ceil index difference index - bottom index output 1 - difference * data[bottom index] + difference * data[top index] return output
def quantile data quantile index quantile * len data - 1 bottom index int floor index top index int ceil index difference index - bottom index output 1 - difference * data[bottom index] + difference * data[top index] return output
def set global registry registry entry point group ' default' global GLOBAL REGISTR Ylog debug "'set global registry '-settingregistry " GLOBAL REGISTRY[entry point group] registry
def get Interpret Plugins Path sub Name '' return get Joined Path get Fabmetheus Tools Path 'interpret plugins' sub Name
def stat mode to index mode mode if S ISLNK mode return S IFLN Kif S ISDIR mode or S IFMT mode S IFGITLINK return S IFGITLIN Kreturn S IFREG 420 mode & 73
def jclouds registry xml parent data deployer XML Sub Element xml parent 'jenkins plugins jclouds blobstore Blob Store Publisher' if 'profile' not in data raise Jenkins Jobs Exception 'profileparameterismissing' XML Sub Element deployer 'profile Name' text data get 'profile' entries XML Sub Element deployer 'entries' deployer entry XML Sub Element entries 'jenkins plugins jclouds blobstore Blob Store Entry' try XML Sub Element deployer entry 'container' text data['container']XML Sub Element deployer entry 'path' text data get 'basedir' '' XML Sub Element deployer entry 'source File' text data['files']except Key Error as e raise Jenkins Jobs Exception "blobstorerequires'%s'tobeset" % e args[ 0 ] XML Sub Element deployer entry 'keep Hierarchy' text str data get 'hierarchy' False lower
def jclouds registry xml parent data deployer XML Sub Element xml parent 'jenkins plugins jclouds blobstore Blob Store Publisher' if 'profile' not in data raise Jenkins Jobs Exception 'profileparameterismissing' XML Sub Element deployer 'profile Name' text data get 'profile' entries XML Sub Element deployer 'entries' deployer entry XML Sub Element entries 'jenkins plugins jclouds blobstore Blob Store Entry' try XML Sub Element deployer entry 'container' text data['container']XML Sub Element deployer entry 'path' text data get 'basedir' '' XML Sub Element deployer entry 'source File' text data['files']except Key Error as e raise Jenkins Jobs Exception "blobstorerequires'%s'tobeset" % e args[ 0 ] XML Sub Element deployer entry 'keep Hierarchy' text str data get 'hierarchy' False lower
def Open Path With Stub path stub from six moves import http clientif not hasattr stub 'scheme' raise vmodl fault Not Supported elif stub scheme http client HTTP Connection protocol 'http'elif stub scheme http client HTTPS Connection protocol 'https'else raise vmodl fault Not Supported host Port stub hosturl '%s //%s%s' % protocol host Port path headers {}if stub cookie headers[' Cookie'] stub cookiereturn requests get url headers headers verify False
def Open Path With Stub path stub from six moves import http clientif not hasattr stub 'scheme' raise vmodl fault Not Supported elif stub scheme http client HTTP Connection protocol 'http'elif stub scheme http client HTTPS Connection protocol 'https'else raise vmodl fault Not Supported host Port stub hosturl '%s //%s%s' % protocol host Port path headers {}if stub cookie headers[' Cookie'] stub cookiereturn requests get url headers headers verify False
def virtual if HAS HEAT and HAS OSLO return 'heat'return False ' Theheatexecutionmodulecannotbeloaded theheatclientandoslo serializationpythonlibraryisnotavailable '
def add existing tag tag name tag manager tag Tag objects get name iexact tag name tag manager add tag return tag name
def optimal mode data if data isdigit return MODE NUMBE Rif RE ALPHA NUM match data return MODE ALPHA NU Mreturn MODE 8BIT BYTE
def check classification targets y y type type of target y if y type not in ['binary' 'multiclass' 'multiclass-multioutput' 'multilabel-indicator' 'multilabel-sequences'] raise Value Error ' Unknownlabeltype %r' % y type
def unwrap dict dictionary index string index index string split ' ' for k in index dictionary dictionary[k]return dictionary
def libvlc audio get track p mi f Cfunctions get 'libvlc audio get track' None or Cfunction 'libvlc audio get track' 1 None ctypes c int Media Player return f p mi
def build narrow filter narrow check supported events narrow filter narrow def narrow filter event message event['message']flags event['flags']for element in narrow operator element[ 0 ]operand element[ 1 ]if operator 'stream' if message['type'] 'stream' return Falseif operand lower message['display recipient'] lower return Falseelif operator 'topic' if message['type'] 'stream' return Falseif operand lower message['subject'] lower return Falseelif operator 'sender' if operand lower message['sender email'] lower return Falseelif operator 'is' and operand 'private' if message['type'] 'private' return Falseelif operator 'is' and operand in ['starred'] if operand not in flags return Falseelif operator 'is' and operand in ['alerted' 'mentioned'] if 'mentioned' not in flags return Falsereturn Truereturn narrow filter
def create program action parent text name icon None nt name None if is text string icon icon get icon icon if os name 'nt' and nt name is not None name nt namepath programs find program name if path is not None return create action parent text icon icon triggered lambda programs run program name
def test find number 0 r find number 'sss' assert r is None
def test find number 0 r find number 'sss' assert r is None
@register simple tag takes context True def avatar context user size service id None service avatar services for user user service id if service is None logging error u' Couldnotgetasuitableavatarserviceforuser%s ' user return mark safe u'' return service render request context[u'request'] user user size size
def disabled name **kwargs ret {'name' name 'changes' {} 'result' True 'comment' ''}ret update disable name None **kwargs return ret
def alternatives *rules def alternatives integral alts []for rule in rules result rule integral if result and not isinstance result Dont Know Rule and result integral and result not in alts alts append result if len alts 1 return alts[ 0 ]elif alts doable [rule for rule in alts if not contains dont know rule ]if doable return Alternative Rule doable *integral else return Alternative Rule alts *integral return alternatives
@XFAI Ldef test bounded xfail assert ask Q finite sin x ** x is True assert ask Q finite cos x ** x is True
@XFAI Ldef test bounded xfail assert ask Q finite sin x ** x is True assert ask Q finite cos x ** x is True
def force drop names *names from import configfrom sqlalchemy import inspect@decoratordef go fn *args **kw try return fn *args **kw finally drop all tables config db inspect config db include names names return go
def force drop names *names from import configfrom sqlalchemy import inspect@decoratordef go fn *args **kw try return fn *args **kw finally drop all tables config db inspect config db include names names return go
def challenge crap ''for x in range random randrange 15 25 crap crap + chr random randint 65 90 crap md 5 crap digest return crap
def extract link from header simple http response header name header value if not header value raise Stop Iterationtry yield http response get url url join header value except Value Error msg ' Theapplicationsenta"%s"headerthatw 3 affailedtocorrectlyparseasan URL theheadervaluewas "%s"'om out debug msg % header name header value
def get file path dest saltenv 'base' makedirs False template None gzip None if gzip is not None log warning ' Thegzipargumenttocp get fileinsalt-sshisunsupported' if template is not None path dest render filenames path dest saltenv template src context ['fileclient'] cache file path saltenv cachedir os path join 'salt-ssh' salt kwargs['id '] single salt client ssh Single opts '' ** salt kwargs ret single shell send src dest makedirs return not ret[ 2 ]
def Imgt Iterator handle return Imgt Scanner debug 0 parse records handle
def multiple file DA fit ZIG input dir output dir mapping fp mapping category subcategory 1 subcategory 2 if not exists output dir makedirs output dir file names [fname for fname in listdir input dir if not fname startswith ' ' or isdir fname ]for fname in file names base fname ext splitext fname original fname base fname + ' biom' hdf 5 infile join input dir original fname tmp bt load table hdf 5 infile tmp pmf parse mapping file to dict mapping fp check mapping file category tmp bt mapping fp mapping category subcategory 1 subcategory 2 tmp bt add metadata tmp pmf 'sample' outfile join output dir 'fit ZIG DA ' + base fname + ' txt' with tempfile Named Temporary File dir get qiime temp dir prefix 'QIIME-differential-abundance-temp-table-' suffix ' biom' as temp fh temp fh write tmp bt to json 'for R' temp fh flush run fit ZIG temp fh name outfile mapping category subcategory 1 subcategory 2
@pytest mark skipif u'not HAS SCIPY' def test fit with bound constraints estimate jacobian class My Model Fittable 1 D Model a Parameter default 1 b Parameter default 2 @staticmethoddef evaluate x a b return a * x + b m real My Model a 1 5 b -3 x np arange 100 y m real x m My Model f fitting Lev Mar LSQ Fitter fitted 1 f m x y assert np allclose fitted 1 a 1 5 assert np allclose fitted 1 b -3 m2 My Model m2 a bounds -2 2 f2 fitting Lev Mar LSQ Fitter fitted 2 f2 m2 x y assert np allclose fitted 1 a 1 5 assert np allclose fitted 1 b -3 assert np any f2 fit info[u'fjac'] 0
@pytest mark skipif u'not HAS SCIPY' def test fit with bound constraints estimate jacobian class My Model Fittable 1 D Model a Parameter default 1 b Parameter default 2 @staticmethoddef evaluate x a b return a * x + b m real My Model a 1 5 b -3 x np arange 100 y m real x m My Model f fitting Lev Mar LSQ Fitter fitted 1 f m x y assert np allclose fitted 1 a 1 5 assert np allclose fitted 1 b -3 m2 My Model m2 a bounds -2 2 f2 fitting Lev Mar LSQ Fitter fitted 2 f2 m2 x y assert np allclose fitted 1 a 1 5 assert np allclose fitted 1 b -3 assert np any f2 fit info[u'fjac'] 0
@pytest mark skipif u'not HAS SCIPY' def test fit with bound constraints estimate jacobian class My Model Fittable 1 D Model a Parameter default 1 b Parameter default 2 @staticmethoddef evaluate x a b return a * x + b m real My Model a 1 5 b -3 x np arange 100 y m real x m My Model f fitting Lev Mar LSQ Fitter fitted 1 f m x y assert np allclose fitted 1 a 1 5 assert np allclose fitted 1 b -3 m2 My Model m2 a bounds -2 2 f2 fitting Lev Mar LSQ Fitter fitted 2 f2 m2 x y assert np allclose fitted 1 a 1 5 assert np allclose fitted 1 b -3 assert np any f2 fit info[u'fjac'] 0
@pytest mark skipif u'not HAS SCIPY' def test fit with bound constraints estimate jacobian class My Model Fittable 1 D Model a Parameter default 1 b Parameter default 2 @staticmethoddef evaluate x a b return a * x + b m real My Model a 1 5 b -3 x np arange 100 y m real x m My Model f fitting Lev Mar LSQ Fitter fitted 1 f m x y assert np allclose fitted 1 a 1 5 assert np allclose fitted 1 b -3 m2 My Model m2 a bounds -2 2 f2 fitting Lev Mar LSQ Fitter fitted 2 f2 m2 x y assert np allclose fitted 1 a 1 5 assert np allclose fitted 1 b -3 assert np any f2 fit info[u'fjac'] 0
@pytest mark skipif u'not HAS SCIPY' def test fit with bound constraints estimate jacobian class My Model Fittable 1 D Model a Parameter default 1 b Parameter default 2 @staticmethoddef evaluate x a b return a * x + b m real My Model a 1 5 b -3 x np arange 100 y m real x m My Model f fitting Lev Mar LSQ Fitter fitted 1 f m x y assert np allclose fitted 1 a 1 5 assert np allclose fitted 1 b -3 m2 My Model m2 a bounds -2 2 f2 fitting Lev Mar LSQ Fitter fitted 2 f2 m2 x y assert np allclose fitted 1 a 1 5 assert np allclose fitted 1 b -3 assert np any f2 fit info[u'fjac'] 0
@world absorbdef css has text css selector text index 0 strip False if text wait for lambda css text css selector index index actual text css text css selector index index if strip actual text actual text strip text text strip return actual text text
def make colorizer color def inner text return colorizer colorize color text return inner
def my kernel X Y M np array [[ 2 0] [0 1 0]] return np dot np dot X M Y T
def Find Next Matching Angle Bracket clean lines linenum init suffix line init suffixnesting stack ['<']while True match Search '^[^<> \\[\\]]* [<> \\[\\]] * $' line if match operator match group 1 line match group 2 if nesting stack[ -1 ] '<' if operator in '<' ' ' '[' nesting stack append operator elif operator '>' nesting stack pop if not nesting stack return Trueelif operator ' ' return Trueelse return Falseelif operator in '<' ' ' '[' nesting stack append operator elif operator in ' ' ']' nesting stack pop else linenum + 1if linenum > len clean lines elided breakline clean lines elided[linenum]return True
def sdm LM f return f[ 0 ][ 0 ]
def is comprehensive theming enabled if settings ENABLE COMPREHENSIVE THEMING and current request has associated site theme return Trueif microsite is request in microsite return Falsereturn settings ENABLE COMPREHENSIVE THEMING
def main args parse args client N So T Inventory if args list print client do list elif args host print client do host args host
def make next param login url current url l urlparse login url c urlparse current url if not l scheme or l scheme c scheme and not l netloc or l netloc c netloc return urlunparse '' '' c path c params c query '' return current url
def make next param login url current url l urlparse login url c urlparse current url if not l scheme or l scheme c scheme and not l netloc or l netloc c netloc return urlunparse '' '' c path c params c query '' return current url
def allow new attributes f def decorated self *args **kw ' Thedecoratedfunctionthatreplaces init or setstate \n\n'if not hasattr self ' can Add Attributes' self dict [' can Add Attributes'] 1else self can Add Attributes + 1assert self can Add Attributes > 1 count self can Add Attributesf self *args **kw if hasattr self ' can Add Attributes' self can Add Attributes - 1else self can Add Attributes count - 1 assert self can Add Attributes > 0 if self can Add Attributes 0 del self can Add Attributesdecorated doc f doc decorated name f name return decorated
def allow new attributes f def decorated self *args **kw ' Thedecoratedfunctionthatreplaces init or setstate \n\n'if not hasattr self ' can Add Attributes' self dict [' can Add Attributes'] 1else self can Add Attributes + 1assert self can Add Attributes > 1 count self can Add Attributesf self *args **kw if hasattr self ' can Add Attributes' self can Add Attributes - 1else self can Add Attributes count - 1 assert self can Add Attributes > 0 if self can Add Attributes 0 del self can Add Attributesdecorated doc f doc decorated name f name return decorated
def allow new attributes f def decorated self *args **kw ' Thedecoratedfunctionthatreplaces init or setstate \n\n'if not hasattr self ' can Add Attributes' self dict [' can Add Attributes'] 1else self can Add Attributes + 1assert self can Add Attributes > 1 count self can Add Attributesf self *args **kw if hasattr self ' can Add Attributes' self can Add Attributes - 1else self can Add Attributes count - 1 assert self can Add Attributes > 0 if self can Add Attributes 0 del self can Add Attributesdecorated doc f doc decorated name f name return decorated
def get data for unfinished jobs unfinished job models job models Job Model get all unfinished jobs NUM JOBS IN DASHBOARD LIMIT return [ get job dict from job model model for model in unfinished job models]
def get data for unfinished jobs unfinished job models job models Job Model get all unfinished jobs NUM JOBS IN DASHBOARD LIMIT return [ get job dict from job model model for model in unfinished job models]
def core from fabtools require deb import package as require deb packagefrom fabtools require rpm import package as require rpm packagefamily distrib family if not files exists '/usr/bin/sudo' raise Exception ' Pleaseinstallthesudopackageandexecuteadduser%ssudo' % env user if not files exists '/usr/bin/docker' if family 'debian' require deb package 'curl' elif family 'redhat' require rpm package 'curl' else raise Unsupported Family supported ['debian' 'redhat'] run as root 'curl-s S Lhttps //get docker com/ sh'
def show highstate opts ['grains'] grains st salt client ssh state SSH High State opts pillar salt context ['fileclient'] return st compile highstate
def abbreviate text threshold if text is not None and len text > threshold text text[ threshold] + ' ' return text
def abbreviate text threshold if text is not None and len text > threshold text text[ threshold] + ' ' return text
def abbreviate text threshold if text is not None and len text > threshold text text[ threshold] + ' ' return text
def mac str to bytes mac str if len mac str 12 passelif len mac str 17 sep mac str[ 2 ]mac str mac str replace sep '' else raise Value Error ' Invalid MA Caddress' if six PY 3 mac bytes bytes int mac str[s s + 2 ] 16 for s in range 0 12 2 else mac bytes '' join chr int mac str[s s + 2 ] 16 for s in range 0 12 2 return mac bytes
def convert asset timestamp fields dict for key in asset timestamp fields & viewkeys dict value pd Timestamp dict [key] tz 'UTC' dict [key] None if isnull value else value return dict
def check freezing date posting date adv adj False if not adv adj acc frozen upto frappe db get value u' Accounts Settings' None u'acc frozen upto' if acc frozen upto frozen accounts modifier frappe db get value u' Accounts Settings' None u'frozen accounts modifier' if getdate posting date < getdate acc frozen upto and not frozen accounts modifier in frappe get roles frappe throw u' Youarenotauthorizedtoaddorupdateentriesbefore{ 0 }' format formatdate acc frozen upto
def check freezing date posting date adv adj False if not adv adj acc frozen upto frappe db get value u' Accounts Settings' None u'acc frozen upto' if acc frozen upto frozen accounts modifier frappe db get value u' Accounts Settings' None u'frozen accounts modifier' if getdate posting date < getdate acc frozen upto and not frozen accounts modifier in frappe get roles frappe throw u' Youarenotauthorizedtoaddorupdateentriesbefore{ 0 }' format formatdate acc frozen upto
def check freezing date posting date adv adj False if not adv adj acc frozen upto frappe db get value u' Accounts Settings' None u'acc frozen upto' if acc frozen upto frozen accounts modifier frappe db get value u' Accounts Settings' None u'frozen accounts modifier' if getdate posting date < getdate acc frozen upto and not frozen accounts modifier in frappe get roles frappe throw u' Youarenotauthorizedtoaddorupdateentriesbefore{ 0 }' format formatdate acc frozen upto
def read token file filename f open filename return f readline strip f readline strip
def determine timestamp item for key in ['creation Timestamp' 'time Created'] if key in item return item[key]raise Value Error ' Couldnotdeterminetimestampkeyfor{ 0 }' format item get 'kind' item
def optional args decorator @wraps decorator def wrapper *args **kwargs def dec f return decorator f *args **kwargs is decorating not kwargs and len args 1 and callable args[ 0 ] if is decorating f args[ 0 ]args []return dec f else return decreturn wrapper
def optional args decorator @wraps decorator def wrapper *args **kwargs def dec f return decorator f *args **kwargs is decorating not kwargs and len args 1 and callable args[ 0 ] if is decorating f args[ 0 ]args []return dec f else return decreturn wrapper
def open cgi params None get 1 from Bio py 3 k import urlopen urlencodeif params is None params {}options urlencode params if get if options cgi + '?' + options handle urlopen cgi else handle urlopen cgi data options return handle
def open cgi params None get 1 from Bio py 3 k import urlopen urlencodeif params is None params {}options urlencode params if get if options cgi + '?' + options handle urlopen cgi else handle urlopen cgi data options return handle
def check marshalled restart policy test case policy type **attributes expected name FLOCKER RESTART POLICY POLICY TO NAME[policy type]test case assert Equal dict name expected name **attributes marshalled restart policy policy type **attributes
def find duplicative certs config domains def update certs for domain matches candidate lineage rv ' Returncertasidentical names certifitmatches \norsubset names certifitmatchesassubset\n' identical names cert subset names cert rvcandidate names set candidate lineage names if candidate names set domains identical names cert candidate lineageelif candidate names issubset set domains if subset names cert is None subset names cert candidate lineageelif len candidate names > len subset names cert names subset names cert candidate lineagereturn identical names cert subset names cert return search lineages config update certs for domain matches None None
def find duplicative certs config domains def update certs for domain matches candidate lineage rv ' Returncertasidentical names certifitmatches \norsubset names certifitmatchesassubset\n' identical names cert subset names cert rvcandidate names set candidate lineage names if candidate names set domains identical names cert candidate lineageelif candidate names issubset set domains if subset names cert is None subset names cert candidate lineageelif len candidate names > len subset names cert names subset names cert candidate lineagereturn identical names cert subset names cert return search lineages config update certs for domain matches None None
def map int to tour num nodes i start node nodes remaining range 0 start node + range start node + 1 num nodes tour []while len nodes remaining > 0 num nodes len nodes remaining next step nodes remaining[ i % num nodes ]nodes remaining remove next step tour append next step i i / num nodes tour [start node] + tour + [start node] return tour
def map int to tour num nodes i start node nodes remaining range 0 start node + range start node + 1 num nodes tour []while len nodes remaining > 0 num nodes len nodes remaining next step nodes remaining[ i % num nodes ]nodes remaining remove next step tour append next step i i / num nodes tour [start node] + tour + [start node] return tour
def pkcs ilen n i 0while n > 0 n >> 8i + 1return i
def pkcs ilen n i 0while n > 0 n >> 8i + 1return i
def open filename buffer builtins open filename 'rb' encoding lines detect encoding buffer readline buffer seek 0 text Text IO Wrapper buffer encoding line buffering True text mode 'r'return text
def open filename buffer builtins open filename 'rb' encoding lines detect encoding buffer readline buffer seek 0 text Text IO Wrapper buffer encoding line buffering True text mode 'r'return text
def get Clipped Simplified Loop Path clip loop Path radius return get Simplified Path get Clipped Loop Path clip loop Path radius
def assemble block return [ '\n' join sub block + '\n' for sub block in block]
def simple cmd cmd app url 'http //localhost 8080 /manager' timeout 180 try opts {'path' app 'version' ls url [app]['version']}return '\n' join wget cmd opts url timeout timeout ['msg'] except Exception return 'FAIL- Nocontextexistsforpath{ 0 }' format app
def from units val val str val strip upper if val '- 1 ' return valm RE UNITS search val if m if m group 2 val float m group 1 unit m group 2 n 0while unit TAB UNITS[n] val val * 1024 0 n n + 1 else val m group 1 try return float val except return 0 0else return 0 0
def get uid path follow symlinks True return stats os path expanduser path follow symlinks follow symlinks get 'uid' -1
def autoregister admin model follow None if model meta proxy raise Registration Error ' Proxymodelscannotbeusedwithdjango-reversion registertheparentclassinstead' if not is registered model follow follow or [] for parent cls field in model meta parents items follow append field name autoregister admin parent cls register model follow follow format admin reversion format
@snippetdef client list entries client to delete for entry in client list entries do something with entry FILTER 'log Name log name AN Dtext Payload simple'for entry in client list entries filter FILTER do something with entry from google cloud logging import DESCENDIN Gfor entry in client list entries order by DESCENDING do something with entry iterator client list entries pages iterator pagespage 1 next pages for entry in page 1 do something with entry page 2 next pages for entry in page 2 do something with entry
def weighted score raw earned raw possible weight assert raw possible is not None cannot compute with weight weight is None or raw possible 0 if cannot compute with weight return raw earned raw possible else return float raw earned * weight / raw possible float weight
def register draft only model class fields follow format if revision manager is registered model class raise Registration Error '%rhasalreadybeenregisteredwith Reversion ' % model class if model class meta proxy and not revision manager is registered list model class meta parents keys [0 ] raise Registration Error '%risaproxymodel anditsparenthasnotbeenregisteredwith Reversion ' % model class opts model class metalocal fields opts local fields + opts local many to many if fields is None fields [field name for field in local fields]fields tuple fields follow tuple follow try registration info Version Adapter fields fields follow follow format format for concrete model True ignore duplicates False except Type Error registration info Version Adapter model class registration info fields fieldsregistration info follow followregistration info format formatif hasattr revision manager ' registration key for model' model key revision manager registration key for model model class else model key model classrevision manager registered models[model key] registration info
def register draft only model class fields follow format if revision manager is registered model class raise Registration Error '%rhasalreadybeenregisteredwith Reversion ' % model class if model class meta proxy and not revision manager is registered list model class meta parents keys [0 ] raise Registration Error '%risaproxymodel anditsparenthasnotbeenregisteredwith Reversion ' % model class opts model class metalocal fields opts local fields + opts local many to many if fields is None fields [field name for field in local fields]fields tuple fields follow tuple follow try registration info Version Adapter fields fields follow follow format format for concrete model True ignore duplicates False except Type Error registration info Version Adapter model class registration info fields fieldsregistration info follow followregistration info format formatif hasattr revision manager ' registration key for model' model key revision manager registration key for model model class else model key model classrevision manager registered models[model key] registration info
def doc checksum docstr import hashlibconverted hashlib sha 1 docstr hexdigest return converted
def check orphans no tips cursor orphans with tips cursor all '\n WIT Hvalid tips AS SELECT*FRO Mcurrent tips WHER Eamount> 0 \n SELEC Tusername\n FROM SELEC Ttipper A Susername FRO Mvalid tips\n UNION\n SELEC Ttippee A Susername FRO Mvalid tips foo\n WHERENOTEXISTS SELECT 1 FRO Melsewhere WHER Eparticipant username \n' assert len orphans with tips 0 orphans with tips
def check orphans no tips cursor orphans with tips cursor all '\n WIT Hvalid tips AS SELECT*FRO Mcurrent tips WHER Eamount> 0 \n SELEC Tusername\n FROM SELEC Ttipper A Susername FRO Mvalid tips\n UNION\n SELEC Ttippee A Susername FRO Mvalid tips foo\n WHERENOTEXISTS SELECT 1 FRO Melsewhere WHER Eparticipant username \n' assert len orphans with tips 0 orphans with tips
def check orphans no tips cursor orphans with tips cursor all '\n WIT Hvalid tips AS SELECT*FRO Mcurrent tips WHER Eamount> 0 \n SELEC Tusername\n FROM SELEC Ttipper A Susername FRO Mvalid tips\n UNION\n SELEC Ttippee A Susername FRO Mvalid tips foo\n WHERENOTEXISTS SELECT 1 FRO Melsewhere WHER Eparticipant username \n' assert len orphans with tips 0 orphans with tips
def search channel tag key None category None return Channel objects get by tag key key category category
def instantiate Shoot Errback d defer Deferred try 1 / 0 except d errback d add Errback lambda x None
def parse sample id map sample id map f result {}new samp id counts defaultdict int for line in sample id map f line line strip if line samp id mapped id line split ' DCTB ' if samp id in result raise Value Error " Thefirstcolumnofthesample I Dmapmustcontainuniquesample I Ds '%s'isrepeated Thesecondcolumn however maycontainrepeats " % samp id elif new samp id counts[mapped id] > 2 raise Value Error " Onlytwooriginalsample I Dsmaymaptothesamenewsample ID Thenewsample ID'%s'hasmorethantwosample I Dsmappingtoit " % mapped id else result[samp id] mapped idnew samp id counts[mapped id] + 1return result
def rgrids *args **kwargs ax gca if not isinstance ax Polar Axes raise Runtime Error 'rgridsonlydefinedforpolaraxes' if len args 0 lines ax yaxis get ticklines labels ax yaxis get ticklabels else lines labels ax set rgrids *args **kwargs draw if interactive return silent list ' Line 2 Drgridline' lines silent list ' Textrgridlabel' labels
def verify checksums filename errors 0try hdulist fits open filename checksum OPTIONS checksum kind except User Warning as w remainder ' ' + '' join str w split '' [1 ] strip log warning 'BAD{ r}{}' format filename remainder return 1if not OPTIONS ignore missing for i hdu in enumerate hdulist if not hdu checksum log warning 'MISSING{ r} Checksumnotfoundin HDU#{}' format filename i return 1if not hdu datasum log warning 'MISSING{ r} Datasumnotfoundin HDU#{}' format filename i return 1if not errors log info 'OK{ r}' format filename return errors
def verify checksums filename errors 0try hdulist fits open filename checksum OPTIONS checksum kind except User Warning as w remainder ' ' + '' join str w split '' [1 ] strip log warning 'BAD{ r}{}' format filename remainder return 1if not OPTIONS ignore missing for i hdu in enumerate hdulist if not hdu checksum log warning 'MISSING{ r} Checksumnotfoundin HDU#{}' format filename i return 1if not hdu datasum log warning 'MISSING{ r} Datasumnotfoundin HDU#{}' format filename i return 1if not errors log info 'OK{ r}' format filename return errors
def Set Thread Name thread name thread set Name '[%s %s]' % Global Process Type name
def set key value profile None db get db profile return db save {' id' uuid 4 hex key value}
def Id To Counter k if k > MAX SCATTERED ID return 0 SCATTERED elif k > MAX SEQUENTIAL ID and k < MAX SCATTERED ID return long Reverse Bits Int 64 k >> SCATTER SHIFT SCATTERED elif k > 0 return long k SEQUENTIAL else raise datastore errors Bad Argument Error 'invalidid %d ' % k
def Id To Counter k if k > MAX SCATTERED ID return 0 SCATTERED elif k > MAX SEQUENTIAL ID and k < MAX SCATTERED ID return long Reverse Bits Int 64 k >> SCATTER SHIFT SCATTERED elif k > 0 return long k SEQUENTIAL else raise datastore errors Bad Argument Error 'invalidid %d ' % k
def ensure pr fetch modified Falseremotes git remote splitlines if u'edx' not in remotes git remote u'add' u'edx' u'https //github com/edx/edx-platform git' modified Trueedx fetches git config u'remote edx fetch' get all True splitlines pr fetch u'+refs/pull/*/head refs/remotes/edx/pr/*'if pr fetch not in edx fetches git config u'remote edx fetch' pr fetch add True modified Truegit fetch u'edx' return modified
def ensure pr fetch modified Falseremotes git remote splitlines if u'edx' not in remotes git remote u'add' u'edx' u'https //github com/edx/edx-platform git' modified Trueedx fetches git config u'remote edx fetch' get all True splitlines pr fetch u'+refs/pull/*/head refs/remotes/edx/pr/*'if pr fetch not in edx fetches git config u'remote edx fetch' pr fetch add True modified Truegit fetch u'edx' return modified
def ensure pr fetch modified Falseremotes git remote splitlines if u'edx' not in remotes git remote u'add' u'edx' u'https //github com/edx/edx-platform git' modified Trueedx fetches git config u'remote edx fetch' get all True splitlines pr fetch u'+refs/pull/*/head refs/remotes/edx/pr/*'if pr fetch not in edx fetches git config u'remote edx fetch' pr fetch add True modified Truegit fetch u'edx' return modified
def ensure pr fetch modified Falseremotes git remote splitlines if u'edx' not in remotes git remote u'add' u'edx' u'https //github com/edx/edx-platform git' modified Trueedx fetches git config u'remote edx fetch' get all True splitlines pr fetch u'+refs/pull/*/head refs/remotes/edx/pr/*'if pr fetch not in edx fetches git config u'remote edx fetch' pr fetch add True modified Truegit fetch u'edx' return modified
def idna Bytes text try import idnaexcept Import Error return text encode 'idna' else return idna encode text
def dvi match query body id ptable s3 db pr personntable s3 db pr notebtable s3 db dvi bodyquery ptable deleted False & ptable missing True & ntable pe id ptable pe id & ntable status 1 body btable[body id]if not body return queryif body date of recovery q ntable timestmp < body date of recovery ntable timestmp None query query & q if body age group and body age group 1 q ptable age group None ptable age group 1 ptable age group body age group query query & q if body gender and body gender 1 q ptable gender None ptable gender 1 ptable gender body gender return query
def get Interpret Plugin file Name import Plugin File Names get Import Plugin File Names for import Plugin File Name in import Plugin File Names file Type Dot ' ' + import Plugin File Name if file Name[ - len file Type Dot ] lower file Type Dot import Plugins Directory Path get Plugins Directory Path plugin Module archive get Module With Directory Path import Plugins Directory Path import Plugin File Name if plugin Module None return plugin Moduleprint ' Couldnotfindplugintohandle' + file Name return None
def from XM Lname string retval sub ' xFFFF ' '' string def fun matchobj return from Unicode Hex matchobj group 0 retval sub ' x[ 0 - 9 A- Za-z]+ ' fun retval return retval
def main ip addr raw input 'I Paddress ' ip addr ip addr strip username 'pyclass'password getpass getpass remote conn telnet connect ip addr output login remote conn username password time sleep 1 remote conn read very eager disable paging remote conn output send command remote conn 'showipintbrief' print '\n\n'print outputprint '\n\n'remote conn close
def remove job submit sidebar box apps schema editor Box apps get model u'boxes' u' Box' try submit box Box objects get label u'jobs-submitajob' submit box delete except Box Does Not Exist pass
def keygen callback return
def keygen callback return
def xticks *args **kwargs ax gca if len args 0 locs ax get xticks labels ax get xticklabels elif len args 1 locs ax set xticks args[ 0 ] labels ax get xticklabels elif len args 2 locs ax set xticks args[ 0 ] labels ax set xticklabels args[ 1 ] **kwargs else raise Type Error ' Illegalnumberofargumentstoxticks' if len kwargs for l in labels l update kwargs draw if interactive return locs silent list ' Textxticklabel' labels
def named Object name class Split name split ' ' module named Module ' ' join class Split[ -1 ] return getattr module class Split[ -1 ]
def chain transports *args if len args < 2 raise Value Error 'chain transportsneedsatleast 2 transports ' class Wrapped Transport Transport Wrapper cls chain list args return Wrapped Transport
def chain transports *args if len args < 2 raise Value Error 'chain transportsneedsatleast 2 transports ' class Wrapped Transport Transport Wrapper cls chain list args return Wrapped Transport
def get sprot raw id return urlopen 'http //www uniprot org/uniprot/%s txt' % id
def mofile mofile **kwargs return pofile or mofile mofile 'mofile' **kwargs
def build regex range ws True invert False exclude None if exclude is None exclude []regex ''in range Falselast Nonelast added Nonedef valid char char if char in exclude result Falseelif ws result is printable char else result is printable char and unicodedata category char ' Zs' if invert is True return not result return resultfor c in get all chars if valid char c if not in range regex + re escape c last added cin range Trueelse if in range and last last added regex + '-' + re escape last in range Falselast celse if in range regex + '-' + re escape c return regex
def submit jobs commands prefix qiime config load qiime config CLUSTER JOBS SCRIPT qiime config['cluster jobs fp']if not CLUSTER JOBS SCRIPT raise Application Not Found Error 'cluster jobs fpnotsetinconfigfile ' if not exists CLUSTER JOBS SCRIPT or which CLUSTER JOBS SCRIPT raise Application Not Found Error 'cluster jobs fpnotin$PAT Horprovidedasfullpath ' outfilename join get qiime temp dir '%s commands txt' % prefix fh open outfilename 'w' fh write '\n' join commands fh close cmd '%s-ms%s%s' % CLUSTER JOBS SCRIPT outfilename prefix system cmd remove outfilename
def gemset list ruby 'default' runas None gemsets []output rvm do ruby ['rvm' 'gemset' 'list'] runas runas if output regex re compile '^ [^]+ ' for line in output splitlines match regex match line if match gemsets append match group 1 return gemsets
def merge a b check steps a b return range min a start b start max a stop b stop
def get all eip addresses addresses None allocation ids None region None key None keyid None profile None return [x public ip for x in get all eip addresses addresses allocation ids region key keyid profile ]
def find first level groups span string enclosing opening closing enclosingdepth []result []for i c in enumerate string if c opening depth append i elif c closing try start depth pop end iif not depth result append start end + 1 except Index Error passreturn result
def process bundle force False allow debug True joblist bundle to joblist bundle allow debug allow debug simplify jobs joblist result []for output path work in joblist iteritems if isinstance work tuple list build output path work force force result append make url output path else result append make url output path return result
def smartsplit code strings []pos 0while pos < len code if code[pos] '"' word ''pos + 1while pos < len code if code[pos] '"' breakif code[pos] '\\' word + '\\'pos + 1word + code[pos]pos + 1strings append '"%s"' % word pos + 1return strings
@app route '/hello' def say hello return ' Static File Serversayshello '
def cartesian arrays out None arrays [np asarray x for x in arrays]shape len x for x in arrays dtype arrays[ 0 ] dtypeix np indices shape ix ix reshape len arrays -1 Tif out is None out np empty like ix dtype dtype for n arr in enumerate arrays out[ n] arrays[n][ix[ n]]return out
def get module module number mod mod inst get mod num module number if not mod is None and not mod inst is None return HOUSE[mod][mod inst]return None
def override system resolver resolver None if resolver is None resolver get default resolver global resolver resolver resolversocket getaddrinfo getaddrinfosocket getnameinfo getnameinfosocket getfqdn getfqdnsocket gethostbyname gethostbynamesocket gethostbyname ex gethostbyname exsocket gethostbyaddr gethostbyaddr
def override system resolver resolver None if resolver is None resolver get default resolver global resolver resolver resolversocket getaddrinfo getaddrinfosocket getnameinfo getnameinfosocket getfqdn getfqdnsocket gethostbyname gethostbynamesocket gethostbyname ex gethostbyname exsocket gethostbyaddr gethostbyaddr
def override system resolver resolver None if resolver is None resolver get default resolver global resolver resolver resolversocket getaddrinfo getaddrinfosocket getnameinfo getnameinfosocket getfqdn getfqdnsocket gethostbyname gethostbynamesocket gethostbyname ex gethostbyname exsocket gethostbyaddr gethostbyaddr
def override system resolver resolver None if resolver is None resolver get default resolver global resolver resolver resolversocket getaddrinfo getaddrinfosocket getnameinfo getnameinfosocket getfqdn getfqdnsocket gethostbyname gethostbynamesocket gethostbyname ex gethostbyname exsocket gethostbyaddr gethostbyaddr
def bfs successors G source parent sourcechildren []for p c in bfs edges G source if p parent children append c continue yield parent children children [c]parent p yield parent children
def diff x n 1 axis -1 return Diff Op n n axis axis x
def diff x n 1 axis -1 return Diff Op n n axis axis x
def list repos repos {}out salt ['cmd run'] 'xbps-query-L' output loglevel 'trace' for line in out splitlines repo {}if not line continuetry nb url rsa line strip split '' 2 except Value Error log error ' Problemparsingxbps-query Unexpectedformattinginline "{ 0 }"' format line repo['nbpkg'] int nb if nb isdigit else 0 repo['url'] urlrepo['rsasigned'] True if rsa ' RS Asigned ' else False repos[repo['url']] reporeturn repos
def dict from path path val delimiter DEFAULT TARGET DELIM nested dict infinitedict keys path rsplit delimiter lastplace reduce operator getitem keys[ -1 ] nested dict lastplace[keys[ -1 ]] valreturn nested dict
def dict from path path val delimiter DEFAULT TARGET DELIM nested dict infinitedict keys path rsplit delimiter lastplace reduce operator getitem keys[ -1 ] nested dict lastplace[keys[ -1 ]] valreturn nested dict
@taskdef clean ctx dry run False basedir ctx sphinx destdir or 'build/docs' cleanup dirs [basedir] dry run dry run
def random Deterministic Ts num A len Ts dim len Ts[ 0 ] choices rand dim * num A astype int policy zeros dim num A for si a in choices policy[ si a ] 1return policy collapsed Transitions Ts policy
def read chunks file size io DEFAULT BUFFER SIZE while True chunk file read size if not chunk break yield chunk
def iscsi get nodes cmd 'iscsiadm--modenode'output utils system output cmd pattern ' \\d+\\ \\d+\\ \\d+\\ \\d+ \\W {2 }\\d\\W \\d+ \\d+\\s+ [\\w\\ \\- \\d]+ 'nodes []if ' Norecordsfound' not in output nodes re findall pattern output return nodes
def options dir name check portname name root '/var/db/ports'new dir os path join root name replace '/' ' ' old dir os path join root name split '/' [ -1 ] if os path isdir old dir return old dirreturn new dir
def file List paths relative False folders False if not isinstance paths list paths [paths]files []def append directory name if not name startswith ' ' path os path join directory name files append path for path in paths for directory dirnames filenames in os walk path followlinks True if folders for dirname in dirnames append directory dirname for filename in filenames append directory filename if relative files map apply lambda x x[ len path + 1 ] files return files
def file List paths relative False folders False if not isinstance paths list paths [paths]files []def append directory name if not name startswith ' ' path os path join directory name files append path for path in paths for directory dirnames filenames in os walk path followlinks True if folders for dirname in dirnames append directory dirname for filename in filenames append directory filename if relative files map apply lambda x x[ len path + 1 ] files return files
def test sets objs tokenize '#{ 12 }' assert objs [ Hy Set [ Hy Integer 1 Hy Integer 2 ] ] objs tokenize ' bar#{foobarbaz} ' assert objs [ Hy Expression [ Hy Symbol 'bar' Hy Set ['foo' 'bar' 'baz'] ] ] objs tokenize '#{ foobar bazquux }' assert objs [ Hy Set [ Hy Expression [ Hy Symbol 'foo' Hy Symbol 'bar' ] Hy Expression [ Hy Symbol 'baz' Hy Symbol 'quux' ] ] ] objs tokenize '#{ 121121 }' assert objs [ Hy Set [ Hy Integer n for n in [1 2 1 1 2 1]] ] assert len objs[ 0 ] 6 objs tokenize '#{a 1 }' assert objs [ Hy Set [ Hy Symbol 'a' Hy Integer 1 ] ]
@hook command 'validate' 'w 3 c' def validate text text text strip if not urllib parse urlparse text scheme text 'http //' + text params {'uri' text}request requests get 'http //validator w3 org/check' params params info request headersurl web try shorten request url status info['x-w 3 c-validator-status'] lower print statusif status in 'valid' 'invalid' error count info['x-w 3 c-validator-errors']warning count info['x-w 3 c-validator-warnings']return '{}wasfoundtobe{}with{}error{}and{}warning{}-{}' format text status error count 's'[ error count 1 ] warning count 's'[ warning count 1 ] url elif status 'abort' return ' Invalidinput '
def with server span name def with server span decorator fn @functools wraps fn def with server span wrapper *args **kwargs assert not c trace 'calledwhilealreadyinaserverspan'try with make server span name return fn *args **kwargs finally g stats flush return with server span wrapperreturn with server span decorator
def rm id isid new new def ident remove expr ' Removeidentities'ids list map isid expr args if sum ids 0 return exprelif sum ids len ids return new expr class *[arg for arg x in zip expr args ids if not x ] else return new expr class expr args[ 0 ] return ident remove
def Split By Kind freqdict kinds {}for kind fullname freq in freqdict items kind fullname kind fullname split ' ' if not kind in kinds kinds[kind] []kinds[kind] append fullname freq['read'] freq['write'] freq['miss'] for kind in kinds kinds[kind] sort key lambda ent ent[ 1 ] + ent[ 2 ] reverse True kinds bycount sorted kinds iteritems key lambda pair len pair[ 1 ] reverse True maxcount 0for kind in kinds maxcount max maxcount kinds[kind][ 0 ][ 1 ] + kinds[kind][ 0 ][ 2 ] return kinds bycount maxcount
@pytest mark django dbdef test save store fs bad lang with store po directory tp 0 store tp 0 store fs tp 0 store fs store tp 0 storetp 0 store fs pootle path '/language 1 /project 0 /example po'with pytest raises Validation Error tp 0 store fs save
def run shell command cmdstr **subprocess kwargs if 'shell' in subprocess kwargs and not subprocess kwargs['shell'] raise Program Error ' The"shell"kwargmaybeomitted butifprovideditmustbe True ' else subprocess kwargs['shell'] Trueif 'executable' not in subprocess kwargs subprocess kwargs['executable'] os getenv 'SHELL' for stream in ['stdin' 'stdout' 'stderr'] subprocess kwargs setdefault stream subprocess PIPE subprocess kwargs alter subprocess kwargs by platform **subprocess kwargs return subprocess Popen cmdstr **subprocess kwargs
def launch server app webapp factory kwargs prefix 'GALAXY' config object None name prefix lower host env key '%s TEST HOST' % prefix port env key '%s TEST PORT' % prefix default web host getattr config object 'default web host' DEFAULT WEB HOST host os environ get host env key default web host port os environ get port env key None webapp webapp factory kwargs['global conf'] app app use translogger False static enabled True server port serve webapp webapp host host port port os environ[host env key] hostos environ[port env key] portwait for http server host port log info ' Embeddedwebserverfor%sstarted' % name return Server Wrapper app server name host port
def launch server app webapp factory kwargs prefix 'GALAXY' config object None name prefix lower host env key '%s TEST HOST' % prefix port env key '%s TEST PORT' % prefix default web host getattr config object 'default web host' DEFAULT WEB HOST host os environ get host env key default web host port os environ get port env key None webapp webapp factory kwargs['global conf'] app app use translogger False static enabled True server port serve webapp webapp host host port port os environ[host env key] hostos environ[port env key] portwait for http server host port log info ' Embeddedwebserverfor%sstarted' % name return Server Wrapper app server name host port
def scale matrix factor origin None direction None if direction is None M numpy diag [factor factor factor 1 0] if origin is not None M[ 3 3] origin[ 3]M[ 3 3] * 1 0 - factor else direction unit vector direction[ 3] factor 1 0 - factor M numpy identity 4 M[ 3 3] - factor * numpy outer direction direction if origin is not None M[ 3 3] factor * numpy dot origin[ 3] direction * direction return M
@declareddef allperfs obj ref obj get object obj ref p Perf Datas obj perf data logger debug '[trigger] Igetallperfdatas' return dict [ metric name p[metric name] for metric in p]
def get current timezone name return get timezone name get current timezone
def float compare value 1 value 2 precision digits None precision rounding None rounding factor float check precision precision digits precision digits precision rounding precision rounding value 1 float round value 1 precision rounding rounding factor value 2 float round value 2 precision rounding rounding factor delta value 1 - value 2 if float is zero delta precision rounding rounding factor return 0return -1 if delta < 0 0 else 1
def float compare value 1 value 2 precision digits None precision rounding None rounding factor float check precision precision digits precision digits precision rounding precision rounding value 1 float round value 1 precision rounding rounding factor value 2 float round value 2 precision rounding rounding factor delta value 1 - value 2 if float is zero delta precision rounding rounding factor return 0return -1 if delta < 0 0 else 1
def auth sub string from url url scopes param prefix 'auth sub scopes' if isinstance url str unicode url atom http core Uri parse uri url if 'token' not in url query return None None token url query['token']scopes Noneif scopes param prefix in url query scopes tuple url query[scopes param prefix] split '' return token scopes
def auth sub string from url url scopes param prefix 'auth sub scopes' if isinstance url str unicode url atom http core Uri parse uri url if 'token' not in url query return None None token url query['token']scopes Noneif scopes param prefix in url query scopes tuple url query[scopes param prefix] split '' return token scopes
def save on signal obj trans signal models signals pre savedef cb sender instance **kw if instance is obj is new trans autoid is None trans save force insert is new force update not is new signal disconnect cb signal connect cb sender obj class weak False
@require http methods ['POST'] def upload archive request response {'status' -1 'data' ''}try resp upload archive request response update resp except Exception as ex response['data'] str ex finally hdfs file request FILES get 'hdfs file' if hdfs file hdfs file remove return Json Response response
@require http methods ['POST'] def upload archive request response {'status' -1 'data' ''}try resp upload archive request response update resp except Exception as ex response['data'] str ex finally hdfs file request FILES get 'hdfs file' if hdfs file hdfs file remove return Json Response response
def rewrite assign tok toknum tokval tokreturn toknum ' ' if tokval ' ' else tokval
def rewrite assign tok toknum tokval tokreturn toknum ' ' if tokval ' ' else tokval
def rewrite assign tok toknum tokval tokreturn toknum ' ' if tokval ' ' else tokval
def application *args **kwargs if not args and not kwargs or not args and kwargs raise Value Errorif args application function argsapplication Application application function return applicationelse def wrap application application function application Application application function for key value in kwargs items setattr application key value return applicationreturn wrap application
def execute section section global bear list local bear list print results cache log printer console printer try running processes int section['jobs'] except Value Error log printer warn " Unabletoconvertsetting'jobs'intoanumber Fallingbackto CP Ucount " running processes get cpu count except Index Error running processes get cpu count processes arg dict instantiate processes section local bear list global bear list running processes cache log printer console printer console printer logger thread Log Printer Thread arg dict['message queue'] log printer processes append logger thread for runner in processes runner start try return process queues processes arg dict['control queue'] arg dict['local result dict'] arg dict['global result dict'] arg dict['file dict'] print results section cache log printer console printer console printer arg dict['local result dict'] arg dict['global result dict'] arg dict['file dict'] finally logger thread running Falsefor runner in processes runner join
def test fk 5 galactic fk 5 FK 5 ra 1 * u deg dec 2 * u deg direct fk 5 transform to Galactic indirect fk 5 transform to FK 4 transform to Galactic assert direct separation indirect degree < 1e- 10 direct fk 5 transform to Galactic indirect fk 5 transform to FK 4 No E Terms transform to Galactic assert direct separation indirect degree < 1e- 10
def test fk 5 galactic fk 5 FK 5 ra 1 * u deg dec 2 * u deg direct fk 5 transform to Galactic indirect fk 5 transform to FK 4 transform to Galactic assert direct separation indirect degree < 1e- 10 direct fk 5 transform to Galactic indirect fk 5 transform to FK 4 No E Terms transform to Galactic assert direct separation indirect degree < 1e- 10
def wavread filename if os path isfile filename False raise Value Error ' Inputfileiswrong' fs x read filename if len x shape 1 raise Value Error ' Audiofileshouldbemono' if fs 44100 raise Value Error ' Samplingrateofinputsoundshouldbe 44100 ' x np float 32 x / norm fact[x dtype name] return fs x
def filter re replace val pattern repl return re sub pattern repl str val
def get course syllabus section course section key if section key in ['syllabus' 'guest syllabus'] try filesys course system resources fsdirs [ path 'syllabus' / course url name path 'syllabus' ]filepath find file filesys dirs section key + ' html' with filesys open filepath as html file return replace static urls html file read decode 'utf- 8 ' getattr course 'data dir' None course id course id static asset path course static asset path except Resource Not Found Error log exception u' Missingsyllabussection%sincourse%s' section key course location to deprecated string return ' Syllabusmissing 'raise Key Error ' Invalidaboutkey' + str section key
def get course syllabus section course section key if section key in ['syllabus' 'guest syllabus'] try filesys course system resources fsdirs [ path 'syllabus' / course url name path 'syllabus' ]filepath find file filesys dirs section key + ' html' with filesys open filepath as html file return replace static urls html file read decode 'utf- 8 ' getattr course 'data dir' None course id course id static asset path course static asset path except Resource Not Found Error log exception u' Missingsyllabussection%sincourse%s' section key course location to deprecated string return ' Syllabusmissing 'raise Key Error ' Invalidaboutkey' + str section key
@cli command name u'json' @click option u'-c' u'--clean/--dirty' is flag True default True help clean help @click option u'-f' u'--config-file' type click File u'rb' help config help @click option u'-s' u'--strict' is flag True help strict help @click option u'-d' u'--site-dir' type click Path help site dir help @common optionsdef json command clean config file strict site dir log warning u' Thejsoncommandisdeprecatedandwillberemovedinafuture Mk Docsrelease Fordetailsonupdating http //www mkdocs org/about/release-notes/' strict strict or None try build build config load config config file config file strict strict site dir site dir dump json True dirty not clean except exceptions Configuration Error as e raise System Exit u'\n' + str e
def libvlc video get marquee string p mi option f Cfunctions get 'libvlc video get marquee string' None or Cfunction 'libvlc video get marquee string' 1 1 string result ctypes c void p Media Player ctypes c uint return f p mi option
def get layer initializers initializers layer name fields if initializers is None return Noneif isinstance initializers dict and layer name in initializers return get initializers initializers[layer name] fields return get initializers initializers fields
def depth first search gr s path if s in path return Falsepath add s for each in gr neighbors s if each not in path depth first search gr each path
def circle screensize center radius col 1 1 0 col 2 0 blur 1 return color gradient screensize p1 center r radius col 1 col 1 col 2 col 2 shape 'radial' offset 0 if radius 0 else 1 0 * radius - blur / radius
def which bin cmds return salt utils which bin cmds
def which bin cmds return salt utils which bin cmds
def patch cmdutils monkeypatch stubs symbol cmd utils stubs Fake Cmd Utils {'stop' stubs Fake Command name 'stop' desc 'stopqutebrowser' 'drop' stubs Fake Command name 'drop' desc 'dropalluserdata' 'roll' stubs Fake Command name 'roll' desc 'nevergonnagiveyouup' 'hide' stubs Fake Command name 'hide' hide True 'depr' stubs Fake Command name 'depr' deprecated True } monkeypatch setattr symbol cmd utils
def patch cmdutils monkeypatch stubs symbol cmd utils stubs Fake Cmd Utils {'stop' stubs Fake Command name 'stop' desc 'stopqutebrowser' 'drop' stubs Fake Command name 'drop' desc 'dropalluserdata' 'roll' stubs Fake Command name 'roll' desc 'nevergonnagiveyouup' 'hide' stubs Fake Command name 'hide' hide True 'depr' stubs Fake Command name 'depr' deprecated True } monkeypatch setattr symbol cmd utils
def patch cmdutils monkeypatch stubs symbol cmd utils stubs Fake Cmd Utils {'stop' stubs Fake Command name 'stop' desc 'stopqutebrowser' 'drop' stubs Fake Command name 'drop' desc 'dropalluserdata' 'roll' stubs Fake Command name 'roll' desc 'nevergonnagiveyouup' 'hide' stubs Fake Command name 'hide' hide True 'depr' stubs Fake Command name 'depr' deprecated True } monkeypatch setattr symbol cmd utils
def transformation to normal eq var coeff diop type classify diop eq dict False if diop type in 'homogeneous ternary quadratic' 'homogeneous ternary quadratic normal' return transformation to normal var coeff
def transformation to normal eq var coeff diop type classify diop eq dict False if diop type in 'homogeneous ternary quadratic' 'homogeneous ternary quadratic normal' return transformation to normal var coeff
def write to file path contents umask None if umask saved umask os umask umask try with open path 'w' as f f write contents finally if umask os umask saved umask
def serialize allocations for resource provider allocations resource provider return allocations dict allocations lambda x x consumer id resource provider resource provider
def dumx remove dumx dumx flat p0 res []for dx in dumx if p0 not in dx res append dx continuek dx index p0 if k % 2 0 p0 paired dx[ k + 1 ]else p0 paired dx[ k - 1 ]dx remove p0 dx remove p0 paired dumx flat remove p0 dumx flat remove p0 paired res append dx
def get host name name ''try name eval 'os uname [1 ]' except try name eval "os getenv 'HOSTNAME' os getenv 'COMPUTERNAME' or'' lower " except name ''return name
def build audit info parent audit id None audit id random urlsafe str if parent audit id is not None return [audit id parent audit id]return [audit id]
def build audit info parent audit id None audit id random urlsafe str if parent audit id is not None return [audit id parent audit id]return [audit id]
def get connection ip list as wmi format False server DEFAULT SERVER ret dict setting 'IP Grant'reg separator ' \\s*'if as wmi format ret list addresses get wmi setting 'I Is IP Security Setting' setting server for unnormalized address in addresses ip address subnet re split reg separator unnormalized address if as wmi format ret append '{ 0 } {1 }' format ip address subnet else ret[ip address] subnetif not ret LOG debug '%sisempty ' setting return ret
def Node Name node if node type < 256 return token tok name[node type]else return pygram python grammar number 2 symbol[node type]
def estimate gaussian covariances full resp X nk means reg covar n components n features means shapecovariances np empty n components n features n features for k in range n components diff X - means[k] covariances[k] np dot resp[ k] * diff T diff / nk[k] covariances[k] flat[ n features + 1 ] + reg covarreturn covariances
def apply exif orientation image try exif tags image getexif or {} except Attribute Error return image ORIENTATION TAG ID 274 orientation exif tags get ORIENTATION TAG ID if orientation 1 passelif orientation 2 image image transpose Image FLIP LEFT RIGHT elif orientation 3 image image transpose Image ROTATE 180 elif orientation 4 image image transpose Image FLIP TOP BOTTOM elif orientation 5 image image transpose Image FLIP LEFT RIGHT image image transpose Image ROTATE 90 elif orientation 6 image image transpose Image ROTATE 270 elif orientation 7 image image transpose Image FLIP LEFT RIGHT image image transpose Image ROTATE 270 elif orientation 8 image image transpose Image ROTATE 90 return image
def apply exif orientation image try exif tags image getexif or {} except Attribute Error return image ORIENTATION TAG ID 274 orientation exif tags get ORIENTATION TAG ID if orientation 1 passelif orientation 2 image image transpose Image FLIP LEFT RIGHT elif orientation 3 image image transpose Image ROTATE 180 elif orientation 4 image image transpose Image FLIP TOP BOTTOM elif orientation 5 image image transpose Image FLIP LEFT RIGHT image image transpose Image ROTATE 90 elif orientation 6 image image transpose Image ROTATE 270 elif orientation 7 image image transpose Image FLIP LEFT RIGHT image image transpose Image ROTATE 270 elif orientation 8 image image transpose Image ROTATE 90 return image
@content type 'text/plain' def text body charset 'utf- 8 ' **kwargs return body read decode charset
@contextmanagerdef for range builder count start None intp None if intp is None intp count typeif start is None start intp 0 stop countbbcond builder append basic block 'for cond' bbbody builder append basic block 'for body' bbend builder append basic block 'for end' def do break builder branch bbend bbstart builder basic blockbuilder branch bbcond with builder goto block bbcond index builder phi intp name 'loop index' pred builder icmp signed '<' index stop builder cbranch pred bbbody bbend with builder goto block bbbody yield Loop index do break bbbody builder basic blockincr increment index builder index terminate builder bbcond index add incoming start bbstart index add incoming incr bbbody builder position at end bbend
@contextmanagerdef for range builder count start None intp None if intp is None intp count typeif start is None start intp 0 stop countbbcond builder append basic block 'for cond' bbbody builder append basic block 'for body' bbend builder append basic block 'for end' def do break builder branch bbend bbstart builder basic blockbuilder branch bbcond with builder goto block bbcond index builder phi intp name 'loop index' pred builder icmp signed '<' index stop builder cbranch pred bbbody bbend with builder goto block bbbody yield Loop index do break bbbody builder basic blockincr increment index builder index terminate builder bbcond index add incoming start bbstart index add incoming incr bbbody builder position at end bbend
def extract translations file obj xpi get filepath file obj messages {}try with zipfile Zip File xpi 'r' as source file list source namelist locales {name split '/' [1 ] for name in file list if name startswith ' locales/' and name endswith '/messages json' }for locale in locales corrected locale find language locale if not corrected locale continuefname ' locales/{ 0 }/messages json' format locale try data source read fname messages[corrected locale] decode json data except Key Error continueexcept IO Error passreturn messages
def cftype to value cftype if not cftype return Nonetype ID cf CF Get Type ID cftype if type ID in known cftypes convert function known cftypes[type ID]return convert function cftype else return cftype
@jit nopython True cache True def lex min ratio test tableau pivot slack start argmins nrows tableau shape[ 0 ]num candidates nrowsfor i in range nrows argmins[i] inum argmins min ratio test no tie breaking tableau pivot -1 argmins num candidates if num argmins 1 return argmins[ 0 ]for j in range slack start slack start + nrows if j pivot continuenum argmins min ratio test no tie breaking tableau pivot j argmins num argmins if num argmins 1 breakreturn argmins[ 0 ]
def get next url for login page request redirect to request GET get 'next' None if redirect to and not http is safe url redirect to log error u' Unsaferedirectparameterdetected % redirect to r' {'redirect to' redirect to} redirect to Noneif not redirect to try redirect to reverse 'dashboard' except No Reverse Match redirect to reverse 'home' if any param in request GET for param in POST AUTH PARAMS params [ param request GET[param] for param in POST AUTH PARAMS if param in request GET ]params append 'next' redirect to redirect to '{}?{}' format reverse 'finish auth' urllib urlencode params return redirect to
def start version module version rpc start version async module version rpc get result
def artifactory registry xml parent data artifactory XML Sub Element xml parent 'org jfrog hudson Artifactory Redeploy Publisher' helpers artifactory optional props artifactory data 'publishers' XML Sub Element artifactory 'matrix Params' text ' ' join data get 'matrix-params' [] details XML Sub Element artifactory 'details' helpers artifactory common details details data XML Sub Element details 'repository Key' text data get 'release-repo-key' '' XML Sub Element details 'snapshots Repository Key' text data get 'snapshot-repo-key' '' plugin XML Sub Element details 'staging Plugin' XML Sub Element plugin 'plugin Name' text ' None'helpers artifactory deployment patterns artifactory data helpers artifactory env vars patterns artifactory data
def artifactory registry xml parent data artifactory XML Sub Element xml parent 'org jfrog hudson Artifactory Redeploy Publisher' helpers artifactory optional props artifactory data 'publishers' XML Sub Element artifactory 'matrix Params' text ' ' join data get 'matrix-params' [] details XML Sub Element artifactory 'details' helpers artifactory common details details data XML Sub Element details 'repository Key' text data get 'release-repo-key' '' XML Sub Element details 'snapshots Repository Key' text data get 'snapshot-repo-key' '' plugin XML Sub Element details 'staging Plugin' XML Sub Element plugin 'plugin Name' text ' None'helpers artifactory deployment patterns artifactory data helpers artifactory env vars patterns artifactory data
def artifactory registry xml parent data artifactory XML Sub Element xml parent 'org jfrog hudson Artifactory Redeploy Publisher' helpers artifactory optional props artifactory data 'publishers' XML Sub Element artifactory 'matrix Params' text ' ' join data get 'matrix-params' [] details XML Sub Element artifactory 'details' helpers artifactory common details details data XML Sub Element details 'repository Key' text data get 'release-repo-key' '' XML Sub Element details 'snapshots Repository Key' text data get 'snapshot-repo-key' '' plugin XML Sub Element details 'staging Plugin' XML Sub Element plugin 'plugin Name' text ' None'helpers artifactory deployment patterns artifactory data helpers artifactory env vars patterns artifactory data
def is national number suffix of other numobj 1 numobj 2 nn 1 str numobj 1 national number nn 2 str numobj 2 national number return nn 1 endswith nn 2 or nn 2 endswith nn 1
def rotation angles m x np arctan 2 m[ 2 1 ] m[ 2 2 ] c2 np sqrt m[ 0 0 ] ** 2 + m[ 1 0 ] ** 2 y np arctan 2 - m[ 2 0 ] c2 s1 np sin x c1 np cos x z np arctan 2 s1 * m[ 0 2 ] - c1 * m[ 0 1 ] c1 * m[ 1 1 ] - s1 * m[ 1 2 ] return x y z
def rotation angles m x np arctan 2 m[ 2 1 ] m[ 2 2 ] c2 np sqrt m[ 0 0 ] ** 2 + m[ 1 0 ] ** 2 y np arctan 2 - m[ 2 0 ] c2 s1 np sin x c1 np cos x z np arctan 2 s1 * m[ 0 2 ] - c1 * m[ 0 1 ] c1 * m[ 1 1 ] - s1 * m[ 1 2 ] return x y z
def mpi tag key a if isinstance a op MPI Send MPI Recv MPI Recv Wait MPI Send Wait return a op tagelse return 0
def locate repo files repo rewrite False ret val []files []conf dirs ['/etc/xbps d/' '/usr/share/xbps d/']name glob '* conf'regex re compile '\\s*repository\\s* \\s*' + repo + '/?\\s* # * ?$' for cur dir in conf dirs files extend glob glob cur dir + name glob for filename in files write buff []with salt utils fopen filename 'r' as cur file for line in cur file if regex match line ret val append filename else write buff append line if rewrite and filename in ret val if len write buff > 0 with salt utils fopen filename 'w' as rewrite file rewrite file write '' join write buff else os remove filename return ret val
def get engine by slug slug None if not slug or type slug is not str raise Type Error " Invalidslug'%s'" slug selected engines filter lambda engine hasattr engine 'SLUG' and engine SLUG slug get engines if len selected engines 0 raise Value Error " No TT Senginefoundforslug'%s'" % slug else if len selected engines > 1 print "WARNING Multiple TT Senginesfoundforslug'%s' " + ' Thisismostcertainlyabug ' % slug engine selected engines[ 0 ]if not engine is available raise Value Error "TT Sengine'%s'isnotavailable dueto" + 'missingdependencies etc ' % slug return engine
def text 3 d ax xyz s zdir 'z' size None angle 0 usetex False **kwargs x y z xyzif zdir 'y' xy 1 z1 x z y elif zdir 'y' xy 1 z1 y z x else xy 1 z1 x y z text path Text Path 0 0 s size size usetex usetex trans Affine 2 D rotate angle translate xy 1 [ 0 ] xy 1 [ 1 ] p1 Path Patch trans transform path text path **kwargs ax add patch p1 art 3 d pathpatch 2d to 3d p1 z z1 zdir zdir
def get Closest Opposite Intersection Paths y Intersection Paths y Intersection Paths sort compare Distance From Center before First y Intersection Paths[ 0 ] y Minus Center < 0 0 y Close To Center Paths [y Intersection Paths[ 0 ]]for y Intersection Path in y Intersection Paths[ 1 ] before Second y Intersection Path y Minus Center < 0 0 if before First before Second y Close To Center Paths append y Intersection Path return y Close To Center Pathsreturn y Close To Center Paths
def jssafe text u'' if text class unicode text force unicode text return Unsafe text translate js escapes
def jssafe text u'' if text class unicode text force unicode text return Unsafe text translate js escapes
def rmtree path from config import CON Fif CONF['noconfirm'] choice 'y'elif sys stdout isatty choice compat stdin input 'WARNING Theoutputdirectory"%s"and ALLITSCONTENT Swillbe REMOVED Continue? y/n ' % path else raise System Exit ' Error Theoutputdirectory"%s"isnotempty Pleaseremoveallitscontentsorusethe-yoption removeoutputdirectorywithoutconfirmation ' % path if choice strip lower 'y' logger info ' Removingdir%s' path shutil rmtree path else raise System Exit ' Useraborted'
def unicoder p force False if isinstance p unicode return pif isinstance p str if gUTF or force try return p decode 'utf- 8 ' except return p decode codepage 'replace' return p decode codepage 'replace' else return unicode str p
def get code 2 lang map lang code None force False global CODE 2 LANG MA Pif force or not CODE 2 LANG MAP lmap softload json settings LANG LOOKUP FILEPATH logger logging debug CODE 2 LANG MAP {}for lc entry in lmap iteritems CODE 2 LANG MAP[lcode to ietf lc ] entryreturn CODE 2 LANG MAP get lcode to ietf lang code if lang code else CODE 2 LANG MAP
def darken color percent return adjust color 2 - percent
def store emails recipient ids notification type event user node timestamp **context if notification type 'none' returntemplate event + ' html mako' context['user'] usernode lineage ids get node lineage node if node else [] for user id in recipient ids if user id user id continuerecipient OSF User load user id context['localized timestamp'] localize timestamp timestamp recipient message mails render message template **context digest Notification Digest timestamp timestamp send type notification type event event user recipient message message node lineage node lineage ids digest save
def check regexs filename matchers extras []for expressions in matchers expression extramatchers expressionsmatch 1 expression search filename if match 1 for m in extramatchers match 2 m findall filename match 1 end if match 2 for match in match 2 if type match type and len match > 1 extras append match[ 1 ] else extras append match breakreturn match 1 extras return None None
def custom object scope *args return Custom Object Scope *args
def custom object scope *args return Custom Object Scope *args
def custom object scope *args return Custom Object Scope *args
def get Rounded Point point return Vector 3 round point x round point y round point z
def stop timers canvas for attr in dir canvas try attr obj getattr canvas attr except Not Implemented Error attr obj Noneif isinstance attr obj Timer attr obj stop
def stop timers canvas for attr in dir canvas try attr obj getattr canvas attr except Not Implemented Error attr obj Noneif isinstance attr obj Timer attr obj stop
def create lti user lti user id lti consumer edx password str uuid uuid 4 created Falsewhile not created try edx user id generate random edx username edx email '{}@{}' format edx user id settings LTI USER EMAIL DOMAIN with transaction atomic edx user User objects create user username edx user id password edx password email edx email edx user profile User Profile user edx user edx user profile save created Trueexcept Integrity Error passlti user Lti User lti consumer lti consumer lti user id lti user id edx user edx user lti user save return lti user
def estimate gaussian parameters X resp reg covar covariance type nk resp sum axis 0 + 10 * np finfo resp dtype eps means np dot resp T X / nk[ np newaxis] covariances {'full' estimate gaussian covariances full 'tied' estimate gaussian covariances tied 'diag' estimate gaussian covariances diag 'spherical' estimate gaussian covariances spherical}[covariance type] resp X nk means reg covar return nk means covariances
def provider uri rewrites providers return load provider feature 'uri rewrites' providers
def provider uri rewrites providers return load provider feature 'uri rewrites' providers
def provider uri rewrites providers return load provider feature 'uri rewrites' providers
def test Authentication host None username None password None apikey None params {u'mode' u'queue' u'output' u'json' u'ma username' username u'ma password' password u'apikey' apikey}url urljoin host u'api' data helpers get URL url params params session session returns u'json' verify False if not data return False data result sab Text check Sab Response data if not result return False sab Text return True u' Success'
def normalize query parameter value if isinstance value Model value value key if isinstance value datetime date and not isinstance value datetime datetime value date to datetime value elif isinstance value datetime time value time to datetime value return value
def prefix indexes config if hasattr config 'slaveinput' prefix 'test {[slaveid]}' format config slaveinput else prefix 'test'for key index in settings ES INDEXES items if not index startswith prefix settings ES INDEXES[key] '{prefix} amo {index}' format prefix prefix index index settings CACHE PREFIX 'amo {0 } ' format prefix settings KEY PREFIX settings CACHE PREFIX
def replace nonprintables string new string ''modified 0for c in string o ord c if o < 31 new string + '^' + chr ord '@' + o modified + 1elif o 127 new string + '^?'modified + 1else new string + cif modified and S3 Config Config urlencoding mode 'fixbucket' warning '%dnon-printablecharactersreplacedin %s' % modified new string return new string
def setup logrotate app name watch log size app logrotate script '{ 0 }/appscale-{ 1 }' format LOGROTATE CONFIG DIR app name contents '/var/log/appscale/{watch}* log{{\nsize{size}\nmissingok\nrotate 7 \ncompress\ndelaycompress\nnotifempty\ncopytruncate\n}}\n' format watch watch size log size logging debug ' Logrotatefile {}- Contents \n{}' format app logrotate script contents with open app logrotate script 'w' as app logrotate fd app logrotate fd write contents return True
def get Profile String p []alt []global settings Listfor set in settings List if set is Profile if set get Name in temp Override p append set get Name + ' ' + temp Override[set get Name ] else p append set get Name + ' ' + set get Value encode 'utf- 8 ' elif set is Alteration if set get Name in temp Override alt append set get Name + ' ' + temp Override[set get Name ] else alt append set get Name + ' ' + set get Value encode 'utf- 8 ' ret '\x 08 ' join p + '\x 0 c' + '\x 08 ' join alt ret base 64 b64 encode zlib compress ret 9 return ret
def deactivate invalidation certificate try certificate invalidation Certificate Invalidation objects get generated certificate certificate active True certificate invalidation deactivate except Certificate Invalidation Does Not Exist pass
@memoize default None evaluator is first arg True def follow param evaluator param def eval docstring docstr param str str param name return set [p for string in search param in docstr docstr param str for p in evaluate for statement string evaluator string module ] func param parent functionmodule param get parent until docstr func raw doctypes eval docstring docstr if func name value ' init ' cls func get parent until Class if cls type 'classdef' types eval docstring cls raw doc return types
def attachable name path None cachekey 'lxc attachable{ 0 }{ 1 }' format name path try return context [cachekey]except Key Error ensure exists name path path log debug ' Checkingif LX Ccontainer{ 0 }isattachable' format name cmd 'lxc-attach'if path cmd + '-P{ 0 }' format pipes quote path cmd + '--clear-env-n{ 0 }--/usr/bin/env' format name result salt ['cmd retcode'] cmd python shell False output loglevel 'quiet' ignore retcode True 0 context [cachekey] resultreturn context [cachekey]
def valid post signature request signature header SIGNATURE BODY HEADER return valid signature ' Body {}' format request body request headers get signature header field 'body'
def get flags record props 'admin review' 'admin-review' lazy ' Admin Review' 'is jetpack' 'jetpack' lazy ' Jetpack Add-on' 'requires restart' 'requires restart' lazy ' Requires Restart' 'has info request' 'info' lazy ' More Information Requested' 'has editor comment' 'editor' lazy ' Contains Reviewer Comment' 'sources provided' 'sources-provided' lazy ' Sourcesprovided' 'is webextension' 'webextension' lazy ' Web Extension' return [ cls title for prop cls title in props if getattr record prop ]
def setgroups groups max groups Nonetry max groups os sysconf u'SC NGROUPS MAX' except Exception passtry return setgroups hack groups[ max groups] except OS Error as exc if exc errno errno EPERM raiseif any group not in groups for group in os getgroups raise
def mkdir session ds path dc ref LOG debug ' Creatingdirectorywithpath%s' ds path session call method session vim ' Make Directory' session vim service content file Manager name str ds path datacenter dc ref create Parent Directories True LOG debug ' Createddirectorywithpath%s' ds path
def packages pkg list update False pkg list [pkg for pkg in pkg list if not is installed pkg ]if pkg list install pkg list update
def render string template template string context None context instance None if context is None context {}template Template template string if 'user' not in context and context instance if 'request' in context instance context update {'user' context instance['request']} return template render context
def mul sign lh expr rh expr is pos lh expr is zero or rh expr is zero or lh expr is positive and rh expr is positive or lh expr is negative and rh expr is negative is neg lh expr is zero or rh expr is zero or lh expr is positive and rh expr is negative or lh expr is negative and rh expr is positive return is pos is neg
def uniquify projs projs check active True sort True final projs []for proj in projs if not any proj equal p proj check active for p in final projs final projs append proj my count count len final projs def sorter x ' Sortinaniceway 'digits [s for s in x['desc'] if s isdigit ]if digits sort idx int digits[ -1 ] else sort idx next my count return sort idx x['desc'] return sorted final projs key sorter if sort else final projs
def post http server test host port data expected response 'ok' def make post host port data request post 'http //{host} {port}' format host host port port data data timeout SOCKET TIMEOUT FOR POLLING persistent False def failed failure Message new message type u'acceptance http query failed' reason unicode failure write return Falserequest add Callbacks content failed return requestd verify socket host port d add Callback lambda loop until reactor lambda make post host port data d add Callback test assert Equal expected response return d
def post http server test host port data expected response 'ok' def make post host port data request post 'http //{host} {port}' format host host port port data data timeout SOCKET TIMEOUT FOR POLLING persistent False def failed failure Message new message type u'acceptance http query failed' reason unicode failure write return Falserequest add Callbacks content failed return requestd verify socket host port d add Callback lambda loop until reactor lambda make post host port data d add Callback test assert Equal expected response return d
def post http server test host port data expected response 'ok' def make post host port data request post 'http //{host} {port}' format host host port port data data timeout SOCKET TIMEOUT FOR POLLING persistent False def failed failure Message new message type u'acceptance http query failed' reason unicode failure write return Falserequest add Callbacks content failed return requestd verify socket host port d add Callback lambda loop until reactor lambda make post host port data d add Callback test assert Equal expected response return d
def group lengths grouping from itertools import chain repeatif not grouping return []elif grouping[ -1 ] 0 and len grouping > 2 return chain grouping[ -1 ] repeat grouping[ -2 ] elif grouping[ -1 ] locale CHAR MAX return grouping[ -1 ]else raise Value Error 'unrecognisedformatforgrouping'
def group lengths grouping from itertools import chain repeatif not grouping return []elif grouping[ -1 ] 0 and len grouping > 2 return chain grouping[ -1 ] repeat grouping[ -2 ] elif grouping[ -1 ] locale CHAR MAX return grouping[ -1 ]else raise Value Error 'unrecognisedformatforgrouping'
def add special arithmetic methods cls arith method None comp method None bool method None use numexpr True force False select None exclude None have divmod False new methods create methods arith method comp method bool method use numexpr default axis None special True have divmod have divmod def wrap inplace method method '\nreturnaninplacewrapperforthismethod\n'def f self other result method self other self update inplace result reindex like self copy False data verify is copy False return selfreturn fnew methods update dict iadd wrap inplace method new methods[' add '] isub wrap inplace method new methods[' sub '] imul wrap inplace method new methods[' mul '] itruediv wrap inplace method new methods[' truediv '] ipow wrap inplace method new methods[' pow '] if not compat PY 3 new methods[' idiv '] new methods[' div ']add methods cls new methods new methods force force select select exclude exclude
def generate signed url bucket name blob name storage client storage Client bucket storage client get bucket bucket name blob bucket blob blob name url blob generate signed url expiration datetime timedelta hours 1 method 'GET' print ' Thesignedurlfor{}is{}' format blob name url
def get errstring url base ' Invalid URL' url error url error String if url error return base + '-{}' format url error else return base
def has course ended end date return datetime now utc > end date if end date is not None else False
def reset token store auth reset default token store
def add kdb reader sub signature cls kdb readers[sub signature] cls
def make symbolizer project binary images referenced images None driver Driver to load referenced imagesif to load is None to load [x['uuid'] for x in binary images] dsym paths loaded dsymcache fetch dsyms project to load user images []for img in binary images if img['uuid'] in loaded user images append img return Report Symbolizer driver dsym paths user images
def get all alarms region None prefix None key None keyid None profile None conn get conn region region key key keyid keyid profile profile alarms conn describe alarms results odict Ordered Dict for alarm in alarms alarm metric alarm to dict alarm name alarm['name']if prefix if name startswith prefix continuename prefix + alarm['name'] del alarm['name']alarm sls []alarm sls append {'name' name} alarm sls append {'attributes' alarm} results[ 'managealarm' + name ] {'boto cloudwatch alarm present' alarm sls}return safe dump results
def node completed status checknode u'TODO placethisinthebase pyfileandrefactor'node state does not require overwrite checknode overwrite is False or checknode overwrite is None and not checknode interface always run hash exists Falsetry hash exists checknode hash exists except Exception hash exists Falsereturn hash exists and node state does not require overwrite
def hashed source filename prepared options thumbnail extension **kwargs parts u' ' join [source filename] + prepared options short sha hashlib sha 1 parts encode u'utf- 8 ' digest short hash base 64 urlsafe b64 encode short sha[ 9] decode u'utf- 8 ' return u' ' join [short hash thumbnail extension]
def package pkg name update False if not is installed pkg name install pkg name update
def lowerstrip s all False return strip punc s lower strip all all
def lowerstrip s all False return strip punc s lower strip all all
def transmit msg lane stack transmit msg remote yard uid
def time difference date 1 date 2 later mktime date 1 timetuple + date 1 microsecond / 1000000 0 earlier mktime date 2 timetuple + date 2 microsecond / 1000000 0 return later - earlier
def get Profile Setting name if name in temp Override return temp Override[name]global settings Dictionaryif name in settings Dictionary and settings Dictionary[name] is Profile return settings Dictionary[name] get Value traceback print stack sys stderr write ' Error "%s"notfoundinprofilesettings\n' % name return ''
def kdd apk actual predicted k 10 if len predicted > k predicted predicted[ k]score 0 0num hits 0 0for i p in enumerate predicted if p in actual and p not in predicted[ i] num hits + 1 0score + num hits / i + 1 0 if not actual return 0 0return score / len actual
def kdd apk actual predicted k 10 if len predicted > k predicted predicted[ k]score 0 0num hits 0 0for i p in enumerate predicted if p in actual and p not in predicted[ i] num hits + 1 0score + num hits / i + 1 0 if not actual return 0 0return score / len actual
def update stylesheet obj get stylesheet cache clear if not sip isdeleted obj obj set Style Sheet get stylesheet obj STYLESHEET
def site enabled config enable site config reload service 'apache 2 '
@conf commands registerdef fletcher 16 checkbytes binbuf offset if len binbuf < offset raise Exception ' Packettooshortforcheckbytes%d' % len binbuf binbuf binbuf[ offset] + '\x 00 \x 00 ' + binbuf[ offset + 2 ] c0 c1 fletcher 16 binbuf x len binbuf - offset - 1 * c0 - c1 % 255 if x < 0 x + 255 y 510 - c0 - x if y > 255 y - 255 return chr x + chr y
def specialized from args signatures args kwargs raise Exception 'yettobeimplemented'
def build auth sub data http request timestamp nonce return '%s%s%s%s' % http request method str http request uri str timestamp nonce
def build auth sub data http request timestamp nonce return '%s%s%s%s' % http request method str http request uri str timestamp nonce
def aggregate metadata delete context aggregate id key IMPL aggregate metadata delete context aggregate id key
def cb Close result from twisted internet import reactorreactor stop
@contextlib contextmanagerdef multimap cores None if cores is None cores max multiprocessing cpu count - 1 1 def wrapper func def wrap self timeout None return func self timeout timeout if timeout is not None else 1e+ 100 return wrap I Map Iterator next wrapper I Map Iterator next pool multiprocessing Pool cores yield pool imap pool terminate
def register optimizer name opt if name in predefined optimizers raise Value Error ' Optimizernamealreadytaken %s' % name predefined optimizers[name] opt
@receiver post save sender Api Access Request dispatch uid 'api access request post save email' def send request email sender instance created **kwargs if created send new pending email instance
def rmsle actual predicted return np sqrt msle actual predicted
def join a *p j afor b in p fs drive path split b if j '' or fs '' or drive '' or path[ 1] in roots j belif j[ -1 ] ' ' j j + b else j j + ' ' + b return j
def get Absolute Folder Path file Path folder Name '' absolute Folder Path os path dirname os path abspath file Path if folder Name '' return absolute Folder Pathreturn os path join absolute Folder Path folder Name
def percentile Rank frame column None kind 'mean' fun lambda xs score percentileofscore remove na xs score kind kind results {}framet frame Tif column is not None if isinstance column Series for date xs in compat iteritems frame T results[date] fun xs column get date Na N else for date xs in compat iteritems frame T results[date] fun xs xs[column] results Series results else for column in frame columns for date xs in compat iteritems framet results setdefault date {} [column] fun xs xs[column] results Data Frame results Treturn results
def percentile Rank frame column None kind 'mean' fun lambda xs score percentileofscore remove na xs score kind kind results {}framet frame Tif column is not None if isinstance column Series for date xs in compat iteritems frame T results[date] fun xs column get date Na N else for date xs in compat iteritems frame T results[date] fun xs xs[column] results Series results else for column in frame columns for date xs in compat iteritems framet results setdefault date {} [column] fun xs xs[column] results Data Frame results Treturn results
def convert to float if possible s try ret float s except Value Error Type Error ret sreturn ret
def quote str return str replace '\\' '\\\\' replace '"' '\\"'
def plot really bad images images really bad image indices [324 582 659 726 846 956 1124 1393 1773 1868 2018 2109 2654 4199 4201 4620 5457 5642 ]n len really bad image indices really bad images [images[j] for j in really bad image indices]fig plt figure figsize 10 2 for j in xrange 1 n + 1 ax fig add subplot 2 9 j ax matshow really bad images[ j - 1 ] cmap matplotlib cm binary plt xticks np array [] plt yticks np array [] plt show
@app route '/ snapshot' def snapshot img cam get Image tf tempfile Named Temporary File suffix ' png' loc 'static/' + tf name split '/' [ -1 ] tf close img save loc print 'location' locprint 'json' json dumps loc return json dumps loc
@app route '/ snapshot' def snapshot img cam get Image tf tempfile Named Temporary File suffix ' png' loc 'static/' + tf name split '/' [ -1 ] tf close img save loc print 'location' locprint 'json' json dumps loc return json dumps loc
@skip 'win 32 ' def test new thread is background import threadglobal donedone Nonedef f global donedone Thread Current Thread Is Backgroundthread start new thread f while done None Thread Sleep 100 Assert done
@skip 'win 32 ' def test new thread is background import threadglobal donedone Nonedef f global donedone Thread Current Thread Is Backgroundthread start new thread f while done None Thread Sleep 100 Assert done
def average clustering G nodes None mode 'dot' if nodes is None nodes Gccs latapy clustering G nodes nodes mode mode return float sum ccs[v] for v in nodes / len nodes
def extend external network default core plugin net res net db if net db external is not None net res[IS DEFAULT] net db external is defaultreturn net res
def extend external network default core plugin net res net db if net db external is not None net res[IS DEFAULT] net db external is defaultreturn net res
def random pages 1 query params {u'list' u'random' u'rnnamespace' 0 u'rnlimit' pages}request wiki request query params titles [page[u'title'] for page in request[u'query'][u'random']]if len titles 1 return titles[ 0 ]return titles
def output xml data code headers None resp make response dumps {'response' data} code resp headers extend headers or {} return resp
def auth username sharedsecret **kwargs return sharedsecret opts get 'sharedsecret'
def get demography template stream model tp dir None if tp dir is None filename sep join [builtin tpl dir model + ' par' ] else filename sep join [tp dir model + ' par' ] with open filename 'r' as f l f readline while l '' stream write l l f readline
def test with settings with other context managers env testval 1 'outer 1 'prev lcwd env lcwddef some task eq env testval 1 'inner 1 ' ok env lcwd endswith 'here' decorated task decorators with settings lcd 'here' testval 1 'inner 1 ' some task decorated task ok env testval 1 'outer 1 ' eq env lcwd prev lcwd
@pytest fixturedef evil member return require user 'evil member' ' Evilmember'
def get data files import sysfrom os path import join abspath dirname exists splitpath abspath dirname file starting points [path]if not path startswith sys prefix starting points append sys prefix for path in starting points while path '/' share jupyter join path 'share' 'jupyter' 'hub' if exists join share jupyter 'static' 'components' return share jupyter path split path return ''
def objects To Strings objects arglist strings proto my Objects objects copy for argname argparser in arglist argparser to Box argname strings my Objects proto return strings
def notebook run path kernel name 'python%d' % sys version info[ 0 ] this file directory os path dirname file errors []with tempfile Named Temporary File suffix ' ipynb' mode 'wt' as fout with open path as f nb nbformat read f as version 4 nb metadata get 'kernelspec' {} ['name'] kernel nameep Execute Preprocessor kernel name kernel name timeout 10 try ep preprocess nb {'metadata' {'path' this file directory}} except Cell Execution Error as e if 'SKIP' in e traceback print str e traceback split '\n' [ -2 ]else raise eexcept Timeout Error as e print efinally nbformat write nb fout return nb errors
def notebook run path kernel name 'python%d' % sys version info[ 0 ] this file directory os path dirname file errors []with tempfile Named Temporary File suffix ' ipynb' mode 'wt' as fout with open path as f nb nbformat read f as version 4 nb metadata get 'kernelspec' {} ['name'] kernel nameep Execute Preprocessor kernel name kernel name timeout 10 try ep preprocess nb {'metadata' {'path' this file directory}} except Cell Execution Error as e if 'SKIP' in e traceback print str e traceback split '\n' [ -2 ]else raise eexcept Timeout Error as e print efinally nbformat write nb fout return nb errors
@instrumented task name 'sentry tasks process buffer process incr' def process incr **kwargs from sentry import appapp buffer process **kwargs
def get processor decline html params payment support email configuration helpers get value 'payment support email' settings PAYMENT SUPPORT EMAIL msg ' Sorry Ourpaymentprocessordidnotacceptyourpayment Thedecisiontheyreturnedwas{decision text} andthereasonwas{reason text} Youwerenotcharged Pleasetryadifferentformofpayment Contactuswithpayment-relatedquestionsat{email} ' formatted msg format decision text '<spanclass "decision">{}</span>' format params['decision'] reason text '<spanclass "reason">{code} {msg}</span>' format code params['reason Code'] msg REASONCODE MAP[params['reason Code']] email payment support email return '<pclass "error msg">{}</p>' format formatted
def is list view path method view if hasattr view 'action' return view action 'list' if method lower 'get' return Falsepath components path strip '/' split '/' if path components and '{' in path components[ -1 ] return Falsereturn True
def is list view path method view if hasattr view 'action' return view action 'list' if method lower 'get' return Falsepath components path strip '/' split '/' if path components and '{' in path components[ -1 ] return Falsereturn True
def show for manager in Gcf get all fig managers pass
def sanitize output output if output is None return ''else return output rstrip '\r\n'
def sanitize output output if output is None return ''else return output rstrip '\r\n'
def is theme dir dir theme sub directories {'lms' 'cms'}return bool os path isdir dir and theme sub directories intersection os listdir dir
def is theme dir dir theme sub directories {'lms' 'cms'}return bool os path isdir dir and theme sub directories intersection os listdir dir
@with settings foo ['foo'] bar {'bar' 'bar'} baz 'baz' qux set 'qux' def test require complex non empty values require 'foo' 'bar' 'baz' 'qux'
def get Rounded To Three Places number return str round number 3
def get Rounded To Three Places number return str round number 3
def can represent dtype dtype return dtype in REPRESENTABLE DTYPES or dtype kind in STRING KINDS
def can represent dtype dtype return dtype in REPRESENTABLE DTYPES or dtype kind in STRING KINDS
def to label name capitalize True label name replace ' ' '' if capitalize label label capitalize return label
def parametrize ternary quadratic eq var coeff diop type classify diop eq dict False if diop type in 'homogeneous ternary quadratic' 'homogeneous ternary quadratic normal' x 0 y 0 z 0 diop ternary quadratic var coeff return parametrize ternary quadratic x 0 y 0 z 0 var coeff
def parametrize ternary quadratic eq var coeff diop type classify diop eq dict False if diop type in 'homogeneous ternary quadratic' 'homogeneous ternary quadratic normal' x 0 y 0 z 0 diop ternary quadratic var coeff return parametrize ternary quadratic x 0 y 0 z 0 var coeff
def lookup Text name timeout None return get Resolver lookup Text name timeout
def parse time timestr for method in [ parse time epoch parse time timestamp parse time now and utc] seconds method timestr if seconds is not None return int seconds raise Value Error " Invalidtimeformat'%s' " % timestr
def parse time timestr for method in [ parse time epoch parse time timestamp parse time now and utc] seconds method timestr if seconds is not None return int seconds raise Value Error " Invalidtimeformat'%s' " % timestr
def parse time timestr for method in [ parse time epoch parse time timestamp parse time now and utc] seconds method timestr if seconds is not None return int seconds raise Value Error " Invalidtimeformat'%s' " % timestr
def get Evaluated String default Value element Node key if element Node None return default Valueif key in element Node attributes return str get Evaluated Value Obliviously element Node key return default Value
def remaining args old Args new Arg List pattern '\\s+' join re escape a for a in new Arg List + '\\s*$' match Obj re search pattern old Args return old Args[match Obj start ]
def remaining args old Args new Arg List pattern '\\s+' join re escape a for a in new Arg List + '\\s*$' match Obj re search pattern old Args return old Args[match Obj start ]
def get product search handler class if settings OSCAR PRODUCT SEARCH HANDLER is not None return import string settings OSCAR PRODUCT SEARCH HANDLER if is solr supported return get class 'catalogue search handlers' ' Product Search Handler' elif is elasticsearch supported return get class 'catalogue search handlers' 'ES Product Search Handler' else return get class 'catalogue search handlers' ' Simple Product Search Handler'
def make script file directory effects builder Script Builder effects fd filename tempfile mkstemp dir directory text True os write fd builder script os close fd os chmod filename 365 return os path basename filename
def wipe disks job disk list for disk in disk list partition wipe filesystem job disk['mountpt']
def create fake repository test case files source repo File Path test case mktemp source repo create Directoryfor key in files new file source repo preauth Child key if not new file parent exists new file parent makedirs new file set Content files[key] return 'file //' + source repo path
@ Profiler profiledef test bulk insert mappings n session Session bind engine session bulk insert mappings Customer [dict name 'customername%d' % i description 'customerdescription%d' % i for i in range n ] session commit
def find executable path None if path is None dirnames os environ['PATH'] split os pathsep suffixes ['th']else dirnames [path]suffixes ['th' os path join 'bin' 'th' os path join 'install' 'bin' 'th' ]for dirname in dirnames dirname dirname strip '"' for suffix in suffixes path os path join dirname suffix if os path isfile path and os access path os X OK return pathreturn None
def get array shape dtype if len shape 2 and shape[ 0 ] 2 x np zeros shape dtype dtype x[ 0 1 ] -1 x[ 1 ] 2return xelif len shape 2 and shape[ 0 ] shape[ 1 ] x np zeros shape dtype dtype j np arange shape[ 0 ] x[ j j ] 2x[ j[ -1 ] j[ -1 ] + 1 ] -1 x[ j[ -1 ] + 1 j[ -1 ] ] -1 return xelse np random seed 1234 return np random randn *shape astype dtype
def get code data position obj end opts element name code position get string data position obj end opts element name return Code code position
def test random sample prob range a db from sequence range 50 npartitions 5 with pytest raises Value Error a random sample -1 with pytest raises Value Error a random sample 1 1
def request user has resource db permission permission type valid method names ['get one' 'get' 'post' 'put' 'delete']def decorate func function name func name if function name not in valid method names raise Exception ' Thisdecoratorshouldonlybeusedtowrap%smethods' % ' ' join valid method names @wraps func def func wrapper *args **kwargs controller instance args[ 0 ]resource id args[ 1 ]get one db method controller instance get one db methodresource db get one db method resource id assert resource db is not None utils assert request user has resource db permission request pecan request resource db resource db permission type permission type return func *args **kwargs return func wrapperreturn decorate
def request user has resource db permission permission type valid method names ['get one' 'get' 'post' 'put' 'delete']def decorate func function name func name if function name not in valid method names raise Exception ' Thisdecoratorshouldonlybeusedtowrap%smethods' % ' ' join valid method names @wraps func def func wrapper *args **kwargs controller instance args[ 0 ]resource id args[ 1 ]get one db method controller instance get one db methodresource db get one db method resource id assert resource db is not None utils assert request user has resource db permission request pecan request resource db resource db permission type permission type return func *args **kwargs return func wrapperreturn decorate
def request user has resource db permission permission type valid method names ['get one' 'get' 'post' 'put' 'delete']def decorate func function name func name if function name not in valid method names raise Exception ' Thisdecoratorshouldonlybeusedtowrap%smethods' % ' ' join valid method names @wraps func def func wrapper *args **kwargs controller instance args[ 0 ]resource id args[ 1 ]get one db method controller instance get one db methodresource db get one db method resource id assert resource db is not None utils assert request user has resource db permission request pecan request resource db resource db permission type permission type return func *args **kwargs return func wrapperreturn decorate
@with setup prepare stdout def test output with failed colorless with table runner Runner feature name 'failed table' verbosity 3 no color True runner run assert stdout lines with traceback u'\n Feature Table Fail#tests/functional/output features/failed table/failed table feature 1\n\n Scenario Seeitfail#tests/functional/output features/failed table/failed table feature 2\n Given Ihaveadumbstepthatpasses\u 2665 #tests/functional/output features/failed table/failed table steps py 20 \n Andthisonefails#tests/functional/output features/failed table/failed table steps py 24 \n Traceback mostrecentcalllast \n File"% lettuce core file s" line% call line d in call \nret self function self step *args **kw \n File"% step file s" line 25 intof\nassert False\n Assertion Error\n Thenthisonewillbeskipped#tests/functional/output features/failed table/failed table steps py 28 \n Andthisonewillbeskipped#tests/functional/output features/failed table/failed table steps py 28 \n Andthisonedoesnotevenhasdefinition#tests/functional/output features/failed table/failed table feature 12 undefined \n\n 1 feature 0passed \n 1 scenario 0passed \n 5 steps 1failed 2skipped 1undefined 1passed \n\n Youcanimplementstepdefinitionsforundefinedstepswiththesesnippets \n\n#-*-coding utf- 8 -*-\nfromlettuceimportstep\n\n@step u\' Andthisonedoesnotevenhasdefinition\' \ndefand this one does not even has definition step \nassert False \' Thisstepmustbeimplemented\'\n\n Listoffailedscenarios \n Scenario Seeitfail#tests/functional/output features/failed table/failed table feature 2\n\n' % {'lettuce core file' lettuce path 'core py' 'step file' abspath lettuce path ' ' 'tests' 'functional' 'output features' 'failed table' 'failed table steps py' 'call line' call line}
def cyclic find subseq alphabet string ascii lowercase n None if isinstance subseq int long width 'all' if n is None else n * 8 subseq packing pack subseq width 'little' False if n is None and len subseq 4 log warn once 'cyclic find expects 4 -bytesubsequencesbydefault yougave%r\n' % subseq + ' Unlessyouspecifiedcyclic n %i youprobablyjustwantthefirst 4 bytes \n' % len subseq + ' Truncatingthedataat 4 bytes Specifycyclic find n %i tooverridethis ' % len subseq subseq subseq[ 4]if any c not in alphabet for c in subseq return -1 n n or len subseq return gen find subseq de bruijn alphabet n
def build match conditions doctype as condition True import frappe desk reportviewreturn frappe desk reportview build match conditions doctype as condition
def nearest real complex idx fro to which assert which in 'real' 'complex' order np argsort np abs fro - to mask np isreal fro[order] if which 'complex' mask ~ mask return order[np where mask [0 ][ 0 ]]
def list team repos team name profile 'github' ignore cache False cached team get team team name profile profile if not cached team log error ' Team{ 0 }doesnotexist ' format team name return Falseif cached team get 'repos' and not ignore cache return cached team get 'repos' try client get client profile organization client get organization get config value profile 'org name' team organization get team cached team['id'] except Unknown Object Exception as e log exception ' Resourcenotfound {0 }' format cached team['id'] try repos {}for repo in team get repos permission 'pull'if repo permissions admin permission 'admin'elif repo permissions push permission 'push'repos[repo name lower ] {'permission' permission}cached team['repos'] reposreturn reposexcept Unknown Object Exception as e log exception ' Resourcenotfound {0 }' format cached team['id'] return []
def slow t t slow Truereturn t
def logarithmic return [ dimensionless unscaled function units dex np log 10 lambda x 10 0 ** x ]
def logarithmic return [ dimensionless unscaled function units dex np log 10 lambda x 10 0 ** x ]
def check even rewrite func arg return func arg args[ 0 ] - arg
def pages to list items objs []while True try page items next for item in page objs append item except Generator Exit breakreturn objs
def redirect To URL request if isinstance URL unicode raise Type Error ' Unicodeobjectnotallowedas URL' request set Header ' Content- Type' 'text/html charset utf- 8 ' request redirect URL content '\n<html>\n<head>\n<metahttp-equiv "refresh"content "0 URL % url s">\n</head>\n<bodybgcolor "#FFFFFF"text "# 000000 ">\n<ahref "% url s">clickhere</a>\n</body>\n</html>\n' % {'url' native String URL } if PY 3 content content encode 'utf 8 ' return content
def get lexer for mimetype mime **options for modname name mimetypes in LEXERS itervalues if mime in mimetypes if name not in lexer cache load lexers modname return lexer cache[name] **options for cls in find plugin lexers if mime in cls mimetypes return cls **options raise Class Not Found 'nolexerformimetype%rfound' % mime
def pause Unpause n d defer Deferred def f result return resultd callback 1 d pause for i in xrange n d add Callback f d add Errback f d add Both f d add Callbacks f d unpause
def pause Unpause n d defer Deferred def f result return resultd callback 1 d pause for i in xrange n d add Callback f d add Errback f d add Both f d add Callbacks f d unpause
@celery app task base Archiver Task ignore result False @logged 'make copy request' def make copy request job pk url data create app context job Archive Job load job pk src dst user job info provider data['source']['provider']logger info ' Sendingcopyrequestforaddon {0 }onnode {1 }' format provider dst id res requests post url data json dumps data if res status code not in http OK http CREATED http ACCEPTED raise HTTP Error res status code
@celery app task base Archiver Task ignore result False @logged 'make copy request' def make copy request job pk url data create app context job Archive Job load job pk src dst user job info provider data['source']['provider']logger info ' Sendingcopyrequestforaddon {0 }onnode {1 }' format provider dst id res requests post url data json dumps data if res status code not in http OK http CREATED http ACCEPTED raise HTTP Error res status code
@memoizeddef check badchars data chars None if to int data is None to search dataelse data to hex to int data [2 ]if len data % 2 0 data '0 ' + data to search codecs decode data 'hex' if not chars chars config Option get 'badchars' if chars for c in chars if c in to search return Truereturn False
@memoizeddef check badchars data chars None if to int data is None to search dataelse data to hex to int data [2 ]if len data % 2 0 data '0 ' + data to search codecs decode data 'hex' if not chars chars config Option get 'badchars' if chars for c in chars if c in to search return Truereturn False
def git version process subprocess Popen [u'git' u'--version'] stdout subprocess PIPE stdout stderr process communicate assert process returncode 0 u' Failedtodeterminegitversion 'matches re search u'\\s \\d+ ? \\ \\d+ * [\\s\\ ]' stdout return Revision lenient matches group 1
def stash conf values conf {'bind host' CONF bind host 'bind port' CONF bind port 'tcp keepidle' CONF cert file 'backlog' CONF backlog 'key file' CONF key file 'cert file' CONF cert file}return conf
def no skip on missing deps wrapped @functools wraps wrapped def wrapper *args **kwargs try return wrapped *args **kwargs except testtools Test Case skip Exception unittest 2 case Skip Test as e if base bool from env 'OS FAIL ON MISSING DEPS' tools fail '%scannotbeskippedbecause OS FAIL ON MISSING DEP Sisenabled skipreason %s' % wrapped name e raisereturn wrapper
def no skip on missing deps wrapped @functools wraps wrapped def wrapper *args **kwargs try return wrapped *args **kwargs except testtools Test Case skip Exception unittest 2 case Skip Test as e if base bool from env 'OS FAIL ON MISSING DEPS' tools fail '%scannotbeskippedbecause OS FAIL ON MISSING DEP Sisenabled skipreason %s' % wrapped name e raisereturn wrapper
def get safe url url parts urlsplit url if parts username is None return urlelse frags list parts if parts port frags[ 1 ] '{ 0 }@{ 1 } {2 }' format parts username parts hostname parts port else frags[ 1 ] '{ 0 }@{ 1 }' format parts username parts hostname return urlunsplit frags
def configure environment if 'HTTP ACCEPT LANGUAGE' not in os environ os environ['HTTP ACCEPT LANGUAGE'] DEFAULT LOCALE Sif 'TOOL SHED TEST FILE DIR' not in os environ os environ['TOOL SHED TEST FILE DIR'] TOOL SHED TEST DAT Aos environ['GALAXY TEST ENVIRONMENT CONFIGURED'] '1 '
def modified pelican run self context self settings copy context['filenames'] {}context['localsiteurl'] self settings['SITEURL']generators [cls context context settings self settings path self path theme self theme output path self output path for cls in self get generator classes ]for p in generators if hasattr p 'generate context' p generate context writer self get writer for p in generators if hasattr p 'generate output' p generate output writer next g for g in generators if isinstance g Articles Generator next g for g in generators if isinstance g Pages Generator return context
def modified pelican run self context self settings copy context['filenames'] {}context['localsiteurl'] self settings['SITEURL']generators [cls context context settings self settings path self path theme self theme output path self output path for cls in self get generator classes ]for p in generators if hasattr p 'generate context' p generate context writer self get writer for p in generators if hasattr p 'generate output' p generate output writer next g for g in generators if isinstance g Articles Generator next g for g in generators if isinstance g Pages Generator return context
def var str name shape size np prod shape ind np indices shape + 1 reshape -1 size names [ '[' + ' ' join map str i + ']' for i in zip *ind ]names[ 0 ] '%s%s' % name names[ 0 ] return names
@ File System in directory current directory 'django' 'alfaces' def test limit by app getting one app status out commands getstatusoutput 'pythonmanage pyharvest--verbosity 3--no-color--apps foobar' assert equals status 0 out assert ' Testthedjangoapp DONOTHING' not in out assert ' Testthedjangoapp FOOBAR' in out
def json 2 list jsonstr if jsonstr '' value list []else if jsonstr[ 0 ] '[' value list json 2 py jsonstr else value list jsonstr split ' ' if not isinstance value list list value list [value list]return value list
def escape pattern if isinstance pattern str alphanum alphanum strs list pattern for i c in enumerate pattern if c not in alphanum if c '\x 00 ' s[i] '\\ 000 'else s[i] '\\' + c return '' join s else alphanum alphanum bytess []esc ord '\\' for c in pattern if c in alphanum s append c elif c 0 s extend '\\ 000 ' else s append esc s append c return bytes s
@app route '/scans/<int scan id>/exceptions/' methods ['GET'] @requires authdef list exceptions scan id scan info get scan info from id scan id if scan info is None abort 404 ' Scannotfound' data []all exceptions scan info w3 af core exception handler get all exceptions for exception id exception data in enumerate all exceptions data append exception to json exception data scan id exception id return jsonify {'items' data}
@app route '/scans/<int scan id>/exceptions/' methods ['GET'] @requires authdef list exceptions scan id scan info get scan info from id scan id if scan info is None abort 404 ' Scannotfound' data []all exceptions scan info w3 af core exception handler get all exceptions for exception id exception data in enumerate all exceptions data append exception to json exception data scan id exception id return jsonify {'items' data}
def recv until sock suffix message sock recv 4096 if not message raise EOF Error 'socketclosed' while not message endswith suffix data sock recv 4096 if not data raise IO Error 'received{ r}thensocketclosed' format message message + datareturn message
def Dispatch With Events clsid user event class disp Dispatch clsid if not disp class dict get 'CLSID' try ti disp oleobj Get Type Info disp clsid ti Get Type Attr [0 ] tlb index ti Get Containing Type Lib tla tlb Get Lib Attr gencache Ensure Module tla[ 0 ] tla[ 1 ] tla[ 3 ] tla[ 4 ] b Validate File 0 disp class gencache Get Class For Prog ID str disp clsid except pythoncom com error raise Type Error ' This CO Mobjectcannotautomatethemakepyprocess-pleaserunmakepymanuallyforthisobject' else disp class disp class clsid disp class CLSI Dtry from types import Class Type as new typeexcept Import Error new type typeevents class getevents clsid if events class is None raise Value Error ' This CO Mobjectdoesnotsupportevents ' result class new type 'COM Event Class' disp class events class user event class {' setattr ' event setattr } instance result class disp oleobj events class init instance instance if hasattr user event class ' init ' user event class init instance return Events Proxy instance
def softmax X tmp X - X max axis 1 [ np newaxis] np exp tmp out X X / X sum axis 1 [ np newaxis]return X
def get provide specs and objects category return load provide objects category copy
def trigger event event None **kwargs res {'result' False 'message' ' Somethingwentwrong'}data {}for value in 'value 1 ' 'value 2 ' 'value 3 ' ' Value 1 ' ' Value 2 ' ' Value 3 ' if value in kwargs data[value lower ] kwargs[value]data['occurredat'] time strftime '%B%d %Y%I %M%p' time localtime result query event event method 'POST' data json dumps data if 'status' in result if result['status'] 200 res['result'] Trueres['message'] result['text']elif 'error' in result res['message'] result['error']return res
def Mutable Named Tuple Row cursor from recordtype import recordtypeattr names [x[ 0 ] for x in cursor Col Buffer List]class Row recordtype ' Row' attr names rename True cursor description cursor descriptiondef init self iterable super Row self init *iterable def iter self for field name in self slots yield getattr self field name def getitem self index if isinstance index slice return tuple getattr self x for x in self slots [index] return getattr self self slots [index] def setitem self index value setattr self self slots [index] value return Row
def Mutable Named Tuple Row cursor from recordtype import recordtypeattr names [x[ 0 ] for x in cursor Col Buffer List]class Row recordtype ' Row' attr names rename True cursor description cursor descriptiondef init self iterable super Row self init *iterable def iter self for field name in self slots yield getattr self field name def getitem self index if isinstance index slice return tuple getattr self x for x in self slots [index] return getattr self self slots [index] def setitem self index value setattr self self slots [index] value return Row
def hashable obj if not obj hash return str obj return obj
def message get context message id return IMPL message get context message id
@contextlib contextmanagerdef profiling profile start yield profile stop
@contextlib contextmanagerdef profiling profile start yield profile stop
def ensure requested network ordering accessor unordered preferred if preferred unordered sort key lambda i preferred index accessor i
def logsumexp arr axis 0 arr np rollaxis arr axis vmax arr max axis 0 out np log np sum np exp arr - vmax axis 0 out + vmaxreturn out
def get service hass config discovery info None host config get CONF HOST port config get CONF PORT return Lannouncer Notification Service hass host port
def test config alterations instance class Line Config Config no prefix Trueshow legend Falsefill Truepretty print Truex labels ['a' 'b' 'c']config Line Config line 1 Line config line 1 add ' ' [1 2 3] l1 line 1 render config stroke Falseline 2 Line config line 2 add ' ' [1 2 3] l2 line 2 render assert l1 l2 l1 bis line 1 render assert l1 l1 bis
def test config alterations instance class Line Config Config no prefix Trueshow legend Falsefill Truepretty print Truex labels ['a' 'b' 'c']config Line Config line 1 Line config line 1 add ' ' [1 2 3] l1 line 1 render config stroke Falseline 2 Line config line 2 add ' ' [1 2 3] l2 line 2 render assert l1 l2 l1 bis line 1 render assert l1 l1 bis
def read path attribute **kwargs kwargs salt utils clean kwargs **kwargs hex kwargs pop 'hex' False if kwargs salt utils invalid kwargs kwargs cmd ['xattr' '-p']if hex cmd append '-x' cmd extend [attribute path] try ret salt utils mac utils execute return result cmd except Command Execution Error as exc if ' Nosuchfile' in exc strerror raise Command Execution Error ' Filenotfound {0 }' format path if ' Nosuchxattr' in exc strerror raise Command Execution Error ' Attributenotfound {0 }' format attribute raise Command Execution Error ' Unknown Error {0 }' format exc strerror return ret
def get *keyname mdata check mdata get ret {}if len keyname 0 keyname list for k in keyname if mdata cmd '{ 0 }{ 1 }' format mdata k res salt ['cmd run all'] cmd ret[k] res['stdout'] if res['retcode'] 0 else '' else ret[k] ''return ret
def guided tour finished if request ajax True utable s3 db tour userperson id auth s3 logged in person query utable person id person id & utable tour config id request post vars tour id db query update resume '' completed True trip counter utable trip counter + 1 return json dumps {} else redirect URL f 'config'
def decorate fn with doc new fn old fn additional text '' def wrapper *args **kw return new fn *args **kw if old fn doc wrapper doc old fn doc + additional text return wrapper
def str endswith arr pat na np nan f lambda x x endswith pat return na map f arr na dtype bool
def str endswith arr pat na np nan f lambda x x endswith pat return na map f arr na dtype bool
def diop general pythagorean eq param symbols 'm' integer True var coeff diop type classify diop eq dict False if diop type 'general pythagorean' return diop general pythagorean var coeff param
def check cdf slope cdf norm intensity np linspace 0 1 len cdf slope intercept np polyfit norm intensity cdf 1 assert 0 9 < slope < 1 1
def virtual if virtualname not in opts ['fileserver backend'] return Falsetry salt utils gitfs Git FS opts return virtualname except Fileserver Config Error passreturn False
def virtual if virtualname not in opts ['fileserver backend'] return Falsetry salt utils gitfs Git FS opts return virtualname except Fileserver Config Error passreturn False
@permission required [ ' Account Lookup' ' View' ] def app activity request addon id app get object or 404 Webapp with deleted pk addon id user items Activity Log objects for apps [app] exclude action in mkt LOG HIDE DEVELOPER admin items Activity Log objects for apps [app] filter action in mkt LOG HIDE DEVELOPER user items paginate request user items per page 20 admin items paginate request admin items per page 20 return render request 'lookup/app activity html' {'admin items' admin items 'app' app 'user items' user items}
def extract patch textid os downsample temp '${PYLEARN 2 DATA PATH}/textures/brodatz/D%i gif' % textid fname string utils preprocess temp img i Image open fname img i img i resize img i size[ 0 ] / downsample img i size[ 1 ] / downsample Image BILINEAR x numpy random randint 0 img i size[ 0 ] - os y numpy random randint 0 img i size[ 1 ] - os patch img i crop x y x + os y + os return patch x y
def info contact points None port None cql user None cql pass None query 'selectcluster name \ndata center \npartitioner \nhost id \nrack \nrelease version \ncql version \nschema version \nthrift version\nfromsystem local\nlimit 1 'ret {}try ret cql query query contact points port cql user cql pass except Command Execution Error log critical ' Couldnotlist Cassandrainfo ' raiseexcept Base Exception as e log critical ' Unexpectederrorwhilelisting Cassandrainfo {0 }' format str e raisereturn ret
def run with *drivers def decorator test if isinstance test type and issubclass test Test Base for attr in dir test value getattr test attr if callable value and attr startswith 'test ' if six PY 3 value run with driverselse value func run with driverselse test run with driversreturn testreturn decorator
def find all simple path results os path join base file for base dirs files in os walk path followlinks True for file in files return filter os path isfile results
def get debug info func def debug info replacement self **form try if 'debugcount' not in form raise Value Error ' Youmustprovideadebugcountparameter' debugcount form pop 'debugcount' try debugcount int debugcount except Value Error raise Value Error ' Badvaluefordebugcount' if debugcount not in self debug infos raise Value Error ' Debug%snolongerfound maybeithasexpired? ' % debugcount debug info self debug infos[debugcount]return func self debug info debug info **form except Value Error as e form['headers']['status'] '500 Server Error'return '<html> Therewasanerror %s</html>' % html quote e return debug info replacement
def get debug info func def debug info replacement self **form try if 'debugcount' not in form raise Value Error ' Youmustprovideadebugcountparameter' debugcount form pop 'debugcount' try debugcount int debugcount except Value Error raise Value Error ' Badvaluefordebugcount' if debugcount not in self debug infos raise Value Error ' Debug%snolongerfound maybeithasexpired? ' % debugcount debug info self debug infos[debugcount]return func self debug info debug info **form except Value Error as e form['headers']['status'] '500 Server Error'return '<html> Therewasanerror %s</html>' % html quote e return debug info replacement
def make nxm w *args **kw t fix types kw pop 'type' nxm maskable numeric entry ok Falsefor tt in t if issubclass tt nxm maskable ok Truebreakif not ok t insert 0 nxm maskable return make nxm type t *args **kw
def freemem conn get conn mem conn get Info [1 ]mem - 256 for vm in list domains dom get domain vm if dom ID > 0 mem - dom info [2 ] / 1024 return mem
def freemem conn get conn mem conn get Info [1 ]mem - 256 for vm in list domains dom get domain vm if dom ID > 0 mem - dom info [2 ] / 1024 return mem
def freemem conn get conn mem conn get Info [1 ]mem - 256 for vm in list domains dom get domain vm if dom ID > 0 mem - dom info [2 ] / 1024 return mem
def freemem conn get conn mem conn get Info [1 ]mem - 256 for vm in list domains dom get domain vm if dom ID > 0 mem - dom info [2 ] / 1024 return mem
def freemem conn get conn mem conn get Info [1 ]mem - 256 for vm in list domains dom get domain vm if dom ID > 0 mem - dom info [2 ] / 1024 return mem
def line line poly toolpath Polygon x1 y1 x2 y2 linepoly add Point toolpath Point x1 y1 poly add Point toolpath Point x2 y2 return poly
def line line poly toolpath Polygon x1 y1 x2 y2 linepoly add Point toolpath Point x1 y1 poly add Point toolpath Point x2 y2 return poly
def collect names match lambda name True match dir lambda name True for name in names if os path isdir name for root dirs filenames in os walk name dirs[ ] [dir for dir in dirs if match dir dir ]for filename in filenames if match filename yield os path join root filename else yield name
def Range s1 s2 None if s2 result Code Range ord s1 ord s2 + 1 result str ' Range %s %s ' % s1 s2 else ranges []for i in range 0 len s1 2 ranges append Code Range ord s1 [i] ord s1 [ i + 1 ] + 1 result Alt *ranges result str ' Range %s ' % repr s1 return result
def create vlan interface namespace port name mac address ip address vlan tag ip wrap ip lib IP Wrapper namespace dev name '%s %d' % port name vlan tag ip wrap add vlan dev name port name vlan tag dev ip wrap device dev name dev addr add str ip address dev link set address mac address dev link set up return dev
def create vlan interface namespace port name mac address ip address vlan tag ip wrap ip lib IP Wrapper namespace dev name '%s %d' % port name vlan tag ip wrap add vlan dev name port name vlan tag dev ip wrap device dev name dev addr add str ip address dev link set address mac address dev link set up return dev
def distrib codename with settings hide 'running' 'stdout' return run 'lsb release--codename--short'
def get fc hbas info hbas get fc hbas hbas info []for hba in hbas wwpn hba['port name'] replace '0 x' '' wwnn hba['node name'] replace '0 x' '' device path hba[' Class Devicepath']device hba[' Class Device']hbas info append {'port name' wwpn 'node name' wwnn 'host device' device 'device path' device path} return hbas info
def weight variable shape initial tf zeros shape return tf Variable initial
def install build utils apt install BUILD UTILS PKGS
def dpid to str dpid always Long False if type dpid is long or type dpid is int dpid struct pack ' Q' dpid assert len dpid 8 r '-' join [ '% 02 x' % ord x for x in dpid[ 2 ]] if always Long or dpid[ 0 2] '\x 00 ' * 2 r + ' ' + str struct unpack ' H' dpid[ 0 2] [0 ] return r
def Canonicalize node output None **kw if output apply implementation node output write kw else s String IO String IO apply implementation node s write kw return s getvalue
def strict eq x y tracebackhide Trueassert x y assert issubclass type x type y or issubclass type y type x if isinstance x dict and isinstance y dict x sorted x items y sorted y items elif isinstance x set and isinstance y set x sorted x y sorted y assert repr x repr y
def strict eq x y tracebackhide Trueassert x y assert issubclass type x type y or issubclass type y type x if isinstance x dict and isinstance y dict x sorted x items y sorted y items elif isinstance x set and isinstance y set x sorted x y sorted y assert repr x repr y
def getinfos dns spec infos {}fullinfos {}fields {'domain' 'value' 'domaintarget' 'targetval'}for field in fields try if fields[field] not in spec continueinfos[field] []fullinfos[field] []for domain in utils get domains spec get 'full' + fields[field] spec[fields[field]] infos[field] append domain[ utils MAXVALLEN] if len domain > utils MAXVALLEN fullinfos[field] append domain if not infos[field] del infos[field]if not fullinfos[field] del fullinfos[field]except Exception passres {}if infos res['infos'] infosif fullinfos res['fullinfos'] fullinfosreturn res
def main for line in MARKDOWN TEMPLATE splitlines if line startswith '$tag ' print Tag line build help else print line
def main for line in MARKDOWN TEMPLATE splitlines if line startswith '$tag ' print Tag line build help else print line
def get Visible Objects archivable Objects visible Objects []for archivable Object in archivable Objects if archivable Object get Visible visible Objects append archivable Object return visible Objects
def strip user meta prefix server type key return key[len get user meta prefix server type ]
def You Complete Me Instance custom options {} def Decorator test @functools wraps test def Wrapper *args **kwargs ycm You Complete Me Make User Options custom options Wait Until Ready try test ycm *args **kwargs finally Stop Server ycm return Wrapperreturn Decorator
def dict with extra specs if authorized context inst type query inst type dict dict inst type query if not is admin context context del inst type dict['extra specs']else extra specs {x['key'] x['value'] for x in inst type query['extra specs']}inst type dict['extra specs'] extra specsreturn inst type dict
def camelcase string return u'' join word capitalize for word in re split u'[- ]' string
def camelcase string return u'' join word capitalize for word in re split u'[- ]' string
def enabled name **kwargs ret {'name' name 'changes' {} 'result' True 'comment' ''}ret update enable name None **kwargs return ret
def send feedback message email recipient id feedback messages email subject " You'vereceived%snewmessage%sonyourexplorations" % len feedback messages 's' if len feedback messages > 1 else '' email body template ' Hi%s <br><br> You\'vereceived%snewmessage%sonyour Oppiaexplorations <br><ul>%s</ul> Youcanviewandreplytoyourmessagesfromyour<ahref "https //www oppia org/dashboard">dashboard</a> <br> Thanks andhappyteaching <br><br> Bestwishes <br> The Oppia Team<br><br>%s'if not feconf CAN SEND EMAILS log new error ' Thisappcannotsendemailstousers ' returnif not feconf CAN SEND FEEDBACK MESSAGE EMAILS log new error ' Thisappcannotsendfeedbackmessageemailstousers ' returnif not feedback messages returnrecipient user settings user services get user settings recipient id messages html ''for reference in feedback messages iteritems for message in reference['messages'] messages html + '<li>%s %s<br></li>' % reference['title'] message email body email body template % recipient user settings username len feedback messages 's' if len feedback messages > 1 else '' messages html EMAIL FOOTER value send email recipient id feconf SYSTEM COMMITTER ID feconf EMAIL INTENT FEEDBACK MESSAGE NOTIFICATION email subject email body feconf NOREPLY EMAIL ADDRESS
def send feedback message email recipient id feedback messages email subject " You'vereceived%snewmessage%sonyourexplorations" % len feedback messages 's' if len feedback messages > 1 else '' email body template ' Hi%s <br><br> You\'vereceived%snewmessage%sonyour Oppiaexplorations <br><ul>%s</ul> Youcanviewandreplytoyourmessagesfromyour<ahref "https //www oppia org/dashboard">dashboard</a> <br> Thanks andhappyteaching <br><br> Bestwishes <br> The Oppia Team<br><br>%s'if not feconf CAN SEND EMAILS log new error ' Thisappcannotsendemailstousers ' returnif not feconf CAN SEND FEEDBACK MESSAGE EMAILS log new error ' Thisappcannotsendfeedbackmessageemailstousers ' returnif not feedback messages returnrecipient user settings user services get user settings recipient id messages html ''for reference in feedback messages iteritems for message in reference['messages'] messages html + '<li>%s %s<br></li>' % reference['title'] message email body email body template % recipient user settings username len feedback messages 's' if len feedback messages > 1 else '' messages html EMAIL FOOTER value send email recipient id feconf SYSTEM COMMITTER ID feconf EMAIL INTENT FEEDBACK MESSAGE NOTIFICATION email subject email body feconf NOREPLY EMAIL ADDRESS
def send feedback message email recipient id feedback messages email subject " You'vereceived%snewmessage%sonyourexplorations" % len feedback messages 's' if len feedback messages > 1 else '' email body template ' Hi%s <br><br> You\'vereceived%snewmessage%sonyour Oppiaexplorations <br><ul>%s</ul> Youcanviewandreplytoyourmessagesfromyour<ahref "https //www oppia org/dashboard">dashboard</a> <br> Thanks andhappyteaching <br><br> Bestwishes <br> The Oppia Team<br><br>%s'if not feconf CAN SEND EMAILS log new error ' Thisappcannotsendemailstousers ' returnif not feconf CAN SEND FEEDBACK MESSAGE EMAILS log new error ' Thisappcannotsendfeedbackmessageemailstousers ' returnif not feedback messages returnrecipient user settings user services get user settings recipient id messages html ''for reference in feedback messages iteritems for message in reference['messages'] messages html + '<li>%s %s<br></li>' % reference['title'] message email body email body template % recipient user settings username len feedback messages 's' if len feedback messages > 1 else '' messages html EMAIL FOOTER value send email recipient id feconf SYSTEM COMMITTER ID feconf EMAIL INTENT FEEDBACK MESSAGE NOTIFICATION email subject email body feconf NOREPLY EMAIL ADDRESS
def Does Test Have Labels cls labels labels set labels for name in dir cls if name startswith 'test' item getattr cls name None if labels intersection getattr item 'labels' set ['small'] return Truereturn False
def Does Test Have Labels cls labels labels set labels for name in dir cls if name startswith 'test' item getattr cls name None if labels intersection getattr item 'labels' set ['small'] return Truereturn False
def expand item item ret {}ret update item dict return ret
def find skips start TESTDIR results {}debug ' Searchingin%s' start for root dirs files in os walk start for name in files if name startswith 'test ' and name endswith 'py' path os path join root name debug ' Searchingin%s' path temp result find skips in file path for method name bug no in temp result if results get bug no result dict results get bug no if result dict get name result dict[name] append method name else result dict[name] [method name]results[bug no] result dictelse results[bug no] {name [method name]}return results
def find skips start TESTDIR results {}debug ' Searchingin%s' start for root dirs files in os walk start for name in files if name startswith 'test ' and name endswith 'py' path os path join root name debug ' Searchingin%s' path temp result find skips in file path for method name bug no in temp result if results get bug no result dict results get bug no if result dict get name result dict[name] append method name else result dict[name] [method name]results[bug no] result dictelse results[bug no] {name [method name]}return results
def get effective user requesting user target username if target username requesting user username return requesting userelif target username '' return Anonymous User elif can view courses for username requesting user target username return User objects get username target username else raise Permission Denied
def get effective user requesting user target username if target username requesting user username return requesting userelif target username '' return Anonymous User elif can view courses for username requesting user target username return User objects get username target username else raise Permission Denied
def path to 3d segment path zs 0 zdir u'z' if not iterable zs zs np ones len path * zs seg []pathsegs path iter segments simplify False curves False for x y code z in zip pathsegs zs seg append x y z seg 3 d [juggle axes x y z zdir for x y z in seg]return seg 3 d
def wrap clause in parens sql if sql strip sql u' {} ' format sql return sa text sql
def get addons request addons addon id action items []a Menu Item a selected not addon id a text a url ' All My Add-ons' reverse 'devhub feed all' if action a url + '?action ' + action items append a for addon in addons item Menu Item try item selected addon id and addon id int addon id except Value Error passurl reverse 'devhub feed' args [addon slug] if action url + '?action ' + action item text item url addon name url items append item return items
@register simple tagdef bootstrap field *args **kwargs return render field *args **kwargs
@register simple tagdef bootstrap field *args **kwargs return render field *args **kwargs
def raises exc func *args **kwds try func *args **kwds except exc passelse raise Assertion Error '%sdidnotraise%s' % func name excstr exc
def raises exc func *args **kwds try func *args **kwds except exc passelse raise Assertion Error '%sdidnotraise%s' % func name excstr exc
def raises exc func *args **kwds try func *args **kwds except exc passelse raise Assertion Error '%sdidnotraise%s' % func name excstr exc
def create http server host None port 0 try http HTTP Server http bind host host port port except OS Error as err console exit ' Failedtocreate HTT Pserver {0 }' err return http
def find loader fullname for importer in iter importers fullname loader importer find module fullname if loader is not None return loaderreturn None
@profiler trace@memoizeddef tenant quota usages request tenant id None if not tenant id tenant id request user project iddisabled quotas get disabled quotas request usages Quota Usage for quota in get tenant quota data request disabled quotas disabled quotas tenant id tenant id usages add quota quota get tenant compute usages request usages disabled quotas tenant id get tenant network usages request usages disabled quotas tenant id get tenant volume usages request usages disabled quotas tenant id return usages
@profiler trace@memoizeddef tenant quota usages request tenant id None if not tenant id tenant id request user project iddisabled quotas get disabled quotas request usages Quota Usage for quota in get tenant quota data request disabled quotas disabled quotas tenant id tenant id usages add quota quota get tenant compute usages request usages disabled quotas tenant id get tenant network usages request usages disabled quotas tenant id get tenant volume usages request usages disabled quotas tenant id return usages
def twiny ax None if ax is None ax gca ax 1 ax twiny draw if interactive return ax 1
def trim tables ignore fields default fields + optional fields for doctype in frappe db get all u' Doc Type' filters {u'issingle' 0} doctype doctype namecolumns frappe db get table columns doctype fields frappe get meta doctype get fieldnames with value columns to remove [f for f in list set columns - set fields if f not in ignore fields and not f startswith u' ' ]if columns to remove print doctype u'columnsremoved ' columns to removecolumns to remove u' ' join [u'drop`{ 0 }`' format c for c in columns to remove] query u'altertable`tab{doctype}`{columns}' format doctype doctype columns columns to remove frappe db sql ddl query
def trim tables ignore fields default fields + optional fields for doctype in frappe db get all u' Doc Type' filters {u'issingle' 0} doctype doctype namecolumns frappe db get table columns doctype fields frappe get meta doctype get fieldnames with value columns to remove [f for f in list set columns - set fields if f not in ignore fields and not f startswith u' ' ]if columns to remove print doctype u'columnsremoved ' columns to removecolumns to remove u' ' join [u'drop`{ 0 }`' format c for c in columns to remove] query u'altertable`tab{doctype}`{columns}' format doctype doctype columns columns to remove frappe db sql ddl query
def trim tables ignore fields default fields + optional fields for doctype in frappe db get all u' Doc Type' filters {u'issingle' 0} doctype doctype namecolumns frappe db get table columns doctype fields frappe get meta doctype get fieldnames with value columns to remove [f for f in list set columns - set fields if f not in ignore fields and not f startswith u' ' ]if columns to remove print doctype u'columnsremoved ' columns to removecolumns to remove u' ' join [u'drop`{ 0 }`' format c for c in columns to remove] query u'altertable`tab{doctype}`{columns}' format doctype doctype columns columns to remove frappe db sql ddl query
def trim tables ignore fields default fields + optional fields for doctype in frappe db get all u' Doc Type' filters {u'issingle' 0} doctype doctype namecolumns frappe db get table columns doctype fields frappe get meta doctype get fieldnames with value columns to remove [f for f in list set columns - set fields if f not in ignore fields and not f startswith u' ' ]if columns to remove print doctype u'columnsremoved ' columns to removecolumns to remove u' ' join [u'drop`{ 0 }`' format c for c in columns to remove] query u'altertable`tab{doctype}`{columns}' format doctype doctype columns columns to remove frappe db sql ddl query
def trim tables ignore fields default fields + optional fields for doctype in frappe db get all u' Doc Type' filters {u'issingle' 0} doctype doctype namecolumns frappe db get table columns doctype fields frappe get meta doctype get fieldnames with value columns to remove [f for f in list set columns - set fields if f not in ignore fields and not f startswith u' ' ]if columns to remove print doctype u'columnsremoved ' columns to removecolumns to remove u' ' join [u'drop`{ 0 }`' format c for c in columns to remove] query u'altertable`tab{doctype}`{columns}' format doctype doctype columns columns to remove frappe db sql ddl query
def permission name name def wraps f f permission name namereturn freturn wraps
def permission name name def wraps f f permission name namereturn freturn wraps
def test launch about app client logged in client client click jquery ' "img hue-swoosh" [0 ]' client waits for Element classname ' Hue-ABOUT' timeout '2000 '
def test login logout client rv login client flaskr app config['USERNAME'] flaskr app config['PASSWORD'] assert ' Youwereloggedin' in rv data rv logout client assert ' Youwereloggedout' in rv data rv login client flaskr app config['USERNAME'] + 'x' flaskr app config['PASSWORD'] assert ' Invalidusername' in rv data rv login client flaskr app config['USERNAME'] flaskr app config['PASSWORD'] + 'x' assert ' Invalidpassword' in rv data
def virtual return virtualname
def virtual return virtualname
def virtual return virtualname
def virtual return virtualname
@register specialize@register canonicalize@register useless@gof local optimizer [T Join] def local join 1 node if not isinstance node op T Join returntensors node inputs[ 1 ]if len tensors 1 return [tensors[ 0 ]]
def make upload dt return datetime datetime utcnow replace tzinfo utc
def update jail name if is jail name cmd 'poudrierejail-u-j{ 0 }' format name ret salt ['cmd run'] cmd return retelse return ' Couldnotfindjail{ 0 }' format name
def skip unless cms func return skip Unless settings ROOT URLCONF 'cms urls' ' Testonlyvalidin CMS' func
def pem b name s1 b2 a base 64 b [ -1 ]s 2 ''while s1 s2 + s1 [ 64 ] + '\n' s1 s1 [ 64 ]s '-----BEGIN%s-----\n' % name + s2 + '-----END%s-----\n' % name return s
def get public key ssh conf path os path expanduser '~/ ssh' dsa public key path os path join ssh conf path 'id dsa pub' dsa private key path os path join ssh conf path 'id dsa' rsa public key path os path join ssh conf path 'id rsa pub' rsa private key path os path join ssh conf path 'id rsa' has dsa keypair os path isfile dsa public key path and os path isfile dsa private key path has rsa keypair os path isfile rsa public key path and os path isfile rsa private key path if has dsa keypair logging info 'DS Akeypairfound usingit' public key path dsa public key pathelif has rsa keypair logging info 'RS Akeypairfound usingit' public key path rsa public key pathelse logging info ' Neither RS Anor DS Akeypairfound creating DS Asshkeypair' utils system 'ssh-keygen-tdsa-q-N""-f%s' % dsa private key path public key path dsa public key pathpublic key open public key path 'r' public key str public key read public key close return public key str
def linear rainbow res frac 0 5 nobs res nobsendog res model endogexog res model exoglowidx np ceil 0 5 * 1 - frac * nobs astype int uppidx np floor lowidx + frac * nobs astype int mi sl slice lowidx uppidx res mi OLS endog[mi sl] exog[mi sl] fit nobs mi res mi model endog shape[ 0 ]ss mi res mi ssrss res ssrfstat ss - ss mi / nobs - nobs mi / ss mi * res mi df resid from scipy import statspval stats f sf fstat nobs - nobs mi res mi df resid return fstat pval
def get authorized user requesting user username None allow staff False if username is None username requesting user usernametry existing user User objects get username username except Object Does Not Exist raise User Not Found check authorized requesting user username allow staff return existing user
def get authorized user requesting user username None allow staff False if username is None username requesting user usernametry existing user User objects get username username except Object Does Not Exist raise User Not Found check authorized requesting user username allow staff return existing user
def iplot figure or data **plot options if 'auto open' not in plot options plot options['auto open'] Falseurl plot figure or data **plot options if isinstance figure or data dict layout figure or data get 'layout' {} else layout {}embed options dict embed options['width'] layout get 'width' '100 %' embed options['height'] layout get 'height' 525 try float embed options['width'] except Value Error Type Error passelse embed options['width'] str embed options['width'] + 'px' try float embed options['height'] except Value Error Type Error passelse embed options['height'] str embed options['height'] + 'px' return tools embed url **embed options
@pytest mark django dbdef test multiselect inactive users and contacts rf regular user view Multiselect Ajax View as view assert 'joe' in regular user username results get search results rf view 'auth User' 'joe' assert len results 1 assert results[ 0 ] get 'id' regular user id assert results[ 0 ] get 'name' regular user username contact Person Contact objects create first name ' Joe' last name ' Somebody' results get search results rf view 'shuup Person Contact' 'joe' assert len results 1 assert results[ 0 ] get 'id' contact id assert results[ 0 ] get 'name' contact name contact is active Falsecontact save results get search results rf view 'shuup Person Contact' 'joe' assert len results 0
def sgf init gamestate sgf root props sgf root propertiess size props get 'SZ' [' 19 '] [0 ]s player props get 'PL' ['B'] [0 ]gs go Game State int s size if 'AB' in props for stone in props['AB'] gs do move parse sgf move stone go BLACK if 'AW' in props for stone in props['AW'] gs do move parse sgf move stone go WHITE gs current player go BLACK if s player 'B' else go WHITE return gs
@gen coroutinedef wait for server ip port timeout 10 loop ioloop IO Loop current tic loop time while loop time - tic < timeout if can connect ip port returnelse yield gen sleep 0 1 raise Timeout Error " Serverat{ip} {port}didn'trespondin{timeout}seconds" format **locals
@gen coroutinedef wait for server ip port timeout 10 loop ioloop IO Loop current tic loop time while loop time - tic < timeout if can connect ip port returnelse yield gen sleep 0 1 raise Timeout Error " Serverat{ip} {port}didn'trespondin{timeout}seconds" format **locals
@contextmanagerdef respect language language if language prev translation get language translation activate language try yield finally translation activate prev else yield
@contextmanagerdef respect language language if language prev translation get language translation activate language try yield finally translation activate prev else yield
def main args parse args if args verify verify for fname parts in get sources items data generate parts fname os path join LIBRARY fname with open fname 'w' as afd afd seek 0 afd write data getvalue
def main args parse args if args verify verify for fname parts in get sources items data generate parts fname os path join LIBRARY fname with open fname 'w' as afd afd seek 0 afd write data getvalue
def main args parse args if args verify verify for fname parts in get sources items data generate parts fname os path join LIBRARY fname with open fname 'w' as afd afd seek 0 afd write data getvalue
def graph number of cliques G cliques None if cliques is None cliques list find cliques G return len cliques
def check mode handle mode ''if hasattr handle 'mode' mode handle modeif mode 1 returnmode str mode if mode and 'U' in mode upper raise Value Error 'SF Ffilesmust NO Tbeopenedinuniversalnewlinesmode Binarymodeisrecommended althoughon Unixthedefaultmodeisalsofine ' elif mode and 'B' not in mode upper and sys platform 'win 32 ' raise Value Error 'SF Ffilesmustbeopenedinbinarymodeon Windows'
def backup get all by host context host return IMPL backup get all by host context host
def update dme username password dme id ip address dme url 'https //www dnsmadeeasy com/servlet/updateip'dme url + '?username %s&password %s&id %s&ip %s's urllib request urlopen dme url % username password dme id ip address return s read
def update dme username password dme id ip address dme url 'https //www dnsmadeeasy com/servlet/updateip'dme url + '?username %s&password %s&id %s&ip %s's urllib request urlopen dme url % username password dme id ip address return s read
def set logging log level myfilename None if myfilename and ipython version try if ipython version startswith '0 10 ' IPYTHON set custom exc Exception ipython exception handler else ip get ipython ip set custom exc Exception ipython exception handler except Name Error sys exc clear level read logging level log level if level and myfilename file Handler logging File Handler filename myfilename file Handler set Level level file Handler set Formatter formatter logger add Handler file Handler logger remove Handler console Handler print ' Nowloggingto' myfilename 'withlevel' log levelelif level print ' Nowloggingwithlevel' log levellogger set Level level
def toplevel wrapper *args **kwargs return ndb toplevel *args **kwargs
def toplevel wrapper *args **kwargs return ndb toplevel *args **kwargs
def structure tensor image sigma 1 mode 'constant' cval 0 image prepare grayscale input 2D image imx imy compute derivatives image mode mode cval cval Axx ndi gaussian filter imx * imx sigma mode mode cval cval Axy ndi gaussian filter imx * imy sigma mode mode cval cval Ayy ndi gaussian filter imy * imy sigma mode mode cval cval return Axx Axy Ayy
def structure tensor image sigma 1 mode 'constant' cval 0 image prepare grayscale input 2D image imx imy compute derivatives image mode mode cval cval Axx ndi gaussian filter imx * imx sigma mode mode cval cval Axy ndi gaussian filter imx * imy sigma mode mode cval cval Ayy ndi gaussian filter imy * imy sigma mode mode cval cval return Axx Axy Ayy
def structure tensor image sigma 1 mode 'constant' cval 0 image prepare grayscale input 2D image imx imy compute derivatives image mode mode cval cval Axx ndi gaussian filter imx * imx sigma mode mode cval cval Axy ndi gaussian filter imx * imy sigma mode mode cval cval Ayy ndi gaussian filter imy * imy sigma mode mode cval cval return Axx Axy Ayy
def get model image size subject names feature Fisherfaces classifier Nearest Neighbor dist metric Euclidean Distance k 1 return Extended Predictable Model feature feature classifier classifier image size image size subject names subject names
def get model image size subject names feature Fisherfaces classifier Nearest Neighbor dist metric Euclidean Distance k 1 return Extended Predictable Model feature feature classifier classifier image size image size subject names subject names
def get model image size subject names feature Fisherfaces classifier Nearest Neighbor dist metric Euclidean Distance k 1 return Extended Predictable Model feature feature classifier classifier image size image size subject names subject names
def parse cmdline argv global BASE DIRECTORY VERBOSE SUMMARYDEFAULT BASE DIR os path join os path dirname os path realpath sys argv[ 0 ] 'collectors' parser Option Parser description ' Runspylintrecursivelyonadirectory' parser add option '-b' '--base-dir' dest 'base directory' metavar 'DIR' default DEFAULT BASE DIR help ' Directorytostartlinting' parser add option '-v' '--verbose' dest 'verbose' action 'store true' default False help ' Verbosemode logdebugmessages ' parser add option '-a' '--show-all' dest 'show all' action 'store true' default False help ' Bydefault weareonlyshowingerrorlines' parser add option '-s' '--summary' dest 'summary' action 'store true' default False help ' Showsummaryreport' options args parser parse args args argv[ 1 ] VERBOSE options verbose BASE DIRECTORY options base directoryreturn options args
def soap fault message None actor None code None detail None string actor code detail Noneif message string soapenv Fault faultstring text message if actor actor soapenv Fault faultactor text actor if code code soapenv Fault faultcode text code if detail detail soapenv Fault detail text detail fault soapenv Fault faultcode code faultstring string faultactor actor detail detail return '%s' % fault
def attach issue statuses queryset as field 'issue statuses attr' model queryset modelsql '\n SELEC Tjson agg \nrow to json projects issuestatus \n ORDERB Yprojects issuestatus order\n \n FRO Mprojects issuestatus\n WHER Eprojects issuestatus project id {tbl} id\n'sql sql format tbl model meta db table queryset queryset extra select {as field sql} return queryset
def get Terminal Charset try charset locale getpreferredencoding if charset return charsetexcept locale Error Attribute Error passtry charset locale nl langinfo locale CODESET if charset return charsetexcept locale Error Attribute Error passif hasattr sys stdout 'encoding' and sys stdout encoding return sys stdout encodingreturn 'ASCII'
def get Terminal Charset try charset locale getpreferredencoding if charset return charsetexcept locale Error Attribute Error passtry charset locale nl langinfo locale CODESET if charset return charsetexcept locale Error Attribute Error passif hasattr sys stdout 'encoding' and sys stdout encoding return sys stdout encodingreturn 'ASCII'
def run dummy heroku worker sandbox imminent shutdown delay sys stderr open os path join sandbox u'stderr log' u'w' class Test Heroku Worker Heroku Worker imminent shutdown delay imminent shutdown delaydef perform job self job queue create file os path join sandbox u'started' for i in range 20 time sleep 0 1 create file os path join sandbox u'finished' w Test Heroku Worker Queue u'dummy' w main work horse None None
def run dummy heroku worker sandbox imminent shutdown delay sys stderr open os path join sandbox u'stderr log' u'w' class Test Heroku Worker Heroku Worker imminent shutdown delay imminent shutdown delaydef perform job self job queue create file os path join sandbox u'started' for i in range 20 time sleep 0 1 create file os path join sandbox u'finished' w Test Heroku Worker Queue u'dummy' w main work horse None None
def run dummy heroku worker sandbox imminent shutdown delay sys stderr open os path join sandbox u'stderr log' u'w' class Test Heroku Worker Heroku Worker imminent shutdown delay imminent shutdown delaydef perform job self job queue create file os path join sandbox u'started' for i in range 20 time sleep 0 1 create file os path join sandbox u'finished' w Test Heroku Worker Queue u'dummy' w main work horse None None
def run dummy heroku worker sandbox imminent shutdown delay sys stderr open os path join sandbox u'stderr log' u'w' class Test Heroku Worker Heroku Worker imminent shutdown delay imminent shutdown delaydef perform job self job queue create file os path join sandbox u'started' for i in range 20 time sleep 0 1 create file os path join sandbox u'finished' w Test Heroku Worker Queue u'dummy' w main work horse None None
def convert record 2 fits format recformat kind dtype dtype to recformat format shape dtype shapeitemsize dtype base itemsizeif dtype char 'U' itemsize itemsize // 4 option str itemsize ndims len shape repeat 1if ndims > 0 nel np array shape dtype 'i 8 ' prod if nel > 1 repeat nelif kind 'a' ntot int repeat * int option output format str ntot + 'A' elif recformat in NUMPY 2 FITS if repeat 1 repeat str repeat else repeat ''output format repeat + NUMPY 2 FITS[recformat] else raise Value Error ' Illegalformat{} ' format format return output format
def convert record 2 fits format recformat kind dtype dtype to recformat format shape dtype shapeitemsize dtype base itemsizeif dtype char 'U' itemsize itemsize // 4 option str itemsize ndims len shape repeat 1if ndims > 0 nel np array shape dtype 'i 8 ' prod if nel > 1 repeat nelif kind 'a' ntot int repeat * int option output format str ntot + 'A' elif recformat in NUMPY 2 FITS if repeat 1 repeat str repeat else repeat ''output format repeat + NUMPY 2 FITS[recformat] else raise Value Error ' Illegalformat{} ' format format return output format
def latency echo url count poll copy ctx zmq Context s ctx socket zmq REP if poll p zmq Poller p register s s bind url block zmq NOBLOCK if poll else 0 for i in range count if poll res p poll msg s recv block copy copy if poll res p poll s send msg block copy copy msg s recv assert msg 'done' s close ctx term
def split string text chars per string return [text[i i + chars per string ] for i in range 0 len text chars per string ]
def split string text chars per string return [text[i i + chars per string ] for i in range 0 len text chars per string ]
def atomic open filename mode 'w' if mode in 'r' 'rb' 'r+' 'rb+' 'a' 'ab' raise Type Error " Readorappendmodesdon'tworkwithatomic open" ntf tempfile Named Temporary File mode prefix ' atomic write' dir os path dirname filename delete False return Atomic W File ntf ntf name filename
def verify iterator data assert Equal results count 0for count result in enumerate results 1 params get all primitive params result[ 0 ] assert Equal len params len result msg ' Nottherightnumberofcolumns?' for expected actual in zip params result assert Equal actual expected return count
def pack array builder values ty None n len values if ty is None ty values[ 0 ] typeary ir Array Type ty n ir Undefined for i v in enumerate values ary builder insert value ary v i return ary
def pack array builder values ty None n len values if ty is None ty values[ 0 ] typeary ir Array Type ty n ir Undefined for i v in enumerate values ary builder insert value ary v i return ary
@profiler tracedef network create request **kwargs LOG debug 'network create kwargs %s' % kwargs if 'net profile id' in kwargs kwargs['n 1 kv profile'] kwargs pop 'net profile id' if 'tenant id' not in kwargs kwargs['tenant id'] request user project idbody {'network' kwargs}network neutronclient request create network body body get 'network' return Network network
def timetrace message idstring tracemessage 'TEST MESSAGE' final False if message startswith tracemessage try prefix tlast t0 message split None 2 tlast t0 float tlast float t0 except Index Error Value Error t0 time tlast t0 t 1 t0 else t1 time print '**timetrace %s dT %fs total %fs ' % idstring t1 - tlast t1 - t0 if final message '****%s total%f ****' % tracemessage t1 - t0 else message '%s%f%f' % tracemessage t1 t0 return message
def position of ngram ngram sentence for i sublist in enumerate ngrams sentence len ngram if ngram sublist return i
def position of ngram ngram sentence for i sublist in enumerate ngrams sentence len ngram if ngram sublist return i
def position of ngram ngram sentence for i sublist in enumerate ngrams sentence len ngram if ngram sublist return i
def acos x np import module 'numpy' if isinstance x int float if abs x > 1 return interval - np inf np inf is valid False else return interval np arccos x np arccos x elif isinstance x interval if x is valid is False or x start > 1 or x end < -1 return interval - np inf np inf is valid False elif x start < -1 or x end > 1 return interval - np inf np inf is valid None else start np arccos x start end np arccos x end return interval start end is valid x is valid
def convert timedelta delta days total seconds delta days delta seconds hours days * 24 + total seconds // 3600 minutes total seconds % 3600 // 60 seconds str total seconds % 60 zfill 2 microseconds str delta microseconds [ 2] zfill 2 return hours minutes seconds microseconds
def convert timedelta delta days total seconds delta days delta seconds hours days * 24 + total seconds // 3600 minutes total seconds % 3600 // 60 seconds str total seconds % 60 zfill 2 microseconds str delta microseconds [ 2] zfill 2 return hours minutes seconds microseconds
def emit options options return ' ' join '%s %s' % k v for k v in options items
def context s '' log None ctx contexts[ -1 ] sif s and log log ' Context %s' % get context
def divide to width desired chunks max width chunks []for c in desired chunks nb divides int np ceil c / max width for i in range nb divides n c // nb divides - i chunks append n c - nassert c 0 return tuple chunks
def special rss site url return cfg rss filenames or match str url cfg rss odd titles
@task task ignore result True def store likes user likes converter class get class for 'user conversion' logger info 'celeryisstoring%slikes' % len likes converter class store likes user likes return likes
@task task ignore result True def store likes user likes converter class get class for 'user conversion' logger info 'celeryisstoring%slikes' % len likes converter class store likes user likes return likes
@task task ignore result True def store likes user likes converter class get class for 'user conversion' logger info 'celeryisstoring%slikes' % len likes converter class store likes user likes return likes
@task task ignore result True def store likes user likes converter class get class for 'user conversion' logger info 'celeryisstoring%slikes' % len likes converter class store likes user likes return likes
def signature params shared secret encoded params u'' join [u'{key} {value}' format key key value params[key] for key in sorted params keys if key u'signature' ] hasher hmac new shared secret encode 'utf- 8 ' encoded params encode 'utf- 8 ' hashlib sha 256 return hasher hexdigest
def signature params shared secret encoded params u'' join [u'{key} {value}' format key key value params[key] for key in sorted params keys if key u'signature' ] hasher hmac new shared secret encode 'utf- 8 ' encoded params encode 'utf- 8 ' hashlib sha 256 return hasher hexdigest
@ docstring 'series' def get series by id id includes [] return do mb query 'series' id includes
@ docstring 'series' def get series by id id includes [] return do mb query 'series' id includes
def maybe call get oauth user scope None if 'OAUTH ERROR CODE' not in os environ or os environ get 'OAUTH LAST SCOPE' None scope req user service pb Get O Auth User Request if scope req set scope scope resp user service pb Get O Auth User Response try apiproxy stub map Make Sync Call 'user' ' Get O Auth User' req resp os environ['OAUTH EMAIL'] resp email os environ['OAUTH AUTH DOMAIN'] resp auth domain os environ['OAUTH USER ID'] resp user id os environ['OAUTH CLIENT ID'] resp client id if resp is admin os environ['OAUTH IS ADMIN'] '1 'else os environ['OAUTH IS ADMIN'] '0 'os environ['OAUTH ERROR CODE'] ''except apiproxy errors Application Error as e os environ['OAUTH ERROR CODE'] str e application error os environ['OAUTH ERROR DETAIL'] e error detailif scope os environ['OAUTH LAST SCOPE'] scopeelse os environ pop 'OAUTH LAST SCOPE' None maybe raise exception
def get cohorted user partition course for user partition in course user partitions if user partition scheme Cohort Partition Scheme return user partitionreturn None
def get cohorted user partition course for user partition in course user partitions if user partition scheme Cohort Partition Scheme return user partitionreturn None
def get cohorted user partition course for user partition in course user partitions if user partition scheme Cohort Partition Scheme return user partitionreturn None
def file Path Delta origin destination common Items 0path 1 origin path split os sep path 2 destination path split os sep for elem 1 elem 2 in zip path 1 path 2 if elem 1 elem 2 common Items + 1else breakpath [' '] * len path 1 - common Items return path + path 2 [common Items ]
def to Norm raw return np power MAX NORM raw * NORM RATIO
def to Norm raw return np power MAX NORM raw * NORM RATIO
def allocate controller key and unit number client factory devices adapter type if devices class name ' Array Of Virtual Device' devices devices Virtual Devicetaken find allocated slots devices ret Noneif adapter type constants ADAPTER TYPE IDE ide keys [dev key for dev in devices if is ide controller dev ]ret find controller slot ide keys taken 2 elif adapter type in constants SCSI ADAPTER TYPES scsi keys [dev key for dev in devices if is scsi controller dev ]ret find controller slot scsi keys taken 16 if ret return ret[ 0 ] ret[ 1 ] None controller key -101 bus number 0if adapter type in constants SCSI ADAPTER TYPES bus number get bus number for scsi controller devices controller spec create controller spec client factory controller key adapter type bus number return controller key 0 controller spec
def allocate controller key and unit number client factory devices adapter type if devices class name ' Array Of Virtual Device' devices devices Virtual Devicetaken find allocated slots devices ret Noneif adapter type constants ADAPTER TYPE IDE ide keys [dev key for dev in devices if is ide controller dev ]ret find controller slot ide keys taken 2 elif adapter type in constants SCSI ADAPTER TYPES scsi keys [dev key for dev in devices if is scsi controller dev ]ret find controller slot scsi keys taken 16 if ret return ret[ 0 ] ret[ 1 ] None controller key -101 bus number 0if adapter type in constants SCSI ADAPTER TYPES bus number get bus number for scsi controller devices controller spec create controller spec client factory controller key adapter type bus number return controller key 0 controller spec
def detect face face file max results 4 image content face file read batch request [{'image' {'content' base 64 b64 encode image content decode 'utf- 8 ' } 'features' [{'type' 'FACE DETECTION' 'max Results' max results}]}]service get vision service request service images annotate body {'requests' batch request} response request execute return response['responses'][ 0 ]['face Annotations']
def detect face face file max results 4 image content face file read batch request [{'image' {'content' base 64 b64 encode image content decode 'utf- 8 ' } 'features' [{'type' 'FACE DETECTION' 'max Results' max results}]}]service get vision service request service images annotate body {'requests' batch request} response request execute return response['responses'][ 0 ]['face Annotations']
def create script fname text os linesep join ['#-*-coding utf- 8 -*-' '' ''] encoding write to text string text fname 'utf- 8 '
def symlink source destination use sudo False func use sudo and run as root or run func '/bin/ln-s{ 0 }{ 1 }' format quote source quote destination
def play command str selection paths open args log item type 'track' keep open False item type + 's' if len selection > 1 else '' ui print u' Playing{ 0 }{ 1 } ' format len selection item type log debug u'executingcommand {}{ r}' command str open args try if keep open command util shlex split command str command command + open args subprocess call command else util interactive open open args command str except OS Error as exc raise ui User Error ' Couldnotplaythequery {0 }' format exc
@profiler tracedef remove domain user role request user role domain None manager keystoneclient request admin True rolesreturn manager revoke role user user domain domain
def get api backend api args reactor cluster id if backend needs cluster id api args api args set 'cluster id' cluster id if backend needs reactor api args api args set 'reactor' reactor for config key in backend required config if config key not in api args raise Usage Error u' Configurationerror Requiredkey{}ismissing ' format config key decode 'utf- 8 ' try return backend api factory **api args except Storage Initialization Error as e if e code Storage Initialization Error CONFIGURATION ERROR raise Usage Error u' Configurationerror' *e args else raise
def get api backend api args reactor cluster id if backend needs cluster id api args api args set 'cluster id' cluster id if backend needs reactor api args api args set 'reactor' reactor for config key in backend required config if config key not in api args raise Usage Error u' Configurationerror Requiredkey{}ismissing ' format config key decode 'utf- 8 ' try return backend api factory **api args except Storage Initialization Error as e if e code Storage Initialization Error CONFIGURATION ERROR raise Usage Error u' Configurationerror' *e args else raise
def get api backend api args reactor cluster id if backend needs cluster id api args api args set 'cluster id' cluster id if backend needs reactor api args api args set 'reactor' reactor for config key in backend required config if config key not in api args raise Usage Error u' Configurationerror Requiredkey{}ismissing ' format config key decode 'utf- 8 ' try return backend api factory **api args except Storage Initialization Error as e if e code Storage Initialization Error CONFIGURATION ERROR raise Usage Error u' Configurationerror' *e args else raise
def from text text m Message reader Text Reader text m reader read return m
def process projection requirements figure *args **kwargs ispolar kwargs pop u'polar' False projection kwargs pop u'projection' None if ispolar if projection is not None and projection u'polar' raise Value Error u'polar True yetprojection %r Onlyoneoftheseargumentsshouldbesupplied ' % projection projection u'polar'if projection u'polar' kwargs setdefault u'resolution' 1 if isinstance projection six string types or projection is None projection class get projection class projection elif hasattr projection u' as mpl axes' projection class extra kwargs projection as mpl axes kwargs update **extra kwargs else raise Type Error u'projectionmustbeastring Noneorimplementa as mpl axesmethod Got%r' % projection key figure make key *args **kwargs return projection class kwargs key
def process projection requirements figure *args **kwargs ispolar kwargs pop u'polar' False projection kwargs pop u'projection' None if ispolar if projection is not None and projection u'polar' raise Value Error u'polar True yetprojection %r Onlyoneoftheseargumentsshouldbesupplied ' % projection projection u'polar'if projection u'polar' kwargs setdefault u'resolution' 1 if isinstance projection six string types or projection is None projection class get projection class projection elif hasattr projection u' as mpl axes' projection class extra kwargs projection as mpl axes kwargs update **extra kwargs else raise Type Error u'projectionmustbeastring Noneorimplementa as mpl axesmethod Got%r' % projection key figure make key *args **kwargs return projection class kwargs key
def kill container signal None client get client status base status copy try dcontainer get container infos container [' Id']if is running dcontainer client kill dcontainer signal signal if signal valid status comment " Killsignal'{ 0 }'successfullysenttothecontainer'{ 1 }'" format signal container id container elif not is running dcontainer valid status comment ' Container{ 0 }waskilled' format container id container else invalid status comment ' Container{ 0 }wasnotkilled' format container else valid status comment ' Container{ 0 }wasalreadystopped' format container id container except Exception invalid status id container out traceback format exc comment ' Anexceptionoccurredwhilekillingyourcontainer{ 0 }' format container salt ['mine send'] 'dockerng ps' verbose True all True host True return status
def trim custom directories repo older than days None if not repo returnif older than days is None older than days settings get value 'PACKAGES' 'custom max age' type int default 40 cmd 'find -typef-atime+%s-execrm-f{}\\ ' % older than days repo run command repo cmd ignore status True
def tb lineno tb return tb tb lineno
def tb lineno tb return tb tb lineno
@bp route '/<int uid>/delete' methods ['POST'] @require userdef delete uid password request form get 'password' if not password flash ' Passwordisrequiredtodeleteatopic' 'info' return redirect url for ' view' uid uid if not g user check password password flash ' Passwordiswrong' 'error' return redirect url for ' view' uid uid topic Topic query get or 404 uid topic delete return redirect url for ' topics'
def service delete service id None name None profile None **connection args kstone auth profile **connection args if name service id service get name name profile profile **connection args [name]['id']kstone services delete service id return ' Keystoneservice ID"{ 0 }"deleted' format service id
def values expr env env dict env env[' builtins '] {}c test expr expr values codes return eval c env
def values expr env env dict env env[' builtins '] {}c test expr expr values codes return eval c env
def values expr env env dict env env[' builtins '] {}c test expr expr values codes return eval c env
def values expr env env dict env env[' builtins '] {}c test expr expr values codes return eval c env
def get running profile 'default' cmd {'cmd' 'list' 'mime' 'prop'}return do http cmd profile
def zmq version info major ffi new 'int*' minor ffi new 'int*' patch ffi new 'int*' C zmq version major minor patch return int major[ 0 ] int minor[ 0 ] int patch[ 0 ]
def test get by name assert Operator get by name ' Select K Best' class TPOT Select K Best
def wrap variable creation func custom getter original get variable tf get variabledef custom get variable *args **kwargs if hasattr kwargs 'custom getter' raise Attribute Error ' Customgettersarenotsupportedforoptimizeevariables ' return original get variable custom getter custom getter *args **kwargs with mock patch 'tensorflow get variable' custom get variable return func
def gcode Path new Type path Type layer Thickness start Point if layer Thickness < 0 0 layer Thickness 0 01 if profile get Profile Setting 'spiralize' ' True' layer Thickness profile get Profile Setting Float 'layer height' return {'type' new Type 'path Type' path Type 'layer Thickness' layer Thickness 'points' [start Point] 'extrusion' [0 0]}
@step ' Ihavenotsentanyemails' def mail not sent step return mail sent count step 0
@step ' Ihavenotsentanyemails' def mail not sent step return mail sent count step 0
@step ' Ihavenotsentanyemails' def mail not sent step return mail sent count step 0
def read Queue thread id None return read Queue thread id
@ensure csrf cookie@cache control no cache True no store True must revalidate True @coach dashboarddef ccx student management request course ccx None if not ccx raise Http 404 action request POST get 'student-action' None student id request POST get 'student-id' '' email students 'email-students' in request POST identifiers [student id]course key CCX Locator from course locator course id unicode ccx id email params get email params course auto enroll True course key course key display name ccx display name errors ccx students enrolling center action identifiers email students course key email params ccx coach for error message in errors messages error request error message url reverse 'ccx coach dashboard' kwargs {'course id' course key} return redirect url
def imtext from ansiext import Ansi Extensionmd Markdown output format 'imtext' extensions [ Extra Extension Ansi Extension ] md strip Top Level Tags Falsereturn md
def build Some Connections modules res []for i in range len modules // 3 - 1 res append Full Connection modules[ i * 2 ] modules[ i * 3 + 1 ] return res
def export courses to output path output path content store contentstore module store modulestore root dir output pathcourses module store get courses course ids [x id for x in courses]failed export courses []for course id in course ids print u'-' * 80 print u' Exportingcourseid {0 }to{ 1 }' format course id output path try course dir course id to deprecated string replace '/' ' ' export course to xml module store content store course id root dir course dir except Exception as err failed export courses append unicode course id print u' ' * 30 + u'> Oops failedtoexport{ 0 }' format course id print u' Error 'print errreturn courses failed export courses
def export courses to output path output path content store contentstore module store modulestore root dir output pathcourses module store get courses course ids [x id for x in courses]failed export courses []for course id in course ids print u'-' * 80 print u' Exportingcourseid {0 }to{ 1 }' format course id output path try course dir course id to deprecated string replace '/' ' ' export course to xml module store content store course id root dir course dir except Exception as err failed export courses append unicode course id print u' ' * 30 + u'> Oops failedtoexport{ 0 }' format course id print u' Error 'print errreturn courses failed export courses
def export courses to output path output path content store contentstore module store modulestore root dir output pathcourses module store get courses course ids [x id for x in courses]failed export courses []for course id in course ids print u'-' * 80 print u' Exportingcourseid {0 }to{ 1 }' format course id output path try course dir course id to deprecated string replace '/' ' ' export course to xml module store content store course id root dir course dir except Exception as err failed export courses append unicode course id print u' ' * 30 + u'> Oops failedtoexport{ 0 }' format course id print u' Error 'print errreturn courses failed export courses
def export courses to output path output path content store contentstore module store modulestore root dir output pathcourses module store get courses course ids [x id for x in courses]failed export courses []for course id in course ids print u'-' * 80 print u' Exportingcourseid {0 }to{ 1 }' format course id output path try course dir course id to deprecated string replace '/' ' ' export course to xml module store content store course id root dir course dir except Exception as err failed export courses append unicode course id print u' ' * 30 + u'> Oops failedtoexport{ 0 }' format course id print u' Error 'print errreturn courses failed export courses
def mark Location stream RADIUS 5000 stream seek - RADIUS 1 output Doc open ' Py PDF 2 pdf Location txt' 'w' output Doc write stream read RADIUS output Doc write 'HERE' output Doc write stream read RADIUS output Doc close stream seek - RADIUS 1
def mark Location stream RADIUS 5000 stream seek - RADIUS 1 output Doc open ' Py PDF 2 pdf Location txt' 'w' output Doc write stream read RADIUS output Doc write 'HERE' output Doc write stream read RADIUS output Doc close stream seek - RADIUS 1
def layout to matrix layout result [ [0 ] * len layout for i in range len layout ]stack []for i in range len layout i level layout[i]if stack j stack[ -1 ]j level layout[j]while j level > i level stack pop j stack[ -1 ]j level layout[j]result[i][j] result[j][i] 1stack append i return result
def check version version if isinstance version string types version tuple map int version split ' ' if version > version info str version ' ' join map str version raise Value Error "pgiversion'%s'requested '%s'available" % str version version
def check version version if isinstance version string types version tuple map int version split ' ' if version > version info str version ' ' join map str version raise Value Error "pgiversion'%s'requested '%s'available" % str version version
def annotate axes index labels points offset points size ax **kwargs for i in index label labels[i]point points[i]offset offset points[i]ax annotate label point xytext offset textcoords 'offsetpoints' size size **kwargs return ax
def get rnd shuffle builder fnty ir Function Type ir Void Type rnd state ptr t fn builder function module get or insert function fnty 'numba rnd shuffle' fn args[ 0 ] add attribute 'nocapture' return fn
@contextmanagerdef mock get score earned 0 possible 1 with patch 'lms djangoapps grades new subsection grade get score' as mock score mock score return value Problem Score raw earned earned raw possible possible weighted earned earned weighted possible possible weight 1 graded True attempted True yield mock score
@contextmanagerdef mock get score earned 0 possible 1 with patch 'lms djangoapps grades new subsection grade get score' as mock score mock score return value Problem Score raw earned earned raw possible possible weighted earned earned weighted possible possible weight 1 graded True attempted True yield mock score
def get engine hass config if shutil which 'pico 2 wave' is None LOGGER error "'pico 2 wave'wasnotfound" return Falsereturn Pico Provider config[CONF LANG]
def object copy self Copy Source Extra Args None Callback None Source Client None Config None return self meta client copy Copy Source Copy Source Bucket self bucket name Key self key Extra Args Extra Args Callback Callback Source Client Source Client Config Config
def check sole error response status strings if isinstance strings str strings [strings]assert response status code status document loads response data errors document['errors']assert len errors 1 error errors[ 0 ]assert error['status'] status assert all s in error['detail'] for s in strings
def check sole error response status strings if isinstance strings str strings [strings]assert response status code status document loads response data errors document['errors']assert len errors 1 error errors[ 0 ]assert error['status'] status assert all s in error['detail'] for s in strings
def logsafe val if isinstance val six text type return valelif isinstance val bytes return val decode 'utf- 8 ' 'replace' elif isinstance val subprocess Called Process Error try return six text type val except Unicode Decode Error return str val decode 'utf- 8 ' 'replace' else return val
def ensure treasury data bm symbol first date last date now loader module filename source INDEX MAPPING get bm symbol INDEX MAPPING['^GSPC'] first date max first date loader module earliest possible date path get data filepath filename if os path exists path try data pd Data Frame from csv path tz localize 'UTC' if has data for dates data first date last date return datalast download time last modified time path if now - last download time < ONE HOUR logger warn ' Refusingtodownloadnewtreasurydatabecauseadownloadsucceededat%s ' % last download time return dataexcept OS Error IO Error Value Error as e logger info ' Loadingdatafor{path}failedwitherror[{error}] ' format path path error e try data loader module get treasury data first date last date data to csv path except OS Error IO Error HTTP Error logger exception 'failedtocachetreasurydata' if not has data for dates data first date last date logger warn " Stilldon'thaveexpecteddataafterredownload " return data
def ensure treasury data bm symbol first date last date now loader module filename source INDEX MAPPING get bm symbol INDEX MAPPING['^GSPC'] first date max first date loader module earliest possible date path get data filepath filename if os path exists path try data pd Data Frame from csv path tz localize 'UTC' if has data for dates data first date last date return datalast download time last modified time path if now - last download time < ONE HOUR logger warn ' Refusingtodownloadnewtreasurydatabecauseadownloadsucceededat%s ' % last download time return dataexcept OS Error IO Error Value Error as e logger info ' Loadingdatafor{path}failedwitherror[{error}] ' format path path error e try data loader module get treasury data first date last date data to csv path except OS Error IO Error HTTP Error logger exception 'failedtocachetreasurydata' if not has data for dates data first date last date logger warn " Stilldon'thaveexpecteddataafterredownload " return data
@core helperdef organizations available permission 'manage group' include dataset count False context {'user' c user}data dict {'permission' permission 'include dataset count' include dataset count}return logic get action 'organization list for user' context data dict
def resource name def make responder retriever def responder ids entities [retriever id for id in ids]entities [entity for entity in entities if entity]if len entities 1 return flask jsonify rep entities[ 0 ] expand is expand elif entities return app response class json generator entities root name mimetype 'application/json' else return flask abort 404 responder name 'get {0 }' format name return responderreturn make responder
@pytest mark django dbdef test no root view permissions po directory nobody default admin view no permission sets no projects project foo project bar ALL PROJECTS [project foo code project bar code]foo user User Factory create username 'foo' bar user User Factory create username 'bar' require permission set foo user project foo directory [view] assert items equal Project accessible by user admin ALL PROJECTS assert items equal Project accessible by user foo user [project foo code] assert items equal Project accessible by user bar user [] assert items equal Project accessible by user default [] assert items equal Project accessible by user nobody [] require permission set default project bar directory [view] assert items equal Project accessible by user admin ALL PROJECTS assert items equal Project accessible by user foo user ALL PROJECTS assert items equal Project accessible by user bar user [project bar code] assert items equal Project accessible by user default [project bar code] assert items equal Project accessible by user nobody []
@contextlib contextmanagerdef check remains sorted X if not hasattr X 'has sorted indices' or not X has sorted indices yield return yield indices X indices copy X has sorted indices False X sort indices assert array equal indices X indices ' Expectedsortedindices foundunsorted'
def ipv 6 addresses interface with settings hide 'running' 'stdout' res sudo "/sbin/ifconfig% interface s grep'inet 6 ' true" % locals ret {}if res '' return retlines res split '\n' for line in lines if 'addr' in line addr res split [2 ]else addr res split [1 ]lower line line lower addr scope 'unknown'for scope in ['host' 'link' 'global'] if scope in lower line addr scope scoperet[addr scope] addrreturn ret
def find words string trie boundary re re compile '[%s]+' % re escape DEFAULT BOUNDARY CHARS results []start 0while start < len string keys match all string[start ] trie for key in keys l len key if start + l len string or boundary re match string[ start + l ] results append key start start + l m boundary re search string start if m is None breakstart m end return results
def find words string trie boundary re re compile '[%s]+' % re escape DEFAULT BOUNDARY CHARS results []start 0while start < len string keys match all string[start ] trie for key in keys l len key if start + l len string or boundary re match string[ start + l ] results append key start start + l m boundary re search string start if m is None breakstart m end return results
def creation sequence to weights creation sequence first creation sequence[ 0 ]if isinstance first str if isinstance creation sequence list wseq creation sequence[ ]else wseq list creation sequence elif isinstance first tuple wseq [v[ 1 ] for v in creation sequence]elif isinstance first int wseq uncompact creation sequence else raise Type Error ' Notavalidcreationsequencetype' wseq reverse w 0prev 'i'for j s in enumerate wseq if s 'i' wseq[j] wprev selif prev 'i' prev sw + 1wseq reverse for j s in enumerate wseq if s 'd' wseq[j] wprev selif prev 'd' prev sw + 1if prev 'd' w + 1wscale 1 0 / float w return [ ww * wscale for ww in wseq]
def get arch with settings hide 'running' 'stdout' arch run 'uname-m' return arch
def arbitrary transformation deployment uuid uuid 4 return deployment transform ['nodes' uuid] Node uuid uuid
def load crypto meta value def b64 decode meta crypto meta return {str name base 64 b64 decode val if name in 'iv' 'key' else b64 decode meta val if isinstance val dict else val encode 'utf 8 ' if six PY 2 else val for name val in crypto meta items }try if not isinstance value six string types raise Value Error 'cryptometanotastring' val json loads urlparse unquote plus value if not isinstance val collections Mapping raise Value Error 'cryptometanota Mapping' return b64 decode meta val except Key Error Value Error Type Error as err msg ' Badcryptometa%r %s' % value err raise Encryption Exception msg
def register stanza plugin stanza plugin iterable False overrides False tag u'{%s}%s' % plugin namespace plugin name plugin info u'plugin attrib map' u'plugin tag map' u'plugin iterables' u'plugin overrides' for attr in plugin info info getattr stanza attr setattr stanza attr info copy stanza plugin attrib map[plugin plugin attrib] pluginstanza plugin tag map[tag] pluginif iterable stanza plugin iterables add plugin if plugin plugin multi attrib multiplugin multifactory plugin plugin plugin multi attrib register stanza plugin stanza multiplugin if overrides for interface in plugin overrides stanza plugin overrides[interface] plugin plugin attrib
def coord distance lat 1 lon 1 lat 2 lon 2 lon 1 lat 1 lon 2 lat 2 map math radians [lon 1 lat 1 lon 2 lat 2 ] dlon lon 2 - lon 1 dlat lat 2 - lat 1 a math sin dlat / 2 ** 2 + math cos lat 1 * math cos lat 2 * math sin dlon / 2 ** 2 c 2 * math asin math sqrt a km 6367 * c return km
def execute request service property uri request return service searchanalytics query site Url property uri body request execute
def parse query string return dict [param urllib unquote value ] for param value in x split ' ' 1 if ' ' in x else [x None] for x in os getenv 'QUERY STRING' '' split '&'
def get info app env account container None swift source None env setdefault 'swift infocache' {} if container path '/v 1 /%s/%s' % account container path env env copy path env['PATH INFO'] pathreturn get container info path env app swift source swift source else path '/v 1 /%s' % account path env env copy path env['PATH INFO'] pathreturn get account info path env app swift source swift source
@pytest mark parametrize 'repo type repo url repo name' [ 'git' 'https //github com/hello/world git' 'world' 'hg' 'https //bitbucket org/foo/bar' 'bar' ] def test clone should invoke vcs command mocker clone dir repo type repo url repo name mocker patch 'cookiecutter vcs is vcs installed' autospec True return value True mock subprocess mocker patch 'cookiecutter vcs subprocess check output' autospec True expected repo dir os path normpath os path join clone dir repo name branch 'foobar'repo dir vcs clone repo url checkout branch clone to dir clone dir no input True assert repo dir expected repo dir mock subprocess assert any call [repo type 'clone' repo url] cwd clone dir stderr subprocess STDOUT mock subprocess assert any call [repo type 'checkout' branch] cwd expected repo dir stderr subprocess STDOUT
@task def rerun course source course key string destination course key string user id fields None from edxval api import copy course videostry source course key Course Key from string source course key string destination course key Course Key from string destination course key string fields deserialize fields fields if fields else None store modulestore with store default store 'split' store clone course source course key destination course key user id fields fields initialize permissions destination course key User objects get id user id Course Rerun State objects succeeded course key destination course key copy course videos source course key destination course key return 'succeeded'except Duplicate Course Error as exc Course Rerun State objects failed course key destination course key logging exception u' Course Rerun Error' return 'duplicatecourse'except Exception as exc Course Rerun State objects failed course key destination course key logging exception u' Course Rerun Error' try modulestore delete course destination course key user id except Item Not Found Error passreturn 'exception ' + unicode exc
def bartlett M return bartlett M
def bartlett M return bartlett M
def strings app file app dir tools dir try print '[INFO] Extracting Stringsfrom APK'strings jar tools dir + 'strings from apk jar' args [ settings JAVA PATH + 'java' '-jar' strings jar app dir + app file app dir]subprocess call args dat ''try with io open app dir + 'strings json' mode 'r' encoding 'utf 8 ' errors 'ignore' as file pointer dat file pointer read except passdat dat[ 1 -1 ] split ' ' return datexcept Print Exception '[ERROR] Extracting Stringsfrom APK'
def calculate wait for retry retry attempt wait time 2 ** retry attempt max jitter wait time / 4 0 wait time + random uniform - max jitter max jitter return max 1 min wait time MAX RETRY WAIT
def calculate wait for retry retry attempt wait time 2 ** retry attempt max jitter wait time / 4 0 wait time + random uniform - max jitter max jitter return max 1 min wait time MAX RETRY WAIT
def body quopri len str count 0for c in str if bqre match c count + 3else count + 1return count
@register assignment tagdef assignment one default one two 'hi' return 'assignment one default- Expectedresult %s %s' % one two
def find package data package data {'I Python core' ['profile/README*'] 'I Python core tests' ['* png' '* jpg' 'daft extension/* py'] 'I Python lib tests' ['* wav'] 'I Python testing plugin' ['* txt']}return package data
@decoratordef assert signal called signal **expected handler Mock def on call **kwargs return handler **kwargs signal connect on call try yield handler finally signal disconnect on call handler assert called with signal signal **expected
def is Valid Image field data all data from PIL import Imagefrom c String IO import String I Otry content field data['content']except Type Error raise Validation Error gettext ' Nofilewassubmitted Checktheencodingtypeontheform ' try Image open String IO content except IO Error raise Validation Error gettext ' Uploadavalidimage Thefileyouuploadedwaseithernotanimageoracorruptedimage '
def is Valid Image field data all data from PIL import Imagefrom c String IO import String I Otry content field data['content']except Type Error raise Validation Error gettext ' Nofilewassubmitted Checktheencodingtypeontheform ' try Image open String IO content except IO Error raise Validation Error gettext ' Uploadavalidimage Thefileyouuploadedwaseithernotanimageoracorruptedimage '
def Get Class For CLSID clsid clsid str clsid if CLSID To Class Has Class clsid return CLSID To Class Get Class clsid mod Get Module For CLSID clsid if mod is None return Nonetry return CLSID To Class Get Class clsid except Key Error return None
@world absorbdef id click elem id css click '#{}' format elem id
def gruntz e z z0 dir '+' if not z is Symbol raise Not Implemented Error ' Secondargumentmustbea Symbol' r Noneif z0 oo r limitinf e z elif z0 - oo r limitinf e subs z - z z else if str dir '-' e0 e subs z z0 - 1 / z elif str dir '+' e0 e subs z z0 + 1 / z else raise Not Implemented Error "dirmustbe'+'or'-'" r limitinf e0 z return r rewrite 'intractable' deep True
def recv files dest ret {}for path data in six iteritems files if os path basename path os path basename dest and not os path isdir dest final destelif os path isdir dest final os path join dest os path basename path elif os path isdir os path dirname dest final destelse return ' Destinationunavailable'try with salt utils fopen final 'w+' as fp fp write data ret[final] Trueexcept IO Error ret[final] Falsereturn ret
def pr instance type pe id if pe id etable current s3 db pr pentityrow current db etable pe id pe id select etable instance type limitby 0 1 first if row return row instance typereturn None
def Array dtype size None ref False def get Array Type self ' Alittlefunctiontoreplacetheget Type methodofarrays\n\n Itreturnsastringrepresentationofthearrayelementtypeinsteadofthe\nintegervalue NTA Basic Typeenum returnedbytheorigianlarray\n'return self dtypeif ref assert size is None index basic Types index dtype if index -1 raise Exception ' Invaliddatatype ' + dtype if size and size < 0 raise Exception ' Arraysizemustbepositive' suffix ' Array Ref' if ref else ' Array' array Factory getattr engine dtype + suffix array Factory get Type get Array Typeif size a array Factory size else a array Factory a dtype basic Types[index]return a
def sab sanitize foldername name CH ILLEGAL '\\/<>?* "'CH LEGAL '++{} @#`'FL ILLEGAL CH ILLEGAL + ' \x 92 "' FL LEGAL CH LEGAL + "-''" uFL ILLEGAL FL ILLEGAL decode 'latin- 1 ' uFL LEGAL FL LEGAL decode 'latin- 1 ' if not name return nameif isinstance name unicode illegal uFL ILLEGA Llegal uFL LEGA Lelse illegal FL ILLEGA Llegal FL LEGA Llst []for ch in name strip if ch in illegal ch legal[illegal find ch ]lst append ch else lst append ch name '' join lst name name strip ' ' if not name name 'unknown'return name
def sab sanitize foldername name CH ILLEGAL '\\/<>?* "'CH LEGAL '++{} @#`'FL ILLEGAL CH ILLEGAL + ' \x 92 "' FL LEGAL CH LEGAL + "-''" uFL ILLEGAL FL ILLEGAL decode 'latin- 1 ' uFL LEGAL FL LEGAL decode 'latin- 1 ' if not name return nameif isinstance name unicode illegal uFL ILLEGA Llegal uFL LEGA Lelse illegal FL ILLEGA Llegal FL LEGA Llst []for ch in name strip if ch in illegal ch legal[illegal find ch ]lst append ch else lst append ch name '' join lst name name strip ' ' if not name name 'unknown'return name
def finger master hash type None keyname 'master pub'if hash type is None hash type opts ['hash type']fingerprint salt utils pem finger os path join opts ['pki dir'] keyname sum type hash type return {'local' {keyname fingerprint}}
def task enable docker plugin distribution if is systemd distribution distribution return sequence [run from args ['systemctl' 'enable' 'flocker-docker-plugin'] run from args ['systemctl' START 'flocker-docker-plugin'] run from args ['systemctl' START 'docker'] ] elif is ubuntu distribution return sequence [run from args ['service' 'flocker-docker-plugin' 'restart'] run from args ['service' 'docker' 'restart'] ] else raise Distribution Not Supported distribution distribution
def safe to snap client repository None retry interval 120 retry count 3 if not repository raise Missing Argument ' Novaluefor"repository"provided' for count in range 1 retry count + 1 in progress snapshot in progress client repository repository if in progress logger info ' Snapshotalreadyinprogress {0 }' format in progress logger info ' Pausing{ 0 }secondsbeforeretrying ' format retry interval time sleep retry interval logger info ' Retry{ 0 }of{ 1 }' format count retry count else return Truereturn False
def make colorscale colors scale None colorscale []if len colors < 2 raise exceptions Plotly Error ' Youmustinputalistofcolorsthathasatleasttwocolors ' if scale is None scale incr 1 0 / len colors - 1 return [[ i * scale incr color] for i color in enumerate colors ]else if len colors len scale raise exceptions Plotly Error ' Thelengthofcolorsandscalemustbethesame ' validate scale values scale colorscale [list tup for tup in zip scale colors ]return colorscale
def make colorscale colors scale None colorscale []if len colors < 2 raise exceptions Plotly Error ' Youmustinputalistofcolorsthathasatleasttwocolors ' if scale is None scale incr 1 0 / len colors - 1 return [[ i * scale incr color] for i color in enumerate colors ]else if len colors len scale raise exceptions Plotly Error ' Thelengthofcolorsandscalemustbethesame ' validate scale values scale colorscale [list tup for tup in zip scale colors ]return colorscale
def make colorscale colors scale None colorscale []if len colors < 2 raise exceptions Plotly Error ' Youmustinputalistofcolorsthathasatleasttwocolors ' if scale is None scale incr 1 0 / len colors - 1 return [[ i * scale incr color] for i color in enumerate colors ]else if len colors len scale raise exceptions Plotly Error ' Thelengthofcolorsandscalemustbethesame ' validate scale values scale colorscale [list tup for tup in zip scale colors ]return colorscale
def make colorscale colors scale None colorscale []if len colors < 2 raise exceptions Plotly Error ' Youmustinputalistofcolorsthathasatleasttwocolors ' if scale is None scale incr 1 0 / len colors - 1 return [[ i * scale incr color] for i color in enumerate colors ]else if len colors len scale raise exceptions Plotly Error ' Thelengthofcolorsandscalemustbethesame ' validate scale values scale colorscale [list tup for tup in zip scale colors ]return colorscale
def translate attributes op server dict operation kwargs auto disk config raw server dict pop API DISK CONFIG None if auto disk config raw is not None auto disk config disk config from api auto disk config raw operation kwargs['auto disk config'] auto disk configif API ACCESS V4 in server dict operation kwargs['access ip v4 '] server dict pop API ACCESS V4 if API ACCESS V6 in server dict operation kwargs['access ip v6 '] server dict pop API ACCESS V6 if 'preserve ephemeral' in server dict and op REBUILD preserve strutils bool from string server dict pop 'preserve ephemeral' strict True operation kwargs['preserve ephemeral'] preserveif 'personality' in server dict if op REBUILD operation kwargs['files to inject'] get injected files server dict pop 'personality' if op CREATE operation kwargs['injected files'] get injected files server dict pop 'personality' []
def primary key hash keys if isinstance keys[ 0 ] six text type keys[ 0 ] keys[ 0 ] encode 'utf- 8 ' return hashlib sha 1 keys[ 0 ] hexdigest
def is url dns urlstr url qurl from user input urlstr assert url is Valid if utils raises Value Error ipaddress ip address urlstr and not Q Host Address urlstr is Null log url debug ' Bogus IPURL-> False' return Falsehost url host if not host log url debug 'UR Lhasnohost-> False' return Falselog url debug ' Doing DN Srequestfor{}' format host info Q Host Info from Name host return not info error
def is initialized cr cr execute "SELEC Trelname FRO Mpg class WHER Erelkind 'r'AN Drelname 'ir module module'" return len cr fetchall > 0
def confirm question default True if default suffix 'Y/n'else suffix 'y/N'while True response prompt '%s[%s]' % question suffix lower if not response return defaultif response in ['y' 'yes'] return Trueif response in ['n' 'no'] return Falseprint " Ididn'tunderstandyou Pleasespecify' y es'or' n o' "
def get default yarncluster global MR NAME CACH Etry return conf YARN CLUSTERS[MR NAME CACHE]except Key Error return get yarn
def get Maximum By Path Complex path maximum complex -999999999 0 -999999999 0 for point in path maximum get Maximum maximum point return maximum
def real name magic func magic name magic func name if magic name startswith 'magic ' magic name magic name[len 'magic ' ]return getattr magic func 'argcmd name' magic name
def delete ikepolicy ikepolicy profile None conn auth profile return conn delete ikepolicy ikepolicy
def get auth type entity id includes if 'user-tags' in includes or 'user-ratings' in includes return AUTH YE Selif entity startswith 'collection' if not id return AUTH YE Selse return AUTH IFSE Telse return AUTH NO
def marker comparator matches markers def comparator marker 1 marker 2 '\n Theactualcomparatorfunction \n'matches count marker weight matches marker 2 - marker weight matches marker 1 if matches count return matches countlen diff len marker 2 - len marker 1 if len diff return len diffreturn markers index marker 2 - markers index marker 1 return comparator
@ Local Contextdef scramble raw bytes *a **kw return encode raw bytes force 1 *a **kw
@ Local Contextdef scramble raw bytes *a **kw return encode raw bytes force 1 *a **kw
def regions return get regions 'ses' connection cls SES Connection
def can use numexpr op op str a b dtype check if op str is not None if np prod a shape > MIN ELEMENTS dtypes set for o in [a b] if hasattr o 'get dtype counts' s o get dtype counts if len s > 1 return Falsedtypes set s index elif isinstance o np ndarray dtypes set [o dtype name] if not len dtypes or ALLOWED DTYPES[dtype check] > dtypes return Truereturn False
def get stores ret dict cmd " Get- Child Item- Path' Cert \\' Select- Object Location Name Store Names"items cmd run cmd cmd as json True for item in items ret[item[' Location Name']] list for store in item[' Store Names'] ret[item[' Location Name']] append store return ret
@pytest fixturedef admin user default groups user User username 'test admin' email 'test admin@example org' password 'test' primary group default groups[ 0 ] activated True user save return user
@login requireddef unfollow request username template name 'relationships/relationship delete confirm html' success template name 'relationships/relationship delete success html' content type 'text/html' to user get object or 404 User username username from user request usernext request GET get 'next' None if request method 'POST' relationship get object or 404 Relationship to user to user from user from user relationship delete if request is ajax response {'success' ' Success' 'to user' {'username' to user username 'user id' to user pk} 'from user' {'username' from user username 'user id' from user pk}}return Http Response json dumps response content type 'application/json' if next return Http Response Redirect next template name success template namecontext {'to user' to user 'next' next}return render to response template name context context instance Request Context request content type content type
def get hello return 'foo'
def get hello return 'foo'
def get hello return 'foo'
def nickname commands *command list def add attribute function if not hasattr function u'rule' function rule []rule u'\n^\n$nickname[ ]?# Nickname \n\\s+ {command} # Commandasgroup 1 \n ? \\s+# Whitespacetoendcommand \n # Restofthelineasgroup 2 \n ? \\S+ ?# Parameters 1 - 4 asgroups 3 - 6 \n ? \\s+ \\S+ ?\n ? \\s+ \\S+ ?\n ? \\s+ \\S+ ?\n *# Acceptanythingaftertheparameters Leaveitupto\n#themoduletoparsetheline \n ?# Group 1 mustbe None iftherearenoparameters \n$# Eo L sotherearenopartialmatches \n' format command u' ' join command list function rule append rule return functionreturn add attribute
def transform ipynb uri uri uri rewrite list for reg rewrite in uri rewrite list matches re match reg uri if matches return rewrite format *matches groups if '?' in uri uri query uri split '?' 1 uri '%s/%s' % uri quote '?' + query return uri
def transform ipynb uri uri uri rewrite list for reg rewrite in uri rewrite list matches re match reg uri if matches return rewrite format *matches groups if '?' in uri uri query uri split '?' 1 uri '%s/%s' % uri quote '?' + query return uri
def extract environ empty False err False formdata cgi parse environ['wsgi input'] environ empty err for key value in formdata iteritems if len value 1 formdata[key] value[ 0 ]return formdata
def get Radius Arealized Multiplier sides return math sqrt global Tau / sides / math sin global Tau / sides
def periodic tasks if mpstate status setup mode returnif mpstate settings compdebug & 2 0 returnif mpstate settings heartbeat 0 heartbeat period frequency mpstate settings heartbeatif heartbeat period trigger and mpstate settings heartbeat 0 mpstate status counters[' Master Out'] + 1for master in mpstate mav master send heartbeat master if heartbeat check period trigger check link status set stream rates for m pm in mpstate modules if hasattr m 'idle task' try m idle task except Exception as msg if mpstate settings moddebug 1 print msgelif mpstate settings moddebug > 1 exc type exc value exc traceback sys exc info traceback print exception exc type exc value exc traceback limit 2 file sys stdout if m needs unloading unload module m name
def register writer klass if not compat callable klass raise Value Error ' Canonlyregistercallablesasengines' engine name klass engine writers[engine name] klassfor ext in klass supported extensions if ext startswith ' ' ext ext[ 1 ]if ext not in writer extensions config register option 'io excel %s writer' % ext engine name validator str writer extensions append ext
def exists path use sudo False verbose False func use sudo and sudo or run cmd 'stat%s' % expand path path if verbose with settings warn only True return not func cmd failed with settings hide 'everything' warn only True return not func cmd failed
def exists path use sudo False verbose False func use sudo and sudo or run cmd 'stat%s' % expand path path if verbose with settings warn only True return not func cmd failed with settings hide 'everything' warn only True return not func cmd failed
def trg trigger uid res type res id cr return Workflow Service new cr uid res type res id trigger
def override Func v t return 'OVERRIDDEN'
def send notification request notification backends getattr settings 'NOTIFICATION BACKENDS' [] for cls name in backends backend import string cls name request backend send notification
def Expand Windows Environment Variables data string knowledge base win environ regex re compile '% [^%]+? %' components []offset 0for match in win environ regex finditer data string components append data string[offset match start ] kb value getattr knowledge base 'environ %s' % match group 1 lower None if isinstance kb value basestring and kb value components append kb value else components append '%%%s%%' % match group 1 offset match end components append data string[offset ] return '' join components
def get violations reports violations type violations files []for subdir dirs files in os walk os path join Env REPORT DIR for f in files if f '{violations type} report' format violations type violations type violations files append os path join subdir f return violations files
def normalize data nfkc True if nfkc data unicodedata normalize u'NFKC' data return data
def get Starts With Curly Equal Round Square word return word startswith '{' or word startswith ' ' or word startswith ' ' or word startswith '['
@library global functiondef static path try return django static path except Value Error as err log error ' Statichelpererror %s' % err return ''
def get possible outcomes m bits size max m shape nqubits int math log size 2 + 0 1 output matrices []for i in range 1 << len bits output matrices append zeros 2 ** nqubits 1 bit masks []for bit in bits bit masks append 1 << bit for i in range 2 ** nqubits trueness 0for j in range len bit masks if i & bit masks[j] trueness + j + 1 output matrices[trueness][i] m[i]return output matrices
def get possible outcomes m bits size max m shape nqubits int math log size 2 + 0 1 output matrices []for i in range 1 << len bits output matrices append zeros 2 ** nqubits 1 bit masks []for bit in bits bit masks append 1 << bit for i in range 2 ** nqubits trueness 0for j in range len bit masks if i & bit masks[j] trueness + j + 1 output matrices[trueness][i] m[i]return output matrices
def get possible outcomes m bits size max m shape nqubits int math log size 2 + 0 1 output matrices []for i in range 1 << len bits output matrices append zeros 2 ** nqubits 1 bit masks []for bit in bits bit masks append 1 << bit for i in range 2 ** nqubits trueness 0for j in range len bit masks if i & bit masks[j] trueness + j + 1 output matrices[trueness][i] m[i]return output matrices
def get string buff start idx str data ''next idx start idx + 1 got end Falsefor c in buff[start idx ] if ord c 0 got end Truebreakstr data + cnext idx + 1if not got end raise Invalid String Exception return str data next idx
def group name None **attrs attrs setdefault 'cls' Group return command name **attrs
def remove async tag url question id return reverse 'questions remove tag async' kwargs {'question id' question id}
def remove async tag url question id return reverse 'questions remove tag async' kwargs {'question id' question id}
def check forhash filename if isinstance filename list filename filename[ 0 ] path name os path split filename if re search u' 0x[a-z 0 - 9 ]{ 32 } ' name hashvalue re findall u' 0x[a-z 0 - 9 ]{ 32 } ' name return True hashvalue else return False None
@ensure csrf cookie@login requireddef export git request course key string course key Course Key from string course key string if not has course author access request user course key raise Permission Denied course module modulestore get course course key failed Falselog debug 'export gitcourse module %s' course module msg ''if 'action' in request GET and course module giturl if request GET['action'] 'push' try git export utils export to git course module id course module giturl request user msg ' Coursesuccessfullyexportedtogitrepository' except git export utils Git Export Error as ex failed Truemsg unicode ex return render to response 'export git html' {'context course' course module 'msg' msg 'failed' failed}
def has value key return True if salt utils traverse dict and list grains key False else False
def has value key return True if salt utils traverse dict and list grains key False else False
def load Mime Types mimetype locations None init mimetypes init init mimetype locations mimetypes types map update {' conf' 'text/plain' ' diff' 'text/plain' ' flac' 'audio/x-flac' ' java' 'text/plain' ' oz' 'text/x-oz' ' swf' 'application/x-shockwave-flash' ' wml' 'text/vnd wap wml' ' xul' 'application/vnd mozilla xul+xml' ' patch' 'text/plain'} return mimetypes types map
def get value context key if isinstance context dict if key in context return context[key]elif type context module BUILTIN MODULE try attr getattr context key except Attribute Error passelse if callable attr return attr return attrreturn NOT FOUND
def getdoc object try doc object doc except Attribute Error return Noneif not isinstance doc types String Types return Nonereturn cleandoc doc
def get Hitmask image mask []for x in range image get width mask append [] for y in range image get height mask[x] append bool image get at x y [3 ] return mask
def get system packs base path return cfg CONF content system packs base path
def test column named items class Items Table tables Table items tables Column table Items Table [{u'items' 123 } {u'items' 2345 }] html table as html request assert u' 123 ' in html assert u' 2345 ' in html
def test column named items class Items Table tables Table items tables Column table Items Table [{u'items' 123 } {u'items' 2345 }] html table as html request assert u' 123 ' in html assert u' 2345 ' in html
def test column named items class Items Table tables Table items tables Column table Items Table [{u'items' 123 } {u'items' 2345 }] html table as html request assert u' 123 ' in html assert u' 2345 ' in html
def add flex arithmetic methods cls flex arith method flex comp method None flex bool method None use numexpr True force False select None exclude None new methods create methods flex arith method flex comp method flex bool method use numexpr default axis 'columns' special False new methods update dict multiply new methods['mul'] subtract new methods['sub'] divide new methods['div'] for k in 'ror ' 'rxor' 'rand ' if k in new methods new methods pop k add methods cls new methods new methods force force select select exclude exclude
def raise errors on nested writes method name serializer validated data assert not any isinstance field Base Serializer and field source in validated data and isinstance validated data[field source] list dict for field in serializer writable fields u' The` {method name} `methoddoesnotsupportwritablenestedfieldsbydefault \n Writeanexplicit` {method name} `methodforserializer`{module} {class name}` orset`read only True`onnestedserializerfields ' format method name method name module serializer class module class name serializer class name assert not any u' ' in field source and key in validated data and isinstance validated data[key] list dict for key field in serializer fields items u' The` {method name} `methoddoesnotsupportwritabledotted-sourcefieldsbydefault \n Writeanexplicit` {method name} `methodforserializer`{module} {class name}` orset`read only True`ondotted-sourceserializerfields ' format method name method name module serializer class module class name serializer class name
def raise errors on nested writes method name serializer validated data assert not any isinstance field Base Serializer and field source in validated data and isinstance validated data[field source] list dict for field in serializer writable fields u' The` {method name} `methoddoesnotsupportwritablenestedfieldsbydefault \n Writeanexplicit` {method name} `methodforserializer`{module} {class name}` orset`read only True`onnestedserializerfields ' format method name method name module serializer class module class name serializer class name assert not any u' ' in field source and key in validated data and isinstance validated data[key] list dict for key field in serializer fields items u' The` {method name} `methoddoesnotsupportwritabledotted-sourcefieldsbydefault \n Writeanexplicit` {method name} `methodforserializer`{module} {class name}` orset`read only True`ondotted-sourceserializerfields ' format method name method name module serializer class module class name serializer class name
def raise errors on nested writes method name serializer validated data assert not any isinstance field Base Serializer and field source in validated data and isinstance validated data[field source] list dict for field in serializer writable fields u' The` {method name} `methoddoesnotsupportwritablenestedfieldsbydefault \n Writeanexplicit` {method name} `methodforserializer`{module} {class name}` orset`read only True`onnestedserializerfields ' format method name method name module serializer class module class name serializer class name assert not any u' ' in field source and key in validated data and isinstance validated data[key] list dict for key field in serializer fields items u' The` {method name} `methoddoesnotsupportwritabledotted-sourcefieldsbydefault \n Writeanexplicit` {method name} `methodforserializer`{module} {class name}` orset`read only True`ondotted-sourceserializerfields ' format method name method name module serializer class module class name serializer class name
def raise errors on nested writes method name serializer validated data assert not any isinstance field Base Serializer and field source in validated data and isinstance validated data[field source] list dict for field in serializer writable fields u' The` {method name} `methoddoesnotsupportwritablenestedfieldsbydefault \n Writeanexplicit` {method name} `methodforserializer`{module} {class name}` orset`read only True`onnestedserializerfields ' format method name method name module serializer class module class name serializer class name assert not any u' ' in field source and key in validated data and isinstance validated data[key] list dict for key field in serializer fields items u' The` {method name} `methoddoesnotsupportwritabledotted-sourcefieldsbydefault \n Writeanexplicit` {method name} `methodforserializer`{module} {class name}` orset`read only True`ondotted-sourceserializerfields ' format method name method name module serializer class module class name serializer class name
def raise errors on nested writes method name serializer validated data assert not any isinstance field Base Serializer and field source in validated data and isinstance validated data[field source] list dict for field in serializer writable fields u' The` {method name} `methoddoesnotsupportwritablenestedfieldsbydefault \n Writeanexplicit` {method name} `methodforserializer`{module} {class name}` orset`read only True`onnestedserializerfields ' format method name method name module serializer class module class name serializer class name assert not any u' ' in field source and key in validated data and isinstance validated data[key] list dict for key field in serializer fields items u' The` {method name} `methoddoesnotsupportwritabledotted-sourcefieldsbydefault \n Writeanexplicit` {method name} `methodforserializer`{module} {class name}` orset`read only True`ondotted-sourceserializerfields ' format method name method name module serializer class module class name serializer class name
def ndeepmap n func seq if n 1 return [func item for item in seq]elif n > 1 return [ndeepmap n - 1 func item for item in seq]else return func seq
def get Removed Float default Float element Node key prefix prefix Key prefix + key if prefix Key in element Node attributes float Value evaluate get Evaluated Float None element Node prefix Key if float Value None print ' Warning evaluatedvalueinget Removed Float By Keysinmatrixis Noneforkey 'print prefix Keyprint 'forelement Nodedictionaryvalue 'print element Node attributes[prefix Key]print 'forelement Nodedictionary 'print element Node attributeselse default Float float Valuedel element Node attributes[prefix Key]return default Float
@deprecated u' 2 1' def allpairs x return [ s f for i f in enumerate x for s in x[ i + 1 ]]
def clean global runtime state reset runtracker True reset subsystem False if reset runtracker Run Tracker global instance reset reset options False if reset subsystem Subsystem reset Intermediate Target Factory Base reset Goal clear Options Initializer reset
def format call func args None kwargs None full True if full name utils qualname func else name func name return '{} {} ' format name format args args kwargs
@decorators api view ['GET'] @decorators permission classes permissions Allow Any @decorators renderer classes JSON Renderer def cname request host request GET get 'host' if not host return Response {'error' 'host GE Targrequired'} status status HTTP 400 BAD REQUEST host clean url host slug cname to slug host return Response {'host' host 'slug' slug}
def args task if istask task return task[ 1 ]elif isinstance task list return taskelse return
def write stream stream outfile flush try buf outfile bufferexcept Attribute Error buf outfilefor chunk in stream buf write chunk if flush outfile flush
def sum of squares n k zeros False for t in power representation n 2 k zeros yield t
def get or create anonymous cart from token token cart queryset Cart objects all return cart queryset open filter token token user None get or create defaults {u'user' None} [0 ]
def debug msg level 1 log msg logging DEBUG + 1 - level
@taskdef rabbitmq ctx ctx run 'rabbitmq-server' pty True
def add deprecated argument add argument argument name nargs class Show Warning argparse Action ' Actiontologawarningwhenanargumentisused 'def call self unused 1 unused 2 unused 3 option string None sys stderr write ' Useof{ 0 }isdeprecated \n' format option string configargparse ACTION TYPES THAT DONT NEED A VALUE add Show Warning add argument argument name action Show Warning help argparse SUPPRESS nargs nargs
def rm rf name if not os path exists name returntry shutil rmtree name except OS Error as e if e errno errno ENOTDIR safe delete name elif e errno errno ENOENT raise
def rm rf name if not os path exists name returntry shutil rmtree name except OS Error as e if e errno errno ENOTDIR safe delete name elif e errno errno ENOENT raise
def rm rf name if not os path exists name returntry shutil rmtree name except OS Error as e if e errno errno ENOTDIR safe delete name elif e errno errno ENOENT raise
def rm rf name if not os path exists name returntry shutil rmtree name except OS Error as e if e errno errno ENOTDIR safe delete name elif e errno errno ENOENT raise
def jenkins result from api result if result is None return Jenkins Results RUNNIN Gelif result in ['FAILURE' 'ABORTED'] return Jenkins Results FAILE Delif result 'SUCCESS' return Jenkins Results PASSE Delse raise Assertion Error " Don'tknowhowtohandle Jenkinsresult{}" format result
def require global staff func @wraps func def wrapped request *args **kwargs if Global Staff has user request user return func request *args **kwargs else return Http Response Forbidden u' Mustbe{platform name}stafftoperformthisaction ' format platform name settings PLATFORM NAME return login required wrapped
def require global staff func @wraps func def wrapped request *args **kwargs if Global Staff has user request user return func request *args **kwargs else return Http Response Forbidden u' Mustbe{platform name}stafftoperformthisaction ' format platform name settings PLATFORM NAME return login required wrapped
def evaluate quadratic J g s diag None if s ndim 1 Js J dot s q np dot Js Js if diag is not None q + np dot s * diag s else Js J dot s T q np sum Js ** 2 axis 0 if diag is not None q + np sum diag * s ** 2 axis 1 l np dot s g return 0 5 * q + l
def evaluate quadratic J g s diag None if s ndim 1 Js J dot s q np dot Js Js if diag is not None q + np dot s * diag s else Js J dot s T q np sum Js ** 2 axis 0 if diag is not None q + np sum diag * s ** 2 axis 1 l np dot s g return 0 5 * q + l
def effective debug level ctx bundle extra filters None default None if default is None default ctx environment debugif bundle config get 'debug' is not None level bundle config debugelse filters merge filters bundle filters extra filters level 'merge' if select filters filters True else None if level is not None if cmp debug levels default level > 0 return levelreturn default
def modpython Handler request from mod python import apacheconfig path request get options get 'config' 'tilestache cfg' config path realpath pathjoin dirname request filename config path path info request path infoquery string request args mimetype content request Handler config path path info query string request status apache HTTP O Krequest content type mimetyperequest set content length len content request send http header request write content return apache OK
def check numpy unicode bug labels if np version[ 3] < 1 7 0 and labels dtype kind 'U' raise Runtime Error ' Num Py< 1 7 0doesnotimplementsearchsortedonunicodedatacorrectly Pleaseupgrade Num Pytouse Label Encoderwithunicodeinputs '
def create generic db jobs dir dataset id stage if jobs dir 'none' jobs dir digits config config value 'jobs dir' dataset dir os path join jobs dir dataset id if not os path isdir dataset dir raise IO Error ' Datasetdir%sdoesnotexist' % dataset dir dataset Job load dataset dir extension id dataset extension idextension class extensions data get extension extension id extension extension class **dataset extension userdata feature encoding dataset feature encodinglabel encoding dataset label encodingbatch size dataset batch sizenum threads dataset num threadsforce same shape dataset force same shapedb creator Db Creator db creator create db extension stage dataset dir batch size num threads feature encoding label encoding force same shape logger info ' Generic D Bcreation Done'
def sc decode soundcheck if isinstance soundcheck six text type soundcheck soundcheck encode 'utf- 8 ' try soundcheck codecs decode soundcheck replace '' '' 'hex' soundcheck struct unpack ' iiiiiiiiii' soundcheck except struct error Type Error binascii Error return 0 0 0 0 maxgain max soundcheck[ 2] if maxgain > 0 gain math log 10 maxgain / 1000 0 * -10 else gain 0 0peak max soundcheck[ 6 8] / 32768 0 return round gain 2 round peak 6
def str join arr sep return na map sep join arr
def disable root login sshd config '/etc/ssh/sshd config' update ssh setting sshd config ' Permit Root Login' 'no'
def disable root login sshd config '/etc/ssh/sshd config' update ssh setting sshd config ' Permit Root Login' 'no'
def do send confirmation email invitee referrer subject template path 'confirmation/invite email subject txt'body template path 'confirmation/invite email body txt'context {'referrer' referrer 'support email' settings ZULIP ADMINISTRATOR 'verbose support offers' settings VERBOSE SUPPORT OFFERS}if referrer realm is zephyr mirror realm subject template path 'confirmation/mituser invite email subject txt'body template path 'confirmation/mituser invite email body txt' Confirmation objects send confirmation invitee invitee email additional context context subject template path subject template path body template path body template path host referrer realm host
@app template filter 'as timezone' def as timezone dt tzname if tzname and timezone tzname return dt astimezone timezone tzname return dt
def get current theme request None if current theme class is not not set if current theme class return current theme class return Nonevalue cache get THEME CACHE KEY if value return valueif request and hasattr request ' current xtheme' return request current xthemetheme get current theme if request request current xtheme themecache set THEME CACHE KEY theme return theme
def to encodable string obj encoding if isinstance obj Data Token obj obj get value if isinstance obj unicode obj obj encode encoding errors 'ignore' else obj str obj return obj
def to encodable string obj encoding if isinstance obj Data Token obj obj get value if isinstance obj unicode obj obj encode encoding errors 'ignore' else obj str obj return obj
def to encodable string obj encoding if isinstance obj Data Token obj obj get value if isinstance obj unicode obj obj encode encoding errors 'ignore' else obj str obj return obj
def mult cal one data view one idx cals mult one np asarray one dtype data view dtype assert data view shape[ 1 ] one shape[ 1 ] if mult is not None data view[ ] np dot mult one else if isinstance idx slice data view[ ] one[idx]else np take one idx axis 0 out data view if cals is not None data view * cals
def revert strip none data if isinstance data str and data strip '~' return Noneif isinstance data list data 2 []for x in data data 2 append revert strip none x return data 2 if isinstance data dict data 2 {}for key in data keys data 2 [key] revert strip none data[key] return data 2 return data
def net read sock count expiration s ''while count > 0 wait for readable sock expiration n sock recv count if n '' raise EOF Errorcount count - len n s s + n return s
def datetime from iso 8601 datetime str return aniso 8601 parse datetime datetime str
def conflicting single link scheme link if link sink channel single existing scheme find links sink node link sink node sink channel link sink channel if existing assert len existing 1 return existing[ 0 ]return None
def conflicting single link scheme link if link sink channel single existing scheme find links sink node link sink node sink channel link sink channel if existing assert len existing 1 return existing[ 0 ]return None
@when u'wecreatetable' def step create table context context cli sendline u'createtablea xtext '
def videos index html course return render to response 'videos index html' {'context course' course 'video handler url' reverse course url 'videos handler' unicode course id 'encodings download url' reverse course url 'video encodings download' unicode course id 'previous uploads' get index videos course 'concurrent upload limit' settings VIDEO UPLOAD PIPELINE get 'CONCURRENT UPLOAD LIMIT' 0 'video supported file formats' VIDEO SUPPORTED FILE FORMATS keys 'video upload max file size' VIDEO UPLOAD MAX FILE SIZE GB}
def videos index html course return render to response 'videos index html' {'context course' course 'video handler url' reverse course url 'videos handler' unicode course id 'encodings download url' reverse course url 'video encodings download' unicode course id 'previous uploads' get index videos course 'concurrent upload limit' settings VIDEO UPLOAD PIPELINE get 'CONCURRENT UPLOAD LIMIT' 0 'video supported file formats' VIDEO SUPPORTED FILE FORMATS keys 'video upload max file size' VIDEO UPLOAD MAX FILE SIZE GB}
def videos index html course return render to response 'videos index html' {'context course' course 'video handler url' reverse course url 'videos handler' unicode course id 'encodings download url' reverse course url 'video encodings download' unicode course id 'previous uploads' get index videos course 'concurrent upload limit' settings VIDEO UPLOAD PIPELINE get 'CONCURRENT UPLOAD LIMIT' 0 'video supported file formats' VIDEO SUPPORTED FILE FORMATS keys 'video upload max file size' VIDEO UPLOAD MAX FILE SIZE GB}
def get net size mask binary str ''for octet in mask split ' ' binary str + bin int octet [2 ] zfill 8 return len binary str rstrip '0 '
def get wanna help queue from session session ret []for project id in session get PROJECTS TO HELP OUT KEY [] try project mysite search models Project objects get id project id except mysite search models Project Does Not Exist continueret append project ret list set ret return ret
def compare Portion Direction portion Direction other Portion Direction if portion Direction portion > other Portion Direction portion return 1if portion Direction portion < other Portion Direction portion return -1 if portion Direction direction Reversed < other Portion Direction direction Reversed return -1 return portion Direction direction Reversed > other Portion Direction direction Reversed
@pytest fixturedef clear cache from django core cache import cachesfrom django redis import get redis connectionget redis connection 'default' flushdb caches['exports'] clear
def mksalt method None if method is None method methods[ 0 ]s '${}$' format method ident if method ident else '' s + '' join sr choice saltchars for char in range method salt chars return s
def device extents devmem s drvapi cu device ptr n c size t devptr device ctypes pointer devmem driver cu Mem Get Address Range byref s byref n devptr s n s value n value return s s + n
def process mass form f def wrap request *args **kwargs ' Wrap'user request user profileif 'massform' in request POST for key in request POST if 'mass-report' in key try report Report objects get pk request POST[key] form Mass Action Form user request POST instance report if form is valid and user has permission report mode 'w' form save except Exception passreturn f request *args **kwargs wrap doc f doc wrap name f name return wrap
def define xml str xml conn get conn return conn define XML xml is not None
def vmstat vm stat ['vmstatus ']vm stat + utils system output 'vmstat' verbose False splitlines vm stat + ['\n']return vm stat
def main run wsgi app wsgiapp
def threadsafe function lock threading R Lock def decorator *args **kwargs with lock v function *args **kwargs return vreturn decorator
def threadsafe function lock threading R Lock def decorator *args **kwargs with lock v function *args **kwargs return vreturn decorator
def threadsafe function lock threading R Lock def decorator *args **kwargs with lock v function *args **kwargs return vreturn decorator
def coerce types **kwargs def coerce types return coerce *types return preprocess **valmap coerce kwargs
def coerce types **kwargs def coerce types return coerce *types return preprocess **valmap coerce kwargs
def G Data Entry From String xml string return atom Create Class From XML String G Data Entry xml string
def relative symlink source path link path if not os path isabs source path raise Value Error u' Pathforsource {}mustbeabsolute' format source path if not os path isabs link path raise Value Error u' Pathforlink {}mustbeabsolute' format link path if source path link path raise Value Error u' Pathforlinkisidenticaltosource {}' format source path if os path isdir link path and not os path islink link path raise Value Error u' Pathforlinkwouldoverwriteanexistingdirectory {}' format link path try if os path lexists link path os unlink link path rel path os path relpath source path os path dirname link path os symlink rel path link path except OS Error as e if not e errno errno EEXIST or e errno errno ENOENT raise
@world absorbdef css has value css selector value index 0 if value wait for lambda css value css selector index index return css value css selector index index value
@world absorbdef css has value css selector value index 0 if value wait for lambda css value css selector index index return css value css selector index index value
def change minion cachedir minion id cachedir data None base None if not isinstance data dict return Falseif base is None base opts ['cachedir']fname '{ 0 } p' format minion id path os path join base cachedir fname with salt utils fopen path 'r' as fh cache data msgpack load fh cache data update data with salt utils fopen path 'w' as fh msgpack dump cache data fh
def change minion cachedir minion id cachedir data None base None if not isinstance data dict return Falseif base is None base opts ['cachedir']fname '{ 0 } p' format minion id path os path join base cachedir fname with salt utils fopen path 'r' as fh cache data msgpack load fh cache data update data with salt utils fopen path 'w' as fh msgpack dump cache data fh
def command from fabtools require deb import package as require deb packagefrom fabtools require rpm import package as require rpm packagefrom fabtools require portage import package as require portage packageres run 'hg--version' quiet True if res failed family distrib family if family 'debian' require deb package 'mercurial' elif family 'gentoo' require portage package 'mercurial' elif family 'redhat' require rpm package 'mercurial' else raise Unsupported Family supported ['debian' 'redhat' 'gentoo']
def match dhcp options vpc conn tags None options None dhcp options vpc conn get all dhcp options for dopts in dhcp options if not tags or get resource tags vpc conn dopts id tags if not options or dopts options options return True dopts return False None
def update backend None fileserver salt fileserver Fileserver opts fileserver update back backend return True
def kegg link target db source db option None if option and option not in ['turtle' 'n-triple'] raise Exception ' Invalidoptionargforkeggconvrequest ' if isinstance source db list source db '+' join source db if option resp q 'link' target db source db option else resp q 'link' target db source db return resp
def hello 6 response flash ' Hello Worldinaflash 'return dict message T ' Hello World'
def datetime 2 epoch dt if dt is not None return calendar timegm dt utctimetuple
def fetch requirements requirements file path links []reqs []for req in parse requirements requirements file path session False if req link links append str req link reqs append str req req return reqs links
def robot registry xml parent data parent XML Sub Element xml parent 'hudson plugins robot Robot Publisher' parent set 'plugin' 'robot' mappings [ 'output-path' 'output Path' None 'log-file-link' 'log File Link' '' 'report-html' 'report File Name' 'report html' 'log-html' 'log File Name' 'log html' 'output-xml' 'output File Name' 'output xml' 'pass-threshold' 'pass Threshold' '0 0' 'unstable-threshold' 'unstable Threshold' '0 0' 'only-critical' 'only Critical' True 'enable-cache' 'enable Cache' True ]helpers convert mapping to xml parent data mappings fail required True other files XML Sub Element parent 'other Files' for other file in data get 'other-files' [] XML Sub Element other files 'string' text str other file XML Sub Element parent 'disable Archive Output' text str not data get 'archive-output-xml' True lower
def nopackage pkg name options None if is installed pkg name uninstall pkg name options
def as vec 4 obj default 0 0 0 1 obj np atleast 2d obj if obj shape[ -1 ] < 4 new np empty obj shape[ -1 ] + 4 dtype obj dtype new[ ] defaultnew[ obj shape[ -1 ]] objobj newelif obj shape[ -1 ] > 4 raise Type Error ' Arrayshape%scannotbeconvertedtovec 4 ' % obj shape return obj
def reset worker optimizations global trace task rettrace task ret trace task rettry delattr Base Task u' stackprotected' except Attribute Error passtry Base Task call patched pop u' Base Task call ' except Key Error passfrom celery worker import request as request modulerequest module trace task ret trace task ret
def is standard return 'DESKTOP LAUNCH' in os environ
def is standard return 'DESKTOP LAUNCH' in os environ
@register jitabledef select arry k low high i partition arry low high while i k if i < k low i + 1 i partition arry low high else high i - 1 i partition arry low high return arry[k]
def helmert n full False H np tril np ones n n -1 - np diag np arange n d np arange n * np arange 1 n + 1 H[ 0 ] 1d[ 0 ] nH full H / np sqrt d [ np newaxis] if full return H fullelse return H full[ 1 ]
def get slogdet diag walker a if isinstance a dtype types Complex @register jitabledef cmplx diag walker n a sgn csgn sgn + 0j acc 0 0for k in range n absel np abs a[ k k ] csgn csgn * a[ k k ] / absel acc acc + np log absel return csgn acc return cmplx diag walkerelse @register jitabledef real diag walker n a sgn acc 0 0for k in range n v a[ k k ]if v < 0 0 sgn - sgn v - v acc acc + np log v return sgn + 0 0 acc return real diag walker
def choose n k if 0 < k < n ntok ktok 1 1 for t in range 1 min k n - k + 1 ntok * nktok * tn - 1return ntok // ktok else return 0
def get service hass config discovery info None import boto 3 aws config config copy del aws config[CONF PLATFORM]del aws config[CONF NAME]profile aws config get CONF PROFILE NAME if profile is not None boto 3 setup default session profile name profile del aws config[CONF PROFILE NAME]sns client boto 3 client 'sns' **aws config return AWSSNS sns client
def user absent name channel 14 **kwargs ret {'name' name 'result' False 'comment' '' 'changes' {}}user id list salt ['ipmi get name uids'] name channel **kwargs if len user id list 0 ret['result'] Trueret['comment'] 'useralreadyabsent'return retif opts ['test'] ret['comment'] 'woulddeleteuser s 'ret['result'] Noneret['changes'] {'delete' user id list}return retfor uid in user id list salt ['ipmi delete user'] uid channel **kwargs ret['comment'] 'user s removed'ret['changes'] {'old' user id list 'new' ' None'}return ret
def user absent name channel 14 **kwargs ret {'name' name 'result' False 'comment' '' 'changes' {}}user id list salt ['ipmi get name uids'] name channel **kwargs if len user id list 0 ret['result'] Trueret['comment'] 'useralreadyabsent'return retif opts ['test'] ret['comment'] 'woulddeleteuser s 'ret['result'] Noneret['changes'] {'delete' user id list}return retfor uid in user id list salt ['ipmi delete user'] uid channel **kwargs ret['comment'] 'user s removed'ret['changes'] {'old' user id list 'new' ' None'}return ret
def IS CHARACTER JUNK ch ws ' DCTB ' return ch in ws
@dog stats api timed 'edxapp heartbeat' def heartbeat request try output modulestore heartbeat except Heartbeat Failure as fail return Json Response {fail service unicode fail } status 503 cursor connection cursor try cursor execute 'SELECTCURRENT DATE' cursor fetchone output['SQL'] Trueexcept Database Error as fail return Json Response {'SQL' unicode fail } status 503 return Json Response output
@dog stats api timed 'edxapp heartbeat' def heartbeat request try output modulestore heartbeat except Heartbeat Failure as fail return Json Response {fail service unicode fail } status 503 cursor connection cursor try cursor execute 'SELECTCURRENT DATE' cursor fetchone output['SQL'] Trueexcept Database Error as fail return Json Response {'SQL' unicode fail } status 503 return Json Response output
def create operation arg 1 operator arg 2 if operator not in OPERATORS raise Operator Creation Error 'unknownoperator"{ 0 }"' format operator opfunc OPERATORS[operator]if opfunc in is null is not null return opfunc arg 1 if arg 2 is None message ' Tocompareavalueto NULL usetheunaryis null/is not nulloperators 'raise Operator Creation Error message if arg 2 is NO ARGUMENT msg 'expectedanargumentforthisoperatorbutnonewasgiven'raise Operator Creation Error msg return opfunc arg 1 arg 2
def reinit global initialized loaded packages initialized Falsedel loaded packages[ ]REGISTERED TYPES clear init
def assign regions resource for i in range 0 randint 0 5 random index randint 0 Region objects all count - 1 region Region objects all [random index]resource regions add region
def assign regions resource for i in range 0 randint 0 5 random index randint 0 Region objects all count - 1 region Region objects all [random index]resource regions add region
@profiler tracedef policy create request **kwargs body {'firewall policy' kwargs}policy neutronclient request create firewall policy body get 'firewall policy' return Policy policy
@receiver score reset def submissions score reset handler sender **kwargs course id kwargs['course id']usage id kwargs['item id']user user by anonymous id kwargs['anonymous user id'] if user is None return PROBLEM WEIGHTED SCORE CHANGED send sender None weighted earned 0 weighted possible 0 user id user id anonymous user id kwargs['anonymous user id'] course id course id usage id usage id modified kwargs['created at'] score db table Score Database Table Enum submissions
@receiver score reset def submissions score reset handler sender **kwargs course id kwargs['course id']usage id kwargs['item id']user user by anonymous id kwargs['anonymous user id'] if user is None return PROBLEM WEIGHTED SCORE CHANGED send sender None weighted earned 0 weighted possible 0 user id user id anonymous user id kwargs['anonymous user id'] course id course id usage id usage id modified kwargs['created at'] score db table Score Database Table Enum submissions
@contextlib contextmanagerdef indent log num 2 log state indentation + numtry yield finally log state indentation - num
@contextlib contextmanagerdef indent log num 2 log state indentation + numtry yield finally log state indentation - num
@contextlib contextmanagerdef indent log num 2 log state indentation + numtry yield finally log state indentation - num
def list datasets project None bigquery client bigquery Client project project for dataset in bigquery client list datasets print dataset name
@task base Persist On Failure Task default retry delay 30 routing key settings RECALCULATE GRADES ROUTING KEY def recalculate subsection grade v2 **kwargs recalculate subsection grade recalculate subsection grade v2 **kwargs
def setup platform hass config add devices discovery info None name config get CONF NAME api key config get CONF API KEY base config get CONF BASE quote config get CONF QUOTE parameters {'base' base 'app id' api key}rest Openexchangerates Data RESOURCE parameters quote response requests get RESOURCE params parameters timeout 10 if response status code 200 LOGGER error ' Checkyour Open Exchange Rates AP Ikey' return Falserest update add devices [ Openexchangerates Sensor rest name quote ]
@utils arg 'server' metavar '<server>' help ' Nameor I Dofserver ' @utils arg 'name' metavar '<name>' help ' Nameofthebackupimage ' @utils arg 'backup type' metavar '<backup-type>' help ' Thebackuptype like"daily"or"weekly" ' @utils arg 'rotation' metavar '<rotation>' help ' Intparameterrepresentinghowmanybackupstokeeparound ' def do backup cs args find server cs args server backup args name args backup type args rotation
def submit jobs filenames verbose False if not which 'qsub' raise Application Not Found Error "qsubnotfound Can'tsubmitjobs " for file in filenames command 'qsub%s' % file result Popen command shell True universal newlines True stdout PIPE stderr STDOUT stdout read if verbose print result
@register tagdef highlight parser token bits token split contents tag name bits[ 0 ]if not len bits % 2 0 raise template Template Syntax Error u"'%s'tagrequiresvalidpairingsarguments " % tag name text block bits[ 1 ]if len bits < 4 raise template Template Syntax Error u"'%s'tagrequiresanobjectandaqueryprovidedby'with' " % tag name if bits[ 2 ] u'with' raise template Template Syntax Error u"'%s'tag'ssecondargumentshouldbe'with' " % tag name query bits[ 3 ]arg bits iter bits[ 4 ] kwargs {}for bit in arg bits if bit u'css class' kwargs[u'css class'] six next arg bits if bit u'html tag' kwargs[u'html tag'] six next arg bits if bit u'max length' kwargs[u'max length'] six next arg bits return Highlight Node text block query **kwargs
def nodejs installator registry xml parent data npm node XML Sub Element xml parent 'jenkins plugins nodejs tools Npm Packages Build Wrapper' try XML Sub Element npm node 'node JS Installation Name' text data['name']except Key Error as e raise Missing Attribute Error e args[ 0 ]
def nodejs installator registry xml parent data npm node XML Sub Element xml parent 'jenkins plugins nodejs tools Npm Packages Build Wrapper' try XML Sub Element npm node 'node JS Installation Name' text data['name']except Key Error as e raise Missing Attribute Error e args[ 0 ]
@register tag name 'include raw' def do include raw parser token bits token split contents if len bits 2 raise template Template Syntax Error '%rtagtakesoneargument thenameofthetemplatetobeincluded' % bits[ 0 ] template name bits[ 1 ]if template name[ 0 ] in '"' "'" and template name[ -1 ] template name[ 0 ] template name template name[ 1 -1 ] source get template source template name return template base Text Node source
def hipchat registry xml parent data hipchat XML Sub Element xml parent 'jenkins plugins hipchat Hip Chat Notifier' XML Sub Element hipchat 'token' text str data get 'token' '' if 'rooms' in data XML Sub Element hipchat 'room' text str ' ' join data['rooms'] mapping [ 'notify-start' 'start Notification' False 'notify-success' 'notify Success' False 'notify-aborted' 'notify Aborted' False 'notify-not-built' 'notify Not Built' False 'notify-unstable' 'notify Unstable' False 'notify-failure' 'notify Failure' False 'notify-back-to-normal' 'notify Back To Normal' False ]helpers convert mapping to xml hipchat data mapping fail required True if 'start-message' in data XML Sub Element hipchat 'start Job Message' text str data['start-message'] if 'complete-message' in data XML Sub Element hipchat 'complete Job Message' text str data['complete-message']
def hipchat registry xml parent data hipchat XML Sub Element xml parent 'jenkins plugins hipchat Hip Chat Notifier' XML Sub Element hipchat 'token' text str data get 'token' '' if 'rooms' in data XML Sub Element hipchat 'room' text str ' ' join data['rooms'] mapping [ 'notify-start' 'start Notification' False 'notify-success' 'notify Success' False 'notify-aborted' 'notify Aborted' False 'notify-not-built' 'notify Not Built' False 'notify-unstable' 'notify Unstable' False 'notify-failure' 'notify Failure' False 'notify-back-to-normal' 'notify Back To Normal' False ]helpers convert mapping to xml hipchat data mapping fail required True if 'start-message' in data XML Sub Element hipchat 'start Job Message' text str data['start-message'] if 'complete-message' in data XML Sub Element hipchat 'complete Job Message' text str data['complete-message']
def log mask zero a a np asarray a with np errstate divide 'ignore' a log np log a a log[ a < 0 ] 0 0return a log
def log mask zero a a np asarray a with np errstate divide 'ignore' a log np log a a log[ a < 0 ] 0 0return a log
def log mask zero a a np asarray a with np errstate divide 'ignore' a log np log a a log[ a < 0 ] 0 0return a log
def test table deletion deleted set class Test Table table Table def del self deleted add id self t Test Table {'a' [1 2 3]} the id id t assert t['a'] parent table is t del tgc collect assert the id in deleted
def test stackedblocks without params sb Stacked Blocks [ Block Block ] assert sb params is None
def Dump GC ob A Ds Get Object 'GC ' IID IA Ds Container for sub ob in ob print 'G Cob %s %s ' % sub ob Name sub ob A Ds Path
def restore version if ORIGINAL VERSION LINE is None returnwith open u'xonsh/ init py' u'r' as f raw f read lines raw splitlines lines[ 0 ] ORIGINAL VERSION LIN Eupd u'\n' join lines + u'\n' with open u'xonsh/ init py' u'w' as f f write upd
def jaccard u v u validate vector u v validate vector v dist np double np bitwise and u v np bitwise or u 0 v 0 sum / np double np bitwise or u 0 v 0 sum return dist
def betmap G normalized weight sources tuple return nx betweenness centrality source *G normalized weight sources tuple
def name to uid name try uid int name except Value Error try pwdrec pwd getpwnam name except Key Error raise Value Error ' Invalidusername%s' % name uid pwdrec[ 2 ]else try pwd getpwuid uid except Key Error raise Value Error ' Invaliduserid%s' % name return uid
def name to uid name try uid int name except Value Error try pwdrec pwd getpwnam name except Key Error raise Value Error ' Invalidusername%s' % name uid pwdrec[ 2 ]else try pwd getpwuid uid except Key Error raise Value Error ' Invaliduserid%s' % name return uid
def generate items for subtask item querysets item fields total num items items per task total num subtasks course id num items queued 0all item fields list item fields all item fields append 'pk' num subtasks 0items for task []with track memory usage 'course email subtask generation memory' course id for queryset in item querysets for item in queryset values *all item fields iterator if len items for task items per task and num subtasks < total num subtasks - 1 yield items for task num items queued + items per taskitems for task []num subtasks + 1items for task append item if items for task yield items for task num items queued + len items for task if num items queued total num items TASK LOG info ' Numberofitemsgeneratedbychunking%snotequaltooriginaltotal%s' num items queued total num items
def routestopped config routestopped if routestopped is None routestopped []lines [ROUTESTOPPED HEADER]for entry in routestopped entry setdefault 'interface' 'eth 0 ' entry setdefault 'host' '0 0 0 0/ 0 ' entry setdefault 'options' '-' entry setdefault 'proto' '-' entry setdefault 'dest port' '-' entry setdefault 'source port' '-' if isinstance entry['host'] list entry['host'] ' ' join entry['host'] if isinstance entry['options'] list entry['options'] ' ' join entry['options'] lines append ROUTESTOPPED FORMAT % entry file '/etc/shorewall/routestopped' contents '' join lines use sudo True
def routestopped config routestopped if routestopped is None routestopped []lines [ROUTESTOPPED HEADER]for entry in routestopped entry setdefault 'interface' 'eth 0 ' entry setdefault 'host' '0 0 0 0/ 0 ' entry setdefault 'options' '-' entry setdefault 'proto' '-' entry setdefault 'dest port' '-' entry setdefault 'source port' '-' if isinstance entry['host'] list entry['host'] ' ' join entry['host'] if isinstance entry['options'] list entry['options'] ' ' join entry['options'] lines append ROUTESTOPPED FORMAT % entry file '/etc/shorewall/routestopped' contents '' join lines use sudo True
def get namespace name os environ get ENV CURRENT NAMESPACE None if name is None name config default namespace for request if name is not None set namespace name if name is None name ''return name
@receiver Signal Handler course published def course published handler sender course key **kwargs if not isinstance course key CCX Locator send ccx course published delay unicode course key
def check for date filename matcher x 0if matcher for expression in matcher regex re compile expression match 1 regex search filename x + 1if match 1 return match 1 x return None 0
@with setup step runner environ def test steps that match groups and named groups takes just named as params @step ' he she getsa ?P<what>\\w+ ' def given action named step what assert equals what 'caipirinha' f Feature from string FEATURE 6 feature result f run scenario result feature result scenario results[ 0 ]assert equals len scenario result steps passed 1 assert equals scenario result total steps 1
@with setup step runner environ def test steps that match groups and named groups takes just named as params @step ' he she getsa ?P<what>\\w+ ' def given action named step what assert equals what 'caipirinha' f Feature from string FEATURE 6 feature result f run scenario result feature result scenario results[ 0 ]assert equals len scenario result steps passed 1 assert equals scenario result total steps 1
def pretty expr **settings pp Pretty Printer settings use unicode pp settings['use unicode']uflag pretty use unicode use unicode try return pp doprint expr finally pretty use unicode uflag
def libvlc media player get time p mi f Cfunctions get 'libvlc media player get time' None or Cfunction 'libvlc media player get time' 1 None ctypes c longlong Media Player return f p mi
def frt 2 a if a ndim 2 or a shape[ 0 ] a shape[ 1 ] raise Value Error ' Inputmustbeasquare 2- Darray' ai a copy n ai shape[ 0 ]f np empty n + 1 n np uint 32 f[ 0 ] ai sum axis 0 for m in range 1 n for row in range 1 n ai[row] roll ai[row] - row f[m] ai sum axis 0 f[n] ai sum axis 1 return f
def psrdp cmd rdp '$RDP Get- Wmi Object- Class Win 32 Terminal Service Setting- Namespaceroot\\CIMV 2 \\ Terminal Services- Computer - Authentication 6 - Error Action Stop'return salt ['cmd run'] '{ 0 } {1 }' format rdp cmd shell 'powershell' python shell True
def psrdp cmd rdp '$RDP Get- Wmi Object- Class Win 32 Terminal Service Setting- Namespaceroot\\CIMV 2 \\ Terminal Services- Computer - Authentication 6 - Error Action Stop'return salt ['cmd run'] '{ 0 } {1 }' format rdp cmd shell 'powershell' python shell True
def update job name config if 'name' not in config config['name'] namedata json dumps config try response salt utils http query '{ 0 }/scheduler/iso 8601 ' format base url method 'POST' data data header dict {' Content- Type' 'application/json'} log debug 'updateresponse %s' response return {'success' True}except Exception as ex log error 'unabletoupdatechronosjob %s' get error message ex return {'exception' {'message' get error message ex }}
def test flattener layer state separation for conv conv 1 Conv Elemwise 8 [2 2] 'sf 1 ' Sigmoid Conv Nonlinearity 0 1 conv 2 Conv Elemwise 8 [2 2] 'sf 2 ' Sigmoid Conv Nonlinearity 0 1 mlp MLP layers [ Flattener Layer Composite Layer 'comp' [conv 1 conv 2 ] ] input space Conv 2 D Space shape [5 5] num channels 2 topo view np random rand 10 5 5 2 astype theano config float X y np random rand 10 256 astype theano config float X dataset Dense Design Matrix topo view topo view y y train Train dataset mlp SGD 0 1 batch size 5 monitoring dataset dataset train algorithm termination criterion Epoch Counter 1 train main loop
def test flattener layer state separation for conv conv 1 Conv Elemwise 8 [2 2] 'sf 1 ' Sigmoid Conv Nonlinearity 0 1 conv 2 Conv Elemwise 8 [2 2] 'sf 2 ' Sigmoid Conv Nonlinearity 0 1 mlp MLP layers [ Flattener Layer Composite Layer 'comp' [conv 1 conv 2 ] ] input space Conv 2 D Space shape [5 5] num channels 2 topo view np random rand 10 5 5 2 astype theano config float X y np random rand 10 256 astype theano config float X dataset Dense Design Matrix topo view topo view y y train Train dataset mlp SGD 0 1 batch size 5 monitoring dataset dataset train algorithm termination criterion Epoch Counter 1 train main loop
def test flattener layer state separation for conv conv 1 Conv Elemwise 8 [2 2] 'sf 1 ' Sigmoid Conv Nonlinearity 0 1 conv 2 Conv Elemwise 8 [2 2] 'sf 2 ' Sigmoid Conv Nonlinearity 0 1 mlp MLP layers [ Flattener Layer Composite Layer 'comp' [conv 1 conv 2 ] ] input space Conv 2 D Space shape [5 5] num channels 2 topo view np random rand 10 5 5 2 astype theano config float X y np random rand 10 256 astype theano config float X dataset Dense Design Matrix topo view topo view y y train Train dataset mlp SGD 0 1 batch size 5 monitoring dataset dataset train algorithm termination criterion Epoch Counter 1 train main loop
def module load tests loader found tests pattern result testresources Optimising Test Suite found tests testscenarios load tests apply scenarios loader found tests pattern result add Test found tests return result
def inflate denoiser output centroid seqs singleton seqs denoiser map raw seqs id lookup parse denoiser mapping denoiser map flowgram to seq id lookup flowgram id to seq id map raw seqs for id seq in centroid seqs id cluster size str id split ' ' cluster member ids id lookup[id]for c in cluster member ids yield flowgram to seq id lookup[c] seq for id seq in singleton seqs yield flowgram to seq id lookup[id ] seq return
def inflate denoiser output centroid seqs singleton seqs denoiser map raw seqs id lookup parse denoiser mapping denoiser map flowgram to seq id lookup flowgram id to seq id map raw seqs for id seq in centroid seqs id cluster size str id split ' ' cluster member ids id lookup[id]for c in cluster member ids yield flowgram to seq id lookup[c] seq for id seq in singleton seqs yield flowgram to seq id lookup[id ] seq return
def test uniform P l Symbol 'l' real True finite True w Symbol 'w' positive True finite True X Uniform 'x' l l + w assert P X < l 0 and P X > l + w 0
def test uniform P l Symbol 'l' real True finite True w Symbol 'w' positive True finite True X Uniform 'x' l l + w assert P X < l 0 and P X > l + w 0
def remove temp dir ignore errors False shutil rmtree get temp dir ignore errors ignore errors
def write w filename vertices data assert len vertices len data fid open filename 'wb' fid write np zeros 2 dtype np uint 8 tostring vertices n len vertices write 3 fid vertices n for i in range vertices n write 3 fid vertices[i] fid write np array float data[i] dtype '>f 4 ' tostring fid close
def stop workers worker sockets log fh None for i worker in enumerate worker sockets try worker send ' Servershuttingdownallclients' except error if log fh log fh write ' Worker%sseemstobedeadalready Checkforrunaways \n' % i worker close
def composed *decorators def final decorator f for d in decorators if not hasattr d ' code ' setattr d ' code ' Fakecode f d f return freturn final decorator
def composed *decorators def final decorator f for d in decorators if not hasattr d ' code ' setattr d ' code ' Fakecode f d f return freturn final decorator
def get pages app None pages {}frappe local flags in get all pages Truefolders frappe local flags web pages folders or u'www' u'templates/pages' if app apps [app]else apps frappe local flags web pages apps or frappe get installed apps for app in apps app path frappe get app path app for start in folders path os path join app path start pages update get pages from path path app app path frappe local flags in get all pages Falsereturn pages
@export as api@ Execution Context enforce phase EXECUTION PHASE BEFORE TRADING EXECUTION PHASE HANDLE BAR EXECUTION PHASE SCHEDULED def get order order id return get simu exchange get order order id
@export as api@ Execution Context enforce phase EXECUTION PHASE BEFORE TRADING EXECUTION PHASE HANDLE BAR EXECUTION PHASE SCHEDULED def get order order id return get simu exchange get order order id
def main all command handlers []parser argparse Argument Parser description ' Helpertooltointeractwith Spinnakerdeploymentmetrics ' add global args parser subparsers parser add subparsers title 'commands' dest 'command' server handlers add handlers all command handlers subparsers spectator handlers add handlers all command handlers subparsers stackdriver handlers add handlers all command handlers subparsers datadog handlers add handlers all command handlers subparsers opts parser parse args options vars opts init logging options command processor process command options['command'] options all command handlers
def make middleware app global conf None warning level None if warning level warning level int warning level return HTTP Exception Handler app warning level warning level
def test get mutable mark dirty class Mutable Tester X Block ' Testclasswithmutablefields 'list field List default [] mutable test Mutable Tester Test Runtime services {'field-data' Dict Field Data {} } scope ids Mock spec Scope Ids assert equals len mutable test dirty fields 0 test get mutable test list fieldassert equals len mutable test dirty fields 1 mutable test list field []assert equals len mutable test dirty fields 1 mutable test save assert equals len mutable test dirty fields 1 test get mutable test list fieldassert equals len mutable test dirty fields 1
def test get mutable mark dirty class Mutable Tester X Block ' Testclasswithmutablefields 'list field List default [] mutable test Mutable Tester Test Runtime services {'field-data' Dict Field Data {} } scope ids Mock spec Scope Ids assert equals len mutable test dirty fields 0 test get mutable test list fieldassert equals len mutable test dirty fields 1 mutable test list field []assert equals len mutable test dirty fields 1 mutable test save assert equals len mutable test dirty fields 1 test get mutable test list fieldassert equals len mutable test dirty fields 1
def read possible plural rules plurals {}try import gluon contrib plural rules as packagefor importer modname ispkg in pkgutil iter modules package path if len modname 2 module import package name + ' ' + modname fromlist [modname] lang modnamepname modname + ' py' nplurals getattr module 'nplurals' DEFAULT NPLURALS get plural id getattr module 'get plural id' DEFAULT GET PLURAL ID construct plural form getattr module 'construct plural form' DEFAULT CONSTRUCT PLURAL FORM plurals[lang] lang nplurals get plural id construct plural form except Import Error e sys exc info [1 ]logging warn ' Unabletoimportpluralrules %s' % e return plurals
def read possible plural rules plurals {}try import gluon contrib plural rules as packagefor importer modname ispkg in pkgutil iter modules package path if len modname 2 module import package name + ' ' + modname fromlist [modname] lang modnamepname modname + ' py' nplurals getattr module 'nplurals' DEFAULT NPLURALS get plural id getattr module 'get plural id' DEFAULT GET PLURAL ID construct plural form getattr module 'construct plural form' DEFAULT CONSTRUCT PLURAL FORM plurals[lang] lang nplurals get plural id construct plural form except Import Error e sys exc info [1 ]logging warn ' Unabletoimportpluralrules %s' % e return plurals
def model save self commit True if self errors raise Value Error " The%scouldnotbecreatedbecausethedatadidn'tvalidate " % self model meta object name return save instance self self model commit
def device memory size devmem sz getattr devmem ' cuda memsize ' None if sz is None s e device extents devmem sz e - s devmem cuda memsize szassert sz > 0 'zerolengtharray'return sz
def define total name description manager counters counter Total Counter name description manager register counter return counter
def define total name description manager counters counter Total Counter name description manager register counter return counter
def get model instance return type instance
def get model instance return type instance
def get connection fail silently False return get connection backend get mail backend host options get 'mail host' port options get 'mail port' username options get 'mail username' password options get 'mail password' use tls options get 'mail use-tls' fail silently fail silently
def get connection fail silently False return get connection backend get mail backend host options get 'mail host' port options get 'mail port' username options get 'mail username' password options get 'mail password' use tls options get 'mail use-tls' fail silently fail silently
def convert ipv 4 to ipv 6 ipv 4 converted ip ' ffff 'split ipaddress ipv 4 split ' ' try socket inet aton ipv 4 except socket error raise Value Error 'ipv 4 tobeconvertedisinvalid' if len split ipaddress 4 raise Value Error 'ipv 4 addressisnotindottedquadformat' for index string in enumerate split ipaddress if index 1 test str hex int string split 'x' [1 ] if len test 1 final '0 'final + testtest finalelse test str hex int string split 'x' [1 ] if len test 1 final '0 'final + test + ' ' test finalelse test + ' 'converted ip + testreturn converted ip
def st Spectral Flux X Xprev sum X numpy sum X + eps sum Prev X numpy sum Xprev + eps F numpy sum X / sum X - Xprev / sum Prev X ** 2 return F
@depends HAS HDPARM def hpa disks size None hpa data {}for disk data in hdparms disks 'N' items visible total status data values [0 ]if visible total or 'disabled' in status hpa data[disk] {'total' total}else hpa data[disk] {'total' total 'visible' visible 'hidden' total - visible }if size is None return hpa datafor disk data in hpa data items try size data['total'] - int size except if '%' in size size int size strip '%' size 100 - size * data['total'] size / 100 if size < 0 size data['total'] hdparm '--yes-i-know-what-i-am-doing- Np{ 0 }{ 1 }' format size disk
@depends HAS HDPARM def hpa disks size None hpa data {}for disk data in hdparms disks 'N' items visible total status data values [0 ]if visible total or 'disabled' in status hpa data[disk] {'total' total}else hpa data[disk] {'total' total 'visible' visible 'hidden' total - visible }if size is None return hpa datafor disk data in hpa data items try size data['total'] - int size except if '%' in size size int size strip '%' size 100 - size * data['total'] size / 100 if size < 0 size data['total'] hdparm '--yes-i-know-what-i-am-doing- Np{ 0 }{ 1 }' format size disk
def is from logout request return getattr request 'is from logout' False
def get computer name name win 32 api Get Computer Name Ex win 32 con Computer Name Physical Dns Hostname return name if name else False
def get flim flim fscale freq sfreq None if flim is None if freq is None flim [ 0 1 if fscale 'log' else 0 0 sfreq / 2 0 ]else if fscale 'linear' flim [freq[ 0 ]]else flim [ freq[ 0 ] if freq[ 0 ] > 0 else 0 1 * freq[ 1 ] ]flim + [freq[ -1 ]]if fscale 'log' if flim[ 0 ] < 0 raise Value Error 'flim[ 0 ]mustbepositive got%s' % flim[ 0 ] elif flim[ 0 ] < 0 raise Value Error 'flim[ 0 ]mustbenon-negative got%s' % flim[ 0 ] return flim
def sortfunc x obj y obj return cmp y obj[ 1 ] x obj[ 1 ]
@requires duration@apply to mask@apply to audiodef loop self n None duration None result self fl time lambda t t % self duration if n duration n * self duration if duration result result set duration duration return result
def gzipped f @functools wraps f def view func *args **kwargs @after this requestdef zipper response accept encoding request headers get ' Accept- Encoding' '' if 'gzip' not in accept encoding lower return responseresponse direct passthrough Falseif response status code < 200 or response status code > 300 or ' Content- Encoding' in response headers return responsegzip buffer IO gzip file gzip Gzip File mode 'wb' fileobj gzip buffer gzip file write response data gzip file close response data gzip buffer getvalue response headers[' Content- Encoding'] 'gzip'response headers[' Vary'] ' Accept- Encoding'response headers[' Content- Length'] len response data return responsereturn f *args **kwargs return view func
def clear context context for var in x for x in context if x startswith 'chocolatey ' context pop var
def is true value None try value int value except Value Error Type Error passtry value float value except Value Error Type Error passif isinstance value int float return value > 0 elif isinstance value six string types return str value lower 'true' else return bool value
def plot connectivity circle onpick event fig None axes None indices None n nodes 0 node angles None ylim [9 10 ] if event inaxes axes returnif event button 1 if not ylim[ 0 ] < event ydata < ylim[ 1 ] returnnode angles node angles % np pi * 2 node np argmin np abs event xdata - node angles patches event inaxes patchesfor ii x y in enumerate zip indices[ 0 ] indices[ 1 ] patches[ii] set visible node in [x y] fig canvas draw elif event button 3 patches event inaxes patchesfor ii in range np size indices axis 1 patches[ii] set visible True fig canvas draw
def show in pager self data start screen lines raise Try Next
def central server test f return x server test f settings CENTRAL SERVER ' Centralservertest'
def get Minimum From Vec 3 List vec 3 List minimum complex 999999999 0 999999999 0 for point in vec 3 List minimum get Minimum minimum point drop Axis 2 return minimum
def get subproject base subproject entrypoint get installed entrypoint subproject return entrypoint module name split ' ' [0 ]
def human size sz if not sz return Falseunits 'bytes' ' Kb' ' Mb' ' Gb' if isinstance sz basestring sz len sz s i float sz 0 while s > 1024 and i < len units - 1 s / 1024 i + 1return '% 0 2f%s' % s units[i]
def what file h None if h is None if isinstance file basestring with lopen file u'rb' as f h f read HSIZE else location file tell h file read HSIZE file seek location if isinstance h bytes h memoryview h for tf in tests res tf h if res return resif h[ 2] '\xff\xd 8 ' return u'jpeg'return None
def get Translate Tetragrid By Translation translation return [[ 1 0 0 0 0 0 translation x] [0 0 1 0 0 0 translation y] [0 0 0 0 1 0 translation z] [0 0 0 0 0 0 1 0]]
def normparse text return normexpr functemplate parse text
def get service hass config discovery info None if not AUTH TOKENS load token hass config path SESSION FILE return Matrix Notification Service config get CONF HOMESERVER config get CONF DEFAULT ROOM config get CONF VERIFY SSL config get CONF USERNAME config get CONF PASSWORD
def l1 id vdata gtable db gis locationquery gtable parent id & gtable level 'L 1 ' & gtable end date None aitable db vulnerability aggregated indicatoratable db vulnerability aggregaterquery aitable name ' Resilience' & atable parameter id aitable parameter id & atable agg type 4 rows db query select gtable id gtable name for row in rows query rquery & atable location id row id row db query select atable median orderby ~ atable date first resilience 0if row and row median is not None resilience int round row median 0 vdata[row id] dict r resilience n row name l 1 f id return
def urljoin base url if url startswith 'http //' or url startswith 'https //' return urljoin base url new base base if base endswith '/' else base + '/' new url url[ 1 ] if url startswith '/' else url return new base + new url
def validate base 64 value try base 64 b64 decode value split [1 ] except Exception as e raise Validation Error e
def asynchronous function arg names inspect getargspec function args Message Data collections namedtuple function name arg names[ 1 ] @functools wraps function def call or send processor *args **kwargs if len args 1 and not kwargs and isinstance args[ 0 ] Message Data try return function processor **args[ 0 ] asdict except Exception as exc LOG exception '[%s] Exceptionin"%s" %s' processor name function name exc raiseelse data inspect getcallargs function processor *args **kwargs data pop arg names[ 0 ] return processor queue send function name Message Data **data call or send Message Data Message Datareturn call or send
def asynchronous function arg names inspect getargspec function args Message Data collections namedtuple function name arg names[ 1 ] @functools wraps function def call or send processor *args **kwargs if len args 1 and not kwargs and isinstance args[ 0 ] Message Data try return function processor **args[ 0 ] asdict except Exception as exc LOG exception '[%s] Exceptionin"%s" %s' processor name function name exc raiseelse data inspect getcallargs function processor *args **kwargs data pop arg names[ 0 ] return processor queue send function name Message Data **data call or send Message Data Message Datareturn call or send
def log info infomsg try infomsg str infomsg except Exception as e infomsg str e for line in infomsg splitlines log msg '[ ]%s' % line
def main utils change cwd for elem in lint for f in glob glob elem remove f for root dirs files in os walk os getcwd path os path basename root if any [fnmatch fnmatch path e for e in recursive lint] remove root
def main utils change cwd for elem in lint for f in glob glob elem remove f for root dirs files in os walk os getcwd path os path basename root if any [fnmatch fnmatch path e for e in recursive lint] remove root
def get console request console type instance if console type 'AUTO' check consoles CONSOLE Selse try check consoles {console type CONSOLES[console type]}except Key Error msg ' Consoletype"%s"notsupported ' % console type raise exceptions Not Available msg try httpnotimplemented nova exception Http Not Implementedexcept Attribute Error httpnotimplemented nova exception HTTP Not Implementedfor con type api call in check consoles items try console api call request instance id except httpnotimplemented continueexcept Exception LOG debug ' Consolenotavailable' exc info True continueif con type 'SERIAL' console url console urlelse console url '%s&%s %s ' % console url urlencode {'title' getattr instance 'name' '' } instance id return con type console url raise exceptions Not Available ' Noavailableconsolefound '
def find diff file 1 file 2 DEBUG Trueproc subprocess Popen [DIFF file 1 file 2 ] stdout subprocess PIPE stderr subprocess PIPE diff output std err proc communicate if DEBUG print '>>> Configdifferences 'print diff outputreturn diff output
@not implemented for 'directed' @not implemented for 'multigraph' def jaccard coefficient G ebunch None def predict u v union size len set G[u] set G[v] if union size 0 return 0return len list nx common neighbors G u v / union size return apply prediction G predict ebunch
def get series model extra field None source None **filters extra if extra field is None else extra field qs model search order by '-date' filter **filters values dict 'date' 'count' *extra if source qs qs source source for val in qs[ 365 ] date parse val['date'][ 0 ] date rv dict count val['count'][ 0 ] date date end date if source rv['data'] extract val[source] elif extra field rv['data'] extract val[extra field] yield rv
def get run marketing url course key user course run get course run course key user return course run get 'marketing url'
def get run marketing url course key user course run get course run course key user return course run get 'marketing url'
def sigma est dwt detail coeffs distribution ' Gaussian' detail coeffs detail coeffs[np nonzero detail coeffs ]if distribution lower 'gaussian' denom scipy stats norm ppf 0 75 sigma np median np abs detail coeffs / denom else raise Value Error ' Only Gaussiannoiseestimationiscurrentlysupported' return sigma
def insdc location string location rec length try parts location partsif location strand -1 return 'complement %s %s ' % location operator ' ' join insdc location string ignoring strand and subfeatures p rec length for p in parts[ -1 ] else return '%s %s ' % location operator ' ' join insdc location string p rec length for p in parts except Attribute Error loc insdc location string ignoring strand and subfeatures location rec length if location strand -1 return 'complement %s ' % loc else return loc
def get Lens filename lens []fa instance screed open filename for record in fa instance lens append len record['sequence'] return sorted lens
def common log environ response response time None logger logging get Logger logger set Level logging INFO if response time formatter Apache Formatter with response time True try log entry formatter response status code environ len response content rt us response time except Type Error log entry formatter response status code environ len response content rt ms response time else formatter Apache Formatter with response time False log entry formatter response status code environ len response content logger info log entry return log entry
def gen Half And Half pset min max type None method random choice gen Grow gen Full return method pset min max type
def add block ids payload if 'data' in payload for ele in payload['data'] if 'module id' in ele ele['block id'] Usage Key from string ele['module id'] block id
def load all stream return yaml load all stream Loader Astropy Loader
def write to version file filename versions os unlink filename contents json dumps versions sort keys True indent 1 separators ' ' ' ' with open filename 'w' as f f write SHORT VERSION PY % contents print "set%sto'%s'" % filename versions['version']
def require password change name return salt ['user update'] name expired True
def require password change name return salt ['user update'] name expired True
def require password change name return salt ['user update'] name expired True
def require password change name return salt ['user update'] name expired True
def promote operator size return lo Lin Op lo PROMOTE size [operator] None
def promote operator size return lo Lin Op lo PROMOTE size [operator] None
def get module module name try module path module class module name rsplit ' ' 1 base module import module path globals locals [module class] module getattr base module module class except Import Error Attribute Error Value Error as e raise EA Exception ' Couldnotimportmodule%s %s' % module name e return module
def cached dfs serialize input object if input object is None return Noneinput type type input object if input type in BASIC JSON TYPES return input objectis pyrsistent Falseif input type in BASIC JSON COLLECTIONS obj input objectelse if is pyrsistent input object is pyrsistent Truecached value cached dfs serialize cache get input object UNCACHED SENTINEL if cached value is not UNCACHED SENTINEL return cached valueobj to serializables input object result objobj type type obj if obj type dict result dict cached dfs serialize key cached dfs serialize value for key value in obj iteritems elif obj type list or obj type tuple result list cached dfs serialize x for x in obj if is pyrsistent cached dfs serialize cache[input object] resultreturn result
@logic auth audit exemptdef send email notifications context data dict if not request environ get 'paste command request' check access 'send email notifications' context data dict if not converters asbool config get 'ckan activity streams email notifications' raise Validation Error 'ckan activity streams email notificationsisnotenabledinconfig' email notifications get and send notifications for all users
def volume list request search opts None c client cinderclient request if c client is None return []return c client volumes list search opts search opts
def volume list request search opts None c client cinderclient request if c client is None return []return c client volumes list search opts search opts
def package pkg name update False if not is installed pkg name install pkg name update
def stats r total sum r avg float total / float len r sdsq sum [ i - avg ** 2 for i in r] s sorted list r return dict list zip [u'med' u'avg' u'stddev' u'min' u'max'] s[ len s // 2 ] avg sdsq / len r ** 0 5 min r max r
def poly map domain oldx domain window domain np array domain dtype np float 64 window np array window dtype np float 64 scl window[ 1 ] - window[ 0 ] / domain[ 1 ] - domain[ 0 ] off window[ 0 ] * domain[ 1 ] - window[ 1 ] * domain[ 0 ] / domain[ 1 ] - domain[ 0 ] return off + scl * oldx
def poly map domain oldx domain window domain np array domain dtype np float 64 window np array window dtype np float 64 scl window[ 1 ] - window[ 0 ] / domain[ 1 ] - domain[ 0 ] off window[ 0 ] * domain[ 1 ] - window[ 1 ] * domain[ 0 ] / domain[ 1 ] - domain[ 0 ] return off + scl * oldx
def dbref accessing obj accessed obj *args **kwargs if not args return Falsetry dbref int args[ 0 ] strip strip '#' except Value Error return Falseif hasattr accessing obj 'dbid' return dbref accessing obj dbid return False
def dbref accessing obj accessed obj *args **kwargs if not args return Falsetry dbref int args[ 0 ] strip strip '#' except Value Error return Falseif hasattr accessing obj 'dbid' return dbref accessing obj dbid return False
def octocat say None return gh octocat say
def get yaml entry yaml dict name entry yaml dict get name if entry is None return Noneif isinstance entry basestring return [entry]return entry
def get yaml entry yaml dict name entry yaml dict get name if entry is None return Noneif isinstance entry basestring return [entry]return entry
def allowed flags args flags flags set flags for arg in args keys try if Options options [arg] is Flag and not arg in flags raise Flag Error "'%s'flagisnotallowedinthiscontext" % arg except Key Error raise Option Error "'%s'isnotavalidoption" % arg
def allowed flags args flags flags set flags for arg in args keys try if Options options [arg] is Flag and not arg in flags raise Flag Error "'%s'flagisnotallowedinthiscontext" % arg except Key Error raise Option Error "'%s'isnotavalidoption" % arg
def allowed flags args flags flags set flags for arg in args keys try if Options options [arg] is Flag and not arg in flags raise Flag Error "'%s'flagisnotallowedinthiscontext" % arg except Key Error raise Option Error "'%s'isnotavalidoption" % arg
def dhtm mag sig np zeros len mag midpt len mag // 2 sig[ 1 midpt] 1sig[ midpt + 1 ] -1 recon ifft mag * np exp fft sig * ifft np log mag realreturn recon
def render message to string subject template message template param dict language None language language or settings LANGUAGE CODE with override language language return get subject and message subject template message template param dict
def render message to string subject template message template param dict language None language language or settings LANGUAGE CODE with override language language return get subject and message subject template message template param dict
def handler req Handler req run gluon main wsgibase return apache OK
def get dynamodb type val use boolean True dynamodb type Noneif val is None dynamodb type 'NULL'elif is num val if isinstance val bool and use boolean dynamodb type 'BOOL'else dynamodb type 'N'elif is str val dynamodb type 'S'elif isinstance val set frozenset if False not in map is num val dynamodb type 'NS'elif False not in map is str val dynamodb type 'SS'elif False not in map is binary val dynamodb type 'BS'elif is binary val dynamodb type 'B'elif isinstance val Mapping dynamodb type 'M'elif isinstance val list dynamodb type 'L'if dynamodb type is None msg ' Unsupportedtype"%s"forvalue"%s"' % type val val raise Type Error msg return dynamodb type
def get dynamodb type val use boolean True dynamodb type Noneif val is None dynamodb type 'NULL'elif is num val if isinstance val bool and use boolean dynamodb type 'BOOL'else dynamodb type 'N'elif is str val dynamodb type 'S'elif isinstance val set frozenset if False not in map is num val dynamodb type 'NS'elif False not in map is str val dynamodb type 'SS'elif False not in map is binary val dynamodb type 'BS'elif is binary val dynamodb type 'B'elif isinstance val Mapping dynamodb type 'M'elif isinstance val list dynamodb type 'L'if dynamodb type is None msg ' Unsupportedtype"%s"forvalue"%s"' % type val val raise Type Error msg return dynamodb type
def pofile pofile **kwargs return pofile or mofile pofile 'pofile' **kwargs
def isolate query ctes full text text before cursor if not full text return full text text before cursor tuple ctes remainder extract ctes full text if not ctes return full text text before cursor current position len text before cursor meta []for cte in ctes if cte start < current position < cte stop text before cursor full text[cte start current position]full text full text[cte start cte stop]return full text text before cursor meta cols Column Metadata name None for name in cte columns meta append Table Metadata cte name cols full text full text[ctes[ -1 ] stop ]text before cursor text before cursor[ctes[ -1 ] stop current position]return full text text before cursor tuple meta
def test smote wrong kind kind 'rnd'smote SMOTE kind kind random state RND SEED assert raises Value Error smote fit sample X Y
def ensure unicode text if isinstance text str return text decode pyreadline codepage 'replace' return text
def truncated f @functools wraps f def wrapper self hints *args **kwargs if not hasattr hints 'limit' raise exception Unexpected Error ' Cannottruncateadrivercallwithouthintslistasfirstparameterafterself' if hints limit is None or hints filters return f self hints *args **kwargs list limit hints limit['limit']hints set limit list limit + 1 ref list f self hints *args **kwargs if len ref list > list limit hints set limit list limit truncated True return ref list[ list limit]else hints set limit list limit return ref listreturn wrapper
def truncated f @functools wraps f def wrapper self hints *args **kwargs if not hasattr hints 'limit' raise exception Unexpected Error ' Cannottruncateadrivercallwithouthintslistasfirstparameterafterself' if hints limit is None or hints filters return f self hints *args **kwargs list limit hints limit['limit']hints set limit list limit + 1 ref list f self hints *args **kwargs if len ref list > list limit hints set limit list limit truncated True return ref list[ list limit]else hints set limit list limit return ref listreturn wrapper
def channel shift multi x intensity channel index 2 if is random factor np random uniform - intensity intensity else factor intensityresults []for data in x data np rollaxis data channel index 0 min x max x np min data np max data channel images [np clip x channel + factor min x max x for x channel in x]data np stack channel images axis 0 data np rollaxis x 0 channel index + 1 results append data return np asarray results
def convert host to ip host addrinfo socket getaddrinfo host 80 0 0 socket SOL TCP ips []for family socktype proto canonname sockaddr in addrinfo ip sockaddr[ 0 ]ips append family ip if family socket AF INET ips append socket AF INET 6 ' ffff ' + ip return ips
def force link src dest return utils system 'ln-sf%s%s' % src dest
@register filterdef localtime value return do timezone value timezone get current timezone
def show Warning text parent None help '' title ' Anki' return show Info text parent help 'warning' title title
def encode bits nt to bits None if nt to bits is None nt to bits DEFAULT GOLAY NT TO BIT Sbits numpy array bits reshape 12 1 res numpy dot DEFAULT G T bits codeword divmod res ravel 2 [1 ]return bits to seq codeword nt to bits
def get path temp dir None cache length 24 map vendor oids True ca path temp ca path temp dir if temp and cached path needs update ca path cache length empty set set with path lock if cached path needs update ca path cache length with open ca path u'wb' as f for cert trust oids reject oids in extract from system if trust oids empty set and reject oids empty set f write armor u'CERTIFICATE' cert else if map vendor oids trust oids map oids trust oids reject oids map oids reject oids f write armor u'TRUSTEDCERTIFICATE' Trusted Certificate [ Certificate load cert Certificate Aux {u'trust' trust oids u'reject' reject oids} ] dump if not ca path raise CA Certs Error u' No C Acertsfound' return ca path
def get path temp dir None cache length 24 map vendor oids True ca path temp ca path temp dir if temp and cached path needs update ca path cache length empty set set with path lock if cached path needs update ca path cache length with open ca path u'wb' as f for cert trust oids reject oids in extract from system if trust oids empty set and reject oids empty set f write armor u'CERTIFICATE' cert else if map vendor oids trust oids map oids trust oids reject oids map oids reject oids f write armor u'TRUSTEDCERTIFICATE' Trusted Certificate [ Certificate load cert Certificate Aux {u'trust' trust oids u'reject' reject oids} ] dump if not ca path raise CA Certs Error u' No C Acertsfound' return ca path
def alternating n for perm in variations list range n n p Permutation perm if p is even yield p
def data fun times global nn samp len times window np zeros n samp start stop [int ii * float n samp / 2 * n dipoles for ii in 2 * n 2 * n + 1 ]window[start stop] 1 0n + 1data 2 5e- 08 * np sin 2 0 * np pi * 10 0 * n * times data * windowreturn data
def Get Artifact Knowledge Base client obj allow uninitialized False client schema client obj Schemakb client obj Get client schema KNOWLEDGE BASE if not allow uninitialized if not kb raise artifact utils Knowledge Base Uninitialized Error ' Knowledge Baseemptyfor%s ' % client obj urn if not kb os raise artifact utils Knowledge Base Attributes Missing Error ' Knowledge Basemissing O Sfor%s Knowledgebasecontent %s' % client obj urn kb if not kb kb client schema KNOWLEDGE BASE Set Core GRR Knowledge Base Values kb client obj if kb os ' Windows' if not kb environ allusersappdata and kb environ allusersprofile if kb os major version > 6 kb environ allusersappdata u'c \\programdata'kb environ allusersprofile u'c \\programdata'else kb environ allusersappdata u'c \\documentsandsettings\\ All Users\\ Application Data'kb environ allusersprofile u'c \\documentsandsettings\\ All Users'return kb
def Get Artifact Knowledge Base client obj allow uninitialized False client schema client obj Schemakb client obj Get client schema KNOWLEDGE BASE if not allow uninitialized if not kb raise artifact utils Knowledge Base Uninitialized Error ' Knowledge Baseemptyfor%s ' % client obj urn if not kb os raise artifact utils Knowledge Base Attributes Missing Error ' Knowledge Basemissing O Sfor%s Knowledgebasecontent %s' % client obj urn kb if not kb kb client schema KNOWLEDGE BASE Set Core GRR Knowledge Base Values kb client obj if kb os ' Windows' if not kb environ allusersappdata and kb environ allusersprofile if kb os major version > 6 kb environ allusersappdata u'c \\programdata'kb environ allusersprofile u'c \\programdata'else kb environ allusersappdata u'c \\documentsandsettings\\ All Users\\ Application Data'kb environ allusersprofile u'c \\documentsandsettings\\ All Users'return kb
@pytest fixture def fake proc monkeypatch stubs p guiprocess GUI Process 'testprocess' monkeypatch setattr p ' proc' stubs fake qprocess return p
def read model metadata source if isinstance source compat string type parts compat urlparse source if parts scheme in '' 'file' and os path isdir parts path source parts pathreturn read model metadata bundle source elif len parts scheme 1 and os path isdir source return read model metadata bundle source else return json from url source else return json load source
def find tcl tk darwin frameworks binaries tcl root tk root Nonefor nm fnm in binaries if nm ' Tcl' tcl root os path join os path dirname fnm ' Resources/ Scripts' elif nm ' Tk' tk root os path join os path dirname fnm ' Resources/ Scripts' return tcl root tk root
def cx Simulated Binary ind 1 ind 2 eta for i x1 x2 in enumerate zip ind 1 ind 2 rand random random if rand < 0 5 beta 2 0 * rand else beta 1 0 / 2 0 * 1 0 - rand beta ** 1 0 / eta + 1 0 ind 1 [i] 0 5 * 1 + beta * x1 + 1 - beta * x2 ind 2 [i] 0 5 * 1 - beta * x1 + 1 + beta * x2 return ind 1 ind 2
def cx Simulated Binary ind 1 ind 2 eta for i x1 x2 in enumerate zip ind 1 ind 2 rand random random if rand < 0 5 beta 2 0 * rand else beta 1 0 / 2 0 * 1 0 - rand beta ** 1 0 / eta + 1 0 ind 1 [i] 0 5 * 1 + beta * x1 + 1 - beta * x2 ind 2 [i] 0 5 * 1 - beta * x1 + 1 + beta * x2 return ind 1 ind 2
def get group id name vpc id None vpc name None region None key None keyid None profile None conn get conn region region key key keyid keyid profile profile if name startswith 'sg-' log debug 'group{ 0 }isagroupid get group idnotcalled ' format name return namegroup get group conn conn name name vpc id vpc id vpc name vpc name region region key key keyid keyid profile profile return getattr group 'id' None
def normalise alias format string alias format display Nonerepresentation []if isinstance alias format six string types display alias formatrepresentation append alias format elif isinstance alias format dict display alias format get 'display' representation alias format get 'representation' or [] if isinstance representation six string types representation [representation]else raise Type Error "alias format'%s'isneitheradictionaryorstringtype " % repr alias format return display representation
@library global functiondef is watching discussion locale user locale return New Post In Locale Event is notifying user locale locale
def dump object header obj result header + '\n' for key in obj hash if key 'afe' or key 'hash' continueresult + '% 20 s %s\n' % key obj hash[key] return result
def create truefalse cond prompt 'yesorno[default no]?' path None def truefalse cond visitor node None ' Promptstheuserforatrue/falsecondition 'tf True False prompt prompt path path rtn visitor visit tf return rtnreturn truefalse cond
def test member completion super Console Send Keys 'output Redirect Start{ } True{ }{ENTER}' test Regex ''super Console Send Keys 'printc {TAB}{ENTER}' test Regex + ' Cdoc pretest 'super Console Send Keys 'try {ENTER}' super Console Send Keys 'printf {TAB}x{ENTER}' super Console Send Keys '{BACKSPACE}except {ENTER}' super Console Send Keys 'print"EXC"{ENTER}{ENTER}{ENTER}' test Regex + 'EXC'super Console Send Keys 'output Redirect Stop{ }{ }{ENTER}' verify Results get Test Output [0 ] test Regex
def error msg from exception e msg u''if hasattr e u'message' if type e message is dict msg e message get u'message' elif e message msg u'{}' format e message return msg or u'{}' format e
def walk js scopes scope lpath None if lpath is None lpath []for subscope in scope if subscope tag 'variable' and not subscope continuesublpath lpath + [subscope get 'name' ] yield subscope sublpath for r in walk js scopes subscope sublpath yield r
def ps cmd if not LINUX cmd cmd replace '--no-headers' '' if SUNOS cmd cmd replace '-ocommand' '-ocomm' cmd cmd replace '-ostart' '-ostime' p subprocess Popen cmd shell 1 stdout subprocess PIPE output p communicate [0 ] strip if PY 3 output str output sys stdout encoding if not LINUX output output split '\n' [1 ] strip try return int output except Value Error return output
def get logger path None format None name None global loggerif logger return loggerelse return create logger path format name
def Create Budget client budget service client Get Service ' Budget Service' version 'v 201609 ' budget {'name' ' Interplanetary Cruise App Budget#%s' % uuid uuid 4 'amount' {'micro Amount' '50000000 '} 'delivery Method' 'STANDARD' 'is Explicitly Shared' False}budget operations [{'operator' 'ADD' 'operand' budget}]budget id budget service mutate budget operations ['value'][ 0 ]['budget Id']return budget id
def Create Budget client budget service client Get Service ' Budget Service' version 'v 201609 ' budget {'name' ' Interplanetary Cruise App Budget#%s' % uuid uuid 4 'amount' {'micro Amount' '50000000 '} 'delivery Method' 'STANDARD' 'is Explicitly Shared' False}budget operations [{'operator' 'ADD' 'operand' budget}]budget id budget service mutate budget operations ['value'][ 0 ]['budget Id']return budget id
def get visible update course update items if isinstance course update items dict if course update items get 'status' Course Info Module STATUS DELETED return make update dict course update items else return {'error' ' Courseupdatenotfound ' 'status' 404 }return [ make update dict update for update in course update items if update get 'status' Course Info Module STATUS DELETED ]
@frappe whitelist def add tag tag dt dn color None Doc Tags dt add dn tag return tag
def fetch page base url page session return session get base url + '?page {}' format page json
@ File System in directory current directory 'django' 'alfaces' def test limit by app getting all apps by comma status out commands getstatusoutput 'pythonmanage pyharvest--verbosity 3--no-color--apps foobar donothing' assert equals status 0 out assert ' Testthedjangoapp DONOTHING' in out assert ' Testthedjangoapp FOOBAR' in out
def forgiving round value precision 0 try value round float value precision return int value if precision 0 else value except Value Error Type Error return value
def expire name cherrypy serving request config get 'tools sessions name' 'session id' one year 60 * 60 * 24 * 365 e time time - one year cherrypy serving response cookie[name]['expires'] httputil HTTP Date e
def libvlc media discoverer media list p mdis f Cfunctions get 'libvlc media discoverer media list' None or Cfunction 'libvlc media discoverer media list' 1 class result Media List ctypes c void p Media Discoverer return f p mdis
def newid length 16 l int math ceil float length * 6 0 / 8 0 return base 64 b64 encode os urandom l [ length] decode 'ascii'
def load mod persist False pre mods lsmod res salt ['cmd run all'] 'modprobe{ 0 }' format mod python shell False if res['retcode'] 0 post mods lsmod mods new mods pre mods post mods persist mods set if persist persist mods set persistent module mod return sorted list mods persist mods else return ' Errorloadingmodule{ 0 } {1 }' format mod res['stderr']
def load mod persist False pre mods lsmod res salt ['cmd run all'] 'modprobe{ 0 }' format mod python shell False if res['retcode'] 0 post mods lsmod mods new mods pre mods post mods persist mods set if persist persist mods set persistent module mod return sorted list mods persist mods else return ' Errorloadingmodule{ 0 } {1 }' format mod res['stderr']
def load mod persist False pre mods lsmod res salt ['cmd run all'] 'modprobe{ 0 }' format mod python shell False if res['retcode'] 0 post mods lsmod mods new mods pre mods post mods persist mods set if persist persist mods set persistent module mod return sorted list mods persist mods else return ' Errorloadingmodule{ 0 } {1 }' format mod res['stderr']
def set key value profile None conn salt utils memcached get conn profile time profile get 'expire' DEFAULT EXPIRATION return salt utils memcached set conn key value time time
def text of relpath thisdir os path dirname file file path os path join thisdir os path normpath relpath with open file path as f text f read return text
def delete api key api Key region None key None keyid None profile None try conn get conn region region key key keyid keyid profile profile conn delete api key api Key api Key return {'deleted' True}except Client Error as e return {'deleted' False 'error' salt utils boto 3 get error e }
def run discovery entry point cached False reg cache {}if cached reg cache cache registry cache registry Widget Registry discovery Widget Discovery registry cached descriptions reg cache discovery run if cached cache save registry cache reg cache return registry
def get current user try return User except User Not Found Error return None
def Expecting Function Args clean lines linenum line clean lines elided[linenum]return Match '^\\s*MOCK CONST ?METHOD\\d+ T ?\\ ' line or linenum > 2 and Match '^\\s*MOCK ? CONST ?METHOD\\d+ ? T ?\\ ? \\S+ ?\\s*$' clean lines elided[ linenum - 1 ] or Match '^\\s*MOCK ? CONST ?METHOD\\d+ ? T ?\\ \\s*$' clean lines elided[ linenum - 2 ] or Search '\\bstd m?function\\s*\\<\\s*$' clean lines elided[ linenum - 1 ]
def run module code code init globals None mod name None mod fname None mod loader None pkg name None with Temp Module mod name as temp module with Modified Argv 0 mod fname mod globals temp module module dict run code code mod globals init globals mod name mod fname mod loader pkg name return mod globals copy
def run module code code init globals None mod name None mod fname None mod loader None pkg name None with Temp Module mod name as temp module with Modified Argv 0 mod fname mod globals temp module module dict run code code mod globals init globals mod name mod fname mod loader pkg name return mod globals copy
def NO MERGE writer segments return segments
def NO MERGE writer segments return segments
def NO MERGE writer segments return segments
def arrange By Type service list preferred types def enumerate elts ' Returnaniterablethatpairstheindexofanelementwith\nthatelement \n\n For Python 2 2compatibility'return zip range len elts elts def best Matching Service service ' Returntheindexofthefirstmatchingtype orsomething\nhigherifnotypematches \n\n Thisprovidesanorderinginwhichserviceelementsthat\ncontainatypethatcomesearlierinthepreferredtypeslist\ncomebeforeserviceelementsthatcomelater Ifaservice\nelementhasmorethanonetype themostpreferredonewins \n'for i t in enumerate preferred types if preferred types[i] in service type uris return ireturn len preferred types prio services [ best Matching Service s orig index s for orig index s in enumerate service list ]prio services sort for i in range len prio services prio services[i] prio services[i][ 2 ]return prio services
def arrange By Type service list preferred types def enumerate elts ' Returnaniterablethatpairstheindexofanelementwith\nthatelement \n\n For Python 2 2compatibility'return zip range len elts elts def best Matching Service service ' Returntheindexofthefirstmatchingtype orsomething\nhigherifnotypematches \n\n Thisprovidesanorderinginwhichserviceelementsthat\ncontainatypethatcomesearlierinthepreferredtypeslist\ncomebeforeserviceelementsthatcomelater Ifaservice\nelementhasmorethanonetype themostpreferredonewins \n'for i t in enumerate preferred types if preferred types[i] in service type uris return ireturn len preferred types prio services [ best Matching Service s orig index s for orig index s in enumerate service list ]prio services sort for i in range len prio services prio services[i] prio services[i][ 2 ]return prio services
def arrange By Type service list preferred types def enumerate elts ' Returnaniterablethatpairstheindexofanelementwith\nthatelement \n\n For Python 2 2compatibility'return zip range len elts elts def best Matching Service service ' Returntheindexofthefirstmatchingtype orsomething\nhigherifnotypematches \n\n Thisprovidesanorderinginwhichserviceelementsthat\ncontainatypethatcomesearlierinthepreferredtypeslist\ncomebeforeserviceelementsthatcomelater Ifaservice\nelementhasmorethanonetype themostpreferredonewins \n'for i t in enumerate preferred types if preferred types[i] in service type uris return ireturn len preferred types prio services [ best Matching Service s orig index s for orig index s in enumerate service list ]prio services sort for i in range len prio services prio services[i] prio services[i][ 2 ]return prio services
def arrange By Type service list preferred types def enumerate elts ' Returnaniterablethatpairstheindexofanelementwith\nthatelement \n\n For Python 2 2compatibility'return zip range len elts elts def best Matching Service service ' Returntheindexofthefirstmatchingtype orsomething\nhigherifnotypematches \n\n Thisprovidesanorderinginwhichserviceelementsthat\ncontainatypethatcomesearlierinthepreferredtypeslist\ncomebeforeserviceelementsthatcomelater Ifaservice\nelementhasmorethanonetype themostpreferredonewins \n'for i t in enumerate preferred types if preferred types[i] in service type uris return ireturn len preferred types prio services [ best Matching Service s orig index s for orig index s in enumerate service list ]prio services sort for i in range len prio services prio services[i] prio services[i][ 2 ]return prio services
def find Around pic pat xy None r None if xy and r h w pat shape[ 2] x y xypic pic[ y - r y + h + r x - r x + w + r ]matches cv 2 match Template pat pic cv 2 TM CCOEFF NORMED yf xf np unravel index matches argmax matches shape return x - r + xf y - r + yf if xy and r else xf yf
def get mandlebrot escape values width height x vals np linspace -3 2 width y vals np linspace -1 5 1 5 height grid np meshgrid x vals y vals v get num escape turns np vectorize get num escape turns return v get num escape turns *grid astype np float
def read from numa maps pid key numa maps open '/proc/%s/numa maps' % pid numa map info numa maps read numa maps close numa maps dict {}numa pattern ' ^[\\dabcdfe]+ \\s+ *%s[ ] \\d+ ' % key for address number in re findall numa pattern numa map info re M numa maps dict[address] numberreturn numa maps dict
def check update github slug current version prereleases False releases get valid releases github slug prereleases wf logger info u'{ 0 }releasesfor{ 1 }' format len releases github slug if not len releases raise Value Error u' Novalidreleasesfor{ 0 }' format github slug latest release releases[ 0 ]vr Version latest release[u'version'] vl Version current version wf logger debug u' Latest {0 r} Installed {1 r}' format vr vl if vr > vl wf cache data u' workflow update status' {u'version' latest release[u'version'] u'download url' latest release[u'download url'] u'available' True} return Truewf cache data u' workflow update status' {u'available' False} return False
def package search data dict context {'model' model 'session' model Session 'user' c user 'auth user obj' c userobj}if 'sort' not in data dict or not data dict['sort'] data dict['sort'] 'metadata modifieddesc'if 'rows' not in data dict or not data dict['rows'] data dict['rows'] ITEMS LIMI Tquery logic get action 'package search' context data dict copy return query['count'] query['results']
def default select identifier all entry points if len all entry points 0 raise Plugin Missing Error identifier elif len all entry points 1 return all entry points[ 0 ]elif len all entry points > 1 raise Ambiguous Plugin Error all entry points
def default select identifier all entry points if len all entry points 0 raise Plugin Missing Error identifier elif len all entry points 1 return all entry points[ 0 ]elif len all entry points > 1 raise Ambiguous Plugin Error all entry points
def inspect mode 'all' priority 19 **kwargs collector 'collector' try return collector Inspector cachedir opts ['cachedir'] piddir os path dirname opts ['pidfile'] request snapshot mode priority priority **kwargs except Inspector Snapshot Exception as ex raise Command Execution Error ex except Exception as ex log error get error message ex raise Exception ex
def ffmpeg movie from frames filename folder fps digits 6 s '%' + '% 02 d' % digits + 'd png' cmd [get setting 'FFMPEG BINARY' '-y' '-f' 'image 2 ' '-r' '%d' % fps '-i' os path join folder folder + '/' + s '-b' '%dk' % bitrate '-r' '%d' % self fps filename]subprocess call cmd
def hmean a axis 0 dtype None if not isinstance a np ndarray a np array a dtype dtype if np all a > 0 if isinstance a np ma Masked Array size a count axis elif axis is None a a ravel size a shape[ 0 ]else size a shape[axis]return size / np sum 1 0 / a axis axis dtype dtype else raise Value Error ' Harmonicmeanonlydefinedifallelementsgreaterthanzero'
def intermediate points start end graph data newdata []newdata append start graph data[ 0 ][ 0 ] + graph data[ 1 ][ 0 ] - graph data[ 0 ][ 0 ] / 2 0 graph data[ 0 ][ 1 ] for index in range 1 len graph data - 1 lastxval lastyval graph data[ index - 1 ] xval yval graph data[index] nextxval nextyval graph data[ index + 1 ]newdata append lastxval + xval - lastxval / 2 0 xval + nextxval - xval / 2 0 yval newdata append xval + nextxval - xval / 2 0 end graph data[ -1 ][ 1 ] return newdata
def intermediate points start end graph data newdata []newdata append start graph data[ 0 ][ 0 ] + graph data[ 1 ][ 0 ] - graph data[ 0 ][ 0 ] / 2 0 graph data[ 0 ][ 1 ] for index in range 1 len graph data - 1 lastxval lastyval graph data[ index - 1 ] xval yval graph data[index] nextxval nextyval graph data[ index + 1 ]newdata append lastxval + xval - lastxval / 2 0 xval + nextxval - xval / 2 0 yval newdata append xval + nextxval - xval / 2 0 end graph data[ -1 ][ 1 ] return newdata
def stop service pidfile pidfh open pidfile pid int pidfh readline os kill pid signal SIGTERM
def stop service pidfile pidfh open pidfile pid int pidfh readline os kill pid signal SIGTERM
def get city data data pd read csv pm get data file 'pymc 3 examples' 'data/srrs 2 dat' cty data pd read csv pm get data file 'pymc 3 examples' 'data/cty dat' data data[ data state 'MN' ]data['fips'] data stfips * 1000 + data cntyfips cty data['fips'] cty data stfips * 1000 + cty data ctfips data['lradon'] np log np where data activity 0 0 1 data activity data data merge cty data 'inner' on 'fips' unique data[['fips']] drop duplicates unique['group'] np arange len unique unique set index 'fips' return data merge unique 'inner' on 'fips'
@pytest mark skipif 'not HAS BEAUTIFUL SOUP' def test identify table fail table in ['<tableid "foo"><tr><th>A</th></tr>' '<tr><td>B</td></tr></table>']with pytest raises core Inconsistent Table Error as err Table read table in format 'ascii html' htmldict {'table id' 'bad id'} guess False assert str err endswith "ERROR HTM Ltableid'bad id'notfound" with pytest raises core Inconsistent Table Error as err Table read table in format 'ascii html' htmldict {'table id' 3} guess False assert str err endswith 'ERROR HTM Ltablenumber 3 notfound'
def attachment specs delete context attachment id key return IMPL attachment specs delete context attachment id key
def de dupe version table apps schema editor db alias schema editor connection alias Version apps get model u'reversion' u' Version' keep version ids Version objects using db alias order by values list u'revision id' u'content type id' u'object id' annotate max pk models Max u'pk' values list u'max pk' flat True if keep version ids count Version objects using db alias all count returndelete version ids list Version objects using db alias exclude pk in keep version ids values list u'pk' flat True Version objects using db alias filter pk in delete version ids delete
def de dupe version table apps schema editor db alias schema editor connection alias Version apps get model u'reversion' u' Version' keep version ids Version objects using db alias order by values list u'revision id' u'content type id' u'object id' annotate max pk models Max u'pk' values list u'max pk' flat True if keep version ids count Version objects using db alias all count returndelete version ids list Version objects using db alias exclude pk in keep version ids values list u'pk' flat True Version objects using db alias filter pk in delete version ids delete
def convert behave to cucumber json behave filename cucumber filename encoding 'UTF- 8 ' pretty True dump kwargs {'encoding' encoding}if pretty dump kwargs update indent 2 sort keys True with open behave filename 'r' as behave json with open cucumber filename 'w+' as output file cucumber json b2 c convert json load behave json encoding json dump cucumber json output file **dump kwargs return 0
def convert behave to cucumber json behave filename cucumber filename encoding 'UTF- 8 ' pretty True dump kwargs {'encoding' encoding}if pretty dump kwargs update indent 2 sort keys True with open behave filename 'r' as behave json with open cucumber filename 'w+' as output file cucumber json b2 c convert json load behave json encoding json dump cucumber json output file **dump kwargs return 0
def apply view middleware request urlconf getattr request 'urlconf' settings ROOT URLCONF urlresolvers set urlconf urlconf resolver urlresolvers Regex URL Resolver '^/' urlconf resolver match resolver resolve request path info callback callback args callback kwargs resolver matchrequest resolver match resolver matchfor middleware path in settings MIDDLEWARE CLASSES mw class import string middleware path try mw instance mw class except Middleware Not Used continueif hasattr mw instance 'process view' mw instance process view request callback callback args callback kwargs return request
def import curve p a b g r name 'dummy Name' oid 1 3 132 0 255 if isinstance p str p pkcs os 2 ip p if isinstance a str a pkcs os 2 ip a if isinstance b str b pkcs os 2 ip b if isinstance r str r pkcs os 2 ip r curve Curve Fp p a b x y extract coordinates g curve generator Point curve x y r return Curve name curve generator oid
def decode value *args **kwargs if isinstance value str value value decode 'utf- 8 ' assert isinstance value unicode return json loads value *args **kwargs
def enable mpl offline resize False strip style False verbose False show link True link text ' Exporttoplot ly' validate True init notebook mode ip ipython core getipython get ipython formatter ip display formatter formatters['text/html']formatter for type matplotlib figure Figure lambda fig iplot mpl fig resize strip style verbose show link link text validate
@ ensure existsdef copy to name source dest overwrite False makedirs False path sourcetry if source startswith 'salt //' cached source salt ['cp cache file'] source if not cached source raise Command Execution Error ' Unabletocache{ 0 }' format source path cached sourceexcept Attribute Error raise Salt Invocation Error ' Invalidsourcefile{ 0 }' format source if sd version > 219 passreturn salt ['container resource copy to'] name path dest container type virtualname exec driver EXEC DRIVER overwrite overwrite makedirs makedirs
def test feature max length on step with table keys feature Feature from string FEATURE 7 assert equals feature max length 74
def rescale layout pos scale 1 pos - pos min axis 0 pos * scale / pos max return pos
def get scanner hass config scanner Thomson Device Scanner config[DOMAIN] return scanner if scanner success init else None
def volume admin metadata get context volume id return IMPL volume admin metadata get context volume id
def calculate overquota project quotas user quotas deltas project usages user usages overs []for res delta in deltas items if delta > 0 if 0 < project quotas[res] < delta + project usages[res]['total'] LOG debug ' Requestisoverprojectquotaforresource"% res s" Projectlimit % limit s delta % delta s currenttotalprojectusage % total s' {'res' res 'limit' project quotas[res] 'delta' delta 'total' project usages[res]['total']} overs append res elif 0 < user quotas[res] < delta + user usages[res]['total'] LOG debug ' Requestisoveruserquotaforresource"% res s" Userlimit % limit s delta % delta s currenttotaluserusage % total s' {'res' res 'limit' user quotas[res] 'delta' delta 'total' user usages[res]['total']} overs append res return overs
def get fczm drivers ensure loaded 'cinder/zonemanager/drivers' return [ Driver Info x for x in interface fczm register]
def trace a offset 0 axis 1 0 axis 2 1 dtype None out None return a trace offset axis 1 axis 2 dtype out
def dump config profile 'default' cmd {'cmd' 'dump' 'mime' 'prop'}return do http cmd profile
def get cluster ref from name session cluster name cls session call method vim util 'get objects' ' Cluster Compute Resource' ['name'] for cluster in cls if cluster prop Set[ 0 ] val cluster name return cluster objreturn None
def insert fake data db tablename **kw column names []column value placeholders []column values []for k v in kw items column names append k column value placeholders append '%s' column values append v column names ' ' join column names column value placeholders ' ' join column value placeholders db run 'INSERTINTO{} {} VALUES {} ' format tablename column names column value placeholders column values return kw
def create function query session model functions processed []for function in functions if 'name' not in function raise Key Error ' Missing`name`keyinfunctionobject' if 'field' not in function raise Key Error ' Missing`field`keyinfunctionobject' funcname fieldname function['name'] function['field'] funcobj getattr func funcname try field getattr model fieldname except Attribute Error as exception exception field fieldnameraise exceptionprocessed append funcobj field return session query *processed
def create function query session model functions processed []for function in functions if 'name' not in function raise Key Error ' Missing`name`keyinfunctionobject' if 'field' not in function raise Key Error ' Missing`field`keyinfunctionobject' funcname fieldname function['name'] function['field'] funcobj getattr func funcname try field getattr model fieldname except Attribute Error as exception exception field fieldnameraise exceptionprocessed append funcobj field return session query *processed
def create function query session model functions processed []for function in functions if 'name' not in function raise Key Error ' Missing`name`keyinfunctionobject' if 'field' not in function raise Key Error ' Missing`field`keyinfunctionobject' funcname fieldname function['name'] function['field'] funcobj getattr func funcname try field getattr model fieldname except Attribute Error as exception exception field fieldnameraise exceptionprocessed append funcobj field return session query *processed
def pix 2 cm pixels monitor if not isinstance monitor monitors Monitor msg 'cm 2 pixrequiresamonitors Monitorobjectasthesecondargumentbutreceived%s'raise Value Error msg % str type monitor scr Width Cm monitor get Width scr Size Pix monitor get Size Pix if scr Size Pix is None msg ' Monitor%shasnoknownsizeinpixels SEEMONITORCENTER 'raise Value Error msg % monitor name if scr Width Cm is None msg ' Monitor%shasnoknownwidthincm SEEMONITORCENTER 'raise Value Error msg % monitor name return pixels * float scr Width Cm / scr Size Pix[ 0 ]
def pix 2 cm pixels monitor if not isinstance monitor monitors Monitor msg 'cm 2 pixrequiresamonitors Monitorobjectasthesecondargumentbutreceived%s'raise Value Error msg % str type monitor scr Width Cm monitor get Width scr Size Pix monitor get Size Pix if scr Size Pix is None msg ' Monitor%shasnoknownsizeinpixels SEEMONITORCENTER 'raise Value Error msg % monitor name if scr Width Cm is None msg ' Monitor%shasnoknownwidthincm SEEMONITORCENTER 'raise Value Error msg % monitor name return pixels * float scr Width Cm / scr Size Pix[ 0 ]
def create context entity id traversal id is update stack id values {'entity id' entity id 'traversal id' traversal id 'is update' is update 'atomic key' 0 'stack id' stack id 'input data' {}}return sync point object Sync Point create context values
def n to data n if n < 0 raise Network X Error ' Numbersingraph 6 formatmustbenon-negative ' if n < 62 return [n]if n < 258047 return [63 n >> 12 & 63 n >> 6 & 63 n & 63 ]if n < 68719476735 return [63 63 n >> 30 & 63 n >> 24 & 63 n >> 18 & 63 n >> 12 & 63 n >> 6 & 63 n & 63 ]raise Network X Error ' Numbersabove 68719476735 arenotsupportedbygraph 6 '
def build pool test case return Storage Pool reactor create zfs pool test case File Path test case mktemp
def get mac address ip address from subprocess import Popen PIP Epid Popen ['arp' '-n' ip address] stdout PIPE pid component pid communicate [0 ]match re search ' [a-f\\d]{ 1 2}\\ {5 }[a-f\\d]{ 1 2} ' encode 'UTF- 8 ' pid component if match is not None return match groups [0 ]else return None
def revoke challenge global challengechallenge None
def rename register llvmir def repl mat return '% dot {0 }' format mat group 1 return re regname sub repl llvmir
def rename register llvmir def repl mat return '% dot {0 }' format mat group 1 return re regname sub repl llvmir
def rename register llvmir def repl mat return '% dot {0 }' format mat group 1 return re regname sub repl llvmir
def Get All Headers message name for header line in message getallmatchingheaders name yield header line split ' ' 1 [1 ] strip
def main for service reactor service service start Service stop Deferred reactor add System Event Trigger 'before' 'shutdown' chain stop result service stop return stop
def make template resource definitions version 'heat template version' '2015 - 04 - 30 ' child env None tmpl template Template dict [version] env child env for name defn in resource definitions tmpl add resource defn name return tmpl
def make template resource definitions version 'heat template version' '2015 - 04 - 30 ' child env None tmpl template Template dict [version] env child env for name defn in resource definitions tmpl add resource defn name return tmpl
def remove record module gcdns record overwrite module boolean module params['overwrite'] ttl module params['ttl']record data module params['record data']if record is None return Falseif not overwrite if not records match record data['ttl'] record data['rrdatas'] ttl record data module fail json msg 'cannotdeleteduetonon-matchingttlorrecord data ' + 'ttl %d record data %s' % ttl record data + 'originalttl %d originalrecord data %s' % record data['ttl'] record data['rrdatas'] changed False if not module check mode gcdns delete record record return True
def libvlc media player set position p mi f pos f Cfunctions get 'libvlc media player set position' None or Cfunction 'libvlc media player set position' 1 1 None None Media Player ctypes c float return f p mi f pos
def set cuda disabled global cuda available cuda warning is displayedcuda available False
def path to resource project path type None project path path relative to project root project path if project path is None project path rope base project realpath path project rope base project get no project if type is None return project get resource project path if type 'file' return project get file project path if type 'folder' return project get folder project path return None
def sanitize choices choices choices all seen set others [x for x in choices all if x not in choices ]res []for s in choices if s in list choices all + ['*'] if not s in seen or seen add s res extend list others if s '*' else [s] return res
def circvar samples high 2 * pi low 0 axis None samples ang circfuncs common samples high low S sin ang mean axis axis C cos ang mean axis axis R hypot S C return high - low / 2 0 / pi ** 2 * 2 * log 1 / R
def client range to segment range client start client end segment size segment start int client start // segment size * segment size if client start is not None else None segment end None if client end is None else int client end // segment size + 1 * segment size - 1 if client start is not None else int math ceil float client end / segment size + 1 * segment size return segment start segment end
def chemical equations equal eq 1 eq 2 exact False left 1 arrow 1 right 1 split on arrow eq 1 left 2 arrow 2 right 2 split on arrow eq 2 if arrow 1 '' or arrow 2 '' return Falseif arrow 1 arrow 2 return Falsetry factor left divide chemical expression left 1 left 2 if not factor left return Falsefactor right divide chemical expression right 1 right 2 if not factor right return Falseif factor left factor right return Falseif exact and factor left 1 return Falsereturn Trueexcept Parse Exception return False
def scipy exponweib sucks value alpha beta pdf np log sp exponweib pdf value 1 alpha scale beta if np isinf pdf return sp exponweib logpdf value 1 alpha scale beta return pdf
def create agent config map config try bridge mappings q utils parse mappings config OVS bridge mappings except Value Error as e raise Value Error ' Parsingbridge mappingsfailed %s ' % e kwargs dict integ br config OVS integration bridge tun br config OVS tunnel bridge local ip config OVS local ip bridge mappings bridge mappings root helper config AGENT root helper polling interval config AGENT polling interval enable tunneling config OVS enable tunneling if kwargs['enable tunneling'] and not kwargs['local ip'] msg ' Tunnellingcannotbeenabledwithoutavalidlocal ip ' raise Value Error msg return kwargs
def render markdown markdown text return markdown markdown markdown text
@contextlib contextmanagerdef redirect fd fd save os dup fd r w os pipe try os dup 2 w fd yield io open r 'r' finally os close w os dup 2 save fd os close save
def timestamp date return date - datetime 1970 1 1 total seconds
def aggregate keywords keywords sep prefix raw False processed []encode encode to py 3 bytes or py 2 strfor k v in keywords items if len k 1 if v is not False processed append encode '-' + k if v is not True processed append encode v else if not raw k k replace ' ' '-' if v is True processed append encode '--' + k elif v is False passelif sep is None or sep '' processed append encode prefix + k processed append encode v else arg encode '%s%s%s%s' % prefix k sep v processed append arg return processed
def package list out err DETAILS['server'] sendline 'pkg list\n' return parse out
def package list out err DETAILS['server'] sendline 'pkg list\n' return parse out
def has option option family 'ipv 4 ' cmd '{ 0 }--help' format iptables cmd family if option in salt ['cmd run'] cmd output loglevel 'quiet' return Truereturn False
def manager worker process output queue futures is shutdown log info 'startingupmanagerworker %s' threading current thread while not is shutdown is set try workitem output queue get future futures get workitem work id None log debug 'dequeuemanagerresponse %s' workitem if not future continueif workitem is exception future set exception workitem response else future set result workitem response log debug 'updatedfutureresult %s' future del futures[workitem work id]except Exception as ex log exception 'errorinmanager' log info 'managerworkershuttingdown %s' threading current thread
def manager worker process output queue futures is shutdown log info 'startingupmanagerworker %s' threading current thread while not is shutdown is set try workitem output queue get future futures get workitem work id None log debug 'dequeuemanagerresponse %s' workitem if not future continueif workitem is exception future set exception workitem response else future set result workitem response log debug 'updatedfutureresult %s' future del futures[workitem work id]except Exception as ex log exception 'errorinmanager' log info 'managerworkershuttingdown %s' threading current thread
def build flask context request return HTTP Context url request url method request method user agent request user agent string referrer request referrer remote ip request remote addr
def build flask context request return HTTP Context url request url method request method user agent request user agent string referrer request referrer remote ip request remote addr
def display structure structure parentparts [] if parentparts name ' ' join parentparts else print 'HEADER'name 'TEXT'is multipart isinstance structure[ 0 ] list if is multipart parttype 'multipart/%s' % structure[ 1 ] lower else parttype '%s/%s' % structure[ 2] lower print '%- 9 s' % name parttype if is multipart printsubparts structure[ 0 ]for i in range len subparts display structure subparts[i] parentparts + [str i + 1 ] else if structure[ 6 ] print 'size %s' % structure[ 6 ] if structure[ 8 ] disposition namevalues structure[ 8 ]print disposition for i in range 0 len namevalues 2 print '%s %r' % namevalues[i i + 2 ] print
def file size filename fd os open filename os O RDONLY try return os lseek fd 0 os SEEK END except Keyboard Interrupt as e raise eexcept Exception as e raise Exception "file sizefailedtoobtainthesizeof'%s' %s" % filename str e finally os close fd
def to epoch milliseconds dt return int math floor 1000 0 * epoch timestamp dt
def on cleanup list filename skip nzb False lst cfg cleanup list if lst name ext os path splitext filename ext ext strip lower name name strip for k in lst item k strip strip ' ' lower item ' ' + item if item ext or ext '' and item name and not skip nzb and item ' nzb' return Truereturn False
@taskdef prepare index index pk from kuma wiki search import Wiki Document Typefrom kuma search models import Indexcls Wiki Document Typees cls get connection 'indexing' index Index objects get pk index pk Index objects recreate index es es index index temporary settings {'index' {'refresh interval' '- 1 ' 'number of replicas' '0 '}}es indices put settings temporary settings index index prefixed name
def create transfer manager client config osutil None executor cls Noneif not config use threads executor cls Non Threaded Executorreturn Transfer Manager client config osutil executor cls
def test periodic command fixed delay fd schedule Periodic Command Fixed Delay at time at datetime datetime now delay datetime timedelta seconds 2 function lambda None assert fd due is True assert fd next due is False
def test periodic command fixed delay fd schedule Periodic Command Fixed Delay at time at datetime datetime now delay datetime timedelta seconds 2 function lambda None assert fd due is True assert fd next due is False
@click command 'serve default site' @click argument 'state' type click Choice ['on' 'off'] def config serve default site state state True if state 'on' else False update config {'serve default site' state}
@click command 'serve default site' @click argument 'state' type click Choice ['on' 'off'] def config serve default site state state True if state 'on' else False update config {'serve default site' state}
def get generated by for biom tables return 'QIIME' + get qiime library version
def setup modifiers node field None context None in tree view False modifiers {}if field is not None transfer field to modifiers field modifiers transfer node to modifiers node modifiers context context in tree view in tree view transfer modifiers to node modifiers node
def service get by compute host context host return IMPL service get by compute host context host
@set databasedef get item **kwargs if item selector Nonefor attr value in item iteritems if not selector selector getattr Item attr value else selector & getattr Item attr value return Item get selector
def get container data volumes container volumes option volumes []volumes option volumes option or [] container mounts dict mount[u' Destination'] mount for mount in container get u' Mounts' or {} image volumes [ Volume Spec parse volume for volume in container image config[u' Container Config'] get u' Volumes' or {} ]for volume in set volumes option + image volumes if volume external continuemount container mounts get volume internal if not mount continueif not mount get u' Name' continuevolume volume replace external mount[u' Name'] volumes append volume return volumes
def to unicode s encoding None if six PY 3 return to str s encoding else if isinstance s str return s decode encoding or salt system encoding return unicode s
def to stublist degree sequence return list chaini [n] * d for n d in enumerate degree sequence
def get tag return sys implementation cache tag
def remove Old Back Refs senderkey signal receiver receivers try index receivers index receiver except Value Error return Falseelse old Receiver receivers[index]del receivers[index]found 0signals connections get signal if signals is not None for sig recs in connections get signal {} iteritems if sig signal for rec in recs if rec is old Receiver found 1breakif not found kill Backref old Receiver senderkey return Truereturn False
def remove Old Back Refs senderkey signal receiver receivers try index receivers index receiver except Value Error return Falseelse old Receiver receivers[index]del receivers[index]found 0signals connections get signal if signals is not None for sig recs in connections get signal {} iteritems if sig signal for rec in recs if rec is old Receiver found 1breakif not found kill Backref old Receiver senderkey return Truereturn False
def setup platform hass config add devices discovery info None if discovery info is None returnhomematic get component 'homematic' return homematic setup hmdevice discovery helper hass HM Light discovery info add devices
def precompute idfs wglobal dfs total docs return dict termid wglobal df total docs for termid df in iteritems dfs
def mark as cover container name if name not in container mime map raise Value Error u' Cannotmark%sascoverasitdoesnotexist' % name mt container mime map[name]if not is raster image mt raise Value Error u' Cannotmark%sasthecoverimageasitisnotarasterimage' % name if container book type u'azw 3 ' mark as cover azw 3 container name else mark as cover epub container name
def mark as cover container name if name not in container mime map raise Value Error u' Cannotmark%sascoverasitdoesnotexist' % name mt container mime map[name]if not is raster image mt raise Value Error u' Cannotmark%sasthecoverimageasitisnotarasterimage' % name if container book type u'azw 3 ' mark as cover azw 3 container name else mark as cover epub container name
def get indices client try indices list client indices get settings index ' all' params {'expand wildcards' 'open closed'} version number get version client logger debug ' Detected Elasticsearchversion{ 0 }' format ' ' join map str version number if version number > 2 4 2 and version number < 5 0 0 logger debug ' Using Elasticsearch> 2 4 2< 5 0 0' if client indices exists index ' security' logger debug ' Foundthe" security"index Addingtolistofallindices' if not ' security' in indices indices append ' security' logger debug ' Allindices {0 }' format indices return indicesexcept Exception as e raise Failed Execution ' Failedtogetindices Error {0 }' format e
def new key *args **kwargs return XOR Cipher key *args **kwargs
def initialize headers headers return {} if headers is None else dict headers
def init addons settings routes True from website addons base import init addonsettings ADDONS AVAILABLE getattr settings 'ADDONS AVAILABLE' [] settings ADDONS AVAILABLE DICT getattr settings 'ADDONS AVAILABLE DICT' Ordered Dict for addon name in settings ADDONS REQUESTED if settings USE POSTGRES try addon apps get app config 'addons {}' format addon name except Lookup Error addon Noneelse addon init addon app addon name routes routes if addon if addon not in settings ADDONS AVAILABLE settings ADDONS AVAILABLE append addon settings ADDONS AVAILABLE DICT[addon short name] addonsettings ADDON CAPABILITIES render addon capabilities settings ADDONS AVAILABLE
def has meta cmd query try first token query split [0 ]if first token lower in u'alter' u'create' u'drop' return Trueexcept Exception return Falsereturn False
def has meta cmd query try first token query split [0 ]if first token lower in u'alter' u'create' u'drop' return Trueexcept Exception return Falsereturn False
def base 64 decodestring instr if six PY 3 b salt utils to bytes instr data base 64 decodebytes b try return salt utils to str data except Unicode Decode Error return datareturn base 64 decodestring instr
def Varint Encode value result ''if value < 0 raise Value Error ' Varintcannotencodeanegativenumber ' bits value & 127 value >> 7while value result + HIGH CHR MAP[bits]bits value & 127 value >> 7result + CHR MAP[bits]return result
def resolve email domain domain try answer dns resolver query domain 'MX' raise on no answer False except dns resolver NXDOMAIN print ' Error Nosuchdomain' domain returnif answer rrset is not None records sorted answer key lambda record record preference print ' Thisdomainhas' len records 'M Xrecords' for record in records name record exchange to text omit final dot True print ' Priority' record preference resolve hostname name else print ' Thisdomainhasnoexplicit M Xrecords'print ' Attemptingtoresolveitasan A AAAA or CNAME'resolve hostname domain
def resolve email domain domain try answer dns resolver query domain 'MX' raise on no answer False except dns resolver NXDOMAIN print ' Error Nosuchdomain' domain returnif answer rrset is not None records sorted answer key lambda record record preference print ' Thisdomainhas' len records 'M Xrecords' for record in records name record exchange to text omit final dot True print ' Priority' record preference resolve hostname name else print ' Thisdomainhasnoexplicit M Xrecords'print ' Attemptingtoresolveitasan A AAAA or CNAME'resolve hostname domain
def shutdown program logging info ' Performingsabnzbdshutdown' sabnzbd halt cherrypy engine exit sabnzbd SABSTOP True
def test class injection does not break collection testdir testdir makeconftest '\nfromtest injectimport Test Class\ndefpytest generate tests metafunc \n Test Class changed var {}\n' testdir makepyfile test inject '\nclass Test Class object \ndeftest injection self \n""" Testbeingparametrized """\npass\n' result testdir runpytest assert ' Runtime Error dictionarychangedsizeduringiteration' not in result stdout str result stdout fnmatch lines ['* 1 passed*']
def test class injection does not break collection testdir testdir makeconftest '\nfromtest injectimport Test Class\ndefpytest generate tests metafunc \n Test Class changed var {}\n' testdir makepyfile test inject '\nclass Test Class object \ndeftest injection self \n""" Testbeingparametrized """\npass\n' result testdir runpytest assert ' Runtime Error dictionarychangedsizeduringiteration' not in result stdout str result stdout fnmatch lines ['* 1 passed*']
def sync db and registry qs app id existing dict m module m for m in qs to add [m for m in module registry if m not in existing ]to delete [m for m in existing if m not in module registry ]for m in to add Discovery Module objects get or create module m app app id Discovery Module objects filter module in to delete app app id delete if to add or to delete qs result cache None
def remove users caller role *users if not len users 1 and caller users[ 0 ] check caller authority caller role role remove users *users
def render template **kwargs try return env get template template render **kwargs except jinja 2 exceptions Undefined Error log misc exception ' Undefined Errorwhilerendering' + template err path os path join 'html' 'undef error html' err template utils read file err path tb traceback format exc return err template format pagename template traceback tb
def main ip addr 1 raw input 'pynet-rtr 1 I Paddress ' ip addr 2 raw input 'pynet-rtr 2 I Paddress ' community string getpass getpass prompt ' Communitystring ' pynet rtr 1 ip addr 1 community string 161 pynet rtr 2 ip addr 2 community string 161 for a device in pynet rtr 1 pynet rtr 2 print '\n*********************'for the oid in SYS NAME SYS DESCR snmp data snmp helper snmp get oid a device oid the oid output snmp helper snmp extract snmp data print outputprint '*********************'print
def ffill query in range expr lower upper checkpoints None odo kwargs None ts field TS FIELD NAME odo kwargs odo kwargs or {} computed lower materialized checkpoints get materialized checkpoints checkpoints expr fields lower odo kwargs pred expr[ts field] < upper if computed lower is not None pred & expr[ts field] > computed lower raw pd concat materialized checkpoints odo expr[pred] pd Data Frame **odo kwargs ignore index True raw loc[ ts field] raw loc[ ts field] astype 'datetime 64 [ns]' return raw
def ffill query in range expr lower upper checkpoints None odo kwargs None ts field TS FIELD NAME odo kwargs odo kwargs or {} computed lower materialized checkpoints get materialized checkpoints checkpoints expr fields lower odo kwargs pred expr[ts field] < upper if computed lower is not None pred & expr[ts field] > computed lower raw pd concat materialized checkpoints odo expr[pred] pd Data Frame **odo kwargs ignore index True raw loc[ ts field] raw loc[ ts field] astype 'datetime 64 [ns]' return raw
def build response request data code encoding response Response response encoding encodingresponse raw dataresponse url request urlresponse request requestresponse status code get status code from code response code response raw seek 0 response dispatch hook u'response' request hooks response return response
def set urlconf urlconf name if urlconf name urlconfs value urlconf nameelif hasattr urlconfs 'value' del urlconfs value
def superlative interface comparison result class Comparison Proxy proxy For Interface interface ' original' def cmp self other return comparison resultreturn Comparison Proxy
def superlative interface comparison result class Comparison Proxy proxy For Interface interface ' original' def cmp self other return comparison resultreturn Comparison Proxy
def absent name vhost '/' runas None ret {'name' name 'result' True 'comment' '' 'changes' {}}policy exists salt ['rabbitmq policy exists'] vhost name runas runas if not policy exists ret['comment'] " Policy'{ 0 }{ 1 }'isnotpresent " format vhost name return retif not opts ['test'] result salt ['rabbitmq delete policy'] vhost name runas runas if ' Error' in result ret['result'] Falseret['comment'] result[' Error']return retelif ' Deleted' in result ret['comment'] ' Deleted'ret['changes'] {'new' '' 'old' name}if opts ['test'] ret['result'] Noneret['comment'] " Policy'{ 0 }{ 1 }'willberemoved " format vhost name return ret
def absent name vhost '/' runas None ret {'name' name 'result' True 'comment' '' 'changes' {}}policy exists salt ['rabbitmq policy exists'] vhost name runas runas if not policy exists ret['comment'] " Policy'{ 0 }{ 1 }'isnotpresent " format vhost name return retif not opts ['test'] result salt ['rabbitmq delete policy'] vhost name runas runas if ' Error' in result ret['result'] Falseret['comment'] result[' Error']return retelif ' Deleted' in result ret['comment'] ' Deleted'ret['changes'] {'new' '' 'old' name}if opts ['test'] ret['result'] Noneret['comment'] " Policy'{ 0 }{ 1 }'willberemoved " format vhost name return ret
def create gzip file filepath overwrite compressed path filepath + ' gz' with open filepath 'rb' as uncompressed gzip compress obj zlib compressobj COMPRESSION LEVEL zlib DEFLATED WBITS uncompressed data uncompressed read gzipped data gzip compress obj compress uncompressed data gzipped data + gzip compress obj flush if len gzipped data > len uncompressed data logger debug ' Noimprovement %s' % filepath returnwith open compressed path 'wb' as compressed logger debug ' Compressing %s' % filepath try compressed write gzipped data except Exception as ex logger critical ' Gzipcompressionfailed %s' % ex if overwrite logger debug ' Overwriting %swith%s' % filepath compressed path os remove filepath os rename compressed path filepath
def create gzip file filepath overwrite compressed path filepath + ' gz' with open filepath 'rb' as uncompressed gzip compress obj zlib compressobj COMPRESSION LEVEL zlib DEFLATED WBITS uncompressed data uncompressed read gzipped data gzip compress obj compress uncompressed data gzipped data + gzip compress obj flush if len gzipped data > len uncompressed data logger debug ' Noimprovement %s' % filepath returnwith open compressed path 'wb' as compressed logger debug ' Compressing %s' % filepath try compressed write gzipped data except Exception as ex logger critical ' Gzipcompressionfailed %s' % ex if overwrite logger debug ' Overwriting %swith%s' % filepath compressed path os remove filepath os rename compressed path filepath
def create gzip file filepath overwrite compressed path filepath + ' gz' with open filepath 'rb' as uncompressed gzip compress obj zlib compressobj COMPRESSION LEVEL zlib DEFLATED WBITS uncompressed data uncompressed read gzipped data gzip compress obj compress uncompressed data gzipped data + gzip compress obj flush if len gzipped data > len uncompressed data logger debug ' Noimprovement %s' % filepath returnwith open compressed path 'wb' as compressed logger debug ' Compressing %s' % filepath try compressed write gzipped data except Exception as ex logger critical ' Gzipcompressionfailed %s' % ex if overwrite logger debug ' Overwriting %swith%s' % filepath compressed path os remove filepath os rename compressed path filepath
def site server name template contents None template source None enabled True check config True **kwargs if not is installed 'nginx-common' server config filename '/etc/nginx/sites-available/%s conf' % server name context {'port' 80 }context update kwargs context['server name'] server nametemplate file config filename template contents template source context use sudo True link filename '/etc/nginx/sites-enabled/%s conf' % server name if enabled if not is link link filename run as root 'ln-s% config filename s% link filename s' % locals if check config with settings hide 'running' 'warnings' warn only True if run as root 'nginx-t' failed run as root 'rm% link filename s' % locals message red ' Errorin% server name snginxsiteconfig disablingforsafety ' % locals abort message elif is link link filename run as root 'rm% link filename s' % locals reload service 'nginx'
def ylim *args **kwargs ax gca ret ax set ylim *args **kwargs draw if interactive return ret
def nova to osvif network network netobj objects network Network id network['id'] bridge interface network get meta 'bridge interface' subnets nova to osvif subnets network['subnets'] if network['bridge'] is not None netobj bridge network['bridge']if network['label'] is not None netobj label network['label']if network get meta 'mtu' is not None netobj mtu network get meta 'mtu' if network get meta 'multi host' is not None netobj multi host network get meta 'multi host' if network get meta 'should create bridge' is not None netobj should provide bridge network get meta 'should create bridge' if network get meta 'should create vlan' is not None netobj should provide vlan network get meta 'should create vlan' if network get meta 'vlan' is None raise exception Nova Exception ' Missingvlannumberin%s' % network netobj vlan network get meta 'vlan' return netobj
def js del alert ident return 'try{del message "%s" }catch err {}\n' % ident
def js del alert ident return 'try{del message "%s" }catch err {}\n' % ident
def js del alert ident return 'try{del message "%s" }catch err {}\n' % ident
def needs eeg average ref proj info eeg sel pick types info meg False eeg True ref meg False exclude 'bads' return len eeg sel > 0 and not info['custom ref applied'] and not has eeg average ref proj info['projs']
def needs eeg average ref proj info eeg sel pick types info meg False eeg True ref meg False exclude 'bads' return len eeg sel > 0 and not info['custom ref applied'] and not has eeg average ref proj info['projs']
def call func spec *args return resolve func spec *args
def map tag source target source tag if target u'universal' if source u'wsj' source u'en-ptb'if source u'brown' source u'en-brown'return tagset mapping source target [source tag]
def map tag source target source tag if target u'universal' if source u'wsj' source u'en-ptb'if source u'brown' source u'en-brown'return tagset mapping source target [source tag]
def test language has first of lang Language assert equals lang first of examples ' Examples'
def List Client Logs client obj store auth credentials request callback def On List Client Logs log urls logging info 'LISTCLIENTLOGS admin %s clientuser id %d start %s end %s filter %s num logs %d' % auth credentials request['user id'] Client Log Iso Date request['start timestamp'] Client Log Iso Date request['end timestamp'] request get 'filter' None len log urls response {'log urls' log urls}callback response Client Log List Client Logs request['user id'] request['start timestamp'] request['end timestamp'] request get 'filter' None On List Client Logs
def List Client Logs client obj store auth credentials request callback def On List Client Logs log urls logging info 'LISTCLIENTLOGS admin %s clientuser id %d start %s end %s filter %s num logs %d' % auth credentials request['user id'] Client Log Iso Date request['start timestamp'] Client Log Iso Date request['end timestamp'] request get 'filter' None len log urls response {'log urls' log urls}callback response Client Log List Client Logs request['user id'] request['start timestamp'] request['end timestamp'] request get 'filter' None On List Client Logs
def load settings validate True settings {'units' DEFAULT UNITS 'icons' DEFAULT ICONS 'days' 3 'version' 2}if os path exists settings file with open settings file 'rt' as sf s json load sf if 'version' not in s migrate settings s settings update s if validate if 'service' not in settings raise Setup Error ' Youneedtosetyourweatherservice' ' Usethe"wsetservice"command ' if 'location' not in settings raise Setup Error ' Missingdefaultlocation' ' Youmustspecifyadefaultlocationwiththe"wsetlocation"command' return settings
def get exps unresolved answers for default rule exp ids def get explorations states tuples by ids exp ids " Returnsalistofall exp id state name tuplesforthegiven\nexp ids \n E g -[\n 'eid 1 ' ' Introduction' \n 'eid 1 ' ' End' \n 'eid 2 ' ' Introduction' \n 'eid 3 ' ' Introduction' \n]\nwhenexp ids ['eid 1 ' 'eid 2 ' 'eid 3 '] \n"explorations exp services get multiple explorations by id exp ids strict False return [ exploration id state name for exploration in explorations values for state name in exploration states]explorations states tuples get explorations states tuples by ids exp ids exploration states answers list get top state rule answers multi explorations states tuples [exp domain DEFAULT RULESPEC STR] exps answers mapping {}for ind statewise answers in enumerate exploration states answers list exp id explorations states tuples[ind][ 0 ]if exp id not in exps answers mapping exps answers mapping[exp id] {'count' 0 'unresolved answers' []}for answer in statewise answers exps answers mapping[exp id]['count'] + answer['count']answer['state'] explorations states tuples[ind][ 1 ]exps answers mapping[exp id]['unresolved answers'] extend statewise answers for exp id in exps answers mapping exps answers mapping[exp id]['unresolved answers'] sorted exps answers mapping[exp id]['unresolved answers'] key lambda a a['count'] reverse True return exps answers mapping
def get exps unresolved answers for default rule exp ids def get explorations states tuples by ids exp ids " Returnsalistofall exp id state name tuplesforthegiven\nexp ids \n E g -[\n 'eid 1 ' ' Introduction' \n 'eid 1 ' ' End' \n 'eid 2 ' ' Introduction' \n 'eid 3 ' ' Introduction' \n]\nwhenexp ids ['eid 1 ' 'eid 2 ' 'eid 3 '] \n"explorations exp services get multiple explorations by id exp ids strict False return [ exploration id state name for exploration in explorations values for state name in exploration states]explorations states tuples get explorations states tuples by ids exp ids exploration states answers list get top state rule answers multi explorations states tuples [exp domain DEFAULT RULESPEC STR] exps answers mapping {}for ind statewise answers in enumerate exploration states answers list exp id explorations states tuples[ind][ 0 ]if exp id not in exps answers mapping exps answers mapping[exp id] {'count' 0 'unresolved answers' []}for answer in statewise answers exps answers mapping[exp id]['count'] + answer['count']answer['state'] explorations states tuples[ind][ 1 ]exps answers mapping[exp id]['unresolved answers'] extend statewise answers for exp id in exps answers mapping exps answers mapping[exp id]['unresolved answers'] sorted exps answers mapping[exp id]['unresolved answers'] key lambda a a['count'] reverse True return exps answers mapping
def flip tree node if hasattr node 'root' node node get root if node left flip tree node left if node right flip tree node right node left node right node right node left
def flip tree node if hasattr node 'root' node node get root if node left flip tree node left if node right flip tree node right node left node right node right node left
def flip tree node if hasattr node 'root' node node get root if node left flip tree node left if node right flip tree node right node left node right node right node left
def color Str c return '% 02 x' * 4 % color Tuple c
def color Str c return '% 02 x' * 4 % color Tuple c
def get default actions section try default actions dict section['default actions'] except Index Error return {} {} action dict {action get metadata name action for action in ACTIONS}invalid action set default actions values - action dict keys invalid actions {}if len invalid action set 0 invalid actions {bear action for bear action in default actions items if action in invalid action set }for invalid in invalid actions keys del default actions[invalid]actions {bearname action dict[action name] for bearname action name in default actions items }return actions invalid actions
def set nonblocking fd fl fcntl fcntl fd fcntl F GETFL os O NONBLOCK fcntl fcntl fd fcntl F SETFL fl
def set nonblocking fd fl fcntl fcntl fd fcntl F GETFL os O NONBLOCK fcntl fcntl fd fcntl F SETFL fl
def send export mail event id result job Data Getter get export jobs event id if not job returnevent Event Model query get event id if not event event name ' Undefined 'else event name event namesend email after export job user email event name result user Data Getter get user by email job user email send notif after export user event name result
def send export mail event id result job Data Getter get export jobs event id if not job returnevent Event Model query get event id if not event event name ' Undefined 'else event name event namesend email after export job user email event name result user Data Getter get user by email job user email send notif after export user event name result
def check migration histories histories delete ghosts False ignore ghosts False exists Sorted Set ghosts []for h in histories try m h get migration m migration except exceptions Unknown Migration ghosts append h except Improperly Configured passelse exists add m if ghosts if delete ghosts for h in ghosts h delete elif not ignore ghosts raise exceptions Ghost Migrations ghosts return exists
def repo refresh m retvals {'rc' 0 'stdout' '' 'stderr' ''}cmd get cmd m 'refresh' retvals['cmd'] cmd result retvals['rc'] retvals['stdout'] retvals['stderr'] parse zypper xml m cmd return retvals
def convert args args for i elem in enumerate args if six PY 2 if isinstance elem six text type args[i] elem encode util arg encoding elif isinstance elem bytes args[i] elem decode util arg encoding return args
@ Register With Arg Checks name 'prefix add local' req args [ROUTE DISTINGUISHER PREFIX NEXT HOP] opt args [VRF RF] def add local route dist prefix next hop route family VRF RF IPV 4 try tm CORE MANAGER get core service table managerlabel tm update vrf table route dist prefix next hop route family if label label label[ 0 ]return [{ROUTE DISTINGUISHER route dist PREFIX prefix VRF RF route family VPN LABEL label}]except Bgp Core Error as e raise Prefix Error desc e
def Get Parent Device By Type device parent type parent type parent type encode 'mac roman' while IO Registry Entry Get Name device parent type parent ctypes c void p response iokit IO Registry Entry Get Parent Entry device 'IO Service' encode 'mac roman' ctypes byref parent if response 0 return Nonedevice parentreturn device
def Get Parent Device By Type device parent type parent type parent type encode 'mac roman' while IO Registry Entry Get Name device parent type parent ctypes c void p response iokit IO Registry Entry Get Parent Entry device 'IO Service' encode 'mac roman' ctypes byref parent if response 0 return Nonedevice parentreturn device
@frappe whitelist def get incoming rate args from erpnext stock stock ledger import get previous sleif isinstance args basestring args json loads args in rate 0if args get u'serial no' or u'' strip in rate get avg purchase rate args get u'serial no' else valuation method get valuation method args get u'item code' previous sle get previous sle args if valuation method u'FIFO' if not previous sle return 0 0previous stock queue json loads previous sle get u'stock queue' u'[]' or u'[]' in rate get fifo rate previous stock queue args get u'qty' or 0 if previous stock queue else 0 elif valuation method u' Moving Average' in rate previous sle get u'valuation rate' or 0 return in rate
@frappe whitelist def get incoming rate args from erpnext stock stock ledger import get previous sleif isinstance args basestring args json loads args in rate 0if args get u'serial no' or u'' strip in rate get avg purchase rate args get u'serial no' else valuation method get valuation method args get u'item code' previous sle get previous sle args if valuation method u'FIFO' if not previous sle return 0 0previous stock queue json loads previous sle get u'stock queue' u'[]' or u'[]' in rate get fifo rate previous stock queue args get u'qty' or 0 if previous stock queue else 0 elif valuation method u' Moving Average' in rate previous sle get u'valuation rate' or 0 return in rate
def preflow push G s t capacity 'capacity' residual None global relabel freq 1 value only False R preflow push impl G s t capacity residual global relabel freq value only R graph['algorithm'] 'preflow push'return R
def preflow push G s t capacity 'capacity' residual None global relabel freq 1 value only False R preflow push impl G s t capacity residual global relabel freq value only R graph['algorithm'] 'preflow push'return R
@ File System in directory current directory 'django' 'alfaces' def test django background server running in background with custom port import tornado ioloopimport tornado webclass Main Handler tornado web Request Handler def get self self write ' Hello world' raise System Exit def runserver application tornado web Application [ '/' Main Handler ] application listen 9889 tornado ioloop IO Loop instance start server multiprocessing Process target runserver server start time sleep 1 e ' Lettucecouldnotrunthebuiltin Djangoserverat 0 0 0 0 9889 "\nmaybeyouforgota"runserver"instancerunning?\n\nwellifyoureallydonotwantlettucetoruntheserverforyou thenjustrun \n\npythonmanage py--no-server'try status out commands getstatusoutput 'pythonmanage pyharvest--verbosity 3--no-color--port 9889 ' assert equals out e assert not equals status 0 finally os kill server pid 9
@ File System in directory current directory 'django' 'alfaces' def test django background server running in background with custom port import tornado ioloopimport tornado webclass Main Handler tornado web Request Handler def get self self write ' Hello world' raise System Exit def runserver application tornado web Application [ '/' Main Handler ] application listen 9889 tornado ioloop IO Loop instance start server multiprocessing Process target runserver server start time sleep 1 e ' Lettucecouldnotrunthebuiltin Djangoserverat 0 0 0 0 9889 "\nmaybeyouforgota"runserver"instancerunning?\n\nwellifyoureallydonotwantlettucetoruntheserverforyou thenjustrun \n\npythonmanage py--no-server'try status out commands getstatusoutput 'pythonmanage pyharvest--verbosity 3--no-color--port 9889 ' assert equals out e assert not equals status 0 finally os kill server pid 9
def average On Time vectors num Samples None if vectors ndim 1 vectors shape -1 1 num Time Steps len vectors num Elements len vectors[ 0 ] if num Samples is None num Samples num Elementscount On range num Elements else count On numpy random randint 0 num Elements num Samples sum Of Lengths 0 0on Time Freq Counts Nonen 0for i in count On on Time segments durations list Of On Times In Vec vectors[ i] if on Time 0 0 sum Of Lengths + on Timen + segmentson Time Freq Counts accumulate Frequency Counts durations on Time Freq Counts if n > 0 return sum Of Lengths / n on Time Freq Counts else return 0 0 on Time Freq Counts
def hue light registry xml parent data hue light XML Sub Element xml parent 'org jenkinsci plugins hue light Light Notifier' hue light set 'plugin' 'hue-light' light Id XML Sub Element hue light 'light Id' id mapping [ 'light-id' 'string' None ]helpers convert mapping to xml light Id data id mapping fail required True build mapping [ 'pre-build' 'pre Build' 'blue' 'good-build' 'good Build' 'green' 'unstable-build' 'unstable Build' 'yellow' 'bad-build' 'bad Build' 'red' ]helpers convert mapping to xml hue light data build mapping fail required True
def hue light registry xml parent data hue light XML Sub Element xml parent 'org jenkinsci plugins hue light Light Notifier' hue light set 'plugin' 'hue-light' light Id XML Sub Element hue light 'light Id' id mapping [ 'light-id' 'string' None ]helpers convert mapping to xml light Id data id mapping fail required True build mapping [ 'pre-build' 'pre Build' 'blue' 'good-build' 'good Build' 'green' 'unstable-build' 'unstable Build' 'yellow' 'bad-build' 'bad Build' 'red' ]helpers convert mapping to xml hue light data build mapping fail required True
def hue light registry xml parent data hue light XML Sub Element xml parent 'org jenkinsci plugins hue light Light Notifier' hue light set 'plugin' 'hue-light' light Id XML Sub Element hue light 'light Id' id mapping [ 'light-id' 'string' None ]helpers convert mapping to xml light Id data id mapping fail required True build mapping [ 'pre-build' 'pre Build' 'blue' 'good-build' 'good Build' 'green' 'unstable-build' 'unstable Build' 'yellow' 'bad-build' 'bad Build' 'red' ]helpers convert mapping to xml hue light data build mapping fail required True
def virtual if not salt utils is windows and 'ip get interface' in salt return Truereturn False
def service get all by topic context topic return IMPL service get all by topic context topic
def concat categorical to concat axis 0 def concat asobject to concat to concat [ x get values if is categorical dtype x dtype else x ravel for x in to concat]res concat compat to concat if axis 1 return res reshape 1 len res else return rescategoricals [x for x in to concat if is categorical dtype x dtype ]if len categoricals len to concat passelse first to concat[ 0 ]if all first is dtype equal other for other in to concat[ 1 ] return union categoricals categoricals return concat asobject to concat
def db Validator fileused get File Used host Configuration get 'nupic cluster database host' port int Configuration get 'nupic cluster database port' user Configuration get 'nupic cluster database user' passwd '*' * len Configuration get 'nupic cluster database passwd' print ' Thisscriptwillvalidatethatyour My SQ Lissetupcorrectlyfor'print ' Nu PIC My SQ Lisrequiredfor Nu PI Cswarming Thesettingsare'print 'definedinaconfigurationfilefoundin'print '$NUPIC/src/nupic/support/nupic-default xml Outoftheboxthose'print "settingscontain My SQL'sdefaultaccesscredentials "printprint ' Thenupic-default xmlcanbeduplicatedtodefineuserspecific'print 'changescallingthecopiedfile'print '$NUPIC/src/nupic/support/nupic-site xml Refertothe'print 'nupic-default xmlforadditionalinstructions 'printprint ' Defaults localhost 3306 root nopassword'printprint ' Retrievedthefollowing Nu PI Cconfigurationusing ' fileusedprint 'host ' hostprint 'port ' portprint 'user ' userprint 'passwd ' passwdif test Db Connection host port user passwd print ' Connectionsuccessful 'else print " Couldn'tconnecttothedatabaseoryoudon'thavethepermissionsrequiredtocreatedatabasesandtables Pleaseensureyouhave My SQL\ninstalled running accessibleusingthe Nu PI Cconfigurationsettings andtheuserspecifiedhaspermissiontocreatebothdatabasesandtables "
def db Validator fileused get File Used host Configuration get 'nupic cluster database host' port int Configuration get 'nupic cluster database port' user Configuration get 'nupic cluster database user' passwd '*' * len Configuration get 'nupic cluster database passwd' print ' Thisscriptwillvalidatethatyour My SQ Lissetupcorrectlyfor'print ' Nu PIC My SQ Lisrequiredfor Nu PI Cswarming Thesettingsare'print 'definedinaconfigurationfilefoundin'print '$NUPIC/src/nupic/support/nupic-default xml Outoftheboxthose'print "settingscontain My SQL'sdefaultaccesscredentials "printprint ' Thenupic-default xmlcanbeduplicatedtodefineuserspecific'print 'changescallingthecopiedfile'print '$NUPIC/src/nupic/support/nupic-site xml Refertothe'print 'nupic-default xmlforadditionalinstructions 'printprint ' Defaults localhost 3306 root nopassword'printprint ' Retrievedthefollowing Nu PI Cconfigurationusing ' fileusedprint 'host ' hostprint 'port ' portprint 'user ' userprint 'passwd ' passwdif test Db Connection host port user passwd print ' Connectionsuccessful 'else print " Couldn'tconnecttothedatabaseoryoudon'thavethepermissionsrequiredtocreatedatabasesandtables Pleaseensureyouhave My SQL\ninstalled running accessibleusingthe Nu PI Cconfigurationsettings andtheuserspecifiedhaspermissiontocreatebothdatabasesandtables "
def render to html eq def err s ' Renderasanerrorspan'return '<spanclass "inline-errorinline">{ 0 }</span>' format s def render arrow arrow ' Turntextarrowsintoprettyones'if arrow '->' return u'\u 2192 'if arrow '<->' return u'\u 2194 'return arrowdef render expression ex '\n Renderachemicalexpression--noarrows \n'try return render to html get final tree ex except Parse Exception return err ex def spanify s return u'<spanclass "math">{ 0 }</span>' format s left arrow right split on arrow eq if arrow '' return spanify render expression left return spanify render expression left + render arrow arrow + render expression right
@csrf exemptdef openid login complete request redirect field name REDIRECT FIELD NAME render failure None render failure render failure or default render failure openid response openid views parse openid response request if not openid response return render failure request ' Thisisan Open I Drelyingpartyendpoint ' if openid response status SUCCESS external id openid response identity urloid backend openid auth Open ID Backend details oid backend extract user details openid response log debug 'openidsuccess details %s' details url getattr settings 'OPENID SSO SERVER URL' None external domain '{ 0 }{ 1 }' format OPENID DOMAIN PREFIX url fullname '%s%s' % details get 'first name' '' details get 'last name' '' return external login or signup request external id external domain details details get 'email' '' fullname retfun functools partial redirect get next url for login page request return render failure request ' Openidfailure'
def libvlc audio equalizer set amp at index p equalizer f amp u band f Cfunctions get 'libvlc audio equalizer set amp at index' None or Cfunction 'libvlc audio equalizer set amp at index' 1 1 1 None ctypes c int ctypes c void p ctypes c float ctypes c uint return f p equalizer f amp u band
def has forum access uname course id rolename try role Role objects get name rolename course id course id except Role Does Not Exist return Falsereturn role users filter username uname exists
def has forum access uname course id rolename try role Role objects get name rolename course id course id except Role Does Not Exist return Falsereturn role users filter username uname exists
def get Vector 3 Paths complex Paths z 0 0 vector 3 Paths []for complex Path in complex Paths vector 3 Paths append get Vector 3 Path complex Path z return vector 3 Paths
def existing file path option option name option value file path File Path option value if not file path exists raise Usage Error u" Problemwith--{} Filedoesnotexist '{}' " format option name file path path return file path
def reset gametime global GAME TIME OFFSETGAME TIME OFFSET runtime Server Config objects conf 'gametime offset' GAME TIME OFFSET
def reset gametime global GAME TIME OFFSETGAME TIME OFFSET runtime Server Config objects conf 'gametime offset' GAME TIME OFFSET
@taskdef run command show True *args **kwargs if show print command command with hide u'running' return run command *args **kwargs
def remove targets Rule Ids region None key None keyid None profile None try conn get conn region region key key keyid keyid profile profile if isinstance Ids string types Ids json loads Ids failures conn remove targets Rule Rule Ids Ids if failures and failures get ' Failed Entry Count' 0 > 0 return {'failures' failures get ' Failed Entries' 1 }else return {'failures' None}except Client Error as e err utils ['boto 3 get error'] e if e response get ' Error' {} get ' Code' ' Rule Not Found Exception' return {'error' ' Rule{ 0 }notfound' format Rule }return {'error' utils ['boto 3 get error'] e }
def remove targets Rule Ids region None key None keyid None profile None try conn get conn region region key key keyid keyid profile profile if isinstance Ids string types Ids json loads Ids failures conn remove targets Rule Rule Ids Ids if failures and failures get ' Failed Entry Count' 0 > 0 return {'failures' failures get ' Failed Entries' 1 }else return {'failures' None}except Client Error as e err utils ['boto 3 get error'] e if e response get ' Error' {} get ' Code' ' Rule Not Found Exception' return {'error' ' Rule{ 0 }notfound' format Rule }return {'error' utils ['boto 3 get error'] e }
def remove targets Rule Ids region None key None keyid None profile None try conn get conn region region key key keyid keyid profile profile if isinstance Ids string types Ids json loads Ids failures conn remove targets Rule Rule Ids Ids if failures and failures get ' Failed Entry Count' 0 > 0 return {'failures' failures get ' Failed Entries' 1 }else return {'failures' None}except Client Error as e err utils ['boto 3 get error'] e if e response get ' Error' {} get ' Code' ' Rule Not Found Exception' return {'error' ' Rule{ 0 }notfound' format Rule }return {'error' utils ['boto 3 get error'] e }
def branch 2 tree if isinstance tree tuple name subtree treeprint name data 2 [name] print 'subtree' subtree if testxb branchsum data 2 [name]else branchsum namefor b in subtree branchsum branchsum + branch 2 b else leavessum sum data 2 [bi] for bi in tree print 'finalbranchwith' tree '' join tree leavessum if testxb return leavessumelse return '' join tree print 'workingonbranch' tree branchsum return branchsum
def split a c 134217729 0 * a abig c - a ah c - abig al a - ah return ah al
def Split Buffer buff index 0 length None buffer len length or len buff while index < buffer len encoded tag data index Read Tag buff index tag type ORD MAP[encoded tag[ 0 ]] & TAG TYPE MASK if tag type WIRETYPE VARINT new index Varint Reader buff data index yield encoded tag '' buff[data index new index] index new indexelif tag type WIRETYPE FIXED 64 yield encoded tag '' buff[data index data index + 8 ] index 8 + data index elif tag type WIRETYPE FIXED 32 yield encoded tag '' buff[data index data index + 4 ] index 4 + data index elif tag type WIRETYPE LENGTH DELIMITED length start Varint Reader buff data index yield encoded tag buff[data index start] buff[start start + length ] index start + length else raise rdfvalue Decode Error ' Unexpected Tag '
def cross domain origin check is trusted origin **options def cross domain wrap fn cors perms {'origin check' origin check 'allow credentials' bool options get 'allow credentials' }@wraps fn def cross domain handler self *args **kwargs if request params get 'hoist' 'cookie' if cors perms['origin check'] g origin name request environ['pylons routes dict']['action name']resp fn self *args **kwargs c cookies add 'hoist %s' % name '' join tup resp response content type 'text/html'return ''else abort 403 else self check cors return fn self *args **kwargs cross domain handler cors perms cors permsreturn cross domain handlerreturn cross domain wrap
def ln label label len len label + 2 chunk 70 - label len // 2 out '%s%s%s' % '-' * chunk label '-' * chunk pad 70 - len out if pad > 0 out out + '-' * pad return out
def prog shell cmd if not util exe exists shell cmd plug util path surgery shell cmd if not util exe exists shell cmd return Nonereturn os path basename shell cmd
def test replicate value error t1 Time '2007 001 ' scale 'tai' with pytest raises Value Error as err t1 replicate format 'definitely not a valid format' assert 'formatmustbeoneof' in str err
def test replicate value error t1 Time '2007 001 ' scale 'tai' with pytest raises Value Error as err t1 replicate format 'definitely not a valid format' assert 'formatmustbeoneof' in str err
def synthesize stim channel events n samples onset events[ 0]stim channel np zeros n samples int for onset duration trigger in events stim channel[onset onset + duration ] triggerreturn stim channel
def tar backup files file paths target backup file location targetif not rename backup file location '{ 0 }{ 1 }' format backup file location BACKUP ROLLBACK SUFFIX logging warning "'{ 0 }'notfound Skippingfilerename " format backup file location tar tarfile open backup file location 'w' for name in file paths tar add name tar close return backup file location
def install windowsfeatures name return install name source 'windowsfeatures'
def install windowsfeatures name return install name source 'windowsfeatures'
def aggr weighted mean in List params assert len in List len params weights Sum sum params if weights Sum 0 return Noneweighted Mean 0for i elem in enumerate in List weighted Mean + elem * params[i] return weighted Mean / weights Sum
def import Trial Types file Name return Field Names False logging warning 'import Trial Typesis DEPRECATED asofv 1 70 00 Pleaseuse`import Conditions`foridenticalfunctionality ' return import Conditions file Name return Field Names
def import Trial Types file Name return Field Names False logging warning 'import Trial Typesis DEPRECATED asofv 1 70 00 Pleaseuse`import Conditions`foridenticalfunctionality ' return import Conditions file Name return Field Names
def get sd auth val sd auth pillar name 'serverdensity' sd pillar pillar get sd auth pillar name log debug ' Server Density Pillar {0 }' format sd pillar if not sd pillar log error ' Couldnotload{ 0 }pillar' format sd auth pillar name raise Command Execution Error '{ 0 }pillarisrequiredforauthentication' format sd auth pillar name try return sd pillar[val]except Key Error log error ' Couldnotfindvalue{ 0 }inpillar' format val raise Command Execution Error '{ 0 }valuewasnotfoundinpillar' format val
def sinh x np import module 'numpy' if isinstance x int float return interval np sinh x np sinh x elif isinstance x interval return interval np sinh x start np sinh x end is valid x is valid else raise Not Implemented Error
def render sls data saltenv 'base' sls '' **kws with warnings catch warnings record True as warn list data deserialize sls data or {} for item in warn list log warning '{warn}foundin{sls}saltenv {env}' format warn item message sls salt utils url create sls env saltenv log debug ' Resultsof SL Srendering \n{ 0 }' format data return data
def payloads tracking id client id requestable extra info None extra headers None extra payload {'v' '1 ' 'tid' tracking id 'cid' client id 'aip' '1 '}if extra info for payload in extra info extra payload update payload for request payload in requestable final payload dict request payload final payload update extra payload yield final payload extra headers
def run func until ret arg fun kwargs fun call None argument being watched None required argument response None status Nonewhile status required argument response f result fun kwargs call fun call r set {}for d in f result if isinstance d list d0 d[ 0 ]if isinstance d0 dict for k v in six iteritems d0 r set[k] vstatus unwrap dict r set argument being watched log debug ' Function {0 } Watchedarg {1 } Response {2 }' format str fun split '' [1 ] argument being watched status time sleep 5 return True
def create local pifs for host ref in db content['host'] keys create local pif host ref
def all simple paths G source target cutoff None if source not in G raise nx Node Not Found 'sourcenode%snotingraph' % source if target not in G raise nx Node Not Found 'targetnode%snotingraph' % target if cutoff is None cutoff len G - 1 if G is multigraph return all simple paths multigraph G source target cutoff cutoff else return all simple paths graph G source target cutoff cutoff
def split in lines text return line for line in map str strip text split '\n' if line
def is msie 8 or 9 if request user agent is None or request user agent browser 'msie' or request user agent version is None return Falseversion tuple map int request user agent version split ' ' return 8 0 < version < 10 0
def is msie 8 or 9 if request user agent is None or request user agent browser 'msie' or request user agent version is None return Falseversion tuple map int request user agent version split ' ' return 8 0 < version < 10 0
def is msie 8 or 9 if request user agent is None or request user agent browser 'msie' or request user agent version is None return Falseversion tuple map int request user agent version split ' ' return 8 0 < version < 10 0
def extract key val kv delimiter ' ' pieces kv split delimiter key pieces[ 0 ]val delimiter join pieces[ 1 ] return key val
def extract key val kv delimiter ' ' pieces kv split delimiter key pieces[ 0 ]val delimiter join pieces[ 1 ] return key val
def client worker process factory input queue output queue is shutdown log info 'startingupworker %s' threading current thread client factory while not is shutdown is set try workitem input queue get timeout 1 log debug 'dequeueworkerrequest %s' workitem if not workitem continuetry log debug 'executingrequestonthread %s' workitem result client execute workitem request output queue put Work Response False workitem work id result except Exception as exception log exception 'errorinworkerthread %s' threading current thread output queue put Work Response True workitem work id exception except Exception as ex passlog info 'requestworkershuttingdown %s' threading current thread
def get service hass config discovery info None if config get CONF APP ICON is None icon file os path join os path dirname file ' ' 'frontend' 'www static' 'icons' 'favicon- 192 x 192 png' app icon open icon file 'rb' read else app icon config get CONF APP ICON return GNTP Notification Service config get CONF APP NAME app icon config get CONF HOSTNAME config get CONF PASSWORD config get CONF PORT
def test can parse two ordinary steps steps Step many from lines I DIE HAPPY splitlines + I LIKE VEGETABLES splitlines assert equals len steps 2 assert isinstance steps[ 0 ] Step assert isinstance steps[ 1 ] Step assert equals steps[ 0 ] sentence I DIE HAPPY assert equals steps[ 1 ] sentence I LIKE VEGETABLES
def create task name location '\\' user name ' System' password None force False **kwargs if name in list tasks location and not force return '{ 0 }alreadyexists' format name pythoncom Co Initialize task service win 32 com client Dispatch ' Schedule Service' task service Connect task definition task service New Task 0 edit task task definition task definition user name user name password password **kwargs add action task definition task definition **kwargs add trigger task definition task definition **kwargs task folder task service Get Folder location save task definition name name task folder task folder task definition task definition user name task definition Principal User ID password password logon type task definition Principal Logon Type if name in list tasks location return Trueelse return False
def collect dirs start dir blacklist set ['conftest py' 'nox py'] suffix ' test py' for parent subdirs files in os walk start dir if any f for f in files if f endswith suffix and f not in blacklist del subdirs[ ] yield parent else subdirs[ ] [s for s in subdirs if s[ 0 ] isalpha and os path join parent s not in blacklist ]
def log Attrib obj log attrib value None if log or log is None and obj auto Log if value is None value getattr obj attrib message '%s %s %s' % obj name attrib value repr try obj win log On Flip message level logging EXP obj obj except Attribute Error logging log message level logging EXP obj obj
def log Attrib obj log attrib value None if log or log is None and obj auto Log if value is None value getattr obj attrib message '%s %s %s' % obj name attrib value repr try obj win log On Flip message level logging EXP obj obj except Attribute Error logging log message level logging EXP obj obj
def gcd a b while b > 0 a b b a % b return a
def gcd a b while b > 0 a b b a % b return a
def main connection try mprisctl Mpris 2 Controller except Import Error returntry mprisctl acquire except dbus exceptions D Bus Exception print "mprisinterfacecouldn'tbeinitialized Isdbusproperlyconfigured?"returnmprisctl run connection mprisctl release
def get TV codon lst 1 codon lst 2 codon table default codon table purine 'A' 'G' pyrimidine 'C' 'T' TV [0 0]sites 0for codon 1 codon 2 in zip codon lst 1 codon lst 2 if '---' not in codon 1 codon 2 for i j in zip codon 1 codon 2 if i j passelif i in purine and j in purine TV[ 0 ] + 1elif i in pyrimidine and j in pyrimidine TV[ 0 ] + 1else TV[ 1 ] + 1sites + 1return TV[ 0 ] / sites TV[ 1 ] / sites
def is Test File filename basename os path basename filename return basename startswith 'test ' and os path splitext basename [1 ] ' py'
def ping server port s socket socket socket AF INET socket SOCK STREAM try s connect server port return Trueexcept socket error return Falsefinally s close
@dispatch Join Data Frame Data Frame def compute up t lhs rhs **kwargs result pd merge lhs rhs left on t on left right on t on right how t how suffixes t suffixes return result reset index [t fields]
@dispatch Join Data Frame Data Frame def compute up t lhs rhs **kwargs result pd merge lhs rhs left on t on left right on t on right how t how suffixes t suffixes return result reset index [t fields]
@dispatch Join Data Frame Data Frame def compute up t lhs rhs **kwargs result pd merge lhs rhs left on t on left right on t on right how t how suffixes t suffixes return result reset index [t fields]
def walk node from collections import dequetodo deque [node] while todo node todo popleft todo extend iter child nodes node yield node
def eval kfold features labels k 10 scan [ 2 ** t for t in range 0 9 1 ] seed 1234 npts len features kf K Fold npts n folds k random state seed scores []for s in scan scanscores []for train test in kf X train features[train]y train labels[train]X test features[test]y test labels[test]clf Logistic Regression C s clf fit X train y train score clf score X test y test scanscores append score print s score scores append np mean scanscores print scoress ind np argmax scores s scan[s ind]print s ind s return s
def delete message queue region receipthandle opts None user None queues list queues region opts user url map parse queue list queues if queue not in url map log info '"{ 0 }"queuedoesnotexist ' format queue return Falseout run aws 'delete-message' region opts user receipthandle receipthandle queue url map[queue] return True
def delete message queue region receipthandle opts None user None queues list queues region opts user url map parse queue list queues if queue not in url map log info '"{ 0 }"queuedoesnotexist ' format queue return Falseout run aws 'delete-message' region opts user receipthandle receipthandle queue url map[queue] return True
def delete message queue region receipthandle opts None user None queues list queues region opts user url map parse queue list queues if queue not in url map log info '"{ 0 }"queuedoesnotexist ' format queue return Falseout run aws 'delete-message' region opts user receipthandle receipthandle queue url map[queue] return True
def delete message queue region receipthandle opts None user None queues list queues region opts user url map parse queue list queues if queue not in url map log info '"{ 0 }"queuedoesnotexist ' format queue return Falseout run aws 'delete-message' region opts user receipthandle receipthandle queue url map[queue] return True
def compare dataset states discovered datasets desired datasets for dataset id in set discovered datasets set desired datasets desired dataset desired datasets get dataset id discovered dataset discovered datasets get dataset id if not compare dataset state discovered dataset discovered dataset desired dataset desired dataset return Falsereturn True
def set computer name name if name and six PY 2 name name decode 'utf- 8 ' if windll kernel 32 Set Computer Name Ex W win 32 con Computer Name Physical Dns Hostname name ret {' Computer Name' {' Current' get computer name }}pending get pending computer name if pending not in None False ret[' Computer Name'][' Pending'] pendingreturn retreturn False
def check user tags dt try frappe db sql u'select` user tags`from`tab%s`limit 1 ' % dt except Exception as e if e args[ 0 ] 1054 Doc Tags dt setup
def check user tags dt try frappe db sql u'select` user tags`from`tab%s`limit 1 ' % dt except Exception as e if e args[ 0 ] 1054 Doc Tags dt setup
def check user tags dt try frappe db sql u'select` user tags`from`tab%s`limit 1 ' % dt except Exception as e if e args[ 0 ] 1054 Doc Tags dt setup
def read hdf 5 fname title 'h 5 io' slash 'ignore' h5 py check h5 py if not op isfile fname raise IO Error 'file"%s"notfound' % fname if not isinstance title string types raise Value Error 'titlemustbeastring' with h5 py File fname mode 'r' as fid if title not in fid raise Value Error 'no"%s"datafound' % title if isinstance fid[title] h5 py Group if 'TITLE' not in fid[title] attrs raise Value Error 'no"%s"datafound' % title data triage read fid[title] slash slash return data
def xml findall xpath def xpath findall value validate ET iselement value return value findall xpath return transform xpath findall
def run server local addr local addr family local socket type local linger args remote addr remote addr family remote socket type queue class Threaded TCP Server Socket Server Threading Mix In Socket Server TCP Server object ' Threadedstreamingserverforforwarding'address family local addr familysocket type local socket typeallow reuse address Truedef init self handler class factory partial TCP Handler local linger args local linger args remote addr remote addr remote addr family remote addr family remote socket type remote socket type super Threaded TCP Server self init local addr handler class factory bind and activate True server Threaded TCP Server queue put [server socket family server server address] queue close server serve forever
def teardown log global logif log exception logging enabled log disable exception logging if log warnings logging enabled log disable warnings logging del logtry logging acquire Lock try logger Dict logging Logger manager logger Dictfor key in logger Dict keys if key 'astropy' or key startswith 'astropy ' del logger Dict[key]finally logging release Lock except Exception pass
def teardown log global logif log exception logging enabled log disable exception logging if log warnings logging enabled log disable warnings logging del logtry logging acquire Lock try logger Dict logging Logger manager logger Dictfor key in logger Dict keys if key 'astropy' or key startswith 'astropy ' del logger Dict[key]finally logging release Lock except Exception pass
def patharg path return path replace '\\' '\\\\\\'
def patharg path return path replace '\\' '\\\\\\'
def get cpu info try with open CPU INFO PATH as fp content fp read except IO Error return {}lines content split '\n' result []item Nonelines count len lines for index line in enumerate lines line line strip if not line if item and index lines count result append item continuesplit line split ' ' if len split 2 continuename split[ 0 ] replace ' DCTB ' '' strip replace '' ' ' value split[ 1 ] replace ' DCTB ' '' strip if name 'processor' item {}item[name] valuereturn result
def solve rational inequalities eqs result S Empty Setfor eqs in eqs if not eqs continueglobal intervals [ Interval S Negative Infinity S Infinity ]for numer denom rel in eqs numer intervals solve poly inequality numer * denom rel denom intervals solve poly inequality denom ' ' intervals []for numer interval in numer intervals for global interval in global intervals interval numer interval intersect global interval if interval is not S Empty Set intervals append interval global intervals intervalsintervals []for global interval in global intervals for denom interval in denom intervals global interval - denom intervalif global interval is not S Empty Set intervals append global interval global intervals intervalsif not global intervals breakfor interval in global intervals result result union interval return result
def get trail by arn cloudtrail client trail arn trails cloudtrail client describe trails ['trail List']for trail in trails if trail get ' Trail ARN' None trail arn return trailraise Value Error ' Atrailcouldnotbefoundfor%s' % trail arn
def get Node template context Context name 'subject' for node in template if isinstance node Block Node and node name name return node render context elif isinstance node Extends Node return get Node node nodelist context name raise Exception " Node'%s'couldnotbefoundintemplate " % name
def unhandled mock read filename raise Command Execution Error ' Unhandledmockreadfor{ 0 }' format filename
def unhandled mock read filename raise Command Execution Error ' Unhandledmockreadfor{ 0 }' format filename
def unhandled mock read filename raise Command Execution Error ' Unhandledmockreadfor{ 0 }' format filename
def unhandled mock read filename raise Command Execution Error ' Unhandledmockreadfor{ 0 }' format filename
def sort fields elem field orders order dicts dict for field order in field orders items order dicts[field] order key dict for i subfield in enumerate order order key[subfield] i sort fields elem order dicts
def list To Phrase things final Delimiter delimiter ' ' if not isinstance things list tuple raise Type Error ' Thingsmustbealistoratuple' if not things return ''if len things 1 return str things[ 0 ] if len things 2 return '%s%s%s' % str things[ 0 ] final Delimiter str things[ 1 ] else str Things []for thing in things str Things append str thing return '%s%s%s%s' % delimiter join str Things[ -1 ] delimiter final Delimiter str Things[ -1 ]
def list To Phrase things final Delimiter delimiter ' ' if not isinstance things list tuple raise Type Error ' Thingsmustbealistoratuple' if not things return ''if len things 1 return str things[ 0 ] if len things 2 return '%s%s%s' % str things[ 0 ] final Delimiter str things[ 1 ] else str Things []for thing in things str Things append str thing return '%s%s%s%s' % delimiter join str Things[ -1 ] delimiter final Delimiter str Things[ -1 ]
def decode args args stdin encoding return [ arg decode stdin encoding if type arg bytes else arg for arg in args]
def decode args args stdin encoding return [ arg decode stdin encoding if type arg bytes else arg for arg in args]
def list targets Rule region None key None keyid None profile None try conn get conn region region key key keyid keyid profile profile targets conn list targets by rule Rule Rule ret []if targets and ' Targets' in targets keys ' Id' ' Arn' ' Input' ' Input Path' for target in targets get ' Targets' ret append dict [ k target get k for k in keys if k in target ] return {'targets' ret}else return {'targets' None}except Client Error as e err utils ['boto 3 get error'] e if e response get ' Error' {} get ' Code' ' Rule Not Found Exception' return {'error' ' Rule{ 0 }notfound' format Rule }return {'error' utils ['boto 3 get error'] e }
def E nl dirac n l spin up True Z 1 c Float '137 035999037 ' if not l > 0 raise Value Error "'l'mustbepositiveorzero" if not n > l raise Value Error "'n'mustbegreaterthan'l'" if l 0 and spin up is False raise Value Error ' Spinmustbeupforl 0 ' if spin up skappa - l - 1 else skappa - l c S c beta sqrt skappa ** 2 - Z ** 2 / c ** 2 return c ** 2 / sqrt 1 + Z ** 2 / n + skappa + beta ** 2 / c ** 2 - c ** 2
def direct get container node part account container marker None limit None prefix None delimiter None conn timeout 5 response timeout 15 end marker None reverse None path '/%s/%s' % account container return get direct account container path ' Container' node part marker marker limit limit prefix prefix delimiter delimiter end marker end marker reverse reverse conn timeout conn timeout response timeout response timeout
def Wake Stuck Flow session id session id rdfvalue Session ID session id woken 0checked pending Falsewith queue manager Queue Manager as manager for request responses in manager Fetch Requests And Responses session id if not checked pending task manager Query request client id task id 'task %s' % request request task id if task returnchecked pending Trueif not responses or responses[ -1 ] type rdf flows Grr Message Type STATUS manager Queue Client Message request request woken + 1if responses and responses[ -1 ] type rdf flows Grr Message Type STATUS manager Queue Notification session id return woken
def get path object Type user None ret {' Path' path 'AC Ls' []}sid Ret get User Sid user if path and object Type dc dacl Constants object Type Bit dc get Object Type Bit object Type path dc process Path path object Type Bit tdacl get dacl path object Type Bit if tdacl for counter in range 0 tdacl Get Ace Count t Ace tdacl Get Ace counter if not sid Ret['sid'] or t Ace[ 2 ] sid Ret['sid'] ret['AC Ls'] append ace to text t Ace object Type Bit return ret
def association proxy target collection attr **kw return Association Proxy target collection attr **kw
def association proxy target collection attr **kw return Association Proxy target collection attr **kw
def association proxy target collection attr **kw return Association Proxy target collection attr **kw
def iplot figure or data show link True link text ' Exporttoplot ly' validate True image None filename 'plot image' image width 800 image height 600 if not PLOTLY OFFLINE INITIALIZED raise Plotly Error '\n' join [' Plotly Offlinemodehasnotbeeninitializedinthisnotebook Run ' '' 'importplotly' 'plotly offline init notebook mode #runatthestartofeveryipythonnotebook'] if not ipython raise Import Error '`iplot`canonlyruninsidean I Python Notebook ' config {}config['show Link'] show linkconfig['link Text'] link text plot html plotdivid width height plot html figure or data config validate '100 %' 525 True ipython display display ipython display HTML plot html if image if image not in IMAGE FORMATS raise Value Error ' Theimageparametermustbeoneofthefollowing {}' format IMAGE FORMATS script get image download script 'iplot' format format image width image width height image height filename filename plot id plotdivid time sleep 1 ipython display display ipython display HTML script
def base 64 image src return base 64 b64 encode get file src
def fit mps dist data x0 None xsorted np sort data if x0 is None x0 getstartparams dist xsorted args xsorted dist print x0 return optimize fmin logmps x0 args args
@documented contextmanagerdef setenv variables if callable variables variables variables clean revert variables pop 'clean revert' False previous {}new []for key value in variables iteritems if key in state env previous[key] state env[key]else new append key state env[key] valuetry yield finally if clean revert for key value in variables iteritems if key in state env and value state env[key] if key in previous state env[key] previous[key]else del state env[key]else state env update previous for key in new del state env[key]
def exp server version return odoo release version
@monkeypatch method pdb Pdb ' Pdb' def user return self frame return value if self wait for mainpyfile if self mainpyfile self canonic frame f code co filename or frame f lineno < 0 returnself wait for mainpyfile 0self old Pdb user return frame return value
@monkeypatch method pdb Pdb ' Pdb' def user return self frame return value if self wait for mainpyfile if self mainpyfile self canonic frame f code co filename or frame f lineno < 0 returnself wait for mainpyfile 0self old Pdb user return frame return value
def main parser init parser args parser parse args level logging INF Oif args debug level logging DEBU Glogging basic Config format '% asctime s% levelname s% filename s % lineno s% message s' level level logging info ' Loggingstarted' message ' Backingup'if args source code message + 'sourceand'message + 'datafor {0 }' format args app id logging info message zk connection locations appscale info get zk locations string zookeeper zk ZK Transaction host zk connection locations db info appscale info get db info table db info[' table']skip list args skipif not skip list skip list []logging info ' Willskipthefollowingkinds {0 }' format sorted skip list ds backup Datastore Backup args app id zookeeper table source code args source code skip list sorted skip list try ds backup run finally zookeeper close
def main parser init parser args parser parse args level logging INF Oif args debug level logging DEBU Glogging basic Config format '% asctime s% levelname s% filename s % lineno s% message s' level level logging info ' Loggingstarted' message ' Backingup'if args source code message + 'sourceand'message + 'datafor {0 }' format args app id logging info message zk connection locations appscale info get zk locations string zookeeper zk ZK Transaction host zk connection locations db info appscale info get db info table db info[' table']skip list args skipif not skip list skip list []logging info ' Willskipthefollowingkinds {0 }' format sorted skip list ds backup Datastore Backup args app id zookeeper table source code args source code skip list sorted skip list try ds backup run finally zookeeper close
@register tagdef full tree for model parser token bits token contents split if len bits 4 raise template Template Syntax Error u'%stagrequiresthreearguments' % bits[ 0 ] if bits[ 2 ] u'as' raise template Template Syntax Error u"secondargumentto%stagmustbe'as'" % bits[ 0 ] return Full Tree For Model Node bits[ 1 ] bits[ 3 ]
@register tagdef full tree for model parser token bits token contents split if len bits 4 raise template Template Syntax Error u'%stagrequiresthreearguments' % bits[ 0 ] if bits[ 2 ] u'as' raise template Template Syntax Error u"secondargumentto%stagmustbe'as'" % bits[ 0 ] return Full Tree For Model Node bits[ 1 ] bits[ 3 ]
def acls from account info info acl parse acl version 2 data info get 'sysmeta' {} get 'core-access-control' if acl is None return Noneadmin members acl get 'admin' [] readwrite members acl get 'read-write' [] readonly members acl get 'read-only' [] if not any admin members readwrite members readonly members return Nonereturn {'admin' admin members 'read-write' readwrite members 'read-only' readonly members}
def max partition table schema 'default' field None filter None metastore conn id 'metastore default' from airflow hooks hive hooks import Hive Metastore Hookif ' ' in table schema table table split ' ' hh Hive Metastore Hook metastore conn id metastore conn id return hh max partition schema schema table name table field field filter filter
def tmin a lowerlimit None axis 0 inclusive True nan policy 'propagate' a axis chk asarray a axis am mask to limits a lowerlimit None inclusive False contains nan nan policy contains nan am nan policy if contains nan and nan policy 'omit' am ma masked invalid am res ma minimum reduce am axis dataif res ndim 0 return res[ ]return res
def tmin a lowerlimit None axis 0 inclusive True nan policy 'propagate' a axis chk asarray a axis am mask to limits a lowerlimit None inclusive False contains nan nan policy contains nan am nan policy if contains nan and nan policy 'omit' am ma masked invalid am res ma minimum reduce am axis dataif res ndim 0 return res[ ]return res
def create Dump Dir if not conf dump Table and not conf dump All and not conf search returnconf dump Path paths SQLMAP DUMP PATH % conf hostname if not os path isdir conf dump Path try os makedirs conf dump Path 493 except OS Error as ex temp Dir tempfile mkdtemp prefix 'sqlmapdump' warn Msg 'unabletocreatedumpdirectory'warn Msg + "'%s' %s " % conf dump Path get Unicode ex warn Msg + " Usingtemporarydirectory'%s'instead" % temp Dir logger warn warn Msg conf dump Path temp Dir
def build m3 u filename basename basename re sub '[\\s /\\\\\'\\"]' ' ' basename date datetime datetime now strftime '%Y%m%d % Hh%M' path normpath os path join config['importfeeds']['dir'] as filename date + ' ' + basename + ' m3 u' return path
def require permission code name content type from django contrib auth models import Permissioncriteria {'codename' code 'name' name 'content type' content type}permission Permission objects get or create **criteria [0 ]return permission
def split w dyad if 1 in w dyad return bit Fraction 1 1 child 1 [ Fraction 0 ] * len w dyad child 2 list 2 * f for f in w dyad while True for ind val in enumerate child 2 if val > bit child 2 [ind] - bitchild 1 [ind] + bitif sum child 1 1 return tuple child 1 tuple child 2 bit / 2raise Value Error ' Somethingwrongwithinput{}' format w dyad
def personas reviewer required f @login required@functools wraps f def wrapper request *args **kw if view on get request or acl check personas reviewer request return f request *args **kw raise Permission Deniedreturn wrapper
@context quietfunc@with devicedef makedirs path if path '/' makedirs os path dirname path mkdir path
@memoizedef version version salt ['pkg version'] 'kapacitor' if not version version str salt ['config option'] 'kapacitor version' 'latest' return version
def get type type if isinstance type list type tuple type for k v in TYPE MAP iteritems if k type return vraise Key Error ' Unknowntype%r' % type
def get email recipients sender u'' msg u'' subject u'[ No Subject]' text content None footer None print html None formatted None attachments None content None reply to None cc [] email account None expose recipients None content content or msg emailobj E Mail sender recipients subject reply to reply to cc cc email account email account expose recipients expose recipients if not content strip startswith u'<' content markdown content emailobj set html content text content footer footer print html print html formatted formatted if isinstance attachments dict attachments [attachments]for attach in attachments or [] emailobj add attachment **attach return emailobj
@register filterdef sort version aware versions return sorted versions key lambda version comparable version version verbose name reverse True
@register filterdef sort version aware versions return sorted versions key lambda version comparable version version verbose name reverse True
@register filterdef sort version aware versions return sorted versions key lambda version comparable version version verbose name reverse True
def require map reduce conn try import spidermonkeyexcept Base Exception try from ming import mimif hasattr conn 'conn' and isinstance conn conn mim Connection import testtoolsraise testtools testcase Test Skipped 'requiresspidermonkey' except Import Error import testtoolsraise testtools testcase Test Skipped 'requiresmim'
def make gax publisher api credentials None host None if credentials is None channel insecure channel host else channel make secure channel credentials DEFAULT USER AGENT Publisher Client SERVICE ADDRESS return Publisher Client channel channel
def get unsupported lower protocol if Version CASSANDRA VERSION > Version '3 0' return 2else return None
def load full proto timestamp java application False full key make key timestamp + config FULL SUFFIX if java application full key '"' + full key + '"' full binary memcache get full key namespace config KEY NAMESPACE if full binary is None logging debug ' Nofullrecordat%s' full key return Nonetry full Stats Proto full binary except Exception as err logging warn ' Badfullrecordat%s %s' full key err return Noneif full start timestamp milliseconds int timestamp * 1000 logging debug ' Hashcollision recordat%dhastimestamp%d' int timestamp * 1000 full start timestamp milliseconds return Nonereturn full
def get vsan eligible disks service instance host host names ret {}for host name in host names host ref get host ref service instance host host name host name vsan system host ref config Manager vsan Systemif vsan system is None msg "VSAN System Config Managerisunsetforhost'{ 0 }' VSA Nconfigurationcannotbechangedwithoutaconfigured VSAN System " format host name log debug msg ret update {host name {' Error' msg}} continuesuitable disks []query vsan system Query Disks For Vsan for item in query if item state 'eligible' suitable disks append item if not suitable disks msg " Thehost'{ 0 }'doesnothaveany VSA Neligibledisks " format host name log warning msg ret update {host name {' Eligible' msg}} continuedisks get host ssds host ref + get host non ssds host ref matching []for disk in disks for suitable disk in suitable disks if disk canonical Name suitable disk disk canonical Name matching append disk ret update {host name {' Eligible' matching}} return ret
def get vsan eligible disks service instance host host names ret {}for host name in host names host ref get host ref service instance host host name host name vsan system host ref config Manager vsan Systemif vsan system is None msg "VSAN System Config Managerisunsetforhost'{ 0 }' VSA Nconfigurationcannotbechangedwithoutaconfigured VSAN System " format host name log debug msg ret update {host name {' Error' msg}} continuesuitable disks []query vsan system Query Disks For Vsan for item in query if item state 'eligible' suitable disks append item if not suitable disks msg " Thehost'{ 0 }'doesnothaveany VSA Neligibledisks " format host name log warning msg ret update {host name {' Eligible' msg}} continuedisks get host ssds host ref + get host non ssds host ref matching []for disk in disks for suitable disk in suitable disks if disk canonical Name suitable disk disk canonical Name matching append disk ret update {host name {' Eligible' matching}} return ret
def get vsan eligible disks service instance host host names ret {}for host name in host names host ref get host ref service instance host host name host name vsan system host ref config Manager vsan Systemif vsan system is None msg "VSAN System Config Managerisunsetforhost'{ 0 }' VSA Nconfigurationcannotbechangedwithoutaconfigured VSAN System " format host name log debug msg ret update {host name {' Error' msg}} continuesuitable disks []query vsan system Query Disks For Vsan for item in query if item state 'eligible' suitable disks append item if not suitable disks msg " Thehost'{ 0 }'doesnothaveany VSA Neligibledisks " format host name log warning msg ret update {host name {' Eligible' msg}} continuedisks get host ssds host ref + get host non ssds host ref matching []for disk in disks for suitable disk in suitable disks if disk canonical Name suitable disk disk canonical Name matching append disk ret update {host name {' Eligible' matching}} return ret
def process key evt key evt Get Key Code if key in KEYMAP return KEYMAP[key] '' if 97 < key < 122 key - 32 if key > 32 and key < 127 return keys Key chr key chr key else return None None
def Is Bucket name return Object Store Has Instance name
def filter capabilities by languages bears languages languages set language lower for language in languages language bears capabilities {language set set for language in languages}for section bears in bears values for bear in section bears bear language {language lower for language in bear LANGUAGES} {'all'} & languages language bear language pop if bear language else '' capabilities language bears capabilities[language] if language else tuple language bears capabilities update {language capabilities[ 0 ] bear can detect capabilities[ 1 ] bear CAN FIX } if language else {} return language bears capabilities
def bench optimizer optimizer param grid return sum apply optimizer optimizer func a b for func a b in param grid
def retrieve contributions calendar username base url base url base url + 'users/' + username try url base url + '/contributions' page urlopen url except HTTP Error URL Error as e print ' Therewasaproblemfetchingdatafrom{ 0 }' format url print eraise System Exitreturn page read decode 'utf- 8 '
def fix case name for s r in LOCALE NORMALIZATION items name name replace s r return name
def fix case name for s r in LOCALE NORMALIZATION items name name replace s r return name
@contextmanagerdef start worker process app concurrency 1 pool u'solo' loglevel WORKER LOGLEVEL logfile None **kwargs from celery apps multi import Cluster Nodeapp set current cluster Cluster [ Node u'testworker 1 @%h' ] cluster start yield cluster stopwait
def verify structure memlen itemsize ndim shape strides offset if offset % itemsize return Falseif offset < 0 or offset + itemsize > memlen return Falseif any v % itemsize for v in strides return Falseif ndim < 0 return ndim 0 and not shape and not strides if 0 in shape return Trueimin sum strides[j] * shape[j] - 1 for j in range ndim if strides[j] < 0 imax sum strides[j] * shape[j] - 1 for j in range ndim if strides[j] > 0 return 0 < offset + imin and offset + imax + itemsize < memlen
@register filterdef follows from user to user try relationship Relationship objects get relationship from user to user if relationship and not relationship is blocked return Trueelse return Falseexcept Attribute Error return False
@register filterdef follows from user to user try relationship Relationship objects get relationship from user to user if relationship and not relationship is blocked return Trueelse return Falseexcept Attribute Error return False
def skip nonwhitespace data pos while pos < len data if data[pos] isspace breakpos + 1return pos
def skip nonwhitespace data pos while pos < len data if data[pos] isspace breakpos + 1return pos
def make fastq rec header seq qual offset 33 result []if header startswith '>' header header[ 1 ]result append '@' + header result append seq result append '+' + header result append '' join map chr [ 33 + i for i in qual] return '\n' join result
def get provider vm None if vm is None provider active provider name or 'ec 2 ' else provider vm get 'provider' 'ec 2 ' if ' ' in provider prov comps provider split ' ' provider prov comps[ 0 ]return provider
def Set Must Split On First Leaf node def Find First Leaf node if isinstance node pytree Leaf return nodereturn Find First Leaf node children[ 0 ] pytree utils Set Node Annotation Find First Leaf node pytree utils Annotation MUST SPLIT True
def b36 number if not number or number < 0 return B36 ALPHABET[ 0 ]base 36 []while number number i divmod number 36 base 36 append B36 ALPHABET[i] return '' join reversed base 36
def main if len sys argv > 1 write Output '' join sys argv[ 1 ] else settings start Main Loop From Constructor get New Repository
def read pyc filename data read file filename 'rb' if not is gae and data[ 4] imp get magic raise System Error 'compiledcodeisincompatible' return marshal loads data[marshal header size ]
def get cms block link block page return u'//{}/{}/{}' format settings CMS BASE page block location
def setup test view cursor connection cursor cursor execute 'DROPVIEWIFEXIST Stko test view 2' cursor execute get create test view sql
def setup test view cursor connection cursor cursor execute 'DROPVIEWIFEXIST Stko test view 2' cursor execute get create test view sql
def setup test view cursor connection cursor cursor execute 'DROPVIEWIFEXIST Stko test view 2' cursor execute get create test view sql
def skel setup environment inventory for key value in environment iteritems if key 'version' continuefor key value in value iteritems if key not in inventory logger debug ' Key%saddedtoinventory' key inventory[ key] {}if key endswith 'container' if 'hosts' not in inventory[ key] inventory[ key]['hosts'] []else if 'children' not in inventory[ key] inventory[ key]['children'] []if 'hosts' not in inventory[ key] inventory[ key]['hosts'] []if 'belongs to' in value for assignment in value['belongs to'] if assignment not in inventory logger debug ' Createdgroup%s' assignment inventory[assignment] {}if 'children' not in inventory[assignment] inventory[assignment]['children'] []if 'hosts' not in inventory[assignment] inventory[assignment]['hosts'] []
def get weight name backend socket '/var/run/haproxy sock' ha conn get conn socket ha cmd haproxy cmds get Weight server name backend backend return ha conn send Cmd ha cmd
def get weight name backend socket '/var/run/haproxy sock' ha conn get conn socket ha cmd haproxy cmds get Weight server name backend backend return ha conn send Cmd ha cmd
@print durationdef mthread run urls reqs multithread request urls resps [req resp for req in reqs]
def fastfn outs mode None model None model modelcontext model return model fastfn outs mode
def graycode subsets gray code set for bitstring in list Gray Code len gray code set generate gray yield get subset from bitstring gray code set bitstring
def correlation sum indicators embedding dim if not indicators ndim 2 raise Value Error ' Indicatorsmustbeamatrix' if not indicators shape[ 0 ] indicators shape[ 1 ] raise Value Error ' Indicatormatrixmustbesymmetric square ' if embedding dim 1 indicators joint indicatorselse corrsum indicators correlation sum indicators embedding dim - 1 indicators joint indicators[ 1 1 ] * indicators[ -1 -1 ] nobs len indicators joint corrsum np mean indicators joint[np triu indices nobs 1 ] return corrsum indicators joint
@commands u'endmeeting' @example u' endmeeting' def endmeeting bot trigger if not ismeetingrunning trigger sender bot say u" Can'tdothat startmeetingfirst" returnif not ischair trigger nick trigger sender bot say u' Onlymeetingheadorchairscandothat' returnmeeting length time time - meetings dict[trigger sender][u'start'] bot say u'\x 02 Meetingended \x 0 ftotalmeetinglength%dseconds' % meeting length log HTML end trigger sender htmllog url meeting log baseurl + quote trigger sender + u'/' + figure logfile name trigger sender + u' html' logplain u' Meetingendedby%s totalmeetinglength%dseconds' % trigger nick meeting length trigger sender bot say u' Meetingminutes ' + htmllog url meetings dict[trigger sender] Ddict dict del meeting actions[trigger sender]
def create test cache folder if not os path isdir sickbeard CACHE DIR os mkdir sickbeard CACHE DIR
def get blob key return Blob Info get blob key
def transpose axes data axes asaxes 'CTZYX' for ax in axes if ax not in asaxes raise Value Error 'unknownaxis%s' % ax shape data shapefor ax in reversed asaxes if ax not in axes axes ax + axes shape 1 + shape data data reshape shape data data transpose [axes index ax for ax in asaxes] return data
def transpose axes data axes asaxes 'CTZYX' for ax in axes if ax not in asaxes raise Value Error 'unknownaxis%s' % ax shape data shapefor ax in reversed asaxes if ax not in axes axes ax + axes shape 1 + shape data data reshape shape data data transpose [axes index ax for ax in asaxes] return data
def transpose axes data axes asaxes 'CTZYX' for ax in axes if ax not in asaxes raise Value Error 'unknownaxis%s' % ax shape data shapefor ax in reversed asaxes if ax not in axes axes ax + axes shape 1 + shape data data reshape shape data data transpose [axes index ax for ax in asaxes] return data
@require authorized admin@dynamic settingsdef edit facility user request ds facility user id user being edited get object or 404 Facility User id facility user id or None title ' Edituser% username s' % {'username' user being edited username} return facility user request user being edited user being edited is teacher user being edited is teacher title title
def filelines source file source file seek 0 2 while True line source file readline if not line sleep 0 1 continue yield line
def get config drive type if CONF config drive format 'iso 9660 ' config drive type 'cdrom'elif CONF config drive format 'vfat' config drive type 'disk'else raise exception Config Drive Unknown Format format CONF config drive format return config drive type
def get scanner hass config scanner Fritz Box Scanner config[DOMAIN] return scanner if scanner success init else None
def get scanner hass config scanner Fritz Box Scanner config[DOMAIN] return scanner if scanner success init else None
def get displayable collection summary dicts matching ids collection ids collection summaries collection services get collection summaries matching ids collection ids return get displayable collection summary dicts collection summaries
def get displayable collection summary dicts matching ids collection ids collection summaries collection services get collection summaries matching ids collection ids return get displayable collection summary dicts collection summaries
def frender path **keywords return Template open path read filename path **keywords
def kill process proc p1 group psutil Process proc pid child pids p1 group get children recursive True for child pid in child pids os kill child pid pid signal SIGKILL
def poisson 2 d N dtype 'd' format None if N 1 diags asarray [[ 4 ]] dtype dtype return dia matrix diags [0 ] shape 1 1 asformat format offsets array [0 - N N -1 1] diags empty 5 N ** 2 dtype dtype diags[ 0 ] 4diags[ 1 ] -1 diags[ 3 N - 1 N] 0diags[ 4 N N] 0return dia matrix diags offsets shape N ** 2 N ** 2 asformat format
def assure image fnc @wraps fnc def wrapped self img *args **kwargs if not isinstance img Image img self manager get img return fnc self img *args **kwargs return wrapped
def assure image fnc @wraps fnc def wrapped self img *args **kwargs if not isinstance img Image img self manager get img return fnc self img *args **kwargs return wrapped
def romberg diff b c k tmp 4 0 ** k return tmp * c - b / tmp - 1 0
def connect to cloud monitoring region None return create client ep name 'monitor' region region
def remove check module check id consul api get consul api module if check id in consul api agent checks consul api agent check deregister check id module exit json changed True id check id module exit json changed False id check id
def pmap model klass record {u'category' u'map' u'fields' {u'key' sorted fqpn cls for cls in klass checked key types u'value' sorted fqpn cls for cls in klass checked value types }}further classes set for cls in klass checked key types + klass checked value types further classes add cls return record further classes
@dodef upload packages scratch directory target bucket version build server top level distribution names available distributions flocker source path top level for distribution name in distribution names distribution DISTRIBUTION NAME MAP[distribution name]architecture distribution native package architecture yield update repo package directory scratch directory child '{}-{}-{}' format distribution name distribution version architecture target bucket target bucket target key os path join distribution name + get package key suffix version distribution version architecture source repo os path join build server 'results/omnibus' version '{}-{}' format distribution name distribution version packages FLOCKER PACKAGES flocker version version distribution distribution
@dodef upload packages scratch directory target bucket version build server top level distribution names available distributions flocker source path top level for distribution name in distribution names distribution DISTRIBUTION NAME MAP[distribution name]architecture distribution native package architecture yield update repo package directory scratch directory child '{}-{}-{}' format distribution name distribution version architecture target bucket target bucket target key os path join distribution name + get package key suffix version distribution version architecture source repo os path join build server 'results/omnibus' version '{}-{}' format distribution name distribution version packages FLOCKER PACKAGES flocker version version distribution distribution
def choose package file type file name if not file type return Nonefile type file type lower file name file name lower if 'apk' in file name return 'apk'elif 'zip' in file type return 'apk'else return 'apk'
def xml add items data try xml '' join [xml item item for item in data[config ITEMS]] except xml xml dict data return xml
def get default mrcluster global MR CACH Eglobal MR NAME CACH Etry all mrclusters return MR CACHE get MR NAME CACHE except Key Error candidates all mrclusters if candidates return candidates values [0 ]return None
def getipbyhost hostname return socket gethostbyname hostname
def bzr wc target exists no update test 'bzr wc target exists no update'wt '%s-test-%s' % DIR test puts magenta ' Executingtest %s' % test from fabric api import runfrom fabtools files import is dirfrom fabtools import requireassert not is dir wt require bazaar working copy REMOTE URL wt version '2 ' require bazaar working copy REMOTE URL wt update False assert wc exists wt assert run 'bzrrevno%s' % wt '2 '
def enqueue flag exploration email task exploration id report text reporter id payload {'exploration id' exploration id 'report text' report text 'reporter id' reporter id}taskqueue services enqueue task feconf TASK URL FLAG EXPLORATION EMAILS payload 0
def ae load token key import gdata alt app enginekey name '' join 'gd auth token' token key token string gdata alt app engine get token key name if token string is not None return token from blob token string else return None
def get remote branch pass
def download dataset dataset dir for filename in [ TRAIN DATA FILENAME TRAIN LABELS FILENAME TEST DATA FILENAME TEST LABELS FILENAME] filepath os path join dataset dir filename if not os path exists filepath print ' Downloadingfile%s ' % filename def progress count block size total size sys stdout write '\r>> Downloading% 1f%%' % float count * block size / float total size * 100 0 sys stdout flush filepath urllib request urlretrieve DATA URL + filename filepath progress print with tf gfile G File filepath as f size f Size print ' Successfullydownloaded' filename size 'bytes '
def require permission set user directory positive permissions None negative permissions None from pootle app models permissions import Permission Setcriteria {'user' user 'directory' directory}permission set Permission Set objects get or create **criteria [0 ]if positive permissions is not None permission set positive permissions set positive permissions if negative permissions is not None permission set negative permissions set negative permissions permission set save return permission set
def wordlist to graph file wordlist dbfile strip True from whoosh filedb structfile import Struct Fileg Graph Corrector from word list wordlist strip strip if isinstance dbfile string type dbfile open dbfile 'wb' if not isinstance dbfile Struct File dbfile Struct File dbfile g to file dbfile
def remove Duplicates variable old List variable split os pathsep new List []for i in old List if i not in new List new List append i new Variable os pathsep join new List return new Variable
def is reducible circuit nqubits begin end current circuit for ndx in reversed range begin end next gate circuit[ndx]current circuit next gate + current circuit if is scalar matrix current circuit nqubits False return Truereturn False
def avg and total iterable items 0total 0 0for item in iterable total + itemitems + 1return total / items total
def axis 0 safe slice X mask len mask if len mask 0 return X[safe mask X mask ]return np zeros shape 0 X shape[ 1 ]
def axis 0 safe slice X mask len mask if len mask 0 return X[safe mask X mask ]return np zeros shape 0 X shape[ 1 ]
def setup platform hass config add devices discovery info None name config get CONF NAME remote config {'name' ' Home Assistant' 'description' config get CONF NAME 'id' 'ha component soundtouch' 'port' config get CONF PORT 'host' config get CONF HOST }soundtouch device Sound Touch Device name remote config DEVICES append soundtouch device add devices [soundtouch device] descriptions load yaml config file path join path dirname file 'services yaml' hass services register DOMAIN SERVICE PLAY EVERYWHERE play everywhere service descriptions get SERVICE PLAY EVERYWHERE schema SOUNDTOUCH PLAY EVERYWHERE hass services register DOMAIN SERVICE CREATE ZONE create zone service descriptions get SERVICE CREATE ZONE schema SOUNDTOUCH CREATE ZONE SCHEMA hass services register DOMAIN SERVICE REMOVE ZONE SLAVE remove zone slave descriptions get SERVICE REMOVE ZONE SLAVE schema SOUNDTOUCH REMOVE ZONE SCHEMA hass services register DOMAIN SERVICE ADD ZONE SLAVE add zone slave descriptions get SERVICE ADD ZONE SLAVE schema SOUNDTOUCH ADD ZONE SCHEMA
def test breadcrumb c Localizing Client response c get reverse 'search' doc pq response content href doc ' breadcrumbsa' [0 ]eq '/' href attrib['href'][ 0 ]
def get flag url comment if get comment app name DEFAULT COMMENTS APP and hasattr get comment app 'get flag url' return get comment app get flag url comment else return urlresolvers reverse 'django contrib comments views moderation flag' args comment id
@taskdef python code show True setup u"importos os environ['DJANGO SETTINGS MODULE'] '%s settings' importdjango django setup " % env proj app full code u'python-c"%s%s"' % setup code replace u'`' u'\\\\`' with project if show print command code result run full code show False return result
def test install from local directory with symlinks to directories script data to install data packages join 'symlinks' result script pip 'install' to install expect error False pkg folder script site packages / 'symlinks' egg info folder script site packages / 'symlinks- 0 1 dev 0 -py%s egg-info' % pyversion assert pkg folder in result files created str result stdout assert egg info folder in result files created str result
def test install from local directory with symlinks to directories script data to install data packages join 'symlinks' result script pip 'install' to install expect error False pkg folder script site packages / 'symlinks' egg info folder script site packages / 'symlinks- 0 1 dev 0 -py%s egg-info' % pyversion assert pkg folder in result files created str result stdout assert egg info folder in result files created str result
def parent dir action parent fn action cmd action parent cmds Open Parent Dir fn hotkeys SECONDARY ACTION action set Icon icons folder return action
def mountroot for test test case mountroot File Path test case mktemp mountroot makedirs test case add Cleanup umount all mountroot return mountroot
def mountroot for test test case mountroot File Path test case mktemp mountroot makedirs test case add Cleanup umount all mountroot return mountroot
def mountroot for test test case mountroot File Path test case mktemp mountroot makedirs test case add Cleanup umount all mountroot return mountroot
def limit validation results validation messages validation['messages']lim settings VALIDATOR MESSAGE LIMI Tif lim and len messages > lim TYPES {'error' 0 'warning' 2 'notice' 3}def message key message if message get 'signing severity' return 1else return TYPES get message get 'type' messages sort key message key leftover count len messages - lim del messages[lim ]if validation['errors'] msg type 'error'elif validation['warnings'] msg type 'warning'else msg type 'notice'compat type msg type if any msg get 'compatibility type' for msg in messages else None messages insert 0 {'tier' 1 'type' msg type 'id' ['validation' 'messages' 'truncated'] 'message' " Validationgeneratedtoomanyerrors/warningsso%smessagesweretruncated Afteraddressingthevisiblemessages you'llbeabletoseetheothers " % leftover count 'description' [] 'compatibility type' compat type}
def get Kex kex Algorithm if kex Algorithm not in kex Algorithms raise error Conch Error ' Unsupportedkeyexchangealgorithm %s' % kex Algorithm return kex Algorithms[kex Algorithm]
def poly collection 2d to 3d col zs 0 zdir u'z' segments 3d codes paths to 3d segments with codes col get paths zs zdir col class Poly 3 D Collectioncol set verts and codes segments 3d codes col set 3d properties
def get imports project pydefined pymodule pydefined get module module module imports Module Imports project pymodule if pymodule pydefined return [stmt import info for stmt in module imports]return module get used imports pydefined
def get imports project pydefined pymodule pydefined get module module module imports Module Imports project pymodule if pymodule pydefined return [stmt import info for stmt in module imports]return module get used imports pydefined
def ndependents dependencies dependents result dict num needed dict k len v for k v in dependents items current set k for k v in num needed items if v 0 while current key current pop result[key] 1 + sum result[parent] for parent in dependents[key] for child in dependencies[key] num needed[child] - 1if num needed[child] 0 current add child return result
def ndependents dependencies dependents result dict num needed dict k len v for k v in dependents items current set k for k v in num needed items if v 0 while current key current pop result[key] 1 + sum result[parent] for parent in dependents[key] for child in dependencies[key] num needed[child] - 1if num needed[child] 0 current add child return result
def ndependents dependencies dependents result dict num needed dict k len v for k v in dependents items current set k for k v in num needed items if v 0 while current key current pop result[key] 1 + sum result[parent] for parent in dependents[key] for child in dependencies[key] num needed[child] - 1if num needed[child] 0 current add child return result
def parse query string settings query kwargs settings None def list from query string s return s split ' ' parsers {'int' int 'float' float 'bool' bool 'list str' lambda s list from query string s 'list escaped' lambda s [urllib 2 unquote e for e in list from query string s ] 'list int' lambda s [int i for i in list from query string s ] }settings settings or {} for key in settings if key in query kwargs query value query kwargs[key]needed type settings[key]if needed type 'str' try query kwargs[key] parsers[needed type] query value except Key Error Value Error del query kwargs[key]return query kwargs
def parse query string settings query kwargs settings None def list from query string s return s split ' ' parsers {'int' int 'float' float 'bool' bool 'list str' lambda s list from query string s 'list escaped' lambda s [urllib 2 unquote e for e in list from query string s ] 'list int' lambda s [int i for i in list from query string s ] }settings settings or {} for key in settings if key in query kwargs query value query kwargs[key]needed type settings[key]if needed type 'str' try query kwargs[key] parsers[needed type] query value except Key Error Value Error del query kwargs[key]return query kwargs
def main arguments None if arguments is None arguments sys argv[ 1 ]server parameters get server parameters arguments config get config server parameters config path configure log config server parameters log level upper importer get importer config validate config config server parameters with get context server parameters config importer as context application get application context run server application context try logging debug 'thumborrunningat%s %d' % context server ip context server port tornado ioloop IO Loop instance start except Keyboard Interrupt sys stdout write '\n' sys stdout write '--thumborclosedbyuserinterruption--\n'
def get user email profile 'splunk' **kwargs user map list users profile user found email lower in user map keys if not kwargs get 'user details' False and user found return Trueelif kwargs get 'user details' False and user found user user map[email lower ]response {}for field in ['default App' 'realname' 'name' 'email'] response[field] user[field]response['roles'] []for role in user role entities response['roles'] append role name return responsereturn False
def get dims x if isinstance x float or isinstance x int return []elif isinstance x tf Tensor or isinstance x tf Variable return x get shape as list elif isinstance x np ndarray return list x shape elif isinstance x Random Variable return x get batch shape as list else raise Not Implemented Error
def subtest nocleanup function def wrapped self *args **kwds self cleanup Falseself decored result function self *args **kwds return resultwrapped func name function func namereturn wrapped
def test atomic download failure pd seg pd create seg e Exception ' Anything' with pytest raises Exception as err with pd download seg raise eassert err value is e assert not pd is running seg assert not pd contains seg
def test atomic download failure pd seg pd create seg e Exception ' Anything' with pytest raises Exception as err with pd download seg raise eassert err value is e assert not pd is running seg assert not pd contains seg
def det a shape 1 a shape[ 0 ] a shape[ 1 ] batched a reshape Reshape shape a batched det Batch Det batched a return reshape Reshape batched det
def tree decode buf ofs 0while ofs < len buf z buf find '\x 00 ' ofs assert z > ofs spl buf[ofs z] split '' 1 assert len spl 2 mode name splsha buf[ z + 1 z + 1 + 20 ]ofs z + 1 + 20 yield int mode 8 name sha
def add parser help p p add argument u'-h' u'--help' action argparse Help Action help u' Showthishelpmessageandexit '
def add parser help p p add argument u'-h' u'--help' action argparse Help Action help u' Showthishelpmessageandexit '
def define rss global CF Gtry for r in CFG['rss'] Config RSS r CFG['rss'][r] except Key Error pass
def define rss global CF Gtry for r in CFG['rss'] Config RSS r CFG['rss'][r] except Key Error pass
def define rss global CF Gtry for r in CFG['rss'] Config RSS r CFG['rss'][r] except Key Error pass
def define rss global CF Gtry for r in CFG['rss'] Config RSS r CFG['rss'][r] except Key Error pass
def convert write result operation command result affected result get 'n' 0 res {'ok' 1 'n' affected}errmsg result get 'errmsg' result get 'err' '' if errmsg if result get 'wtimeout' res['write Concern Error'] {'errmsg' errmsg 'code' 64 'err Info' {'wtimeout' True}}else error {'index' 0 'code' result get 'code' 8 'errmsg' errmsg}if 'err Info' in result error['err Info'] result['err Info']res['write Errors'] [error]return resif operation 'insert' res['n'] len command['documents'] elif operation 'update' if 'upserted' in result res['upserted'] [{'index' 0 ' id' result['upserted']}]elif result get 'updated Existing' is False and affected 1 update command['updates'][ 0 ] id update['u'] get ' id' update['q'] get ' id' res['upserted'] [{'index' 0 ' id' id}]return res
def get fullname user None if not user user frappe session userif not hasattr frappe local u'fullnames' frappe local fullnames {}if not frappe local fullnames get user p frappe db get value u' User' user [u'first name' u'last name'] as dict True if p frappe local fullnames[user] u'' join filter None [p get u'first name' p get u'last name' ] or user else frappe local fullnames[user] userreturn frappe local fullnames get user
def ytdl is updateable from zipimport import zipimporterreturn isinstance globals get u' loader ' zipimporter or hasattr sys u'frozen'
def screenshot viewport None alpha True return read pixels viewport alpha
def xldate from time tuple time tuple hour minute second time tupleif 0 < hour < 24 and 0 < minute < 60 and 0 < second < 60 return second / 60 0 + minute / 60 0 + hour / 24 0 raise XL Date Bad Tuple ' Invalid hour minute second %r' % hour minute second
def attach epic custom attributes queryset as field 'epic custom attributes attr' model queryset modelsql '\n SELEC Tjson agg \nrow to json custom attributes epiccustomattribute \n ORDERB Ycustom attributes epiccustomattribute order\n \n FRO Mcustom attributes epiccustomattribute\n WHER Ecustom attributes epiccustomattribute project id {tbl} id\n'sql sql format tbl model meta db table queryset queryset extra select {as field sql} return queryset
def last arg byref args return args[ -1 ] obj value
@keras testdef test sequence to sequence X train y train X test y test get test data nb train 500 nb test 200 input shape 3 5 output shape 3 5 classification False model Sequential model add Time Distributed Dense y train shape[ -1 ] input shape X train shape[ 1 ] X train shape[ 2 ] model compile loss 'hinge' optimizer 'rmsprop' history model fit X train y train nb epoch 20 batch size 16 validation data X test y test verbose 0 assert history history['val loss'][ -1 ] < 0 8
@keras testdef test sequence to sequence X train y train X test y test get test data nb train 500 nb test 200 input shape 3 5 output shape 3 5 classification False model Sequential model add Time Distributed Dense y train shape[ -1 ] input shape X train shape[ 1 ] X train shape[ 2 ] model compile loss 'hinge' optimizer 'rmsprop' history model fit X train y train nb epoch 20 batch size 16 validation data X test y test verbose 0 assert history history['val loss'][ -1 ] < 0 8
def escape parameter text return escape identifier text replace '-' ' '
def at server reload stop pass
def at server reload stop pass
def iternext impl func def wrapper context builder sig args pair type sig return typepairobj context make helper builder pair type func context builder sig args Iternext Result context builder pairobj return impl ret borrowed context builder pair type pairobj getvalue return wrapper
def iternext impl func def wrapper context builder sig args pair type sig return typepairobj context make helper builder pair type func context builder sig args Iternext Result context builder pairobj return impl ret borrowed context builder pair type pairobj getvalue return wrapper
def iternext impl func def wrapper context builder sig args pair type sig return typepairobj context make helper builder pair type func context builder sig args Iternext Result context builder pairobj return impl ret borrowed context builder pair type pairobj getvalue return wrapper
def iternext impl func def wrapper context builder sig args pair type sig return typepairobj context make helper builder pair type func context builder sig args Iternext Result context builder pairobj return impl ret borrowed context builder pair type pairobj getvalue return wrapper
def delete asset course key asset key try content contentstore find asset key except Not Found Error raise Asset Not Found Exceptioncontentstore 'trashcan' save content if content thumbnail location is not None thumbnail location course key make asset key 'thumbnail' asset key name try thumbnail content contentstore find thumbnail location contentstore 'trashcan' save thumbnail content contentstore delete thumbnail content get id del cached content thumbnail location except Exception logging warning ' Couldnotdeletethumbnail %s' thumbnail location contentstore delete content get id del cached content content location
def get data module doctype info get doctype info module data build config from file module if not data data build standard config module doctype info else add custom doctypes data doctype info add section data u' Custom Reports' u'fafa-list-alt' get report list module data combine common sections data data apply permissions data return data
def test against pytpm doc example fk 5 in Sky Coord u' 12 h 22 m 54 899 s' u' 15 d 49 m 20 57 s' frame FK 5 equinox u'J 2000 ' pytpm out Barycentric True Ecliptic lon 178 78256462 * u deg lat 16 7597002513 * u deg equinox u'J 2000 ' astropy out fk 5 in transform to pytpm out assert pytpm out separation astropy out < 1 * u arcmin
def test against pytpm doc example fk 5 in Sky Coord u' 12 h 22 m 54 899 s' u' 15 d 49 m 20 57 s' frame FK 5 equinox u'J 2000 ' pytpm out Barycentric True Ecliptic lon 178 78256462 * u deg lat 16 7597002513 * u deg equinox u'J 2000 ' astropy out fk 5 in transform to pytpm out assert pytpm out separation astropy out < 1 * u arcmin
def test against pytpm doc example fk 5 in Sky Coord u' 12 h 22 m 54 899 s' u' 15 d 49 m 20 57 s' frame FK 5 equinox u'J 2000 ' pytpm out Barycentric True Ecliptic lon 178 78256462 * u deg lat 16 7597002513 * u deg equinox u'J 2000 ' astropy out fk 5 in transform to pytpm out assert pytpm out separation astropy out < 1 * u arcmin
def test against pytpm doc example fk 5 in Sky Coord u' 12 h 22 m 54 899 s' u' 15 d 49 m 20 57 s' frame FK 5 equinox u'J 2000 ' pytpm out Barycentric True Ecliptic lon 178 78256462 * u deg lat 16 7597002513 * u deg equinox u'J 2000 ' astropy out fk 5 in transform to pytpm out assert pytpm out separation astropy out < 1 * u arcmin
def get col o2 o parent subname subcls fk col name deferrable None initially None ondelete None onupdate None assert subcls Attributes table name is not None '%rhasnotablename ' % subcls col args col kwargs sanitize args subcls Attributes sqla column args sp attrs to sqla constraints parent subcls col kwargs pk column get pk columns subcls pk key pk spyne type pk columnpk sqla type get sqlalchemy type pk spyne type if fk col name is None fk col name subname + ' ' + pk key assert fk col name subname ' Thecolumnnamefortheforeignkeymustbedifferentfromthecolumnnamefortheobjectitself 'fk Foreign Key '%s %s' % subcls Attributes table name pk key use alter True name '%s %s fkey' % subcls Attributes table name fk col name deferrable deferrable initially initially ondelete ondelete onupdate onupdate return Column fk col name pk sqla type fk *col args **col kwargs
def get col o2 o parent subname subcls fk col name deferrable None initially None ondelete None onupdate None assert subcls Attributes table name is not None '%rhasnotablename ' % subcls col args col kwargs sanitize args subcls Attributes sqla column args sp attrs to sqla constraints parent subcls col kwargs pk column get pk columns subcls pk key pk spyne type pk columnpk sqla type get sqlalchemy type pk spyne type if fk col name is None fk col name subname + ' ' + pk key assert fk col name subname ' Thecolumnnamefortheforeignkeymustbedifferentfromthecolumnnamefortheobjectitself 'fk Foreign Key '%s %s' % subcls Attributes table name pk key use alter True name '%s %s fkey' % subcls Attributes table name fk col name deferrable deferrable initially initially ondelete ondelete onupdate onupdate return Column fk col name pk sqla type fk *col args **col kwargs
def fix iteration tables cursor connection cursor cursor execute 'DROPTABL Etko iteration attributes' cursor execute CREATE ITERATION ATTRIBUTES cursor execute 'DROPTABL Etko iteration result' cursor execute CREATE ITERATION RESULTS
def fix iteration tables cursor connection cursor cursor execute 'DROPTABL Etko iteration attributes' cursor execute CREATE ITERATION ATTRIBUTES cursor execute 'DROPTABL Etko iteration result' cursor execute CREATE ITERATION RESULTS
def fix iteration tables cursor connection cursor cursor execute 'DROPTABL Etko iteration attributes' cursor execute CREATE ITERATION ATTRIBUTES cursor execute 'DROPTABL Etko iteration result' cursor execute CREATE ITERATION RESULTS
def serial listen ports migrate data ports []if migrate data obj attr is set 'serial listen ports' ports migrate data serial listen portsreturn ports
def traverse tree course queue [course]while len queue > 0 node queue pop queue extend node get children return True
def is Readable poller for fdmask in poller poll 0 mask fdmask[ 1 ]if mask & POLLIN return True
def is Readable poller for fdmask in poller poll 0 mask fdmask[ 1 ]if mask & POLLIN return True
def is Readable poller for fdmask in poller poll 0 mask fdmask[ 1 ]if mask & POLLIN return True
def must not be rejected func @functools wraps func def wrapped *args **kwargs node get or http error Node kwargs get 'nid' kwargs get 'pid' allow deleted True if node sanction and node sanction is rejected raise HTTP Error http GONE data dict message long ' Thisregistrationhasbeenrejected' return func *args **kwargs return wrapped
def must not be rejected func @functools wraps func def wrapped *args **kwargs node get or http error Node kwargs get 'nid' kwargs get 'pid' allow deleted True if node sanction and node sanction is rejected raise HTTP Error http GONE data dict message long ' Thisregistrationhasbeenrejected' return func *args **kwargs return wrapped
def must not be rejected func @functools wraps func def wrapped *args **kwargs node get or http error Node kwargs get 'nid' kwargs get 'pid' allow deleted True if node sanction and node sanction is rejected raise HTTP Error http GONE data dict message long ' Thisregistrationhasbeenrejected' return func *args **kwargs return wrapped
def must not be rejected func @functools wraps func def wrapped *args **kwargs node get or http error Node kwargs get 'nid' kwargs get 'pid' allow deleted True if node sanction and node sanction is rejected raise HTTP Error http GONE data dict message long ' Thisregistrationhasbeenrejected' return func *args **kwargs return wrapped
def get configuration dev bm Request Type util build request type util CTRL IN util CTRL TYPE STANDARD util CTRL RECIPIENT DEVICE return dev ctrl transfer bm Request Type b Request 8 data or w Length 1 [0 ]
def yield address space start length None reverse False if not length length linux process info address sizecont Truewhile space is valid address start and cont try value read address space start length yield value except struct error cont False yield None if reverse start - lengthelse start + length
def libvlc video get spu delay p mi f Cfunctions get 'libvlc video get spu delay' None or Cfunction 'libvlc video get spu delay' 1 None ctypes c int 64 Media Player return f p mi
def register plugin impl name None if name is None name impl namewith REGISTRY LOCK PLUGIN REGISTRY[name] implif name not in PLUGIN DEPENDENTS PLUGIN DEPENDENTS[name] set for dep in impl dependencies if dep not in PLUGIN DEPENDENTS PLUGIN DEPENDENTS[dep] set PLUGIN DEPENDENTS[dep] add name
def objtag accessing obj accessed obj *args **kwargs return accessed obj tags get *args
def test non broadcasting parameters a 3b np array [[ 1 2 3] [4 5 6]] c np array [[ 1 2 3 4] [1 2 3 4]] class Test Model Model p1 Parameter p2 Parameter p3 Parameter def evaluate self *args returnfor args in itertools permutations a b c with pytest raises Input Parameter Error Test Model *args
def test non broadcasting parameters a 3b np array [[ 1 2 3] [4 5 6]] c np array [[ 1 2 3 4] [1 2 3 4]] class Test Model Model p1 Parameter p2 Parameter p3 Parameter def evaluate self *args returnfor args in itertools permutations a b c with pytest raises Input Parameter Error Test Model *args
def get cert file try current path os path realpath file ca cert path os path join current path ' ' ' ' ' ' 'conf' 'cacert pem' return os path abspath ca cert path except Exception return None
def enforce shopping cart enabled func def func wrapper *args **kwargs '\n Wrapperfunctionthatdoestheenforcementthat\ntheshoppingcartfeatureisenabled\n'if not is shopping cart enabled raise Http 404 return func *args **kwargs return func wrapper
def enforce shopping cart enabled func def func wrapper *args **kwargs '\n Wrapperfunctionthatdoestheenforcementthat\ntheshoppingcartfeatureisenabled\n'if not is shopping cart enabled raise Http 404 return func *args **kwargs return func wrapper
def enforce shopping cart enabled func def func wrapper *args **kwargs '\n Wrapperfunctionthatdoestheenforcementthat\ntheshoppingcartfeatureisenabled\n'if not is shopping cart enabled raise Http 404 return func *args **kwargs return func wrapper
def enforce shopping cart enabled func def func wrapper *args **kwargs '\n Wrapperfunctionthatdoestheenforcementthat\ntheshoppingcartfeatureisenabled\n'if not is shopping cart enabled raise Http 404 return func *args **kwargs return func wrapper
def filldoc docdict unindent params True if unindent params docdict unindent dict docdict def decorate f f doc docformat f doc docdict return freturn decorate
def remove docker files for filename in ['dev yml' 'docker-compose yml' ' dockerignore'] os remove os path join PROJECT DIRECTORY filename shutil rmtree os path join PROJECT DIRECTORY 'compose'
def approx hessian point vars None model None from numdifftools import Jacobianmodel modelcontext model if vars is None vars model cont varsvars inputvars vars point Point point model model bij Dict To Array Bijection Array Ordering vars point dlogp bij mapf model fastdlogp vars def grad logp point return np nan to num dlogp point '\n Findthejacobianofthegradientfunctionatthecurrentposition\nthisshouldbethe Hessian invertittofindtheapproximate\ncovariancematrix \n'return - Jacobian grad logp bij map point
def approx hessian point vars None model None from numdifftools import Jacobianmodel modelcontext model if vars is None vars model cont varsvars inputvars vars point Point point model model bij Dict To Array Bijection Array Ordering vars point dlogp bij mapf model fastdlogp vars def grad logp point return np nan to num dlogp point '\n Findthejacobianofthegradientfunctionatthecurrentposition\nthisshouldbethe Hessian invertittofindtheapproximate\ncovariancematrix \n'return - Jacobian grad logp bij map point
def no prefix name return name startswith 'E' and not name startswith 'EVENT'
def no prefix name return name startswith 'E' and not name startswith 'EVENT'
def has isoread return has userland tool 'iso-read'
def has isoread return has userland tool 'iso-read'
def has isoread return has userland tool 'iso-read'
def has isoread return has userland tool 'iso-read'
def get Area Loop Absolute loop return abs get Area Loop loop
def cut after node levels removed if levels 0 removed extend node children node children []else removed local []for child in node children if child visible cut after child levels - 1 removed else removed local append child for removed child in removed local node children remove removed child removed extend removed local
def key subtitles subtitle video languages services order key ''for sort item in order if sort item LANGUAGE INDEX key + '{ 0 03 d}' format len languages - languages index subtitle language - 1 key + '{ 0 01 d}' format subtitle language languages[languages index subtitle language ] elif sort item SERVICE INDEX key + '{ 0 02 d}' format len services - services index subtitle service - 1 elif sort item SERVICE CONFIDENCE key + '{ 0 04 d}' format int subtitle confidence * 1000 elif sort item MATCHING CONFIDENCE confidence 0if subtitle release confidence matching confidence video subtitle key + '{ 0 04 d}' format int confidence * 1000 return int key
def is ip addr text try v dns ipv 4 inet aton text return Trueexcept socket error return False
def mul shapes lh shape rh shape if lh shape 1 1 return rh shapeelif rh shape 1 1 return lh shapeelse if lh shape[ 1 ] rh shape[ 0 ] raise Value Error ' Incompatibledimensions%s%s' % lh shape rh shape return lh shape[ 0 ] rh shape[ 1 ]
def vis minibatch im blob rois blob labels blob overlaps import matplotlib pyplot as pltfor i in xrange rois blob shape[ 0 ] rois rois blob[i ]im ind rois[ 0 ]roi rois[ 1 ]im im blob[im ind ] transpose 1 2 0 copy im + cfg PIXEL MEAN Sim im[ 2 1 0 ]im im astype np uint 8 cls labels blob[i]plt imshow im print 'class ' cls 'overlap ' overlaps[i]plt gca add patch plt Rectangle roi[ 0 ] roi[ 1 ] roi[ 2 ] - roi[ 0 ] roi[ 3 ] - roi[ 1 ] fill False edgecolor 'r' linewidth 3 plt show
def expose api raw anonymous func return expose api func to json False user required False
def expose api raw anonymous func return expose api func to json False user required False
def expose api raw anonymous func return expose api func to json False user required False
@doctest depends on modules 'numpy' def symarray prefix shape **kwargs from numpy import empty ndindexarr empty shape dtype object for index in ndindex shape arr[index] Symbol '%s %s' % prefix ' ' join map str index **kwargs return arr
def best search result conda target conda context None channels override None conda context ensure conda context conda context if not channels override conda context ensure channels configured search cmd [conda context conda exec 'search' '--full-name' '--json']if channels override search cmd append '--override-channels' for channel in channels override search cmd extend ['--channel' channel] search cmd append conda target package res commands execute search cmd hits json loads res get conda target package [] hits sorted hits key lambda hit Loose Version hit['version'] reverse True if len hits 0 return None None best result hits[ 0 ] False for hit in hits if is search hit exact conda target hit best result hit True breakreturn best result
@currydef lossless float to int funcname func argname arg if not isinstance arg float return argarg as int int arg if arg arg as int warnings warn '{f}expectedanintforargument{name r} butgotfloat{arg} Coercingtoint ' format f funcname name argname arg arg return arg as intraise Type Error arg
def load app target global NORUN NORUN nr old True NORUN try tmp default app push rv load target return rv if callable rv else tmp finally default app remove tmp NORUN nr old
def load app target global NORUN NORUN nr old True NORUN try tmp default app push rv load target return rv if callable rv else tmp finally default app remove tmp NORUN nr old
def load app target global NORUN NORUN nr old True NORUN try tmp default app push rv load target return rv if callable rv else tmp finally default app remove tmp NORUN nr old
@nox parametrize 'sample' SAMPLES WITH GENERATED READMES def session readmegen session sample session install 'jinja 2 ' 'pyyaml' if os path exists os path join sample 'requirements txt' session install '-r' os path join sample 'requirements txt' in file os path join sample 'README rst in' session run 'python' 'scripts/readme-gen/readme gen py' in file
def fix location header request response if ' Location' in response and request get host response[' Location'] request build absolute uri response[' Location'] return response
def fix location header request response if ' Location' in response and request get host response[' Location'] request build absolute uri response[' Location'] return response
def recall score y real y pred r precision recall fscore y real y pred return np average r
def alias thumbnailer thumbnail options source filename thumbnail extension **kwargs return u' ' join [source filename thumbnail options get u'ALIAS' u'' thumbnail extension]
def str to bytes size units ['' 'b' 'kb' 'mb' 'gb' 'tb' 'pb' 'eb' 'zb' 'yb']curr size sizetry if size lower 'infinity' try curr item size strip split '' curr size '' join curr item curr size int curr size except Value Error curr item size strip split '' curr unit curr item[ -1 ] strip lower curr item curr item[ 0 -1 ]curr size '' join curr item try curr size float curr size except Value Error error ' Unabletoconvertsize' + str size raise Malformed YML Exception error try pos units index curr unit for x in range pos 1 -1 curr size * 1024 except Value Error error ' Unabletoconvertsize' + str size raise Malformed YML Exception error except Unbound Local Error Name Error passelse curr size -1 except Attribute Error passreturn curr size
def str to bytes size units ['' 'b' 'kb' 'mb' 'gb' 'tb' 'pb' 'eb' 'zb' 'yb']curr size sizetry if size lower 'infinity' try curr item size strip split '' curr size '' join curr item curr size int curr size except Value Error curr item size strip split '' curr unit curr item[ -1 ] strip lower curr item curr item[ 0 -1 ]curr size '' join curr item try curr size float curr size except Value Error error ' Unabletoconvertsize' + str size raise Malformed YML Exception error try pos units index curr unit for x in range pos 1 -1 curr size * 1024 except Value Error error ' Unabletoconvertsize' + str size raise Malformed YML Exception error except Unbound Local Error Name Error passelse curr size -1 except Attribute Error passreturn curr size
def aes decrypt text data password key size bytes NONCE LENGTH BYTES 8data bytes to intlist base 64 b64 decode data encode u'utf- 8 ' password bytes to intlist password encode u'utf- 8 ' key password[ key size bytes] + [0 ] * key size bytes - len password key aes encrypt key[ BLOCK SIZE BYTES] key expansion key * key size bytes // BLOCK SIZE BYTES nonce data[ NONCE LENGTH BYTES]cipher data[NONCE LENGTH BYTES ]class Counter object value nonce + [0 ] * BLOCK SIZE BYTES - NONCE LENGTH BYTES def next value self temp self valueself value inc self value return tempdecrypted data aes ctr decrypt cipher key Counter plaintext intlist to bytes decrypted data return plaintext
@synchronized IO LOCK def get new id prefix folder check list None for n in xrange 10000 try if not os path exists folder os makedirs folder fd path tempfile mkstemp '' 'SA Bnzbd %s ' % prefix folder os close fd head tail os path split path if not check list or tail not in check list return tailexcept logging error T ' Failureintempfile mkstemp' logging info ' Traceback ' exc info True raise IO Error
@synchronized IO LOCK def get new id prefix folder check list None for n in xrange 10000 try if not os path exists folder os makedirs folder fd path tempfile mkstemp '' 'SA Bnzbd %s ' % prefix folder os close fd head tail os path split path if not check list or tail not in check list return tailexcept logging error T ' Failureintempfile mkstemp' logging info ' Traceback ' exc info True raise IO Error
def missing action request action return Response generate template 'missing action html' action action status 404
def missing action request action return Response generate template 'missing action html' action action status 404
def make quartiles q1 q3 return graph objs Scatter x [0 0] y [q 1 q3 ] text [ 'lower-quartile ' + '{ 0 2f}' format q1 'upper-quartile ' + '{ 0 2f}' format q3 ] mode 'lines' line graph objs Line width 4 color 'rgb 0 0 0 ' hoverinfo 'text'
@app errorhandler 500 def error 500 handler error new issue 'https //github com/andresriancho/w 3 af/issues/new'try exc type exc value exc traceback sys exc info filepath traceback extract tb exc traceback [ -1 ][ 0 ]filename basename filepath lineno function name get last call info exc traceback response jsonify {'code' 500 'message' str error 'filename' filename 'line number' lineno 'function name' function name 'exception type' error class name 'please' new issue} except Exception as e response jsonify {'code' 500 'exception' str error 'handler exception' str e 'please' new issue 'message' 'RESTAP Ierror'} response status code 500 return response
@app errorhandler 500 def error 500 handler error new issue 'https //github com/andresriancho/w 3 af/issues/new'try exc type exc value exc traceback sys exc info filepath traceback extract tb exc traceback [ -1 ][ 0 ]filename basename filepath lineno function name get last call info exc traceback response jsonify {'code' 500 'message' str error 'filename' filename 'line number' lineno 'function name' function name 'exception type' error class name 'please' new issue} except Exception as e response jsonify {'code' 500 'exception' str error 'handler exception' str e 'please' new issue 'message' 'RESTAP Ierror'} response status code 500 return response
def describe template sets import inspectimport systemplatesets inspect getmembers sys modules[ name ] inspect isfunction for name obj in templatesets if name 'describe template sets' continueprint name obj doc '\n'
def describe template sets import inspectimport systemplatesets inspect getmembers sys modules[ name ] inspect isfunction for name obj in templatesets if name 'describe template sets' continueprint name obj doc '\n'
@ensure csrf cookie@ensure valid course keydef jump to id request course id module id course key Slash Separated Course Key from deprecated string course id items modulestore get items course key qualifiers {'name' module id} if len items 0 raise Http 404 u' Couldnotfindid {0 }incourse id {1 } Referer {2 }' format module id course id request META get 'HTTP REFERER' '' if len items > 1 log warning u' Multipleitemsfoundwithid %sincourse id %s Referer %s Usingfirst %s' module id course id request META get 'HTTP REFERER' '' items[ 0 ] location to deprecated string return jump to request course id items[ 0 ] location to deprecated string
@ensure csrf cookie@ensure valid course keydef jump to id request course id module id course key Slash Separated Course Key from deprecated string course id items modulestore get items course key qualifiers {'name' module id} if len items 0 raise Http 404 u' Couldnotfindid {0 }incourse id {1 } Referer {2 }' format module id course id request META get 'HTTP REFERER' '' if len items > 1 log warning u' Multipleitemsfoundwithid %sincourse id %s Referer %s Usingfirst %s' module id course id request META get 'HTTP REFERER' '' items[ 0 ] location to deprecated string return jump to request course id items[ 0 ] location to deprecated string
def db remove name user None password None host None port None authdb None conn connect user password host port authdb authdb if not conn return ' Failedtoconnecttomongodatabase'try log info ' Removingdatabase{ 0 }' format name conn drop database name except pymongo errors Py Mongo Error as err log error ' Removingdatabase{ 0 }failedwitherror {1 }' format name str err return str err return True
def get service hass config discovery info None index config get CONF INDEX return Ecobee Notification Service index
def Get User Info client user kb client Get client Schema KNOWLEDGE BASE if '\\' in user domain user user split '\\' 1 users [u for u in kb users if u username user and u userdomain domain ]else users [u for u in kb users if u username user ]if not users returnelse return users[ 0 ]
def Build CGI Request base env dict request dev appserver if request headers is None request headers {}request headers[' Content- Type'] 'application/json'url SPI ROOT FORMAT % request port request path base env dict['REQUEST METHOD'] 'POST'header outfile c String IO String IO body outfile c String IO String IO Write Headers request headers header outfile len request body body outfile write request body header outfile seek 0 body outfile seek 0 return dev appserver App Server Request url None mimetools Message header outfile body outfile
def iscommand cmd if isexecutable cmd return Truepath os environ get 'PATH' if not path return Falsefor d in path split os pathsep exe os path join d cmd if isexecutable exe return Truereturn False
def reload core host None core name None ret get return dict if not check for cores err ['solr reload corecanonlybecalledby"multi-core"minions']return ret update {'success' False 'errors' err} if get none or value core name is None and check for cores success Truefor name in opts ['solr cores'] resp reload core host name if not resp['success'] success Falsedata {name {'data' resp['data']}}ret update return dict ret success data resp['errors'] resp['warnings'] return retextra ['action RELOAD' 'core {0 }' format core name ]url format url 'admin/cores' host host core name None extra extra return http request url
def getlimit stream pipe Pipeline pipe append Limit result pipe stream try return int result except Value Error return result
def run X 11 node cmd display tunnel tunnel X 11 node if display is None return []popen node popen cmd return [tunnel popen]
def set replication enabled status host None core name None if not is master and get none or value host is None return get return dict False errors [' Onlyminionsconfiguredasmastercanrunthis'] cmd 'enablereplication' if status else 'disablereplication' if get none or value core name is None and check for cores ret get return dict success Truefor name in opts ['solr cores'] resp set replication enabled status host name if not resp['success'] success Falsedata {name {'data' resp['data']}}ret update return dict ret success data resp['errors'] resp['warnings'] return retelif status return replication request cmd host host core name core name else return replication request cmd host host core name core name
def set replication enabled status host None core name None if not is master and get none or value host is None return get return dict False errors [' Onlyminionsconfiguredasmastercanrunthis'] cmd 'enablereplication' if status else 'disablereplication' if get none or value core name is None and check for cores ret get return dict success Truefor name in opts ['solr cores'] resp set replication enabled status host name if not resp['success'] success Falsedata {name {'data' resp['data']}}ret update return dict ret success data resp['errors'] resp['warnings'] return retelif status return replication request cmd host host core name core name else return replication request cmd host host core name core name
def did composer install dir lock File '{ 0 }/vendor' format dir if os path exists lock File return Truereturn False
def did composer install dir lock File '{ 0 }/vendor' format dir if os path exists lock File return Truereturn False
def downsample data n axis 0 if hasattr axis ' len ' if not hasattr n ' len ' n [n] * len axis for i in range len axis data downsample data n[i] axis[i] return dataif n < 1 return datan Pts int data shape[axis] / n s list data shape s[axis] n Ptss insert axis + 1 n sl [slice None ] * data ndim sl[axis] slice 0 n Pts * n d1 data[tuple sl ]d 1 shape tuple s d2 d1 mean axis + 1 return d2
def skip msg None return skipif True msg
def check regexp option opt value if hasattr value 'pattern' return valuetry return re compile value except Value Error raise Option Value Error 'option%s invalidregexpvalue %r' % opt value
def check regexp option opt value if hasattr value 'pattern' return valuetry return re compile value except Value Error raise Option Value Error 'option%s invalidregexpvalue %r' % opt value
def clean rerp input X data reject flat decim info tstep has val np unique X nonzero [0 ] if reject is not None inds reject data segments data reject flat decim None info info tstep tstep for t0 t1 in inds has val np setdiff 1 d has val range t0 t1 return X tocsr [has val] data[ has val]
def query path method 'GET' data None params None header dict None decode True api key config get cloud config value 'api key' get configured provider opts search global False management host config get cloud config value 'management host' get configured provider opts search global False default 'api vultr com' url 'https //{management host}/v 1 /{path}?api key {api key}' format management host management host path path api key api key if header dict is None header dict {}result utils ['http query'] url method method params params data data header dict header dict port 443 text True decode decode decode type 'json' hide fields ['api key'] opts opts if 'dict' in result return result['dict']return result
def add edge filter values graph values values astype int center values[ len values // 2 ]for value in values if value center and not graph has edge center value graph add edge center value return 0 0
def add edge filter values graph values values astype int center values[ len values // 2 ]for value in values if value center and not graph has edge center value graph add edge center value return 0 0
def get user permission level user site if not user is authenticated raise No Permissions Exceptionif user is superuser or not get cms setting 'PERMISSION' return ROOT USER LEVE Lhas global perms Global Page Permission objects get with change permissions user site pk exists if has global perms return ROOT USER LEVE Ltry permission Page Permission objects get with change permissions user site order by 'page path' [0 ]except Index Error raise No Permissions Exceptionreturn permission page depth
def Make Google Unique ID cloud instance if not cloud instance zone and cloud instance project id and cloud instance instance id raise Value Error " Badzone/project id/id '%s/%s/%s'" % cloud instance zone cloud instance project id cloud instance instance id return '/' join [cloud instance zone split '/' [ -1 ] cloud instance project id cloud instance instance id]
def modify dot attribute module ec 2 instance device name delete on termination module params get 'delete on termination' changed Falsetry instance update dot instance block device mapping[device name] delete on terminationexcept boto exception Boto Server Error as e module fail json msg '%s %s' % e error code e error message if delete on termination dot try bdt Block Device Type delete on termination delete on termination bdm Block Device Mapping bdm[device name] bdtec 2 modify instance attribute instance id instance id attribute 'block Device Mapping' value bdm while instance block device mapping[device name] delete on termination delete on termination time sleep 3 instance update changed Trueexcept boto exception Boto Server Error as e module fail json msg '%s %s' % e error code e error message return changed
def arg encoding try return locale getdefaultlocale [1 ] or 'utf- 8 ' except Value Error return 'utf- 8 '
def verify numerically f g z None tol 1e- 06 a 2 b -1 c 3 d 1 f g z Tuple f g z z [z] if isinstance z Symbol else f free symbols g free symbols reps list zip z [random complex number a b c d for zi in z] z1 f subs reps n z2 g subs reps n return comp z1 z2 tol
@contextmanagerdef captured disallow stderr True import sysstdout sys stdoutstderr sys stderrsys stdout outfile String IO sys stderr errfile String IO c Captured Text try yield c finally c stdout outfile getvalue c stderr strip expected errfile getvalue sys stdout stdoutsys stderr stderrif disallow stderr and c stderr raise Exception ' Gotstderroutput %s' % c stderr
def endpoint create service publicurl None internalurl None adminurl None region None profile None url None interface None **connection args kstone auth profile **connection args keystone service service get name service profile profile **connection args if not keystone service or ' Error' in keystone service return {' Error' ' Couldnotfindthespecifiedservice'}if OS IDENTITY API VERSION > 2 kstone endpoints create service keystone service[service]['id'] region id region url url interface interface else kstone endpoints create region region service id keystone service[service]['id'] publicurl publicurl adminurl adminurl internalurl internalurl return endpoint get service profile **connection args
def get filename path try return os path split path [1 ]except return ''
def parse request range range header text left Noneright Noneif not range header text return left right range header text range header text strip if not range header text startswith 'bytes' return left right components range header text split ' ' if len components 2 return left right components components[ 1 ] split '-' try right int components[ 1 ] except passtry left int components[ 0 ] except passreturn left right
def parse request range range header text left Noneright Noneif not range header text return left right range header text range header text strip if not range header text startswith 'bytes' return left right components range header text split ' ' if len components 2 return left right components components[ 1 ] split '-' try right int components[ 1 ] except passtry left int components[ 0 ] except passreturn left right
def parse request range range header text left Noneright Noneif not range header text return left right range header text range header text strip if not range header text startswith 'bytes' return left right components range header text split ' ' if len components 2 return left right components components[ 1 ] split '-' try right int components[ 1 ] except passtry left int components[ 0 ] except passreturn left right
def parse request range range header text left Noneright Noneif not range header text return left right range header text range header text strip if not range header text startswith 'bytes' return left right components range header text split ' ' if len components 2 return left right components components[ 1 ] split '-' try right int components[ 1 ] except passtry left int components[ 0 ] except passreturn left right
def config edit using option strings config filepath desired option strings section edit False desired options [parse option string section desired option string raise on error True for desired option string in desired option strings]config edit config filepath desired options edit edit
def estimate gaussian covariances spherical resp X nk means reg covar return estimate gaussian covariances diag resp X nk means reg covar mean 1
def Verify Sources Exist sources root dir missing sources []for source in sources if isinstance source MSVS Project Filter missing sources extend Verify Sources Exist source contents root dir elif '$' not in source full path os path join root dir source if not os path exists full path missing sources append full path return missing sources
def u string if is python 3 return stringreturn unicode string encoding 'utf- 8 ' errors 'strict'
def trigger server restart **kwargs mark urlconf as changed
def order at a p t if a is zero return ooif p Poly t t return a as poly t ET [0 ][ 0 ]power list []p 1 pr a rem p1 tracks power 1while r is zero power list append p1 tracks power p1 p1 * p1 tracks power * 2r a rem p1 n 0product Poly 1 t while len power list 0 final power list pop productf product * final[ 0 ] r a rem productf if r is zero n + final[ 1 ]product productfreturn n
def pad lines after first prefix s return '\n' + prefix join s splitlines
def se cov cov return np sqrt np diag cov
def utcoffset time time localtime time localtime if localtime tm isdst return time altzone // 3600 return time timezone // 3600
def int inversion g x t b a get coeff exp g argument x C g inflate fox h meijerg g an g aother g bm g bother b / t ** a - a return C / t * g
def test min zero mlp MLP input space Vector Space 1 layers [ Maxout layer name 'test layer' num units 1 num pieces 2 irange 0 05 min zero True ] X T matrix output mlp fprop X f function [X] output mode 'DEBUG MODE' f np zeros 1 1 astype X dtype
def test min zero mlp MLP input space Vector Space 1 layers [ Maxout layer name 'test layer' num units 1 num pieces 2 irange 0 05 min zero True ] X T matrix output mlp fprop X f function [X] output mode 'DEBUG MODE' f np zeros 1 1 astype X dtype
def test min zero mlp MLP input space Vector Space 1 layers [ Maxout layer name 'test layer' num units 1 num pieces 2 irange 0 05 min zero True ] X T matrix output mlp fprop X f function [X] output mode 'DEBUG MODE' f np zeros 1 1 astype X dtype
def test min zero mlp MLP input space Vector Space 1 layers [ Maxout layer name 'test layer' num units 1 num pieces 2 irange 0 05 min zero True ] X T matrix output mlp fprop X f function [X] output mode 'DEBUG MODE' f np zeros 1 1 astype X dtype
def file contains pattern file pattern if not os path isfile file raise Name Error 'file%sdoesnotexist' % file cmd result utils run 'egrep-q"' + pattern + '"' + file ignore status True verbose False return not cmd result exit status
def run job tasks log debug u'executingtasks %s' tasks finished events manager execute options {u'tasks' tasks u'cron' True u'allow manual' False} priority 5 for task name event in finished events log debug u'taskfinishedexecuting %s' task name event wait log debug u'alltasksinschedulefinishedexecuting'
@taskdef bdist wininst sse 2 options bdist wininst arch options python version 'sse 2 '
@pytest mark django dbdef test admin regular user client default client login username default username password '' response client get ADMIN URL assert response status code 403
@pytest mark django dbdef test admin regular user client default client login username default username password '' response client get ADMIN URL assert response status code 403
@pytest mark django dbdef test admin regular user client default client login username default username password '' response client get ADMIN URL assert response status code 403
def callable repr method try return fully Qualified Name method except Attribute Error return safe repr method
def test byteorder mjd np array [53000 0 54000 0] big endian mjd astype '>f 8 ' little endian mjd astype '<f 8 ' time mjd Time mjd format 'mjd' time big Time big endian format 'mjd' time little Time little endian format 'mjd' assert np all time big time mjd assert np all time little time mjd
def onenorm matrix power nnm A p if int p p or p < 0 raise Value Error 'expectednon-negativeintegerp' p int p if len A shape 2 or A shape[ 0 ] A shape[ 1 ] raise Value Error 'expected Atobelikeasquarematrix' v np ones A shape[ 0 ] 1 dtype float M A Tfor i in range p v M dot v return max v
def test compound model with nonstandard broadcasting offx Shift 1 offy Shift 2 rot Affine Transformation 2 D [[ 0 -1 ] [1 0]] m offx & offy rot x y m 0 0 assert x -2 assert y 1 assert isinstance x float assert isinstance y float x y m [0 1 2] [0 1 2] assert np all x [ -2 -3 -4 ] assert np all y [1 2 3]
def test compound model with nonstandard broadcasting offx Shift 1 offy Shift 2 rot Affine Transformation 2 D [[ 0 -1 ] [1 0]] m offx & offy rot x y m 0 0 assert x -2 assert y 1 assert isinstance x float assert isinstance y float x y m [0 1 2] [0 1 2] assert np all x [ -2 -3 -4 ] assert np all y [1 2 3]
def save exploration summary exp summary exp summary model exp models Exp Summary Model id exp summary id title exp summary title category exp summary category objective exp summary objective language code exp summary language code tags exp summary tags ratings exp summary ratings scaled average rating exp summary scaled average rating status exp summary status community owned exp summary community owned owner ids exp summary owner ids editor ids exp summary editor ids viewer ids exp summary viewer ids contributor ids exp summary contributor ids contributors summary exp summary contributors summary version exp summary version exploration model last updated exp summary exploration model last updated exploration model created on exp summary exploration model created on first published msec exp summary first published msec exp summary model put
def trigger 500 request raise Exception " Congratulations you'vetriggeredanexception Gotellallyourfriendswhatanexceptionalpersonyouare "
@register simple tag name 'favicon path' def favicon path default getattr settings 'FAVICON PATH' 'images/favicon ico' return staticfiles storage url configuration helpers get value 'favicon path' default
def load check agent Config hostname checkname from jmxfetch import JMX CHECK Sagent Config['checksd hostname'] hostnameosname get os checks places get checks places osname agent Config for config path in file configs paths osname agent Config check name conf path to check name config path if check name checkname and check name not in JMX CHECKS conf is valid check config invalid check load file config config path check name agent Config if invalid check and not conf is valid return invalid check load success load failure load check from places check config check name checks places agent Config return load success values [0 ] or load failure for check name service disco check config in service disco configs agent Config iteritems if check name checkname sd init config sd instances service disco check config[ 1 ]check config {'init config' sd init config 'instances' sd instances} load success load failure load check from places check config check name checks places agent Config return load success values [0 ] or load failure return None
def get lr scalers from layers owner rval Ordered Dict params owner get params for layer in owner layers contrib layer get lr scalers assert isinstance contrib Ordered Dict assert not any [ key in rval for key in contrib] assert all [ key in params for key in contrib] rval update contrib assert all [isinstance val float for val in rval values ] return rval
@core helperdef resource view icon resource view view plugin datapreview get view plugin resource view['view type'] return view plugin info get 'icon' 'picture'
def base msg type type if type is None return Noneif '[' in type return type [ type find '[' ]return type
def initialize decorator init def initialize self *args **kwargs cls type self for k v in kwargs items if hasattr cls k attr getattr cls k if isinstance attr Instrumented Attribute column attr property columns[ 0 ]if isinstance column type String if column type length and column type length < len str v if config CONF signing token format 'PKI' and self tablename 'token' and k 'id' continueraise exception String Length Exceeded string v type k length column type length init self *args **kwargs return initialize
def initialize decorator init def initialize self *args **kwargs cls type self for k v in kwargs items if hasattr cls k attr getattr cls k if isinstance attr Instrumented Attribute column attr property columns[ 0 ]if isinstance column type String if column type length and column type length < len str v if config CONF signing token format 'PKI' and self tablename 'token' and k 'id' continueraise exception String Length Exceeded string v type k length column type length init self *args **kwargs return initialize
def initialize decorator init def initialize self *args **kwargs cls type self for k v in kwargs items if hasattr cls k attr getattr cls k if isinstance attr Instrumented Attribute column attr property columns[ 0 ]if isinstance column type String if column type length and column type length < len str v if config CONF signing token format 'PKI' and self tablename 'token' and k 'id' continueraise exception String Length Exceeded string v type k length column type length init self *args **kwargs return initialize
def initialize decorator init def initialize self *args **kwargs cls type self for k v in kwargs items if hasattr cls k attr getattr cls k if isinstance attr Instrumented Attribute column attr property columns[ 0 ]if isinstance column type String if column type length and column type length < len str v if config CONF signing token format 'PKI' and self tablename 'token' and k 'id' continueraise exception String Length Exceeded string v type k length column type length init self *args **kwargs return initialize
@allow publicdef contribute view request return serve request 'contribute json' document root settings ROOT
def debug msg text prefix ' Debug' msg colorize '%s %s' % prefix str text 'cyan'
def create alias alias name target key id region None key None keyid None profile None conn get conn region region key key keyid keyid profile profile r {}try conn create alias alias name target key id r['result'] Trueexcept boto exception Boto Server Error as e r['result'] Falser['error'] utils ['boto get error'] e return r
def test np rng rngs [make np rng rng or seed 42 which method 'uniform' make np rng rng or seed numpy random Random State 42 which method 'uniform' make np rng default seed 42 make np rng ]random numbers rngs[ 0 ] uniform size 100 equals numpy ones 100 for rng in rngs[ 1 ] equal random numbers rng uniform size 100 equals * equalassert equals all
def hello world window window gtk Window gtk WINDOW TOPLEVEL window set border width 50 button gtk Button u' Hello World' window add button def clicked data print u' Buttonclicked 'button connect u'clicked' clicked button show window show
def random all pass
def groovy script registry xml parent data gst XML Sub Element xml parent 'org jenkinsci plugins scripttrigger groovy Groovy Script Trigger' gst set 'plugin' 'scripttrigger' mappings [ 'system-script' 'groovy System Script' False 'script' 'groovy Expression' '' 'script-file-path' 'groovy File Path' '' 'property-file-path' 'properties File Path' '' 'enable-concurrent' 'enable Concurrent Build' False 'cron' 'spec' '' ]convert mapping to xml gst data mappings fail required True label data get 'label' XML Sub Element gst 'label Restriction' text str bool label lower if label XML Sub Element gst 'trigger Label' text label
def groovy script registry xml parent data gst XML Sub Element xml parent 'org jenkinsci plugins scripttrigger groovy Groovy Script Trigger' gst set 'plugin' 'scripttrigger' mappings [ 'system-script' 'groovy System Script' False 'script' 'groovy Expression' '' 'script-file-path' 'groovy File Path' '' 'property-file-path' 'properties File Path' '' 'enable-concurrent' 'enable Concurrent Build' False 'cron' 'spec' '' ]convert mapping to xml gst data mappings fail required True label data get 'label' XML Sub Element gst 'label Restriction' text str bool label lower if label XML Sub Element gst 'trigger Label' text label
def starts With str prefix return str[ len prefix ] prefix
def create buffer length return array array 'B' dummy s * length
def check for validation errors app None try from c String IO import String I Oexcept Import Error from String IO import String I Os String IO num errors get validation errors s app if num errors if app sys stderr write style ERROR " Error %scouldn'tbeinstalled becausetherewereerrorsinyourmodel \n" % app else sys stderr write style ERROR " Error Couldn'tinstallapps becausetherewereerrorsinoneormoremodels \n" s seek 0 sys stderr write s read sys exit 1
def check for validation errors app None try from c String IO import String I Oexcept Import Error from String IO import String I Os String IO num errors get validation errors s app if num errors if app sys stderr write style ERROR " Error %scouldn'tbeinstalled becausetherewereerrorsinyourmodel \n" % app else sys stderr write style ERROR " Error Couldn'tinstallapps becausetherewereerrorsinoneormoremodels \n" s seek 0 sys stderr write s read sys exit 1
def np datetime 64 compat s *args **kwargs if not np version under 1 p 11 s tz replacer s return np datetime 64 s *args **kwargs
def read bearer token file filename f open filename bearer token f readline strip f close return bearer token
def inflate fox h g a if a < 0 return inflate fox h flip g g - a p S a p q S a q D g inflate g g q z g argument D / 2 * pi ** 1 - p / 2 * p ** - S 1 / 2 z / p ** p bs [ n + 1 / p for n in range p ]return D meijerg g an g aother g bm list g bother + bs z
def inflate fox h g a if a < 0 return inflate fox h flip g g - a p S a p q S a q D g inflate g g q z g argument D / 2 * pi ** 1 - p / 2 * p ** - S 1 / 2 z / p ** p bs [ n + 1 / p for n in range p ]return D meijerg g an g aother g bm list g bother + bs z
def topological sort as sets dependency graph todo dependency graph copy while todo current {node for node deps in todo items if len deps 0 }if not current raise Value Error ' Cyclicdependencyingraph {}' format ' ' join repr x for x in todo items yield current todo {node dependencies - current for node dependencies in todo items if node not in current }
def set windows appusermodelid try return windll shell 32 Set Current Process Explicit App User Model ID 'spyder Spyder' except Attribute Error return ' Set Current Process Explicit App User Model I Dnotfound'
def set windows appusermodelid try return windll shell 32 Set Current Process Explicit App User Model ID 'spyder Spyder' except Attribute Error return ' Set Current Process Explicit App User Model I Dnotfound'
def assert complete surface surf from source space import get solidstot angle 0 0cm surf['rr'] mean axis 0 logger info '%s C Mis% 6 2f% 6 2f% 6 2fmm' % surf name[surf['id']] 1000 * cm[ 0 ] 1000 * cm[ 1 ] 1000 * cm[ 2 ] tot angle get solids surf['rr'][surf['tris']] cm[np newaxis ] [0 ]if np abs tot angle / 2 * np pi - 1 0 > 1e- 05 raise Runtime Error ' Surface%sisnotcomplete sumofsolidangles %g* 4 *P Iinstead ' % surf name[surf['id']] tot angle
def request latency results limit scenario results [r['scenario'] for r in results if r['scenario'] get 'metrics' and r['scenario']['metrics'] get 'call durations' ]if len scenario results > 0 unique metrics []for result in scenario results if result['metrics'] not in unique metrics unique metrics append result['metrics'] total requests 0requests under limit 0for metric in unique metrics for duration num requests in metric['call durations'] iteritems if float duration < limit requests under limit + num requeststotal requests + metric['ok count'] + metric['err count'] return float requests under limit / total requests return None
def request latency results limit scenario results [r['scenario'] for r in results if r['scenario'] get 'metrics' and r['scenario']['metrics'] get 'call durations' ]if len scenario results > 0 unique metrics []for result in scenario results if result['metrics'] not in unique metrics unique metrics append result['metrics'] total requests 0requests under limit 0for metric in unique metrics for duration num requests in metric['call durations'] iteritems if float duration < limit requests under limit + num requeststotal requests + metric['ok count'] + metric['err count'] return float requests under limit / total requests return None
def request latency results limit scenario results [r['scenario'] for r in results if r['scenario'] get 'metrics' and r['scenario']['metrics'] get 'call durations' ]if len scenario results > 0 unique metrics []for result in scenario results if result['metrics'] not in unique metrics unique metrics append result['metrics'] total requests 0requests under limit 0for metric in unique metrics for duration num requests in metric['call durations'] iteritems if float duration < limit requests under limit + num requeststotal requests + metric['ok count'] + metric['err count'] return float requests under limit / total requests return None
def request latency results limit scenario results [r['scenario'] for r in results if r['scenario'] get 'metrics' and r['scenario']['metrics'] get 'call durations' ]if len scenario results > 0 unique metrics []for result in scenario results if result['metrics'] not in unique metrics unique metrics append result['metrics'] total requests 0requests under limit 0for metric in unique metrics for duration num requests in metric['call durations'] iteritems if float duration < limit requests under limit + num requeststotal requests + metric['ok count'] + metric['err count'] return float requests under limit / total requests return None
def test syntax error for scenarios with no name expect Feature from string when called with FEATURE 20 to throw Lettuce Syntax Error ' Inthefeature" Myscenarioshavenoname" scenariosmusthaveaname makesuretodeclareascenariolikethis ` Scenario nameofyourscenario`'
def test syntax error for scenarios with no name expect Feature from string when called with FEATURE 20 to throw Lettuce Syntax Error ' Inthefeature" Myscenarioshavenoname" scenariosmusthaveaname makesuretodeclareascenariolikethis ` Scenario nameofyourscenario`'
def test syntax error for scenarios with no name expect Feature from string when called with FEATURE 20 to throw Lettuce Syntax Error ' Inthefeature" Myscenarioshavenoname" scenariosmusthaveaname makesuretodeclareascenariolikethis ` Scenario nameofyourscenario`'
@mock streams 'stdout' def test global parallel honors runs once @decorators runs oncedef mytask print 'yolo'with settings hide 'everything' parallel True execute mytask hosts ['localhost' '127 0 0 1'] result sys stdout getvalue eq result 'yolo\n' assert result 'yolo\nyolo\n'
@mock streams 'stdout' def test global parallel honors runs once @decorators runs oncedef mytask print 'yolo'with settings hide 'everything' parallel True execute mytask hosts ['localhost' '127 0 0 1'] result sys stdout getvalue eq result 'yolo\n' assert result 'yolo\nyolo\n'
def calc beta rk rk norm rk 1 rk 1 norm rkk 1 rk 1 [ 0 ] - rk[ 0 ] size np sqrt np dot rkk 1 rkk 1 rkk 1 / sizenum rk norm + np dot rk rkk 1 den rk 1 norm + np dot rk 1 rkk 1 res np log num / den / size return res
def calc beta rk rk norm rk 1 rk 1 norm rkk 1 rk 1 [ 0 ] - rk[ 0 ] size np sqrt np dot rkk 1 rkk 1 rkk 1 / sizenum rk norm + np dot rk rkk 1 den rk 1 norm + np dot rk 1 rkk 1 res np log num / den / size return res
def prep jid nocache False passed jid None jid passed jidfor returner in opts [CONFIG KEY] if jid is None jid mminion returners['{ 0 } prep jid' format returner ] nocache nocache else r jid mminion returners['{ 0 } prep jid' format returner ] nocache nocache if r jid jid log debug ' Uhh crudthejidsdonotmatch' return jid
def prep jid nocache False passed jid None jid passed jidfor returner in opts [CONFIG KEY] if jid is None jid mminion returners['{ 0 } prep jid' format returner ] nocache nocache else r jid mminion returners['{ 0 } prep jid' format returner ] nocache nocache if r jid jid log debug ' Uhh crudthejidsdonotmatch' return jid
def not in a b msg None assert a not in b msg or '%risin%r' % a b
def get view to display matrix scene from mayavi core ui mayavi scene import Mayavi Scenefrom tvtk pyface tvtk scene import TVTK Sceneif not isinstance scene Mayavi Scene TVTK Scene raise Type Error 'scenemustbeaninstanceof TVTK Scene/ Mayavi Scene foundtype%s' % type scene x y tuple scene get size view to disp mat np array [[ x / 2 0 0 0 0 0 x / 2 0 ] [0 0 - y / 2 0 0 0 y / 2 0 ] [0 0 0 0 1 0 0 0] [0 0 0 0 0 0 1 0]] return view to disp mat
def get view to display matrix scene from mayavi core ui mayavi scene import Mayavi Scenefrom tvtk pyface tvtk scene import TVTK Sceneif not isinstance scene Mayavi Scene TVTK Scene raise Type Error 'scenemustbeaninstanceof TVTK Scene/ Mayavi Scene foundtype%s' % type scene x y tuple scene get size view to disp mat np array [[ x / 2 0 0 0 0 0 x / 2 0 ] [0 0 - y / 2 0 0 0 y / 2 0 ] [0 0 0 0 1 0 0 0] [0 0 0 0 0 0 1 0]] return view to disp mat
def get view to display matrix scene from mayavi core ui mayavi scene import Mayavi Scenefrom tvtk pyface tvtk scene import TVTK Sceneif not isinstance scene Mayavi Scene TVTK Scene raise Type Error 'scenemustbeaninstanceof TVTK Scene/ Mayavi Scene foundtype%s' % type scene x y tuple scene get size view to disp mat np array [[ x / 2 0 0 0 0 0 x / 2 0 ] [0 0 - y / 2 0 0 0 y / 2 0 ] [0 0 0 0 1 0 0 0] [0 0 0 0 0 0 1 0]] return view to disp mat
def completions sorting key word word word lower prio 1 prio 2 0 0 if word startswith ' ' prio 1 2elif word startswith ' ' prio 1 1if word endswith ' ' prio 1 -1 if word startswith '%%' if not '%' in word[ 2 ] word word[ 2 ]prio 2 2elif word startswith '%' if not '%' in word[ 1 ] word word[ 1 ]prio 2 1return prio 1 word prio 2
def field definition resource chained fields definition config DOMAIN[resource]subfields chained fields split ' ' for field in subfields if field not in definition get 'schema' {} if 'data relation' in definition sub resource definition['data relation']['resource']definition config DOMAIN[sub resource]if field not in definition['schema'] returndefinition definition['schema'][field]field type definition get 'type' if field type 'list' definition definition['schema']elif field type 'objectid' passreturn definition
def remove article text u'' return re sub u' ?i ^ ? ? A ? \\s+to n? The \\s \\w ' u'\\ 1 ' text
def uid pid start time parameter time time 'uid' status path '/proc/%s/status' % pid uid line get line status path ' Uid ' parameter try result int uid line split [1 ] log runtime parameter '%s[ Uid]' % status path start time return resultexcept exc IO Error 'unabletoparsethe%s Uidentry %s' % status path uid line log failure parameter exc raise exc
def pre Build site optimize site config get 'optimize' [] if 'js' in optimize site external manager register optimizer Closure JS Optimizer if 'css' in optimize site external manager register optimizer YUICSS Optimizer
def get ch type inst ch type if ch type is None for type in ['mag' 'grad' 'planar 1 ' 'planar 2 ' 'eeg'] if type in inst ch type type breakelse raise Runtime Error ' Noplottablechanneltypesfound' return ch type
def do terminate threads whitelist list for t in threading enumerate if not isinstance t Terminatable Thread continueif whitelist and t not in whitelist continuet schedule termination t stop and join
def archive cwd output rev 'tip' fmt None prefix None user None cmd ['hg' 'archive' '{ 0 }' format output '--rev' '{ 0 }' format rev ]if fmt cmd append '--type' cmd append '{ 0 }' format fmt if prefix cmd append '--prefix' cmd append '"{ 0 }"' format prefix return salt ['cmd run'] cmd cwd cwd runas user python shell False
def archive cwd output rev 'tip' fmt None prefix None user None cmd ['hg' 'archive' '{ 0 }' format output '--rev' '{ 0 }' format rev ]if fmt cmd append '--type' cmd append '{ 0 }' format fmt if prefix cmd append '--prefix' cmd append '"{ 0 }"' format prefix return salt ['cmd run'] cmd cwd cwd runas user python shell False
def regions regions get regions 'route 53 ' region cls Route 53 Region Info connection cls Route 53 Connection regions append Route 53 Region Info name 'universal' endpoint 'route 53 amazonaws com' connection cls Route 53 Connection return regions
def get row row key if row is not None value row[ 0 ]if isinstance value sqlite 3 Binary bytes and key 'resumed from' value c Pickle loads bytes value return valueraise Key Error key
def dependency check registry xml parent data dependency check XML Sub Element xml parent 'org jenkinsci plugins Dependency Check Dependency Check Publisher' helpers build trends publisher '[DEPENDENCYCHECK]' dependency check data
def dependency check registry xml parent data dependency check XML Sub Element xml parent 'org jenkinsci plugins Dependency Check Dependency Check Publisher' helpers build trends publisher '[DEPENDENCYCHECK]' dependency check data
def customize config vars config vars if not supports universal builds remove universal flags config vars override all archs config vars check for unavailable sdk config vars return config vars
def count 1 Bits num ret 0while num > 0 num num >> 1 ret + 1return ret
@control command args [ u'task name' text t u'soft' float u'hard' float ] signature u'<task name><soft secs>[hard secs]' def time limit state task name None hard None soft None **kwargs try task state app tasks[task name]except Key Error logger error u' Changetimelimitattemptforunknowntask%s' task name exc info True return nok u'unknowntask' task soft time limit softtask time limit hardlogger info u' Newtimelimitsfortasksoftype%s soft %shard %s' task name soft hard return ok u'timelimitssetsuccessfully'
@control command args [ u'task name' text t u'soft' float u'hard' float ] signature u'<task name><soft secs>[hard secs]' def time limit state task name None hard None soft None **kwargs try task state app tasks[task name]except Key Error logger error u' Changetimelimitattemptforunknowntask%s' task name exc info True return nok u'unknowntask' task soft time limit softtask time limit hardlogger info u' Newtimelimitsfortasksoftype%s soft %shard %s' task name soft hard return ok u'timelimitssetsuccessfully'
@must have permission ADMIN @must be valid projectdef new draft registration auth node *args **kwargs if node is registration raise HTTP Error http FORBIDDEN data {'message short' " Can'tcreatedraft" 'message long' ' Creatingdraftregistrationsonregisteredprojectsisnotallowed '} data request valuesschema name data get 'schema name' if not schema name raise HTTP Error http BAD REQUEST data {'message short' ' Mustspecifyaschema name' 'message long' ' Pleasespecifyaschema name'} schema version data get 'schema version' 2 meta schema get schema or fail Q 'name' 'eq' schema name & Q 'schema version' 'eq' int schema version draft Draft Registration create from node node user auth user schema meta schema data {} return redirect node web url for 'edit draft registration page' draft id draft id
def bool to bitarray value value value flatbit no 7byte 0bytes []for v in value if v byte 1 << bit no if bit no 0 bytes append byte bit no 7byte 0else bit no - 1if bit no 7 bytes append byte return struct pack u'{}B' format len bytes *bytes
def bool to bitarray value value value flatbit no 7byte 0bytes []for v in value if v byte 1 << bit no if bit no 0 bytes append byte bit no 7byte 0else bit no - 1if bit no 7 bytes append byte return struct pack u'{}B' format len bytes *bytes
def Start Flow And Wait client id token None timeout DEFAULT TIMEOUT **flow args flow urn flow GRR Flow Start Flow client id client id token token sync True **flow args Wait For Flow flow urn token token timeout timeout return flow urn
def Find Api Jars lib dir result {}for jar file in Files Matching lib dir lambda f f endswith ' jar' manifest jarfile Read Manifest jar file if manifest section manifest sections get 'com/google/appengine/api/' if section and ' Specification- Version' in section result[jar file] section[' Specification- Version']return result
def listen ip Addr '127 0 0 1' port 9001 global osc Threadsthread id '%s %d' % ip Addr port if thread id in osc Threads return Logger debug 'OSC Startthread<%s>' % thread id osc Threads[thread id] OSC Server ip Addr ip Addr port port osc Threads[thread id] start return thread id
def is python interpreter valid name filename pattern ' *python \\d\\ ?\\d* ? w ? exe ?$'if re match pattern filename flags re I is None return Falseelse return True
def is python interpreter valid name filename pattern ' *python \\d\\ ?\\d* ? w ? exe ?$'if re match pattern filename flags re I is None return Falseelse return True
def get Plugin File Names craft Sequence get Read Craft Sequence craft Sequence sort return craft Sequence
def get course display string descriptor return '' join [descriptor display org with default descriptor display number with default]
def get course display string descriptor return '' join [descriptor display org with default descriptor display number with default]
def pack session item init globals session SESSION HANDLER get item sessid if session and session conn time item conn time return item conn time and item sessid and ' packed session ' GA item 'sessid' GA item 'conn time' return None
def pack session item init globals session SESSION HANDLER get item sessid if session and session conn time item conn time return item conn time and item sessid and ' packed session ' GA item 'sessid' GA item 'conn time' return None
def pack session item init globals session SESSION HANDLER get item sessid if session and session conn time item conn time return item conn time and item sessid and ' packed session ' GA item 'sessid' GA item 'conn time' return None
def seterr divide False if errdict['divide'] divide clear cache errdict['divide'] divide
def seterr divide False if errdict['divide'] divide clear cache errdict['divide'] divide
def Timestamp year month day hour minute second return datetime datetime year month day hour minute second
def get site dict app name 'filebrowser' if app name not in sites cache return {}deployed get resolver get urlconf app dict[app name]return dict k v for k v in sites cache[app name] items if k in deployed
def get site dict app name 'filebrowser' if app name not in sites cache return {}deployed get resolver get urlconf app dict[app name]return dict k v for k v in sites cache[app name] items if k in deployed
def describe api key api Key region None key None keyid None profile None try conn get conn region region key key keyid keyid profile profile response conn get api key api Key api Key return {'api Key' convert datetime str response }except Client Error as e return {'error' salt utils boto 3 get error e }
def Element *args **kw v html parser makeelement *args **kw return v
def diop general sum of even powers eq limit 1 var coeff diop type classify diop eq dict False if diop type 'general sum of even powers' for k in coeff keys if k is Pow and coeff[k] p k expreturn diop general sum of even powers var p - coeff[ 1 ] limit
@pytest fixturedef monkeypatch mpatch Monkey Patch yield mpatch mpatch undo
@pytest fixturedef monkeypatch mpatch Monkey Patch yield mpatch mpatch undo
@pytest fixturedef monkeypatch mpatch Monkey Patch yield mpatch mpatch undo
def get service hass config discovery info None mail service Mail Notification Service config get CONF SERVER config get CONF PORT config get CONF SENDER config get CONF STARTTLS config get CONF USERNAME config get CONF PASSWORD config get CONF RECIPIENT config get CONF DEBUG if mail service connection is valid return mail serviceelse return None
def adjust Logging Formatter if hasattr FORMATTER ' format' returndef format record message FORMATTER format record message boldify Message message if kb get 'prepend Flag' message '\n%s' % message kb prepend Flag Falsereturn message FORMATTER format FORMATTER format FORMATTER format format
def adjust Logging Formatter if hasattr FORMATTER ' format' returndef format record message FORMATTER format record message boldify Message message if kb get 'prepend Flag' message '\n%s' % message kb prepend Flag Falsereturn message FORMATTER format FORMATTER format FORMATTER format format
def choose random tests tests ratio seed rnd random Random rnd seed seed if isinstance tests unittest Test Suite tests flatten suite tests tests rnd sample tests int len tests * ratio tests sorted tests key lambda case case id return unittest Test Suite tests
def get Bounded Latitude latitude return round min 179 9 max 0 1 latitude 1
def colors name if color enabled return colors[name]return ''
def token freqs doc freq defaultdict int for tok in tokens doc freq[tok] + 1return freq
def addif br None iface None return os dispatch 'addif' br iface
def setup hass config import thingspeakconf config[DOMAIN]api key conf get CONF API KEY channel id conf get CONF ID entity conf get CONF WHITELIST try channel thingspeak Channel channel id api key api key timeout TIMEOUT channel get except Request Exception LOGGER error ' Errorwhileaccessingthe Thing Speakchannel Pleasecheckthatthechannelexistsandyour AP Ikeyiscorrect ' return Falsedef thingspeak listener entity id old state new state ' Listenforneweventsandsendthemtothingspeak 'if new state is None or new state state in STATE UNKNOWN '' STATE UNAVAILABLE returntry if new state entity id entity return state state helper state as number new state except Value Error returntry channel update {'field 1 ' state} except Request Exception LOGGER error " Errorwhilesendingvalue'%s'to Thingspeak" state event track state change hass entity thingspeak listener return True
def softmax X copy True if copy X np copy X max prob np max X axis 1 reshape -1 1 X - max probnp exp X X sum prob np sum X axis 1 reshape -1 1 X / sum probreturn X
def find intersection x tr bounds lb ub lb centered lb - x ub centered ub - x lb total np maximum lb centered - tr bounds ub total np minimum ub centered tr bounds orig l np equal lb total lb centered orig u np equal ub total ub centered tr l np equal lb total - tr bounds tr u np equal ub total tr bounds return lb total ub total orig l orig u tr l tr u
def setup platform hass config add devices discovery info None name config get CONF NAME stop config get CONF STOP ID route config get CONF ROUTE data Public Transport Data stop route add devices [ Dublin Public Transport Sensor data stop route name ]
def head url **kwargs kwargs setdefault 'headers' dict useragent header config kwargs pop 'config' None if config kwargs setdefault 'verify' get tls cacert url config with warnings catch warnings if not kwargs get 'verify' warnings filterwarnings 'ignore' category Insecure Request Warning return requests get url **kwargs
def can view courses for username requesting user target username if requesting user username target username return Trueelif not target username raise Type Error 'target usernamemustbespecified' else staff Global Staff return staff has user requesting user
def can view courses for username requesting user target username if requesting user username target username return Trueelif not target username raise Type Error 'target usernamemustbespecified' else staff Global Staff return staff has user requesting user
def between marker what None keepempty False marker re re compile marker def process app what name obj options lines if what and what not in what returndeleted 0delete Trueorig lines lines[ ]for i line in enumerate orig lines if delete lines pop i - deleted deleted + 1if marker re match line delete not delete if delete lines pop i - deleted deleted + 1if not lines and not keepempty lines[ ] orig linesif lines and lines[ -1 ] lines append '' return process
def init history interface Web History Interface history parent history Q Web History Interface set Default Interface interface
def can do meijer a1 a2 b1 b2 numeric True from sympy import unpolarify expandr hyperexpand meijerg a1 a2 b1 b2 z if r has meijerg return Falser unpolarify expand r force True power base True power exp False mul False log False multinomial False basic False if not numeric return Truerepl {}for n a in enumerate meijerg a1 a2 b1 b2 z free symbols - {z} repl[a] randcplx n return tn meijerg a1 a2 b1 b2 z subs repl r subs repl z
def can do meijer a1 a2 b1 b2 numeric True from sympy import unpolarify expandr hyperexpand meijerg a1 a2 b1 b2 z if r has meijerg return Falser unpolarify expand r force True power base True power exp False mul False log False multinomial False basic False if not numeric return Truerepl {}for n a in enumerate meijerg a1 a2 b1 b2 z free symbols - {z} repl[a] randcplx n return tn meijerg a1 a2 b1 b2 z subs repl r subs repl z
def run as pg command with cd '~postgres' return sudo command user 'postgres'
def vech A length A shape[ 1 ]vechvec []for i in range length b iwhile b < length vechvec append A[ b i ] b b + 1 vechvec np asarray vechvec return vechvec
def survey build Questionnaire From Template template id questions survey get All Questions For Template template id return build Questions Form questions read Only True
def survey build Questionnaire From Template template id questions survey get All Questions For Template template id return build Questions Form questions read Only True
@commands u'info' @example u' infoallboardmemberspresent' def meetinginfo bot trigger if not ismeetingrunning trigger sender bot say u" Can'tdothat startmeetingfirst" returnif not trigger group 2 bot say u'try infosomeinformativething' returnif not ischair trigger nick trigger sender bot say u' Onlymeetingheadorchairscandothat' returnlogplain u'INFO ' + trigger group 2 trigger sender log HTML listitem trigger group 2 trigger sender bot say u'\x 02 INFO\x 0 f ' + trigger group 2
def check whitelist request host whitelist if ' ' not in request host request host request host + ' 80 ' if request host in whitelist return Truereturn any match host request host host for host in whitelist
def queue models models context MAX CYCLES 5model queue []number remaining models len models allowed cycles MAX CYCLE Swhile number remaining models > 0 previous number remaining models number remaining modelsmodel models pop 0 if check dependencies model model queue model class Model Code model model context context model queue append model class else models append model number remaining models len models if number remaining models previous number remaining models allowed cycles - 1if allowed cycles < 0 missing models [ Model Code model m context context for m in models]model queue + missing modelsmodels[ ] missing modelsbreakelse allowed cycles MAX CYCLE Sreturn model queue
@ Configurable Filter executable 'HTML TIDY EXECUTABLE' def html tidy withconfig infile executable 'tidy 5 ' return html tidy runner infile '-quiet--show-infono--show-warningsno-utf 8 -indent-configtidy 5 conf-modify% 1 ' executable executable
def service get all by binary context binary include disabled False return IMPL service get all by binary context binary include disabled include disabled
def write index group return u'%s %s' % settings ES INDEX PREFIX settings ES WRITE INDEXES[group]
def normalize index df index if not isinstance df Data Frame return indexelif isinstance index list return [ normalize index df col for col in index]elif isinstance index Series and index name in df columns and index name df[index name] name return index nameelif isinstance index Data Frame and set index columns issubset df columns and index name df[index columns] name return list index columns else return index
def normalize index df index if not isinstance df Data Frame return indexelif isinstance index list return [ normalize index df col for col in index]elif isinstance index Series and index name in df columns and index name df[index name] name return index nameelif isinstance index Data Frame and set index columns issubset df columns and index name df[index columns] name return list index columns else return index
def regions from boto cognito identity layer 1 import Cognito Identity Connectionreturn get regions 'cognito-identity' connection cls Cognito Identity Connection
def commit container repository None tag None message None author None conf None status base status copy client get client try container get container infos container [' Id']commit info client commit container repository repository tag tag message message author author conf conf found Falsefor k in ' Id' 'id' 'ID' if k in commit info found Trueimage id commit info[k]if not found raise Exception ' Invalidcommitreturn' image get image infos image id [' Id']comment ' Image{ 0 }createdfrom{ 1 }' format image container valid status id image out commit info comment comment except Exception invalid status id container out traceback format exc return status
def Char c if len c 1 result Code Range ord c ord c + 1 else result Special Symbol c result str ' Char %s ' % repr c return result
def scale image factor resample Image NEAREST if factor 1 return image copy elif factor < 0 raise Value Error 'thefactormustbegreaterthan 0 ' else size int round factor * image width int round factor * image height return image resize size resample
def scale image factor resample Image NEAREST if factor 1 return image copy elif factor < 0 raise Value Error 'thefactormustbegreaterthan 0 ' else size int round factor * image width int round factor * image height return image resize size resample
def scale image factor resample Image NEAREST if factor 1 return image copy elif factor < 0 raise Value Error 'thefactormustbegreaterthan 0 ' else size int round factor * image width int round factor * image height return image resize size resample
def find release date source xblock if xblock category 'chapter' return xblockparent location modulestore get parent location xblock location revision Module Store Enum Revision Option draft preferred if not parent location return xblockparent modulestore get item parent location if parent start xblock start return xblockelse return find release date source parent
def find release date source xblock if xblock category 'chapter' return xblockparent location modulestore get parent location xblock location revision Module Store Enum Revision Option draft preferred if not parent location return xblockparent modulestore get item parent location if parent start xblock start return xblockelse return find release date source parent
def find release date source xblock if xblock category 'chapter' return xblockparent location modulestore get parent location xblock location revision Module Store Enum Revision Option draft preferred if not parent location return xblockparent modulestore get item parent location if parent start xblock start return xblockelse return find release date source parent
def test type constructor overloads global calledimport clrclr Add Reference ' Iron Python Test' import Iron Python Test interop net type clrtype as IP Tcalled Falseclass My Type type def clrtype self global calledcalled Truereturn IPT Sanity Constructor Overloadsclass X object metaclass My Typedef init self *args **kwargs pass Are Equal called True temp X Assert str temp startswith '<first' str temp
def set connection info url user True section keypath reg info user try hive winreg Connect Registry None section try key winreg Create Key hive keypath except passkey winreg Open Key hive keypath mykey winreg Create Key key 'api' winreg Set Value Ex mykey 'url' None winreg REG SZ url winreg Close Key mykey winreg Close Key key except Windows Error if user set connection info url user False passfinally winreg Close Key hive
def test replace column qtable a [1 2 3] * u m b [4 5 6]t table Q Table [a b] names ['a' 'b'] ta t['a']tb t['b']ta info meta {'aa' [0 1 2 3 4]}ta info format '%f't replace column 'a' a to 'cm' assert np all t['a'] ta assert t['a'] is not ta assert t['b'] is tb assert t colnames ['a' 'b'] assert t['a'] info meta is None assert t['a'] info format is None
def play nice with threads sleep True weak False deadline None if weak or threading active Count < 4 time sleep 0 return 0deadline time time + 5 if deadline is None else deadline while True activity threshold 180 - time time + LAST USER ACTIVITY / 120 delay max 0 001 min 0 1 0 1 * activity threshold if not sleep breakif LIVE USER ACTIVITIES < 1 time sleep delay else time sleep max delay 0 25 if QUITTING or LIVE USER ACTIVITIES < 1 breakif time time > deadline breakreturn delay
def play nice with threads sleep True weak False deadline None if weak or threading active Count < 4 time sleep 0 return 0deadline time time + 5 if deadline is None else deadline while True activity threshold 180 - time time + LAST USER ACTIVITY / 120 delay max 0 001 min 0 1 0 1 * activity threshold if not sleep breakif LIVE USER ACTIVITIES < 1 time sleep delay else time sleep max delay 0 25 if QUITTING or LIVE USER ACTIVITIES < 1 breakif time time > deadline breakreturn delay
def play nice with threads sleep True weak False deadline None if weak or threading active Count < 4 time sleep 0 return 0deadline time time + 5 if deadline is None else deadline while True activity threshold 180 - time time + LAST USER ACTIVITY / 120 delay max 0 001 min 0 1 0 1 * activity threshold if not sleep breakif LIVE USER ACTIVITIES < 1 time sleep delay else time sleep max delay 0 25 if QUITTING or LIVE USER ACTIVITIES < 1 breakif time time > deadline breakreturn delay
def load check from places check config check name checks places agent Config load success load failure {} {} for check path builder in checks places check path check path builder check name if not os path exists check path continue check is valid check class load failure get valid check class check name check path if not check is valid continue load success load failure initialize check check config check name check class agent Config update python path check config log debug ' Loaded%s' % check path breakreturn load success load failure
def load check from places check config check name checks places agent Config load success load failure {} {} for check path builder in checks places check path check path builder check name if not os path exists check path continue check is valid check class load failure get valid check class check name check path if not check is valid continue load success load failure initialize check check config check name check class agent Config update python path check config log debug ' Loaded%s' % check path breakreturn load success load failure
def load check from places check config check name checks places agent Config load success load failure {} {} for check path builder in checks places check path check path builder check name if not os path exists check path continue check is valid check class load failure get valid check class check name check path if not check is valid continue load success load failure initialize check check config check name check class agent Config update python path check config log debug ' Loaded%s' % check path breakreturn load success load failure
def handle 405 environ start response methods util wsgi path item environ ' methods' headers {}if methods headers['allow'] str methods raise webob exc HTTP Method Not Allowed ' Themethodspecifiedisnotallowedforthisresource ' headers headers json formatter util json error formatter
def select directory paths if not paths return core getcwd for path in paths if core isdir path return pathreturn os path dirname paths[ 0 ]
def prefix unit unit prefixes from sympy physics unitsystems units import Unitprefixed units []for prefix in prefixes prefixed units append Unit unit abbrev unit abbrev prefix prefixes[prefix] return prefixed units
def get nics vm nics []if 'public lan' in vm firewall rules []lan id set public lan int vm ['public lan'] if 'public firewall rules' in vm firewall rules get firewall rules vm ['public firewall rules'] nics append NIC lan lan id name 'public' firewall rules firewall rules if 'private lan' in vm firewall rules []if 'private firewall rules' in vm firewall rules get firewall rules vm ['private firewall rules'] nic NIC lan int vm ['private lan'] name 'private' firewall rules firewall rules if 'nat' in vm nic nat vm ['nat']nics append nic return nics
@tx atomicdef remove vote obj user obj type apps get model 'contenttypes' ' Content Type' objects get for model obj with advisory lock 'vote-{}-{}' format obj type id obj id qs Vote objects filter content type obj type object id obj id user user if not qs exists returnqs delete votes Votes objects get or create content type obj type object id obj id votes count F 'count' - 1 votes save
def roles required *roles def wrapper fn @wraps fn def decorated view *args **kwargs perms [ Permission Role Need role for role in roles]for perm in perms if not perm can if security unauthorized callback return security unauthorized callback else return get unauthorized view return fn *args **kwargs return decorated viewreturn wrapper
def roles required *roles def wrapper fn @wraps fn def decorated view *args **kwargs perms [ Permission Role Need role for role in roles]for perm in perms if not perm can if security unauthorized callback return security unauthorized callback else return get unauthorized view return fn *args **kwargs return decorated viewreturn wrapper
def roles required *roles def wrapper fn @wraps fn def decorated view *args **kwargs perms [ Permission Role Need role for role in roles]for perm in perms if not perm can if security unauthorized callback return security unauthorized callback else return get unauthorized view return fn *args **kwargs return decorated viewreturn wrapper
def read footer file obj footer size get footer size file obj if logger is Enabled For logging DEBUG logger debug u' Footersizeinbytes %s' footer size file obj seek - 8 + footer size 2 tin T File Transport file obj pin T Compact Protocol Factory get protocol tin fmd parquet thrift File Meta Data fmd read pin return fmd
def require context fn @functools wraps fn def require cuda context *args **kws get context return fn *args **kws return require cuda context
def require context fn @functools wraps fn def require cuda context *args **kws get context return fn *args **kws return require cuda context
def parse and instantiate parent to text indent all tokens seen ts tokenize snippet text parent to text indent ALLOWED TOKENS ALLOWED TOKENS IN TABSTOPS TOKEN TO TEXTOBJECT resolve ambiguity all tokens seen ts finalize all tokens seen ts parent to
def parse and instantiate parent to text indent all tokens seen ts tokenize snippet text parent to text indent ALLOWED TOKENS ALLOWED TOKENS IN TABSTOPS TOKEN TO TEXTOBJECT resolve ambiguity all tokens seen ts finalize all tokens seen ts parent to
def zmap scores compare axis 0 ddof 0 scores compare map np asanyarray [scores compare] mns compare mean axis axis sstd compare std axis axis ddof ddof if axis and mns ndim < compare ndim return scores - np expand dims mns axis axis / np expand dims sstd axis axis else return scores - mns / sstd
def thin lv create vg name thinpool name 'lvthinpool' thinpool size '1 5G' thinlv name 'lvthin' thinlv size '1 G' tp cmd 'lvcreate--thinpool%s--size%s%s' % thinpool name thinpool size vg name try utils run tp cmd except error Cmd Error as detail logging debug detail raise error Test Error ' Createthinvolumepoolfailed ' logging debug ' Createdthinvolumepool %s' thinpool name lv cmd 'lvcreate--name%s--virtualsize%s--thin%s/%s' % thinlv name thinlv size vg name thinpool name try utils run lv cmd except error Cmd Error as detail logging debug detail raise error Test Error ' Createthinvolumefailed ' logging debug ' Createdthinvolume %s' thinlv name return thinpool name thinlv name
def get Fabmetheus Tools Path sub Name '' return get Joined Path get Fabmetheus Utilities Path 'fabmetheus tools' sub Name
def col create fid body url build url RESOURCE id fid route 'col' return request 'post' url json body
def col create fid body url build url RESOURCE id fid route 'col' return request 'post' url json body
@synchronized IO LOCK def remove data id path path os path join path id try if os path exists path os remove path logging info '%sremoved' path except logging debug ' Failedtoremove%s' path
def remove repeating substr s index s find substr if index > 0 return u'' join [s[ index + len substr ] s[ index + len substr ] replace substr u'' ] return s
def stripascii string ord ord if sys version info[ 0 ] < 3 else lambda x x i len string while i i - 1if 8 < ord string[i] < 127 breakelse i -1 return string[ i + 1 ]
def surrogate escape error chars error object[error start error end]assert len chars 1 val ord chars val + 56320 return builtin unichr val error end
def one Transport Test test Method @wraps test Method def actual Test Method builder other Connectable Protocol class Server Protocol Connectable Protocol def connection Made self try test Method builder self reactor self transport finally if self transport is not None self transport lose Connection if other transport is not None other transport lose Connection server Protocol Server Protocol run Protocols With Reactor builder server Protocol other TCP Creator return actual Test Method
def one Transport Test test Method @wraps test Method def actual Test Method builder other Connectable Protocol class Server Protocol Connectable Protocol def connection Made self try test Method builder self reactor self transport finally if self transport is not None self transport lose Connection if other transport is not None other transport lose Connection server Protocol Server Protocol run Protocols With Reactor builder server Protocol other TCP Creator return actual Test Method
def one Transport Test test Method @wraps test Method def actual Test Method builder other Connectable Protocol class Server Protocol Connectable Protocol def connection Made self try test Method builder self reactor self transport finally if self transport is not None self transport lose Connection if other transport is not None other transport lose Connection server Protocol Server Protocol run Protocols With Reactor builder server Protocol other TCP Creator return actual Test Method
def test strf index ea ea rules[ 0 ]['index'] 'logstash-%Y %m %d'ea rules[ 0 ]['use strftime index'] Truestart ts to dt '2015 - 01 - 02 T 12 34 45 Z' end ts to dt '2015 - 01 - 02 T 16 15 14 Z' assert ea get index ea rules[ 0 ] start end 'logstash- 2015 01 02 ' end ts to dt '2015 - 01 - 03 T 01 02 03 Z' assert ea get index ea rules[ 0 ] start end 'logstash- 2015 01 02 logstash- 2015 01 03 ' assert ea get index ea rules[ 0 ] 'logstash-*' ea rules[ 0 ]['index'] 'logstash-%Y %m'assert ea get index ea rules[ 0 ] 'logstash-*' ea rules[ 0 ]['index'] 'logstash-%Y %m-stuff'assert ea get index ea rules[ 0 ] 'logstash-*-stuff'
def test strf index ea ea rules[ 0 ]['index'] 'logstash-%Y %m %d'ea rules[ 0 ]['use strftime index'] Truestart ts to dt '2015 - 01 - 02 T 12 34 45 Z' end ts to dt '2015 - 01 - 02 T 16 15 14 Z' assert ea get index ea rules[ 0 ] start end 'logstash- 2015 01 02 ' end ts to dt '2015 - 01 - 03 T 01 02 03 Z' assert ea get index ea rules[ 0 ] start end 'logstash- 2015 01 02 logstash- 2015 01 03 ' assert ea get index ea rules[ 0 ] 'logstash-*' ea rules[ 0 ]['index'] 'logstash-%Y %m'assert ea get index ea rules[ 0 ] 'logstash-*' ea rules[ 0 ]['index'] 'logstash-%Y %m-stuff'assert ea get index ea rules[ 0 ] 'logstash-*-stuff'
def truncate to Truncate chars To Keep 50 if len to Truncate > chars To Keep truncated to Truncate[ chars To Keep] + ' ' return truncatedelse return to Truncate
@ api version 1 21 @ client version '1 5 0' def networks names None ids None response client wrapper 'networks' names names ids ids clear context return response
def assert list obj expected type string types can be none True default key arg None allowable list Fileset Ordered Set set tuple raise type Value Error def get key msg key None if key is None return u''else return u" Inkey'{}' " format key allowable tuple allowable key msg get key msg key arg val objif val is None if can be none val list default else raise raise type u'{} Expectedanobjectofacceptabletype{} received Noneandcan be noneis False' format key msg allowable if isinstance val allowable lst list val for e in lst if not isinstance e expected type raise raise type u'{} Expectedalistcontainingvaluesoftype{} insteadgotavalue{}of{}' format key msg expected type e e class return lstelse raise raise type u'{} Expectedanobjectofacceptabletype{} received{}instead' format key msg allowable val
def write metadata pil file metadata from PIL import Image Png Image Pluginim Image open file meta Png Image Plugin Png Info for k v in metadata items meta add text k v 0 im save file 'PNG' pnginfo meta return True
def clean gallery out build dir build image dir os path join build dir ' images' if os path exists build image dir filelist os listdir build image dir for filename in filelist if filename startswith 'sphx glr' and filename endswith 'png' os remove os path join build image dir filename
def lookup Mail Rename name timeout None return get Resolver lookup Mail Rename name timeout
def get initializable thread fields context ret get editable fields Thread user id context['cc requester']['id'] type 'thread' context ret NON UPDATABLE THREAD FIELD Sreturn ret
def unique DLL Names create Assembly '' 'ZERO' 1 default filename '0 ' create Assembly '' 'ONE' 1 default filename '1 ' create Assembly '' 'a' 1 default filename 'a' create Assembly '' 'UNDERSCORE' 1 default filename ' ' create Assembly '' 'WHITESPACE' 1 default filename 'a A' temp ''for i in xrange 0 15 temp temp + 'aaaaaaaaaa' create Assembly '' 'BIGFILENAME' 1 default filename temp
def has rational power expr symbol a p q Wild 'a' Wild 'p' Wild 'q' pattern match expr match a * p ** q or {} if pattern match get a S Zero is S Zero return False S One elif p not in pattern match keys return False S One elif isinstance pattern match[q] Rational and pattern match[p] has symbol if not pattern match[q] q S One return True pattern match[q] q if not isinstance pattern match[a] Pow or isinstance pattern match[a] Mul return False S One else return has rational power pattern match[a] symbol
def has rational power expr symbol a p q Wild 'a' Wild 'p' Wild 'q' pattern match expr match a * p ** q or {} if pattern match get a S Zero is S Zero return False S One elif p not in pattern match keys return False S One elif isinstance pattern match[q] Rational and pattern match[p] has symbol if not pattern match[q] q S One return True pattern match[q] q if not isinstance pattern match[a] Pow or isinstance pattern match[a] Mul return False S One else return has rational power pattern match[a] symbol
def str to bool value if isinstance value basestring value value strip lower if value in ['true' 't' 'yes' 'y'] return Trueelif value in ['false' 'f' 'no' 'n' ''] return Falseelse raise Not Implemented Error ' Unknownbool%s' % value return value
def str to bool value if isinstance value basestring value value strip lower if value in ['true' 't' 'yes' 'y'] return Trueelif value in ['false' 'f' 'no' 'n' ''] return Falseelse raise Not Implemented Error ' Unknownbool%s' % value return value
def extend config config config items for key val in list config items items if hasattr config key setattr config key val return config
def extend config config config items for key val in list config items items if hasattr config key setattr config key val return config
def test default task loading docs tasks load fabfile fabfile 'default tasks' ok isinstance crawl 'mymodule' tasks Task
def invalidate cms page cache version get cache version set cache version version + 1
def mobile view request url '/' if not url url '/' view args kwargs resolve url if view mobile view raise Http 404 'OMG Iseemyself ' kwargs['request'] requestkwargs['response format'] 'html'response view *args **kwargs if response status code 302 and not response[' Location'][ 2] '/m' response[' Location'] '/m' + response[' Location'] return response
def get vnc port session min port CONF vmware vnc portport total CONF vmware vnc port totalallocated ports get allocated vnc ports session max port min port + port total for port in range min port max port if port not in allocated ports return portraise exception Console Port Range Exhausted min port min port max port max port
def build absolute uri host url path None path path or '' if path startswith 'http //' or path startswith 'https //' return pathif host url endswith '/' and path startswith '/' path path[ 1 ]return host url + path
def build absolute uri host url path None path path or '' if path startswith 'http //' or path startswith 'https //' return pathif host url endswith '/' and path startswith '/' path path[ 1 ]return host url + path
def set key value service None profile None service get service service profile keyring set password service key value
def token to cms signed text copy of text signed text replace '-' '/' lines ['-----BEGINCMS-----']lines + [copy of text[n n + 64 ] for n in range 0 len copy of text 64 ]lines append '-----ENDCMS-----\n' return '\n' join lines
def skip without tool tool id def method wrapper method def get tool ids api test case index api test case galaxy interactor get 'tools' data dict in panel False tools index json tool ids [itemgetter 'id' for in tools]return tool idsdef wrapped method api test case *args **kwargs if tool id not in get tool ids api test case from nose plugins skip import Skip Testraise Skip Test return method api test case *args **kwargs wrapped method name method name return wrapped methodreturn method wrapper
def flag current flag flag flag flag flag << 1return current flag
def aggregate get by host context host key None return IMPL aggregate get by host context host key
def get pb likelihood likelihood likelihood pb image annotator pb 2 Likelihood Name likelihood return Likelihood[likelihood pb]
def get pb likelihood likelihood likelihood pb image annotator pb 2 Likelihood Name likelihood return Likelihood[likelihood pb]
def unregister ident if ident in handlers del handlers[ident]
def unregister ident if ident in handlers del handlers[ident]
def del api key url data url make url api key url req Request url headers {' Content- Type' 'application/json'} data json dumps data req get method lambda 'DELETE' return json loads urlopen req read
def clean Name n if not n return u''n n replace ' Filmographybytypefor' '' return n
def get and group by field cr uid obj ids field context None res {}for record in obj read cr uid ids [field] context context key record[field]res setdefault key[ 0 ] if isinstance key tuple else key [] append record['id'] return res
def is running from main thread return tornado ioloop IO Loop current instance False
def document tabs r tab opts [{'tablename' 'assess rat' 'resource' 'rat' 'one title' '1 Assessment' 'num title' ' Assessments'} {'tablename' 'irs ireport' 'resource' 'ireport' 'one title' '1 Incident Report' 'num title' ' Incident Reports'} {'tablename' 'cr shelter' 'resource' 'shelter' 'one title' '1 Shelter' 'num title' ' Shelters'} {'tablename' 'req req' 'resource' 'req' 'one title' '1 Request' 'num title' ' Requests'}]tabs [ T ' Details' None ]crud string s3 base S3 CRUD crud stringfor tab opt in tab opts tablename tab opt['tablename']if tablename in db and document id in db[tablename] table db[tablename]query table deleted False & table document id r id tab count db query count if tab count 0 label crud string tablename 'label create' elif tab count 1 label tab opt['one title']else label T str tab count + tab opt['num title'] tabs append label tab opt['resource'] return tabs
def document tabs r tab opts [{'tablename' 'assess rat' 'resource' 'rat' 'one title' '1 Assessment' 'num title' ' Assessments'} {'tablename' 'irs ireport' 'resource' 'ireport' 'one title' '1 Incident Report' 'num title' ' Incident Reports'} {'tablename' 'cr shelter' 'resource' 'shelter' 'one title' '1 Shelter' 'num title' ' Shelters'} {'tablename' 'req req' 'resource' 'req' 'one title' '1 Request' 'num title' ' Requests'}]tabs [ T ' Details' None ]crud string s3 base S3 CRUD crud stringfor tab opt in tab opts tablename tab opt['tablename']if tablename in db and document id in db[tablename] table db[tablename]query table deleted False & table document id r id tab count db query count if tab count 0 label crud string tablename 'label create' elif tab count 1 label tab opt['one title']else label T str tab count + tab opt['num title'] tabs append label tab opt['resource'] return tabs
@pytest mark cmddef test import user nofile with pytest raises Command Error as e call command 'import' assert 'toofewarguments' in str e
def caller name skip 2 stack inspect stack start 0 + skip if len stack < start + 1 return ''parentframe stack[start][ 0 ]name []module inspect getmodule parentframe if module name append module name if 'self' in parentframe f locals name append parentframe f locals['self'] class name codename parentframe f code co nameif codename '<module>' name append codename del parentframereturn ' ' join name
def dismiss notification request course action state id try action state Course Rerun State objects find first id course action state id except Course Action State Item Not Found Error return Http Response Bad Request if action state state Course Rerun UI State Manager State FAILED remove all instructors action state course key action state delete return Json Response {'success' True}
def rename variables fstruct vars None used vars new vars None fs class u'default' if fs class u'default' fs class default fs class fstruct if new vars is None new vars {}if vars is None vars find variables fstruct fs class else vars set vars used vars find variables fstruct fs class union used vars return rename variables copy deepcopy fstruct vars used vars new vars fs class set
def collatz start start int start begin time time steps []while start 1 steps append start if start > 1 if start % 2 0 start start / 2 else start start * 3 + 1 return steps time time - begin
@pytest mark django dbdef test file extension bad File Extension objects create name 'foo' with pytest raises Integrity Error File Extension objects create name 'foo'
@pytest mark django dbdef test file extension bad File Extension objects create name 'foo' with pytest raises Integrity Error File Extension objects create name 'foo'
def get repository name cmd u' Get-PS Repository"{ 0 }"' format name no ret pshell cmd return name not in list modules
def resolve uri s namespaces cdao namespaces cdao to obo True xml style False if cdao to obo and s startswith 'cdao ' return resolve uri 'obo %s' % cdao elements[s[ 5 ]] namespaces cdao to obo for prefix in namespaces if xml style s s replace prefix + ' ' '{%s}' % namespaces[prefix] else s s replace prefix + ' ' namespaces[prefix] return s
def get table names from sql context sql def get table names from plan plan table names []if plan get ' Relation Name' table names append plan[' Relation Name'] if ' Plans' in plan for child plan in plan[' Plans'] table name get table names from plan child plan if table name table names extend table name return table namesresult context['connection'] execute 'EXPLAIN FORMATJSON {0 }' format sql encode 'utf- 8 ' fetchone table names []try query plan json loads result['QUERYPLAN'] plan query plan[ 0 ][' Plan']table names extend get table names from plan plan except Value Error log error ' Couldnotparsequeryplan' return table names
def get table names from sql context sql def get table names from plan plan table names []if plan get ' Relation Name' table names append plan[' Relation Name'] if ' Plans' in plan for child plan in plan[' Plans'] table name get table names from plan child plan if table name table names extend table name return table namesresult context['connection'] execute 'EXPLAIN FORMATJSON {0 }' format sql encode 'utf- 8 ' fetchone table names []try query plan json loads result['QUERYPLAN'] plan query plan[ 0 ][' Plan']table names extend get table names from plan plan except Value Error log error ' Couldnotparsequeryplan' return table names
def get table names from sql context sql def get table names from plan plan table names []if plan get ' Relation Name' table names append plan[' Relation Name'] if ' Plans' in plan for child plan in plan[' Plans'] table name get table names from plan child plan if table name table names extend table name return table namesresult context['connection'] execute 'EXPLAIN FORMATJSON {0 }' format sql encode 'utf- 8 ' fetchone table names []try query plan json loads result['QUERYPLAN'] plan query plan[ 0 ][' Plan']table names extend get table names from plan plan except Value Error log error ' Couldnotparsequeryplan' return table names
@retry 2 delay 0 5 backoff 1 1 def safe deepcopy instance return copy deepcopy instance
def convert otu table relative otu table sample ids otu ids otu counts consensus otu tableotu counts asarray otu counts float otu counts otu counts / otu counts sum otu counts where isnan otu counts 0 0 otu counts return sample ids otu ids otu counts consensus
def gpu safe new x tag '' if hasattr x 'name' and x name is not None nw name x name + tag else nw name Noneif isinstance x theano Constant return x clone nw x x type nw x name nw namereturn nw x
def gpu safe new x tag '' if hasattr x 'name' and x name is not None nw name x name + tag else nw name Noneif isinstance x theano Constant return x clone nw x x type nw x name nw namereturn nw x
def check paired arrays X Y X Y check pairwise arrays X Y if X shape Y shape raise Value Error ' Xand Yshouldbeofsameshape Theywererespectively%rand%rlong ' % X shape Y shape return X Y
def debug option if g['debug'] g['traceback'] append traceback format exc
def debug option if g['debug'] g['traceback'] append traceback format exc
def run command cmd options params [cmd]params extend options return salt ['cmd run all'] params python shell False
def delete neutron ports ports for port in ports device ip lib IP Device port if device exists device link delete LOG info LI ' Deletingport %s' port
def update contact doc method contact name frappe db get value u' Contact' {u'email id' doc name} if contact name contact frappe get doc u' Contact' contact name for key in u'first name' u'last name' u'phone' if doc get key contact set key doc get key contact flags ignore mandatory Truecontact save ignore permissions True
def find sink node digr node digr nodes [0 ]while digr neighbors node node digr neighbors node [0 ]return node
def find sink node digr node digr nodes [0 ]while digr neighbors node node digr neighbors node [0 ]return node
def find uncommitted filefields sender instance **kwargs uncommitted instance uncommitted filefields []fields sender meta fieldsif kwargs get 'update fields' None update fields set kwargs['update fields'] fields update fields intersection fields for field in fields if isinstance field File Field if not getattr instance field name committed uncommitted append field name
def find uncommitted filefields sender instance **kwargs uncommitted instance uncommitted filefields []fields sender meta fieldsif kwargs get 'update fields' None update fields set kwargs['update fields'] fields update fields intersection fields for field in fields if isinstance field File Field if not getattr instance field name committed uncommitted append field name
def find uncommitted filefields sender instance **kwargs uncommitted instance uncommitted filefields []fields sender meta fieldsif kwargs get 'update fields' None update fields set kwargs['update fields'] fields update fields intersection fields for field in fields if isinstance field File Field if not getattr instance field name committed uncommitted append field name
def create xml str xml conn get conn return conn create XML xml 0 is not None
def ridder f a b args xtol xtol rtol rtol maxiter iter full output False disp True if not isinstance args tuple args args if xtol < 0 raise Value Error 'xtoltoosmall %g< 0 ' % xtol if rtol < rtol raise Value Error 'rtoltoosmall %g<%g ' % rtol rtol r zeros ridder f a b xtol rtol maxiter args full output disp return results c full output r
def ridder f a b args xtol xtol rtol rtol maxiter iter full output False disp True if not isinstance args tuple args args if xtol < 0 raise Value Error 'xtoltoosmall %g< 0 ' % xtol if rtol < rtol raise Value Error 'rtoltoosmall %g<%g ' % rtol rtol r zeros ridder f a b xtol rtol maxiter args full output disp return results c full output r
def capped binomial deviance actual predicted return np mean capped log 10 likelihood actual predicted
def imsave file data **kwargs tifargs {}for key in 'byteorder' 'bigtiff' 'software' 'imagej' if key in kwargs tifargs[key] kwargs[key]del kwargs[key]if 'bigtiff' not in tifargs and 'imagej' not in tifargs and data size * data dtype itemsize > 2000 * 2 ** 20 tifargs['bigtiff'] Truewith Tiff Writer file **tifargs as tif tif save data **kwargs
@needs hostdef open shell command None execute channel default channel command command pty True combine stderr True invoke shell True
def fiff get fid fname if isinstance fname string types if op splitext fname [1 ] lower ' gz' logger debug ' Usinggzip' fid Gzip File fname 'rb' else logger debug ' Usingnormal I/O' fid open fname 'rb' else fid fnamefid seek 0 return fid
def fiff get fid fname if isinstance fname string types if op splitext fname [1 ] lower ' gz' logger debug ' Usinggzip' fid Gzip File fname 'rb' else logger debug ' Usingnormal I/O' fid open fname 'rb' else fid fnamefid seek 0 return fid
def enumeration *values **kwargs if not values and all isinstance value string types and value for value in values raise Value Error 'expectedanon-emptysequenceofstrings got%s' % values if len values len set values raise Value Error 'enumerationitemsmustbeunique got%s' % values attrs dict [ value value for value in values] attrs update {' values' list values ' default' values[ 0 ] ' case sensitive' kwargs get 'case sensitive' True } return type ' Enumeration' Enumeration attrs
def wminkowski u v p w u validate vector u v validate vector v w validate vector w if p < 1 raise Value Error 'pmustbeatleast 1 ' dist norm w * u - v ord p return dist
def build all html latex
def eq a b msg None assert a b msg or '%r %r' % a b
def linear banded jac t y a ml mu band count a bjac []for k in range mu 0 -1 bjac append np r [ [0 ] * k np diag a k ] bjac append np diag a for k in range -1 - ml - 1 -1 bjac append np r [ np diag a k [0 ] * - k ] return bjac
def get dist Y W domain return np bincount Y weights W minlength len domain class var values
def get file list results return {code file for result in results for code in result affected code}
def get file list results return {code file for result in results for code in result affected code}
def trimtail data proportiontocut 0 2 tail 'left' inclusive True True axis None tail str tail lower [0 ]if tail 'l' limits proportiontocut None elif tail 'r' limits None proportiontocut else raise Type Error " Thetailargumentshouldbein 'left' 'right' " return trimr data limits limits axis axis inclusive inclusive
def aybabtu c l [c Versioned]for b in inspect getmro c if b not in l and issubclass b Versioned l append b return l[ 2 ]
def set Auth Cred if kb password Mgr and all is not None for in conf scheme conf hostname conf port conf auth Username conf auth Password kb password Mgr add password None '%s //%s %d' % conf scheme conf hostname conf port conf auth Username conf auth Password
@decorator decoratordef requires duration f clip *a **k if clip duration is None raise Value Error " Attribute'duration'notset" else return f clip *a **k
def delete exploration summary exploration id exp models Exp Summary Model get exploration id delete
def create bem flow name 'bem' out format 'stl' '\n Initializetheworkflow\n'bemflow pe Workflow name name '\n Definetheinputstotheworkflow \n'inputnode pe Node niu Identity Interface fields ['subject id' 'subjects dir'] name 'inputspec' '\n Defineallthenodesoftheworkflow \n\nfssource usedtoretrieveaseg mgz\nmri convert convertsaseg mgztoaseg nii\ntessellate tessellatesregionsinaseg mgz\nsurfconvert convertsregionstostereolithographic stl format\n\n'watershed bem pe Node interface mne Watershed BEM name ' Watershed BEM' surfconvert pe Map Node fs MR Is Convert out datatype out format iterfield ['in file'] name 'surfconvert' '\n Connectthenodes\n'bemflow connect [ inputnode watershed bem [ 'subject id' 'subject id' 'subjects dir' 'subjects dir' ] watershed bem surfconvert [ 'mesh files' 'in file' ] ] '\n Setupanoutputnodethatdefinesrelevantinputsoftheworkflow \n'outputnode pe Node niu Identity Interface fields ['meshes'] name 'outputspec' bemflow connect [ surfconvert outputnode [ 'converted' 'meshes' ] ] return bemflow
def create bem flow name 'bem' out format 'stl' '\n Initializetheworkflow\n'bemflow pe Workflow name name '\n Definetheinputstotheworkflow \n'inputnode pe Node niu Identity Interface fields ['subject id' 'subjects dir'] name 'inputspec' '\n Defineallthenodesoftheworkflow \n\nfssource usedtoretrieveaseg mgz\nmri convert convertsaseg mgztoaseg nii\ntessellate tessellatesregionsinaseg mgz\nsurfconvert convertsregionstostereolithographic stl format\n\n'watershed bem pe Node interface mne Watershed BEM name ' Watershed BEM' surfconvert pe Map Node fs MR Is Convert out datatype out format iterfield ['in file'] name 'surfconvert' '\n Connectthenodes\n'bemflow connect [ inputnode watershed bem [ 'subject id' 'subject id' 'subjects dir' 'subjects dir' ] watershed bem surfconvert [ 'mesh files' 'in file' ] ] '\n Setupanoutputnodethatdefinesrelevantinputsoftheworkflow \n'outputnode pe Node niu Identity Interface fields ['meshes'] name 'outputspec' bemflow connect [ surfconvert outputnode [ 'converted' 'meshes' ] ] return bemflow
def clean names names remove whitespace False before dash True cleaned []for name in names if '' in name and remove whitespace name name replace '' '' if '-' in name and before dash name name split '-' [0 ]if name endswith ' virtual' name name[ -8 ]cleaned append name return cleaned
def set State Location state Location if state Location is None returnif not state Location endswith '/' state Location + '/'state Location + const TRANSPORT NAME lower + '/' if not os path exists state Location log info " Creatingdirectorypath`%s' " % state Location os makedirs state Location log debug " Settingthestatelocationto`%s' " % state Location const STATE LOCATION state Location
def regions from boto awslambda layer 1 import AWS Lambda Connectionreturn get regions 'awslambda' connection cls AWS Lambda Connection
def zeroize name ret {'name' name 'changes' {} 'result' True 'comment' ''}ret['changes'] salt ['junos zeroize'] return ret
def migrate cr version migrate from audittrail cr
@outer atomicdef delete problem module state xmodule instance args module descriptor student module task input student module delete track function get track function for task student module student xmodule instance args track function 'problem delete state' {} return UPDATE STATUS SUCCEEDED
def dispatch aliases app current appaliases map app config get 'ALIASES MAP' if aliases map and request path in aliases map alias aliases map[request path]status alias get 'status' 200 if alias['alias type'] 'endpoint' endpoint alias['to']if alias get 'action' 'redirect' return redirect url for endpoint **request args else return app process response app make response app view functions[endpoint] elif alias['alias type'] 'long slug' long slug alias['to']if alias get 'action' 'redirect' return redirect long slug else endpoint route from long slug [0 ]return app process response app make response app view functions[endpoint] elif alias['alias type'] 'url' return redirect alias['to'] elif alias['alias type'] 'string' return render template string alias['to'] status elif alias['alias type'] 'template' return render template alias['to'] status
def tanhm A A asarray square A return maybe real A solve coshm A sinhm A
def policy task instance pass
def policy task instance pass
def policy task instance pass
def Get HW Infos client list batch size 10000 token None hw infos {}logging info '%dclientstoprocess ' len client list c 0for batch in utils Grouper client list batch size logging info ' Processingbatch %d-%d' c c + batch size c + len batch client objs aff 4 FACTORY Multi Open batch age aff 4 ALL TIMES token token for client in client objs hwi client Get Values For Attribute client Schema HARDWARE INFO hw infos[client urn] set [ '%s' % x serial number for x in hwi] return hw infos
def Get HW Infos client list batch size 10000 token None hw infos {}logging info '%dclientstoprocess ' len client list c 0for batch in utils Grouper client list batch size logging info ' Processingbatch %d-%d' c c + batch size c + len batch client objs aff 4 FACTORY Multi Open batch age aff 4 ALL TIMES token token for client in client objs hwi client Get Values For Attribute client Schema HARDWARE INFO hw infos[client urn] set [ '%s' % x serial number for x in hwi] return hw infos
def absent name stop False path None ret {'name' name 'changes' {} 'result' True 'comment' " Container'{ 0 }'doesnotexist" format name }if not salt ['lxc exists'] name path path return retif opts ['test'] ret['result'] Noneret['comment'] " Container'{ 0 }'wouldbedestroyed" format name return rettry result salt ['lxc destroy'] name stop stop path path except Salt Invocation Error Command Execution Error as exc ret['result'] Falseret['comment'] ' Failedtodestroycontainer {0 }' format exc else ret['changes']['state'] result['state']ret['comment'] " Container'{ 0 }'wasdestroyed" format name return ret
def easy install package try easy main ['-U' package] return Trueexcept print ' Unabletoinstall%susingeasy install Pleasereadtheinstructionsformanualinstallation Exiting' % package print ' Error %s %s' % exc info [0 ] exc info [1 ] return False
@dispatch Expr Mongo Query def post compute e q scope None scope {'$project' toolz merge {' id' 0} dict col 1 for col in e fields }q q append scope if not e dshape shape result get result q coll aggregate list q query [0 ]if isscalar e dshape measure return result[e name]else return get e fields result dicts get result q coll aggregate list q query if isscalar e dshape measure return list pluck e fields[ 0 ] dicts default None else return list pluck e fields dicts default None
def get disk of partition devpath st None diskpath re sub ' ? ?< \\d p ?\\d+$' '' devpath if diskpath devpath try st disk os stat diskpath if stat S ISBLK st disk st mode return diskpath st disk except OS Error passif st is None st os stat devpath return devpath st
def expand key k dims def inds i ind rv []if ind - 0 9 > 0 rv append ind - 0 9 rv append ind if ind + 0 9 < dims[i] - 1 rv append ind + 0 9 return rvshape []for i ind in enumerate k[ 1 ] num 1if ind > 0 num + 1if ind < dims[i] - 1 num + 1shape append num seq list product [k[ 0 ]] *[inds i ind for i ind in enumerate k[ 1 ] ] return reshapelist shape seq
def expand key k dims def inds i ind rv []if ind - 0 9 > 0 rv append ind - 0 9 rv append ind if ind + 0 9 < dims[i] - 1 rv append ind + 0 9 return rvshape []for i ind in enumerate k[ 1 ] num 1if ind > 0 num + 1if ind < dims[i] - 1 num + 1shape append num seq list product [k[ 0 ]] *[inds i ind for i ind in enumerate k[ 1 ] ] return reshapelist shape seq
def get auth params from request request return request user username request user token id request user tenant id base url for request 'compute' base url for request 'identity'
def allowed formats if gprefs[u'auto add everything'] allowed All Allowed else allowed AUTO ADDED - frozenset gprefs[u'blocked auto formats'] return allowed
def migrate drafts metadata key schema drafts Draft Registration find Q 'registration schema' 'eq' schema total drafts drafts count logger info ' Examining{}draftsforimproperkey' format total drafts draft count 0for draft in drafts draft count + 1if draft registration metadata get 'recommended-methods' {} get 'value' {} get 'undefined' {} draft registration metadata['recommended-methods']['value']['procedure'] draft registration metadata['recommended-methods']['value'] pop 'undefined' draft save logger info '{}/{} Migratedkeyfor{}' format draft count total drafts draft id else logger info '{}/{} Keyalreadycorrectfor{} Nochange ' format draft count drafts count draft id
def initialized return DETAILS get 'initialized' False
def initialized return DETAILS get 'initialized' False
def is field error errors if isinstance errors list tuple for e in errors if isinstance e string types return Truereturn False
def is field error errors if isinstance errors list tuple for e in errors if isinstance e string types return Truereturn False
def zca whitening x principal components print principal components shape x shape print flatx shapewhitex np dot flatx principal components x np reshape whitex x shape[ 0 ] x shape[ 1 ] x shape[ 2 ] return x
def recvfd socketfd data flags ancillary recv 1 msg socketfd [ cmsg level cmsg type packed FD ] ancillary[unpacked FD] unpack 'i' packed FD return unpacked FD data
def handle subset cert request config domains cert existing ' ' join cert names question ' Youhaveanexistingcertificatethatcontainsaportionofthedomainsyourequested ref {0 } {br}{br} Itcontainsthesenames {1 }{br}{br} Yourequestedthesenamesforthenewcertificate {2 } {br}{br} Doyouwanttoexpandandreplacethisexistingcertificatewiththenewcertificate?' format cert configfile filename existing ' ' join domains br os linesep if config expand or config renew by default or zope component get Utility interfaces I Display yesno question ' Expand' ' Cancel' cli flag '--expand' force interactive True return 'renew' cert else reporter util zope component get Utility interfaces I Reporter reporter util add message ' Toobtainanewcertificatethatcontainsthesenameswithoutreplacingyourexistingcertificatefor{ 0 } youmustusethe--duplicateoption {br}{br} Forexample {br}{br}{ 1 }--duplicate{ 2 }' format existing sys argv[ 0 ] '' join sys argv[ 1 ] br os linesep reporter util HIGH PRIORITY raise errors Error USER CANCELLED
def handle subset cert request config domains cert existing ' ' join cert names question ' Youhaveanexistingcertificatethatcontainsaportionofthedomainsyourequested ref {0 } {br}{br} Itcontainsthesenames {1 }{br}{br} Yourequestedthesenamesforthenewcertificate {2 } {br}{br} Doyouwanttoexpandandreplacethisexistingcertificatewiththenewcertificate?' format cert configfile filename existing ' ' join domains br os linesep if config expand or config renew by default or zope component get Utility interfaces I Display yesno question ' Expand' ' Cancel' cli flag '--expand' force interactive True return 'renew' cert else reporter util zope component get Utility interfaces I Reporter reporter util add message ' Toobtainanewcertificatethatcontainsthesenameswithoutreplacingyourexistingcertificatefor{ 0 } youmustusethe--duplicateoption {br}{br} Forexample {br}{br}{ 1 }--duplicate{ 2 }' format existing sys argv[ 0 ] '' join sys argv[ 1 ] br os linesep reporter util HIGH PRIORITY raise errors Error USER CANCELLED
def tabulate summary certificates kubeconfigs etcd certs router certs registry certs items certificates + kubeconfigs + etcd certs + router certs + registry certs summary results {'system certificates' len certificates 'kubeconfig certificates' len kubeconfigs 'etcd certificates' len etcd certs 'router certs' len router certs 'registry certs' len registry certs 'total' len items 'ok' 0 'warning' 0 'expired' 0}summary results['expired'] len [c for c in items if c['health'] 'expired' ] summary results['warning'] len [c for c in items if c['health'] 'warning' ] summary results['ok'] len [c for c in items if c['health'] 'ok' ] return summary results
def tabulate summary certificates kubeconfigs etcd certs router certs registry certs items certificates + kubeconfigs + etcd certs + router certs + registry certs summary results {'system certificates' len certificates 'kubeconfig certificates' len kubeconfigs 'etcd certificates' len etcd certs 'router certs' len router certs 'registry certs' len registry certs 'total' len items 'ok' 0 'warning' 0 'expired' 0}summary results['expired'] len [c for c in items if c['health'] 'expired' ] summary results['warning'] len [c for c in items if c['health'] 'warning' ] summary results['ok'] len [c for c in items if c['health'] 'ok' ] return summary results
def cx Set ind 1 ind 2 temp set ind 1 ind 1 & ind 2 ind 2 ^ tempreturn ind 1 ind 2
@register u'prefix-meta' def prefix meta event event cli input processor feed Key Press Keys Escape
def rgb to 256 rgb rgb rgb lstrip '#' if len rgb 0 return '0 ' '000000 ' incs 0 95 135 175 215 255 parts rgb to ints rgb res []for part in parts i 0while i < len incs - 1 s b incs[i] incs[ i + 1 ] if s < part < b s1 abs s - part b1 abs b - part if s1 < b1 closest selse closest bres append closest breaki + 1res '' join [ '% 02 x' % i for i in res] equiv RGB 256 [res]return equiv res
def add enabled equivalencies equivalencies context Unit Context get current unit registry get current unit registry add enabled equivalencies equivalencies return context
def load apps app blacklist global DESKTOP MODULE Sglobal DESKTOP APP Sif DESKTOP APPS is not None raise Exception 'load appshasalreadybeencalled ' DESKTOP APPS []for sdk app in pkg resources iter entry points 'desktop sdk application' if sdk app name not in app blacklist if 'oozie' in app blacklist and sdk app name in 'pig' 'jobsub' LOG warn '%sdependsonooziewhichisblacklisted willskiploading%sapp ' % sdk app name sdk app name else m sdk app load dmi Desktop Module Info m DESKTOP APPS append dmi LOG debug ' Loaded Desktop Applications ' + ' ' join a name for a in DESKTOP APPS DESKTOP MODULES + DESKTOP APPS
def starting offset source code offset word finder worder Worder source code True expression starting starting offset word finder get splitted primary before offset return starting offset
def starting offset source code offset word finder worder Worder source code True expression starting starting offset word finder get splitted primary before offset return starting offset
def get temp filename with Named Temporary File as tempfile return tempfile name
def document nav links obj return combine funcs obj parent document link topic parent document link topic sibling documents link topic children documents link
def changes from tree names lookup entry object store tree want unchanged False other names set names if tree is not None for name mode sha in object store iter tree contents tree try other sha other mode lookup entry name except Key Error yield name None mode None sha None else other names remove name if want unchanged or other sha sha or other mode mode yield name name mode other mode sha other sha for name in other names try other sha other mode lookup entry name except Key Error passelse yield None name None other mode None other sha
def aware to naive d offset d utcoffset if offset d d replace tzinfo None d d - offset return d
def install modules result {} make Packages None modules result sys modules update result
def validate css stylesheet images assert isinstance stylesheet unicode validator Stylesheet Validator images return validator parse and validate stylesheet
def Mark Flag As Required flag name flag values FLAGS Register Validator flag name lambda value value is not None message ' Flag--%smustbespecified ' % flag name flag values flag values
def Mark Flag As Required flag name flag values FLAGS Register Validator flag name lambda value value is not None message ' Flag--%smustbespecified ' % flag name flag values flag values
def soft validate additional properties validator additional properties value instance schema if not validator is type instance 'object' or additional properties value returnproperties schema get 'properties' {} patterns ' ' join schema get 'pattern Properties' {} extra properties set for prop in instance if prop not in properties if patterns if not re search patterns prop extra properties add prop else extra properties add prop if not extra properties returnif patterns error ' Additionalpropertiesarenotallowed %s%sunexpected 'if len extra properties 1 verb 'was'else verb 'were' yield jsonschema exc Validation Error error % ' ' join repr extra for extra in extra properties verb else for prop in extra properties del instance[prop]
def soft validate additional properties validator additional properties value instance schema if not validator is type instance 'object' or additional properties value returnproperties schema get 'properties' {} patterns ' ' join schema get 'pattern Properties' {} extra properties set for prop in instance if prop not in properties if patterns if not re search patterns prop extra properties add prop else extra properties add prop if not extra properties returnif patterns error ' Additionalpropertiesarenotallowed %s%sunexpected 'if len extra properties 1 verb 'was'else verb 'were' yield jsonschema exc Validation Error error % ' ' join repr extra for extra in extra properties verb else for prop in extra properties del instance[prop]
def merge dicts dict 1 dict 2 append lists False for key in dict 2 if isinstance dict 2 [key] dict if key in dict 1 and key in dict 2 merge dicts dict 1 [key] dict 2 [key] else dict 1 [key] dict 2 [key]elif isinstance dict 2 [key] list and append lists if key in dict 1 and isinstance dict 1 [key] list dict 1 [key] extend dict 2 [key] else dict 1 [key] dict 2 [key]else dict 1 [key] dict 2 [key]
def get stdlib modules modules list sys builtin module names for path in sys path[ 1 ] if 'site-packages' not in path modules + module list path modules set modules if ' init ' in modules modules remove ' init ' modules list modules return modules
@pytest fixturedef if graphviz found app graphviz dot getattr app config 'graphviz dot' '' try if graphviz dot dot subprocess Popen [graphviz dot '-V'] stdout subprocess PIPE stderr subprocess PIPE dot communicate returnexcept OS Error passpytest skip 'graphviz"dot"isnotavailable'
def wait until predicate success description timeout 10 start time time while True retval predicate if retval return retvalif time time - start > timeout raise Assertion Error " Didn'tever%s" % success description time sleep 0 1
def add node class names names for name in names setattr Generic Node Visitor 'visit ' + name call default visit setattr Generic Node Visitor 'depart ' + name call default departure setattr Sparse Node Visitor 'visit ' + name nop setattr Sparse Node Visitor 'depart ' + name nop
def is macports env env prefix get macports prefix if env prefix and base prefix startswith env prefix return Truereturn False
def readmodule ex module path None return readmodule module path or []
def readmodule ex module path None return readmodule module path or []
def sqeuclidean u v utype vtype None None if not hasattr u 'dtype' and np issubdtype u dtype np inexact utype np float 64 if not hasattr v 'dtype' and np issubdtype v dtype np inexact vtype np float 64 u validate vector u dtype utype v validate vector v dtype vtype u v u - v return np dot u v u v
def find missing children filters None dryrun False errors []fixed []query Q 'nodes 0' 'exists' True if filters query query & filters with children models Node find query for parent in with children for child in parent nodes if not child node parent msg u' Inconsistency Child{} {} doesnotpointtoparent{} {} Attemptingtofix \n' format child title child primary key parent title parent primary key logger info msg errors append child if dryrun is False child node parent append parent child save msg u' Fixedinconsistency Child{} {} doesnotpointtoparent{} {} \n' format child title child primary key parent title parent primary key logger info msg fixed append child return errors fixed
def list with level course level return ROLES[level] course id users with role
def get repository dependencies app metadata id sa session app model context currentreturn sa session query app model Repository Dependency filter app model Repository Dependency table c parent metadata id metadata id all
def get repository dependencies app metadata id sa session app model context currentreturn sa session query app model Repository Dependency filter app model Repository Dependency table c parent metadata id metadata id all
def get repository dependencies app metadata id sa session app model context currentreturn sa session query app model Repository Dependency filter app model Repository Dependency table c parent metadata id metadata id all
def sca ax managers pylab helpers Gcf get all fig managers for m in managers if ax in m canvas figure axes pylab helpers Gcf set active m m canvas figure sca ax returnraise Value Error u' Axesinstanceargumentwasnotfoundinafigure '
def fixed shortcut keystr parent action sc Q Shortcut Q Key Sequence keystr parent action sc set Context Qt Widget With Children Shortcut return sc
def desaturate color percent return adjust color 1 - percent
def shuffle y groups random state if groups is None indices random state permutation len y else indices np arange len groups for group in np unique groups this mask groups group indices[this mask] random state permutation indices[this mask] return safe indexing y indices
def shuffle y groups random state if groups is None indices random state permutation len y else indices np arange len groups for group in np unique groups this mask groups group indices[this mask] random state permutation indices[this mask] return safe indexing y indices
def scan postgrey line date log collector m re match 'action greylist pass reason *? ? delay \\d+ ?client name * client address * sender * recipient * ' log if m action reason client name client address sender recipient m groups key client address sender if action 'greylist' and reason 'new' collector['postgrey'] setdefault recipient {} [key] date None elif action 'pass' and reason 'tripletfound' and key in collector['postgrey'] get recipient {} collector['postgrey'][recipient][key] collector['postgrey'][recipient][key][ 0 ] date
def test empty monitoring datasets learning rate 0 001 batch size 5dim 3rng np random Random State [25 9 2012 ] train dataset Dense Design Matrix X rng randn 10 dim model Softmax Model dim cost Dummy Cost algorithm SGD learning rate cost batch size batch size monitoring dataset {} termination criterion Epoch Counter 2 train Train train dataset model algorithm save path None save freq 0 extensions None train main loop
def cuirfft inp norm None is odd False if is odd not in True False raise Value Error ' Invalidvalue%sforid odd mustbe Trueor False' % is odd s inp shape[ 1 -1 ]if is odd s T set subtensor s[ -1 ] s[ -1 ] - 1 * 2 + 1 else s T set subtensor s[ -1 ] s[ -1 ] - 1 * 2 cond norm unitary norm scaling 1if cond norm is None scaling s prod astype 'float 32 ' elif cond norm 'ortho' scaling T sqrt s prod astype 'float 32 ' return cuirfft op inp s / scaling
@support nddatadef block reduce data block size func np sum from skimage measure import block reducedata np asanyarray data block size np atleast 1d block size if data ndim > 1 and len block size 1 block size np repeat block size data ndim if len block size data ndim raise Value Error u'`block size`mustbeascalarorhavethesamelengthas`data shape`' block size np array [int i for i in block size] size resampled np array data shape // block size size init size resampled * block size for i in range data ndim if data shape[i] size init[i] data data swapaxes 0 i data data[ size init[i]]data data swapaxes 0 i return block reduce data tuple block size func func
def get component review by repository review id component id app repository review id component id sa session app model context currentreturn sa session query app model Component Review filter and app model Component Review table c repository review id app security decode id repository review id app model Component Review table c component id app security decode id component id first
def reverse url pattern url pattern *args group index [0 ]def expand group match group match group 1 try value str args[group index[ 0 ]] group index[ 0 ] + 1except Index Error raise Cannot Reverse Pattern ' Notenoughargumentsinurltag' if not re match group + '$' value raise Cannot Reverse Pattern " Value%rdoesn'tmatch %r " % value group return valueresult re sub '\\ [^ ]+ \\ ' expand group url pattern pattern result result replace '^' '' result result replace '$' '' return result
def reverse url pattern url pattern *args group index [0 ]def expand group match group match group 1 try value str args[group index[ 0 ]] group index[ 0 ] + 1except Index Error raise Cannot Reverse Pattern ' Notenoughargumentsinurltag' if not re match group + '$' value raise Cannot Reverse Pattern " Value%rdoesn'tmatch %r " % value group return valueresult re sub '\\ [^ ]+ \\ ' expand group url pattern pattern result result replace '^' '' result result replace '$' '' return result
def is super node if getattr node 'name' None 'super' and node root name BUILTINS NAME return Truereturn False
def build preprocessors md instance **kwargs preprocessors odict Ordered Dict preprocessors[u'normalize whitespace'] Normalize Whitespace md instance if md instance safe Mode u'escape' preprocessors[u'html block'] Html Block Preprocessor md instance preprocessors[u'reference'] Reference Preprocessor md instance return preprocessors
def fix broken encoding value if isinstance value six text type value value encode 'utf 8 ' errors 'replace' if isinstance value six binary type value value decode 'utf 8 ' errors 'replace' return value
def fix broken encoding value if isinstance value six text type value value encode 'utf 8 ' errors 'replace' if isinstance value six binary type value value decode 'utf 8 ' errors 'replace' return value
def fix broken encoding value if isinstance value six text type value value encode 'utf 8 ' errors 'replace' if isinstance value six binary type value value decode 'utf 8 ' errors 'replace' return value
def fix broken encoding value if isinstance value six text type value value encode 'utf 8 ' errors 'replace' if isinstance value six binary type value value decode 'utf 8 ' errors 'replace' return value
def get default contact doctype name out frappe db sql u'selectparent \n DCTB DCTB DCTB selectis primary contactfromtab Contactcwherec name dl parent \n DCTB DCTB DCTB DCTB asis primary contact\n DCTB DCTB from\n DCTB DCTB DCTB `tab Dynamic Link`dl\n DCTB DCTB where\n DCTB DCTB DCTB dl link doctype %sand\n DCTB DCTB DCTB dl link name %sand\n DCTB DCTB DCTB dl parenttype " Contact"' doctype name if out return sorted out lambda x y cmp y[ 1 ] x[ 1 ] [0 ][ 0 ]else return None
def secure required view func def wrapped view request *args **kwargs if not request is secure if getattr settings 'USERENA USE HTTPS' userena settings DEFAULT USERENA USE HTTPS request url request build absolute uri request get full path secure url request url replace 'http //' 'https //' return Http Response Permanent Redirect secure url return view func request *args **kwargs return wraps view func assigned available attrs view func wrapped view
def f classif X y X y check X y X y ['csr' 'csc' 'coo'] args [X[safe mask X y k ] for k in np unique y ]return f oneway *args
def with rw directory func @wraps func def wrapper self path tempfile mktemp prefix func name os mkdir path keep Falsetry return func self path except Exception log info ' Test%s %sfailed outputisat%r\n' type self name func name path keep Trueraisefinally import gcgc collect if not keep rmtree path return wrapper
def find field name field list related query if related query matches [f for f in field list if f field related query name name ]else matches [f for f in field list if f name name ]if len matches 1 return Nonereturn matches[ 0 ]
def transform soups config soups precomputed fixup internal links config soups ensure headings linkable soups generate page tocs soups precomputed link pantsrefs soups precomputed
def transform soups config soups precomputed fixup internal links config soups ensure headings linkable soups generate page tocs soups precomputed link pantsrefs soups precomputed
def transform soups config soups precomputed fixup internal links config soups ensure headings linkable soups generate page tocs soups precomputed link pantsrefs soups precomputed
def is safe size n n int n if n 0 return Truefor c in 3 5 while n % c 0 n // creturn not n & n - 1
def is safe size n n int n if n 0 return Truefor c in 3 5 while n % c 0 n // creturn not n & n - 1
def str startswith arr pat na np nan f lambda x x startswith pat return na map f arr na dtype bool
def str startswith arr pat na np nan f lambda x x startswith pat return na map f arr na dtype bool
def xl cell to rowcol cell str if not cell str return 0 0 match range parts match cell str col str match group 2 row str match group 4 expn 0col 0for char in reversed col str col + ord char - ord 'A' + 1 * 26 ** expn expn + 1row int row str - 1 col - 1return row col
def attachment specs get context attachment id return IMPL attachment specs get context attachment id
def slide in clip duration side w h clip sizepos dict {'left' lambda t min 0 w * t / duration - 1 'center' 'right' lambda t max 0 w * 1 - t / duration 'center' 'top' lambda t 'center' min 0 h * t / duration - 1 'bottom' lambda t 'center' max 0 h * 1 - t / duration }return clip set pos pos dict[side]
def test skip dt decorator 2 dtargs ['x' 'y'] None 'k' 1 dtargsr getargspec doctest bad assert dtargsr dtargs ' Incorrectlyreconstructedargsfordoctest bad %s' % dtargsr
def init image root None nbd connect image if not nbd return ''return mount nbd root
def init image root None nbd connect image if not nbd return ''return mount nbd root
def init image root None nbd connect image if not nbd return ''return mount nbd root
def check Match input prediction sparse True verbosity 0 if sparse active Elements In Input set input active Elements In Prediction set prediction else active Elements In Input set input nonzero [0 ] active Elements In Prediction set prediction nonzero [0 ] total Active In Prediction len active Elements In Prediction total Active In Input len active Elements In Input found In Input len active Elements In Prediction intersection active Elements In Input missing From Input len active Elements In Prediction difference active Elements In Input missing From Prediction len active Elements In Input difference active Elements In Prediction if verbosity > 1 print 'preds foundininput ' found In Input 'outof' total Active In Prediction print ' preds missingfrominput ' missing From Input 'outof' total Active In Prediction print ' unexpectedactiveininput ' missing From Prediction 'outof' total Active In Inputreturn found In Input total Active In Input missing From Input total Active In Prediction
def norm open path return open path 'U'
@contextmanagerdef collect profile file prefix import c Profileimport uuidprofiler c Profile Profile profiler enable try yield finally profiler disable profiler dump stats '{ 0 } {1 } master profile' format file prefix uuid uuid 4
def get ldev obj if not obj return Noneldev obj get 'provider location' if not ldev or not ldev isdigit return Nonereturn int ldev
def replacer x try hexin ord x except Type Error hexin xreturn hex hexin
def arity f if sys version info < 3 return len inspect getargspec f [0 ] else param inspect signature f parameters values return len [p for p in param if p kind p POSITIONAL OR KEYWORD ]
def arity f if sys version info < 3 return len inspect getargspec f [0 ] else param inspect signature f parameters values return len [p for p in param if p kind p POSITIONAL OR KEYWORD ]
def arity f if sys version info < 3 return len inspect getargspec f [0 ] else param inspect signature f parameters values return len [p for p in param if p kind p POSITIONAL OR KEYWORD ]
def create logger path None format None name None global loggerlogger get Logger name or DEFAULT LOGGER NAME logger propagate Falseif not logger handlers formatter Formatter fmt format or DEFAULT FORMAT if path handler File Handler path else handler Stream Handler handler set Formatter formatter logger add Handler handler return logger
def init params options params Ordered Dict params[' Wemb'] norm weight options['n words src'] options['dim word'] params get layer options['encoder'] [0 ] options params prefix 'encoder' nin options['dim word'] dim options['dim'] return params
def init params options params Ordered Dict params[' Wemb'] norm weight options['n words src'] options['dim word'] params get layer options['encoder'] [0 ] options params prefix 'encoder' nin options['dim word'] dim options['dim'] return params
def render template file saltenv 'base' sls '' argline '' context None **kws tmp data salt utils templates WEMPY template file to str True salt salt grains grains opts opts pillar pillar saltenv saltenv sls sls context context **kws if not tmp data get 'result' False raise Salt Render Error tmp data get 'data' ' Unknownrendererrorinthewempyrenderer' return six moves String IO tmp data['data']
def render template file saltenv 'base' sls '' argline '' context None **kws tmp data salt utils templates WEMPY template file to str True salt salt grains grains opts opts pillar pillar saltenv saltenv sls sls context context **kws if not tmp data get 'result' False raise Salt Render Error tmp data get 'data' ' Unknownrendererrorinthewempyrenderer' return six moves String IO tmp data['data']
def tty *args **kwargs return 'ERROR Thisfunctionhasbeenmovedtocmd tty'
def tty *args **kwargs return 'ERROR Thisfunctionhasbeenmovedtocmd tty'
def itemlist tparams return [vv for kk vv in tparams iteritems ]
def txt records for name name if not DNS AVAILABLE raise errors Dependency Error '{ 0 }isrequiredtousethisfunction' format DNS REQUIREMENT try dns response dns resolver query name 'TXT' except dns resolver NXDOMAIN as error return []except dns exception DNS Exception as error logger error ' Errorresolving%s %s' name str error return []return [txt rec decode 'utf- 8 ' for rdata in dns response for txt rec in rdata strings]
def validate device list data valid values None if not data msg ' Cannotcreateagatewaywithanemptydevicelist' return msgtry for device in data err msg attributes validate dict device key specs {DEVICE ID ATTR {'type regex' attributes UUID PATTERN 'required' True} IFACE NAME ATTR {'type string' None 'required' False}} if err msg return err msgexcept Type Error return '%s provideddataarenotiterable' % validate device list name
def windowdiff seg 1 seg 2 k boundary '1 ' weighted False if len seg 1 len seg 2 raise Value Error ' Segmentationshaveunequallength' if k > len seg 1 raise Value Error ' Windowwidthkshouldbesmallerorequalthansegmentationlengths' wd 0for i in range len seg 1 - k + 1 ndiff abs seg 1 [i i + k ] count boundary - seg 2 [i i + k ] count boundary if weighted wd + ndiffelse wd + min 1 ndiff return wd / len seg 1 - k + 1 0
def distributed server test f return x server test f not settings CENTRAL SERVER ' Distributedservertest'
def test content type transformer hug transform content type {'application/json' int 'text/plain' str} class Fake Request object content type 'application/json'request Fake Request assert transformer '1 ' request 1 request content type 'text/plain'assert transformer 2 request '2 ' request content type 'undefined' transformer {'data' 'value'} request {'data' 'value'}
def kaiser atten numtaps width a 2 285 * numtaps - 1 * np pi * width + 7 95 return a
def get accumulator dir cachedir fn os path join cachedir 'accumulator' if not os path isdir fn os makedirs fn return fn
def check param trans param incoming value param values value incoming valueerror Nonetry if trans workflow building mode if isinstance value Runtime Value return [{' class ' ' Runtime Value'} None]if isinstance value dict if value get ' class ' ' Runtime Value' return [value None]value param from json value trans param values param validate value trans except Value Error as e error str e return value error
def get explore recommendations user request data generate recommendation data exercise parents table get exercise parents lookup table recent exercises get most recent exercises user recent subtopics list set [exercise parents table[ex]['subtopic id'] for ex in recent exercises if ex in exercise parents table ] sample Num min len recent subtopics settings TOPIC RECOMMENDATION DEPTH random subtopics random sample recent subtopics sample Num added []final []for subtopic id in random subtopics related subtopics data[subtopic id]['related subtopics'][ 2 7]recommended topic next topic for topic in related subtopics if topic not in added and topic not in recent subtopics if recommended topic final append {'suggested topic' get content item language request language content id recommended topic topic True or {} 'interest topic' get content item language request language content id subtopic id topic True or {} } added append recommended topic return final
def make context context request None **kwargs if context is not None and not isinstance context dict raise Type Error 'contextmustbeadictratherthan%s ' % context class name if request is None context Context context **kwargs else original context contextcontext Request Context request **kwargs if original context context push original context return context
def test raise exception spatial sbn 1 Spatial Batch Normalization 5 yield assert raises Value Error sbn 1 allocate sbn 2 Spatial Batch Normalization 3 yield assert raises Value Error sbn 2 allocate def do not fail *input dim try sbn Spatial Batch Normalization input dim sbn allocate except Value Error assert False yield do not fail 5 4 3 yield do not fail 7 6 yield do not fail 3 9 2 3
def test raise exception spatial sbn 1 Spatial Batch Normalization 5 yield assert raises Value Error sbn 1 allocate sbn 2 Spatial Batch Normalization 3 yield assert raises Value Error sbn 2 allocate def do not fail *input dim try sbn Spatial Batch Normalization input dim sbn allocate except Value Error assert False yield do not fail 5 4 3 yield do not fail 7 6 yield do not fail 3 9 2 3
def show FPS texw texh global frames t0 t time time if t - t0 > 1 0 fps frames / t - t0 titlestr '%sx%stexture % 1f FPS' % texw texh fps glfw glfw Set Window Title window titlestr t0 tframes 0frames + 1
def show FPS texw texh global frames t0 t time time if t - t0 > 1 0 fps frames / t - t0 titlestr '%sx%stexture % 1f FPS' % texw texh fps glfw glfw Set Window Title window titlestr t0 tframes 0frames + 1
def Sample Rows df nrows replace False indices np random choice df index nrows replace replace sample df loc[indices]return sample
def flushall host None port None db None password None server connect host port db password return server flushall
def kivy register post configuration callback kivy post configuration append callback
def process match rule syms subs {}varlist rule varlistif not len varlist len syms raise Runtime Error "lengthofvarlistdoesn'tmatchlengthofsyms " for v s in zip varlist syms if v in subs and subs[v] s return Noneelse subs[v] sreturn subs
def to Unicode articles return tuple [art decode 'utf 8' for art in articles]
def incr ratelimit user domain 'all' list key set key redis key user domain now time time if len rules 0 returnwith client pipeline as pipe count 0while True try pipe watch list key last val pipe lindex list key max api calls user - 1 pipe multi pipe lpush list key now pipe ltrim list key 0 max api calls user - 1 pipe zadd set key now now if last val is not None pipe zrem set key last val api window max api window user pipe expire list key api window pipe expire set key api window pipe execute breakexcept redis Watch Error if count > 10 logging error ' Failedtocompleteincr ratelimittransactionwithoutinterference 10 timesinarow Abortingrate-limitincrement' breakcount + 1continue
def process npm assets def copy vendor library library skip if missing False '\n Copiesavendorlibrarytothesharedvendordirectory \n'library path 'node modules/{library}' format library library if os path exists library path sh '/bin/cp-rf{library path}{vendor dir}' format library path library path vendor dir NPM VENDOR DIRECTORY elif not skip if missing raise Exception ' Missingvendorfile{library path}' format library path library path if tasks environment dry run tasks environment info 'installnpm assets' return NPM VENDOR DIRECTORY mkdir p print ' Copyingvendorfilesintostaticdirectory' for library in NPM INSTALLED LIBRARIES copy vendor library library print ' Copyingdevelopervendorfilesintostaticdirectory' for library in NPM INSTALLED DEVELOPER LIBRARIES copy vendor library library skip if missing True
def sanitize win path string winpath intab '<> ?*'outtab ' ' * len intab trantab '' maketrans intab outtab if six PY 3 else string maketrans intab outtab if isinstance winpath str winpath winpath translate trantab elif isinstance winpath six text type winpath winpath translate dict ord c u' ' for c in intab return winpath
def num obs dm d d np asarray d order 'c' is valid dm d tol np inf throw True name 'd' return d shape[ 0 ]
def log event event tracker send event
@task base Base Instructor Task def course survey report csv entry id xmodule instance args action name ugettext noop 'generated' task fn partial upload course survey report xmodule instance args return run main task entry id task fn action name
@task base Base Instructor Task def course survey report csv entry id xmodule instance args action name ugettext noop 'generated' task fn partial upload course survey report xmodule instance args return run main task entry id task fn action name
def render panel request toolbar Debug Toolbar fetch request GET[u'store id'] if toolbar is None content u" Dataforthispanelisn'tavailableanymore Pleasereloadthepageandretry " content u'<p>%s</p>' % escape content else panel toolbar get panel by id request GET[u'panel id'] content panel contentreturn Http Response content
def last modified time path return pd Timestamp os path getmtime path unit 's' tz 'UTC'
def get node cpu times reactor runner node known name processes process list list processes if known name in processes delete known name Falseelse process list append known name delete known name Trueparser CPU Parser reactor d runner run node GET CPUTIME COMMAND + [' ' join process list ] handle stdout parser line Received def get parser result ignored result parser resultif delete known name and known name in result del result[known name]return resultd add Callback get parser result return d
def list hosts count 0hfn get hosts filename ret odict Ordered Dict if not os path isfile hfn return retwith salt utils fopen hfn as ifile for line in ifile line line strip if not line continueif line startswith '#' ret setdefault 'comment-{ 0 }' format count [] extend line count + 1continueif '#' in line line line[ line index '#' ] strip comps line split ip comps pop 0 ret setdefault ip [] extend comps return ret
def types msg instance types reprs []for type in types try reprs append repr type['name'] except Exception reprs append repr type return '%risnotoftype%s' % instance ' ' join reprs
def create cmd args basename binary False if basename binary args[ 0 ] os path basename args[ 0 ] if os name 'nt' return subprocess list 2 cmdline args else escaped args []for arg in args if re search '^[a-z A-Z 0 - 9 / ^\\-\\ ]+$' arg is None arg u"'" + arg replace u"'" u"'\\''" + u"'" escaped args append arg return u'' join escaped args
def create cmd args basename binary False if basename binary args[ 0 ] os path basename args[ 0 ] if os name 'nt' return subprocess list 2 cmdline args else escaped args []for arg in args if re search '^[a-z A-Z 0 - 9 / ^\\-\\ ]+$' arg is None arg u"'" + arg replace u"'" u"'\\''" + u"'" escaped args append arg return u'' join escaped args
def get gating milestone course key content key relationship try return find gating milestones course key content key relationship [0 ]except Index Error return None
def read file format **kwargs try tree gen parse file format **kwargs tree next tree gen except Stop Iteration raise Value Error ' Therearenotreesinthisfile ' try next tree gen except Stop Iteration return treeelse raise Value Error ' Therearemultipletreesinthisfile useparse instead '
def list role policies role name region None key None keyid None profile None conn get conn region region key key keyid keyid profile profile try response conn list role policies role name list response list role policies response list role policies resultreturn list policy namesexcept boto exception Boto Server Error as e log debug e return []
def set default keychain keychain domain 'user' user None cmd 'securitydefault-keychain-d{ 0 }-s{ 1 }' format domain keychain return salt ['cmd run'] cmd runas user
def set default keychain keychain domain 'user' user None cmd 'securitydefault-keychain-d{ 0 }-s{ 1 }' format domain keychain return salt ['cmd run'] cmd runas user
def f4 t if t x 1else y 2print sorted locals items print sorted vars items
def open stream stream global stream fdtry stream fd stream open except Stream Error as err raise Stream Error ' Couldnotopenstream {0 }' format err try console logger debug ' Pre-buffering 8192 bytes' prebuffer stream fd read 8192 except IO Error as err raise Stream Error ' Failedtoreaddatafromstream {0 }' format err if not prebuffer raise Stream Error ' Nodatareturnedfromstream' return stream fd prebuffer
def file delete path return os unlink path
def file delete path return os unlink path
def file delete path return os unlink path
def file delete path return os unlink path
def file delete path return os unlink path
def file delete path return os unlink path
def file delete path return os unlink path
def file delete path return os unlink path
def file delete path return os unlink path
def cell create context values return IMPL cell create context values
def network get by uuid context uuid return IMPL network get by uuid context uuid
def tuple factory colnames rows return rows
def split lines tokenlist line []for item in tokenlist if len item 2 token string itemparts string split u'\n' for part in parts[ -1 ] if part line append token part yield line line []line append token parts[ -1 ] else token string mouse handler itemparts string split u'\n' for part in parts[ -1 ] if part line append token part mouse handler yield line line []line append token parts[ -1 ] mouse handler yield line
def split lines tokenlist line []for item in tokenlist if len item 2 token string itemparts string split u'\n' for part in parts[ -1 ] if part line append token part yield line line []line append token parts[ -1 ] else token string mouse handler itemparts string split u'\n' for part in parts[ -1 ] if part line append token part mouse handler yield line line []line append token parts[ -1 ] mouse handler yield line
def canberra u v u validate vector u v validate vector v dtype np float 64 olderr np seterr invalid 'ignore' try d np nansum abs u - v / abs u + abs v finally np seterr **olderr return d
def ros plot pos row censorship cohn DL index row['det limit index']rank row['rank']censored row[censorship]dl 1 cohn iloc[DL index]dl 2 cohn iloc[ DL index + 1 ]if censored return 1 - dl 1['prob exceedance'] * rank / dl 1['ncen equal'] + 1 else return 1 - dl 1['prob exceedance'] + dl 1['prob exceedance'] - dl 2['prob exceedance'] * rank / dl 1['nuncen above'] + 1
def test settings env testval 'outervalue'with settings testval 'innervalue' eq env testval 'innervalue' eq env testval 'outervalue'
def shadow hash crypt salt None password None algorithm 'sha 512 ' return salt utils pycrypto gen hash crypt salt password algorithm
def detect byte string if not isinstance byte string byte cls raise Type Error unwrap u'\nbyte stringmustbeabytestring not%s\n' type name byte string return byte string find '-----BEGIN' -1 or byte string find '----BEGIN' -1
def add from csv csv file version None overwrite False diagnostic messages []for module name new metadata in parse assigned metadata initial csv file filename module loader find plugin module name mod type ' py' if filename is None diagnostic messages append ' Unabletofindthemodulefilefor{}' format module name continuetry write metadata filename new metadata version overwrite except Parse Error as e diagnostic messages append e args[ 0 ] continueif diagnostic messages pprint diagnostic messages return 0
def read random int nbits randomdata read random bits nbits value transform bytes 2 int randomdata value 1 << nbits - 1 return value
def prune blobs blobs array overlap for blob 1 blob 2 in itt combinations blobs array 2 if blob overlap blob 1 blob 2 > overlap if blob 1 [ 2 ] > blob 2 [ 2 ] blob 2 [ 2 ] -1 else blob 1 [ 2 ] -1 return np array [b for b in blobs array if b[ 2 ] > 0 ]
def get domainvalue link z - np log np random uniform 0 1 if type link type cloglog z min z 3 elif type link type negbinom z - z return z
def metric to Ricci components expr riemann metric to Riemann components expr coord sys expr atoms Coord System pop indices list range coord sys dim ricci [[ Add *[riemann[ k i k j ] for k in indices] for j in indices] for i in indices]return Immutable Dense N Dim Array ricci
@loader option def raiseload loadopt attr sql only False return loadopt set relationship strategy attr {'lazy' 'raise on sql' if sql only else 'raise' }
@loader option def raiseload loadopt attr sql only False return loadopt set relationship strategy attr {'lazy' 'raise on sql' if sql only else 'raise' }
def unique seq seen set seen add seen addreturn [x for x in seq if not x in seen or seen add x ]
def unique seq seen set seen add seen addreturn [x for x in seq if not x in seen or seen add x ]
def unique seq seen set seen add seen addreturn [x for x in seq if not x in seen or seen add x ]
def merge dict d1 d2 d d1 copy for k v in iteritems d2 if k in d d[k] + velse d[k] vreturn d
@task@needs 'pavelib i18 n i18 n extract' @cmdopts [ 'settings ' 's' ' Thesettingstouse defaultstodevstack ' ] @timeddef i18 n dummy options settings options get 'settings' DEFAULT SETTINGS sh 'i 18 n tooldummy' sh 'i 18 n toolgenerate' for system in ['lms' 'cms'] sh django cmd system settings 'compilejsi 18 n'
def test ast bad cut cant compile u' cut ' cant compile u' cut 12345 '
def test ast bad cut cant compile u' cut ' cant compile u' cut 12345 '
def test ast bad cut cant compile u' cut ' cant compile u' cut 12345 '
def test ast bad cut cant compile u' cut ' cant compile u' cut 12345 '
def new private link name user nodes anonymous key str uuid uuid 4 replace '-' '' if name name strip html name if name is None or not name strip raise Validation Value Error ' Invalidlinkname ' else name ' Sharedprojectlink'private link Private Link key key name name creator user anonymous anonymous private link save private link nodes add *nodes private link save return private link
def set var var value makeconf get makeconf old value get var var if old value is not None salt ['file sed'] makeconf '^{ 0 } *' format var '{ 0 } "{ 1 }"' format var value else add var var value new value get var var return {var {'old' old value 'new' new value}}
def save config **kwargs if kwargs {} kwargs config configcurrent config load config current config update **kwargs fname get config fname if fname is None raise Runtime Error 'configfilenamecouldnotbedetermined' if not op isdir op dirname fname os mkdir op dirname fname with open fname 'w' as fid json dump current config fid sort keys True indent 0
def save config **kwargs if kwargs {} kwargs config configcurrent config load config current config update **kwargs fname get config fname if fname is None raise Runtime Error 'configfilenamecouldnotbedetermined' if not op isdir op dirname fname os mkdir op dirname fname with open fname 'w' as fid json dump current config fid sort keys True indent 0
@login requireddef delete answer request question id answer id answer get object or 404 Answer pk answer id question question id if not answer allows delete request user raise Permission Deniedif request method 'GET' return render request 'questions/confirm answer delete html' {'answer' answer} log warning ' User%sisdeletinganswerwithid %s' % request user answer id answer delete statsd incr 'questions delete answer' return Http Response Redirect reverse 'questions details' args [question id]
def force bytes s encoding 'utf- 8 ' if isinstance s binary type return selif isinstance s Text return s encode encoding else raise Type Error 'force bytesexpectsastringtype'
def send post signup email user id for key content in SIGNUP EMAIL CONTENT value iteritems if content SIGNUP EMAIL CONTENT default value[key] log new error ' Pleaseensurethatthevaluefortheadminconfigproperty SIGNUP EMAIL CONTEN Tisset beforeallowingpost-signupemailstobesent ' returnuser settings user services get user settings user id email subject SIGNUP EMAIL CONTENT value['subject']email body ' Hi%s <br><br>%s<br><br>%s' % user settings username SIGNUP EMAIL CONTENT value['html body'] EMAIL FOOTER value send email user id feconf SYSTEM COMMITTER ID feconf EMAIL INTENT SIGNUP email subject email body feconf NOREPLY EMAIL ADDRESS
def check table 'filter' chain None rule None family 'ipv 4 ' if not chain return ' Error Chainneedstobespecified'if not rule return ' Error Ruleneedstobespecified'if not check table table family family return ' Error table{ 0 }infamily{ 1 }doesnotexist' format table family if not check chain table chain family family return ' Error chain{ 0 }intable{ 1 }infamily{ 2 }doesnotexist' format chain table family nft family NFTABLES FAMILIES[family]cmd '{ 0 }--handle--numeric--numeric--numericlistchain{ 1 }{ 2 }{ 3 }' format nftables cmd nft family table chain search rule '{ 0 }#' format rule out salt ['cmd run'] cmd python shell False find search rule if out -1 out ''else return Falseif not out return Truereturn out
def circmean data axis None weights None return angle data 1 0 0 axis weights
@pytest mark cmddef test test checks noargs with pytest raises Command Error as e call command 'test checks' assert ' Either--unitorapairof--sourceand--targetmustbeprovided ' in str e
@util positional 1 def command name required optional def check params decorator function def check params wrapper options *args if not len required < len args < len required + len optional sys stderr write " Incorrectusageforcommand'%s'\n\n" % name usage function options *args check params wrapper required requiredcheck params wrapper optional optionalcommands[name] check params wrapperreturn check params wrapperreturn check params decorator
def has identity object state attributes instance state object return state has identity
def add method func *combined args def wrapper cls for combined arg in combined args if len combined arg 2 args combined arg[ 0 ]kwargs combined arg[ 1 ]elif isinstance combined arg[ 0 ] Mapping args []kwargs combined arg[ 0 ]else args combined arg[ 0 ]kwargs {}test method make method func args kwargs setattr cls test method name test method return clsreturn wrapper
def native value value if isinstance value six string types if value lower in ['on' 'true' 'yes'] value Trueelif value lower in ['off' 'false' 'no'] value Falsetry return ast literal eval value except Type Error Value Error Syntax Error passreturn value
def is vulnerable host timeout port 443 s socket socket socket AF INET socket SOCK STREAM s settimeout int timeout try s connect host int port except Exception as e return Nones send hello while True typ ver pay recvmsg s if typ is None return Noneif typ 22 payarr unpack handshake pay finddone [t for t l p in payarr if t 14 ]if len finddone > 0 breakver chr chr ver & 255 hb h2 bin '1803 ' + ver chr + h2 bin '4000013 ffd' + '\x 01 ' * 16381 hb + h2 bin '1803 ' + ver chr + h2 bin '0003010000 ' s send hb return hit hb s
def generated Point Grid pixel width pixel height width scalar 1 0 height scalar 1 0 horiz points 5 vert points 5 swidth pixel width * width scalar sheight pixel height * height scalar x y np meshgrid np linspace - swidth / 2 0 swidth / 2 0 horiz points np linspace - sheight / 2 0 sheight / 2 0 vert points points np column stack x flatten y flatten return points
@task@cmdopts [BOKCHOY COVERAGERC BOKCHOY DEFAULT STORE BOKCHOY DEFAULT STORE DEPR] @timeddef start servers options coveragerc options get 'coveragerc' Env BOK CHOY COVERAGERC def start server cmd logfile cwd None '\n Startsasingleserver \n'print cmd logfilerun background process cmd out log logfile err log logfile cwd cwd for service info in Env BOK CHOY SERVERS iteritems address '0 0 0 0 {}' format info['port'] cmd 'DEFAULT STORE {default store}coveragerun--rcfile {coveragerc}-mmanage{service}--settingsbok choyrunserver{address}--traceback--noreload' format default store options default store coveragerc coveragerc service service address address start server cmd info['log'] for service info in Env BOK CHOY STUBS iteritems cmd 'python-mstubs start{service}{port}{config}' format service service port info['port'] config info get 'config' '' start server cmd info['log'] cwd Env BOK CHOY STUB DIR
@task@cmdopts [BOKCHOY COVERAGERC BOKCHOY DEFAULT STORE BOKCHOY DEFAULT STORE DEPR] @timeddef start servers options coveragerc options get 'coveragerc' Env BOK CHOY COVERAGERC def start server cmd logfile cwd None '\n Startsasingleserver \n'print cmd logfilerun background process cmd out log logfile err log logfile cwd cwd for service info in Env BOK CHOY SERVERS iteritems address '0 0 0 0 {}' format info['port'] cmd 'DEFAULT STORE {default store}coveragerun--rcfile {coveragerc}-mmanage{service}--settingsbok choyrunserver{address}--traceback--noreload' format default store options default store coveragerc coveragerc service service address address start server cmd info['log'] for service info in Env BOK CHOY STUBS iteritems cmd 'python-mstubs start{service}{port}{config}' format service service port info['port'] config info get 'config' '' start server cmd info['log'] cwd Env BOK CHOY STUB DIR
def build list context builder list type items nitems len items inst List Instance allocate context builder list type nitems inst size context get constant types intp nitems for i val in enumerate items inst setitem context get constant types intp i val return impl ret new ref context builder list type inst value
def get total open threads feedback thread analytics return sum feedback num open threads for feedback in feedback thread analytics
def example number for type region code num type if region code is None return example number anywhere for type num type if not is valid region code region code return Nonemetadata Phone Metadata metadata for region region code upper desc number desc for type metadata num type if desc example number is not None try return parse desc example number region code except Number Parse Exception passreturn None
def format Records records heading answers authority additional recordslines [ '#' + heading ]for a in answers line [a name dns QUERY CLASSES get a cls 'UNKNOWN %d ' % a cls a payload]lines append '' join str word for word in line return '\n' join line for line in lines
def format Records records heading answers authority additional recordslines [ '#' + heading ]for a in answers line [a name dns QUERY CLASSES get a cls 'UNKNOWN %d ' % a cls a payload]lines append '' join str word for word in line return '\n' join line for line in lines
def format Records records heading answers authority additional recordslines [ '#' + heading ]for a in answers line [a name dns QUERY CLASSES get a cls 'UNKNOWN %d ' % a cls a payload]lines append '' join str word for word in line return '\n' join line for line in lines
def wep send deauths iface target clients global RUN CONFI Gcmd ['aireplay-ng' '--ignore-negative-one' '--deauth' str RUN CONFIG WPA DEAUTH COUNT '-a' target bssid iface]call cmd stdout DN stderr DN for client in clients cmd ['aireplay-ng' '--ignore-negative-one' '--deauth' str RUN CONFIG WPA DEAUTH COUNT '-a' target bssid '-h' client bssid iface]call cmd stdout DN stderr DN
def wep send deauths iface target clients global RUN CONFI Gcmd ['aireplay-ng' '--ignore-negative-one' '--deauth' str RUN CONFIG WPA DEAUTH COUNT '-a' target bssid iface]call cmd stdout DN stderr DN for client in clients cmd ['aireplay-ng' '--ignore-negative-one' '--deauth' str RUN CONFIG WPA DEAUTH COUNT '-a' target bssid '-h' client bssid iface]call cmd stdout DN stderr DN
@contextlib contextmanagerdef assure cleanup enter func exit func use enter return enter return Nonetry if isinstance enter func functools partial enter func name enter func func name else enter func name enter func name LOG debug ' Enteringcontext Function % func name s use enter return % use s ' {'func name' enter func name 'use' use enter return} enter return enter func yield enter return finally if isinstance exit func functools partial exit func name exit func func name else exit func name exit func name LOG debug ' Exitingcontext Function % func name s use enter return % use s ' {'func name' exit func name 'use' use enter return} if enter return is not None if use enter return ignore exception exit func enter return else ignore exception exit func
def s3 decode iso datetime dtstr DEFAULT datetime datetime utcnow replace second 0 microsecond 0 dt dateutil parser parse dtstr default DEFAULT if dt tzinfo is None try dt dateutil parser parse dtstr + '+ 0000 ' default DEFAULT except dt dateutil parser parse dtstr + '00 00 00 + 0000 ' default DEFAULT return dt
def s3 decode iso datetime dtstr DEFAULT datetime datetime utcnow replace second 0 microsecond 0 dt dateutil parser parse dtstr default DEFAULT if dt tzinfo is None try dt dateutil parser parse dtstr + '+ 0000 ' default DEFAULT except dt dateutil parser parse dtstr + '00 00 00 + 0000 ' default DEFAULT return dt
def s3 decode iso datetime dtstr DEFAULT datetime datetime utcnow replace second 0 microsecond 0 dt dateutil parser parse dtstr default DEFAULT if dt tzinfo is None try dt dateutil parser parse dtstr + '+ 0000 ' default DEFAULT except dt dateutil parser parse dtstr + '00 00 00 + 0000 ' default DEFAULT return dt
def delete thumbnails relative source path root None basedir None subdir None prefix None thumbs thumbnails for file relative source path root basedir subdir prefix return delete using thumbs list thumbs
def delete thumbnails relative source path root None basedir None subdir None prefix None thumbs thumbnails for file relative source path root basedir subdir prefix return delete using thumbs list thumbs
def update collection name upsert multi spec doc safe last error args check keys opts options 0if upsert options + 1if multi options + 2data ZERO 32 data + bson make c string collection name data + struct pack '<i' options data + bson BSON encode spec False opts encoded bson BSON encode doc check keys opts data + encodedif safe update message pack message 2001 data request id error message last error collection name last error args return request id update message + error message len encoded else request id update message pack message 2001 data return request id update message len encoded
def to node node state return Node uuid node state uuid hostname node state hostname applications node state applications or {} manifestations node state manifestations or {}
def get filter query args query Q if 'datefrom' in args and 'dateto' in args and args['datefrom'] and args['dateto'] datefrom datetime date datetime strptime args['datefrom'] '%m/%d/%Y' dateto datetime date datetime strptime args['dateto'] '%m/%d/%Y' dateto datetime year dateto year month dateto month day dateto day hour 23 minute 59 second 59 query Q end gte datefrom query query & Q Q start isnull True Q start lte dateto return query
def to int *names **kwargs return reduce lambda prev next prev SCOPE NAME DICT get next 0 names kwargs pop 'default' 0
def current resource name request service current service request resource name service viewset get name service resource return resource name
def proc exists pid if not os path exists '/proc/%s' % pid raise No Such Process
def proc exists pid if not os path exists '/proc/%s' % pid raise No Such Process
def check that blanks fail problem blank answers dict answer id u'' for answer id in problem get question answers grading results problem grade answers blank answers try assert all result u'incorrect' for result in grading results values except Assertion Error log error u' Blankacceptedascorrectanswerin{ 0 }for{ 1 }' format problem [answer id for answer id result in sorted grading results items if result u'incorrect' ]
def open name mode 'r' bufsize -1 return posixfile open name mode bufsize
def mainloop n 0 default root tk mainloop n
def dump event event dump {}dump['summary'] event titledump['description'] event descriptiondump['location'] event locationdump['transparency'] 'opaque' if event busy else 'transparent' if event all day dump['start'] {'date' event start strftime '%Y-%m-%d' }dump['end'] {'date' event end strftime '%Y-%m-%d' }else dump['start'] {'date Time' event start isoformat 'T' 'time Zone' 'UTC'}dump['end'] {'date Time' event end isoformat 'T' 'time Zone' 'UTC'}if event participants dump['attendees'] []inverse status map {value key for key value in STATUS MAP items }for participant in event participants attendee {}if 'name' in participant attendee['display Name'] participant['name']if 'status' in participant attendee['response Status'] inverse status map[participant['status']]if 'email' in participant attendee['email'] participant['email']if 'guests' in participant attendee['additional Guests'] participant['guests']if attendee dump['attendees'] append attendee return dump
def maybe convert string to object values if isinstance values string types values np array [values] dtype object elif isinstance values np ndarray and issubclass values dtype type np string np unicode values values astype object return values
def convert to standard attr attr ret attr ATTR MAP get attr None if ret attr is None return attr lower return ret attr
def convert to standard attr attr ret attr ATTR MAP get attr None if ret attr is None return attr lower return ret attr
def convert to standard attr attr ret attr ATTR MAP get attr None if ret attr is None return attr lower return ret attr
def convert to standard attr attr ret attr ATTR MAP get attr None if ret attr is None return attr lower return ret attr
def enable name **kwargs stat cmd '{ 0 }set{ 1 }statuson' format cmd name stat retcode salt ['cmd retcode'] stat cmd flag retcode Noneif os path exists '/etc/rc d/{ 0 }' format name flags get flags **kwargs flag cmd '{ 0 }set{ 1 }flags{ 2 }' format cmd name flags flag retcode salt ['cmd retcode'] flag cmd return not any [stat retcode flag retcode]
def get rarefaction data rarefaction data col headers rare mat raw array rarefaction data rare mat min [rare mat raw[x][ 2 ] for x in range 0 len rare mat raw ]seqs per samp [rare mat raw[x][ 0 ] for x in range 0 len rare mat raw ]sample I Ds col headers[ 3 ]rare mat trans transpose array rare mat min tolist return rare mat trans seqs per samp sample I Ds
def flatten tree elem path branches if not path path []if isinstance elem dict for k v in elem items flatten tree v path + [k] branches elif isinstance elem list for sub in elem flatten tree sub path branches else branches append path + [six text type elem ]
def flatten tree elem path branches if not path path []if isinstance elem dict for k v in elem items flatten tree v path + [k] branches elif isinstance elem list for sub in elem flatten tree sub path branches else branches append path + [six text type elem ]
def find sr from vdi session vdi ref try sr ref session call xenapi 'VDI get SR' vdi ref except session Xen API Failure LOG exception LE ' Unabletofind S Rfrom VDI' raise exception Storage Error reason ' Unabletofind S Rfrom VDI%s' % vdi ref return sr ref
def create consistencygroup ctxt host 'test host@fakedrv#fakepool' name 'test cg' description 'thisisatestcg' status fields Consistency Group Status AVAILABLE availability zone 'fake az' volume type id None cgsnapshot id None source cgid None **kwargs cg objects Consistency Group ctxt cg host hostcg user id ctxt user id or fake USER ID cg project id ctxt project id or fake PROJECT ID cg status statuscg name namecg description descriptioncg availability zone availability zoneif volume type id cg volume type id volume type idcg cgsnapshot id cgsnapshot idcg source cgid source cgidnew id kwargs pop 'id' None cg update kwargs cg create if new id and new id cg id db consistencygroup update ctxt cg id {'id' new id} cg objects Consistency Group get by id ctxt new id return cg
def xml summary registry xml parent data summary XML Sub Element xml parent 'hudson plugins summary report ACI Plugin Publisher' summary set 'plugin' 'summary report' mapping [ 'files' 'name' None 'shown-on-project-page' 'shown On Project Page' False ]helpers convert mapping to xml summary data mapping fail required True
def xml summary registry xml parent data summary XML Sub Element xml parent 'hudson plugins summary report ACI Plugin Publisher' summary set 'plugin' 'summary report' mapping [ 'files' 'name' None 'shown-on-project-page' 'shown On Project Page' False ]helpers convert mapping to xml summary data mapping fail required True
def xml summary registry xml parent data summary XML Sub Element xml parent 'hudson plugins summary report ACI Plugin Publisher' summary set 'plugin' 'summary report' mapping [ 'files' 'name' None 'shown-on-project-page' 'shown On Project Page' False ]helpers convert mapping to xml summary data mapping fail required True
def get Alteration File Lines file Name lines get Alteration Lines file Name if len lines 0 return []return [get Alteration File Line Blindly file Name ] + lines
def send event **arguments log debug u' Sendingevent {0 }' format event for handler in event handlers [event] argspec inspect getargspec handler argsargs dict k v for k v in arguments items if k in argspec handler **args
def sanitize migrate engine table session orm sessionmaker bind migrate engine qry session query table c image id table c member group by table c image id table c member having func count > 1 for image id member in qry d table delete where and table c deleted True table c image id image id table c member member d execute session close
def sanitize migrate engine table session orm sessionmaker bind migrate engine qry session query table c image id table c member group by table c image id table c member having func count > 1 for image id member in qry d table delete where and table c deleted True table c image id image id table c member member d execute session close
@contextlib contextmanagerdef kill on error proc with proc try yield proc except proc kill raise
def append PKCS 7 padding b numpads 16 - len b % 16 return b + numpads * bytes chr numpads encoding u'ascii'
def gather pillar pillarenv pillar override **grains pillar salt pillar get pillar opts grains opts ['id'] opts ['environment'] pillar pillar override pillarenv pillarenv ret pillar compile pillar if pillar override and isinstance pillar override dict ret update pillar override return ret
def test create user story attachment without file client us f User Story Factory create f Membership Factory project us project user us owner is admin True attachment data {'description' 'test' 'attached file' None 'project' us project id}url reverse 'userstory-attachments-list' client login us owner response client post url attachment data assert response status code 400
def test get set vector rng np random Random State [2014 5 8] class Dummy Model Model "\n A Modelthatexercisesthistestbyhavingafewdifferent\nparameterswithdifferentshapesanddimensionalities \n\n Don'tinstantiatemorethanoneofthesebecausetheparameters\nareclass-levelattributes \n" params [shared X rng randn 5 shared X rng randn 5 3 shared X rng randn 4 4 4 ]model Dummy Model vector model get param vector model set param vector 0 0 * vector assert np allclose 0 0 * vector model get param vector model set param vector vector assert np allclose model get param vector vector
def test get set vector rng np random Random State [2014 5 8] class Dummy Model Model "\n A Modelthatexercisesthistestbyhavingafewdifferent\nparameterswithdifferentshapesanddimensionalities \n\n Don'tinstantiatemorethanoneofthesebecausetheparameters\nareclass-levelattributes \n" params [shared X rng randn 5 shared X rng randn 5 3 shared X rng randn 4 4 4 ]model Dummy Model vector model get param vector model set param vector 0 0 * vector assert np allclose 0 0 * vector model get param vector model set param vector vector assert np allclose model get param vector vector
def straight line vertices adjacency mat node coords directed False if not issparse adjacency mat adjacency mat np asarray adjacency mat float if adjacency mat ndim 2 or adjacency mat shape[ 0 ] adjacency mat shape[ 1 ] raise Value Error ' Adjacencymatrixshouldbesquare ' arrow vertices np array [] edges get edges adjacency mat line vertices node coords[edges ravel ]if directed arrows np array list get directed edges adjacency mat arrow vertices node coords[arrows ravel ]arrow vertices arrow vertices reshape len arrow vertices / 2 4 return line vertices arrow vertices
@hgcommanddef undo ui repo clname **opts if not workbranch repo[ None] branch raise hg util Abort 'cannotrunhgundooutsidedefaultbranch' err clpatch or undo ui repo clname opts mode 'undo' if err raise hg util Abort err
@hgcommanddef undo ui repo clname **opts if not workbranch repo[ None] branch raise hg util Abort 'cannotrunhgundooutsidedefaultbranch' err clpatch or undo ui repo clname opts mode 'undo' if err raise hg util Abort err
@hgcommanddef undo ui repo clname **opts if not workbranch repo[ None] branch raise hg util Abort 'cannotrunhgundooutsidedefaultbranch' err clpatch or undo ui repo clname opts mode 'undo' if err raise hg util Abort err
def rename Column cname cname cname replace 'ID' ' Id' return rename Table cname
def dereference type t if t strip in ['void*' 'char*'] return t strip try return t[ t rindex '*' ] strip except return t strip
def dereference type t if t strip in ['void*' 'char*'] return t strip try return t[ t rindex '*' ] strip except return t strip
def axes *args **kwargs nargs len args if len args 0 return subplot 111 **kwargs if nargs > 1 raise Type Error ' Onlyonenonkeywordargtoaxesallowed' arg args[ 0 ]if isinstance arg Axes a gcf sca arg else rect arga gcf add axes rect **kwargs draw if interactive return a
def axes *args **kwargs nargs len args if len args 0 return subplot 111 **kwargs if nargs > 1 raise Type Error ' Onlyonenonkeywordargtoaxesallowed' arg args[ 0 ]if isinstance arg Axes a gcf sca arg else rect arga gcf add axes rect **kwargs draw if interactive return a
def enabled name **kwargs ret {'name' name 'result' True 'changes' {} 'comment' []}current schedule salt ['schedule list'] show all True return yaml False if name in current schedule if 'test' in opts and opts ['test'] kwargs['test'] Trueresult salt ['schedule enable job'] name **kwargs ret['comment'] append result['comment'] else result salt ['schedule enable job'] name **kwargs if not result['result'] ret['result'] result['result']ret['comment'] result['comment']return retelse ret['comment'] append ' Enabledjob{ 0 }fromschedule' format name else ret['comment'] append ' Job{ 0 }notpresentinschedule' format name ret['comment'] '\n' join ret['comment'] return ret
def create location org course run block type block id return modulestore make course key org course run make usage key block type block id
def render Symbol symbol size pen brush device None pen Px Width max np ceil pen width F 1 if device is None device Qt Gui Q Image int size + pen Px Width int size + pen Px Width Qt Gui Q Image Format ARGB 32 device fill 0 p Qt Gui Q Painter device try p set Render Hint p Antialiasing p translate device width * 0 5 device height * 0 5 draw Symbol p symbol size pen brush finally p end return device
def fast cross 3d x y assert x ndim 2 assert y ndim 2 assert x shape[ 1 ] 3 assert y shape[ 1 ] 3 assert x shape[ 0 ] 1 or y shape[ 0 ] 1 or x shape[ 0 ] y shape[ 0 ] if max [x shape[ 0 ] y shape[ 0 ]] > 500 return np c [ x[ 1] * y[ 2] - x[ 2] * y[ 1] x[ 2] * y[ 0] - x[ 0] * y[ 2] x[ 0] * y[ 1] - x[ 1] * y[ 0] ]else return np cross x y
def submit reset problem attempts in entrance exam request usage key student modulestore get item usage key task type 'reset problem attempts'task class reset problem attempts task input task key encode entrance exam and student input usage key student return submit task request task type task class usage key course key task input task key
def json convert obj json options DEFAULT JSON OPTIONS if hasattr obj 'iteritems' or hasattr obj 'items' return SON k json convert v json options for k v in iteritems obj elif hasattr obj ' iter ' and not isinstance obj text type bytes return list json convert v json options for v in obj try return default obj json options except Type Error return obj
def json convert obj json options DEFAULT JSON OPTIONS if hasattr obj 'iteritems' or hasattr obj 'items' return SON k json convert v json options for k v in iteritems obj elif hasattr obj ' iter ' and not isinstance obj text type bytes return list json convert v json options for v in obj try return default obj json options except Type Error return obj
def json convert obj json options DEFAULT JSON OPTIONS if hasattr obj 'iteritems' or hasattr obj 'items' return SON k json convert v json options for k v in iteritems obj elif hasattr obj ' iter ' and not isinstance obj text type bytes return list json convert v json options for v in obj try return default obj json options except Type Error return obj
def get hash path form 'sha 256 ' chunk size 65536 hash type hasattr hashlib form and getattr hashlib form or None if hash type is None raise Value Error ' Invalidhashtype {0 }' format form with salt utils fopen path 'rb' as ifile hash obj hash type for chunk in iter lambda ifile read chunk size '' hash obj update chunk return hash obj hexdigest
def get hash path form 'sha 256 ' chunk size 65536 hash type hasattr hashlib form and getattr hashlib form or None if hash type is None raise Value Error ' Invalidhashtype {0 }' format form with salt utils fopen path 'rb' as ifile hash obj hash type for chunk in iter lambda ifile read chunk size '' hash obj update chunk return hash obj hexdigest
def get hash path form 'sha 256 ' chunk size 65536 hash type hasattr hashlib form and getattr hashlib form or None if hash type is None raise Value Error ' Invalidhashtype {0 }' format form with salt utils fopen path 'rb' as ifile hash obj hash type for chunk in iter lambda ifile read chunk size '' hash obj update chunk return hash obj hexdigest
def get hash path form 'sha 256 ' chunk size 65536 hash type hasattr hashlib form and getattr hashlib form or None if hash type is None raise Value Error ' Invalidhashtype {0 }' format form with salt utils fopen path 'rb' as ifile hash obj hash type for chunk in iter lambda ifile read chunk size '' hash obj update chunk return hash obj hexdigest
def get hash path form 'sha 256 ' chunk size 65536 hash type hasattr hashlib form and getattr hashlib form or None if hash type is None raise Value Error ' Invalidhashtype {0 }' format form with salt utils fopen path 'rb' as ifile hash obj hash type for chunk in iter lambda ifile read chunk size '' hash obj update chunk return hash obj hexdigest
def joinall threads for t in threads t join 300 assert not t is Alive ' Thread%shung' % t
def TC Volts To Temp TC Type TC Volts CJ Temp K if os name 'nt' static Lib ctypes windll Load Library 'labjackud' pTC Temp K ctypes c double ec static Lib TC Volts To Temp ctypes c long TC Type ctypes c double TC Volts ctypes c double CJ Temp K ctypes byref pTC Temp K if ec 0 raise Lab Jack Exception ec return pTC Temp K valueelse raise Lab Jack Exception 0 ' Functiononlysupportedfor Windows'
def TC Volts To Temp TC Type TC Volts CJ Temp K if os name 'nt' static Lib ctypes windll Load Library 'labjackud' pTC Temp K ctypes c double ec static Lib TC Volts To Temp ctypes c long TC Type ctypes c double TC Volts ctypes c double CJ Temp K ctypes byref pTC Temp K if ec 0 raise Lab Jack Exception ec return pTC Temp K valueelse raise Lab Jack Exception 0 ' Functiononlysupportedfor Windows'
def write git file gitstr git str if gitstr is None gitstr ''path os path join BASEDIR 'qutebrowser' 'git-commit-id' with open path 'w' encoding 'ascii' as f f write gitstr
def write git file gitstr git str if gitstr is None gitstr ''path os path join BASEDIR 'qutebrowser' 'git-commit-id' with open path 'w' encoding 'ascii' as f f write gitstr
def get mock hadoop output output dir get mock dir 'output' dirnames sorted os listdir output dir if dirnames return os path join output dir dirnames[ 0 ] else return None
def get mock hadoop output output dir get mock dir 'output' dirnames sorted os listdir output dir if dirnames return os path join output dir dirnames[ 0 ] else return None
def get bench name bench func return bench func name [ len BENCH METHOD PREFIX + 1 ]
def setup platform hass config add devices discovery info None if not int hub config get CONF SMARTPLUGS 1 return Falsehub update smartplugs switches []switches extend [ Verisure Smartplug value device Label for value in hub smartplug status values ] add devices switches
def remove entity headers headers allowed 'expires' 'content-location' allowed set x lower for x in allowed headers[ ] [ key value for key value in headers if not is entity header key or key lower in allowed ]
def unique slug queryset slug field slug i 0while True if i > 0 if i > 1 slug slug rsplit u'-' 1 [0 ]slug u'%s-%s' % slug i try queryset get **{slug field slug} except Object Does Not Exist breaki + 1return slug
def build request url data None headers None bump '' if not USER AGENT build user agent if not headers headers {}if url[ 0 ] ' ' schemed url '%s%s' % SCHEME url else schemed url urlif '?' in url delim '&'else delim '?'final url '%s%sx %s %s' % schemed url delim int timeit time time * 1000 bump headers update {' User- Agent' USER AGENT ' Cache- Control' 'no-cache'} printer '%s%s' % 'GET' 'POST' [bool data ] final url debug True return Request final url data data headers headers
def build request url data None headers None bump '' if not USER AGENT build user agent if not headers headers {}if url[ 0 ] ' ' schemed url '%s%s' % SCHEME url else schemed url urlif '?' in url delim '&'else delim '?'final url '%s%sx %s %s' % schemed url delim int timeit time time * 1000 bump headers update {' User- Agent' USER AGENT ' Cache- Control' 'no-cache'} printer '%s%s' % 'GET' 'POST' [bool data ] final url debug True return Request final url data data headers headers
def get Text node recursive False L [u'']for n in node child Nodes if n node Type in node TEXT NODE node CDATA SECTION NODE L append n data elif not recursive return None L append get Text n return u'' join L
def get End Index Convert Equation Value bracket End Index evaluator Index evaluators evaluator evaluators[evaluator Index]if evaluator class Evaluator Value return bracket End Indexif not evaluator word startswith 'equation ' return bracket End Indexif evaluators[ evaluator Index + 1 ] word ' ' return bracket End Indexvalue Begin Index evaluator Index + 2 equation Value String ''for value Evaluator Index in xrange value Begin Index len evaluators value Evaluator evaluators[value Evaluator Index]if value Evaluator word ' ' or value Evaluator word '}' if equation Value String '' return bracket End Indexelse evaluators[value Begin Index] Evaluator Value equation Value String value Delete Index value Begin Index + 1 del evaluators[value Delete Index value Evaluator Index]return bracket End Index - value Evaluator Index + value Delete Index equation Value String + value Evaluator wordreturn bracket End Index
def get End Index Convert Equation Value bracket End Index evaluator Index evaluators evaluator evaluators[evaluator Index]if evaluator class Evaluator Value return bracket End Indexif not evaluator word startswith 'equation ' return bracket End Indexif evaluators[ evaluator Index + 1 ] word ' ' return bracket End Indexvalue Begin Index evaluator Index + 2 equation Value String ''for value Evaluator Index in xrange value Begin Index len evaluators value Evaluator evaluators[value Evaluator Index]if value Evaluator word ' ' or value Evaluator word '}' if equation Value String '' return bracket End Indexelse evaluators[value Begin Index] Evaluator Value equation Value String value Delete Index value Begin Index + 1 del evaluators[value Delete Index value Evaluator Index]return bracket End Index - value Evaluator Index + value Delete Index equation Value String + value Evaluator wordreturn bracket End Index
def remove task app project directory task app location os path join PROJECT DIRECTORY '{{cookiecutter project slug}}/taskapp' shutil rmtree task app location
def get API node base ''if node has Attribute 'base' base node get Attribute 'base' + ' ' return base + node child Nodes[ 0 ] node Value
def obj equal prims obj 1 obj 2 ignore None def strip prim keys if isinstance prim dict for k in keys prim pop k None for v in prim values strip v keys if isinstance prim list for v in prim strip v keys return primif ignore is not None keys ['nova object changes'] + ignore else keys ['nova object changes']prim 1 strip obj 1 obj to primitive keys prim 2 strip obj 2 obj to primitive keys return prim 1 prim 2
def obj equal prims obj 1 obj 2 ignore None def strip prim keys if isinstance prim dict for k in keys prim pop k None for v in prim values strip v keys if isinstance prim list for v in prim strip v keys return primif ignore is not None keys ['nova object changes'] + ignore else keys ['nova object changes']prim 1 strip obj 1 obj to primitive keys prim 2 strip obj 2 obj to primitive keys return prim 1 prim 2
def idrac general blade name command idrac password None host None admin username None admin password None module network network info host admin username admin password blade name if idrac password is not None password idrac passwordelse password admin passwordidrac ip module network[' Network']['IP Address']ret execute ret command host idrac ip admin username 'root' admin password password if ret['retcode'] 0 return ret['stdout']else return ret
@not implemented for 'directed' def min weighted dominating set G weight None if len G 0 return set dom set set def cost node and neighborhood ' Returnsthecost-effectivenessofgreedilychoosingthegiven\nnode \n\n`node and neighborhood`isatwo-tuplecomprisinganodeandits\nclosedneighborhood \n\n' v neighborhood node and neighborhoodreturn G node[v] get weight 1 / len neighborhood - dom set vertices set G neighborhoods {v {v} set G[v] for v in G}while vertices dom node min set min neighborhoods items key cost dom set add dom node del neighborhoods[dom node]vertices - min setreturn dom set
@not implemented for 'directed' def min weighted dominating set G weight None if len G 0 return set dom set set def cost node and neighborhood ' Returnsthecost-effectivenessofgreedilychoosingthegiven\nnode \n\n`node and neighborhood`isatwo-tuplecomprisinganodeandits\nclosedneighborhood \n\n' v neighborhood node and neighborhoodreturn G node[v] get weight 1 / len neighborhood - dom set vertices set G neighborhoods {v {v} set G[v] for v in G}while vertices dom node min set min neighborhoods items key cost dom set add dom node del neighborhoods[dom node]vertices - min setreturn dom set
def package version package local False npm 'npm' options ['--jsontrue' '--silent']if local options append '-l' else options append '-g' options '' join options with hide 'running' 'stdout' res run '% npm slist% options s' % locals pty False dependencies json loads res get 'dependencies' {} pkg data dependencies get package if pkg data return pkg data['version']else return None
def get Location **kwargs global CURRENT LA Tglobal CURRENT LO Nif kwargs is not None CURRENT LAT kwargs['lat']CURRENT LON kwargs['lon']
def get Location **kwargs global CURRENT LA Tglobal CURRENT LO Nif kwargs is not None CURRENT LAT kwargs['lat']CURRENT LON kwargs['lon']
def get Location **kwargs global CURRENT LA Tglobal CURRENT LO Nif kwargs is not None CURRENT LAT kwargs['lat']CURRENT LON kwargs['lon']
def wrap Client TLS connection Creator wrapped Endpoint if TLS Memory BIO Factory is None raise Not Implemented Error ' Open SS Lnotavailable Try`pipinstalltwisted[tls]` ' return Wrapper Endpoint wrapped Endpoint lambda protocol Factory TLS Memory BIO Factory connection Creator True protocol Factory
def wrap Client TLS connection Creator wrapped Endpoint if TLS Memory BIO Factory is None raise Not Implemented Error ' Open SS Lnotavailable Try`pipinstalltwisted[tls]` ' return Wrapper Endpoint wrapped Endpoint lambda protocol Factory TLS Memory BIO Factory connection Creator True protocol Factory
def get image blob roidb scale inds num images len roidb processed ims []im scales []for i in xrange num images im cv 2 imread roidb[i]['image'] if roidb[i]['flipped'] im im[ -1 ]target size cfg TRAIN SCALES[scale inds[i]] im im scale prep im for blob im cfg PIXEL MEANS target size cfg TRAIN MAX SIZE im scales append im scale processed ims append im blob im list to blob processed ims return blob im scales
def get image blob roidb scale inds num images len roidb processed ims []im scales []for i in xrange num images im cv 2 imread roidb[i]['image'] if roidb[i]['flipped'] im im[ -1 ]target size cfg TRAIN SCALES[scale inds[i]] im im scale prep im for blob im cfg PIXEL MEANS target size cfg TRAIN MAX SIZE im scales append im scale processed ims append im blob im list to blob processed ims return blob im scales
def get image blob roidb scale inds num images len roidb processed ims []im scales []for i in xrange num images im cv 2 imread roidb[i]['image'] if roidb[i]['flipped'] im im[ -1 ]target size cfg TRAIN SCALES[scale inds[i]] im im scale prep im for blob im cfg PIXEL MEANS target size cfg TRAIN MAX SIZE im scales append im scale processed ims append im blob im list to blob processed ims return blob im scales
def rainbow n from matplotlib import colors R np ones 1 n 3 R[ 0 0] np linspace 0 1 n endpoint False return colors hsv to rgb R squeeze
def rainbow n from matplotlib import colors R np ones 1 n 3 R[ 0 0] np linspace 0 1 n endpoint False return colors hsv to rgb R squeeze
def ordered dict to dict config return loads dumps config
def solve poly system seq *gens **args try polys opt parallel poly from expr seq *gens **args except Polification Failed as exc raise Computation Failed 'solve poly system' len seq exc if len polys len opt gens 2 f g polys a b f degree list c d g degree list if a < 2 and b < 2 and c < 2 and d < 2 try return solve biquadratic f g opt except Solve Failed passreturn solve generic polys opt
def Get All Client Labels token include catchall False labels index aff 4 FACTORY Create standard Label Set CLIENT LABELS URN standard Label Set mode 'r' token token labels set labels index List Labels if include catchall labels add ALL CLIENTS LABEL return labels
def with app *args **kwargs def generator func @wraps func def deco *args 2 **kwargs 2 app Test App *args **kwargs func app *args 2 **kwargs 2 app cleanup return decoreturn generator
def get Center By Paths element Node transformed Paths element Node xml Object get Transformed Paths return 0 5 * euclidean get Maximum By Vector 3 Paths transformed Paths + euclidean get Minimum By Vector 3 Paths transformed Paths
def polynomial kernel X Y None degree 3 gamma None coef 0 1 X Y check pairwise arrays X Y if gamma is None gamma 1 0 / X shape[ 1 ] K safe sparse dot X Y T dense output True K * gamma K + coef 0 K ** degreereturn K
def generate certificates cluster name cluster id nodes cert path print ' Generatingcertificatesin {}' format cert path path certificates Certificates generate cert path nodes[ 0 ] address len nodes cluster name cluster name cluster id cluster id return certificates
def privileges get cursor user host output {}cursor execute 'SHOWGRANTSFOR%s@%s' user host grants cursor fetchall def pick x if x 'ALLPRIVILEGES' return 'ALL'else return xfor grant in grants res re match "GRANT + ON + TO' *'@' +' IDENTIFIEDBYPASSWORD' +' ?? * " grant[ 0 ] if res is None raise Invalid Privs Error 'unabletoparsethe My SQ Lgrantstring %s' % grant[ 0 ] privileges res group 1 split ' ' privileges [pick x for x in privileges]if 'WITHGRANTOPTION' in res group 4 privileges append 'GRANT' if 'REQUIRESSL' in res group 4 privileges append 'REQUIRESSL' db res group 2 output[db] privilegesreturn output
def privileges get cursor user host output {}cursor execute 'SHOWGRANTSFOR%s@%s' user host grants cursor fetchall def pick x if x 'ALLPRIVILEGES' return 'ALL'else return xfor grant in grants res re match "GRANT + ON + TO' *'@' +' IDENTIFIEDBYPASSWORD' +' ?? * " grant[ 0 ] if res is None raise Invalid Privs Error 'unabletoparsethe My SQ Lgrantstring %s' % grant[ 0 ] privileges res group 1 split ' ' privileges [pick x for x in privileges]if 'WITHGRANTOPTION' in res group 4 privileges append 'GRANT' if 'REQUIRESSL' in res group 4 privileges append 'REQUIRESSL' db res group 2 output[db] privilegesreturn output
def privileges get cursor user host output {}cursor execute 'SHOWGRANTSFOR%s@%s' user host grants cursor fetchall def pick x if x 'ALLPRIVILEGES' return 'ALL'else return xfor grant in grants res re match "GRANT + ON + TO' *'@' +' IDENTIFIEDBYPASSWORD' +' ?? * " grant[ 0 ] if res is None raise Invalid Privs Error 'unabletoparsethe My SQ Lgrantstring %s' % grant[ 0 ] privileges res group 1 split ' ' privileges [pick x for x in privileges]if 'WITHGRANTOPTION' in res group 4 privileges append 'GRANT' if 'REQUIRESSL' in res group 4 privileges append 'REQUIRESSL' db res group 2 output[db] privilegesreturn output
def latest package name distro 'trusty' latest minor version latest release version [ 3]return 'python-ckan {version}-{distro} amd 64 deb' format version latest minor version distro distro
def get init version abs path None if abs path is None abs path find repo LEGACY REPO repo migrate versioning repository Repository abs path oldest int min repo versions versions if oldest < 1 return Nonereturn oldest - 1
def Add Rate To Summary tag rate step sw sw add summary summary pb 2 Summary value [summary pb 2 Summary Value tag tag simple value rate ] step
def infer name self context None frame stmts self lookup self name if not stmts parent function higher function scope self scope if parent function stmts parent function lookup self name if not stmts raise Unresolvable Name self name context context clone context lookupname self namereturn infer stmts stmts context frame
def mkfs root fs format fs opts None if fs opts is None fs opts {}if fs format in 'ext 2 ' 'ext 3 ' 'ext 4 ' salt ['extfs mkfs'] root fs format **fs opts elif fs format in 'btrfs' salt ['btrfs mkfs'] root **fs opts elif fs format in 'xfs' salt ['xfs mkfs'] root **fs opts
def mkfs root fs format fs opts None if fs opts is None fs opts {}if fs format in 'ext 2 ' 'ext 3 ' 'ext 4 ' salt ['extfs mkfs'] root fs format **fs opts elif fs format in 'btrfs' salt ['btrfs mkfs'] root **fs opts elif fs format in 'xfs' salt ['xfs mkfs'] root **fs opts
@task@needs 'pavelib prereqs install node prereqs' @cmdopts [ 'limit ' 'l' 'limitfornumberofacceptableviolations' ] @timeddef run eslint options eslint report dir Env REPORT DIR / 'eslint' eslint report eslint report dir / 'eslint report' prepare report dir eslint report dir violations limit int getattr options 'limit' -1 sh 'eslint--format compact tee{eslint report}' format eslint report eslint report ignore error True try num violations int get count from last line eslint report 'eslint' except Type Error raise Build Failure ' Error Numberofeslintviolationscouldnotbefoundin{eslint report}' format eslint report eslint report write metric num violations Env METRICS DIR / 'eslint' if num violations > violations limit > -1 raise Build Failure 'ES Lint Failed Toomanyviolations {count} \n Thelimitis{violations limit} ' format count num violations violations limit violations limit
@task@needs 'pavelib prereqs install node prereqs' @cmdopts [ 'limit ' 'l' 'limitfornumberofacceptableviolations' ] @timeddef run eslint options eslint report dir Env REPORT DIR / 'eslint' eslint report eslint report dir / 'eslint report' prepare report dir eslint report dir violations limit int getattr options 'limit' -1 sh 'eslint--format compact tee{eslint report}' format eslint report eslint report ignore error True try num violations int get count from last line eslint report 'eslint' except Type Error raise Build Failure ' Error Numberofeslintviolationscouldnotbefoundin{eslint report}' format eslint report eslint report write metric num violations Env METRICS DIR / 'eslint' if num violations > violations limit > -1 raise Build Failure 'ES Lint Failed Toomanyviolations {count} \n Thelimitis{violations limit} ' format count num violations violations limit violations limit
@handle response format@treeio login required@ process mass formdef index inbox request response format 'html' query Q reply to isnull True & ~ Q author request user profile get contact if request GET query query & get filter query request GET objects Object filter by request request Message objects filter query else objects Object filter by request request Message objects filter query filters Filter Form request user profile 'title' request GET context get default context request context update {'filters' filters 'messages' objects} return render to response 'messaging/index inbox' context context instance Request Context request response format response format
@hook command 'tell' def tell cmd text nick db notice conn query text split '' 1 if len query 2 notice conn config 'command prefix' + tell cmd doc returntarget query[ 0 ] lower message query[ 1 ] strip sender nickif target sender lower notice ' Haveyoulookedinamirrorlately?' returnif target lower conn nick lower notice " Invalidnick'{}' " format target returnif not re match '^[a-z 0 - 9 \\-\\]\\[]*$' target lower notice " Invalidnick'{}' " format target returnif count unread db conn name target > 10 notice ' Sorry {}hastoomanymessagesqueuedalready ' format target returnadd tell db conn name sender target message notice ' Yourmessagehasbeensaved and{}willbenotifiedoncetheyareactive ' format target
def cache path paths environ None return zipline path ['cache'] + list paths environ environ
def relative distance a str b str set a set a str split '' set b set b str split '' if min len set a len set b in 0 1 return difflib Sequence Matcher None a str b str quick ratio return 1 0 * len set a intersection set b / max len set a len set b
def setup platform hass config add devices discovery info None import radiothermhosts []if CONF HOST in config hosts config[CONF HOST]else hosts append radiotherm discover discover address if hosts is None LOGGER error ' No Radiotherm Thermostatsdetected' return Falsehold temp config get CONF HOLD TEMP away temps [config get CONF AWAY TEMPERATURE HEAT config get CONF AWAY TEMPERATURE COOL ]tstats []for host in hosts try tstat radiotherm get thermostat host tstats append Radio Thermostat tstat hold temp away temps except OS Error LOGGER exception ' Unabletoconnectto Radio Thermostat %s' host add devices tstats
def generate password hash password rounds None if rounds is None rounds settings BCRYPT LOG ROUND Sif not password raise Value Error ' Passwordmustbenon-empty ' pw hash bcrypt hashpw unicode password encode 'utf- 8 ' bcrypt gensalt rounds return pw hash
def contains feat title return bool re search plugins feat tokens title flags re IGNORECASE
def contains feat title return bool re search plugins feat tokens title flags re IGNORECASE
def Header Print Generic Details message which MUA HP HEADERS return [k for k v in message items if k lower in which ]
def Header Print Generic Details message which MUA HP HEADERS return [k for k v in message items if k lower in which ]
def pre hook config cmd config pre hookif cmd and cmd not in pre hook already logger info ' Runningpre-hookcommand %s' cmd run hook cmd pre hook already add cmd elif cmd logger info ' Pre-hookcommandalreadyrun skipping %s' cmd
def stop service service name os cmd ['/usr/bin/openstack-service' 'stop' service name]return salt ['cmd retcode'] os cmd 0
def parse fuzzy item source constraints saved pos source postry parse cost constraint source constraints except Parse Error source pos saved posparse cost equation source constraints
@not implemented for 'undirected' 'multigraph' def overall reciprocity G n all edge G number of edges n overlap edge n all edge - G to undirected number of edges * 2 if n all edge 0 raise Network X Error ' Notdefinedforemptygraphs' return float n overlap edge / float n all edge
def run host port api key auth token timeout channel grpc insecure channel '{} {}' format host port stub bookstore pb 2 Bookstore Stub channel metadata []if api key metadata append 'x-api-key' api key if auth token metadata append 'authorization' ' Bearer' + auth token shelves stub List Shelves empty pb 2 Empty timeout metadata metadata print ' List Shelves {}' format shelves
def mail reply reply user review reply base reply toreview request review review requestif not review request public returnextra context {u'user' reply user u'review' review u'reply' reply} has error extra context[u'comment entries'] build diff comment fragments reply comments order by u'filediff' u'first line' extra context u'notifications/email diff comment fragment html' reviewer reply user to field cc field build recipients reviewer review request review request participants to field cc field filter email recipients from hooks to field cc field reply published reply reply user user review review review request review request summary ensure unicode review request summary reply email message id send review mail user review request u' Re Review Request%d %s' % review request display id summary review email message id to field cc field u'notifications/reply email txt' u'notifications/reply email html' extra context reply time emailed timezone now reply save
def mail reply reply user review reply base reply toreview request review review requestif not review request public returnextra context {u'user' reply user u'review' review u'reply' reply} has error extra context[u'comment entries'] build diff comment fragments reply comments order by u'filediff' u'first line' extra context u'notifications/email diff comment fragment html' reviewer reply user to field cc field build recipients reviewer review request review request participants to field cc field filter email recipients from hooks to field cc field reply published reply reply user user review review review request review request summary ensure unicode review request summary reply email message id send review mail user review request u' Re Review Request%d %s' % review request display id summary review email message id to field cc field u'notifications/reply email txt' u'notifications/reply email html' extra context reply time emailed timezone now reply save
def test read types t1 ascii read 'abc\n 123 \n 456 ' format 'fast basic' guess False t2 ascii read String IO 'abc\n 123 \n 456 ' format 'fast basic' guess False t3 ascii read ['abc' '123 ' '456 '] format 'fast basic' guess False assert table equal t1 t2 assert table equal t2 t3
def test read types t1 ascii read 'abc\n 123 \n 456 ' format 'fast basic' guess False t2 ascii read String IO 'abc\n 123 \n 456 ' format 'fast basic' guess False t3 ascii read ['abc' '123 ' '456 '] format 'fast basic' guess False assert table equal t1 t2 assert table equal t2 t3
def is user lockable request try field getattr User 'USERNAME FIELD' 'username' kwargs {field request POST get USERNAME FORM FIELD }user User objects get **kwargs except User Does Not Exist return Trueif hasattr user 'nolockout' return not user nolockout elif hasattr settings 'AUTH PROFILE MODULE' try profile user get profile if hasattr profile 'nolockout' return not profile nolockout except Site Profile Not Available Object Does Not Exist Attribute Error return Truereturn True
def notify context message if not notification manager load notification manager if not pipeline manager load pipeline manager notification manager map process notification for ext context context or req context get admin context notification message
def notify context message if not notification manager load notification manager if not pipeline manager load pipeline manager notification manager map process notification for ext context context or req context get admin context notification message
def notify context message if not notification manager load notification manager if not pipeline manager load pipeline manager notification manager map process notification for ext context context or req context get admin context notification message
def get mapnik Map mapfile mmap mapnik Map 0 0 if exists mapfile mapnik load map mmap str mapfile else handle filename mkstemp os write handle urlopen mapfile read os close handle mapnik load map mmap filename os unlink filename return mmap
def generate Classification Data size n Classes 3 if n Classes 3 means [ -1 0 2 4 3 1 ]else means [ -2 0 2 1 6 0 ]cov [diag [1 1] diag [0 5 1 2] diag [1 5 0 7] ]dataset Classification Data Set 2 1 nb classes n Classes for in range size for c in range 3 input multivariate normal means[c] cov[c] dataset add Sample input [ c % n Classes ] dataset assign Classes return dataset
def test import gzip reader data file file read data gz sio c String IO String IO gz gzip Gzip File fileobj data gz sio mode 'wb' gz write data gz close data gz data gz sio getvalue old peek size beeswax create table IMPORT PEEK SIZ Ebeeswax create table IMPORT PEEK SIZE len data gz - 1024 try reader beeswax create table Gzip File Readerlines reader readlines data gz sio 'utf- 8 ' assert true lines is not None lines joined '\n' join lines assert equal data[ len lines joined ] lines joined finally beeswax create table IMPORT PEEK SIZE old peek size
def response namespace k v if k[ 8] 'headers ' cherrypy serving response headers[k split ' ' 1 [1 ]] velse setattr cherrypy serving response k v
def restart with reloader while 1 log 'info' '* Restartingwithreloader' args [sys executable] + sys argv new environ os environ copy new environ['WERKZEUG RUN MAIN'] 'true'if os name 'nt' for key value in new environ iteritems if isinstance value unicode new environ[key] value encode 'iso- 8859 - 1 ' exit code subprocess call args env new environ if exit code 3 return exit code
def populate unknown statuses set tasks visited set for task in set tasks['still pending not ext'] depth first search set tasks task visited
def populate unknown statuses set tasks visited set for task in set tasks['still pending not ext'] depth first search set tasks task visited
def create finder project name pyname only calls False imports True unsure None docs False instance None in hierarchy False keywords True pynames set [pyname] filters []if only calls filters append Calls Filter if not imports filters append No Imports Filter if not keywords filters append No Keywords Filter if isinstance instance pynames Parameter Name for pyobject in instance get objects try pynames add pyobject[name] except exceptions Attribute Not Found Error passfor pyname in pynames filters append Py Name Filter pyname if in hierarchy filters append In Hierarchy Filter pyname if unsure filters append Unsure Filter unsure return Finder project name filters filters docs docs
def rst add mathjax content ext os path splitext os path basename content source path if ext ' rst' returnif 'class "math"' in content content content content + "<scripttype 'text/javascript'>%s</script>" % rst add mathjax mathjax script
@removals remove message ' Useensure tree path 0o 755 fromoslo utils fileutils' def ensure dir dir path fileutils ensure tree dir path mode 493
def arg lookup fun aspec None ret {'kwargs' {}}if aspec is None aspec salt utils args get function argspec fun if aspec defaults ret['kwargs'] dict zip aspec args[ -1 ] aspec defaults[ -1 ] ret['args'] [arg for arg in aspec args if arg not in ret['kwargs'] ]return ret
def coord byval coord return c long coord Y * 65536 coord X & 65535
def is First Best Match result sickrage sr Core sr Logger debug u' Checkingifweshouldarchiveourfirstbestqualitymatchforepisode' + result name show obj result episodes[ 0 ] show any qualities best qualities Quality split Quality show obj quality if best qualities and show obj archive firstmatch and result quality in best qualities return Truereturn False
def is First Best Match result sickrage sr Core sr Logger debug u' Checkingifweshouldarchiveourfirstbestqualitymatchforepisode' + result name show obj result episodes[ 0 ] show any qualities best qualities Quality split Quality show obj quality if best qualities and show obj archive firstmatch and result quality in best qualities return Truereturn False
def at server reload start pass
def at server reload start pass
def task install ssh key return sequence [sudo from args ['cp' ' ssh/authorized keys' '/root/ ssh/authorized keys'] ]
def task install ssh key return sequence [sudo from args ['cp' ' ssh/authorized keys' '/root/ ssh/authorized keys'] ]
@when u'wesend"ctrl+d"' def step ctrl d context context cli sendcontrol u'd' context exit sent True
@when u'wesend"ctrl+d"' def step ctrl d context context cli sendcontrol u'd' context exit sent True
def inet ntop family address if family AF INET return dns ipv 4 inet ntoa address elif family AF INET 6 return dns ipv 6 inet ntoa address else raise Not Implemented Error
def load data schema path data path project id dataset id table id credentials Google Credentials get application default bigquery discovery build 'bigquery' 'v 2 ' credentials credentials source format 'CSV'if data path[ -5 ] lower ' json' source format 'NEWLINE DELIMITED JSON'insert request bigquery jobs insert project Id project id body {'configuration' {'load' {'schema' {'fields' json load open schema path 'r' } 'destination Table' {'project Id' project id 'dataset Id' dataset id 'table Id' table id} 'source Format' source format}}} media body Media File Upload data path mimetype 'application/octet-stream' job insert request execute print ' Waitingforjobtofinish 'status request bigquery jobs get project Id job['job Reference']['project Id'] job Id job['job Reference']['job Id'] while True result status request execute num retries 2 if result['status']['state'] 'DONE' if result['status'] get 'errors' raise Runtime Error '\n' join e['message'] for e in result['status']['errors'] print ' Jobcomplete 'returntime sleep 1
def post api key url data url make url api key url req Request url headers {' Content- Type' 'application/json'} data json dumps data return json loads urlopen req read
def lv absent name vgname None ret {'changes' {} 'comment' '' 'name' name 'result' True}lvpath '/dev/{ 0 }/{ 1 }' format vgname name if not salt ['lvm lvdisplay'] lvpath ret['comment'] ' Logical Volume{ 0 }alreadyabsent' format name elif opts ['test'] ret['comment'] ' Logical Volume{ 0 }issettoberemoved' format name ret['result'] Nonereturn retelse changes salt ['lvm lvremove'] name vgname if not salt ['lvm lvdisplay'] lvpath ret['comment'] ' Removed Logical Volume{ 0 }' format name ret['changes']['removed'] changeselse ret['comment'] ' Failedtoremove Logical Volume{ 0 }' format name ret['result'] Falsereturn ret
def violations registry xml parent data violations XML Sub Element xml parent 'hudson plugins violations Violations Publisher' config XML Sub Element violations 'config' suppressions XML Sub Element config 'suppressions' {'class' 'tree-set'} XML Sub Element suppressions 'no-comparator' configs XML Sub Element config 'type Configs' XML Sub Element configs 'no-comparator' for name in ['checkstyle' 'codenarc' 'cpd' 'cpplint' 'csslint' 'findbugs' 'fxcop' 'gendarme' 'jcreport' 'jslint' 'pep 8 ' 'perlcritic' 'pmd' 'pylint' 'simian' 'stylecop'] violations add entry configs name data get name {} XML Sub Element config 'limit' text '100 'XML Sub Element config 'source Path Pattern' XML Sub Element config 'faux Project Path' XML Sub Element config 'encoding' text 'default'
def violations registry xml parent data violations XML Sub Element xml parent 'hudson plugins violations Violations Publisher' config XML Sub Element violations 'config' suppressions XML Sub Element config 'suppressions' {'class' 'tree-set'} XML Sub Element suppressions 'no-comparator' configs XML Sub Element config 'type Configs' XML Sub Element configs 'no-comparator' for name in ['checkstyle' 'codenarc' 'cpd' 'cpplint' 'csslint' 'findbugs' 'fxcop' 'gendarme' 'jcreport' 'jslint' 'pep 8 ' 'perlcritic' 'pmd' 'pylint' 'simian' 'stylecop'] violations add entry configs name data get name {} XML Sub Element config 'limit' text '100 'XML Sub Element config 'source Path Pattern' XML Sub Element config 'faux Project Path' XML Sub Element config 'encoding' text 'default'
def requires alpn func @wraps func def wrapper *args **kwargs if not lib Cryptography HAS ALPN raise Not Implemented Error 'ALP Nnotavailable ' return func *args **kwargs return wrapper
def check job permission view func def decorate request *args **kwargs jobid kwargs['job']try job get job request job id jobid except Application Not Running as e LOG warn ' Job%shasnotyetbeenacceptedbythe RM willpollforstatus ' % jobid return job not assigned request jobid request path if not SHARE JOBS get and not request user is superuser and job user request user username and not can view job request user username job raise Popup Exception " Youdon'thavepermissiontoaccessjob% id s " % {'id' jobid} kwargs['job'] jobreturn view func request *args **kwargs return wraps view func decorate
def check job permission view func def decorate request *args **kwargs jobid kwargs['job']try job get job request job id jobid except Application Not Running as e LOG warn ' Job%shasnotyetbeenacceptedbythe RM willpollforstatus ' % jobid return job not assigned request jobid request path if not SHARE JOBS get and not request user is superuser and job user request user username and not can view job request user username job raise Popup Exception " Youdon'thavepermissiontoaccessjob% id s " % {'id' jobid} kwargs['job'] jobreturn view func request *args **kwargs return wraps view func decorate
def describe domain domain def clip attrs items s return clipped list [a name for a in items] 1000 total min 10 total ' total {{}}{} ' format s return Ordered Dict [ ' Features' clip attrs domain attributes 'features' ' Metaattributes' bool domain metas and clip attrs domain metas 'metaattributes' ' Target' bool domain class vars and clip attrs domain class vars 'targetsvariables' ]
def describe domain domain def clip attrs items s return clipped list [a name for a in items] 1000 total min 10 total ' total {{}}{} ' format s return Ordered Dict [ ' Features' clip attrs domain attributes 'features' ' Metaattributes' bool domain metas and clip attrs domain metas 'metaattributes' ' Target' bool domain class vars and clip attrs domain class vars 'targetsvariables' ]
def describe domain domain def clip attrs items s return clipped list [a name for a in items] 1000 total min 10 total ' total {{}}{} ' format s return Ordered Dict [ ' Features' clip attrs domain attributes 'features' ' Metaattributes' bool domain metas and clip attrs domain metas 'metaattributes' ' Target' bool domain class vars and clip attrs domain class vars 'targetsvariables' ]
def db create name user None password None host None port None if db exists name user password host port log info "DB'{ 0 }'alreadyexists" format name return Falseclient client user user password password host host port port client create database name return True
def cache available config if config has option 'cache' 'cache dir' dpath config get 'cache' 'cache dir' try existing os stat '/' join [dpath 'inventory'] except return Falseif config has option 'cache' 'cache max age' maxage config get 'cache' 'cache max age' if int time time - int existing st mtime < int maxage return Truereturn False
def patch ast node source sorted children False if hasattr node 'region' return nodewalker Patching AST Walker source children sorted children ast call for nodes node walker return node
def prlsrvctl sub cmd args None runas None cmd ['prlsrvctl' sub cmd]if args cmd extend normalize args args return salt ['cmd run'] cmd runas runas
def Invoke Command cmd Name input None *args **kws cmd Command cmd Name for arg in args cmd Parameters Add Command Parameter None fix arg arg for name value in kws items cmd Parameters Add Command Parameter name fix arg value pipeline runspace Create Pipeline pipeline Commands Add cmd if input ret pipeline Invoke fix arg input else ret pipeline Invoke return Shell Output ret
def tar stream store tree mtime format '' buf Bytes IO with closing tarfile open None 'w %s' % format buf as tar for entry abspath entry in walk tree store tree try blob store[entry sha]except Key Error continuedata Chunked Bytes IO blob chunked info tarfile Tar Info info name entry abspath decode 'ascii' info size blob raw length info mode entry modeinfo mtime mtimetar addfile info data yield buf getvalue buf truncate 0 buf seek 0 yield buf getvalue
def clean headers status import cherrypyresponse cherrypy serving responserespheaders response headersfor key in [' Accept- Ranges' ' Age' 'E Tag' ' Location' ' Retry- After' ' Vary' ' Content- Encoding' ' Content- Length' ' Expires' ' Content- Location' ' Content-MD 5 ' ' Last- Modified'] if key in respheaders del respheaders[key]if status 416 if ' Content- Range' in respheaders del respheaders[' Content- Range']
def mkdir dir path user None group None mode None dir path os path expanduser dir path directory os path normpath dir path if not os path isdir directory makedirs perms directory user group mode return True
def make tag target **attrs target id target idtarget type object class target type name default time int time mktime datetime datetime 2010 1 1 timetuple all attrs {'tagger' ' Test Author<test@nodomain com>' 'tag time' default time 'tag timezone' 0 'message' ' Testmessage ' 'object' target type target id 'name' ' Test Tag'}all attrs update attrs return make object Tag **all attrs
def NDP Attack Fake Router ra iface None mac src filter None ip src filter None def is request req mac src filter ip src filter '\n Checkifpacketreqisarequest\n'if not Ether in req and I Pv 6 in req and ICM Pv 6 ND RS in req return 0mac src req[ Ether] srcif mac src filter and mac src mac src filter return 0ip src req[I Pv 6 ] srcif ip src filter and ip src ip src filter return 0return 1def ra reply callback req iface '\n Callbackthatsendsan R Ainreplytoan RS\n'src req[I Pv 6 ] srcsendp ra iface iface verbose 0 print ' Fake R Asentinresponseto R Sfrom%s' % src if not iface iface conf ifacesniff filter 'icmp 6 'sniff store 0 filter sniff filter lfilter lambda x is request x mac src filter ip src filter prn lambda x ra reply callback x iface iface iface
def NDP Attack Fake Router ra iface None mac src filter None ip src filter None def is request req mac src filter ip src filter '\n Checkifpacketreqisarequest\n'if not Ether in req and I Pv 6 in req and ICM Pv 6 ND RS in req return 0mac src req[ Ether] srcif mac src filter and mac src mac src filter return 0ip src req[I Pv 6 ] srcif ip src filter and ip src ip src filter return 0return 1def ra reply callback req iface '\n Callbackthatsendsan R Ainreplytoan RS\n'src req[I Pv 6 ] srcsendp ra iface iface verbose 0 print ' Fake R Asentinresponseto R Sfrom%s' % src if not iface iface conf ifacesniff filter 'icmp 6 'sniff store 0 filter sniff filter lfilter lambda x is request x mac src filter ip src filter prn lambda x ra reply callback x iface iface iface
def As Iter arg if isinstance arg basestring rslt [arg]elif isinstance arg collections Iterable rslt argelif not arg rslt []else rslt [arg]return tuple rslt
def gluster output cleanup result ret ''for line in result splitlines if line startswith 'gluster>' ret + line[ 9 ] strip else ret + line strip return ret
def gluster output cleanup result ret ''for line in result splitlines if line startswith 'gluster>' ret + line[ 9 ] strip else ret + line strip return ret
def gluster output cleanup result ret ''for line in result splitlines if line startswith 'gluster>' ret + line[ 9 ] strip else ret + line strip return ret
def get vol list ip user passwd cmd 'showvv'showvv list run ssh thread ip user passwd cmd vol list []line num 0for line in showvv list line num + 1if '-------------------------' in line breakif '-----' in line or 'rcpy ' in line or ' srdata' in line or '0 admin' in line continueif line num > 4 vol stats line split vol list append vol stats[ 1 ] return vol list
def mutagen call action path func *args **kwargs try return func *args **kwargs except mutagen Mutagen Error as exc log debug u'%sfailed %s' action six text type exc raise Unreadable File Error path six text type exc except Exception as exc log debug u'%s' traceback format exc log error u'uncaught Mutagenexceptionin%s %s' action exc raise Mutagen Error path exc
def set policy vhost name pattern definition priority None runas None if runas is None and not salt utils is windows runas salt utils get user if isinstance definition dict definition json dumps definition if not isinstance definition six string types raise Salt Invocation Error " The'definition'argumentmustbeadictionaryor JSO Nstring" cmd [ context ['rabbitmqctl'] 'set policy' '-p' vhost]if priority cmd extend ['--priority' priority] cmd extend [name pattern definition] res salt ['cmd run all'] cmd runas runas python shell False log debug ' Setpolicy {0 }' format res['stdout'] return format response res ' Set'
@ File System in directory current directory 'django' 'couves' def test django agains couves nohooks status out run scenario **{'--tags' 'nothingwillbefound'} expect ' Couvesbeforeall' to not be within out expect ' Couvesafterall' to not be within out
def quota class destroy context class name resource return IMPL quota class destroy context class name resource
def from dict entry name entry get 'name' code entry get 'code' message entry get 'message' return name Error Code code message
def compare multiset w baseline multiplicities letters 'abcdefghijklmnopqrstuvwxyz'bl partitions multiset partitions baseline multiplicities letters aocp partitions set for state in multiset partitions taocp multiplicities p1 tuple sorted [tuple p for p in list visitor state letters ] aocp partitions add p1 assert bl partitions aocp partitions
def modify group group params immediate False changed {}new params dict params for key in new params keys if key in group param group[key]new value new params[key]try old value param valueexcept Value Error old value param valueif old value new value if not param is modifiable raise Not Modifiable Error ' Parameter%sisnotmodifiable ' % key changed[key] {'old' old value 'new' new value}set parameter param new value immediate del new params[key]return changed new params
def register access role cls try role name cls ROLEREGISTERED ACCESS ROLES[role name] clsexcept Attribute Error log exception u" Unabletoregister Access Rolewithattribute'ROLE' " return cls
def register access role cls try role name cls ROLEREGISTERED ACCESS ROLES[role name] clsexcept Attribute Error log exception u" Unabletoregister Access Rolewithattribute'ROLE' " return cls
def create mock connection token 'snowman-frosty' if not token 'snowman-frosty' return Nonemock connection mock create autospec Connection mock connection token tokenmock connection get dataverses return value [create mock dataverse ' Example 1 ' create mock dataverse ' Example 2 ' create mock dataverse ' Example 3 ' ]def get dataverse alias return next dataverse for dataverse in mock connection get dataverses if alias is not None and dataverse title[ -1 ] alias[ -1 ] None mock connection get dataverse mock Magic Mock side effect get dataverse mock connection get dataverse return value create mock dataverse return mock connection
def digest password realm username password content '%s %s %s' % username realm password if six PY 3 content content encode 'utf 8 ' return md 5 content hexdigest
def simulate delete app path **kwargs return simulate request app 'DELETE' path **kwargs
def fix up media upload method desc root desc path url parameters media upload method desc get 'media Upload' {} accept media upload get 'accept' [] max size media size to long media upload get 'max Size' '' media path url Noneif media upload media path url media path url from info root desc path url parameters['media body'] MEDIA BODY PARAMETER DEFAULT VALUE copy parameters['media mime type'] MEDIA MIME TYPE PARAMETER DEFAULT VALUE copy if 'body' in parameters parameters['body']['required'] Falsereturn accept max size media path url
def user name password superuser False createdb False createrole False inherit True login True connection limit None encrypted password False if not user exists name create user name password superuser createdb createrole inherit login connection limit encrypted password
def contains Any str set return 1 in [ c in str for c in set]
def quantiles data nbins or partition bounds return apply along axis qcut 1 data q nbins or partition bounds labels False
def quantiles data nbins or partition bounds return apply along axis qcut 1 data q nbins or partition bounds labels False
def get blob file index key name creation handle if len creation handle < DATASTORE MAX PROPERTY SIZE return creation handlereturn hashlib sha 512 creation handle hexdigest
def avg pool 2 d input kernel size stride None padding 0 ceil mode False count include pad True return functions thnn Avg Pool 2 d kernel size stride padding ceil mode count include pad input
def get validation digit number sum 0dvs [4 3 6 7 8 9 2]number str number for i in range 0 len number sum int number[ -1 - i ] * dvs[i] + sum % 10 return 10 - sum % 10
def clause is present clause search for elem in surface selectables search if clause elem return Trueelse return False
def save load jid clear load minions None for returner in opts [CONFIG KEY] mminion returners['{ 0 } save load' format returner ] jid clear load
def get service hass config discovery info None consumer key config get CONF CONSUMER KEY consumer secret config get CONF CONSUMER SECRET phone number config get CONF PHONE NUMBER if authenticate consumer key consumer secret is False LOGGER exception ' Errorobtainingauthorizationfrom Telstra API' return Nonereturn Telstra Notification Service consumer key consumer secret phone number
@register inclusion tag 'test incl tag use l10 n html' takes context True def inclusion tag use l10 n context return {}
def get package directories ls tree out check output 'git' 'ls-tree' '-d' '--name-only' '--full-name' 'HEAD' PROJECT ROOT result []for package in ls tree out split '\n' if package not in IGNORED DIRECTORIES result append package return result
def get package directories ls tree out check output 'git' 'ls-tree' '-d' '--name-only' '--full-name' 'HEAD' PROJECT ROOT result []for package in ls tree out split '\n' if package not in IGNORED DIRECTORIES result append package return result
def test guess with names arg dat ascii read [' 1 2' '3 4'] names 'a' 'b' assert len dat 2 assert dat colnames ['a' 'b'] dat ascii read ['c d' '3 4'] names 'a' 'b' assert len dat 1 assert dat colnames ['a' 'b'] dat ascii read ['cd' 'ef'] names 'a' 'b' assert len dat 1 assert dat colnames ['a' 'b']
def test guess with names arg dat ascii read [' 1 2' '3 4'] names 'a' 'b' assert len dat 2 assert dat colnames ['a' 'b'] dat ascii read ['c d' '3 4'] names 'a' 'b' assert len dat 1 assert dat colnames ['a' 'b'] dat ascii read ['cd' 'ef'] names 'a' 'b' assert len dat 1 assert dat colnames ['a' 'b']
def test guess with names arg dat ascii read [' 1 2' '3 4'] names 'a' 'b' assert len dat 2 assert dat colnames ['a' 'b'] dat ascii read ['c d' '3 4'] names 'a' 'b' assert len dat 1 assert dat colnames ['a' 'b'] dat ascii read ['cd' 'ef'] names 'a' 'b' assert len dat 1 assert dat colnames ['a' 'b']
def create message senderobj message channels None receivers None locks None header None global Msgif not Msg from evennia comms models import Msg as Msgif not message returnnew message Msg db message message new message save for sender in make iter senderobj new message senders sendernew message header headerfor channel in make iter channels new message channels channelfor receiver in make iter receivers new message receivers receiverif locks new message locks add locks new message save return new message
@contextmanagerdef project with virtualenv with cd env proj path yield
def setup platform hass config add devices discovery info None username config get CONF USERNAME password config get CONF PASSWORD host config get CONF HOST import proliphixpdp proliphix PDP host username password add devices [ Proliphix Thermostat pdp ]
def import pyside from Py Side import Qt Gui Qt Core Qt Svgreturn Qt Core Qt Gui Qt Svg QT API PYSIDE
def in 6 ismnladdr str return in 6 isincluded str 'ff 01 ' 16
def remove dir path if sabnzbd WIN 32 retries 15 while retries > 0 try os rmdir path returnexcept Windows Error as err if err[ 0 ] 32 logging debug ' Retrydelete%s' path retries - 1else raise Windows Error err time sleep 3 raise Windows Error err else os rmdir path
def extract patches arr patch shape 8 extraction step 1 arr ndim arr ndimif isinstance patch shape numbers Number patch shape tuple [patch shape] * arr ndim if isinstance extraction step numbers Number extraction step tuple [extraction step] * arr ndim patch strides arr stridesslices [slice None None st for st in extraction step]indexing strides arr[slices] stridespatch indices shape np array arr shape - np array patch shape // np array extraction step + 1 shape tuple list patch indices shape + list patch shape strides tuple list indexing strides + list patch strides patches as strided arr shape shape strides strides return patches
def extract patches arr patch shape 8 extraction step 1 arr ndim arr ndimif isinstance patch shape numbers Number patch shape tuple [patch shape] * arr ndim if isinstance extraction step numbers Number extraction step tuple [extraction step] * arr ndim patch strides arr stridesslices [slice None None st for st in extraction step]indexing strides arr[slices] stridespatch indices shape np array arr shape - np array patch shape // np array extraction step + 1 shape tuple list patch indices shape + list patch shape strides tuple list indexing strides + list patch strides patches as strided arr shape shape strides strides return patches
def decode string try return string decode 'utf 8 ' 'replace' except return string
def reset ip None username None count 0attempts Access Attempt objects all if ip attempts attempts filter ip address ip if username attempts attempts filter username username if attempts count attempts count attempts delete return count
def mod repo in file alias repostr filepath with open filepath as fhandle output []for line in fhandle if alias not in line output append line else output append repostr + '\n' with open filepath 'w' as fhandle fhandle writelines output
@task base Base Instructor Task def delete problem state entry id xmodule instance args action name ugettext noop 'deleted' update fcn partial delete problem module state xmodule instance args visit fcn partial perform module state update update fcn None return run main task entry id visit fcn action name
@register canonicalize@gof local optimizer [ Elemwise] def local useless composite node if not isinstance node op Elemwise or not isinstance node op scalar op scalar Composite returncomp node op scalar opidx [i for i o extern in enumerate node outputs if o extern clients]if len idx < len node outputs new outputs [comp outputs[i] for i in idx]c scalar Composite inputs comp inputs outputs new outputs e Elemwise scalar op c return list True *node inputs return dict zip [node outputs[i] for i in idx] e
@register canonicalize@gof local optimizer [ Elemwise] def local useless composite node if not isinstance node op Elemwise or not isinstance node op scalar op scalar Composite returncomp node op scalar opidx [i for i o extern in enumerate node outputs if o extern clients]if len idx < len node outputs new outputs [comp outputs[i] for i in idx]c scalar Composite inputs comp inputs outputs new outputs e Elemwise scalar op c return list True *node inputs return dict zip [node outputs[i] for i in idx] e
def set sleep on power button enabled state salt utils mac utils validate enabled enabled cmd 'systemsetup-setallowpowerbuttontosleepcomputer{ 0 }' format state salt utils mac utils execute return success cmd return salt utils mac utils confirm updated state get sleep on power button
def set sleep on power button enabled state salt utils mac utils validate enabled enabled cmd 'systemsetup-setallowpowerbuttontosleepcomputer{ 0 }' format state salt utils mac utils execute return success cmd return salt utils mac utils confirm updated state get sleep on power button
def sigmoid x return theano tensor nnet sigmoid x
def robust scale X axis 0 with centering True with scaling True quantile range 25 0 75 0 copy True s Robust Scaler with centering with centering with scaling with scaling quantile range quantile range copy copy if axis 0 return s fit transform X else return s fit transform X T T
def robust scale X axis 0 with centering True with scaling True quantile range 25 0 75 0 copy True s Robust Scaler with centering with centering with scaling with scaling quantile range quantile range copy copy if axis 0 return s fit transform X else return s fit transform X T T
def fix win pythonw std stream if sys platform 'win 32 ' and os path basename sys executable 'pythonw exe' if sys stdout is None sys stdout open os devnull 'w' if sys stderr is None sys stderr open os devnull 'w'
def environmentfunction f f environmentfunction Truereturn f
def set cxxflags value return set var 'CXXFLAGS' value
def fstab jail ret []config show config jail if 'fstab' in config c fstab config['fstab']elif 'mount fstab' in config c fstab config['mount fstab']if 'fstab' in config or 'mount fstab' in config if os access c fstab os R OK with salt utils fopen c fstab 'r' as fp for line in fp line line strip if not line continueif line startswith '#' continuetry device mpoint fstype opts dump pas line split except Value Error continueret append {'device' device 'mountpoint' mpoint 'fstype' fstype 'options' opts 'dump' dump 'pass' pas } if not ret ret Falsereturn ret
def fstab jail ret []config show config jail if 'fstab' in config c fstab config['fstab']elif 'mount fstab' in config c fstab config['mount fstab']if 'fstab' in config or 'mount fstab' in config if os access c fstab os R OK with salt utils fopen c fstab 'r' as fp for line in fp line line strip if not line continueif line startswith '#' continuetry device mpoint fstype opts dump pas line split except Value Error continueret append {'device' device 'mountpoint' mpoint 'fstype' fstype 'options' opts 'dump' dump 'pass' pas } if not ret ret Falsereturn ret
def make iprofiledblockdeviceapi tests profiled blockdevice api factory dataset size class Tests I Profiled Block Device API Tests Mixin Test Case def set Up self super Tests self set Up self api profiled blockdevice api factory self self dataset size dataset sizereturn Tests
def make Stack element layers []for child in element child Nodes if child node Type child ELEMENT NODE if child tag Name 'stack' stack make Stack child layers append stack elif child tag Name 'layer' layer make Layer child layers append layer else raise Exception ' Unknownelement"%s"' % child tag Name print >>sys stderr ' Makingastackwith%dlayers' % len layers return Stack layers
def role remove role **kwargs try conn get connection **kwargs conn autocommit True cur conn cursor cur execute 'DROPROLE{ 0 }' format role conn autocommit True conn close return Trueexcept Exception as e return ' Couldnotcreatetherole {0 }' format e
def stop name call None if call 'action' raise Salt Cloud System Exit ' Theinstanceactionmustbecalledwith-aor--action ' log info ' Stoppingmachine %s' name vb stop vm name machine vb get machine name del machine['name']return treat machine dict machine
def test mapnode json tmpdir wd str tmpdir os chdir wd from nipype import Map Node Function Workflowdef func 1 in 1 return in 1 + 1 n1 Map Node Function input names [u'in 1 '] output names [u'out'] function func 1 iterfield [u'in 1 '] name u'n 1 ' n1 inputs in 1 [1 ]w 1 Workflow name u'test' w1 base dir wdw 1 config[u'execution'][u'crashdump dir'] wdw 1 add nodes [n 1 ] w1 run n1 inputs in 1 [2 ]w 1 run n1 inputs in 1 [1 ]eg w1 run node eg nodes [0 ]outjson glob os path join node output dir u' 0x* json' assert len outjson 1 with open os path join node output dir u'test json' u'wt' as fp fp write u'dummyfile' w1 config[u'execution'] update **{u'stop on first rerun' True} w1 run
def test mapnode json tmpdir wd str tmpdir os chdir wd from nipype import Map Node Function Workflowdef func 1 in 1 return in 1 + 1 n1 Map Node Function input names [u'in 1 '] output names [u'out'] function func 1 iterfield [u'in 1 '] name u'n 1 ' n1 inputs in 1 [1 ]w 1 Workflow name u'test' w1 base dir wdw 1 config[u'execution'][u'crashdump dir'] wdw 1 add nodes [n 1 ] w1 run n1 inputs in 1 [2 ]w 1 run n1 inputs in 1 [1 ]eg w1 run node eg nodes [0 ]outjson glob os path join node output dir u' 0x* json' assert len outjson 1 with open os path join node output dir u'test json' u'wt' as fp fp write u'dummyfile' w1 config[u'execution'] update **{u'stop on first rerun' True} w1 run
def test mapnode json tmpdir wd str tmpdir os chdir wd from nipype import Map Node Function Workflowdef func 1 in 1 return in 1 + 1 n1 Map Node Function input names [u'in 1 '] output names [u'out'] function func 1 iterfield [u'in 1 '] name u'n 1 ' n1 inputs in 1 [1 ]w 1 Workflow name u'test' w1 base dir wdw 1 config[u'execution'][u'crashdump dir'] wdw 1 add nodes [n 1 ] w1 run n1 inputs in 1 [2 ]w 1 run n1 inputs in 1 [1 ]eg w1 run node eg nodes [0 ]outjson glob os path join node output dir u' 0x* json' assert len outjson 1 with open os path join node output dir u'test json' u'wt' as fp fp write u'dummyfile' w1 config[u'execution'] update **{u'stop on first rerun' True} w1 run
def initialize container path to container opf name 'metadata opf' extra entries [] rootfiles ''for path mimetype in extra entries rootfiles + u'<rootfilefull-path "{ 0 }"media-type "{ 1 }"/>' format path mimetype CONTAINER u'<?xmlversion "1 0"?>\n<containerversion "1 0"xmlns "urn oasis names tc opendocument xmlns container">\n<rootfiles>\n<rootfilefull-path "{ 0 }"media-type "application/oebps-package+xml"/>\n{extra entries}\n</rootfiles>\n</container>\n' format opf name extra entries rootfiles encode 'utf- 8 ' zf Zip File path to container 'w' zf writestr 'mimetype' 'application/epub+zip' compression ZIP STORED zf writestr 'META-INF/' '' 493 zf writestr 'META-INF/container xml' CONTAINER for path data in extra entries zf writestr path data return zf
def setup platform hass config add devices discovery info None host config get CONF HOST port config get CONF PORT keypad config get 'keypad' '70 ' if host is None or port is None LOGGER error ' Invalidconfig Expected%sand%s' CONF HOST CONF PORT return Falsefrom russound import russoundruss russound Russound host port russ connect keypad sources []for source in config[CONF SOURCES] sources append source['name'] if russ is connected for zone id extra in config[CONF ZONES] items add devices [ Russound RNET Device hass russ sources zone id extra ] else LOGGER error ' Notconnectedto%s %s' host port
def resolve d tag get tag d try resolver resolvers[tag]except Key Error reraise as Type Error 'configdoesnotknowofanyobjecttype"' + tag + '"' return resolver d
def setegid gid gid parse gid gid if gid os getgid os setegid gid
def get snapshot number 0 config 'root' try snapshot snapper Get Snapshot config int number return snapshot to data snapshot except dbus D Bus Exception as exc raise Command Execution Error ' Errorencounteredwhileretrievingsnapshot {0 }' format dbus exception to reason exc locals
@pytest fixture autouse True def annotate environment request environment getattr request config ' environment' None if environment behave version behave version environment append 'behave' behave version
def test stratified table cube tab 1 [[[ 8 9] [6 7]] [[ 4 9] [5 5]] [[ 8 8] [9 11 ]]]tab 2 np asarray tab 1 Tct 1 ctab Stratified Table tab 1 ct 2 ctab Stratified Table tab 2 assert allclose ct 1 oddsratio pooled ct 2 oddsratio pooled assert allclose ct 1 logodds pooled ct 2 logodds pooled
def test stratified table cube tab 1 [[[ 8 9] [6 7]] [[ 4 9] [5 5]] [[ 8 8] [9 11 ]]]tab 2 np asarray tab 1 Tct 1 ctab Stratified Table tab 1 ct 2 ctab Stratified Table tab 2 assert allclose ct 1 oddsratio pooled ct 2 oddsratio pooled assert allclose ct 1 logodds pooled ct 2 logodds pooled
def update live symlinks config for renewal file in storage renewal conf files config storage Renewable Cert renewal file config update symlinks True
def irfft inp norm None is odd False if is odd not in True False raise Value Error ' Invalidvalue%sforid odd mustbe Trueor False' % is odd s inp shape[ 1 -1 ]if is odd s T set subtensor s[ -1 ] s[ -1 ] - 1 * 2 + 1 else s T set subtensor s[ -1 ] s[ -1 ] - 1 * 2 cond norm unitary norm scaling 1if cond norm is None scaling s prod astype inp dtype elif cond norm 'ortho' scaling T sqrt s prod astype inp dtype return irfft op inp s / scaling
def callback argspec callback if not callable callback raise Value Error ' Callbacksmustbecallables' if isfunction callback or ismethod callback return getargspec callback elif isinstance callback partial return getargspec callback func else return getargspec callback call
def callback argspec callback if not callable callback raise Value Error ' Callbacksmustbecallables' if isfunction callback or ismethod callback return getargspec callback elif isinstance callback partial return getargspec callback func else return getargspec callback call
def dist point to segment p s0 s1 p np asarray p float s0 np asarray s0 float s1 np asarray s1 float v s1 - s0 w p - s0 c1 np dot w v if c1 < 0 return dist p s0 c2 np dot v v if c2 < c1 return dist p s1 b c1 / c2 pb s0 + b * v return dist p pb
def reverse course url handler name course key kwargs None return reverse url handler name 'course key string' course key kwargs
def reverse course url handler name course key kwargs None return reverse url handler name 'course key string' course key kwargs
def Find Missing Android Plain Assets referenced images android assets for name inset in referenced images iteritems if inset is not None continueif name in SKIP PLAIN print 'WARNING %s skippingduetohard-codedexclusioninassets-tool py' % name continueandroid name Image Name Android name if android name not in android assets name 2x Image Name 2 X name shutil copyfile os path join IOS IMAGES DIR name 2x os path join ANDROID IMAGES DIR android name print '%s notinandroidassets copied%s->%s' % name name 2x android name elif options options v print '%s OK' % name
def Find Missing Android Plain Assets referenced images android assets for name inset in referenced images iteritems if inset is not None continueif name in SKIP PLAIN print 'WARNING %s skippingduetohard-codedexclusioninassets-tool py' % name continueandroid name Image Name Android name if android name not in android assets name 2x Image Name 2 X name shutil copyfile os path join IOS IMAGES DIR name 2x os path join ANDROID IMAGES DIR android name print '%s notinandroidassets copied%s->%s' % name name 2x android name elif options options v print '%s OK' % name
def get sample ids map data map header states name to col dict [ s map header index s for s in states] good ids []for row in map data include Truefor s vals in states items curr state row[name to col[s]]include include and curr state in vals or '*' in vals and not ' ' + curr state in vals if include good ids append row[ 0 ] return good ids
def get sample ids map data map header states name to col dict [ s map header index s for s in states] good ids []for row in map data include Truefor s vals in states items curr state row[name to col[s]]include include and curr state in vals or '*' in vals and not ' ' + curr state in vals if include good ids append row[ 0 ] return good ids
def get body barycentric posvel body time ephemeris None return get body barycentric posvel body time ephemeris
def prepare values clip True out None if clip return np clip values 0 0 1 0 out out elif out is None return np array values copy True else out[ ] np asarray values return out
def pool current Limit thread Factory Thread def start Thread target return thread Factory target target start def limited Worker Creator stats team statistics if stats busy Worker Count + stats idle Worker Count > current Limit return Nonereturn Thread Worker start Thread Queue team Team coordinator Lock Worker Lock Local Storage create Worker limited Worker Creator log Exception err return team
def pool current Limit thread Factory Thread def start Thread target return thread Factory target target start def limited Worker Creator stats team statistics if stats busy Worker Count + stats idle Worker Count > current Limit return Nonereturn Thread Worker start Thread Queue team Team coordinator Lock Worker Lock Local Storage create Worker limited Worker Creator log Exception err return team
def ask for port sys stderr write '\n--- Availableports \n' ports []for n port desc hwid in enumerate sorted comports 1 sys stderr write '---{ 2} { 20 }{}\n' format n port desc ports append port while True port raw input '--- Enterportindexorfullname ' try index int port - 1 if not 0 < index < len ports sys stderr write '--- Invalidindex \n' continueexcept Value Error passelse port ports[index]return port
def normalize data query bounds lower upper time tz lower - datetime timedelta days 1 if time is not None return normalize data query time lower time tz normalize data query time upper time tz return lower upper
def normalize data query bounds lower upper time tz lower - datetime timedelta days 1 if time is not None return normalize data query time lower time tz normalize data query time upper time tz return lower upper
def normalize data query bounds lower upper time tz lower - datetime timedelta days 1 if time is not None return normalize data query time lower time tz normalize data query time upper time tz return lower upper
def get rdm disk hardware devices uuid if hardware devices class name ' Array Of Virtual Device' hardware devices hardware devices Virtual Devicefor device in hardware devices if device class name ' Virtual Disk' and device backing class name ' Virtual Disk Raw Disk Mapping Ver 1 Backing Info' and device backing lun Uuid uuid return device
def patch config section desc monkeypatch stubs symbol section desc {'general' ' General/miscellaneousoptions ' 'ui' ' Generaloptionsrelatedtotheuserinterface ' 'searchengines' ' Definitionsofsearchengines '}monkeypatch setattr symbol section desc
def update static names names file files if os path exists names file names json load open names file else names {}base os path dirname names file for path in files name os path relpath path base mangled name generate static name name base names[name] mangled nameif not os path islink path mangled path os path join base mangled name shutil move path mangled path if os path exists path os unlink path os symlink mangled name path json enc json JSON Encoder indent 2 sort keys True open names file 'w' write json enc encode names return names
def get service hass config discovery info None import telegramtry chat id config get CONF CHAT ID api key config get CONF API KEY bot telegram Bot token api key username bot get Me ['username'] LOGGER info " Telegrambotis'%s'" username except urllib error HTTP Error LOGGER error ' Pleasecheckyouraccesstoken' return Nonereturn Telegram Notification Service api key chat id
def identity n dtype 'd' format None return eye n n dtype dtype format format
def identity n dtype 'd' format None return eye n n dtype dtype format format
def batch fetch art lib albums force maxwidth None for album in albums if album artpath and not force message 'hasalbumart'else local paths None if force else [album path] path art for album album local paths maxwidth if path album set art path False album store message ui colorize 'green' 'foundalbumart' else message ui colorize 'red' 'noartfound' log info u'{ 0 }-{ 1 } {2 }' format album albumartist album album message
def memory usage return Get System Stats memory
def memory usage return Get System Stats memory
def test failed dl update config stub basedir download stub data tmpdir tmpdir win registry caplog dl fail blocklist Q Url create blocklist tmpdir blocked hosts CLEAN HOSTS name 'download will fail' line format 'one per line' hosts to block generic blocklists tmpdir + [dl fail blocklist] config stub data {'content' {'host-block-lists' hosts to block 'host-blocking-enabled' True 'host-blocking-whitelist' None}}host blocker adblock Host Blocker host blocker adblock update while host blocker in progress current download host blocker in progress[ 0 ]if current download name dl fail blocklist path current download successful Falsewith caplog at level logging ERROR current download finished emit host blocker read hosts assert urls host blocker whitelisted []
def test float number assert hug types float number '1 1' 1 1 assert hug types float number '1 ' float 1 assert hug types float number 1 1 1 1 with pytest raises Value Error hug types float number 'bacon'
def mksls fmt src dst None if fmt 'kickstart' return salt utils kickstart mksls src dst elif fmt 'preseed' return salt utils preseed mksls src dst elif fmt 'autoyast' return salt utils yast mksls src dst
def create home dir structure for directory in HOME NINJA PATH EXTENSIONS PATH PLUGINS EDITOR SKINS LANGS NINJA THEME DOWNLOAD NINJA KNOWLEDGE PATH if not os path isdir directory os mkdir directory
def env absent name user 'root' name name strip ret {'name' name 'result' True 'changes' {} 'comment' ''}if opts ['test'] status check cron env user name ret['result'] Noneif status 'absent' ret['result'] Trueret['comment'] ' Cronenv{ 0 }isabsent' format name elif status 'present' or status 'update' ret['comment'] ' Cronenv{ 0 }issettoberemoved' format name return retdata salt ['cron rm env'] user name if data 'absent' ret['comment'] ' Cronenv{ 0 }alreadyabsent' format name return retif data 'removed' ret['comment'] " Cronenv{ 0 }removedfrom{ 1 }'scrontab" format name user ret['changes'] {user name}return retret['comment'] ' Cronenv{ 0 }foruser{ 1 }failedtocommitwitherror{ 2 }' format name user data ret['result'] Falsereturn ret
def env absent name user 'root' name name strip ret {'name' name 'result' True 'changes' {} 'comment' ''}if opts ['test'] status check cron env user name ret['result'] Noneif status 'absent' ret['result'] Trueret['comment'] ' Cronenv{ 0 }isabsent' format name elif status 'present' or status 'update' ret['comment'] ' Cronenv{ 0 }issettoberemoved' format name return retdata salt ['cron rm env'] user name if data 'absent' ret['comment'] ' Cronenv{ 0 }alreadyabsent' format name return retif data 'removed' ret['comment'] " Cronenv{ 0 }removedfrom{ 1 }'scrontab" format name user ret['changes'] {user name}return retret['comment'] ' Cronenv{ 0 }foruser{ 1 }failedtocommitwitherror{ 2 }' format name user data ret['result'] Falsereturn ret
def is Bin s for i in s i ord i if i < 9 return Trueelif i > 13 and i < 32 return Trueelif i > 126 return Truereturn False
def skip Unless Any DB Feature *features return deferred Skip lambda not any getattr connection features feature False for feature in features " Databasedoesn'tsupportanyofthefeature s %s" % ' ' join features
def get hash from file hash path dvd basename hash file open hash path 'r' for line in hash file readlines if dvd basename in line return line split [0 ]
@register simple tag takes context False def explicit no context arg return 'explicit no context- Expectedresult %s' % arg
def nsmallest arr n keep 'first' if keep 'last' arr arr[ -1 ]narr len arr n min n narr sdtype str arr dtype arr arr view dtype map get sdtype sdtype kth val algos kth smallest arr copy n - 1 return finalize nsmallest arr kth val n keep narr
def get default route version subnet if subnet get 'gateway' and subnet['gateway'] get 'address' gateway subnet['gateway']['address']else return []if version 4 return [{'network' '0 0 0 0' 'netmask' '0 0 0 0' 'gateway' gateway}]elif version 6 return [{'network' ' ' 'netmask' ' ' 'gateway' gateway}]
def parse keqv list l parsed {}for elt in l k v elt split ' ' 1 if v[ 0 ] '"' and v[ -1 ] '"' v v[ 1 -1 ]parsed[k] vreturn parsed
def parse keqv list l parsed {}for elt in l k v elt split ' ' 1 if v[ 0 ] '"' and v[ -1 ] '"' v v[ 1 -1 ]parsed[k] vreturn parsed
def parse keqv list l parsed {}for elt in l k v elt split ' ' 1 if v[ 0 ] '"' and v[ -1 ] '"' v v[ 1 -1 ]parsed[k] vreturn parsed
def basic extractor document train set word features get words from dataset train set tokens get document tokens document features dict u'contains {0 } ' format word word in tokens for word in word features return features
def basic extractor document train set word features get words from dataset train set tokens get document tokens document features dict u'contains {0 } ' format word word in tokens for word in word features return features
def copy current request context f top request ctx stack topif top is None raise Runtime Error ' Thisdecoratorcanonlybeusedatlocalscopeswhenarequestcontextisonthestack Forinstancewithinviewfunctions ' reqctx top copy def wrapper *args **kwargs with reqctx return f *args **kwargs return update wrapper wrapper f
def transform xy coords xy coords sc plot sorted keys xy coords keys all cids []all xcoords []all ycoords []sc plot set transform sc plot axes trans Data trans sc plot get transform for s label in sorted keys s data xy coords[s label]if s data[ 0 ] [] passelse icoords trans transform zip s data[ 0 ] s data[ 1 ] xcoords ycoords zip *icoords all cids extend s data[ 2 ] all xcoords extend xcoords all ycoords extend ycoords return all cids all xcoords all ycoords
def transform xy coords xy coords sc plot sorted keys xy coords keys all cids []all xcoords []all ycoords []sc plot set transform sc plot axes trans Data trans sc plot get transform for s label in sorted keys s data xy coords[s label]if s data[ 0 ] [] passelse icoords trans transform zip s data[ 0 ] s data[ 1 ] xcoords ycoords zip *icoords all cids extend s data[ 2 ] all xcoords extend xcoords all ycoords extend ycoords return all cids all xcoords all ycoords
def transform xy coords xy coords sc plot sorted keys xy coords keys all cids []all xcoords []all ycoords []sc plot set transform sc plot axes trans Data trans sc plot get transform for s label in sorted keys s data xy coords[s label]if s data[ 0 ] [] passelse icoords trans transform zip s data[ 0 ] s data[ 1 ] xcoords ycoords zip *icoords all cids extend s data[ 2 ] all xcoords extend xcoords all ycoords extend ycoords return all cids all xcoords all ycoords
def get music section host port token library name api endpoint append token 'library/sections' token url urljoin 'http //{ 0 } {1 }' format host port api endpoint r requests get url tree ET fromstring r content for child in tree findall ' Directory' if child get 'title' library name return child get 'key'
@hello get permission NO PERMISSION REQUIRED def get hello request settings request registry settingsproject name settings['project name']project version settings['project version']data dict project name project name project version project version http api version settings['http api version'] project docs settings['project docs'] url request route url hello name eos get eos request if eos data['eos'] eosdata['settings'] {}public settings request registry public settingsfor setting in list public settings data['settings'][setting] settings[setting]if Authenticated in request effective principals data['user'] request get user info data['capabilities'] request registry api capabilitiesreturn data
def declarative constructor self **kwargs cls type self for k in kwargs if not hasattr cls k raise Type Error '%risaninvalidkeywordargumentfor%s' % k cls name setattr self k kwargs[k]
def declarative constructor self **kwargs cls type self for k in kwargs if not hasattr cls k raise Type Error '%risaninvalidkeywordargumentfor%s' % k cls name setattr self k kwargs[k]
@open file 1 mode 'wb' def write multiline adjlist G path delimiter '' comments '#' encoding 'utf- 8 ' import sysimport timepargs comments + '' join sys argv header '{}\n' format pargs + comments + 'GMT{}\n' format time asctime time gmtime + comments + '{}\n' format G name path write header encode encoding for multiline in generate multiline adjlist G delimiter multiline + '\n'path write multiline encode encoding
@open file 1 mode 'wb' def write multiline adjlist G path delimiter '' comments '#' encoding 'utf- 8 ' import sysimport timepargs comments + '' join sys argv header '{}\n' format pargs + comments + 'GMT{}\n' format time asctime time gmtime + comments + '{}\n' format G name path write header encode encoding for multiline in generate multiline adjlist G delimiter multiline + '\n'path write multiline encode encoding
def get referent by identifier category value try identifier Identifier find one Q 'category' 'eq' category & Q 'value' 'eq' value except No Results Found raise HTTP Error http NOT FOUND if identifier referent url return redirect identifier referent url raise HTTP Error http NOT FOUND
def get dict name default None default default or {} if is site configuration enabled return get configuration dict name default else return microsite get dict name default
def quit editor caller del caller db multidesc editkeycaller msg ' Exitededitor '
def get request body text syntax True entities True sentiment True body {'document' {'type' 'PLAIN TEXT' 'content' text} 'features' {'extract syntax' syntax 'extract entities' entities 'extract document sentiment' sentiment} 'encoding type' 'UTF 32 '}return body
def get request body text syntax True entities True sentiment True body {'document' {'type' 'PLAIN TEXT' 'content' text} 'features' {'extract syntax' syntax 'extract entities' entities 'extract document sentiment' sentiment} 'encoding type' 'UTF 32 '}return body
def get tox env parser get parser args parser parse args if args tox env is not None tox env args tox envelif TOX ENV VAR in os environ tox env os environ[TOX ENV VAR]else tox env get tox env from version return tox env
def get tox env parser get parser args parser parse args if args tox env is not None tox env args tox envelif TOX ENV VAR in os environ tox env os environ[TOX ENV VAR]else tox env get tox env from version return tox env
def send email from email to email msg global smtptry smtp sendmail from email to email msg except smtplib SMTP Server Disconnected smtp smtp connect smtp sendmail from email to email msg
def long Test test Method def new Test Method *args **kwargs if Test Option Parser long is None raise Exception ' Test Option Parsermustbeusedinordertouse@long Testdecorator ' if Test Option Parser long return test Method *args **kwargs else msg ' Skippinglongtest %s' % test Method name return unittest skip msg test Method *args **kwargs return new Test Method
def get all eip addresses addresses None allocation ids None region None key None keyid None profile None conn get conn region region key key keyid keyid profile profile try return conn get all addresses addresses addresses allocation ids allocation ids except boto exception Boto Server Error as e log error e return []
def add prerequisite course key prereq content key milestone milestones api add milestone {'name' ' Gatingmilestonefor{usage key}' format usage key unicode prereq content key 'namespace' '{usage key}{qualifier}' format usage key prereq content key qualifier GATING NAMESPACE QUALIFIER 'description' ' Systemdefinedmilestone' } propagate False milestones api add course content milestone course key prereq content key 'fulfills' milestone
def get value for org org val name default None return BACKEND get value for org org val name default
def get value for org org val name default None return BACKEND get value for org org val name default
def vector mean vectors n len vectors return scalar multiply 1 / n vector sum vectors
def archiver typename archiver ARCHIVER BY TYPE get typename if not archiver raise Value Error u' Noarchiverregisteredfor{ r}' format typename return archiver
def security group rule get by security group grantee context security group id return IMPL security group rule get by security group grantee context security group id
def security group rule get by security group grantee context security group id return IMPL security group rule get by security group grantee context security group id
def raise if duplicate entry error integrity error engine name def get columns from uniq cons or name columns uniqbase 'uniq 'if not columns startswith uniqbase if engine name 'postgresql' return [columns[ columns index ' ' + 1 columns rindex ' ' ]]return [columns]return columns[len uniqbase ] split ' x ' if engine name not in ['mysql' 'sqlite' 'postgresql'] returnm DUP KEY RE DB[engine name] match integrity error message if not m returncolumns m group 1 if engine name 'sqlite' columns columns strip split ' ' else columns get columns from uniq cons or name columns raise exception DB Duplicate Entry columns integrity error
def stack sparse frame frame lengths [s sp index npoints for s in compat iteritems frame ]nobs sum lengths minor labels np repeat np arange len frame columns lengths inds to concat []vals to concat []for series in compat iteritems frame if not np isnan series fill value raise Type Error ' Thisroutineassumes Na Nfillvalue' int index series sp index to int index inds to concat append int index indices vals to concat append series sp values major labels np concatenate inds to concat stacked values np concatenate vals to concat index Multi Index levels [frame index frame columns] labels [major labels minor labels] verify integrity False lp Data Frame stacked values reshape nobs 1 index index columns ['foo'] return lp sort index level 0
def requires json api mimetype func @wraps func def new func *args **kw ' Executes``func *args **kw ``onlyaftercheckingforthe\ncorrect JSONAPI http header ` Content- Type`header \n\n'if request method not in 'PATCH' 'POST' return func *args **kw header request headers get ' Content- Type' content type extra parse options header header content is json content type startswith JSONAPI MIMETYPE is msie is msie 8 or 9 if not is msie and not content is json detail ' Requestmusthave" Content- Type {0 }"header' format JSONAPI MIMETYPE return error response 415 detail detail if extra detail ' Content- Typeheadermustnothaveanymediatypeparametersbutfound{ 0 }' format extra return error response 415 detail detail return func *args **kw return new func
@auth decoratordef token authenticated self if self get current user token is None raise web HTTP Error 403
def verify signed jwt with certs jwt certs audience None jwt helpers to bytes jwt if jwt count ' ' 2 raise App Identity Error ' Wrongnumberofsegmentsintoken {0 }' format jwt header payload signature jwt split ' ' message to sign header + ' ' + payload signature helpers urlsafe b64 decode signature payload bytes helpers urlsafe b64 decode payload try payload dict json loads helpers from bytes payload bytes except raise App Identity Error " Can'tparsetoken {0 }" format payload bytes verify signature message to sign signature certs values verify time range payload dict check audience payload dict audience return payload dict
def ip 6 interfaces if salt utils is proxy return {}ret {}ifaces get interfaces for face in ifaces iface ips []for inet in ifaces[face] get 'inet 6 ' [] if 'address' in inet iface ips append inet['address'] for secondary in ifaces[face] get 'secondary' [] if 'address' in secondary iface ips append secondary['address'] ret[face] iface ipsreturn {'ip 6 interfaces' ret}
@ Profiler profiledef test core query caching n cache {}ins Customer table insert for i in range n with engine begin as conn conn execution options compiled cache cache execute ins dict name 'customername%d' % i description 'customerdescription%d' % i
@pytest mark networkdef test no clean option blocks cleaning after wheel script data script pip 'install' 'wheel' build script venv path / 'build' result script pip 'wheel' '--no-clean' '--no-index' '--build' build '--find-links %s' % data find links 'simple' build build / 'simple' assert exists build 'build/simpleshouldstillexist%s' % str result
@decorators which 'dig' def dig host cmd 'dig{ 0 }' format salt utils network sanitize host host return salt ['cmd run'] cmd
def trim line if not '#' in line return linereturn line split '#' [0 ]
def vibrate pattern repeat None Python Activity jnius autoclass 'org renpy android Python Service' Context jnius autoclass 'android content Context' activity Python Activity m Servicevibrator activity get System Service Context VIBRATOR SERVICE if vibrator has Vibrator try if repeat vibrator vibrate list pattern repeat else vibrator vibrate list pattern -1 except Keyboard Interrupt vibrator cancel raiseelse raise Runtime Error ' Thedevicedoesnothaveavibrator'
def get dataless dataset model global yaml parseglobal controlif yaml parse is None from pylearn 2 config import yaml parseif control is None from pylearn 2 datasets import controlcontrol push load data False try rval yaml parse load model dataset yaml src finally control pop load data return rval
def test proxy test function names gl proxy test constant names gl constants
def generate alias tbl return u'' join [l for l in tbl if l isupper ] or [l for l prev in zip tbl u' ' + tbl if prev u' ' and l u' ' ]
def check and decode json result response code def error body raise Response Error result code body if result code response code d content result d add Callback error return dreturn json content result
def inplace logistic derivative Z delta delta * Zdelta * 1 - Z
def rcdefaults rc Params update rc Params Default
def rcdefaults rc Params update rc Params Default
def get info dicom files meta default extractor read file filename to list dicom files [0 ] stop before pixels True force True return meta[u' Repetition Time'] / 1000 0 meta[u' Csa Image Mosaic Ref Acq Times'] meta[u' Spacing Between Slices']
@genericdef inspect object obj raise Try Next
def sinc x N y np sin N * x / 2 / np sin x / 2 y[np isnan y ] Nreturn y
def set user tags name tags runas None if runas is None and not salt utils is windows runas salt utils get user if tags and isinstance tags list tuple tags '' join tags res salt ['cmd run all'] [ context ['rabbitmqctl'] 'set user tags' name tags] runas runas python shell False msg ' Tag s set'return format response res msg
def set user tags name tags runas None if runas is None and not salt utils is windows runas salt utils get user if tags and isinstance tags list tuple tags '' join tags res salt ['cmd run all'] [ context ['rabbitmqctl'] 'set user tags' name tags] runas runas python shell False msg ' Tag s set'return format response res msg
def create zfs pool test case if os getuid 0 raise Skip Test ' Functionaltestsmustrunasroot ' pool name 'testpool %s' % uuid uuid 4 pool path File Path test case mktemp mount path File Path test case mktemp with pool path open 'wb' as f f truncate 100 * 1024 * 1024 test case add Cleanup pool path remove try run process ['zpool' 'create' '-m' mount path path pool name pool path path] except OS Error as e if e errno errno ENOENT raise Skip Test ' Installzpooltorunthesetests http //doc-dev clusterhq com/using/installing/index html#optional-zfs-backend-configuration' raisetest case add Cleanup run process ['zpool' 'destroy' pool name] return pool name
def mut Shrink individual if len individual < 3 or individual height < 1 return individual iprims []for i node in enumerate individual[ 1 ] 1 if isinstance node Primitive and node ret in node args iprims append i node if len iprims 0 index prim random choice iprims arg idx random choice [i for i type in enumerate prim args if type prim ret ] rindex index + 1 for in range arg idx + 1 rslice individual search Subtree rindex subtree individual[rslice]rindex + len subtree slice individual search Subtree index individual[slice ] subtreereturn individual
def mut Shrink individual if len individual < 3 or individual height < 1 return individual iprims []for i node in enumerate individual[ 1 ] 1 if isinstance node Primitive and node ret in node args iprims append i node if len iprims 0 index prim random choice iprims arg idx random choice [i for i type in enumerate prim args if type prim ret ] rindex index + 1 for in range arg idx + 1 rslice individual search Subtree rindex subtree individual[rslice]rindex + len subtree slice individual search Subtree index individual[slice ] subtreereturn individual
@task rate limit '120 /m' def tidy revision content pk refresh True try revision Revision objects get pk pk except Revision Does Not Exist as exc log error ' Tidywasunabletogetrevisionid %d Retrying ' pk tidy revision content retry countdown 60 * 2 max retries 5 exc exc else if revision tidied content and not refresh return tidied content errors tidy content revision content if tidied content revision tidied content Revision objects filter pk pk update tidied content tidied content return errors
def leaves list Z Z np asarray Z order 'c' is valid linkage Z throw True name 'Z' n Z shape[ 0 ] + 1 ML np zeros n dtype 'i' [Z] copy arrays if base present [Z] hierarchy prelist Z ML int n return ML
def leaves list Z Z np asarray Z order 'c' is valid linkage Z throw True name 'Z' n Z shape[ 0 ] + 1 ML np zeros n dtype 'i' [Z] copy arrays if base present [Z] hierarchy prelist Z ML int n return ML
def wrap with before action responder if 'resource' in get argnames action shim actionelse def shim req resp resource kwargs action req resp kwargs @wraps responder def do before self req resp **kwargs shim req resp self kwargs responder self req resp **kwargs return do before
def hash file filename size None method 'md 5 ' chunksize 4096 fsize os path getsize filename if not size or size > fsize size fsizef open filename 'rb' try hash utils hash method except Value Error logging error ' Unknownhashtype%s returning None' % method while size > 0 if chunksize > size chunksize sizedata f read chunksize if len data 0 logging debug ' Nothinglefttoreadbutsize %d' % size breakhash update data size - len data f close return hash hexdigest
def exit sab value sys stderr flush sys stdout flush if getattr sys 'frozen' None 'macosx app' sabnzbd SABSTOP Truefrom Py Obj C Tools import App Helper App Helper stop Event Loop sys exit value
@lower getattr generic types Base Named Tuple def namedtuple getattr context builder typ value attr index typ fields index attr res builder extract value value index return impl ret borrowed context builder typ[index] res
def sanity check verify default drone set exists
def update qq api request data data {} defaults {'openid' session get 'qq openid' 'access token' session get 'qq token' [0 ] 'oauth consumer key' QQ APP ID}defaults update data return defaults
def job show context data dict check access u'job show' context data dict id get or bust data dict u'id' try return jobs dictize job jobs job from id id except Key Error raise Not Found
def source read app docname source if docname 'extensions/plugins-toolkit' returnsource ''for name thing in inspect getmembers toolkit custom docstring toolkit docstring overrides get name if inspect isfunction thing source + format function name thing docstring custom docstring elif inspect ismethod thing source + format function name thing docstring custom docstring elif inspect isclass thing source + format class name thing docstring custom docstring elif isinstance thing types Object Type source + format object name thing docstring custom docstring else assert False " Someoneadded{name} {thing}tothepluginstoolkitandthis Sphinxextensiondoesn'tknowhowtodocumentthatyet Ifyou'rethatsomeone youneedtoaddanewformat * functionforithereorthedocswon'tbuild " format name name thing thing source[ 0 ] + source
def accept singleton expected type position 1 @decoratordef wrapper function *args **kw if isinstance args[position] expected type args list args args[position] [args[position]]args tuple args return function *args **kw return wrapper
def accept singleton expected type position 1 @decoratordef wrapper function *args **kw if isinstance args[position] expected type args list args args[position] [args[position]]args tuple args return function *args **kw return wrapper
def accept singleton expected type position 1 @decoratordef wrapper function *args **kw if isinstance args[position] expected type args list args args[position] [args[position]]args tuple args return function *args **kw return wrapper
def filter by latest metadata changeset revision that has invalid tools trans repository repository metadata get latest repository metadata if it includes invalid tools trans repository if repository metadata is not None return repository metadata changeset revisionreturn None
def filter by latest metadata changeset revision that has invalid tools trans repository repository metadata get latest repository metadata if it includes invalid tools trans repository if repository metadata is not None return repository metadata changeset revisionreturn None
def Convert To MS Build Settings msvs settings stderr sys stderr msbuild settings {}for msvs tool name msvs tool settings in msvs settings iteritems if msvs tool name in msvs to msbuild converters msvs tool msvs to msbuild converters[msvs tool name]for msvs setting msvs value in msvs tool settings iteritems if msvs setting in msvs tool try msvs tool[msvs setting] msvs value msbuild settings except Value Error as e print >>stderr ' Warning whileconverting%s/%sto MS Build %s' % msvs tool name msvs setting e else Validate Exclusion Setting msvs setting msvs tool ' Warning unrecognizedsetting%s/%swhileconvertingto MS Build ' % msvs tool name msvs setting stderr else print >>stderr ' Warning unrecognizedtool%swhileconvertingto MS Build ' % msvs tool name return msbuild settings
def Convert To MS Build Settings msvs settings stderr sys stderr msbuild settings {}for msvs tool name msvs tool settings in msvs settings iteritems if msvs tool name in msvs to msbuild converters msvs tool msvs to msbuild converters[msvs tool name]for msvs setting msvs value in msvs tool settings iteritems if msvs setting in msvs tool try msvs tool[msvs setting] msvs value msbuild settings except Value Error as e print >>stderr ' Warning whileconverting%s/%sto MS Build %s' % msvs tool name msvs setting e else Validate Exclusion Setting msvs setting msvs tool ' Warning unrecognizedsetting%s/%swhileconvertingto MS Build ' % msvs tool name msvs setting stderr else print >>stderr ' Warning unrecognizedtool%swhileconvertingto MS Build ' % msvs tool name return msbuild settings
def validator code or name validator type if validator type 'error' from errors import codesfrom errors import EX Telif validator type 'warning' from warnings import codesfrom warnings import EX Telse passdef decorator func def wrapper *args **kw extra func *args **kw if extra is None return []if isinstance code or name string types code EX Tname codes[code][ 0 ] + ' ' + code or name else code code or namename codes[code][ 0 ]text codes[code][ 1 ]return [ code name text extra ]wrapper validator type validator typereturn wrapperreturn decorator
def validator code or name validator type if validator type 'error' from errors import codesfrom errors import EX Telif validator type 'warning' from warnings import codesfrom warnings import EX Telse passdef decorator func def wrapper *args **kw extra func *args **kw if extra is None return []if isinstance code or name string types code EX Tname codes[code][ 0 ] + ' ' + code or name else code code or namename codes[code][ 0 ]text codes[code][ 1 ]return [ code name text extra ]wrapper validator type validator typereturn wrapperreturn decorator
def read env key value envkey key replace ' ' ' ' replace '-' ' ' upper return native value os getenv envkey value
def environ add path env key path old env get key if old env[key] path + ' ' + old else env[key] path
@login requireddef associate success request identity url openid response redirect field name REDIRECT FIELD NAME send email True **kwargs openid from openid response openid response openids request session get 'openids' [] openids append openid request session['openids'] openidsuassoc User Association openid url str openid user id request user id uassoc save send email send email redirect to request GET get redirect field name '' if not redirect to or '//' in redirect to or '' in redirect to redirect to settings LOGIN REDIRECT UR Lreturn Http Response Redirect redirect to
def is online global onlineif online is None import sockettry socket gethostbyname u'google com' online Trueexcept online Falsereturn online
def setup module module import osimport numpy as npimport random random seed os environ get 'SKLEARN SEED' None if random seed is None random seed np random uniform * 2 ** 31 - 1 random seed int random seed print 'I Seeding RN Gswith%r' % random seed np random seed random seed random seed random seed
def test start overflow t usertypes Timer with pytest raises Overflow Error t start 2 ** 64
@receiver [models signals post delete models signals post save] sender Extension Version dispatch uid 'extension version change' def update extension status and manifest fields sender instance **kw instance extension update status according to versions if instance status STATUS PUBLIC instance extension update manifest fields from latest public version
def check derivative fun jac x0 bounds - np inf np inf args kwargs {} J to test jac x0 *args **kwargs if issparse J to test J diff approx derivative fun x0 bounds bounds sparsity J to test args args kwargs kwargs J to test csr matrix J to test abs err J to test - J diff i j abs err data find abs err J diff data np asarray J diff[ i j ] ravel return np max np abs abs err data / np maximum 1 np abs J diff data else J diff approx derivative fun x0 bounds bounds args args kwargs kwargs abs err np abs J to test - J diff return np max abs err / np maximum 1 np abs J diff
def read dictionary page file obj schema helper page header column metadata raw bytes read page file obj page header column metadata io obj io Bytes IO raw bytes values encoding read plain io obj column metadata type page header dictionary page header num values schema element schema helper schema element column metadata path in schema[ -1 ] return convert column values schema element if schema element converted type is not None else values
def read dictionary page file obj schema helper page header column metadata raw bytes read page file obj page header column metadata io obj io Bytes IO raw bytes values encoding read plain io obj column metadata type page header dictionary page header num values schema element schema helper schema element column metadata path in schema[ -1 ] return convert column values schema element if schema element converted type is not None else values
def zipline root environ None if environ is None environ os environroot environ get 'ZIPLINE ROOT' None if root is None root expanduser '~/ zipline' return root
def pull cwd opts None user None identity None repository None cmd ['hg' 'pull']if identity cmd extend ssh flag identity if opts for opt in opts split cmd append opt if repository is not None cmd append repository ret salt ['cmd run all'] cmd cwd cwd runas user python shell False if ret['retcode'] 0 raise Command Execution Error ' Hgcommandfailed {0 }' format ret get 'stderr' ret['stdout'] return ret['stdout']
def make weighted tree fn ls **kwargs if not ls raise Value Error ' Calledmake weighted treewithemptylist' ls sort while len ls > 1 a ls pop 0 b ls pop 0 insort ls a[ 0 ] + b[ 0 ] fn a[ 1 ] b[ 1 ] return ls[ 0 ][ 1 ]
def make weighted tree fn ls **kwargs if not ls raise Value Error ' Calledmake weighted treewithemptylist' ls sort while len ls > 1 a ls pop 0 b ls pop 0 insort ls a[ 0 ] + b[ 0 ] fn a[ 1 ] b[ 1 ] return ls[ 0 ][ 1 ]
def make weighted tree fn ls **kwargs if not ls raise Value Error ' Calledmake weighted treewithemptylist' ls sort while len ls > 1 a ls pop 0 b ls pop 0 insort ls a[ 0 ] + b[ 0 ] fn a[ 1 ] b[ 1 ] return ls[ 0 ][ 1 ]
def activate requirement try for distro in pkg resources require requirement distro activate except pkg resources Distribution Not Found pkg resources Version Conflict raise errors Dependency Error '{ 0 }isunavailable' format requirement
def make entity from pb annotations return [ Entity Annotation from pb annotation for annotation in annotations]
def beacon config ret [] validate validate config if not validate[ 0 ] return ret refresh Falseif 'refresh' in config and config['refresh'] refresh Truefor pkg in config['pkgs'] installed salt ['pkg version'] pkg latest salt ['pkg latest version'] pkg refresh refresh if installed and latest pkg {'pkg' pkg 'version' latest}ret append pkg return ret
def beacon config ret [] validate validate config if not validate[ 0 ] return ret refresh Falseif 'refresh' in config and config['refresh'] refresh Truefor pkg in config['pkgs'] installed salt ['pkg version'] pkg latest salt ['pkg latest version'] pkg refresh refresh if installed and latest pkg {'pkg' pkg 'version' latest}ret append pkg return ret
def get dynamic property vim mobj type property name obj content get object properties vim None mobj type [property name] property value Noneif obj content dynamic property obj content[ 0 ] prop Setif dynamic property property value dynamic property[ 0 ] valreturn property value
def Create Sitemap From File configpath suppress notify num errors output num errorssitemap Sitemap suppress notify try output Log ' Readingconfigurationfile %s' % configpath 0 xml sax parse configpath sitemap except IO Error output Error ' Cannotreadconfigurationfile %s' % configpath except xml sax exceptions SAX Parse Exception as e output Error 'XM Lerrorintheconfigfile line%d column%d %s' % e linenum e colnum e get Message except xml sax exceptions SAX Reader Not Available output Error ' Someinstallsof Python 2 2didnotincludecompletesupportfor XML \n Pleasetryupgradingyourversionof Pythonandre-runningthescript ' if num errors output num errors return sitemapreturn None
def normalize lat lng arg if isinstance arg dict if 'lat' in arg and 'lng' in arg return arg['lat'] arg['lng'] if 'latitude' in arg and 'longitude' in arg return arg['latitude'] arg['longitude'] if is list arg return arg[ 0 ] arg[ 1 ] raise Type Error ' Expectedalat/lngdictortuple butgot%s' % type arg name
def qapplication translate True test time 3 if running in mac app Spyder Application Mac Applicationelse Spyder Application Q Applicationapp Spyder Application instance if app is None app Spyder Application [' Spyder'] app set Application Name ' Spyder' if translate install translator app test ci os environ get 'TEST CI WIDGETS' None if test ci is not None timer shutdown Q Timer app timer shutdown timeout connect app quit timer shutdown start test time * 1000 return app
def create event name details service key profile ret {'name' name 'changes' {} 'result' None 'comment' ''}if opts ['test'] ret['comment'] ' Needtocreateevent {0 }' format name return ret salt ['pagerduty create event'] description name details details service key service key profile profile ret['result'] Trueret['comment'] ' Createdevent {0 }' format name return ret
def grey erosion input size None footprint None structure None output None mode 'reflect' cval 0 0 origin 0 if size is None and footprint is None and structure is None raise Value Error 'size footprintorstructuremustbespecified' return filters min or max filter input size footprint structure output mode cval origin 1
def fallback trans x t x if t x l get lang set lang g lang graceful fail True t x if l and l[ 0 ] g lang set lang l[ 0 ] return t
def out file fn handle log Sys debug handle '----' + fn + '----' for line in fileinput input fn line line rstrip '\n' handle line handle '-' * 30
def out file fn handle log Sys debug handle '----' + fn + '----' for line in fileinput input fn line line rstrip '\n' handle line handle '-' * 30
def get np state ptr context builder return get state ptr context builder 'np'
def get conv gradweights shape 1axis image shape top shape border mode subsample dilation if None in [image shape top shape border mode subsample dilation] return Noneif subsample 1 or border mode 'half' return Noneif border mode 'full' kernel shape top shape - image shape elif border mode 'valid' kernel shape image shape - top shape else if border mode < 0 raise Value Error 'border modemustbe> 0' kernel shape image shape + 2 * border mode - top shape if dilation > 1 kernel shape kernel shape / dilation return kernel shape + 1
def get conv gradweights shape 1axis image shape top shape border mode subsample dilation if None in [image shape top shape border mode subsample dilation] return Noneif subsample 1 or border mode 'half' return Noneif border mode 'full' kernel shape top shape - image shape elif border mode 'valid' kernel shape image shape - top shape else if border mode < 0 raise Value Error 'border modemustbe> 0' kernel shape image shape + 2 * border mode - top shape if dilation > 1 kernel shape kernel shape / dilation return kernel shape + 1
def convert to jsonc x if isinstance x dict jsonc obj Jsonc for key value in x iteritems jsonc obj dict[key] convert to jsonc value return jsonc objelif isinstance x list members []for item in x members append convert to jsonc item return memberselse return x
def convert to jsonc x if isinstance x dict jsonc obj Jsonc for key value in x iteritems jsonc obj dict[key] convert to jsonc value return jsonc objelif isinstance x list members []for item in x members append convert to jsonc item return memberselse return x
def list mock games path files os listdir path return os path join path f for f in files if is sgf f
def get setup section app module label icon config get config app module for section in config if section get u'label' u' Setup' return {u'label' label u'icon' icon u'items' section[u'items']}
def will write fn def fn *a **kw if disallow db writes raise Cassandra Exception ' Notsofast D Bwriteshavebeendisabled' return fn *a **kw return fn
def will write fn def fn *a **kw if disallow db writes raise Cassandra Exception ' Notsofast D Bwriteshavebeendisabled' return fn *a **kw return fn
def aes cipher from key key return AES new key AES MODE CBC generate aes iv key
def clade to bitstr clade tree term names clade term names set term name for term in clade find clades terminal True return Bit String from bool name in clade term names for name in tree term names
def clade to bitstr clade tree term names clade term names set term name for term in clade find clades terminal True return Bit String from bool name in clade term names for name in tree term names
def auto delete files cls pre delete connect delete files for obj sender cls return cls
def make Frame buf opcode fin mask None buffer Length len buf if mask is not None length Mask 128 else length Mask 0if buffer Length > 65535 length '%s%s' % chr length Mask 127 pack '>Q' buffer Length elif buffer Length > 125 length '%s%s' % chr length Mask 126 pack '>H' buffer Length else length chr length Mask buffer Length if fin header 128 else header 1header chr header opcode value if mask is not None buf '%s%s' % mask mask buf mask frame '%s%s%s' % header length buf return frame
def generate bounding box bottom left top right west lat 1 bottom left get coords east lat 2 top right get coords min lat max lat min lat 1 lat 2 max lat 1 lat 2 return min lat west max lat east
def generate bounding box bottom left top right west lat 1 bottom left get coords east lat 2 top right get coords min lat max lat min lat 1 lat 2 max lat 1 lat 2 return min lat west max lat east
def add friend self user Name status 2 verify Content '' auto Update True url '%s/webwxverifyuser?r %s&pass ticket %s' % self login Info['url'] int time time self login Info['pass ticket'] data {' Base Request' self login Info[' Base Request'] ' Opcode' status ' Verify User List Size' 1 ' Verify User List' [{' Value' user Name ' Verify User Ticket' ''}] ' Verify Content' verify Content ' Scene List Count' 1 ' Scene List' 33 'skey' self login Info['skey']}headers {' Content Type' 'application/json charset UTF- 8 ' ' User- Agent' config USER AGENT}r self s post url headers headers data json dumps data ensure ascii False encode 'utf 8 ' 'replace' if auto Update self update friend user Name return Return Value raw Response r
def delete website Bucket region None key None keyid None profile None try conn get conn region region key key keyid keyid profile profile conn delete bucket website Bucket Bucket return {'deleted' True 'name' Bucket}except Client Error as e return {'deleted' False 'error' utils ['boto 3 get error'] e }
def chart runner chart scales axes marks for i scale in enumerate scales nt assert dict equal chart scales[i] grammar scale for i axis in enumerate axes nt assert dict equal chart axes[i] grammar axis for i mark in enumerate marks nt assert dict equal chart marks[i] grammar mark
def get related models recursive model seen set queue get related models model for rel mod in queue rel app label rel model name rel mod meta app label rel mod meta model name if rel app label rel model name in seen continueseen add rel app label rel model name queue extend get related models rel mod return seen - { model meta app label model meta model name }
def create ngram set input list ngram value 2 return set zip *[input list[i ] for i in range ngram value ]
def count replacement codon set G from math import floorif len codon set 1 return 0 0 elif len codon set 2 codons list codon set return floor G[codons[ 0 ]][codons[ 1 ]] else codons list codon set return prim G
def tree to stream entries write ord zero ord '0 ' bit mask 7for binsha mode name in entries mode str ''for i in xrange 6 mode str bchr mode >> i * 3 & bit mask + ord zero + mode str if byte ord mode str[ 0 ] ord zero mode str mode str[ 1 ]if isinstance name text type name name encode defenc write '' join mode str '' name '\x 00 ' binsha
def tree to stream entries write ord zero ord '0 ' bit mask 7for binsha mode name in entries mode str ''for i in xrange 6 mode str bchr mode >> i * 3 & bit mask + ord zero + mode str if byte ord mode str[ 0 ] ord zero mode str mode str[ 1 ]if isinstance name text type name name encode defenc write '' join mode str '' name '\x 00 ' binsha
@taskdef test addons ctx test module ctx module ADDON TESTS
def construct streamreader callback process handler implied arg 0partial args 0handler to inspect handlerif isinstance handler partial partial args len handler args handler to inspect handler funcif inspect ismethod handler to inspect implied arg 1num args get num args handler to inspect elif inspect isfunction handler to inspect num args get num args handler to inspect else implied arg 1num args get num args handler to inspect call net args num args - implied arg - partial args handler args if net args 1 handler args if net args 2 handler args process stdin elif net args 3 handler args process stdin weakref ref process def fn chunk args handler argsif len args 2 args handler args[ 0 ] handler args[ 1 ] return handler chunk *args return fn
def mut Node Replacement individual pset if len individual < 2 return individual index random randrange 1 len individual node individual[index]if node arity 0 term random choice pset terminals[node ret] if isclass term term term individual[index] termelse prims [p for p in pset primitives[node ret] if p args node args ]individual[index] random choice prims return individual
def mut Node Replacement individual pset if len individual < 2 return individual index random randrange 1 len individual node individual[index]if node arity 0 term random choice pset terminals[node ret] if isclass term term term individual[index] termelse prims [p for p in pset primitives[node ret] if p args node args ]individual[index] random choice prims return individual
def mark package install module base pkg spec try base install pkg spec except dnf exceptions Marking Error module fail json msg ' Nopackage{}available ' format pkg spec
@webapi decoratordef webapi check login required view func @webapi response errors NOT LOGGED IN def check *args **kwargs siteconfig Site Configuration objects get current request find httprequest args if siteconfig get u'auth require sitewide login' or request user is anonymous and u'HTTP AUTHORIZATION' in request META return webapi login required view func *args **kwargs else return view func *args **kwargs check checks login required Truereturn check
@webapi decoratordef webapi check login required view func @webapi response errors NOT LOGGED IN def check *args **kwargs siteconfig Site Configuration objects get current request find httprequest args if siteconfig get u'auth require sitewide login' or request user is anonymous and u'HTTP AUTHORIZATION' in request META return webapi login required view func *args **kwargs else return view func *args **kwargs check checks login required Truereturn check
def get static index page with shutdown template '\n< DOCTYPEHTMLPUBLIC"-//W 3 C//DTDHTML 4 01 Frameset//EN""http //www w3 org/TR/html 4 /frameset dtd">\n<HTML>\n< -- Natural Language Toolkit Wordnet Interface Graphical Wordnet Browser\n Copyright C 2001 - 2017 NLTK Project\n Author Jussi Salmela<jtsalmela@users sourceforge net>\n URL <http //nltk org/>\n Forlicenseinformation see LICENSE TXT-->\n<HEAD>\n<TITLE>NLTK Wordnet Browser</TITLE>\n</HEAD>\n\n<framesetrows "7 %% 93 %%">\n<framesrc "%s"name "header">\n<framesrc "start page"name "body">\n</frameset>\n</HTML>\n'if with shutdown upper link 'upper html'else upper link 'upper 2 html'return template % upper link
def should overwrite settings return settings get 'GZIP CACHE OVERWRITE' False
def should overwrite settings return settings get 'GZIP CACHE OVERWRITE' False
@dual decoratordef enforce ids param position 1 @decoratordef wrapper function *args **kw if not isinstance args[position] list tuple or not all [isinstance e basestring for e in args[position]] raise Value Error u' Invalidparamtypeinposition%s expectedids didyoupassdictionaries? ' % position return function *args **kw return wrapper
def list tags for resource name region None key None keyid None profile None **args conn get conn region region key key keyid keyid profile profile if ' Resource Name' in args log info "'name {0 }'parambeingoverriddenbyexplicitlyprovided' Resource Name {1 }'" format name args[' Resource Name'] name args[' Resource Name']else args[' Resource Name'] nameargs dict [ k v for k v in args items if not k startswith ' ' ] try r conn list tags for resource **args if r and ' Taglist' in r return r[' Tag List']return []except botocore exceptions Client Error as e log error ' Failedtolisttagsforresource{ 0 } {1 }' format name e return []
def runs once func @wraps func def decorated *args **kwargs if not hasattr decorated 'return value' decorated return value func *args **kwargs return decorated return valuedecorated wrap as new func decorated return serial decorated
def append param insert pk returning compiler stmt c values kw if c default is not None if c default is sequence if compiler dialect supports sequences and not c default optional or not compiler dialect sequences optional proc compiler process c default **kw values append c proc compiler returning append c elif c default is clause element values append c compiler process c default arg self group **kw compiler returning append c else values append c create insert prefetch bind param compiler c elif c is stmt table autoincrement column or c server default is not None compiler returning append c elif not c nullable warn pk with no anticipated value c
def make sync method name def sync wrapper self *args **kwds method getattr self name future method *args **kwds return future get result return sync wrapper
def make sync method name def sync wrapper self *args **kwds method getattr self name future method *args **kwds return future get result return sync wrapper
def content fid share key None url build url RESOURCE id fid route 'content' params make params share key share key return request 'get' url params params
def get package version pypi Conn pkg name pkg result [v for v in pypi Conn package releases pkg name True if not PRE RELEASE RE search v ]if pkg result pkg version pkg result[ 0 ]else pkg version ' Notavailable 'return pkg version
def get all orgs site configuration orgs Site Configuration get all orgs microsite orgs microsite get all orgs return site configuration orgs union microsite orgs
def get all orgs site configuration orgs Site Configuration get all orgs microsite orgs microsite get all orgs return site configuration orgs union microsite orgs
def get all orgs site configuration orgs Site Configuration get all orgs microsite orgs microsite get all orgs return site configuration orgs union microsite orgs
@verbosedef compare fiff fname 1 fname 2 fname out None show True indent '' read limit np inf max str 30 verbose None file 1 show fiff fname 1 output list indent indent read limit read limit max str max str file 2 show fiff fname 2 output list indent indent read limit read limit max str max str diff difflib Html Diff make file file 1 file 2 fname 1 fname 2 if fname out is not None f open fname out 'wb' else f tempfile Named Temporary File 'wb' delete False suffix ' html' fname out f namewith f as fid fid write diff encode 'utf- 8 ' if show is True webbrowser open new tab fname out return fname out
@verbosedef compare fiff fname 1 fname 2 fname out None show True indent '' read limit np inf max str 30 verbose None file 1 show fiff fname 1 output list indent indent read limit read limit max str max str file 2 show fiff fname 2 output list indent indent read limit read limit max str max str diff difflib Html Diff make file file 1 file 2 fname 1 fname 2 if fname out is not None f open fname out 'wb' else f tempfile Named Temporary File 'wb' delete False suffix ' html' fname out f namewith f as fid fid write diff encode 'utf- 8 ' if show is True webbrowser open new tab fname out return fname out
@verbosedef compare fiff fname 1 fname 2 fname out None show True indent '' read limit np inf max str 30 verbose None file 1 show fiff fname 1 output list indent indent read limit read limit max str max str file 2 show fiff fname 2 output list indent indent read limit read limit max str max str diff difflib Html Diff make file file 1 file 2 fname 1 fname 2 if fname out is not None f open fname out 'wb' else f tempfile Named Temporary File 'wb' delete False suffix ' html' fname out f namewith f as fid fid write diff encode 'utf- 8 ' if show is True webbrowser open new tab fname out return fname out
def int 64 output func argtypes func argtypes argtypesfunc restype c int 64 return func
def int 64 output func argtypes func argtypes argtypesfunc restype c int 64 return func
def test docs generated botocore session botocore session get session session boto 3 Session region name 'us-east- 1 ' for service name in session get available services generated docs Service Documenter service name session session document service generated docs generated docs decode 'utf- 8 ' client boto 3 client service name 'us-east- 1 ' yield assert has title generated docs client yield assert has client documentation generated docs service name client try paginator model botocore session get paginator model service name yield assert has paginator documentation generated docs service name client sorted paginator model paginator config except Data Not Found Error passif client waiter names waiter model botocore session get waiter model service name yield assert has waiter documentation generated docs service name client waiter model if service name in session get available resources resource boto 3 resource service name 'us-east- 1 ' yield assert has resource documentation generated docs service name resource
def send request payload None session None stub sessionhost port stub hosturl 'https //{ 0 }/sdk' format host port logging debug ' Sending{ 0 }to{ 1 }' format payload url res requests post url url data payload headers {' Cookie' stub cookie 'SOAP Action' 'urn vim 25 ' ' Content- Type' 'application/xml'} verify False if res status code 200 logging debug ' Failedtoresetalarm HTTP Status {0 }' format res status code return Falsereturn True
def send request payload None session None stub sessionhost port stub hosturl 'https //{ 0 }/sdk' format host port logging debug ' Sending{ 0 }to{ 1 }' format payload url res requests post url url data payload headers {' Cookie' stub cookie 'SOAP Action' 'urn vim 25 ' ' Content- Type' 'application/xml'} verify False if res status code 200 logging debug ' Failedtoresetalarm HTTP Status {0 }' format res status code return Falsereturn True
def send request payload None session None stub sessionhost port stub hosturl 'https //{ 0 }/sdk' format host port logging debug ' Sending{ 0 }to{ 1 }' format payload url res requests post url url data payload headers {' Cookie' stub cookie 'SOAP Action' 'urn vim 25 ' ' Content- Type' 'application/xml'} verify False if res status code 200 logging debug ' Failedtoresetalarm HTTP Status {0 }' format res status code return Falsereturn True
def iglob path glob if CHECK RECURSIVE GLOB search path glob msg 'invalidglob%r recursiveglob"**"mustbeusedalone'raise Value Error msg % path glob if CHECK MISMATCH SET search path glob msg "invalidglob%r mismatchingsetmarker'{'or'}'"raise Value Error msg % path glob return iglob path glob
def count seqs in filepaths fasta filepaths seq counter count seqs total 0counts []inaccessible filepaths []for fasta filepath in fasta filepaths if fasta filepath endswith ' fastq' or fasta filepath endswith ' fq' parser partial parse fastq enforce qual range False elif fasta filepath endswith ' tre' or fasta filepath endswith ' ph' or fasta filepath endswith ' ntree' def parser f t Dnd Parser f constructor Phylo Node return zip t iter Tips repeat '' else parser parse fastatry current count seq counter fasta filepath parser parser counts append current count fasta filepath total + current count[ 0 ]except IO Error inaccessible filepaths append fasta filepath return counts total inaccessible filepaths
def count seqs in filepaths fasta filepaths seq counter count seqs total 0counts []inaccessible filepaths []for fasta filepath in fasta filepaths if fasta filepath endswith ' fastq' or fasta filepath endswith ' fq' parser partial parse fastq enforce qual range False elif fasta filepath endswith ' tre' or fasta filepath endswith ' ph' or fasta filepath endswith ' ntree' def parser f t Dnd Parser f constructor Phylo Node return zip t iter Tips repeat '' else parser parse fastatry current count seq counter fasta filepath parser parser counts append current count fasta filepath total + current count[ 0 ]except IO Error inaccessible filepaths append fasta filepath return counts total inaccessible filepaths
def count seqs in filepaths fasta filepaths seq counter count seqs total 0counts []inaccessible filepaths []for fasta filepath in fasta filepaths if fasta filepath endswith ' fastq' or fasta filepath endswith ' fq' parser partial parse fastq enforce qual range False elif fasta filepath endswith ' tre' or fasta filepath endswith ' ph' or fasta filepath endswith ' ntree' def parser f t Dnd Parser f constructor Phylo Node return zip t iter Tips repeat '' else parser parse fastatry current count seq counter fasta filepath parser parser counts append current count fasta filepath total + current count[ 0 ]except IO Error inaccessible filepaths append fasta filepath return counts total inaccessible filepaths
@contextmanagerdef queries captured include savepoints False queries []def wrapper execute self action sql params start time time try return action sql params finally stop time time duration stop - start if include savepoints or 'SAVEPOINT' not in sql queries append {'sql' self mogrify sql params decode 'utf- 8 ' 'time' '% 3f' % duration } old execute Time Tracking Cursor executeold executemany Time Tracking Cursor executemanydef cursor execute self sql params return wrapper execute self super Time Tracking Cursor self execute sql params Time Tracking Cursor execute cursor executedef cursor executemany self sql params return wrapper execute self super Time Tracking Cursor self executemany sql params Time Tracking Cursor executemany cursor executemany yield queries Time Tracking Cursor execute old execute Time Tracking Cursor executemany old executemany
@contextmanagerdef queries captured include savepoints False queries []def wrapper execute self action sql params start time time try return action sql params finally stop time time duration stop - start if include savepoints or 'SAVEPOINT' not in sql queries append {'sql' self mogrify sql params decode 'utf- 8 ' 'time' '% 3f' % duration } old execute Time Tracking Cursor executeold executemany Time Tracking Cursor executemanydef cursor execute self sql params return wrapper execute self super Time Tracking Cursor self execute sql params Time Tracking Cursor execute cursor executedef cursor executemany self sql params return wrapper execute self super Time Tracking Cursor self executemany sql params Time Tracking Cursor executemany cursor executemany yield queries Time Tracking Cursor execute old execute Time Tracking Cursor executemany old executemany
def logstash registry xml parent data logstash XML Sub Element xml parent 'jenkins plugins logstash Logstash Notifier' logstash set 'plugin' 'logstash' mapping [ 'max-lines' 'max Lines' 1000 'fail-build' 'fail Build' False ]helpers convert mapping to xml logstash data mapping fail required True
def logstash registry xml parent data logstash XML Sub Element xml parent 'jenkins plugins logstash Logstash Notifier' logstash set 'plugin' 'logstash' mapping [ 'max-lines' 'max Lines' 1000 'fail-build' 'fail Build' False ]helpers convert mapping to xml logstash data mapping fail required True
def provider handlers providers return load provider feature 'default handlers' providers
def provider handlers providers return load provider feature 'default handlers' providers
def status stats False config False internals False superblock False alldevs False bdevs []for links in os walk '/sys/block/' for block in links if 'bcache' in block continuefor spath sdirs in os walk '/sys/block/{ 0 }' format block followlinks False if 'bcache' in sdirs bdevs append os path basename spath statii {}for bcache in bdevs statii[bcache] device bcache stats config internals superblock cuuid uuid cdev bdev if cdev count 0for dev in statii keys if dev cdev if statii[dev]['cache'] cuuid count + 1statii[cdev]['attached backing devices'] countif not alldevs statii statii[cdev]return statii
def pre run code hook self return None
def load formatter class scoped class name if ' ' not in scoped class name message 'REQUIRE "module class" butwas "%s"' % scoped class name raise Value Error message module name class name parse scoped name scoped class name formatter module load module module name formatter class getattr formatter module class name None if formatter class is None raise Import Error 'CLASSNOTFOUND %s' % scoped class name return formatter class
def unpack 4 v assert len v 4 return struct unpack '<I' v [0 ]
def test outputs taps check x tensor fvector 'x' y tensor fvector 'y' f lambda x y [x] outputs info {'initial' y 'taps' [0 ]}assert raises Value Error theano scan f x outputs info outputs info {'initial' y 'taps' [ -1 -1 ]}assert raises Value Error theano scan f x outputs info print 'done'
def encipher shift msg key symbols None msg A prep msg '' symbols shift len A - key % len A key A[shift ] + A[ shift] return translate msg key A
def encipher shift msg key symbols None msg A prep msg '' symbols shift len A - key % len A key A[shift ] + A[ shift] return translate msg key A
def whitespace around comma logical line line logical linefor m in WHITESPACE AFTER COMMA REGEX finditer line found m start + 1 if ' DCTB ' in m group yield found "E 242 tabafter'%s'" % m group [0 ] else yield found "E 241 multiplespacesafter'%s'" % m group [0 ]
def test dicts objs tokenize '{foobarbarbaz}' assert objs [ Hy Dict ['foo' 'bar' 'bar' 'baz'] ] objs tokenize ' bar{foobarbarbaz} ' assert objs [ Hy Expression [ Hy Symbol 'bar' Hy Dict ['foo' 'bar' 'bar' 'baz'] ] ] objs tokenize '{ foobar bazquux }' assert objs [ Hy Dict [ Hy Expression [ Hy Symbol 'foo' Hy Symbol 'bar' ] Hy Expression [ Hy Symbol 'baz' Hy Symbol 'quux' ] ] ]
def object name to class name object name if object name in TRACE NAMES return string to class name object name if object name in OBJECT NAME TO CLASS NAME return OBJECT NAME TO CLASS NAME[object name]if object name in ARRAYS return 'list'else return 'dict'
def object name to class name object name if object name in TRACE NAMES return string to class name object name if object name in OBJECT NAME TO CLASS NAME return OBJECT NAME TO CLASS NAME[object name]if object name in ARRAYS return 'list'else return 'dict'
def test stop ea def mock loop for i in range 3 assert ea running yield ea stop with mock patch object ea 'sleep for' return value None with mock patch object ea 'run all rules' as mock run mock run side effect mock loop start thread threading Thread target ea start start thread daemon Truestart thread start start thread join 5 assert not ea running assert not start thread is alive assert mock run call count 4
def test stop ea def mock loop for i in range 3 assert ea running yield ea stop with mock patch object ea 'sleep for' return value None with mock patch object ea 'run all rules' as mock run mock run side effect mock loop start thread threading Thread target ea start start thread daemon Truestart thread start start thread join 5 assert not ea running assert not start thread is alive assert mock run call count 4
def addslash method @functools wraps method def wrapper self *args **kwargs if not self request path endswith '/' if self request method in 'GET' 'HEAD' uri self request path + '/' if self request query uri + '?' + self request query self redirect uri permanent True returnraise HTTP Error 404 return method self *args **kwargs return wrapper
def get database string fname f open fname dtb f read f close return dtb
def make remote view data settings more excluded names None data get remote data data settings mode 'editable' more excluded names more excluded names remote {}for key value in list data items view value to display value minmax settings['minmax'] remote[key] {'type' get human readable type value 'size' get size value 'color' get color name value 'view' view}return remote
def find toplevel job dir start dir job dir start dirwhile not os path exists os path join job dir ' autoserv execute' if job dir '/' return Nonejob dir os path dirname job dir return job dir
def parse handle debug 0 if not hasattr handle 'read' if isinstance handle str handle String IO handle else exc txt ' An XML-containinghandleoran XM Lstring' + 'mustbeprovided' raise Exception exc txt for event elem in Element Tree iterparse handle events 'start' 'end' if event 'end' and elem tag 'pathway' yield KGML Parser elem parse elem clear
def ensure loaded start path for root folder files in os walk start path for phile in fnmatch filter files '* py' path os path join root phile try import path replace '/' ' ' [ -3 ] globals locals except Exception pass
def get ttl return opts get 'couchbase ttl' 24 * 60 * 60
def generate parts data six String IO for fpart in parts with open os path join OPENSHIFT ANSIBLE PATH fpart as pfd for idx line in enumerate pfd if idx in [0 1] and 'flake 8 noqa' in line or 'pylint skip-file' in line continuedata write line return data
@register tagdef querystring parser token bits token split contents tag bits pop 0 updates token kwargs bits parser if bits and bits pop 0 u'without' raise Template Syntax Error u" Malformedargumentsto'%s'" % tag removals [parser compile filter bit for bit in bits]return Querystring Node updates removals
def rearrange args l if len l 1 return lx list l[ -1 ] x extend l[ 0 -1 ] return Mul *x args
def rearrange args l if len l 1 return lx list l[ -1 ] x extend l[ 0 -1 ] return Mul *x args
@mock ec 2 def test get all spot instance requests filtering conn boto connect ec 2 request 1 conn request spot instances price 0 5 image id u'ami-abcd 1234 ' request 2 conn request spot instances price 0 5 image id u'ami-abcd 1234 ' conn request spot instances price 0 5 image id u'ami-abcd 1234 ' request 1 [ 0 ] add tag u'tag 1 ' u'value 1 ' request 1 [ 0 ] add tag u'tag 2 ' u'value 2 ' request 2 [ 0 ] add tag u'tag 1 ' u'value 1 ' request 2 [ 0 ] add tag u'tag 2 ' u'wrong' requests conn get all spot instance requests filters {u'state' u'active'} requests should have length of 0 requests conn get all spot instance requests filters {u'state' u'open'} requests should have length of 3 requests conn get all spot instance requests filters {u'tag tag 1 ' u'value 1 '} requests should have length of 2 requests conn get all spot instance requests filters {u'tag tag 1 ' u'value 1 ' u'tag tag 2 ' u'value 2 '} requests should have length of 1
def linkify docs return [ DOC SITE ROOT + x for x in docs]
def handler from provider provider name from inbox auth import module registryauth mod module registry get provider name if auth mod is None info providers get provider name None if info provider type info get 'type' None if provider type auth mod module registry get 'generic' if auth mod is None raise Not Supported Error ' Nylasdoesnotsupporttheemailprovider ' auth handler class getattr auth mod auth mod AUTH HANDLER CLS auth handler auth handler class provider name provider name return auth handler
def group types get by name or id context group type list return IMPL group types get by name or id context group type list
def get html section name datetime time strftime '%a%b%d%y %H %M %S' return "<h 1 >{}<spanclass 'timestamp'>{}</h 1 >" format name datetime
def gauss laguerre n n digits x Dummy 'x' p laguerre poly n x polys True p1 laguerre poly n + 1 x polys True xi []w []for r in p real roots if isinstance r Root Of r r eval rational S 1 / 10 ** n digits + 2 xi append r n n digits w append r / n + 1 ** 2 * p1 subs x r ** 2 n n digits return xi w
def about dialog view About View qtutils active window view show return view
def arrswapmid data assert len data % 2 0 ret [''] * len data ret[ 1 2] data[ 0 2]ret[ 0 2] data[ 1 2]return ret
def upgrade migrate engine meta Meta Data meta bind migrate engineimage cache Table 'image volume cache entries' meta autoload True cluster name Column 'cluster name' String 255 nullable True image cache create column cluster name
def upgrade migrate engine meta Meta Data meta bind migrate engineimage cache Table 'image volume cache entries' meta autoload True cluster name Column 'cluster name' String 255 nullable True image cache create column cluster name
@permission required 'users add userban' def ban user and cleanup request username user get object or 404 User username username user ban User Ban objects filter user user is active True date three days ago datetime now date - timedelta days 3 revisions user created revisions prefetch related 'document' revisions revisions defer 'content' 'summary' order by '-id' revisions revisions filter created gte date three days ago revisions not spam revisions filter akismet submissions None return render request 'users/ban user and cleanup html' {'detail user' user 'user banned' user ban 'revisions' revisions 'revisions not spam' revisions not spam 'on ban page' True}
@permission required 'users add userban' def ban user and cleanup request username user get object or 404 User username username user ban User Ban objects filter user user is active True date three days ago datetime now date - timedelta days 3 revisions user created revisions prefetch related 'document' revisions revisions defer 'content' 'summary' order by '-id' revisions revisions filter created gte date three days ago revisions not spam revisions filter akismet submissions None return render request 'users/ban user and cleanup html' {'detail user' user 'user banned' user ban 'revisions' revisions 'revisions not spam' revisions not spam 'on ban page' True}
def recompose xfm in bval in xfms import numpy as npimport os path as opbvals np loadtxt in bval out matrix np array [np eye 4 ] * len bvals xfms iter [np loadtxt xfm for xfm in in xfms] out files []for i b in enumerate bvals if b 0 0 mat np eye 4 else mat next xfms out name op abspath u'eccor %04 d mat' % i out files append out name np savetxt out name mat return out files
def run Module Test Suite module suite Test Suite [ Test Loader load Tests From Module module ] optionflags ELLIPSIS NORMALIZE WHITESPACE REPORT ONLY FIRST FAILURE IGNORE EXCEPTION DETAIL try suite add Test Doc Test Suite module optionflags optionflags except Value Error pass Text Test Runner run suite
def autogen docstring base msg u''addendum docstring Appender msg u'\n\n' return lambda func addendum docstring copy dedent base func
def autogen docstring base msg u''addendum docstring Appender msg u'\n\n' return lambda func addendum docstring copy dedent base func
def find common roots paths paths [x split os path sep for x in paths]root {}for chunks in sorted paths key len reverse True node rootfor chunk in chunks node node setdefault chunk {} node clear rv set def walk node path for prefix child in iteritems node walk child path + prefix if not node rv add '/' join path walk root return rv
def find common roots paths paths [x split os path sep for x in paths]root {}for chunks in sorted paths key len reverse True node rootfor chunk in chunks node node setdefault chunk {} node clear rv set def walk node path for prefix child in iteritems node walk child path + prefix if not node rv add '/' join path walk root return rv
def map dict keys dict key map mapped {}for key value in dict iteritems mapped key key map[key] if key in key map else key mapped[mapped key] valuereturn mapped
def check valid version npm version distutils version Loose Version salt modules cmdmod run 'npm--version' output loglevel 'quiet' valid version distutils version Loose Version '1 2' if npm version < valid version raise Command Execution Error "'npm'isnotrecentenough {0 }<{ 1 } Please Upgrade " format npm version valid version
def tmpdir global tmpdirif not tmpdir def cleanup shutil rmtree tmpdir import atexitatexit register cleanup tmpdir os path join tempfile gettempdir 'anki temp' if not os path exists tmpdir os mkdir tmpdir return tmpdir
def create Public Key key if not isinstance key RSA Key raise Assertion Error return create Public RSA Key key n key e
def signin redirect redirect None user None if redirect return redirectelif user is not None return userena settings USERENA SIGNIN REDIRECT URL % {'username' user username} else return settings LOGIN REDIRECT URL
def get Idle Activation **kwargs gsession G Settings user kwargs get 'user' schema 'org gnome desktop screensaver' key 'idle-activation-enabled' return gsession get
def generate names adjectives [' Exquisite' ' Delicious' ' Elegant' ' Swanky' ' Spicy' ' Food Truck' ' Artisanal' ' Tasty']nouns [' Sandwich' ' Pizza' ' Curry' ' Pierogi' ' Sushi' ' Salad' ' Stew' ' Pasta' ' Barbeque' ' Bacon' ' Pancake' ' Waffle' ' Chocolate' ' Gyro' ' Cookie' ' Burrito' ' Pie']return ['' join parts for parts in product adjectives nouns ]
def dark palette color n colors 6 reverse False as cmap False input 'rgb' color color to rgb color input gray '# 222222 'colors [color gray] if reverse else [gray color] return blend palette colors n colors as cmap
def reset vo warnings from import converters xmlutilfor module in converters exceptions tree xmlutil if hasattr module u' warningregistry ' del module warningregistry
@not implemented for 'undirected' 'multigraph' def reciprocity G nodes None if nodes is None return overall reciprocity G if nodes in G reciprocity next reciprocity iter G nodes [1 ]if reciprocity is None raise Network X Error ' Notdefinedforisolatednodes ' else return reciprocityreturn dict reciprocity iter G nodes
def libvlc media player set time p mi i time f Cfunctions get 'libvlc media player set time' None or Cfunction 'libvlc media player set time' 1 1 None None Media Player ctypes c longlong return f p mi i time
def import status handler host None core name None verbose False if not is master and get none or value host is None errors ['solr import statuscanonlybecalledby"master"minions']return get return dict False errors errors extra ['command status']if verbose extra append 'verbose true' url format url handler host host core name core name extra extra return http request url
def import status handler host None core name None verbose False if not is master and get none or value host is None errors ['solr import statuscanonlybecalledby"master"minions']return get return dict False errors errors extra ['command status']if verbose extra append 'verbose true' url format url handler host host core name core name extra extra return http request url
def compare psnr im true im test data range None dynamic range None assert compatible im true im test if dynamic range is not None warn '`dynamic range`hasbeendeprecatedinfavorof`data range` The`dynamic range`keywordargumentwillberemovedinv 0 14 ' skimage deprecation data range dynamic rangeif data range is None dmin dmax dtype range[im true dtype type] true min true max np min im true np max im true if true max > dmax or true min < dmin raise Value Error 'im truehasintensityvaluesoutsidetherangeexpectedforitsdatatype Pleasemanuallyspecifythedata range' if true min > 0 data range dmaxelse data range dmax - dmin im true im test as floats im true im test err compare mse im true im test return 10 * np log 10 data range ** 2 / err
def unregister alias type klass return ALIAS TYPES pop klass None
def set Title template title chapter Number if numberer get Number Sections and chapter Number title Node dom Text title Node owner Document template owner Documenttitle Node data '%s ' % chapter Number title insert 0 title Node for node List in domhelpers find Nodes Named template 'title' domhelpers find Elements With Attribute template 'class' 'title' if node List for title Node in title node List[ 0 ] append Child title Node clone Node True
def find blade root dir working dir blade root dir working dirif blade root dir endswith '/' blade root dir blade root dir[ -1 ]while blade root dir and blade root dir '/' if os path isfile os path join blade root dir 'BLADE ROOT' breakblade root dir os path dirname blade root dir if not blade root dir or blade root dir '/' console error exit " Can'tfindthefile'BLADE ROOT'inthisoranyupperdirectory \n Bladeneedthisfileasaplaceholdertolocatetherootsourcedirectory akathedirectorywhereyou#includestartfrom \n Youshouldcreateitmanuallyatthefirsttime " return blade root dir
def get info certificate id returncertificate False returntype None opts salt utils namecheap get opts 'namecheap ssl getinfo' opts['certificate ID'] certificate idif returncertificate opts['returncertificate'] 'true'if returntype is None salt utils namecheap log error 'returntypemustbespecifiedwhenreturncertificateissetto True' raise Exception 'returntypemustbespecifiedwhenreturncertificateissetto True' if returntype not in [' Individual' 'PKCS 7 '] salt utils namecheap log error 'returntypemustbespecifiedas Individualor PKCS 7 not' + returntype raise Exception 'returntypemustbespecifiedas Individualor PKCS 7 not' + returntype opts['returntype'] returntyperesponse xml salt utils namecheap get request opts if response xml is None return {}sslinforesult response xml get Elements By Tag Name 'SSL Get Info Result' [0 ]return salt utils namecheap xml to dict sslinforesult
def get info certificate id returncertificate False returntype None opts salt utils namecheap get opts 'namecheap ssl getinfo' opts['certificate ID'] certificate idif returncertificate opts['returncertificate'] 'true'if returntype is None salt utils namecheap log error 'returntypemustbespecifiedwhenreturncertificateissetto True' raise Exception 'returntypemustbespecifiedwhenreturncertificateissetto True' if returntype not in [' Individual' 'PKCS 7 '] salt utils namecheap log error 'returntypemustbespecifiedas Individualor PKCS 7 not' + returntype raise Exception 'returntypemustbespecifiedas Individualor PKCS 7 not' + returntype opts['returntype'] returntyperesponse xml salt utils namecheap get request opts if response xml is None return {}sslinforesult response xml get Elements By Tag Name 'SSL Get Info Result' [0 ]return salt utils namecheap xml to dict sslinforesult
def get info certificate id returncertificate False returntype None opts salt utils namecheap get opts 'namecheap ssl getinfo' opts['certificate ID'] certificate idif returncertificate opts['returncertificate'] 'true'if returntype is None salt utils namecheap log error 'returntypemustbespecifiedwhenreturncertificateissetto True' raise Exception 'returntypemustbespecifiedwhenreturncertificateissetto True' if returntype not in [' Individual' 'PKCS 7 '] salt utils namecheap log error 'returntypemustbespecifiedas Individualor PKCS 7 not' + returntype raise Exception 'returntypemustbespecifiedas Individualor PKCS 7 not' + returntype opts['returntype'] returntyperesponse xml salt utils namecheap get request opts if response xml is None return {}sslinforesult response xml get Elements By Tag Name 'SSL Get Info Result' [0 ]return salt utils namecheap xml to dict sslinforesult
def get info certificate id returncertificate False returntype None opts salt utils namecheap get opts 'namecheap ssl getinfo' opts['certificate ID'] certificate idif returncertificate opts['returncertificate'] 'true'if returntype is None salt utils namecheap log error 'returntypemustbespecifiedwhenreturncertificateissetto True' raise Exception 'returntypemustbespecifiedwhenreturncertificateissetto True' if returntype not in [' Individual' 'PKCS 7 '] salt utils namecheap log error 'returntypemustbespecifiedas Individualor PKCS 7 not' + returntype raise Exception 'returntypemustbespecifiedas Individualor PKCS 7 not' + returntype opts['returntype'] returntyperesponse xml salt utils namecheap get request opts if response xml is None return {}sslinforesult response xml get Elements By Tag Name 'SSL Get Info Result' [0 ]return salt utils namecheap xml to dict sslinforesult
def detect language text translate client translate Client result translate client detect language text print ' Text {}' format text print ' Confidence {}' format result['confidence'] print ' Language {}' format result['language']
def errfunc *args raise Value Error
def after table create event target bind tables None **kw if tables with flexget manager manager acquire lock event False tables [table name for table in tables]for plugin info in plugin schemas items if all table in tables for table in info[u'tables'] set version plugin info[u'version']
def after table create event target bind tables None **kw if tables with flexget manager manager acquire lock event False tables [table name for table in tables]for plugin info in plugin schemas items if all table in tables for table in info[u'tables'] set version plugin info[u'version']
def convert to camel data components data split ' ' return components[ 0 ] + '' join x title for x in components[ 1 ]
def convert to camel data components data split ' ' return components[ 0 ] + '' join x title for x in components[ 1 ]
def genslices ndim ndim shape iterables [genslices shape[n] for n in range ndim ]return product *iterables
def is Loop Intersecting Loop another Loop loop for point Index in xrange len loop point First loop[point Index]point Second loop[ point Index + 1 % len loop ]segment point First - point Second normalized Segment euclidean get Normalized segment segment Y Mirror complex normalized Segment real - normalized Segment imag segment First Point segment Y Mirror * point First segment Second Point segment Y Mirror * point Second if euclidean is Loop Intersecting Inside X Segment another Loop segment First Point real segment Second Point real segment Y Mirror segment First Point imag return Truereturn False
def is Loop Intersecting Loop another Loop loop for point Index in xrange len loop point First loop[point Index]point Second loop[ point Index + 1 % len loop ]segment point First - point Second normalized Segment euclidean get Normalized segment segment Y Mirror complex normalized Segment real - normalized Segment imag segment First Point segment Y Mirror * point First segment Second Point segment Y Mirror * point Second if euclidean is Loop Intersecting Inside X Segment another Loop segment First Point real segment Second Point real segment Y Mirror segment First Point imag return Truereturn False
def test cannot start with multiline lines strings get stripped lines INVALID MULTI LINE try step Step many from lines lines except Lettuce Syntax Error returnassert False ' Lettuce Syntax Errornotraised'
def get schema None key None user None **kwargs gsession G Settings user user schema schema key key return gsession get
def ip to cidr ip prefix None net netaddr IP Network ip if prefix is not None net netaddr IP Network str net ip + '/' + str prefix return str net
def uri to path uri return unquote to bytes urlsplit uri path
def compute subcorr G phi sig Ug Sg Vg linalg svd G full matrices False tmp np dot Ug T conjugate phi sig Uc Sc Vc linalg svd tmp full matrices False X np dot np dot Vg T np diag 1 0 / Sg Uc return Sc[ 0 ] X[ 0] / linalg norm X[ 0]
@cache permissiondef can automatic translation user project return check permission user project 'trans automatic translation'
def accept key pki dir pub id for key dir in 'minions' 'minions pre' 'minions rejected' key path os path join pki dir key dir if not os path exists key path os makedirs key path key os path join pki dir 'minions' id with salt utils fopen key 'w+' as fp fp write pub oldkey os path join pki dir 'minions pre' id if os path isfile oldkey with salt utils fopen oldkey as fp if fp read pub os remove oldkey
def write request load scenario reactor cluster request rate 10 sample size DEFAULT SAMPLE SIZE timeout 45 tolerance percentage 0 2 return Request Load Scenario reactor Write Request reactor cluster get control service reactor request rate request rate sample size sample size timeout timeout tolerance percentage tolerance percentage
def write request load scenario reactor cluster request rate 10 sample size DEFAULT SAMPLE SIZE timeout 45 tolerance percentage 0 2 return Request Load Scenario reactor Write Request reactor cluster get control service reactor request rate request rate sample size sample size timeout timeout tolerance percentage tolerance percentage
def write request load scenario reactor cluster request rate 10 sample size DEFAULT SAMPLE SIZE timeout 45 tolerance percentage 0 2 return Request Load Scenario reactor Write Request reactor cluster get control service reactor request rate request rate sample size sample size timeout timeout tolerance percentage tolerance percentage
def cfunc sig locals {} cache False **options sig sigutils normalize signature sig def wrapper func from ccallback import C Funcres C Func func sig locals locals options options if cache res enable caching res compile return resreturn wrapper
def wrap fn if fn is None or fn class is Stack Context Wrapper return fndef wrapped *args **kwargs callback contexts args args[ 0 ] args[ 1 ] args[ 2 ] if state contexts new contexts [ Null Context ]else new contexts []if contexts new contexts extend cls arg active cell for cls arg active cell in contexts if active cell[ 0 ] if len new contexts > 1 with nested *new contexts callback *args **kwargs elif new contexts with new contexts[ 0 ] callback *args **kwargs else callback *args **kwargs return Stack Context Wrapper wrapped fn state contexts
def wrap fn if fn is None or fn class is Stack Context Wrapper return fndef wrapped *args **kwargs callback contexts args args[ 0 ] args[ 1 ] args[ 2 ] if state contexts new contexts [ Null Context ]else new contexts []if contexts new contexts extend cls arg active cell for cls arg active cell in contexts if active cell[ 0 ] if len new contexts > 1 with nested *new contexts callback *args **kwargs elif new contexts with new contexts[ 0 ] callback *args **kwargs else callback *args **kwargs return Stack Context Wrapper wrapped fn state contexts
def test external js and css resource embedding class Custom Model 1 Model javascript 'external js 1' css 'external css 1'class Custom Model 2 Model javascript ['external js 2' 'external js 3'] css ['external css 2' 'external css 3']class Custom Model 3 Model javascript ['external js 1' 'external js 3'] css ['external css 1' 'external css 2']r resources Resources assert 'external js 1' in r js files assert 'external css 1' in r css files assert 'external js 2' in r js files assert 'external js 3' in r js files assert 'external css 2' in r css files assert 'external css 3' in r css files assert r css files count 'external css 1' 1 assert r css files count 'external css 2' 1 assert r js files count 'external js 3' 1 assert r js files count 'external js 1' 1
def test external js and css resource embedding class Custom Model 1 Model javascript 'external js 1' css 'external css 1'class Custom Model 2 Model javascript ['external js 2' 'external js 3'] css ['external css 2' 'external css 3']class Custom Model 3 Model javascript ['external js 1' 'external js 3'] css ['external css 1' 'external css 2']r resources Resources assert 'external js 1' in r js files assert 'external css 1' in r css files assert 'external js 2' in r js files assert 'external js 3' in r js files assert 'external css 2' in r css files assert 'external css 3' in r css files assert r css files count 'external css 1' 1 assert r css files count 'external css 2' 1 assert r js files count 'external js 3' 1 assert r js files count 'external js 1' 1
def test external js and css resource embedding class Custom Model 1 Model javascript 'external js 1' css 'external css 1'class Custom Model 2 Model javascript ['external js 2' 'external js 3'] css ['external css 2' 'external css 3']class Custom Model 3 Model javascript ['external js 1' 'external js 3'] css ['external css 1' 'external css 2']r resources Resources assert 'external js 1' in r js files assert 'external css 1' in r css files assert 'external js 2' in r js files assert 'external js 3' in r js files assert 'external css 2' in r css files assert 'external css 3' in r css files assert r css files count 'external css 1' 1 assert r css files count 'external css 2' 1 assert r js files count 'external js 3' 1 assert r js files count 'external js 1' 1
def test external js and css resource embedding class Custom Model 1 Model javascript 'external js 1' css 'external css 1'class Custom Model 2 Model javascript ['external js 2' 'external js 3'] css ['external css 2' 'external css 3']class Custom Model 3 Model javascript ['external js 1' 'external js 3'] css ['external css 1' 'external css 2']r resources Resources assert 'external js 1' in r js files assert 'external css 1' in r css files assert 'external js 2' in r js files assert 'external js 3' in r js files assert 'external css 2' in r css files assert 'external css 3' in r css files assert r css files count 'external css 1' 1 assert r css files count 'external css 2' 1 assert r js files count 'external js 3' 1 assert r js files count 'external js 1' 1
def score estimator X test y test scorer if y test is None score scorer estimator X test else score scorer estimator X test y test if hasattr score 'item' try score score item except Value Error passif not isinstance score numbers Number raise Value Error 'scoringmustreturnanumber got%s %s instead ' % str score type score return score
def add spelling ix fieldnames commit True from whoosh filedb filereading import Segment Readerwriter ix writer storage writer storageschema writer schemasegments writer segmentsfor segment in segments filename segment dawg filenamer Segment Reader storage schema segment f storage create file filename dawg Dawg Builder field root True for fieldname in fieldnames ft fieldname for word in r lexicon fieldname dawg insert ft + tuple word dawg write f for fieldname in fieldnames schema[fieldname] spelling Trueif commit writer commit merge False
def add spelling ix fieldnames commit True from whoosh filedb filereading import Segment Readerwriter ix writer storage writer storageschema writer schemasegments writer segmentsfor segment in segments filename segment dawg filenamer Segment Reader storage schema segment f storage create file filename dawg Dawg Builder field root True for fieldname in fieldnames ft fieldname for word in r lexicon fieldname dawg insert ft + tuple word dawg write f for fieldname in fieldnames schema[fieldname] spelling Trueif commit writer commit merge False
def Pmf Prob Equal pmf 1 pmf 2 total 0 0for v1 p1 in pmf 1 Items for v2 p2 in pmf 2 Items if v1 v2 total + p1 * p2 return total
def requires npn func @wraps func def wrapper *args **kwargs if not lib Cryptography HAS NEXTPROTONEG raise Not Implemented Error 'NP Nnotavailable ' return func *args **kwargs return wrapper
def get domain workgroup pythoncom Co Initialize conn wmi WMI for computer in conn Win 32 Computer System if computer Part Of Domain return {' Domain' computer Domain}else return {' Workgroup' computer Domain}
def test deprecated class with super @deprecated u' 100 0' class TB object def init self a b super TB self init with catch warnings Astropy Deprecation Warning as w TB 1 2 assert len w 1 if TB doc is not None assert u'function' not in TB doc assert u'deprecated' in TB doc assert u'function' not in TB init doc assert u'deprecated' in TB init doc
def test deprecated class with super @deprecated u' 100 0' class TB object def init self a b super TB self init with catch warnings Astropy Deprecation Warning as w TB 1 2 assert len w 1 if TB doc is not None assert u'function' not in TB doc assert u'deprecated' in TB doc assert u'function' not in TB init doc assert u'deprecated' in TB init doc
def test deprecated class with super @deprecated u' 100 0' class TB object def init self a b super TB self init with catch warnings Astropy Deprecation Warning as w TB 1 2 assert len w 1 if TB doc is not None assert u'function' not in TB doc assert u'deprecated' in TB doc assert u'function' not in TB init doc assert u'deprecated' in TB init doc
def test deprecated class with super @deprecated u' 100 0' class TB object def init self a b super TB self init with catch warnings Astropy Deprecation Warning as w TB 1 2 assert len w 1 if TB doc is not None assert u'function' not in TB doc assert u'deprecated' in TB doc assert u'function' not in TB init doc assert u'deprecated' in TB init doc
def test sample ae with open 'gsn ae example pkl' as f gsn pickle load f mb data MNIST which set 'test' X[ 105 106 ]history gsn get samples [ 0 mb data ] walkback 1000 symbolic False include first True history list itertools chain *history history np vstack history tiled image tile raster images history img shape [28 28 ] tile shape [50 50 ] tile spacing 2 2 image save 'gsn ae example png' tiled pw Parzen Windows MNIST which set 'test' X 0 2 print pw get ll history
def once func lock threading Lock def new func *args **kwargs if new func called returnwith lock if new func called returnrv func *args **kwargs new func called Truereturn rvnew func update wrapper new func func new func called Falsereturn new func
def once func lock threading Lock def new func *args **kwargs if new func called returnwith lock if new func called returnrv func *args **kwargs new func called Truereturn rvnew func update wrapper new func func new func called Falsereturn new func
def cache file path saltenv 'base' contextkey '{ 0 } -{ 1 } -{ 2 }' format 'cp cache file' path saltenv path is remote urlparse path scheme in 'http' 'https' 'ftp' try if path is remote and contextkey in context if os path isfile context [contextkey] return context [contextkey]else context pop contextkey except Attribute Error pass path senv salt utils url split env path if senv saltenv senvresult client cache file path saltenv if not result log error " Unabletocachefile'{ 0 }'fromsaltenv'{ 1 }' " format path saltenv if path is remote context [contextkey] resultreturn result
def cache file path saltenv 'base' contextkey '{ 0 } -{ 1 } -{ 2 }' format 'cp cache file' path saltenv path is remote urlparse path scheme in 'http' 'https' 'ftp' try if path is remote and contextkey in context if os path isfile context [contextkey] return context [contextkey]else context pop contextkey except Attribute Error pass path senv salt utils url split env path if senv saltenv senvresult client cache file path saltenv if not result log error " Unabletocachefile'{ 0 }'fromsaltenv'{ 1 }' " format path saltenv if path is remote context [contextkey] resultreturn result
def fake bdm object context bdm dict return objects Block Device Mapping from db object context objects Block Device Mapping Fake Db Block Device Dict bdm dict copy
def get project build account project url make url '/projects/{account project}' account project account project response requests get url headers make auth headers return response json
def hessian image scale range 1 10 scale step 2 beta 1 0 5 beta 2 15 filtered lambdas frangi hessian common filter image scale range scale step beta 1 beta 2 filtered[ lambdas < 0 ] 0out np max filtered axis 0 out[ out < 0 ] 1return out
def eps cast dtyp dt dtypif dt np longdouble dt np float 64 elif dt np clongdouble dt np complex 128 return np finfo dt eps
def permission check check def decorator cls cls check permission staticmethod check return clsreturn decorator
def permission check check def decorator cls cls check permission staticmethod check return clsreturn decorator
def Create Instance clsid req IID try addn Paths win 32 api Reg Query Value win 32 con HKEY CLASSES ROOT reg Addn Path % clsid split ' ' for new Path in addn Paths if new Path not in sys path sys path insert 0 new Path except win 32 api error passtry policy win 32 api Reg Query Value win 32 con HKEY CLASSES ROOT reg Policy % clsid policy resolve func policy except win 32 api error policy Default Policytry dispatcher win 32 api Reg Query Value win 32 con HKEY CLASSES ROOT reg Dispatcher % clsid if dispatcher dispatcher resolve func dispatcher except win 32 api error dispatcher Noneif dispatcher ret Obj dispatcher policy None else ret Obj policy None return ret Obj Create Instance clsid req IID
def Create Instance clsid req IID try addn Paths win 32 api Reg Query Value win 32 con HKEY CLASSES ROOT reg Addn Path % clsid split ' ' for new Path in addn Paths if new Path not in sys path sys path insert 0 new Path except win 32 api error passtry policy win 32 api Reg Query Value win 32 con HKEY CLASSES ROOT reg Policy % clsid policy resolve func policy except win 32 api error policy Default Policytry dispatcher win 32 api Reg Query Value win 32 con HKEY CLASSES ROOT reg Dispatcher % clsid if dispatcher dispatcher resolve func dispatcher except win 32 api error dispatcher Noneif dispatcher ret Obj dispatcher policy None else ret Obj policy None return ret Obj Create Instance clsid req IID
def Create Instance clsid req IID try addn Paths win 32 api Reg Query Value win 32 con HKEY CLASSES ROOT reg Addn Path % clsid split ' ' for new Path in addn Paths if new Path not in sys path sys path insert 0 new Path except win 32 api error passtry policy win 32 api Reg Query Value win 32 con HKEY CLASSES ROOT reg Policy % clsid policy resolve func policy except win 32 api error policy Default Policytry dispatcher win 32 api Reg Query Value win 32 con HKEY CLASSES ROOT reg Dispatcher % clsid if dispatcher dispatcher resolve func dispatcher except win 32 api error dispatcher Noneif dispatcher ret Obj dispatcher policy None else ret Obj policy None return ret Obj Create Instance clsid req IID
def romanize string lang 'en' romanizer romanizers get lang 'en' return romanizer romanize string
def p init declarator 2 t pass
def p init declarator 2 t pass
def comment request template u'generic/comments html' extra context None response initial validation request u'comment' if isinstance response Http Response return response obj post data responseform class import dotted path settings COMMENT FORM CLASS form form class request obj post data if form is valid url obj get absolute url if is spam request form url return redirect url comment form save request response redirect add cache bypass comment get absolute url for field in Threaded Comment Form cookie fields cookie name Threaded Comment Form cookie prefix + field cookie value post data get field u'' set cookie response cookie name cookie value return responseelif request is ajax and form errors return Http Response dumps {u'errors' form errors} context {u'obj' obj u'posted comment form' form}context update extra context or {} return Template Response request template context
def fetch url url try r requests get url verify False except requests Request Exception as exc log debug u'lyricsrequestfailed {0 }' format exc returnif r status code requests codes ok return r textelse log debug u'failedtofetch {0 } {1 } ' format url r status code
def memoize function memoized {}@wraps function def wrapper *args try ret memoized[args]except Key Error ret memoized[args] function *args return retreturn wrapper
def test Multiple Locator set params mult mticker Multiple Locator base 0 7 mult set params base 1 7 assert mult base 1 7
def get slave status **connection args mod sys getframe f code co namelog debug '{ 0 }<--' format mod conn connect **connection args if conn is None return []rtnv do query into hash conn 'SHOWSLAVESTATUS' conn close if len rtnv 0 rtnv append [] log debug '{ 0 }-->{ 1 }' format mod len rtnv[ 0 ] return rtnv[ 0 ]
def gaussian nll x mean ln var assert isinstance x variable Variable assert isinstance mean variable Variable assert isinstance ln var variable Variable D x sizex prec exponential exp - ln var x diff x - mean x power x diff * x diff * x prec * -0 5 return sum sum ln var + D * math log 2 * math pi / 2 - sum sum x power
@contextmanagerdef context grpc context try yield except Key Error as key error grpc context code status Code NOT FOUND grpc context details ' Unabletofindtheitemkeyedby{}' format key error
def oo ami selector data image name if not isinstance data list raise errors Ansible Filter Error ' failedexpectsfirstparamisalist' if not data return Noneelif image name is None or not image name endswith ' *' ami sorted data key itemgetter 'name' reverse True [0 ]return ami['ami id']else ami info [ ami ami['name'] split ' ' [ -1 ] for ami in data]ami sorted ami info key itemgetter 1 reverse True [0 ][ 0 ]return ami['ami id']
def oo ami selector data image name if not isinstance data list raise errors Ansible Filter Error ' failedexpectsfirstparamisalist' if not data return Noneelif image name is None or not image name endswith ' *' ami sorted data key itemgetter 'name' reverse True [0 ]return ami['ami id']else ami info [ ami ami['name'] split ' ' [ -1 ] for ami in data]ami sorted ami info key itemgetter 1 reverse True [0 ][ 0 ]return ami['ami id']
def oo ami selector data image name if not isinstance data list raise errors Ansible Filter Error ' failedexpectsfirstparamisalist' if not data return Noneelif image name is None or not image name endswith ' *' ami sorted data key itemgetter 'name' reverse True [0 ]return ami['ami id']else ami info [ ami ami['name'] split ' ' [ -1 ] for ami in data]ami sorted ami info key itemgetter 1 reverse True [0 ][ 0 ]return ami['ami id']
def oo ami selector data image name if not isinstance data list raise errors Ansible Filter Error ' failedexpectsfirstparamisalist' if not data return Noneelif image name is None or not image name endswith ' *' ami sorted data key itemgetter 'name' reverse True [0 ]return ami['ami id']else ami info [ ami ami['name'] split ' ' [ -1 ] for ami in data]ami sorted ami info key itemgetter 1 reverse True [0 ][ 0 ]return ami['ami id']
def oo ami selector data image name if not isinstance data list raise errors Ansible Filter Error ' failedexpectsfirstparamisalist' if not data return Noneelif image name is None or not image name endswith ' *' ami sorted data key itemgetter 'name' reverse True [0 ]return ami['ami id']else ami info [ ami ami['name'] split ' ' [ -1 ] for ami in data]ami sorted ami info key itemgetter 1 reverse True [0 ][ 0 ]return ami['ami id']
def nice size size include bytes False niced Falsenice string '%sbytes' % size try nsize Decimal size for x in ['bytes' 'KB' 'MB' 'GB'] if nsize compare Decimal '1024 0' Decimal '- 1 ' nice string '% 3 1f%s' % nsize x niced Truebreaknsize / Decimal '1024 0' if not niced nice string '% 3 1f%s' % nsize 'TB' niced Trueif include bytes and x 'bytes' nice string '%s %sbytes ' % nice string size except passreturn nice string
def nice size size include bytes False niced Falsenice string '%sbytes' % size try nsize Decimal size for x in ['bytes' 'KB' 'MB' 'GB'] if nsize compare Decimal '1024 0' Decimal '- 1 ' nice string '% 3 1f%s' % nsize x niced Truebreaknsize / Decimal '1024 0' if not niced nice string '% 3 1f%s' % nsize 'TB' niced Trueif include bytes and x 'bytes' nice string '%s %sbytes ' % nice string size except passreturn nice string
def error why msg err why msg
def error why msg err why msg
def compute node statistics context return IMPL compute node statistics context
def common texification text text re mathdefault sub repl mathdefault text parts re mathsep split text for i s in enumerate parts if not i % 2 s re escapetext sub repl escapetext s else s u'\\ \\displaystyle%s\\ ' % s parts[i] sreturn u'' join parts
def stack xs axis 0 xs [expand dims expand dims x axis axis for x in xs]return concat concat xs axis axis
def test max pool X sym tensor tensor 4 'X' pool it max pool X sym pool shape 2 2 pool stride 2 2 image shape 6 4 f theano function inputs [X sym] outputs pool it X np array [[ 2 1 3 4] [1 1 3 3] [5 5 7 7] [5 6 8 7] [9 10 11 12 ] [9 10 12 12 ]] dtype theano config float X [np newaxis np newaxis ]expected np array [[ 2 4] [6 8] [10 12 ]] dtype theano config float X [np newaxis np newaxis ]actual f X assert np allclose expected actual
def has open quotes s if s count '"' % 2 return '"'elif s count "'" % 2 return "'"else return False
def required estimates fields columns return metadata columns union viewvalues columns
def make avpr object json data if hasattr json data 'get' and callable json data get name json data get 'protocol' namespace json data get 'namespace' types json data get 'types' messages json data get 'messages' return Protocol name namespace types messages else raise Protocol Parse Exception ' Nota JSO Nobject %s' % json data
def install readline hook global readline hook readline refreadline hook hook Py OS RFP c int from address Console Get Proc Address sys dllhandle ' Py OS Readline Function Pointer' if sys version < '2 3' readline ref HOOKFUNC 22 hook wrapper else readline ref HOOKFUNC 23 hook wrapper 23 func start c int from address addressof readline ref value Py OS RFP value func start
def returner ret options get options ret sid options get 'sid' None token options get 'token' None sender options get 'from' None receiver options get 'to' None if sid is None or token is None log error ' Twiliosid/authenticationtokenmissing' return Noneif sender is None or receiver is None log error ' Twilioto/fromfieldsaremissing' return Noneclient Twilio Rest Client sid token try message client messages create body ' Minion {0 }\n Cmd {1 }\n Success {2 }\n\n Jid {3 }' format ret['id'] ret['fun'] ret['success'] ret['jid'] to receiver from sender except Twilio Rest Exception as e log error ' Twilio[https //www twilio com/docs/errors/{ 0 }]' format e code return Falsereturn True
def get all roles exclude system False if exclude system result Role query system False else result Role get all return result
def volume get all by group context group id filters None return IMPL volume get all by group context group id filters filters
def create schema for required keys keys schema {x [not missing] for x in keys}return schema
def create schema for required keys keys schema {x [not missing] for x in keys}return schema
def create schema for required keys keys schema {x [not missing] for x in keys}return schema
def create schema for required keys keys schema {x [not missing] for x in keys}return schema
def hough ellipse img threshold 4 accuracy 1 min size 4 max size None return hough ellipse img threshold accuracy min size max size
def setup platform hass config add devices discovery info None import transmissionrpcfrom transmissionrpc error import Transmission Errorname config get CONF NAME host config get CONF HOST username config get CONF USERNAME password config get CONF PASSWORD port config get CONF PORT transmission api transmissionrpc Client host port port user username password password try transmission api session stats except Transmission Error LOGGING error ' Connectionto Transmission AP Ifailed' return Falseadd devices [ Transmission Switch transmission api name ]
@pytest mark cmd@pytest mark parametrize 'command app' [ command app for command app in get commands iteritems if app startswith 'pootle ' or app in CORE APPS WITH COMMANDS ] def test initdb help capfd command app print ' Command %s App %s' % command app with pytest raises System Exit call command command '--help' out err capfd readouterr assert '--help' in out
@pytest fixturedef admin group db return Group objects create name ' Admins' rules '* *'
def get customizationspec ref si customization spec name customization spec name si content customization Spec Manager Get Customization Spec name customization spec name return customization spec name
def restarted service if is running service if using systemd systemd restart service else restart service elif using systemd systemd start service else start service
def get user hash request ip request META get 'REMOTE ADDR' '' ua request META get ' User- Agent' '' session key request session session key or '' return hashlib sha 1 '-' join map str ip ua session key hexdigest
def getattr obj name *default if len default > 1 raise Type Error 'getattrexpectedatmost 3 arguments got%d' % 2 + len default if orig isinstance obj Net Proxy try return obj getattr name except Attribute Error if not default raisereturn default[ 0 ]else return orig getattr obj name *default
def create media urls nav path list final urls []for path in path list parsed urlparse path if parsed netloc final urls append path continueurl path to url path relative url u'%s/%s' % nav url context make relative u'/' url final urls append relative url return final urls
@receiver Signal Handler item deleted def handle item deleted **kwargs usage key kwargs get 'usage key' if usage key usage key usage key for branch None course key usage key course keydeleted module modulestore get item usage key for module in yield dynamic descriptor descendants deleted module kwargs get 'user id' gating api remove prerequisite module location gating api set required content course key module location None None
@receiver Signal Handler item deleted def handle item deleted **kwargs usage key kwargs get 'usage key' if usage key usage key usage key for branch None course key usage key course keydeleted module modulestore get item usage key for module in yield dynamic descriptor descendants deleted module kwargs get 'user id' gating api remove prerequisite module location gating api set required content course key module location None None
@receiver Signal Handler item deleted def handle item deleted **kwargs usage key kwargs get 'usage key' if usage key usage key usage key for branch None course key usage key course keydeleted module modulestore get item usage key for module in yield dynamic descriptor descendants deleted module kwargs get 'user id' gating api remove prerequisite module location gating api set required content course key module location None None
def get vmdk adapter type adapter type if adapter type in [constants ADAPTER TYPE LSILOGICSAS constants ADAPTER TYPE PARAVIRTUAL] vmdk adapter type constants DEFAULT ADAPTER TYP Eelse vmdk adapter type adapter typereturn vmdk adapter type
def get vmdk adapter type adapter type if adapter type in [constants ADAPTER TYPE LSILOGICSAS constants ADAPTER TYPE PARAVIRTUAL] vmdk adapter type constants DEFAULT ADAPTER TYP Eelse vmdk adapter type adapter typereturn vmdk adapter type
@login requireddef password change request template name 'authopenid/password change form html' set password form Set Password Form change password form Password Change Form post change redirect None extra context None if post change redirect is None post change redirect settings LOGIN REDIRECT UR Lset password Falseif request user has usable password change form change password formelse set password Truechange form set password formif request POST form change form request user request POST if form is valid form save msg urllib quote ' Passwordchanged' redirect to '%s?%s' % post change redirect urllib urlencode {'msg' msg} return Http Response Redirect redirect to else form change form request user return render template name {'form' form 'set password' set password} context instance build context request extra context extra context
def do score for object parser token bits token contents split if len bits 4 raise template Template Syntax Error "'%s'tagtakesexactlythreearguments" % bits[ 0 ] if bits[ 2 ] 'as' raise template Template Syntax Error "secondargumentto'%s'tagmustbe'as'" % bits[ 0 ] return Score For Object Node bits[ 1 ] bits[ 3 ]
def do score for object parser token bits token contents split if len bits 4 raise template Template Syntax Error "'%s'tagtakesexactlythreearguments" % bits[ 0 ] if bits[ 2 ] 'as' raise template Template Syntax Error "secondargumentto'%s'tagmustbe'as'" % bits[ 0 ] return Score For Object Node bits[ 1 ] bits[ 3 ]
def do score for object parser token bits token contents split if len bits 4 raise template Template Syntax Error "'%s'tagtakesexactlythreearguments" % bits[ 0 ] if bits[ 2 ] 'as' raise template Template Syntax Error "secondargumentto'%s'tagmustbe'as'" % bits[ 0 ] return Score For Object Node bits[ 1 ] bits[ 3 ]
def do score for object parser token bits token contents split if len bits 4 raise template Template Syntax Error "'%s'tagtakesexactlythreearguments" % bits[ 0 ] if bits[ 2 ] 'as' raise template Template Syntax Error "secondargumentto'%s'tagmustbe'as'" % bits[ 0 ] return Score For Object Node bits[ 1 ] bits[ 3 ]
def shell cmd pin pout os pipe proc sp Popen '/bin/bash' stdin sp PIPE for line in cmd split '\n' line line strip if line startswith '#' print '\x 1 b[ 33 m>' + line + '\x 1 b[ 0 m' else print '\x 1 b[ 32 m>' + line + '\x 1 b[ 0 m' if line startswith 'cd' os chdir line[ 3 ] proc stdin write line + '\n' encode 'utf- 8 ' proc stdin write 'echo$? 1 >&%d\n' % pout encode 'utf- 8 ' ret ''while not ret endswith '\n' ret + os read pin 1 ret int ret strip if ret 0 print '\x 1 b[ 31 m Lastcommandreturned%d bailingout \x 1 b[ 0 m' % ret sys exit -1 proc stdin close proc wait
def shell cmd pin pout os pipe proc sp Popen '/bin/bash' stdin sp PIPE for line in cmd split '\n' line line strip if line startswith '#' print '\x 1 b[ 33 m>' + line + '\x 1 b[ 0 m' else print '\x 1 b[ 32 m>' + line + '\x 1 b[ 0 m' if line startswith 'cd' os chdir line[ 3 ] proc stdin write line + '\n' encode 'utf- 8 ' proc stdin write 'echo$? 1 >&%d\n' % pout encode 'utf- 8 ' ret ''while not ret endswith '\n' ret + os read pin 1 ret int ret strip if ret 0 print '\x 1 b[ 31 m Lastcommandreturned%d bailingout \x 1 b[ 0 m' % ret sys exit -1 proc stdin close proc wait
def shell cmd pin pout os pipe proc sp Popen '/bin/bash' stdin sp PIPE for line in cmd split '\n' line line strip if line startswith '#' print '\x 1 b[ 33 m>' + line + '\x 1 b[ 0 m' else print '\x 1 b[ 32 m>' + line + '\x 1 b[ 0 m' if line startswith 'cd' os chdir line[ 3 ] proc stdin write line + '\n' encode 'utf- 8 ' proc stdin write 'echo$? 1 >&%d\n' % pout encode 'utf- 8 ' ret ''while not ret endswith '\n' ret + os read pin 1 ret int ret strip if ret 0 print '\x 1 b[ 31 m Lastcommandreturned%d bailingout \x 1 b[ 0 m' % ret sys exit -1 proc stdin close proc wait
def unregister pkg name conn None if conn is None conn init conn execute 'DELETEFRO Mpackages WHER Epackage ?' name
def assert element text matches output path expression text xml find text output path if re match expression text is None errmsg " Expectedelementwithpath'%s'tocontaintextmatching'%s' insteadtext'%s'wasfound " % path expression text raise Assertion Error errmsg
def nopackages pkg list options None pkg list [pkg for pkg in pkg list if is installed pkg ]if pkg list uninstall pkg list options
def connect to cloud blockstorage region None return create client ep name 'volume' region region
def train regressor options embed map wordvecs worddict d defaultdict lambda 0 for w in embed map vocab keys d[w] 1shared Ordered Dict count 0for w in worddict keys [ options['n words'] - 2 ] if d[w] > 0 shared[w] countcount + 1w 2 v numpy zeros len shared 300 dtype 'float 32 ' sg numpy zeros len shared options['dim word'] dtype 'float 32 ' for w in shared keys w2 v[shared[w]] embed map[w]sg[shared[w]] wordvecs[w]clf Linear Regression clf fit w2 v sg return clf
def form margin spacing *widgets layout Qt Widgets Q Form Layout layout set Spacing spacing layout set Field Growth Policy Qt Widgets Q Form Layout Expanding Fields Grow set margin layout margin for idx name widget in enumerate widgets if isinstance name str ustr layout add Row name widget else layout set Widget idx Qt Widgets Q Form Layout Label Role name layout set Widget idx Qt Widgets Q Form Layout Field Role widget return layout
@disable for loaddatadef flush similar cache handler sender **kwargs entry kwargs['instance']if entry is visible Entry Published Vector Builder cache flush
@disable for loaddatadef flush similar cache handler sender **kwargs entry kwargs['instance']if entry is visible Entry Published Vector Builder cache flush
def to scipy sparse m **options dtype options get 'dtype' 'complex' if isinstance m Matrix Expr return sympy to scipy sparse m dtype dtype elif isinstance m numpy ndarray if not sparse raise Import Errorreturn sparse csr matrix m elif isinstance m scipy sparse matrix return mraise Type Error ' Expectedsympy/numpy/scipy sparsematrix got %r' % m
def constraint present name constraint id constraint type constraint options None cibname None return item present name name item 'constraint' item id constraint id item type constraint type create None extra args constraint options cibname cibname
def constraint present name constraint id constraint type constraint options None cibname None return item present name name item 'constraint' item id constraint id item type constraint type create None extra args constraint options cibname cibname
def get dict names dict 1 path dict 2 path dict 1 name os path basename dict 1 path dict 2 name os path basename dict 2 path if dict 1 name dict 2 name dict 1 name 'dict 1 'dict 2 name 'dict 2 'return dict 1 name dict 2 name
def local path as url filename return 'file //' + urllib pathname 2 url os path abspath filename
def rl op left right if len right > 0 rl gate right[ 0 ]rl gate is unitary is scalar matrix Dagger rl gate rl gate get min qubits rl gate True if len right > 0 and rl gate is unitary new right right[ 1 len right ]new left Dagger rl gate + left return new left new right return None
def test ast good assert can compile u' assert 1 ' can compile u' assert 1 " Assertlabel" ' can compile u' assert 1 +"spam""eggs" ' can compile u' assert 112345 ' can compile u' assert 1 None ' can compile u' assert 1 +2 "incomingeggsception" '
def epoch timestamp dt return dt - EPOCH total seconds
def load config filename None text None test False commit True debug False replace False fun 'load merge candidate'if replace fun 'load replace candidate' loaded proxy ['napalm call'] fun **{'filename' filename 'config' text} loaded config Noneif debug if filename loaded config open filename read else loaded config textreturn config logic loaded test test commit config commit loaded config loaded config
def setup join cache sender **kwargs sender meta join cache {}
def setup join cache sender **kwargs sender meta join cache {}
def get W word vecs k 300 vocab size len word vecs word idx map dict W np zeros shape vocab size + 1 k dtype 'float 32 ' W[ 0 ] np zeros k dtype 'float 32 ' i 1for word in word vecs W[i] word vecs[word]word idx map[word] ii + 1return W word idx map
@asyncio coroutinedef mock async subprocess async popen Magic Mock @asyncio coroutinedef communicate input None ' Communicatemock 'fixture bytes load fixture 'alpr stdout txt' 'utf- 8 ' return fixture None async popen communicate communicatereturn async popen
def adjust lines lines formatted lines []for l in lines l l replace '\r\n' '\n' replace '\r' '\n' strip if l lower startswith 'matrix' formatted lines append l else l l replace '\n' '' if l formatted lines append l return formatted lines
def cors handler *args **kwargs req head cherrypy request headersresp head cherrypy response headersac method req head get ' Access- Control- Request- Method' None allowed methods ['GET' 'POST']allowed headers ['X- Auth- Token' ' Content- Type']if ac method and ac method in allowed methods resp head[' Access- Control- Allow- Methods'] ' ' join allowed methods resp head[' Access- Control- Allow- Headers'] ' ' join allowed headers resp head[' Connection'] 'keep-alive'resp head[' Access- Control- Max- Age'] '1400 'return {}
def cors handler *args **kwargs req head cherrypy request headersresp head cherrypy response headersac method req head get ' Access- Control- Request- Method' None allowed methods ['GET' 'POST']allowed headers ['X- Auth- Token' ' Content- Type']if ac method and ac method in allowed methods resp head[' Access- Control- Allow- Methods'] ' ' join allowed methods resp head[' Access- Control- Allow- Headers'] ' ' join allowed headers resp head[' Connection'] 'keep-alive'resp head[' Access- Control- Max- Age'] '1400 'return {}
def require admin context f def wrapper *args **kwargs if not is admin context args[ 0 ] raise exception Admin Required return f *args **kwargs return wrapper
def get default config return deepcopy default dict
def get block device cmd 'lsblk-n-io KNAME-d-e 1 7 11 -l'devs salt ['cmd run'] cmd splitlines return devs
def resolve object request model query permission 'base view resourcebase' permission required True permission msg None obj get object or 404 model **query obj to check obj get self resource if settings RESOURCE PUBLISHING if not obj to check is published and not request user has perm 'publish resourcebase' obj to check raise Http 404 allowed Trueif permission split ' ' [ -1 ] in ['change layer data' 'change layer style'] if obj class name ' Layer' obj to check objif permission if permission required or request method 'GET' allowed request user has perm permission obj to check if not allowed mesg permission msg or ' Permission Denied' raise Permission Denied mesg return obj
def get config directory section if section is None return os getcwd if 'project dir' in section return path section get 'project dir' config os path abspath section get 'files' '' origin return config if os path isdir config else os path dirname config
def setup platform hass config add devices discovery info None value template config get CONF VALUE TEMPLATE if value template is not None value template hass hassadd devices [ Mqtt Cover hass config get CONF NAME config get CONF STATE TOPIC config get CONF COMMAND TOPIC config get CONF QOS config get CONF RETAIN config get CONF STATE OPEN config get CONF STATE CLOSED config get CONF PAYLOAD OPEN config get CONF PAYLOAD CLOSE config get CONF PAYLOAD STOP config get CONF OPTIMISTIC value template ]
def get fc wwnns hbas get fc hbas wwnns []if hbas for hba in hbas if hba['port state'] ' Online' wwnn hba['node name'] replace '0 x' '' wwnns append wwnn return wwnns
def parse set source info version info flags & ALL VERSIONS or DEFAULT VERSION saved ignore source ignore spacesource ignore space Falsenegate source match '^' try if version VERSION 0 item parse set imp union source info else item parse set union source info if not source match ']' raise error 'missing]' source string source pos finally source ignore space saved ignoreif negate item item with flags positive not item positive item item with flags case flags make case flags info return item
def show delvol on destroy name kwargs None call None if call 'action' raise Salt Cloud System Exit ' Theshow delvol on destroyactionmustbecalledwith-aor--action ' if not kwargs kwargs {}instance id kwargs get 'instance id' None device kwargs get 'device' None volume id kwargs get 'volume id' None if instance id is None instance id get node name ['instance Id']params {' Action' ' Describe Instances' ' Instance Id 1' instance id}data aws query params location get location provider get provider opts opts sigver '4 ' blockmap data[ 0 ]['instances Set']['item']['block Device Mapping']if not isinstance blockmap['item'] list blockmap['item'] [blockmap['item']]items []for idx item in enumerate blockmap['item'] device name item['device Name']if device is not None and device device name continueif volume id is not None and volume id item['ebs']['volume Id'] continueinfo {'device name' device name 'volume id' item['ebs']['volume Id'] 'delete On Termination' item['ebs']['delete On Termination']}items append info return items
def show delvol on destroy name kwargs None call None if call 'action' raise Salt Cloud System Exit ' Theshow delvol on destroyactionmustbecalledwith-aor--action ' if not kwargs kwargs {}instance id kwargs get 'instance id' None device kwargs get 'device' None volume id kwargs get 'volume id' None if instance id is None instance id get node name ['instance Id']params {' Action' ' Describe Instances' ' Instance Id 1' instance id}data aws query params location get location provider get provider opts opts sigver '4 ' blockmap data[ 0 ]['instances Set']['item']['block Device Mapping']if not isinstance blockmap['item'] list blockmap['item'] [blockmap['item']]items []for idx item in enumerate blockmap['item'] device name item['device Name']if device is not None and device device name continueif volume id is not None and volume id item['ebs']['volume Id'] continueinfo {'device name' device name 'volume id' item['ebs']['volume Id'] 'delete On Termination' item['ebs']['delete On Termination']}items append info return items
def show delvol on destroy name kwargs None call None if call 'action' raise Salt Cloud System Exit ' Theshow delvol on destroyactionmustbecalledwith-aor--action ' if not kwargs kwargs {}instance id kwargs get 'instance id' None device kwargs get 'device' None volume id kwargs get 'volume id' None if instance id is None instance id get node name ['instance Id']params {' Action' ' Describe Instances' ' Instance Id 1' instance id}data aws query params location get location provider get provider opts opts sigver '4 ' blockmap data[ 0 ]['instances Set']['item']['block Device Mapping']if not isinstance blockmap['item'] list blockmap['item'] [blockmap['item']]items []for idx item in enumerate blockmap['item'] device name item['device Name']if device is not None and device device name continueif volume id is not None and volume id item['ebs']['volume Id'] continueinfo {'device name' device name 'volume id' item['ebs']['volume Id'] 'delete On Termination' item['ebs']['delete On Termination']}items append info return items
def set shop key value Configuration Item objects update or create shop shop key key defaults {u'value' value} if shop cache set get cache key shop None else cache bump version SHOP CONF NAMESPACE
def init flowgram file filename None n 0 l 400 prefix '/tmp/' if filename is None fd filename mkstemp dir prefix suffix ' dat' close fd fh open filename 'w' fh write '%d%d\n' % n l return fh filename
def init flowgram file filename None n 0 l 400 prefix '/tmp/' if filename is None fd filename mkstemp dir prefix suffix ' dat' close fd fh open filename 'w' fh write '%d%d\n' % n l return fh filename
def psd v return Hint psd True symmetric True v
def get instance model instance or pk timeout None using None primary key getattr instance or pk 'pk' instance or pk key instance key model instance or pk data cache get key if data is not None try instance model pk primary key **data instance state adding Falseinstance state db using or DEFAULT DB ALIAS return instanceexcept cache delete key instance model default manager using using get pk primary key data {}for field in instance meta fields if field primary key continueif field get internal type ' File Field' file value getattr instance field attname data[field attname] file value nameelse data[field attname] getattr instance field attname if timeout is None timeout app settings CACHE TOOLBOX DEFAULT TIMEOU Tcache set key data timeout return instance
def validate node node try if node is not None node nodeprep node if not node raise Invalid JID u' Localpartmustnotbe 0 bytes' if len node > 1023 raise Invalid JID u' Localpartmustbelessthan 1024 bytes' return nodeexcept stringprep profiles String Prep Error raise Invalid JID u' Invalidlocalpart'
def add rule name localport protocol 'tcp' action 'allow' dir 'in' ret {'name' name 'result' True 'changes' {} 'comment' ''}commit Falsecurrent rules salt ['firewall get rule'] name if not current rules commit Trueret['changes'] {'newrule' name}if opts ['test'] ret['result'] not commit or None return retif commit ret['result'] salt ['firewall add rule'] name localport protocol action dir if not ret['result'] ret['comment'] ' Couldnotaddrule'else ret['comment'] ' Arulewiththatnamealreadyexists'return ret
def rot 32 w n Left n Left & 31 if n Left 0 return wRRR w >> 1 & 2147483647 >> 31 - n Left sLLLLLL - 1 << 31 - n Left & w 2147483647 >> n Left & w return RRR sLLLLLL << n Left
def rot 32 w n Left n Left & 31 if n Left 0 return wRRR w >> 1 & 2147483647 >> 31 - n Left sLLLLLL - 1 << 31 - n Left & w 2147483647 >> n Left & w return RRR sLLLLLL << n Left
def Get Client Config filename config lib Set Platform Arch Context config lib Parse Config Command Line context list config lib CONFIG context context append ' Client Context' deployer build Client Repacker config data deployer Get Client Config context validate True deploy timestamp False builder build Client Builder with open filename 'w' as fd fd write config data builder Write Build Yaml fd build timestamp False
def Backup Filters cpplint state Backup Filters
def is pid running on unix pid try os kill pid 0 except OS Error return Falseelse return True
def scale time units time seconds arr unit if unit u'minutes' return list map lambda x x * 1 0 / 60 time seconds arr elif unit u'hours' return list map lambda x x * 1 0 / 60 * 60 time seconds arr elif unit u'days' return list map lambda x x * 1 0 / 24 * 60 * 60 time seconds arr return time seconds arr
def md 5 shard word data word encode 'utf- 8 ' return 'server%d' % hashlib md 5 data digest [ -1 ] % 4
def http headers s d {}for line in s split '\r\n' try key value [i strip for i in line split ' ' 1 ]d[key] valueexcept Value Error passreturn d
def adjust timestamp ts offset here utcoffset return ts - offset - here * 3600
def test difficult univariate x Normal 'x' 0 1 assert density x ** 3 assert density exp x ** 2 assert density log x
def test difficult univariate x Normal 'x' 0 1 assert density x ** 3 assert density exp x ** 2 assert density log x
def test difficult univariate x Normal 'x' 0 1 assert density x ** 3 assert density exp x ** 2 assert density log x
def import setting name value getattr settings name None return import object value
def has unaccent cr cr execute "SELEC Tproname FRO Mpg proc WHER Eproname 'unaccent'" return len cr fetchall > 0
def calculate multipart etag source path chunk size DEFAULT CHUNK SIZE md 5 s []with open source path 'rb' as fp while True data fp read chunk size if not data breakmd 5 s append hashlib md 5 data if len md 5 s 1 new etag '"{}"' format md 5 s[ 0 ] hexdigest else digests '' join m digest for m in md 5 s new md 5 hashlib md 5 digests new etag '"{}-{}"' format new md 5 hexdigest len md 5 s return new etag
def options For Client TLS hostname trust Root None client Certificate None acceptable Protocols None **kw extra Certificate Options kw pop 'extra Certificate Options' None or {} if trust Root is None trust Root platform Trust if kw raise Type Error "options For Client TLS gotanunexpectedkeywordargument'{arg}'" format arg kw popitem [0 ] if not isinstance hostname unicode raise Type Error 'options For Client TL Srequirestextforhostnames not' + hostname class name if client Certificate extra Certificate Options update private Key client Certificate private Key original certificate client Certificate original certificate Options Open SSL Certificate Options trust Root trust Root acceptable Protocols acceptable Protocols **extra Certificate Options return Client TLS Options hostname certificate Options get Context
def options For Client TLS hostname trust Root None client Certificate None acceptable Protocols None **kw extra Certificate Options kw pop 'extra Certificate Options' None or {} if trust Root is None trust Root platform Trust if kw raise Type Error "options For Client TLS gotanunexpectedkeywordargument'{arg}'" format arg kw popitem [0 ] if not isinstance hostname unicode raise Type Error 'options For Client TL Srequirestextforhostnames not' + hostname class name if client Certificate extra Certificate Options update private Key client Certificate private Key original certificate client Certificate original certificate Options Open SSL Certificate Options trust Root trust Root acceptable Protocols acceptable Protocols **extra Certificate Options return Client TLS Options hostname certificate Options get Context
def certificate downloadable status student course key current status certificate status for student student course key response data {'is downloadable' False 'is generating' True if current status['status'] in [ Certificate Statuses generating Certificate Statuses error] else False 'is unverified' True if current status['status'] Certificate Statuses unverified else False 'download url' None 'uuid' None}if current status['status'] Certificate Statuses downloadable response data['is downloadable'] Trueresponse data['download url'] current status['download url'] or get certificate url student id course key response data['uuid'] current status['uuid']return response data
def get version return open VERSION PATH read strip
def wait for vhd coalesce session instance sr ref vdi ref vdi uuid list if len vdi uuid list 1 LOG debug ' Oldchainissingle VHD coalescenotpossible ' instance instance returnparent vdi uuid vdi uuid list[ 1 ]if count children session parent vdi uuid sr ref > 1 LOG debug ' Parenthasotherchildren coalesceisunlikely ' instance instance returnmax attempts CONF xenserver vhd coalesce max attemptsgood parent uuids vdi uuid list[ 1 ]for i in range max attempts scan sr session sr ref parent uuid get vhd parent uuid session vdi ref if parent uuid and parent uuid not in good parent uuids LOG debug ' Parent% parent uuid snotyetinparentlist% good parent uuids s waitingforcoalesce ' {'parent uuid' parent uuid 'good parent uuids' good parent uuids} instance instance else LOG debug ' Coalescedetected becauseparentis %s' parent uuid instance instance returngreenthread sleep CONF xenserver vhd coalesce poll interval msg 'VH Dcoalesceattemptsexceeded %d givingup ' % max attempts raise exception Nova Exception msg
def wait for vhd coalesce session instance sr ref vdi ref vdi uuid list if len vdi uuid list 1 LOG debug ' Oldchainissingle VHD coalescenotpossible ' instance instance returnparent vdi uuid vdi uuid list[ 1 ]if count children session parent vdi uuid sr ref > 1 LOG debug ' Parenthasotherchildren coalesceisunlikely ' instance instance returnmax attempts CONF xenserver vhd coalesce max attemptsgood parent uuids vdi uuid list[ 1 ]for i in range max attempts scan sr session sr ref parent uuid get vhd parent uuid session vdi ref if parent uuid and parent uuid not in good parent uuids LOG debug ' Parent% parent uuid snotyetinparentlist% good parent uuids s waitingforcoalesce ' {'parent uuid' parent uuid 'good parent uuids' good parent uuids} instance instance else LOG debug ' Coalescedetected becauseparentis %s' parent uuid instance instance returngreenthread sleep CONF xenserver vhd coalesce poll interval msg 'VH Dcoalesceattemptsexceeded %d givingup ' % max attempts raise exception Nova Exception msg
def save linux distro path output open path 'w' output write bz 2 compress pickle dumps linux distro output close
def test pdbbreakpoint op b tensor fmatrix condition tensor gt b sum 0 b monitored Pdb Breakpoint name ' Test Breakpoint' condition b output b monitored ** 2 f theano function [b] output mode mode with gpu topo f maker fgraph toposort assert isinstance topo[ -2 ] op Gpu Elemwise assert topo[ -1 ] op host from gpu
def test pdbbreakpoint op b tensor fmatrix condition tensor gt b sum 0 b monitored Pdb Breakpoint name ' Test Breakpoint' condition b output b monitored ** 2 f theano function [b] output mode mode with gpu topo f maker fgraph toposort assert isinstance topo[ -2 ] op Gpu Elemwise assert topo[ -1 ] op host from gpu
def test pdbbreakpoint op b tensor fmatrix condition tensor gt b sum 0 b monitored Pdb Breakpoint name ' Test Breakpoint' condition b output b monitored ** 2 f theano function [b] output mode mode with gpu topo f maker fgraph toposort assert isinstance topo[ -2 ] op Gpu Elemwise assert topo[ -1 ] op host from gpu
def test score 2 tpot obj TPOT Classifier tpot obj pbar tqdm total 1 disable True known score 0 986318199045 tpot obj optimized pipeline creator Individual from string ' Random Forest Classifier input matrix ' tpot obj pset tpot obj fitted pipeline tpot obj toolbox compile expr tpot obj optimized pipeline tpot obj fitted pipeline fit training features training classes score tpot obj score testing features testing classes def isclose a b rel tol 1e- 09 abs tol 0 0 return abs a - b < max rel tol * max abs a abs b abs tol assert isclose known score score
def Load Plist filename data Nonetry p subprocess Popen ['/usr/bin/plutil' '-convert' 'xml 1 ' '-o' '-' filename] stdout subprocess PIPE stderr subprocess PIPE out data err data p communicate except IO Error as e print eif p returncode 0 data plistlib read Plist From String out data return data
def get Rotated Widdershins Quarter Around Z Axis vector 3 return Vector 3 - vector 3 y vector 3 x vector 3 z
def get Path In Fabmetheus From File Name Help file Name Help fabmetheus Path archive get Fabmetheus Path split File Name Helps file Name Help split ' ' split File Name Directory Names split File Name Helps[ -1 ]for split File Name Directory Name in split File Name Directory Names fabmetheus Path os path join fabmetheus Path split File Name Directory Name return fabmetheus Path
def gettext message global default activet active get current Thread None if t is not None return t gettext message if default is None from django conf import settings default translation settings LANGUAGE CODE return default gettext message
def item to sub for client iterator sub pb topics resource Message To Dict sub pb return Subscription from api repr resource iterator client topics topics
def human Duration Nanosec nsec if nsec < 1000 return u'%unsec' % nsec usec nsec divmod nsec 1000 if usec < 1000 return u'% 2fusec' % usec + float nsec / 1000 msec usec divmod usec 1000 if msec < 1000 return u'% 2fms' % msec + float usec / 1000 return human Duration msec
def convert string array data encoding itemsize None if encoding is not None and len data data Series data ravel str encode encoding values reshape data shape if itemsize is None itemsize lib max len string array ensure object data ravel data np asarray data dtype 'S%d' % itemsize return data
def normalized levenshtein distance s1 s2 acceptable differences if len s1 > len s2 s1 s2 s2 s1 acceptable differences set - i for i in acceptable differences distances range len s1 + 1 for index 2 num 2 in enumerate s2 new distances [ index 2 + 1 ]for index 1 num 1 in enumerate s1 if num 2 - num 1 in acceptable differences new distances append distances[index 1 ] else new distances append 1 + min distances[index 1 ] distances[ index 1 + 1 ] new distances[ -1 ] distances new distancesreturn distances[ -1 ]
def get form target if get comment app name DEFAULT COMMENTS APP and hasattr get comment app 'get form target' return get comment app get form target else return urlresolvers reverse 'django contrib comments views comments post comment'
def nonterminals symbols if u' ' in symbols symbol list symbols split u' ' else symbol list symbols split return [ Nonterminal s strip for s in symbol list]
def cache subnet group absent name region None key None keyid None profile None **args ret {'name' name 'result' True 'comment' '' 'changes' {}}args dict [ k v for k v in args items if not k startswith ' ' ] exists salt ['boto 3 elasticache cache subnet group exists'] name region region key key keyid keyid profile profile if exists if opts ['test'] ret['comment'] ' Cachesubnetgroup{ 0 }wouldberemoved ' format name ret['result'] Nonereturn retdeleted salt ['boto 3 elasticache delete cache subnet group'] name region region key key keyid keyid profile profile **args if deleted ret['changes']['old'] nameret['changes']['new'] Noneelse ret['result'] Falseret['comment'] ' Failedtodelete{ 0 }cache subnetgroup ' format name else ret['comment'] ' Cachesubnetgroup{ 0 }alreadyabsent ' format name return ret
def Get Compiler Path target list data options build file gyp common Parse Qualified Target target list[ 0 ] make global settings dict data[build file] get 'make global settings' {} for key value in make global settings dict if key in ['CC' 'CXX'] return os path join options toplevel dir value for key in ['CC target' 'CC' 'CXX'] compiler os environ get key if compiler return compilerreturn 'gcc'
def Get Compiler Path target list data options build file gyp common Parse Qualified Target target list[ 0 ] make global settings dict data[build file] get 'make global settings' {} for key value in make global settings dict if key in ['CC' 'CXX'] return os path join options toplevel dir value for key in ['CC target' 'CC' 'CXX'] compiler os environ get key if compiler return compilerreturn 'gcc'
def headers cb headers {' Access- Control- Allow- Credentials' 'true' ' Access- Control- Allow- Headers' 'accept accept-charset accept-encoding ' + 'accept-language authorization content-length ' + 'content-type host origin proxy-connection ' + 'referer user-agent x-requested-with' ' Access- Control- Allow- Methods' 'HEAD GET PUT POST PATCH DELETE' ' Access- Control- Allow- Origin' '*' ' Access- Control- Max- Age' '86400 '}if add headers cb headers update add headers cb return headers
def headers cb headers {' Access- Control- Allow- Credentials' 'true' ' Access- Control- Allow- Headers' 'accept accept-charset accept-encoding ' + 'accept-language authorization content-length ' + 'content-type host origin proxy-connection ' + 'referer user-agent x-requested-with' ' Access- Control- Allow- Methods' 'HEAD GET PUT POST PATCH DELETE' ' Access- Control- Allow- Origin' '*' ' Access- Control- Max- Age' '86400 '}if add headers cb headers update add headers cb return headers
def memoize func cache {}def inner *args **kwargs args tuple args kwargs set frozenset iter kwargs items if args kwargs set in cache result cache[ args kwargs set ]else result func *args **kwargs cache[ args kwargs set ] resultreturn resultreturn inner
def memoize func cache {}def inner *args **kwargs args tuple args kwargs set frozenset iter kwargs items if args kwargs set in cache result cache[ args kwargs set ]else result func *args **kwargs cache[ args kwargs set ] resultreturn resultreturn inner
def continued fraction reduce cf from sympy core symbol import Dummyfrom sympy solvers import solveperiod []x Dummy 'x' def untillist cf for nxt in cf if isinstance nxt list period extend nxt yield x break yield nxt a Integer 0 for a in continued fraction convergents untillist cf passif period y Dummy 'y' solns solve continued fraction reduce period + [y] - y y solns sort pure solns[ -1 ]return a subs x pure radsimp else return a
def prepare message txt def plain val ' Return Truewhenvalisplain ASCII'try val decode 'ascii' return Trueexcept return Falsecode 'ISO- 8859 - 1 'msg Message payload []body Falseheader Falsefor line in txt encode code 'replace' split '\n' if header and not line body Trueif body payload append line else m RE HEADER search line if m header Truekeyword m group 1 strip value m group 2 strip if plain value msg add header keyword value else header Header value code msg[keyword] headermsg set payload '\n' join payload code if not msg has key ' Content- Transfer- Encoding' encode quopri msg return msg as string
def os detection exec exec method try linux 1 exec method 'echo-nw 3 af' linux 2 exec method 'head-n 1 /etc/passwd' except Base Framework Exception passelse if 'w 3 af' in linux 1 and linux 2 count ' ' > 3 om out debug ' Identifiedremote O Sas Linux returning"linux" ' return 'linux'try win 1 exec method 'type%SYSTEMROOT%\\win ini' win 2 exec method 'echo/?' except Base Framework Exception passelse if '[fonts]' in win 1 and 'ECHO' in win 2 om out debug ' Identifiedremote O Sas Windows returning"windows" ' return 'windows'raise Base Framework Exception ' Failedtoget/identifytheremote OS '
def os detection exec exec method try linux 1 exec method 'echo-nw 3 af' linux 2 exec method 'head-n 1 /etc/passwd' except Base Framework Exception passelse if 'w 3 af' in linux 1 and linux 2 count ' ' > 3 om out debug ' Identifiedremote O Sas Linux returning"linux" ' return 'linux'try win 1 exec method 'type%SYSTEMROOT%\\win ini' win 2 exec method 'echo/?' except Base Framework Exception passelse if '[fonts]' in win 1 and 'ECHO' in win 2 om out debug ' Identifiedremote O Sas Windows returning"windows" ' return 'windows'raise Base Framework Exception ' Failedtoget/identifytheremote OS '
def wassuccessful patch result return make instancemethod Text Test Result was Successful result
def wassuccessful patch result return make instancemethod Text Test Result was Successful result
def wassuccessful patch result return make instancemethod Text Test Result was Successful result
def set Privacy List disp list resp disp Send And Wait For Response Iq 'set' NS PRIVACY payload [list] if is Result Node resp return 1
def log multivariate normal density tied X means covars cv np tile covars means shape[ 0 ] 1 1 return log multivariate normal density full X means cv
def dict keys startswith dictionary string matched keys [key for key in dictionary keys if key startswith string ]return dict k dictionary[k] for k in matched keys
def adjust Time Delay last Query Duration lower Std Limit candidate 1 + int round lower Std Limit if candidate kb delay Candidates [candidate] + kb delay Candidates[ -1 ] if all x candidate for x in kb delay Candidates and candidate < conf time Sec conf time Sec candidateinfo Msg 'adjustingtimedelayto'info Msg + '%dsecond%sduetogoodresponsetimes' % conf time Sec 's' if conf time Sec > 1 else '' logger info info Msg
def oid diff git oid filename None args [ oid + u'~' oid]opts common diff opts add filename args filename status out err git diff *args **opts if status 0 args [ oid + u'^ ' ] add filename args filename status out err git show pretty u'format ' *args **opts out out lstrip return out
def repeat sequence N len sequence def f i return sequence[ i % N ]return partial force sequence advance f
def find roots path file sig '* plug' roots set for root dirnames filenames in os walk path followlinks True for filename in fnmatch filter filenames file sig dir to add os path dirname os path join root filename relative os path relpath os path realpath dir to add os path realpath path for subelement in relative split os path sep if subelement in ' ' ' ' continueif subelement startswith ' ' or subelement ' pycache ' log debug ' Ignore%s' % dir to add breakelse roots add dir to add return roots
def expected freq observed observed np asarray observed dtype np float 64 margsums margins observed d observed ndimexpected reduce np multiply margsums / observed sum ** d - 1 return expected
def user can manage leaders user group profile return user has perm 'groups change groupprofile'
def runtests from Cython Debugger Tests import test libpython in gdbsuccess libcython run unittest in module name success libpython run unittest in module test libpython in gdb name if not success libcython or not success libpython sys exit 2
def Count Errors ocr text truth text counts collections Counter truth text counts subtract ocr text drops sum c for c in counts values if c > 0 adds sum - c for c in counts values if c < 0 return Error Counts drops adds len truth text len ocr text
def agent service setup test test ca set get credential sets [0 ]test host '192 0 2 5'test port 54123 test reactor Memory Core Reactor test agent service Agent Service reactor test reactor control service host test host control service port test port node credential test ca set node ca certificate test ca set root credential certificate backend description LOOPBACK api args {}
def create filter parameters if parameters['filters'] cli filters parameters['filters']real filters []for filter type filter pattern in cli filters real filters append filter type lstrip '-' filter pattern source location parameters['src']if source location startswith 's 3 //' src rootdir get s3 root source location parameters['dir op'] else src rootdir get local root parameters['src'] parameters['dir op'] destination location parameters['dest']if destination location startswith 's 3 //' dst rootdir get s3 root parameters['dest'] parameters['dir op'] else dst rootdir get local root parameters['dest'] parameters['dir op'] return Filter real filters src rootdir dst rootdir else return Filter {} None None
def normalize weight list minval None maxval None if not weight list return if maxval is None maxval max weight list if minval is None minval min weight list maxval float maxval minval float minval if minval maxval return [0 ] * len weight list range maxval - minval return i - minval / range for i in weight list
def match coordinates 3d matchcoord catalogcoord nthneighbor 1 storekdtree u'kdtree 3d' if catalogcoord isscalar or len catalogcoord < 1 raise Value Error u' Thecatalogforcoordinatematchingcannotbeascalarorlength- 0 ' kdt get cartesian kdtree catalogcoord storekdtree matchcoord matchcoord transform to catalogcoord catunit catalogcoord cartesian x unitmatchxyz matchcoord cartesian xyz to catunit matchflatxyz matchxyz reshape 3 np prod matchxyz shape // 3 dist idx kdt query matchflatxyz T nthneighbor if nthneighbor > 1 dist dist[ -1 ]idx idx[ -1 ]sep 2 d catalogcoord[idx] separation matchcoord return idx reshape matchxyz shape[ 1 ] sep 2 d dist reshape matchxyz shape[ 1 ] * catunit
def get liveaction by id liveaction id liveaction Nonetry liveaction Live Action get by id liveaction id except Validation Error Value Error as e LOG error ' Databaselookupfor Live Actionwithid "%s"resultedinexception %s' liveaction id e raise Stack Storm DB Object Not Found Error ' Unabletofind Live Actionwithid "%s"' % liveaction id return liveaction
def unload all unload *reversed PLUGINS
def test denoise tv chambolle 1d x 125 + 100 * np sin np linspace 0 8 * np pi 1000 x + 20 * np random rand x size x np clip x 0 255 res restoration denoise tv chambolle x astype np uint 8 weight 0 1 assert res dtype np float assert res std * 255 < x std
def parse html dict dictionary prefix '' ret Multi Value Dict regex re compile '^%s\\ + $' % re escape prefix for field in dictionary match regex match field if not match continuekey match groups [0 ]value dictionary getlist field ret setlist key value return ret
def run solvers model true params alpha get l1 slsqp results get l1 cvxopt results print summaries results {}results['results ML'] model fit method 'newton' start params results['results ML'] params ravel order 'F' if get l1 slsqp results results['results l1 slsqp'] model fit regularized method 'l 1 ' alpha alpha maxiter 1000 start params start params retall True if get l1 cvxopt results results['results l1 cvxopt cp'] model fit regularized method 'l 1 cvxopt cp' alpha alpha maxiter 50 start params start params retall True feastol 1e- 05 return results
def run solvers model true params alpha get l1 slsqp results get l1 cvxopt results print summaries results {}results['results ML'] model fit method 'newton' start params results['results ML'] params ravel order 'F' if get l1 slsqp results results['results l1 slsqp'] model fit regularized method 'l 1 ' alpha alpha maxiter 1000 start params start params retall True if get l1 cvxopt results results['results l1 cvxopt cp'] model fit regularized method 'l 1 cvxopt cp' alpha alpha maxiter 50 start params start params retall True feastol 1e- 05 return results
def run solvers model true params alpha get l1 slsqp results get l1 cvxopt results print summaries results {}results['results ML'] model fit method 'newton' start params results['results ML'] params ravel order 'F' if get l1 slsqp results results['results l1 slsqp'] model fit regularized method 'l 1 ' alpha alpha maxiter 1000 start params start params retall True if get l1 cvxopt results results['results l1 cvxopt cp'] model fit regularized method 'l 1 cvxopt cp' alpha alpha maxiter 50 start params start params retall True feastol 1e- 05 return results
def run solvers model true params alpha get l1 slsqp results get l1 cvxopt results print summaries results {}results['results ML'] model fit method 'newton' start params results['results ML'] params ravel order 'F' if get l1 slsqp results results['results l1 slsqp'] model fit regularized method 'l 1 ' alpha alpha maxiter 1000 start params start params retall True if get l1 cvxopt results results['results l1 cvxopt cp'] model fit regularized method 'l 1 cvxopt cp' alpha alpha maxiter 50 start params start params retall True feastol 1e- 05 return results
def main argv if len argv 1 die 'ERROR Mustspecifysubcommand oneof %s' % nice join x name for x in subcommands all parser argparse Argument Parser prog argv[ 0 ] parser add argument '-v' '--version' action 'version' version version subs parser add subparsers help ' Sub-commands' for cls in subcommands all subparser subs add parser cls name help cls help subcommand cls parser subparser subparser set defaults invoke subcommand invoke args parser parse args argv[ 1 ] try args invoke args except Exception as e die 'ERROR ' + str e
@pytest fixturedef fake save manager fake save manager unittest mock Mock spec savemanager Save Manager objreg register 'save-manager' fake save manager yield fake save manager objreg delete 'save-manager'
def agent members consul url None **kwargs ret {}query params {}if not consul url consul url get config if not consul url log error ' No Consul UR Lfound ' ret['message'] ' No Consul UR Lfound 'ret['res'] Falsereturn retif 'wan' in kwargs query params['wan'] kwargs['wan']function 'agent/members'ret query consul url consul url function function method 'GET' query params query params return ret
@contextmanagerdef temporary file suffix '' tempfile stream Named Temporary File suffix suffix delete False tempfile tempfile stream nametempfile stream close yield tempfile os remove tempfile
@contextmanagerdef temporary file suffix '' tempfile stream Named Temporary File suffix suffix delete False tempfile tempfile stream nametempfile stream close yield tempfile os remove tempfile
def make pad threshold message threshold 1 threshold 2 lower channel pressure threshold upper channel pressure threshold args to 7L 5 M threshold 1 + to 7L 5 M threshold 2 + to 7L 5 M lower channel pressure threshold + to 7L 5 M upper channel pressure threshold return make message 27 args
def make pad threshold message threshold 1 threshold 2 lower channel pressure threshold upper channel pressure threshold args to 7L 5 M threshold 1 + to 7L 5 M threshold 2 + to 7L 5 M lower channel pressure threshold + to 7L 5 M upper channel pressure threshold return make message 27 args
def test reset out ip run cell "parrot 'dead'" store history True ip run cell 'parrot' store history True nt assert true 'dead' in [ ip user ns[x] for x in ' ' ' ' ' ' ] ip magic 'reset-fout' nt assert false 'dead' in [ ip user ns[x] for x in ' ' ' ' ' ' ] nt assert equal len ip user ns[' Out'] 0
def test reset out ip run cell "parrot 'dead'" store history True ip run cell 'parrot' store history True nt assert true 'dead' in [ ip user ns[x] for x in ' ' ' ' ' ' ] ip magic 'reset-fout' nt assert false 'dead' in [ ip user ns[x] for x in ' ' ' ' ' ' ] nt assert equal len ip user ns[' Out'] 0
def run python job job log ' Runningpythonjob \n' sys path append os path realpath job expt dir params {}for param in job param dbl vals param dbl val valuesint vals param int val valuesstr vals param str val valuesif len dbl vals > 0 params[param name] np array dbl vals elif len int vals > 0 params[param name] np array int vals dtype int elif len str vals > 0 params[param name] str valselse raise Exception ' Unknownparametertype ' module import job name result module main job id params log ' Gotresult%f\n' % result job value resultsave job job
@pytest mark django dbdef test theme selection with override current theme class with override provides 'xtheme' ['shuup tests xtheme utils Faux Theme' 'shuup tests xtheme utils Faux Theme 2 ' 'shuup tests xtheme utils H2 G 2 Theme'] Theme Settings objects all delete for theme in get provide objects 'xtheme' set current theme theme identifier je get jinja 2 engine wrapper noop if theme identifier 'h 2 g 2 ' else pytest raises Template Does Not Exist with wrapper t je get template '42 jinja' content t render strip assert 'asliceoflemonwrappedaroundalargegoldbrick' in content replace '\n' ''
@pytest mark django dbdef test theme selection with override current theme class with override provides 'xtheme' ['shuup tests xtheme utils Faux Theme' 'shuup tests xtheme utils Faux Theme 2 ' 'shuup tests xtheme utils H2 G 2 Theme'] Theme Settings objects all delete for theme in get provide objects 'xtheme' set current theme theme identifier je get jinja 2 engine wrapper noop if theme identifier 'h 2 g 2 ' else pytest raises Template Does Not Exist with wrapper t je get template '42 jinja' content t render strip assert 'asliceoflemonwrappedaroundalargegoldbrick' in content replace '\n' ''
@task name 'geonode tasks email send email' queue 'email' def send email *args **kwargs send mail *args **kwargs
def parallel execute iter objects func get deps if get deps is None get deps no depsresults Queue state State objects while True feed queue objects func get deps results state try event results get timeout 0 1 except Empty continueexcept thread error raise Shutdown Exception if event is STOP break obj exception eventif exception is None log debug u' Finishedprocessing {}' format obj state finished add obj else log debug u' Failed {}' format obj state failed add obj yield event
def parallel execute iter objects func get deps if get deps is None get deps no depsresults Queue state State objects while True feed queue objects func get deps results state try event results get timeout 0 1 except Empty continueexcept thread error raise Shutdown Exception if event is STOP break obj exception eventif exception is None log debug u' Finishedprocessing {}' format obj state finished add obj else log debug u' Failed {}' format obj state failed add obj yield event
def parallel execute iter objects func get deps if get deps is None get deps no depsresults Queue state State objects while True feed queue objects func get deps results state try event results get timeout 0 1 except Empty continueexcept thread error raise Shutdown Exception if event is STOP break obj exception eventif exception is None log debug u' Finishedprocessing {}' format obj state finished add obj else log debug u' Failed {}' format obj state failed add obj yield event
def parallel execute iter objects func get deps if get deps is None get deps no depsresults Queue state State objects while True feed queue objects func get deps results state try event results get timeout 0 1 except Empty continueexcept thread error raise Shutdown Exception if event is STOP break obj exception eventif exception is None log debug u' Finishedprocessing {}' format obj state finished add obj else log debug u' Failed {}' format obj state failed add obj yield event
def parallel execute iter objects func get deps if get deps is None get deps no depsresults Queue state State objects while True feed queue objects func get deps results state try event results get timeout 0 1 except Empty continueexcept thread error raise Shutdown Exception if event is STOP break obj exception eventif exception is None log debug u' Finishedprocessing {}' format obj state finished add obj else log debug u' Failed {}' format obj state failed add obj yield event
@app route '/logout' def logout session pop 'user' None return redirect url for 'index'
def has environment marker support try return pkg resources parse version setuptools version > pkg resources parse version '0 7 2' except Exception as exc sys stderr write " Couldnottestsetuptool'sversion %s\n" % exc return False
def has environment marker support try return pkg resources parse version setuptools version > pkg resources parse version '0 7 2' except Exception as exc sys stderr write " Couldnottestsetuptool'sversion %s\n" % exc return False
@print durationdef asyncio run urls pass
def test mpl preserve width f create figure width height f canvas get width height s mplhooks figure to tight array f 0 5 * width 0 5 * height True exp width newwidth newheight f canvas get width height obs newwidthplt close f assert exp obs
def fingerprint registry xml parent data fingerprint XML Sub Element xml parent 'hudson plugins createfingerprint Create Fingerprint' fingerprint set 'plugin' 'create-fingerprint' mapping [ 'targets' 'targets' '' ]convert mapping to xml fingerprint data mapping fail required True
def Kumaraswamy name a b return rv name Kumaraswamy Distribution a b
def all properties decl for item in decl seq p item valueif isinstance p Property yield p
def keepvol on destroy name kwargs None call None if call 'action' raise Salt Cloud System Exit ' Thekeepvol on destroyactionmustbecalledwith-aor--action ' if not kwargs kwargs {}device kwargs get 'device' None volume id kwargs get 'volume id' None return toggle delvol name name device device volume id volume id value 'false'
def keepvol on destroy name kwargs None call None if call 'action' raise Salt Cloud System Exit ' Thekeepvol on destroyactionmustbecalledwith-aor--action ' if not kwargs kwargs {}device kwargs get 'device' None volume id kwargs get 'volume id' None return toggle delvol name name device device volume id volume id value 'false'
def keepvol on destroy name kwargs None call None if call 'action' raise Salt Cloud System Exit ' Thekeepvol on destroyactionmustbecalledwith-aor--action ' if not kwargs kwargs {}device kwargs get 'device' None volume id kwargs get 'volume id' None return toggle delvol name name device device volume id volume id value 'false'
def Create Index Only Query Results results postfix props new results []for result in results new results extend Create Index Entities result postfix props return new results
def shard df on index df divisions if isinstance divisions Iterator divisions list divisions if not len divisions yield df else divisions np array divisions df df sort index index df indexif is categorical dtype index index index as ordered indices index searchsorted divisions yield df iloc[ indices[ 0 ]] for i in range len indices - 1 yield df iloc[indices[i] indices[ i + 1 ]] yield df iloc[indices[ -1 ] ]
def decode cookie value try return unicode value 'us-ascii' except Unicode Error try return unicode value 'utf- 8 ' except Unicode Error return unicode value 'iso 8859 ' 'ignore'
@event u'manager config updated' @event u'manager daemon started' def register web server manager global web server config hashif not manager is daemon returnconfig manager config get u'web server' if get config hash config config hash log debug u"webserverconfighas'ntchanged" returnconfig hash get config hash config web server config prepare config config stop server manager if not web server config returnlog info u' Runningwebserverat IP%s %s' web server config[u'bind'] web server config[u'port'] api app secret key get secret log info u' Initiating API' register app u'/api' api app if web server config get u'web ui' log info u' Registering Web UI' register web ui manager web server setup server web server config
def to pascal case snake case space case re sub ' ' '' snake case wordlist []for word in space case split wordlist append word[ 0 ] upper wordlist append word[ 1 ] return '' join wordlist
def is link path if sys getwindowsversion major < 6 return Falsetry if not is reparse point path return Falseexcept Salt Invocation Error return Falsereparse data get reparse data path if not reparse data return Falseheader parser struct Struct 'L' Reparse Tag header parser unpack reparse data[ header parser size] if not Reparse Tag & 2684420095 2684354572 return Falseelse return True
def Translate Error error detail '' if error > taskqueue service pb Task Queue Service Error DATASTORE ERROR and isinstance error int from google appengine api import datastoredatastore exception datastore Datastore Exception From Error Code And Detail error - taskqueue service pb Task Queue Service Error DATASTORE ERROR detail class Joint Exception datastore exception class Datastore Error ' Therewasadatastoreerrorwhileaccessingthequeue ' msg u'taskqueue Datastore Errorcausedby %s%s' % datastore exception class detail def str self return Joint Exception msgreturn Joint Exception else exception class ERROR MAPPING get error None if exception class return exception class detail else return Error ' Applicationerror%s %s' % error detail
def Fetch Log http client log url output file callback def On Fetch response if response code 200 with open output file 'w' as f f write response body logging info 'wrote%dbytesto%s' % len response body output file else logging error 'failedtofetch%s' % log url callback http client fetch log url callback On Fetch method 'GET'
def Fetch Log http client log url output file callback def On Fetch response if response code 200 with open output file 'w' as f f write response body logging info 'wrote%dbytesto%s' % len response body output file else logging error 'failedtofetch%s' % log url callback http client fetch log url callback On Fetch method 'GET'
def index template create name body hosts None profile None es get instance hosts profile try result es indices put template name name body body return Trueexcept elasticsearch exceptions Not Found Error return Nonereturn None
def rm permissions obj name principal ace type 'all' obj type 'file' dacl Dacl obj name obj type dacl rm ace principal ace type dacl save obj name return True
def keys to string data if isinstance data dict for key in list data keys if isinstance key six string types value data[key]val keys to string value del data[key]data[key encode 'utf 8 ' 'ignore' ] valreturn data
def generate file fname ns func dest dir ' ' with open pjoin root 'buildutils' 'templates' '%s' % fname 'r' as f tpl f read out tpl format **ns func dest pjoin dest dir fname info 'generating%sfromtemplate' % dest with open dest 'w' as f f write out
def use astropy helpers **kwargs global BOOTSTRAPPE Rconfig BOOTSTRAPPER configconfig update **kwargs BOOTSTRAPPER Bootstrapper **config BOOTSTRAPPER run
def compatibility mode setattr Events Codes 'ALL EVENTS' ALL EVENTS for evname in globals if evname startswith 'IN ' setattr Events Codes evname globals [evname] global COMPATIBILITY MODECOMPATIBILITY MODE True
def find tcl tk dir tcl root exec statement 'from%simport Tcl print Tcl eval "infolibrary" ' % modname tkinter tk version exec statement 'from tkinterimport TK VERSION print TK VERSION ' tk root os path join os path dirname tcl root 'tk%s' % tk version return tcl root tk root
def test str to utf 8 s '\\u 01 ff\\u 02 ff'u utils to utf 8 s assert equal type s type str assert equal type u type u'\u 01 ff\u 02 ff'
def remove null handler DULWICH LOGGER remove Handler NULL HANDLER
def task and vm state from status statuses vm states set task states set lower statuses [status lower for status in statuses]for state task map in STATE MAP items for task state mapped state in task map items status string mapped stateif status string lower in lower statuses vm states add state task states add task state return sorted vm states sorted task states
def setup light device id name insteonhub hass add devices callback if device id in CONFIGURING request id CONFIGURING pop device id configurator get component 'configurator' configurator request done request id LOGGER info ' Deviceconfigurationdone ' conf lights config from file hass config path INSTEON LOCAL LIGHTS CONF if device id not in conf lights conf lights[device id] nameif not config from file hass config path INSTEON LOCAL LIGHTS CONF conf lights LOGGER error ' Failedtosaveconfigurationfile' device insteonhub dimmer device id add devices callback [ Insteon Local Dimmer Device device name ]
def update try salt fileserver reap fileserver cache dir os path join opts ['cachedir'] 'minionfs/hash' find file except os error pass
def get remote catalog db dbname cache True verbose True return VOS Database from json urllib parse urljoin vo conf vos baseurl dbname + u' json' encoding u'utf 8 ' cache cache show progress verbose
def absent email profile 'splunk' **kwargs user identity kwargs get 'name' ret {'name' user identity 'changes' {} 'result' None 'comment' ' User{ 0 }isabsent ' format user identity }target salt ['splunk get user'] email profile profile if not target ret['comment'] ' User{ 0 }doesnotexist' format user identity ret['result'] Truereturn retif opts ['test'] ret['comment'] ' User{ 0 }isallsettobedeleted' format user identity ret['result'] Nonereturn retresult salt ['splunk delete user'] email profile profile if result ret['comment'] ' Deleteduser{ 0 }' format user identity ret['changes'] setdefault 'old' ' User{ 0 }exists' format user identity ret['changes'] setdefault 'new' ' User{ 0 }deleted' format user identity ret['result'] Trueelse ret['comment'] ' Failedtodelete{ 0 }' format user identity ret['result'] Falsereturn ret
def config absent name ret {'name' name 'result' False 'changes' {} 'comment' ''}matches salt ['nxos cmd'] 'find' name if not matches ret['result'] Trueret['comment'] ' Configisalreadyabsent'elif opts ['test'] is True ret['result'] Noneret['comment'] ' Configwillberemoved'ret['changes']['new'] nameelse salt ['nxos cmd'] 'delete config' name matches salt ['nxos cmd'] 'find' name if not matches ret['result'] Trueret['comment'] ' Successfullydeletedconfig'ret['changes']['new'] nameelse ret['result'] Falseret['comment'] ' Failedtodeleteconfig'return ret
def config absent name ret {'name' name 'result' False 'changes' {} 'comment' ''}matches salt ['nxos cmd'] 'find' name if not matches ret['result'] Trueret['comment'] ' Configisalreadyabsent'elif opts ['test'] is True ret['result'] Noneret['comment'] ' Configwillberemoved'ret['changes']['new'] nameelse salt ['nxos cmd'] 'delete config' name matches salt ['nxos cmd'] 'find' name if not matches ret['result'] Trueret['comment'] ' Successfullydeletedconfig'ret['changes']['new'] nameelse ret['result'] Falseret['comment'] ' Failedtodeleteconfig'return ret
def config absent name ret {'name' name 'result' False 'changes' {} 'comment' ''}matches salt ['nxos cmd'] 'find' name if not matches ret['result'] Trueret['comment'] ' Configisalreadyabsent'elif opts ['test'] is True ret['result'] Noneret['comment'] ' Configwillberemoved'ret['changes']['new'] nameelse salt ['nxos cmd'] 'delete config' name matches salt ['nxos cmd'] 'find' name if not matches ret['result'] Trueret['comment'] ' Successfullydeletedconfig'ret['changes']['new'] nameelse ret['result'] Falseret['comment'] ' Failedtodeleteconfig'return ret
def config absent name ret {'name' name 'result' False 'changes' {} 'comment' ''}matches salt ['nxos cmd'] 'find' name if not matches ret['result'] Trueret['comment'] ' Configisalreadyabsent'elif opts ['test'] is True ret['result'] Noneret['comment'] ' Configwillberemoved'ret['changes']['new'] nameelse salt ['nxos cmd'] 'delete config' name matches salt ['nxos cmd'] 'find' name if not matches ret['result'] Trueret['comment'] ' Successfullydeletedconfig'ret['changes']['new'] nameelse ret['result'] Falseret['comment'] ' Failedtodeleteconfig'return ret
def config absent name ret {'name' name 'result' False 'changes' {} 'comment' ''}matches salt ['nxos cmd'] 'find' name if not matches ret['result'] Trueret['comment'] ' Configisalreadyabsent'elif opts ['test'] is True ret['result'] Noneret['comment'] ' Configwillberemoved'ret['changes']['new'] nameelse salt ['nxos cmd'] 'delete config' name matches salt ['nxos cmd'] 'find' name if not matches ret['result'] Trueret['comment'] ' Successfullydeletedconfig'ret['changes']['new'] nameelse ret['result'] Falseret['comment'] ' Failedtodeleteconfig'return ret
def Write Simple XML Element outfile name value indent value str Str Or Unicode value if isinstance value bool value str value str lower safe value str Make XML Safe value str outfile write '%s<%s>%s</%s>\n' % indent name safe value str name
def make requires flag error def requires decorator func if not flag @wraps func def explode *args **kwargs raise Not Implemented Error error return explodeelse return funcreturn requires decorator
def finalize backup info backup info pk mapper params def tx backup info Backup Information get backup info pk if backup info backup info complete time datetime datetime now if backup info filesystem files GS FILESYSTEM gs bucket mapper params['gs bucket name'] Backup Info Writer gs bucket write backup info backup info put force writes True logging info ' Backup%scompleted' backup info name else logging warn ' Backup%scouldnotbefound' backup info pk db run in transaction tx
def regions return get regions 'elasticloadbalancing' connection cls ELB Connection
def new agent bindings port 8080 spinnaker Front 50 Agent new instance from bindings 'front 50 ' Front 50 Status new bindings port return spinnaker
def relative position pos global absolute path lengthif absolute path length 0 absolute path length len os path abspath os getcwd return pos[ 0 ] get filenametable entry [ absolute path length + 1 ] pos[ 1 ]
def assert has extension test credential name value expected X509 Extension name False value x509 credential certificate originalvalues []for i in range x509 get extension count extension x509 get extension i if extension get short name name values append extension get data test assert In expected get data values
def jarque bera resids axis 0 resids np asarray resids skew stats skew resids axis axis kurtosis 3 + stats kurtosis resids axis axis n resids shape[axis]jb n / 6 0 * skew ** 2 + 1 / 4 0 * kurtosis - 3 ** 2 jb pv stats chi 2 sf jb 2 return jb jb pv skew kurtosis
def jarque bera resids axis 0 resids np asarray resids skew stats skew resids axis axis kurtosis 3 + stats kurtosis resids axis axis n resids shape[axis]jb n / 6 0 * skew ** 2 + 1 / 4 0 * kurtosis - 3 ** 2 jb pv stats chi 2 sf jb 2 return jb jb pv skew kurtosis
def weighted percentile array sample weight percentile 50 sorted idx np argsort array weight cdf stable cumsum sample weight[sorted idx] percentile idx np searchsorted weight cdf percentile / 100 0 * weight cdf[ -1 ] return array[sorted idx[percentile idx]]
def weighted percentile array sample weight percentile 50 sorted idx np argsort array weight cdf stable cumsum sample weight[sorted idx] percentile idx np searchsorted weight cdf percentile / 100 0 * weight cdf[ -1 ] return array[sorted idx[percentile idx]]
def test ret {'comment' '' 'success' False}cmd execute cmd 'riak-admin' 'test' if cmd['retcode'] 0 ret['comment'] cmd['stdout']else ret['comment'] cmd['stdout']ret['success'] Truereturn ret
def show state usage queue False **kwargs conflict check queue queue kwargs if conflict is not None return conflictpillar kwargs get 'pillar' pillar enc kwargs get 'pillar enc' if pillar enc is None and pillar is not None and not isinstance pillar dict raise Salt Invocation Error ' Pillardatamustbeformattedasadictionary unlesspillar encisspecified ' st salt state High State opts pillar pillar enc pillar enc st push active try ret st compile state usage finally st pop active set retcode ret return ret
def get access flags string value buff ''for i in ACCESS FLAGS if i[ 0 ] & value i[ 0 ] buff + i[ 1 ] + '' if buff '' return buff[ -1 ]return buff
def samplemat dims aa np zeros dims for i in range min dims aa[ i i ] ireturn aa
def samplemat dims aa np zeros dims for i in range min dims aa[ i i ] ireturn aa
@pytest mark cmd@pytest mark django dbdef test revision capfd call command 'revision' out err capfd readouterr assert out rstrip isnumeric
def module mod Nonetry import importlibmod importlib import module 'salt modules inspectlib {0 }' format module except Import Error as err mod getattr import 'salt modules inspectlib' globals locals fromlist [str module ] module mod grains grains mod pillar pillar mod salt salt return mod
def delete parameter group name region None key None keyid None profile None try conn get conn region region key key keyid keyid profile profile if not conn return {'results' bool conn }r conn delete db parameter group DB Parameter Group Name name return {'deleted' bool r 'message' ' Deleted RD Sparametergroup{ 0 } ' format name }except Client Error as e return {'error' salt utils boto 3 get error e }
def entropy pk qk None base None pk asarray pk pk 1 0 * pk / np sum pk axis 0 if qk is None vec entr pk else qk asarray qk if len qk len pk raise Value Error 'qkandpkmusthavesamelength ' qk 1 0 * qk / np sum qk axis 0 vec rel entr pk qk S np sum vec axis 0 if base is not None S / log base return S
def ntohl integer if sys byteorder 'big' return integerif not isinstance integer int long raise Type Error 'expectedint/long %sfound' % Type Name integer if integer < 0 raise Overflow Error "can'tconvertnegativenumbertounsignedlong" if integer > 1 << 32 raise Overflow Error 'longintlargerthan 32 bits' return int integer & 4278190080 >> 24 integer & 16711680 >> 8 integer & 65280 << 8 integer & 255 << 24
def additions removed name force False ret {'name' name 'changes' {} 'result' False 'comment' ''}current state salt ['vbox guest additions version'] if not current state ret['result'] Trueret['comment'] ' Systemalreadyinthecorrectstate'return retif opts ['test'] ret['comment'] ' Thestateof Virtual Box Guest Additionswillbechanged 'ret['changes'] {'old' current state 'new' True}ret['result'] Nonereturn retnew state salt ['vbox guest additions remove'] force force ret['comment'] ' Thestateof Virtual Box Guest Additionswaschanged 'ret['changes'] {'old' current state 'new' new state}ret['result'] bool new state return ret
def set Settings Path path global settings Pathsettings Path path
def get h5 data group grp name parent '/' f get h5 data file existed Truetry group f get Node parent + grp name except existed Falsemsg 'datafor{}tests' format grp name + ' py' group f create group parent grp name msg return existed group
def virtual if not salt utils is windows return False ' Onlyavailableon Windows Systems' if not salt ['cmd shell info'] 'powershell' ['installed'] return False ' Powershellnotavailable' if not salt utils powershell module exists 'PKI' return False ' Power Shell PK Imodulenotavailable' return virtualname
def get projects projects {}for file name in listdir json directory file path join json directory file name if isfile file path and file path endswith u' json' print u' Loading' file pathprojects[file path] json load open file path u'r' object pairs hook Ordered Dict return projects
def serialize tag tag out '<'if tag tag type Html Tag Type CLOSE TAG out + '/'out + tag tagattributes []for key val in tag attributes items aout keyif val is not None aout + ' ' + quotify val attributes append aout if attributes out + '' + '' join attributes if tag tag type Html Tag Type UNPAIRED TAG out + '/'return out + '>'
def status url 'http //localhost 8080 /manager' timeout 180 return wget 'list' {} url timeout timeout ['res']
def one D norm 2 a raise Not Implemented Error
def remove challenge for url url if not url raise Value Error 'UR Lcannotbeempty' url parse urlparse url del cache[url netloc]
def guess pygments highlighter filename try from pygments lexers import get lexer for filename get lexer by namefrom pygments util import Class Not Foundexcept Import Error return Text SH root ext os path splitext filename if ext in custom extension lexer mapping lexer get lexer by name custom extension lexer mapping[ext] else try lexer get lexer for filename filename except Class Not Found return Text S Hclass Guessed Pygments SH Pygments SH lexer lexerreturn Guessed Pygments SH
def prepare archive at path filename try with Zip File filename 'r' as archive archive close except Bad Zipfile return Noneif is overwritten filename log debug 'ZI Pfilecontainsafilewiththesamename originalisgoingtobeoverwrite' new zip path filename + random extension move filename new zip path filename new zip pathreturn filename
def get footer size file obj file obj seek -8 2 tup struct unpack '<i' file obj read 4 return tup[ 0 ]
def residue reduce derivation H DE z i Dummy 'i' return S sum Root Sum a[ 0 ] as poly z Lambda i i * derivation a[ 1 ] DE as expr subs z i / a[ 1 ] as expr subs z i for a in H
def deterministic vector sign flip u max abs rows np argmax np abs u axis 1 signs np sign u[ range u shape[ 0 ] max abs rows ] u * signs[ np newaxis]return u
def get vif name vif if vif get 'devname' None is not None return vif['devname']return 'nic' + vif['id'] [ model NIC NAME LEN]
def fxa identify code config None try with statsd timer 'accounts fxa identify all' token get fxa token code config ['access token']profile get fxa profile token config except statsd incr 'accounts fxa identify all fail' raiseelse statsd incr 'accounts fxa identify all success' return profile
def send tag data None data data or {} event salt utils event get master event opts opts ['sock dir'] listen False return event fire event data tag
def get size ytid url preloading False stream [x for x in g streams[ytid]['meta'] if x['url'] url ][ 0 ]size stream['size']prefix 'preload ' if preloading else '' if not size -1 util dbg '%s%susingcachedsize %s%s' c g prefix size c w else screen writestatus ' Gettingcontentlength' mute preloading stream['size'] get content length url preloading preloading util dbg '%s%s-content-length %s%s' c y prefix stream['size'] c w return stream['size']
def is leaf cluster return len cluster 1
def kendall pval tau n test stat tau / 2 * 2 * n + 5 / float 9 * n * n - 1 ** 0 5 return normprob test stat direction 'two-sided'
@profiler tracedef remove group role request role group domain None project None manager keystoneclient request admin True rolesreturn manager revoke role role group group project project domain domain
def get next double context builder state ptr a builder lshr get next int 32 context builder state ptr const int 5 b builder lshr get next int 32 context builder state ptr const int 6 a builder uitofp a double b builder uitofp b double return builder fdiv builder fadd b builder fmul a ir Constant double 67108864 0 ir Constant double 9007199254740992 0
def create eeg el ch t None if ch['kind'] FIFF FIFFV EEG CH raise Runtime Error '%sisnotan EE Gchannel Cannotcreateanelectrodedefinition ' % ch['ch name'] if t is None t Transform 'head' 'head' if t from str 'head' raise Runtime Error ' Inappropriatecoordinatetransformation' r0 ex loc to eeg loc ch['loc'] if r0 ex shape[ 1 ] 1 w np array [1 0] else w np array [1 0 -1 0 ] r0 ex apply trans t['trans'] r0 ex T cosmag r0 ex copy normalize vectors cosmag res dict chname ch['ch name'] coil class FIFF FWD COILC EEG w w accuracy accuracy dict['normal'] type ch['coil type'] coord frame t['to'] rmag r0 ex cosmag cosmag return res
def get kvm arch flags {'kvm amd' 'svm' 'kvm intel' 'vmx'}vendor name utils get cpu vendor name if not vendor name raise error Test Error 'CPU Mustbe AMD Intelor Power 7 ' arch type 'kvm %s' % vendor name cpu flag flags get arch type None if cpu flag is None and vendor name in 'power 7 ' return arch typeif not utils cpu has flags cpu flag raise error Test Error '%s CP Uarchitecturemusthave%sflagactiveandmustbe KV Mready' % arch type cpu flag return arch type
def get kvm arch flags {'kvm amd' 'svm' 'kvm intel' 'vmx'}vendor name utils get cpu vendor name if not vendor name raise error Test Error 'CPU Mustbe AMD Intelor Power 7 ' arch type 'kvm %s' % vendor name cpu flag flags get arch type None if cpu flag is None and vendor name in 'power 7 ' return arch typeif not utils cpu has flags cpu flag raise error Test Error '%s CP Uarchitecturemusthave%sflagactiveandmustbe KV Mready' % arch type cpu flag return arch type
def list length queue backend 'sqlite' queue funcs salt loader queues opts cmd '{ 0 } list length' format backend if cmd not in queue funcs raise Salt Invocation Error ' Function"{ 0 }"isnotavailable' format cmd ret queue funcs[cmd] queue queue return ret
def needs renewal name window None if window is not None and window in 'force' ' Force' True return Truereturn renew by name window < datetime datetime today
def needs renewal name window None if window is not None and window in 'force' ' Force' True return Truereturn renew by name window < datetime datetime today
@facebook requireddef decorator example request graph if graph return Http Response 'authorized' else return Http Response 'userdeniedorerror'
def config get key cwd None user None password None ignore retcode False **kwargs all kwargs pop 'all' False result config getter '--get-all' key cwd cwd user user password password ignore retcode ignore retcode **kwargs if result['retcode'] 1 return Noneret result['stdout'] splitlines if all return retelse try return ret[ -1 ]except Index Error return ''
def touch empty backreferences app what name obj options lines examples path os path join app srcdir app config sphinx gallery conf['mod example dir'] '%s examples' % name if not os path exists examples path open examples path 'w' close
def search iter db query limit None batch 100 count search count db query if not count raise Stop Iterationremain countif limit is not None remain min remain limit offset 1prev ids []while remain batch min batch remain ids search db query offset batch read strip split assert len ids batch ' Got%i expected%i' % len ids batch if ids prev ids raise Runtime Error ' Samesearchresultsforpreviousoffset' for identifier in ids if identifier in prev ids raise Runtime Error ' Result%swasinpreviousbatch' % identifier yield identifier offset + batchremain - batchprev ids ids
def search iter db query limit None batch 100 count search count db query if not count raise Stop Iterationremain countif limit is not None remain min remain limit offset 1prev ids []while remain batch min batch remain ids search db query offset batch read strip split assert len ids batch ' Got%i expected%i' % len ids batch if ids prev ids raise Runtime Error ' Samesearchresultsforpreviousoffset' for identifier in ids if identifier in prev ids raise Runtime Error ' Result%swasinpreviousbatch' % identifier yield identifier offset + batchremain - batchprev ids ids
@pytest mark skipif u'not HAS SCIPY' def test fit with fixed and bound constraints m models Gaussian 1 D amplitude 3 mean 4 stddev 1 bounds {u'mean' 4 5 } fixed {u'amplitude' True} x np linspace 0 10 10 y np exp - x ** 2 / 2 f fitting Lev Mar LSQ Fitter fitted 1 f m x y assert fitted 1 mean > 4 assert fitted 1 mean < 5 assert fitted 1 amplitude 3 0 m amplitude fixed Falsefitted 2 f m x y assert fitted 1 mean > 4 assert fitted 1 mean < 5
@pytest mark skipif u'not HAS SCIPY' def test fit with fixed and bound constraints m models Gaussian 1 D amplitude 3 mean 4 stddev 1 bounds {u'mean' 4 5 } fixed {u'amplitude' True} x np linspace 0 10 10 y np exp - x ** 2 / 2 f fitting Lev Mar LSQ Fitter fitted 1 f m x y assert fitted 1 mean > 4 assert fitted 1 mean < 5 assert fitted 1 amplitude 3 0 m amplitude fixed Falsefitted 2 f m x y assert fitted 1 mean > 4 assert fitted 1 mean < 5
@pytest mark skipif u'not HAS SCIPY' def test fit with fixed and bound constraints m models Gaussian 1 D amplitude 3 mean 4 stddev 1 bounds {u'mean' 4 5 } fixed {u'amplitude' True} x np linspace 0 10 10 y np exp - x ** 2 / 2 f fitting Lev Mar LSQ Fitter fitted 1 f m x y assert fitted 1 mean > 4 assert fitted 1 mean < 5 assert fitted 1 amplitude 3 0 m amplitude fixed Falsefitted 2 f m x y assert fitted 1 mean > 4 assert fitted 1 mean < 5
@pytest mark skipif u'not HAS SCIPY' def test fit with fixed and bound constraints m models Gaussian 1 D amplitude 3 mean 4 stddev 1 bounds {u'mean' 4 5 } fixed {u'amplitude' True} x np linspace 0 10 10 y np exp - x ** 2 / 2 f fitting Lev Mar LSQ Fitter fitted 1 f m x y assert fitted 1 mean > 4 assert fitted 1 mean < 5 assert fitted 1 amplitude 3 0 m amplitude fixed Falsefitted 2 f m x y assert fitted 1 mean > 4 assert fitted 1 mean < 5
def tokenize content return [token encode 'utf 8 ' for token in utils tokenize content lower True errors 'ignore' if 2 < len token < 15 and not token startswith ' ' ]
def bind ack data if data[ 2 ] '\x 0 c' return Falseif data[ 36 38 ] '\x 00 \x 00 ' return Falsereturn True
def list states saltenv 'base' return client list states saltenv
def list states saltenv 'base' return client list states saltenv
def type token ratio string n 100 punctuation PUNCTUATION def window a n 100 if n > 0 for i in xrange max len a - n + 1 1 yield a[i i + n ] s string lower split s [w strip punctuation for w in s]return mean 1 0 * len set x / max len x 1 for x in window s n
def create security group rule security group remote group id None direction 'ingress' protocol None port range min None port range max None ethertype 'I Pv 4 ' profile None conn auth profile return conn create security group rule security group remote group id direction protocol port range min port range max ethertype
def test ast lambda lists cant compile u' fn[&key{"a"b}&key{"foo"bar}][afoo] ' cant compile u' fn[&optionala&key{"foo"bar}][afoo] ' cant compile u' fn[&optional[abc]]a ' cant compile u' fn[&optional[ 12 ]] list 12 '
def connection info for db or uri if db or uri startswith 'postgresql //' 'postgres //' us urlparse urlsplit db or uri if len us path > 1 db name us path[ 1 ]elif us username db name us usernameelse db name us hostnamereturn db name {'dsn' db or uri} connection info {'database' db or uri}for p in 'host' 'port' 'user' 'password' cfg tools config[ 'db ' + p ]if cfg connection info[p] cfgreturn db or uri connection info
def connection info for db or uri if db or uri startswith 'postgresql //' 'postgres //' us urlparse urlsplit db or uri if len us path > 1 db name us path[ 1 ]elif us username db name us usernameelse db name us hostnamereturn db name {'dsn' db or uri} connection info {'database' db or uri}for p in 'host' 'port' 'user' 'password' cfg tools config[ 'db ' + p ]if cfg connection info[p] cfgreturn db or uri connection info
def stl case activity owner group table row db current dbs 3 db current s3 dbstable s3 db org servicertable stable with alias 'root service' left [stable on stable id table service id rtable on rtable id stable root service ]query table id row[table id] row db query select rtable name left left limitby 0 1 first if not row return Noneroot service name row nameif not root service name return Noneif root service name INDIVIDUAL SUPPORT owner group uuid 'CASE MANAGEMENT'elif root service name MENTAL HEALTH owner group uuid 'MENTAL HEALTH'else owner group uuid 'GROUP ACTIVITIES'gtable current auth settings table groupquery gtable uuid owner group uuid & gtable deleted True group db query select gtable id limitby 0 1 first return group id if group else None
def resolve Schema schema schema Store result copy deepcopy schema resolver Local Ref Resolver base uri '' referrer schema store schema Store def resolve obj if isinstance obj list for item in obj resolve item returnif isinstance obj dict if '$ref' in obj with resolver resolving obj[u'$ref'] as resolved resolve resolved obj clear obj update resolved else for value in obj values resolve value resolve result result['$schema'] 'http //json-schema org/draft- 04 /schema#'return result
def resolve Schema schema schema Store result copy deepcopy schema resolver Local Ref Resolver base uri '' referrer schema store schema Store def resolve obj if isinstance obj list for item in obj resolve item returnif isinstance obj dict if '$ref' in obj with resolver resolving obj[u'$ref'] as resolved resolve resolved obj clear obj update resolved else for value in obj values resolve value resolve result result['$schema'] 'http //json-schema org/draft- 04 /schema#'return result
@dispatch object def scrub keys o raise Not Implemented Error 'scrub keysnotimplementedfortype%r' % type o name
@dispatch object def scrub keys o raise Not Implemented Error 'scrub keysnotimplementedfortype%r' % type o name
def repr strength strength return {REQUIRED u' Required' STRONG u' Strong' MEDIUM u' Medium' WEAK u' Weak'}[strength]
def requires auth func @wraps func def wrapper self *args **kwargs if self token is None or self token expired self login elif self token needs refresh self refresh token return func self *args **kwargs return wrapper
def md 5 sum filen with open filen 'rb' as fileh md 5 hashlib md 5 fileh read return md 5 hexdigest
def get Sim State try status '?'m Context autoclass 'android content Context' python Activity autoclass 'org renpy android Python Service' Telephony Manager autoclass 'android telephony Telephony Manager' telephony Manager cast 'android telephony Telephony Manager' python Activity m Service get System Service m Context TELEPHONY SERVICE sim State telephony Manager get Sim State if sim State Telephony Manager SIM STATE UNKNOWN status 'unknown'elif sim State Telephony Manager SIM STATE ABSENT status 'absent'elif sim State Telephony Manager SIM STATE PIN REQUIRED status 'pin required'elif sim State Telephony Manager SIM STATE PUK REQUIRED status 'puk required'elif sim State Telephony Manager SIM STATE NETWORK LOCKED status 'network locked'elif sim State Telephony Manager SIM STATE READY status 'ready'return statusexcept Exception as e return None
def get tab registry win id tab id if tab id is None raise Value Error ' Gottab id None win id{} ' format win id if tab id 'current' and win id is None app get 'app' window app active Window if window is None or not hasattr window 'win id' raise Registry Unavailable Error 'tab' win id window win idelif win id is not None window window registry[win id]else raise Type Error 'windowis Nonewithscopetab ' if tab id 'current' tabbed browser get 'tabbed-browser' scope 'window' window win id tab tabbed browser current Widget if tab is None raise Registry Unavailable Error 'window' tab id tab tab idtab registry get 'tab-registry' scope 'window' window win id try return tab registry[tab id] registryexcept Attribute Error raise Registry Unavailable Error 'tab'
@register tagdef get media prefix parser token return Prefix Node handle token parser token 'MEDIA URL'
def get env for subprocess command env os environ copy if 'PYTHONPATH' in env del env['PYTHONPATH']return env
def pause execution message ' Testexecutionpaused Press O Ktocontinue ' Message Dialog message show
def terminal size file None if file is None file get stdout try s struct pack str u'HHHH' 0 0 0 0 x fcntl ioctl file termios TIOCGWINSZ s lines width xpixels ypixels struct unpack str u'HHHH' x if lines > 12 lines - 6if width > 10 width - 1if lines < 0 or width < 0 raise Exception u'unabletogetterminalsize' return lines width except Exception try return int os environ get u'LINES' int os environ get u'COLUMNS' except Type Error lines conf max lineswidth conf max widthif lines is None lines 25 if width is None width 80 return lines width
def server maintenance global EVENNIA MAINTENANCE COUNT FLUSH CACHE GAMETIME MODUL Eif not FLUSH CACHE from evennia utils idmapper models import conditional flush as FLUSH CACH Eif not GAMETIME MODULE from evennia utils import gametime as GAMETIME MODULE MAINTENANCE COUNT + 1now time time if MAINTENANCE COUNT 1 GAMETIME MODULE SERVER START TIME now GAMETIME MODULE SERVER RUNTIME Server Config objects conf 'runtime' default 0 0 else GAMETIME MODULE SERVER RUNTIME + 60 0 GAMETIME MODULE SERVER RUNTIME LAST UPDATED now Server Config objects conf 'runtime' GAMETIME MODULE SERVER RUNTIME if MAINTENANCE COUNT % 300 0 FLUSH CACHE IDMAPPER CACHE MAXSIZE if MAINTENANCE COUNT % 3600 0 evennia Script DB objects validate if MAINTENANCE COUNT % 3700 0 evennia CHANNEL HANDLER update
def Find Server In Mapping mapping hashed server list list mapping servers val Bisect Hash List server list 0 len server list - 1 hashed indexreturn val
def test default conv img theano tensor ftensor 4 fil theano tensor ftensor 4 c theano tensor nnet conv 2 d img fil f theano function [img fil] c mode theano mode if cuda dnn dnn available assert any [isinstance a op Gpu Dnn Conv for a in f maker fgraph apply nodes] else assert any [isinstance a op cuda blas Gpu Corr MM for a in f maker fgraph apply nodes]
def escape script text return SCRIPT RE sub u'<-\\ 1 /script>' text
def escape script text return SCRIPT RE sub u'<-\\ 1 /script>' text
def test repo fs client repository None try nodes client snapshot verify repository repository repository ['nodes']logger debug ' Allnodescanwritetotherepository' logger debug ' Nodeswithverifiedrepositoryaccess {0 }' format nodes except Exception as e try if e status code 404 msg '--- Repository"{ 0 }"notfound Error {1 } {2 }' format repository e status code e error else msg '--- Gota{ 0 }responsefrom Elasticsearch Errormessage {1 }' format e status code e error except Attribute Error msg '--- Errormessage {0 }' format e raise Action Error ' Failedtoverifyallnodeshaverepositoryaccess {0 }' format msg
def next regular target if target < 6 return targetif not target & target - 1 return targetmatch float 'inf' p5 1while p5 < target p35 p5 while p35 < target quotient - - target // p35 try p2 2 ** quotient - 1 bit length except Attribute Error p2 2 ** bit length 26 quotient - 1 N p2 * p35 if N target return Nelif N < match match Np 35 * 3if p35 target return p35 if p35 < match match p35 p 5 * 5if p5 target return p5 if p5 < match match p5 return match
def thetagrids *args **kwargs ax gca if not isinstance ax Polar Axes raise Runtime Error 'rgridsonlydefinedforpolaraxes' if len args 0 lines ax xaxis get ticklines labels ax xaxis get ticklabels else lines labels ax set thetagrids *args **kwargs draw if interactive return silent list ' Line 2 Dthetagridline' lines silent list ' Textthetagridlabel' labels
@register filterdef render inlines value return inlines value
def is column based fname sep ' DCTB ' skip 0 is multi byte False headers get headers fname sep is multi byte is multi byte count 0if not headers return Falsefor hdr in headers[skip ] if hdr and hdr[ 0 ] and not hdr[ 0 ] startswith '#' if len hdr > 1 count len hdr breakif count < 2 return Falsefor hdr in headers[skip ] if hdr and hdr[ 0 ] and not hdr[ 0 ] startswith '#' if len hdr count return Falsereturn True
def is leap year builder year val actual year builder add year val Constant int DATETIME 64 1970 multiple of 4 cgutils is null builder builder and actual year Constant int DATETIME 64 3 not multiple of 100 cgutils is not null builder builder srem actual year Constant int DATETIME 64 100 multiple of 400 cgutils is null builder builder srem actual year Constant int DATETIME 64 400 return builder and multiple of 4 builder or not multiple of 100 multiple of 400
def is valid hostname hostname return re match '^[a-z A-Z 0 - 9 -]+$' hostname is not None
def resolve model model path module path model name model path rsplit ' ' 1 module importlib import module module path model getattr module model name return model
def build filter properties scheduler hints forced host forced node instance type filter properties dict scheduler hints scheduler hints filter properties['instance type'] instance typeif forced host filter properties['force hosts'] [forced host]if forced node filter properties['force nodes'] [forced node]return filter properties
def list name add match stamp False prune 0 ret {'name' name 'changes' {} 'comment' '' 'result' True}if not isinstance add list add add split ' ' if name not in reg reg [name] {} reg [name]['val'] []for event in events try event data event['data']['data']except Key Error event data event['data']if salt utils expr match event['tag'] match item {}for key in add if key in event data item[key] event data[key]if stamp is True item['time'] event['data'][' stamp'] reg [name]['val'] append item if prune > 0 reg [name]['val'] reg [name]['val'][ prune]return ret
def get quote state token quote char prev char Nonefor idx cur char in enumerate token if idx > 0 prev char token[ idx - 1 ]if cur char in '"\'' and prev char '\\' if quote char if cur char quote char quote char Noneelse quote char cur charreturn quote char
def get quote state token quote char prev char Nonefor idx cur char in enumerate token if idx > 0 prev char token[ idx - 1 ]if cur char in '"\'' and prev char '\\' if quote char if cur char quote char quote char Noneelse quote char cur charreturn quote char
def get quote state token quote char prev char Nonefor idx cur char in enumerate token if idx > 0 prev char token[ idx - 1 ]if cur char in '"\'' and prev char '\\' if quote char if cur char quote char quote char Noneelse quote char cur charreturn quote char
def gluster xml cmd if get minor version < 6 result salt ['cmd run'] 'script-q-c"gluster--xml--mode script"' stdin '{ 0 }\n\x 04 ' format cmd else result salt ['cmd run'] 'gluster--xml--mode script' stdin '{ 0 }\n' format cmd try root ET fromstring gluster output cleanup result except ET Parse Error raise Command Execution Error '\n' join result splitlines [ -1 ] if gluster ok root output root find 'output' if output is not None log info ' Glustercall"{ 0 }"succeeded {1 }' format cmd root find 'output' text else log info ' Glustercall"{ 0 }"succeeded' format cmd else log error ' Failedglustercall {0 } {1 }' format cmd root find 'op Errstr' text return root
def create service credentials Google Credentials get application default return discovery build 'storage' 'v 1 ' credentials credentials
@hook 'after request' def security headers json header True response headers[' Server'] ' Server'response headers['X- Content- Type- Options'] 'nosniff'response headers['X- Frame- Options'] 'DENY'response headers['X-XSS- Protection'] '1 mode block'response headers[' Pragma'] 'no-cache'response headers[' Cache- Control'] 'no-cache'response headers[' Expires'] '0 'if json header response content type 'application/json charset UTF- 8 '
@register filterdef timesince or never dt default None if default is None default ' Never' if isinstance dt datetime date return timesince dt else return default
@pytest mark parametrize 'reserved code' RESERVED PROJECT CODES @pytest mark django dbdef test create project reserved code english reserved code with pytest raises Validation Error Project code reserved code fullname 'whatever' source language english save reserved code with padding '%s' % reserved code with pytest raises Validation Error Project code reserved code with padding fullname 'whatever' source language english save
def privileged original @wraps original def permission Checker self *args **kwargs if original name not in self permissions raise IO Error EPERM ' Operationnotpermitted' return original self *args **kwargs return permission Checker
def create models for thread and first message exploration id state name original author id subject text has suggestion thread id feedback models Feedback Thread Model generate new thread id exploration id thread feedback models Feedback Thread Model create exploration id thread id thread exploration id exploration idthread state name state namethread original author id original author idthread status feedback models STATUS CHOICES OPE Nthread subject subjectthread has suggestion has suggestionthread put create message exploration id thread id original author id feedback models STATUS CHOICES OPEN subject text return thread id
def setup platform hass config add devices discovery info None name config get CONF NAME heater entity id config get CONF HEATER sensor entity id config get CONF SENSOR min temp config get CONF MIN TEMP max temp config get CONF MAX TEMP target temp config get CONF TARGET TEMP ac mode config get CONF AC MODE min cycle duration config get CONF MIN DUR tolerance config get CONF TOLERANCE add devices [ Generic Thermostat hass name heater entity id sensor entity id min temp max temp target temp ac mode min cycle duration tolerance ]
def get eol chars text for eol chars os name in EOL CHARS if text find eol chars > -1 return eol chars
def worker disable worker lbn profile 'default' return worker ctl worker lbn 'd' profile
def worker disable worker lbn profile 'default' return worker ctl worker lbn 'd' profile
def scan postfix smtpd line date log collector m re match 'NOQUEUE reject RCP Tfrom *? *? from < *? >to < *? >' log if m message sender recipient m groups if recipient in collector['real mail addresses'] if ' Recipientaddressrejected Greylisted' in message returnm re search ' Clienthost\\[ *? \\]blockedusingzen spamhaus org * ' message if m message 'ipblocked ' + m group 2 m re search ' Senderaddress\\[ *@ * \\]blockedusingdbl spamhaus org * ' message if m message 'domainblocked ' + m group 2 collector['rejected-mail'] setdefault recipient [] append date sender message
def ec 2 credentials delete user id None name None access key None profile None **connection args kstone auth profile **connection args if name user id user get name name profile None **connection args [name]['id']if not user id return {' Error' ' Couldnotresolve User ID'}kstone ec 2 delete user id access key return 'ec 2 key"{ 0 }"deletedunderuserid"{ 1 }"' format access key user id
def combine result prev if isinstance prev tuple list if len prev 3 raise Assertion Error u'combine withlength%d' % len prev combined max prev[ 0 ] result[ 0 ] combine prev[ 1 ] result[ 1 ] combine prev[ 2 ] result[ 2 ] elif prev and result combined prev + u'\n\n' + result elif prev combined prevelse combined resultreturn combined
def read Header file while ord file read 1 26 pass
def create resource ext mgr return wsgi Resource Attachments Controller ext mgr
def compare files self result file ref file self assert Equal result file src ref file src self assert Equal result file dest ref file dest self assert Equal result file compare key ref file compare key self assert Equal result file size ref file size self assert Equal result file last update ref file last update self assert Equal result file src type ref file src type self assert Equal result file dest type ref file dest type self assert Equal result file operation name ref file operation name
def compare files self result file ref file self assert Equal result file src ref file src self assert Equal result file dest ref file dest self assert Equal result file compare key ref file compare key self assert Equal result file size ref file size self assert Equal result file last update ref file last update self assert Equal result file src type ref file src type self assert Equal result file dest type ref file dest type self assert Equal result file operation name ref file operation name
def get public ip block module driver network domain block id False base ip False if block id is not False try block driver ex get public ip block block id except Dimension Data API Exception e get exception if e code 'RESOURCE NOT FOUND' or e code 'UNEXPECTED ERROR' module exit json changed False msg ' Public IP Blockdoesnotexist' else module fail json msg ' Unexpectederrorwhileretrievingblock %s' % e code module fail json msg ' Errorretreving Public IP Block' + "'%s' %s" % block id e message else blocks list public ip blocks module driver network domain if blocks is not False block next block for block in blocks if block base ip base ip else module exit json changed False msg "I Pblockstartingwith'%s'doesnotexist " % base ip return block
def create https certificates ssl cert ssl key if not sabnzbd HAVE CRYPTOGRAPHY logging error T '%smissing' ' Python Cryptography' return Falsetry from sabnzbd utils certgen import generate key generate local certprivate key generate key key size 2048 output file ssl key cert generate local cert private key days valid 356 * 10 output file ssl cert LN u'SA Bnzbd' ON u'SA Bnzbd' CN u'SA Bnzbd' logging info ' Self-signedcertificatesgeneratedsuccessfully' except logging error T ' Errorcreating SS Lkeyandcertificate' logging info ' Traceback ' exc info True return Falsereturn True
def libvlc video get size p mi num f Cfunctions get 'libvlc video get size' None or Cfunction 'libvlc video get size' 1 1 2 2 None ctypes c int Media Player ctypes c uint ctypes POINTER ctypes c uint ctypes POINTER ctypes c uint return f p mi num
def serialize inventory inventory generation None data {field getattr inventory field for field in OUTPUT INVENTORY FIELDS}if generation data['resource provider generation'] generationreturn data
def getargspec obj if not callable obj raise Type Error '%sisnotcallable' % type obj try if inspect isfunction obj return inspect getargspec obj elif hasattr obj FUNC OBJ ATTR spec inspect getargspec getattr obj FUNC OBJ ATTR return inspect Arg Spec spec args[ 1] spec varargs spec keywords spec defaults elif inspect isclass obj return getargspec obj init elif isinstance obj object return getargspec obj call except Not Implemented Error passraise Not Implemented Error 'donotknowhowtogetargumentlistfor%s' % type obj
def test goto assignments keyword Script 'in' goto assignments
def test goto assignments keyword Script 'in' goto assignments
def weight function G weight if callable weight return weightif G is multigraph return lambda u v d min attr get weight 1 for attr in d values return lambda u v data data get weight 1
def change name command table session **kwargs utils rename command command table 'codedeploy' 'deploy'
def change name command table session **kwargs utils rename command command table 'codedeploy' 'deploy'
def change name command table session **kwargs utils rename command command table 'codedeploy' 'deploy'
def get Round value return round value
def job from request from digits webapp import schedulerjob id get request arg 'job id' if job id is None raise werkzeug exceptions Bad Request 'job idisarequiredfield' job scheduler get job job id if job is None raise werkzeug exceptions Not Found ' Jobnotfound' else return job
def safe version version return version replace ' ' ' '
def dmp inject f u K front False f h dmp to dict f u {} v K ngens - 1 for f monom g in f items g g to dict for g monom c in g items if front h[ g monom + f monom ] celse h[ f monom + g monom ] cw u + v + 1 return dmp from dict h w K dom w
def dmp inject f u K front False f h dmp to dict f u {} v K ngens - 1 for f monom g in f items g g to dict for g monom c in g items if front h[ g monom + f monom ] celse h[ f monom + g monom ] cw u + v + 1 return dmp from dict h w K dom w
def jenkins build results in Queue None builds None strats []if in Queue is None in Queue booleans strats append just pmap without builds fixed dictionaries dict in Queue in Queue if builds is None or builds is NO BUILDS strats append without builds if builds is None builds lists jenkins builds average size 1 if builds is not NO BUILDS with builds fixed dictionaries dict in Queue in Queue builds builds property dictionaries text max size 2 text max size 2 average size 1 max size 2 strats append with builds return one of *strats
def jenkins build results in Queue None builds None strats []if in Queue is None in Queue booleans strats append just pmap without builds fixed dictionaries dict in Queue in Queue if builds is None or builds is NO BUILDS strats append without builds if builds is None builds lists jenkins builds average size 1 if builds is not NO BUILDS with builds fixed dictionaries dict in Queue in Queue builds builds property dictionaries text max size 2 text max size 2 average size 1 max size 2 strats append with builds return one of *strats
def virtual if not salt utils which 'rpm' return False ' Therpmexecutionmodulefailedtoload rpmbinaryisnotinthepath ' try os grain grains ['os'] lower os family grains ['os family'] lower except Exception return False ' Therpmexecutionmodulefailedtoload failedtodetectosoros familygrains ' enabled 'amazon' 'xcp' 'xenserver' ' Virtuozzo Linux' if os family in ['redhat' 'suse'] or os grain in enabled return virtualname return False ' Therpmexecutionmodulefailedtoload onlyavailableonredhat/susetypesystemsoramazon xcporxenserver '
def serialize value if isinstance value float return unicode value upper elif isinstance value bool return unicode value lower return unicode value
@synchronized SAVE CONFIG LOCK def read config path return read config path
@synchronized SAVE CONFIG LOCK def read config path return read config path
def disconnect receiver signal Any sender Any weak True if signal is None raise errors Dispatcher Type Error ' Signalcannotbe None receiver %rsender %r ' % receiver sender if weak receiver saferef safe Ref receiver senderkey id sender try signals connections[senderkey]receivers signals[signal]except Key Error raise errors Dispatcher Key Error ' Noreceiversfoundforsignal%rfromsender%r' % signal sender try remove Old Back Refs senderkey signal receiver receivers except Value Error raise errors Dispatcher Key Error ' Noconnectiontoreceiver%sforsignal%sfromsender%s' % receiver signal sender cleanup Connections senderkey signal
def disconnect receiver signal Any sender Any weak True if signal is None raise errors Dispatcher Type Error ' Signalcannotbe None receiver %rsender %r ' % receiver sender if weak receiver saferef safe Ref receiver senderkey id sender try signals connections[senderkey]receivers signals[signal]except Key Error raise errors Dispatcher Key Error ' Noreceiversfoundforsignal%rfromsender%r' % signal sender try remove Old Back Refs senderkey signal receiver receivers except Value Error raise errors Dispatcher Key Error ' Noconnectiontoreceiver%sforsignal%sfromsender%s' % receiver signal sender cleanup Connections senderkey signal
def jsonrpc error id code message data None return {'jsonrpc' '2 0' 'error' {'code' code 'message' message 'data' data} 'id' id}
def update viewer dataset pv vis batch rows cols mapback hasattr dataset 'mapback for viewer' display batch dataset adjust for viewer vis batch if display batch ndim 2 display batch dataset get topological view display batch if mapback mapped batch get mapped batch dataset vis batch for i in xrange rows row start cols * i for j in xrange cols pv add patch display batch[ row start + j ] rescale False if mapback pv add patch mapped batch[ row start + j ] rescale False
def build request path body '' http headers None unused scheme unused netloc path query unused fragment urlparse urlsplit path env {'SERVER PORT' 42 'REQUEST METHOD' 'GET' 'SERVER NAME' 'localhost' 'HTTP CONTENT TYPE' 'application/json' 'PATH INFO' path 'wsgi input' c String IO String IO body }if query env['QUERY STRING'] queryif http headers for header value in http headers header 'HTTP %s' % header upper replace '-' ' ' env[header] valuecgi request api request Api Request env return cgi request
def virtual if salt utils which 'brew' and grains ['os'] ' Mac OS' return virtualname return False ' Thebrewmodulecouldnotbeloaded brewnotfoundorgrainos Mac OS'
def set enabled all objects enable for obj in objects obj set Enabled enable
def set enabled all objects enable for obj in objects obj set Enabled enable
def deprecated function instead if not isinstance function types Function Type return function@wraps function def wrap *args **kwargs warnings warn ' Deprecated use%sinstead' % instead Py GI Deprecation Warning return function *args **kwargs return wrap
def blackwhite clip RGB [1 1 1] preserve luminosity True if RGB 'CRT phosphor' RGB [0 2125 0 7154 0 0721 ] R G B 1 0 * np array RGB / sum RGB if preserve luminosity else 1 def fl im im R * im[ 0] + G * im[ 1] + B * im[ 2] return np dstack 3 * [im] astype 'uint 8 ' return clip fl image fl
def logging original @wraps original def logger self request **route Arguments logger get logger self action REQUEST logger request path request path method request method incident Identifier action serialize task id with action context d Deferred Context original self request **route Arguments def failure reason if reason check Bad Request code reason value coderesult reason value resultelse write Failure reason logger LOG SYSTEM code INTERNAL SERVER ERRO Rresult incident Identifierrequest set Response Code code request response Headers set Raw Headers 'content-type' ['application/json'] return dumps result d add Errback failure d add Action Finish return d resultreturn logger
def logging original @wraps original def logger self request **route Arguments logger get logger self action REQUEST logger request path request path method request method incident Identifier action serialize task id with action context d Deferred Context original self request **route Arguments def failure reason if reason check Bad Request code reason value coderesult reason value resultelse write Failure reason logger LOG SYSTEM code INTERNAL SERVER ERRO Rresult incident Identifierrequest set Response Code code request response Headers set Raw Headers 'content-type' ['application/json'] return dumps result d add Errback failure d add Action Finish return d resultreturn logger
def test comments feature Feature from string FEATURE 10 assert equals feature max length 55
def configs from dir conf dir for filename in sorted os listdir conf dir if filename startswith ' ' or not filename endswith ' ini' continue LOG debug ' Loadingconfigurationfrom %s' % filename try conf configobj Config Obj os path join conf dir filename except configobj Config Obj Error as ex LOG error " Errorinconfigurationfile'%s' %s" % os path join conf dir filename ex raiseconf['DEFAULT'] dict desktop root get desktop root build dir get build dir yield conf
def setup platform hass config add devices discovery info None gtfs dir hass config path DEFAULT PATH data config get CONF DATA origin config get CONF ORIGIN destination config get CONF DESTINATION name config get CONF NAME if not os path exists gtfs dir os makedirs gtfs dir if not os path exists os path join gtfs dir data LOGGER error ' Thegiven GTF Sdatafile/folderwasnotfound ' return Falseimport pygtfssplit file name os path splitext data sqlite file '{} sqlite' format split file name[ 0 ] joined path os path join gtfs dir sqlite file gtfs pygtfs Schedule joined path if len gtfs feeds < 1 pygtfs append feed gtfs os path join gtfs dir data add devices [GTFS Departure Sensor gtfs name origin destination ]
def update axes image image axes image image axes set array image h w image shape[ 2]image axes set extent 0 w h 0
def get videos course videos list get videos for course course id Video Sort Field created Sort Direction desc for video in videos video['status'] convert video status video return videos
def get validator segmentation type return supported[segmentation type]
def rewrite single shorthand state decl data for sid states in six iteritems data if isinstance states six string types data[sid] {states []}
def virtual if 'zpool create' in salt return Trueelse return False '{ 0 }statemodulecanonlybeloadedonillumos Solaris Smart OS Free BSD Linux ' format virtualname
@taskdef pip packages with virtualenv return run u'pipinstall%s' % packages
@taskdef pip packages with virtualenv return run u'pipinstall%s' % packages
def getbranches tree if isinstance tree tuple name subtree treea [name]for st in subtree a extend getbranches st return areturn []
def persist uploads params if 'files' in params new files []for upload dataset in params['files'] f upload dataset['file data']if isinstance f Field Storage assert not isinstance f file String IO assert f file name '<fdopen>' local filename util mkstemp ln f file name 'upload file data ' f file close upload dataset['file data'] dict filename f filename local filename local filename elif type f dict and 'local filename' not in f raise Exception ' Uploadedfilewasencodedinawaynotunderstoodby Galaxy ' if upload dataset['url paste'] and upload dataset['url paste'] strip '' upload dataset['url paste'] is multi byte datatypes sniff stream to file String IO upload dataset['url paste'] prefix 'strio url paste ' else upload dataset['url paste'] Nonenew files append upload dataset params['files'] new filesreturn params
def test hashed install success script data tmpdir file url path to url data packages / 'simple- 1 0 tar gz' abspath with requirements file 'simple 2 1 0--hash sha 256 9336 af 72 ca 661 e 6336 eb 87 bc 7 de 3 e 8844 d 853 e 3848 c 2 b 9 bbd 2 e 8 bf 01 db 88 c 2 c 7 \n{simple}--hash sha 256 393043 e 672415891885 c 9 a 2 a 0929 b 1 af 95 fb 866 d 6 ca 016 b 42 d 2 e 6 ce 53619 b 653 ' format simple file url tmpdir as reqs file script pip install local '-r' reqs file abspath expect error False
def get Geometric Difference first second return max first second / min first second
def Is Test Filename filename if filename endswith ' test cc' or filename endswith ' unittest cc' or filename endswith ' regtest cc' return Trueelse return False
def safe union a b if not isinstance a list raise Type Error ' Expectedfirstargumenttobealist butgot' + str type a assert isinstance b list c []for x in a + b if x not in c c append x return c
def safe union a b if not isinstance a list raise Type Error ' Expectedfirstargumenttobealist butgot' + str type a assert isinstance b list c []for x in a + b if x not in c c append x return c
def no debug mode fn @functools wraps fn def wrapped *args **kwargs orig mode config modeif orig mode in [' Debug Mode' 'DEBUG MODE'] config mode 'FAST RUN'try return fn *args **kwargs finally config mode orig modereturn wrapped
def warn config absent sections argument log printer if all argument not in section for section in sections values log printer warn 'coalawillnotrunanyanalysis Didyouforgettogivethe`--{}`argument?' format argument return Truereturn False
def unpickle Function fully Qualified Name from twisted python reflect import named Anyreturn named Any fully Qualified Name
@non atomic requestsdef legacy fulltheme redirects request category None url request get full path replace '/full-themes' '/complete-themes' return redirect url permanent not settings DEBUG
@non atomic requestsdef legacy fulltheme redirects request category None url request get full path replace '/full-themes' '/complete-themes' return redirect url permanent not settings DEBUG
def get Tricomplex Times Other first Tricomplex other Tricomplex tricomplex Times Other [get Tricomplex Times Column first Tricomplex other Tricomplex[ 0 ] ]tricomplex Times Other append get Tricomplex Times Column first Tricomplex other Tricomplex[ 1 ] tricomplex Times Other append get Tricomplex Times Column first Tricomplex other Tricomplex[ 2 ] + first Tricomplex[ 2 ] return tricomplex Times Other
def access sandbox name asset ids result util oauthgetm '%s/%s' % 'sandbox' 'access' {'sandbox' sandbox name 'id' asset ids} return result['response']['assets']
def access sandbox name asset ids result util oauthgetm '%s/%s' % 'sandbox' 'access' {'sandbox' sandbox name 'id' asset ids} return result['response']['assets']
def access sandbox name asset ids result util oauthgetm '%s/%s' % 'sandbox' 'access' {'sandbox' sandbox name 'id' asset ids} return result['response']['assets']
def identity Pump Policy queue target while queue bytes queue get if bytes is None breaktarget data Received bytes
def identity Pump Policy queue target while queue bytes queue get if bytes is None breaktarget data Received bytes
def test maybe update geometry completionview config stub qtbot with qtbot assert Not Emitted completionview update geometry completionview maybe update geometry config stub data['completion']['shrink'] Truewith qtbot wait Signal completionview update geometry completionview maybe update geometry
def get Year Cent RE cent 0 3 distance 3 now My Time now My Time alternate Now cent lambda year f cent[ 0 ] t cent[ 1 ] str year [f t] exprset set cent now[ 0 ] year + i for i in -1 distance if len now and now[ 1 ] exprset set cent now[ 1 ] year + i for i in -1 distance return ' ? %s ' % ' ' join exprset if len exprset > 1 else '' join exprset
def CTRL c assert '@' < c < ' ' return chr ord c - ord '@'
def get thumbnail path image path width height if image path is None return None ext os path splitext image path if ext in [' png' ' jpg' ' jpeg' ' gif'] thumbnail path image pathelse fingerprint cache hash digest '{width}x{height}\n{image path}' format **locals thumbnail path os path join temp path fingerprint + IMAGE EXTENSION validate thumbnail currentness image path thumbnail path return thumbnail path
def sinhm A A asarray square A return maybe real A 0 5 * expm A - expm - A
def get binding info hostheader '' ipaddress '*' port 80 ret '{ 0 } {1 } {2 }' format ipaddress port hostheader replace '' '' return ret
def preprocess expr func None hint ' Integral' derivs expr atoms Derivative if not func funcs set union *[d atoms Applied Undef for d in derivs] if len funcs 1 raise Value Error ' Thefunctioncannotbeautomaticallydetectedfor%s ' % expr func funcs pop fvars set func args if hint is None return expr func reps [ d d doit for d in derivs if not hint endswith ' Integral' or d has func or set d variables & fvars ]eq expr subs reps return eq func
def get long description title ROOT os path abspath os path dirname file readme open os path join ROOT u'README rst' u'r' u'utf 8 ' read body tag u' Omitbadgesfromdocs'readme body start readme index body tag assert readme body startreadme body readme[ readme body start + len body tag ]changelog open os path join ROOT u'changelog rst' u'r' u'utf 8 ' read old tag u' Omitolderchangesfrompackage'changelog body end changelog index old tag assert changelog body endchangelog body changelog[ changelog body end]bars u' ' * len title long description u'\n% bars s\n% title s\n% bars s\n% readme body s\n\n% changelog body s\n\n Olderchangescanbefoundinthefulldocumentation \n' % locals return long description
def validate table table text font colors font colors len options [1 3 len table text ]if len font colors not in font colors len options raise exceptions Plotly Error ' Oops font colorsshouldbealistoflength 1 3orlen text '
def validate table table text font colors font colors len options [1 3 len table text ]if len font colors not in font colors len options raise exceptions Plotly Error ' Oops font colorsshouldbealistoflength 1 3orlen text '
def get taxa prevalence tax counts tax ratios apply along axis lambda x x / float sum x 0 tax counts lineage sums apply along axis lambda x sum x 1 tax ratios total count sum lineage sums prevalence lineage sums / float total count prevalence prevalence - min prevalence / max prevalence - min prevalence return prevalence
def get taxa prevalence tax counts tax ratios apply along axis lambda x x / float sum x 0 tax counts lineage sums apply along axis lambda x sum x 1 tax ratios total count sum lineage sums prevalence lineage sums / float total count prevalence prevalence - min prevalence / max prevalence - min prevalence return prevalence
@pytest mark parametrize 'parallel' [ True False] def test empty quotes parallel read basic table read basic 'ab\n 1 ""\n 2 ""' parallel parallel expected Table [[ 1 2] [0 0]] names 'a' 'b' assert table equal table expected
@pytest mark parametrize 'parallel' [ True False] def test empty quotes parallel read basic table read basic 'ab\n 1 ""\n 2 ""' parallel parallel expected Table [[ 1 2] [0 0]] names 'a' 'b' assert table equal table expected
def generate binary structure rank connectivity if connectivity < 1 connectivity 1if rank < 1 if connectivity < 1 return numpy array 0 dtype bool else return numpy array 1 dtype bool output numpy fabs numpy indices [3 ] * rank - 1 output numpy add reduce output 0 return numpy asarray output < connectivity dtype bool
def clear dag task instances session settings Session TI Task Instancetis session query TI filter TI dag id in DAG IDS all for ti in tis logging info ' Deleting Task Instance {}' format ti session delete ti session commit
@box Index Type def box index typ val c index make index c context c builder typ value val classobj c pyapi unserialize c pyapi serialize object typ pyclass arrayobj c box typ as array index data indexobj c pyapi call function objargs classobj arrayobj return indexobj
def endpoint from view func view func assert view func is not None 'expectedviewfuncifendpointisnotprovided 'return view func name
def resource list name def make responder list all def responder return app response class json generator list all root name expand is expand mimetype 'application/json' responder name 'all {0 }' format name return responderreturn make responder
def load macros module name def import module module name module name ' import amodule avoidingrecursions'if module module name import module for module in CORE MACROS import module if module name startswith 'hy core' returnfor module in EXTRA MACROS import module
def survey get Question From Code code series id None s3 db current s3 dbsertable s3 db survey seriesq ltable s3 db survey question listqsntable s3 db survey questionif series id None query sertable id series id & q ltable template id sertable template id & q ltable question id qsntable id & qsntable code code else query q ltable template id sertable template id & q ltable question id qsntable id & qsntable code code record current db query select qsntable id qsntable code qsntable name qsntable type q ltable posn limitby 0 1 first question {}if record None question row record survey questionquestion['qstn id'] question row idquestion['code'] question row codequestion['name'] question row namequestion['type'] question row typequestion['posn'] record survey question list posnreturn question
def sm flavor get context sm flavor return IMPL sm flavor get context sm flavor
def lltrace selector def traced cls *args **kwargs ret selector cls *args **kwargs if TRACED OIDS is not None trace selector cls selector args ret return rettraced name selector name traced doc selector doc return traced
def move file source dest import shutilshutil copy source dest remove file source
def rootname filename if os path sep not in filename return ''else file root filename split os path sep 1 return file root
def slice shape lst slices if atomp lst return []return [len lst[slices[ 0 ]] ] + slice shape lst[ 0 ] slices[ 1 ]
def slice shape lst slices if atomp lst return []return [len lst[slices[ 0 ]] ] + slice shape lst[ 0 ] slices[ 1 ]
def connect discussion signals post save connect count discussions handler sender comment model dispatch uid COMMENT PS COUNT DISCUSSIONS pre delete connect count discussions handler sender comment model dispatch uid COMMENT PD COUNT DISCUSSIONS comment was flagged connect count discussions handler sender comment model dispatch uid COMMENT WF COUNT DISCUSSIONS comment was posted connect count comments handler sender comment model dispatch uid COMMENT WP COUNT COMMENTS pingback was posted connect count pingbacks handler sender comment model dispatch uid PINGBACK WF COUNT PINGBACKS trackback was posted connect count trackbacks handler sender comment model dispatch uid TRACKBACK WF COUNT TRACKBACKS
def connect discussion signals post save connect count discussions handler sender comment model dispatch uid COMMENT PS COUNT DISCUSSIONS pre delete connect count discussions handler sender comment model dispatch uid COMMENT PD COUNT DISCUSSIONS comment was flagged connect count discussions handler sender comment model dispatch uid COMMENT WF COUNT DISCUSSIONS comment was posted connect count comments handler sender comment model dispatch uid COMMENT WP COUNT COMMENTS pingback was posted connect count pingbacks handler sender comment model dispatch uid PINGBACK WF COUNT PINGBACKS trackback was posted connect count trackbacks handler sender comment model dispatch uid TRACKBACK WF COUNT TRACKBACKS
def get collection summary from model collection summary model return collection domain Collection Summary collection summary model id collection summary model title collection summary model category collection summary model objective collection summary model language code collection summary model tags collection summary model status collection summary model community owned collection summary model owner ids collection summary model editor ids collection summary model viewer ids collection summary model contributor ids collection summary model contributors summary collection summary model version collection summary model node count collection summary model collection model created on collection summary model collection model last updated
def rowadd matlist index 1 index 2 k K result []for i in range len matlist[index 1 ] matlist[index 1 ][i] matlist[index 1 ][i] + k * matlist[index 2 ][i] return matlist
def rowadd matlist index 1 index 2 k K result []for i in range len matlist[index 1 ] matlist[index 1 ][i] matlist[index 1 ][i] + k * matlist[index 2 ][i] return matlist
@pytest mark networkdef test install package which contains dev in name script result script pip 'install' 'django-devserver 0 0 4' devserver folder script site packages / 'devserver' egg info folder script site packages / 'django devserver- 0 0 4-py%s egg-info' % pyversion assert devserver folder in result files created str result stdout assert egg info folder in result files created str result
@commands u'wt' u'define' u'dict' @example u' wtbailiwick' def wiktionary bot trigger word trigger group 2 if word is None bot reply u' Youmusttellmewhattolookup ' return etymology definitions wikt word if not definitions bot say u" Couldn'tgetanydefinitionsfor%s " % word returnresult format word definitions if len result < 150 result format word definitions 3 if len result < 150 result format word definitions 5 if len result > 300 result result[ 295 ] + u'[ ]' bot say result
@login requireddef follow request username template name 'relationships/relationship add confirm html' success template name 'relationships/relationship add success html' content type 'text/html' to user get object or 404 User username username from user request usernext request GET get 'next' None if request method 'POST' relationship created Relationship objects get or create from user from user to user to user if request is ajax response {'success' ' Success' 'to user' {'username' to user username 'user id' to user pk} 'from user' {'username' from user username 'user id' from user pk}}return Http Response json dumps response content type 'application/json' if next return Http Response Redirect next template name success template namecontext {'to user' to user 'next' next}return render to response template name context context instance Request Context request content type content type
def get sync num KEY datetime date today cache add KEY 1 return cache get KEY
def hsv value image filter image *args **kwargs hsv color rgb 2 hsv image[ 3] value hsv[ 2] copy value image filter value *args **kwargs hsv[ 2] convert value hsv dtype return color hsv 2 rgb hsv
@requires application 'pyqt 4 ' has ['uic'] def test qt designer from Py Qt 4 import Qt Gui uicapp Qt Gui Q Application instance if app is None app Qt Gui Q Application [] fname op join op dirname file 'qt-designer ui' with warnings catch warnings record True Window Template Template Base Class uic load Ui Type fname class Main Window Template Base Class def init self Template Base Class init self self ui Window Template self ui setup Ui self win Main Window try canvas win ui canvascanvas central widget add view win show app process Events finally win close return win
@requires application 'pyqt 4 ' has ['uic'] def test qt designer from Py Qt 4 import Qt Gui uicapp Qt Gui Q Application instance if app is None app Qt Gui Q Application [] fname op join op dirname file 'qt-designer ui' with warnings catch warnings record True Window Template Template Base Class uic load Ui Type fname class Main Window Template Base Class def init self Template Base Class init self self ui Window Template self ui setup Ui self win Main Window try canvas win ui canvascanvas central widget add view win show app process Events finally win close return win
@project signals privacy set public connectdef queue first public project email user node meeting creation if not meeting creation sent mail mails Queued Mail find Q 'user' 'eq' user & Q 'sent at' 'ne' None & Q 'email type' 'eq' mails NEW PUBLIC PROJECT TYPE if not sent mail count mails queue mail to addr user username mail mails NEW PUBLIC PROJECT send at timezone now + settings NEW PUBLIC PROJECT WAIT TIME user user nid node id fullname user fullname project title node title
@project signals privacy set public connectdef queue first public project email user node meeting creation if not meeting creation sent mail mails Queued Mail find Q 'user' 'eq' user & Q 'sent at' 'ne' None & Q 'email type' 'eq' mails NEW PUBLIC PROJECT TYPE if not sent mail count mails queue mail to addr user username mail mails NEW PUBLIC PROJECT send at timezone now + settings NEW PUBLIC PROJECT WAIT TIME user user nid node id fullname user fullname project title node title
def bitarray to bool data length results []for byte in data if six PY 2 byte ord byte for bit no in range 7 -1 -1 bit byte & 1 << bit no bit bit 0 results append bit if len results length breakif len results length breakreturn np array results dtype u'b 1 '
def bitarray to bool data length results []for byte in data if six PY 2 byte ord byte for bit no in range 7 -1 -1 bit byte & 1 << bit no bit bit 0 results append bit if len results length breakif len results length breakreturn np array results dtype u'b 1 '
@click command u'make-app' @click argument u'destination' @click argument u'app name' def make app destination app name from frappe utils boilerplate import make boilerplatemake boilerplate destination app name
@register filterdef bootstrap setting value return get bootstrap setting value
@register filterdef bootstrap setting value return get bootstrap setting value
@register filterdef bootstrap setting value return get bootstrap setting value
def make runner scenarios pidlockfile scenarios make pidlockfile scenarios scenarios {'simple' {'pidlockfile scenario name' 'simple'} 'pidfile-locked' {'pidlockfile scenario name' 'exist-other-pid-locked'}}for scenario in scenarios values if 'pidlockfile scenario name' in scenario pidlockfile scenario pidlockfile scenarios pop scenario['pidlockfile scenario name'] scenario['pid'] pidlockfile scenario['pid']scenario['pidfile path'] pidlockfile scenario['path']scenario['pidfile timeout'] 23 scenario['pidlockfile scenario'] pidlockfile scenarioreturn scenarios
@require authorized admindef add facility teacher request title ' Addanewcoach' return facility user request new user True is teacher True title title
def get controller args for types func arg types args kwargs result args []result kwargs {}argspec inspect getargspec func names argspec args[ 1 ]for index name in enumerate names if name in kwargs try value kwargs[name]value type arg types[index]value cast argument value value type value type value value result kwargs[name] valueexcept Index Error LOG warning " Typedefinitionfor'%s'argumentof'%s'ismissing " name func name continuetry value args pop 0 value type arg types[index]value cast argument value value type value type value value result args append value except Index Error LOG warning " Typedefinitionfor'%s'argumentof'%s'ismissing " name func name return result args result kwargs
def Duplicate Flags flagnames None flag values gflags Flag Values for name in flagnames gflags DEFINE boolean name False ' Flagnamed%s' % name flag values flag values return flag values
@cython ccall@cython returns cython double def c call x return x
def load Examples path examples Raw safe load path get Content examples Map dict example['id'] example for example in examples Raw if len examples Raw len examples Map identifiers [example['id'] for example in examples Raw]duplicates list identifier for index identifier in enumerate identifiers if identifiers index identifier index raise Exception ' Duplicateidentifiersinexamplefile %r' % duplicates return examples Map
def close review request review request review request id description if review request status Review Request SUBMITTED logging warning u' Reviewrequest#%sisalreadysubmitted ' review request id returnif not review request public review request publish review request submitter review request close Review Request SUBMITTED description description logging debug u' Reviewrequest#%sissetto%s ' review request id review request status
def match DLL Arch filename if not is win return Truefrom lib import pefileglobal exe machine typeif exe machine type is None exe pe pefile PE sys executable fast load True exe machine type exe pe FILE HEADER Machineexe pe close pe pefile PE filename fast load True match arch pe FILE HEADER Machine exe machine type pe close return match arch
def match DLL Arch filename if not is win return Truefrom lib import pefileglobal exe machine typeif exe machine type is None exe pe pefile PE sys executable fast load True exe machine type exe pe FILE HEADER Machineexe pe close pe pefile PE filename fast load True match arch pe FILE HEADER Machine exe machine type pe close return match arch
def ip for event event eth dpid to str event dpid True split ' ' [0 ] replace '-' ' ' return Eth Addr eth
def parse linters linters result list for name in split csp str linters linter LINTERS get name if linter result append name linter else logging warn ' Linter`%s`notfound ' name return result
def main if len sys argv > 1 write Output '' join sys argv[ 1 ] else settings start Main Loop From Constructor get New Repository
def ownership required function None def decorator request *args **kwargs group get object or 404 Group slug kwargs['slug'] if request user is anonymous return Http Response Redirect reverse 'django contrib auth views login' if Group Member objects is owner group request user return function request *args **kwargs else raise Http 404 return decorator
def user can edit setting type user model return user has perm u'{} change {}' format model meta app label model meta model name
def user can edit setting type user model return user has perm u'{} change {}' format model meta app label model meta model name
def get profile model model Noneprofile string getattr settings 'AUTH PROFILE MODULE' None if profile string app label model label profile string split ' ' model apps get model app label model label return model
def get profile model model Noneprofile string getattr settings 'AUTH PROFILE MODULE' None if profile string app label model label profile string split ' ' model apps get model app label model label return model
def encrypt AES http request s http key m md 5 new m update http key http key m hexdigest http key str http key cipher AES new http key encrypted Encode AES cipher s return encrypted http key
def get Length Minus One Minimum One element List return max 1 len element List - 1
def history add paths state open state if HISTORY KEY not in state state[HISTORY KEY] set state[HISTORY KEY] add tuple paths save state state
def history add paths state open state if HISTORY KEY not in state state[HISTORY KEY] set state[HISTORY KEY] add tuple paths save state state
def history add paths state open state if HISTORY KEY not in state state[HISTORY KEY] set state[HISTORY KEY] add tuple paths save state state
def webserver for test test url path response content app Klein @app route url path def respond request return response contentfactory Site app resource endpoint server From String reactor 'tcp 0' listening endpoint listen factory def stop port port test add Cleanup port stop Listening return portlistening add Callback stop port return listening
def webserver for test test url path response content app Klein @app route url path def respond request return response contentfactory Site app resource endpoint server From String reactor 'tcp 0' listening endpoint listen factory def stop port port test add Cleanup port stop Listening return portlistening add Callback stop port return listening
@register simple tag takes context True def review request actions context content []for top level action in get top level actions try content append top level action render context except Exception logging exception u' Errorrenderingtop-levelaction%s' top level action action id return u'' join content
def is ignorable 404 uri if getattr settings 'IGNORABLE 404 STARTS' import warningswarnings warn ' The IGNORABLE 404 START Ssettinghasbeendeprecatedinfavorof IGNORABLE 404 URLS ' Deprecation Warning for start in settings IGNORABLE 404 STARTS if uri startswith start return Trueif getattr settings 'IGNORABLE 404 ENDS' import warningswarnings warn ' The IGNORABLE 404 END Ssettinghasbeendeprecatedinfavorof IGNORABLE 404 URLS ' Deprecation Warning for end in settings IGNORABLE 404 ENDS if uri endswith end return Truereturn any pattern search uri for pattern in settings IGNORABLE 404 URLS
def is ignorable 404 uri if getattr settings 'IGNORABLE 404 STARTS' import warningswarnings warn ' The IGNORABLE 404 START Ssettinghasbeendeprecatedinfavorof IGNORABLE 404 URLS ' Deprecation Warning for start in settings IGNORABLE 404 STARTS if uri startswith start return Trueif getattr settings 'IGNORABLE 404 ENDS' import warningswarnings warn ' The IGNORABLE 404 END Ssettinghasbeendeprecatedinfavorof IGNORABLE 404 URLS ' Deprecation Warning for end in settings IGNORABLE 404 ENDS if uri endswith end return Truereturn any pattern search uri for pattern in settings IGNORABLE 404 URLS
def is ignorable 404 uri if getattr settings 'IGNORABLE 404 STARTS' import warningswarnings warn ' The IGNORABLE 404 START Ssettinghasbeendeprecatedinfavorof IGNORABLE 404 URLS ' Deprecation Warning for start in settings IGNORABLE 404 STARTS if uri startswith start return Trueif getattr settings 'IGNORABLE 404 ENDS' import warningswarnings warn ' The IGNORABLE 404 END Ssettinghasbeendeprecatedinfavorof IGNORABLE 404 URLS ' Deprecation Warning for end in settings IGNORABLE 404 ENDS if uri endswith end return Truereturn any pattern search uri for pattern in settings IGNORABLE 404 URLS
def allpairs x return [ s f for i f in enumerate x for s in x[ i + 1 ]]
def Handle Request Directly request client address Base HTTP Server HTTP Server process request Http Server request client address
def get logger name handlers l logbook Logger name for h in handlers if isinstance h list l handlers + helse l handlers append h return l
def get edge attributes G name if G is multigraph edges G edges keys True data True else edges G edges data True return {x[ -1 ] x[ -1 ][name] for x in edges if name in x[ -1 ] }
def setlocal name value global dict local dict get twill glocals local dict[name] value
@click group @click option '--repo-home' envvar 'REPO HOME' default ' repo' metavar 'PATH' help ' Changestherepositoryfolderlocation ' @click option '--config' nargs 2 multiple True metavar 'KEYVALUE' help ' Overridesaconfigkey/valuepair ' @click option '--verbose' '-v' is flag True help ' Enablesverbosemode ' @click version option '1 0' @click pass contextdef cli ctx repo home config verbose ctx obj Repo os path abspath repo home ctx obj verbose verbosefor key value in config ctx obj set config key value
@click group @click option '--repo-home' envvar 'REPO HOME' default ' repo' metavar 'PATH' help ' Changestherepositoryfolderlocation ' @click option '--config' nargs 2 multiple True metavar 'KEYVALUE' help ' Overridesaconfigkey/valuepair ' @click option '--verbose' '-v' is flag True help ' Enablesverbosemode ' @click version option '1 0' @click pass contextdef cli ctx repo home config verbose ctx obj Repo os path abspath repo home ctx obj verbose verbosefor key value in config ctx obj set config key value
def update plex host port token library name section key get music section host port token library name api endpoint 'library/sections/{ 0 }/refresh' format section key api endpoint append token api endpoint token url urljoin 'http //{ 0 } {1 }' format host port api endpoint r requests get url return r
def update plex host port token library name section key get music section host port token library name api endpoint 'library/sections/{ 0 }/refresh' format section key api endpoint append token api endpoint token url urljoin 'http //{ 0 } {1 }' format host port api endpoint r requests get url return r
def asset type asset type choices 95 'asset' 100 'video' d100 random randint 0 100 for choice in asset type choices if d100 < choice[ 0 ] return choice[ 1 ]return asset type choices[ -1 ][ 1 ]
def lookahead n iterable for value in islice copy copy iterable n None return valueraise Index Error n
def lookahead n iterable for value in islice copy copy iterable n None return valueraise Index Error n
def lookahead n iterable for value in islice copy copy iterable n None return valueraise Index Error n
def generate Version File Data version if version prerelease is not None prerelease ' prerelease %r' % version prerelease else prerelease ''data '# Thisisanauto-generatedfile Donoteditit \nfromtwisted pythonimportversions\nversion versions Version %r %s %s %s%s \n' % version package version major version minor version micro prerelease return data
def get edit filetypes pygments exts get pygments extensions favorite exts [' py' ' R' ' jl' ' ipynb' ' md' ' pyw' ' pyx' ' C' ' CPP']other exts [ext for ext in pygments exts if ext not in favorite exts ]all exts tuple favorite exts + other exts text filetypes ' Supportedtextfiles' all exts return [text filetypes] + EDIT FILETYPES
@library global functiondef nonprefixed url viewname *args **kwargs return django reverse viewname *args **kwargs
@library global functiondef nonprefixed url viewname *args **kwargs return django reverse viewname *args **kwargs
@library global functiondef nonprefixed url viewname *args **kwargs return django reverse viewname *args **kwargs
def setup platform hass config add devices discovery info None if discovery info is None or zwave NETWORK is None returnnode zwave NETWORK nodes[discovery info[zwave const ATTR NODE ID]]value node values[discovery info[zwave const ATTR VALUE ID]]value set change verified False if value node manufacturer id strip and value node product id strip specific sensor key int value node manufacturer id 16 int value node product id 16 value index if specific sensor key in DEVICE MAPPINGS if DEVICE MAPPINGS[specific sensor key] WORKAROUND NO OFF EVENT re arm multiplier zwave get config value value node 9 or 4 add devices [Z Wave Trigger Sensor value 'motion' hass re arm multiplier * 8 ] returnif value command class zwave const COMMAND CLASS SENSOR BINARY add devices [Z Wave Binary Sensor value None ]
def get freq code freqstr if isinstance freqstr Date Offset freqstr freqstr rule code freqstr n if isinstance freqstr tuple if is integer freqstr[ 0 ] and is integer freqstr[ 1 ] return freqstrelse try code period str to code freqstr[ 0 ] stride freqstr[ 1 ]except if is integer freqstr[ 1 ] raisecode period str to code freqstr[ 1 ] stride freqstr[ 0 ]return code stride if is integer freqstr return freqstr 1 base stride base and stride freqstr code period str to code base return code stride
def get freq code freqstr if isinstance freqstr Date Offset freqstr freqstr rule code freqstr n if isinstance freqstr tuple if is integer freqstr[ 0 ] and is integer freqstr[ 1 ] return freqstrelse try code period str to code freqstr[ 0 ] stride freqstr[ 1 ]except if is integer freqstr[ 1 ] raisecode period str to code freqstr[ 1 ] stride freqstr[ 0 ]return code stride if is integer freqstr return freqstr 1 base stride base and stride freqstr code period str to code base return code stride
def get kernel context return kernel context
def get nipype gitversion import osimport subprocesstry import nipypegitpath os path realpath os path join os path dirname nipype file os path pardir except gitpath os getcwd gitpathgit os path join gitpath u' git' if not os path exists gitpathgit return Nonever Nonetry o subprocess Popen u'gitdescribe' shell True cwd gitpath stdout subprocess PIPE communicate except Exception passelse ver o decode strip split u'-' [ -1 ]return ver
def unmanaged DLL twain Environment Get Environment Variable ' System Root' + '\\twain dll' File Copy twain DLLS DIR + '\\twain dll'
def unmanaged DLL twain Environment Get Environment Variable ' System Root' + '\\twain dll' File Copy twain DLLS DIR + '\\twain dll'
def find dumb path challbs preferences path []for i challb in enumerate challbs supported next True for pref c in preferences if isinstance challb chall pref c False if supported path append i else report no chall path return path
def get top docs count top qs Wiki Document Visits objects select related 'document' filter period LAST 90 DAYS order by '-visits' [ count]return [v document for v in top qs]
def get top docs count top qs Wiki Document Visits objects select related 'document' filter period LAST 90 DAYS order by '-visits' [ count]return [v document for v in top qs]
def test takes args assert not hug introspect takes args function with kwargs assert hug introspect takes args function with args assert not hug introspect takes args function with neither assert hug introspect takes args function with both
def some function input input np asarray input output fortran module some function input ravel return output reshape input shape
@require POST@csrf protectdef hardlink request if not test user authenticated request return login request next '/cobbler web/hardlink' expired True remote background hardlink {} request session['token'] return Http Response Redirect '/cobbler web/task created'
def get block summary totals course data block summary counts {}unique course counts {}for course in course data block counts course get BLOCK COUNTS KEY for count label value in block counts items unique 0if value > 0 unique 1if count label in block summary counts block summary counts[count label] + valueunique course counts[count label] + uniqueelse block summary counts[count label] valueunique course counts[count label] uniquereturn block summary counts unique course counts
def get block summary totals course data block summary counts {}unique course counts {}for course in course data block counts course get BLOCK COUNTS KEY for count label value in block counts items unique 0if value > 0 unique 1if count label in block summary counts block summary counts[count label] + valueunique course counts[count label] + uniqueelse block summary counts[count label] valueunique course counts[count label] uniquereturn block summary counts unique course counts
def insert Grid Point Pair grid Point grid Point Inset X grid Points is Junction Wide paths pixel Table y Intersection Path width line Path get Non Intersecting Grid Point Line grid Point Inset X is Junction Wide paths pixel Table y Intersection Path width insert Grid Point Pair With Line Path grid Point grid Point Inset X grid Points is Junction Wide line Path paths pixel Table y Intersection Path width
def fetch url body None headers None fetcher get Default Fetcher return fetcher fetch url body headers
def main reactor jid secret return Client reactor JID jid secret finished
def cache tex root name generate return cache local tex root name generate
def do Spn Create po if g created SCP is None option error po ' Scp Createmusthavebeenspecifiedbefore Spn Create' spns win 32 security Ds Get Spn dscon DS SPN SERVICE get option po 'service class' g created SCP distinguished Name get option po 'port' 0 None None spn spns[ 0 ]log 2 ' Created SPN %s' spn global g created SPN Lastg created SPN Last spng created SP Ns append spn return spn
def empty Net net Mininet controller Controller info '*** Addingcontroller\n' net add Controller 'c 0 ' info '*** Addinghosts\n' h1 net add Host 'h 1 ' ip '10 0 0 1' h2 net add Host 'h 2 ' ip '10 0 0 2' info '*** Addingswitch\n' s3 net add Switch 's 3 ' info '*** Creatinglinks\n' net add Link h1 s3 net add Link h2 s3 info '*** Startingnetwork\n' net start info '*** Running CLI\n' CLI net info '*** Stoppingnetwork' net stop
def commands *command list def add attribute function if not hasattr function u'commands' function commands []function commands extend command list return functionreturn add attribute
def commands *command list def add attribute function if not hasattr function u'commands' function commands []function commands extend command list return functionreturn add attribute
def delete build requests with no instance uuid context count orphaned build requests get build requests with no instance uuid context count done 0for orphan buildreq in orphaned build requests result destroy in db context orphan buildreq id if result done + 1return len orphaned build requests done
def delete build requests with no instance uuid context count orphaned build requests get build requests with no instance uuid context count done 0for orphan buildreq in orphaned build requests result destroy in db context orphan buildreq id if result done + 1return len orphaned build requests done
def delete build requests with no instance uuid context count orphaned build requests get build requests with no instance uuid context count done 0for orphan buildreq in orphaned build requests result destroy in db context orphan buildreq id if result done + 1return len orphaned build requests done
def delete build requests with no instance uuid context count orphaned build requests get build requests with no instance uuid context count done 0for orphan buildreq in orphaned build requests result destroy in db context orphan buildreq id if result done + 1return len orphaned build requests done
def delete build requests with no instance uuid context count orphaned build requests get build requests with no instance uuid context count done 0for orphan buildreq in orphaned build requests result destroy in db context orphan buildreq id if result done + 1return len orphaned build requests done
def delete build requests with no instance uuid context count orphaned build requests get build requests with no instance uuid context count done 0for orphan buildreq in orphaned build requests result destroy in db context orphan buildreq id if result done + 1return len orphaned build requests done
def get Transferred Nested Rings insides loop transferred Surroundings []for inside Index in xrange len insides - 1 -1 -1 inside Surrounding insides[inside Index]if is Path Inside Loop loop inside Surrounding boundary transferred Surroundings append inside Surrounding del insides[inside Index]return transferred Surroundings
def change value global GROWL REG GROWL REG False
def imresize im sz pil im Image fromarray uint 8 im return array pil im resize sz
def imresize im sz pil im Image fromarray uint 8 im return array pil im resize sz
def extract argmax and embed embedding output projection None update embedding True def loop function prev 'functionthatfeedpreviousmodeloutputratherthangroundtruth 'if output projection is not None prev tf nn xw plus b prev output projection[ 0 ] output projection[ 1 ] prev symbol tf argmax prev 1 emb prev tf nn embedding lookup embedding prev symbol if not update embedding emb prev tf stop gradient emb prev return emb prevreturn loop function
def extract argmax and embed embedding output projection None update embedding True def loop function prev 'functionthatfeedpreviousmodeloutputratherthangroundtruth 'if output projection is not None prev tf nn xw plus b prev output projection[ 0 ] output projection[ 1 ] prev symbol tf argmax prev 1 emb prev tf nn embedding lookup embedding prev symbol if not update embedding emb prev tf stop gradient emb prev return emb prevreturn loop function
def get args parser argparse Argument Parser epilog ' Toimportbookmarksfrom Chromium Firefoxor IE exportthemto HTM Linyourbrowsersbookmarkmanager Bydefault thisscriptwilloutputinaquickmarksformat ' parser add argument 'browser' help ' Whichbrowser? chromium firefox ' choices ['chromium' 'firefox' 'ie'] metavar 'browser' parser add argument '-b' help ' Outputinbookmarkformat ' dest 'bookmark format' action 'store true' default False required False parser add argument 'bookmarks' help ' Bookmarksfile htmlformat ' args parser parse args return args
def construct target list targets target entries []for entry in targets if not isinstance entry Gtk Target Entry entry Gtk Target Entry new *entry target entries append entry return target entries
def construct target list targets target entries []for entry in targets if not isinstance entry Gtk Target Entry entry Gtk Target Entry new *entry target entries append entry return target entries
def construct target list targets target entries []for entry in targets if not isinstance entry Gtk Target Entry entry Gtk Target Entry new *entry target entries append entry return target entries
def find permutation a b t np argsort a u np argsort b u inverse permutation u return t[u ]
@memoize 'media fetch size' time 3600 def fetch image size url referer request initialize request url referer if not request return Noneparser Image File Parser response Nonetry response urllib 2 urlopen request while True chunk response read 1024 if not chunk breakparser feed chunk if parser image return parser image sizeexcept urllib 2 URL Error return Nonefinally if response response close
@memoize 'media fetch size' time 3600 def fetch image size url referer request initialize request url referer if not request return Noneparser Image File Parser response Nonetry response urllib 2 urlopen request while True chunk response read 1024 if not chunk breakparser feed chunk if parser image return parser image sizeexcept urllib 2 URL Error return Nonefinally if response response close
def chunkize serial iterable chunksize as numpy False it iter iterable while True if as numpy wrapped chunk [[np array doc for doc in itertools islice it int chunksize ]]else wrapped chunk [list itertools islice it int chunksize ]if not wrapped chunk[ 0 ] break yield wrapped chunk pop
def chunkize serial iterable chunksize as numpy False it iter iterable while True if as numpy wrapped chunk [[np array doc for doc in itertools islice it int chunksize ]]else wrapped chunk [list itertools islice it int chunksize ]if not wrapped chunk[ 0 ] break yield wrapped chunk pop
def restart container timeout 10 client get client status base status copy try dcontainer get container infos container [' Id']client restart dcontainer timeout timeout if is running dcontainer valid status comment ' Container{ 0 }wasrestarted' format container id container else invalid status except Exception invalid status id container out traceback format exc comment ' Anexceptionoccurredwhilerestartingyourcontainer{ 0 }' format container salt ['mine send'] 'dockerng ps' verbose True all True host True return status
def restart container timeout 10 client get client status base status copy try dcontainer get container infos container [' Id']client restart dcontainer timeout timeout if is running dcontainer valid status comment ' Container{ 0 }wasrestarted' format container id container else invalid status except Exception invalid status id container out traceback format exc comment ' Anexceptionoccurredwhilerestartingyourcontainer{ 0 }' format container salt ['mine send'] 'dockerng ps' verbose True all True host True return status
def get format format None if isinstance format type and issubclass format Base return formatelif not isinstance format string types or format is None raise Type Error u' Formattermustasubclassorinstanceofasubclassof{ 0 r}orastringgivingthenameoftheformatter Validformatternamesare [{ 1 }]' format Base u' ' join Base registry if format is None format u'generic'format lower format lower if format lower in Base registry return Base registry[format lower]raise Value Error u' Unknownformat{ 0 r} Validformatternamesare [{ 1 }]' format format u' ' join Base registry
def install plugin site plugin name output dir None show install notes False LOGGER notice u" Installingplugin'{ 0 }'" format plugin name plugin installer info site plugin manager get Plugin By Name u'plugin' u' Command' if plugin installer info is None LOGGER error u' Internalerror cannotfindthe"plugin"pluginwhichissupposedtocomewith Nikola ' return Falseif not plugin installer info is activated site plugin manager activate Plugin By Name plugin installer info name plugin installer info plugin object set site site plugin installer plugin installer info plugin objectoptions {}for option in plugin installer cmd options options[option[u'name']] option[u'default']options[u'install'] plugin nameoptions[u'output dir'] output diroptions[u'show install notes'] show install notesif plugin installer execute options options > 0 return Falsesite plugin manager collect Plugins site compiler extensions site activate plugins of category u' Compiler Extension' return True
def connectable Endpoint debug False reactor Memory Reactor Clock client Endpoint TCP 4 Client Endpoint reactor '0 0 0 0' 4321 server Endpoint TCP 4 Server Endpoint reactor 4321 server Endpoint listen Factory for Protocol Protocol return client Endpoint Connection Completer reactor
def is valid git sha 1 hash if len hash 40 return Falsetry value int hash 16 except Value Error return Falsereturn True
def convert to grayscale imlist for imname in imlist im Image open imname convert 'L' im save imname
def test ast good yield can compile u' yield 1 '
def absent name region None key None keyid None profile None ret {'name' name 'result' True 'comment' '' 'changes' {}}exists salt ['boto dynamodb exists'] name region key keyid profile if not exists ret['comment'] ' Dynamo D Btable{ 0 }doesnotexist' format name return retif opts ['test'] ret['comment'] ' Dynamo D Btable{ 0 }issettobedeleted' format name ret['result'] Nonereturn retis deleted salt ['boto dynamodb delete'] name region key keyid profile if is deleted ret['comment'] ' Deleted Dynamo D Btable{ 0 }' format name ret['changes'] setdefault 'old' ' Table{ 0 }exists' format name ret['changes'] setdefault 'new' ' Table{ 0 }deleted' format name else ret['comment'] ' Failedtodelete Dynamo D Btable{ 0 }' format name ret['result'] Falsereturn ret
def returns rtype def check returns f def new f *args **kwds result f *args **kwds assert isinstance result rtype 'returnvalue%rdoesnotmatch%s' % result rtype return resultnew f name f name return new freturn check returns
def absent name user None password None host None port None authdb None ret {'name' name 'changes' {} 'result' True 'comment' ''}if salt ['mongodb db exists'] name user password host port authdb authdb if opts ['test'] ret['result'] Noneret['comment'] ' Database{ 0 }ispresentandneedstoberemoved' format name return retif salt ['mongodb db remove'] name user password host port authdb authdb ret['comment'] ' Database{ 0 }hasbeenremoved' format name ret['changes'][name] ' Absent'return retret['comment'] ' User{ 0 }isnotpresent soitcannotberemoved' format name return ret
def absent name user None password None host None port None authdb None ret {'name' name 'changes' {} 'result' True 'comment' ''}if salt ['mongodb db exists'] name user password host port authdb authdb if opts ['test'] ret['result'] Noneret['comment'] ' Database{ 0 }ispresentandneedstoberemoved' format name return retif salt ['mongodb db remove'] name user password host port authdb authdb ret['comment'] ' Database{ 0 }hasbeenremoved' format name ret['changes'][name] ' Absent'return retret['comment'] ' User{ 0 }isnotpresent soitcannotberemoved' format name return ret
def absent name user None password None host None port None authdb None ret {'name' name 'changes' {} 'result' True 'comment' ''}if salt ['mongodb db exists'] name user password host port authdb authdb if opts ['test'] ret['result'] Noneret['comment'] ' Database{ 0 }ispresentandneedstoberemoved' format name return retif salt ['mongodb db remove'] name user password host port authdb authdb ret['comment'] ' Database{ 0 }hasbeenremoved' format name ret['changes'][name] ' Absent'return retret['comment'] ' User{ 0 }isnotpresent soitcannotberemoved' format name return ret
def absent name user None password None host None port None authdb None ret {'name' name 'changes' {} 'result' True 'comment' ''}if salt ['mongodb db exists'] name user password host port authdb authdb if opts ['test'] ret['result'] Noneret['comment'] ' Database{ 0 }ispresentandneedstoberemoved' format name return retif salt ['mongodb db remove'] name user password host port authdb authdb ret['comment'] ' Database{ 0 }hasbeenremoved' format name ret['changes'][name] ' Absent'return retret['comment'] ' User{ 0 }isnotpresent soitcannotberemoved' format name return ret
def absent name user None password None host None port None authdb None ret {'name' name 'changes' {} 'result' True 'comment' ''}if salt ['mongodb db exists'] name user password host port authdb authdb if opts ['test'] ret['result'] Noneret['comment'] ' Database{ 0 }ispresentandneedstoberemoved' format name return retif salt ['mongodb db remove'] name user password host port authdb authdb ret['comment'] ' Database{ 0 }hasbeenremoved' format name ret['changes'][name] ' Absent'return retret['comment'] ' User{ 0 }isnotpresent soitcannotberemoved' format name return ret
def execute java async classpath main jvm options None args None executor None workunit factory None workunit name None workunit labels None cwd None workunit log config None distribution None create synthetic jar True synthetic jar dir None runner get runner classpath main jvm options args executor cwd distribution create synthetic jar synthetic jar dir workunit name workunit name or main return execute runner async runner workunit factory workunit factory workunit name workunit name workunit labels workunit labels workunit log config workunit log config
def colors pass
def append random bottlecap phrase message bottlecap Nonetry wp Wiki Page get Frontpage g wiki page gold bottlecaps split list re split '^[*-]' wp content flags re MULTILINE choices [item strip for item in split list if item strip ]if len choices bottlecap choice choices except Not Found passif bottlecap message + '\n\n>' + bottlecap return message
def elements to dict data position obj end opts result opts document class pos positionfor key value pos in iterate elements data position obj end opts result[key] valueif pos obj end raise Invalid BSON 'badobjectorelementlength' return result
def get useragent with open settings USERAGENTS 'r' as f agents f readlines selection random randint 0 len agents - 1 agent agents[selection]return agent strip
def get useragent with open settings USERAGENTS 'r' as f agents f readlines selection random randint 0 len agents - 1 agent agents[selection]return agent strip
def get useragent with open settings USERAGENTS 'r' as f agents f readlines selection random randint 0 len agents - 1 agent agents[selection]return agent strip
def calculate results sim params env data portal splits None txns None commissions None txns txns or [] splits splits or {} commissions commissions or {} perf tracker perf Performance Tracker sim params get calendar 'NYSE' env results []for date in sim params sessions for txn in filter lambda txn txn dt date txns perf tracker process transaction txn try commissions for date commissions[date]for comm in commissions for date perf tracker process commission comm except Key Error passtry splits for date splits[date]perf tracker handle splits splits for date except Key Error passmsg perf tracker handle market close date data portal perf tracker position tracker sync last sale prices date False data portal msg['account'] perf tracker get account True results append copy deepcopy msg return results
def calculate results sim params env data portal splits None txns None commissions None txns txns or [] splits splits or {} commissions commissions or {} perf tracker perf Performance Tracker sim params get calendar 'NYSE' env results []for date in sim params sessions for txn in filter lambda txn txn dt date txns perf tracker process transaction txn try commissions for date commissions[date]for comm in commissions for date perf tracker process commission comm except Key Error passtry splits for date splits[date]perf tracker handle splits splits for date except Key Error passmsg perf tracker handle market close date data portal perf tracker position tracker sync last sale prices date False data portal msg['account'] perf tracker get account True results append copy deepcopy msg return results
def remove master course staff from ccx master course ccx key display name send email True list staff list with level master course 'staff' list instructor list with level master course 'instructor' with ccx course ccx key as course ccx list staff ccx list with level course ccx 'staff' list instructor ccx list with level course ccx 'instructor' email params get email params course ccx auto enroll True course key ccx key display name display name for staff in list staff if staff in list staff ccx revoke access course ccx staff 'staff' unenroll email course id ccx key student email staff email email students send email email params email params for instructor in list instructor if instructor in list instructor ccx revoke access course ccx instructor 'instructor' unenroll email course id ccx key student email instructor email email students send email email params email params
def get regex data position dummy 0 opts dummy 1 pattern position get c string data position opts bson flags position get c string data position opts bson re Regex pattern bson flags return bson re position
def create use app call reuse False return default app create
def get patterns for title path title app apphook pool get apphook title page application urls url patterns []for pattern list in get app urls app get urls title page title language if path and not path endswith '/' path + '/'page id title page idurl patterns + recurse patterns path pattern list page id return url patterns
def add certificate exception course key student certificate exception if len Certificate Whitelist get certificate white list course key student > 0 raise Value Error ' Student username/email {user} alreadyincertificateexceptionlist ' format user student username certificate white list Certificate Whitelist objects get or create user student course id course key defaults {'whitelist' True 'notes' certificate exception get 'notes' '' } generated certificate Generated Certificate eligible certificates filter user student course id course key status Certificate Statuses downloadable first exception dict {'id' certificate white list id 'user email' student email 'user name' student username 'user id' student id 'certificate generated' generated certificate and generated certificate created date strftime '%B%d %Y' 'created' certificate white list created strftime '%A %B%d %Y' } return exception
def compute Object Key id generation Num encryption Key key Length Bytes algorithm 'RC 4 ' key encryption Key + struct pack '<i' id [ 3] + struct pack '<i' generation Num [ 2] if algorithm 'AES' key + 's Al T'key hashlib md 5 key digest if key Length Bytes + 5 < 16 key key[ key Length Bytes + 5 ]else key key[ 16 ]return key
def echo data '' return data
def prioritize while True hp qs Message objects high priority using u'default' mp qs Message objects medium priority using u'default' lp qs Message objects low priority using u'default' while hp qs count or mp qs count while hp qs count for message in hp qs order by u'when added' yield message while hp qs count 0 and mp qs count yield mp qs order by u'when added' [0 ] while hp qs count 0 and mp qs count 0 and lp qs count yield lp qs order by u'when added' [0 ] if Message objects non deferred using u'default' count 0 break
def reservation create context uuid usage project id resource delta expire return IMPL reservation create context uuid usage project id resource delta expire
def should Relocate Command cmd return cmd in RELOCATABLE
def build inverse barcode map seqs inverse map {}map count defaultdict int for label seq in seqs map id seq id label split [ 2]map id map id split ' ' [0 ]inverse map[seq id] map idmap count[map id] + 1return inverse map map count
@ ensure existsdef state name contextkey 'docker state {0 }' format name if contextkey in context return context [contextkey]c info inspect container name if c info get ' State' {} get ' Paused' False context [contextkey] 'paused'elif c info get ' State' {} get ' Running' False context [contextkey] 'running'else context [contextkey] 'stopped'return context [contextkey]
def string at ptr size -1 return string at ptr size
def test zero precision recall try old error settings np seterr all 'raise' y real np array [['a' 'b' 'c']] y pred np array [[]] assert array almost equal precision score y real y pred 0 0 2 assert array almost equal recall score y real y pred 0 0 2 assert array almost equal f1 score y real y pred 0 0 2 finally np seterr **old error settings
def test zero precision recall try old error settings np seterr all 'raise' y real np array [['a' 'b' 'c']] y pred np array [[]] assert array almost equal precision score y real y pred 0 0 2 assert array almost equal recall score y real y pred 0 0 2 assert array almost equal f1 score y real y pred 0 0 2 finally np seterr **old error settings
def test zero precision recall try old error settings np seterr all 'raise' y real np array [['a' 'b' 'c']] y pred np array [[]] assert array almost equal precision score y real y pred 0 0 2 assert array almost equal recall score y real y pred 0 0 2 assert array almost equal f1 score y real y pred 0 0 2 finally np seterr **old error settings
def Validate Xsrf Token token action user str Make User Str token obj memcache get token namespace MEMCACHE NAMESPACE if not token obj return False token str token action token objif user str token str or action token action return Falsereturn True
def check journaled con warning critical perf data warning warning or 20 critical critical or 40 try data get server status con journaled data['dur']['journaled MB']message ' Journaled % 2f MB' % journaled message + performance data perf data [ '% 2f' % journaled 'journaled' warning critical ] return check levels journaled warning critical message except Exception as e return exit with general critical e
def test from float method prec exprange restricted range itr stat for rounding in Round Modes context rounding roundingfor i in range 1000 f randfloat op f if method startswith 'context ' else 's Na N' f t Test Set method op try if not convert t continuecallfuncs t verify t stat except Verify Error as err log err
def list minus l minus return [o for o in l if o not in minus ]
def has eeg average ref proj projs check active False for proj in projs if proj['desc'] ' Average EE Greference' or proj['kind'] FIFF FIFFV MNE PROJ ITEM EEG AVREF if not check active or proj['active'] return Truereturn False
def has eeg average ref proj projs check active False for proj in projs if proj['desc'] ' Average EE Greference' or proj['kind'] FIFF FIFFV MNE PROJ ITEM EEG AVREF if not check active or proj['active'] return Truereturn False
def enable module module if not is module enabled module run as root 'a 2 enmod%s' % module
def copy to master registry xml parent data cm XML Sub Element xml parent 'com michelin cio hudson plugins copytoslave Copy To Master Notifier' cm set 'plugin' 'copy-to-slave' XML Sub Element cm 'includes' text ' ' join data get 'includes' [''] XML Sub Element cm 'excludes' text ' ' join data get 'excludes' [''] mappings [ 'run-after-result' 'run After Result Finalised' True 'destination' 'destination Folder' '' ]helpers convert mapping to xml cm data mappings fail required True if data get 'destination' '' XML Sub Element cm 'override Destination Folder' text 'true'
def get cluster host req params cluster version None if cluster version is not False and req api version request matches cluster version cluster name params get 'cluster' msg ' Oneandonlyoneofclusterandhostmustbeset ' else cluster name Nonemsg ' Hostfieldismissing ' host params get 'host' if bool cluster name bool host raise exception Invalid Input reason msg return cluster name host
def role role def wrapper handler method def check login self *args **kwargs user users get current user if not user if self request method 'GET' logging debug ' Notuser-aborting' self error 403 else logging debug ' Usernotloggedin--forcelogin' self redirect users create login url self request uri elif role 'user' or role 'admin' and users is current user admin logging debug ' Roleis%ssowillallowhandler' role handler method self *args **kwargs elif self request method 'GET' logging debug ' Unknownrole %s on GET' role self redirect '/ 403 html' else logging debug ' Unknownrole %s' role self error 403 return check loginreturn wrapper
def add var var value makeconf get makeconf layman 'source/var/lib/layman/make conf'fullvar '{ 0 } "{ 1 }"' format var value if salt ['file contains'] makeconf layman cmd ['sed' '-i' '/{ 0 }/i\\{ 1 }' format layman replace '/' '\\/' fullvar makeconf] salt ['cmd run'] cmd else salt ['file append'] makeconf fullvar
def parse file return Parser file parse
def parse file return Parser file parse
def writewav 24 filename rate data a32 np asarray data dtype np int 32 if a32 ndim 1 a32 shape a32 shape + 1 a8 a32 reshape a32 shape + 1 >> np array [0 8 16 ] & 255 wavdata a8 astype np uint 8 tostring w wave open filename 'wb' w setnchannels a32 shape[ 1 ] w setsampwidth 3 w setframerate rate w writeframes wavdata w close
def saveimage filename im if len im shape 3 cv 2 imwrite filename 255 * im[ -1 ] else cv 2 imwrite filename 255 * im
def boxplot runtimes runtimes pred type configuration fig ax 1 plt subplots figsize 10 6 bp plt boxplot runtimes cls infos [ '%s\n %d%s ' % estimator conf['name'] estimator conf['complexity computer'] estimator conf['instance'] estimator conf['complexity label'] for estimator conf in configuration['estimators']]plt setp ax 1 xticklabels cls infos plt setp bp['boxes'] color 'black' plt setp bp['whiskers'] color 'black' plt setp bp['fliers'] color 'red' marker '+' ax 1 yaxis grid True linestyle '-' which 'major' color 'lightgrey' alpha 0 5 ax 1 set axisbelow True ax 1 set title ' Prediction Timeper Instance-%s %dfeats ' % pred type capitalize configuration['n features'] ax 1 set ylabel ' Prediction Time us ' plt show
def make csrf token req session id ts None ts '%x' % ts if ts is not None else time time payload [req server secret session id ts]return '%s-%s' % ts b64 w sha 512 b 64 '-' join payload
def make csrf token req session id ts None ts '%x' % ts if ts is not None else time time payload [req server secret session id ts]return '%s-%s' % ts b64 w sha 512 b 64 '-' join payload
@skip unless environ 'GALAXY TEST INCLUDE SLOW' def test conda resolution failure base path mkdtemp prefix 'x' * 80 try job dir os path join base path '000 ' dependency manager Dependency Manager base path resolver Conda Dependency Resolver dependency manager auto init True auto install True use path exec False conda context resolver conda contextassert len list conda util installed conda targets conda context 0 dependency resolver resolve name 'samtools' version None type 'package' job directory job dir assert dependency shell commands None is None installed targets list conda util installed conda targets conda context assert len installed targets 0 finally shutil rmtree base path
@skip unless environ 'GALAXY TEST INCLUDE SLOW' def test conda resolution failure base path mkdtemp prefix 'x' * 80 try job dir os path join base path '000 ' dependency manager Dependency Manager base path resolver Conda Dependency Resolver dependency manager auto init True auto install True use path exec False conda context resolver conda contextassert len list conda util installed conda targets conda context 0 dependency resolver resolve name 'samtools' version None type 'package' job directory job dir assert dependency shell commands None is None installed targets list conda util installed conda targets conda context assert len installed targets 0 finally shutil rmtree base path
def aggregate file tree metadata addon short name fileobj metadata user disk usage fileobj metadata get 'size' if fileobj metadata['kind'] 'file' result Stat Result target name fileobj metadata['name'] target id fileobj metadata['path'] lstrip '/' disk usage disk usage or 0 return resultelse return Aggregate Stat Result target id fileobj metadata['path'] lstrip '/' target name fileobj metadata['name'] targets [aggregate file tree metadata addon short name child user for child in fileobj metadata get 'children' [] ]
def read version variables {}with open VERSION FILE as f exec compile f read 'version py' 'exec' in variablesreturn variables['VERSION']
def Detect Executable Paths source values vars map None detector Create Windows Registry Executable Paths Detector vars map vars map for source value in source values for result in detector Detect source value yield result
def fa items s if atomp items return itemsif len s 0 return items[ 0 ]lst [0 ] * s[ 0 ] stride s[ 0 ]for i in range s[ 0 ] lst[i] fa items[i stride] s[ 1 ] return lst
def test setitem as column name t Table t['a'] ['x' 'y']t['b'] 'b'assert np all t['a'] ['x' 'y'] assert np all t['b'] ['b' 'b']
def test setitem as column name t Table t['a'] ['x' 'y']t['b'] 'b'assert np all t['a'] ['x' 'y'] assert np all t['b'] ['b' 'b']
def load class name setting try module attr name rsplit ' ' 1 except Value Error as error raise Improperly Configured ' Errorimportingclass%sin%s "%s"' % name setting error try mod import module module except Import Error as error raise Improperly Configured ' Errorimportingmodule%sin%s "%s"' % module setting error try cls getattr mod attr except Attribute Error raise Improperly Configured ' Module"%s"doesnotdefinea"%s"classin%s' % module attr setting return cls
def hmac sha 512 k m key Open SSL malloc k len k d Open SSL malloc m len m md Open SSL malloc 0 64 i Open SSL pointer Open SSL c int 0 Open SSL HMAC Open SSL EVP sha 512 key len k d len m md i return md raw
def create user options sess token data {'user[name]' options username 'user[username]' options username 'user[password 1 ]' options password 'user[password 2 ]' options password 'user[email 1 ]' options email 'user[email 2 ]' options email 'user[groups][]' '7 ' 'user[activation]' '0 ' 'user[block]' '0 ' 'form[name]' options username 'form[username]' options username 'form[password 1 ]' options password 'form[password 2 ]' options password 'form[email 1 ]' options email 'form[email 2 ]' options email 'form[option]' 'com users' 'form[task]' 'user register' token '1 '}return sess post options url + '/index php/component/users/?task user register' data data allow redirects False verify False
def create user options sess token data {'user[name]' options username 'user[username]' options username 'user[password 1 ]' options password 'user[password 2 ]' options password 'user[email 1 ]' options email 'user[email 2 ]' options email 'user[groups][]' '7 ' 'user[activation]' '0 ' 'user[block]' '0 ' 'form[name]' options username 'form[username]' options username 'form[password 1 ]' options password 'form[password 2 ]' options password 'form[email 1 ]' options email 'form[email 2 ]' options email 'form[option]' 'com users' 'form[task]' 'user register' token '1 '}return sess post options url + '/index php/component/users/?task user register' data data allow redirects False verify False
def create user options sess token data {'user[name]' options username 'user[username]' options username 'user[password 1 ]' options password 'user[password 2 ]' options password 'user[email 1 ]' options email 'user[email 2 ]' options email 'user[groups][]' '7 ' 'user[activation]' '0 ' 'user[block]' '0 ' 'form[name]' options username 'form[username]' options username 'form[password 1 ]' options password 'form[password 2 ]' options password 'form[email 1 ]' options email 'form[email 2 ]' options email 'form[option]' 'com users' 'form[task]' 'user register' token '1 '}return sess post options url + '/index php/component/users/?task user register' data data allow redirects False verify False
def error response app error code message debug message None warn True if warn warnings warn 'wsgilib error response appisdeprecated usethewsgi applicationmethodonan HTTP Exceptionobjectinstead' Deprecation Warning 2 def application environ start response status headers body error response environ error code message debug message debug message warn False start response status headers return [body]return application
@register inclusion tag u'admin/includes/recent actions html' takes context True def recent actions context return context
@register inclusion tag u'admin/includes/recent actions html' takes context True def recent actions context return context
def detect fakeroot return os getenv 'FAKEROOTKEY' None
def libvlc video set marquee string p mi option psz text f Cfunctions get 'libvlc video set marquee string' None or Cfunction 'libvlc video set marquee string' 1 1 1 None None Media Player ctypes c uint ctypes c char p return f p mi option psz text
def make simp z def simp expr ' Efficientlysimplifytherationalfunction``expr`` ' numer denom expr as numer denom c numer denom poly numer z cancel poly denom z return c * numer as expr / denom as expr return simp
def make simp z def simp expr ' Efficientlysimplifytherationalfunction``expr`` ' numer denom expr as numer denom c numer denom poly numer z cancel poly denom z return c * numer as expr / denom as expr return simp
def vn delete call None kwargs None if call 'function' raise Salt Cloud System Exit ' Thevn deletefunctionmustbecalledwith-for--function ' if kwargs is None kwargs {}name kwargs get 'name' None vn id kwargs get 'vn id' None if vn id if name log warning " Boththe'vn id'and'name'argumentswereprovided 'vn id'willtakeprecedence " elif name vn id get vn id kwargs {'name' name} else raise Salt Cloud System Exit " Thevn deletefunctionrequiresa'name'ora'vn id'tobeprovided " server user password get xml rpc auth ' ' join [user password] response server one vn delete auth int vn id data {'action' 'vn delete' 'deleted' response[ 0 ] 'vn id' response[ 1 ] 'error code' response[ 2 ]}return data
def patch dns from gevent import socketpatch module 'socket' items socket dns
def registered tasks request return Json Response {'regular' tasks regular keys 'periodic' tasks periodic keys }
@ get clientdef image location delete client image id location id status session None client image location delete image id image id location id location id status status
def get Left Point Index points if len points < 1 return Noneleft Point Index 0for point Index in xrange len points if points[point Index] real < points[left Point Index] real left Point Index point Indexreturn left Point Index
def shared like variable name None **kwargs variable tensor as tensor variable variable if name is None name 'shared {}' format variable name return theano shared numpy zeros 0 * variable ndim dtype variable dtype name name **kwargs
def shared like variable name None **kwargs variable tensor as tensor variable variable if name is None name 'shared {}' format variable name return theano shared numpy zeros 0 * variable ndim dtype variable dtype name name **kwargs
def mac address '' interface '' vlan 0 proxy output proxy ['napalm call'] 'get mac address table' **{} if not proxy output get 'result' return proxy outputmac address table proxy output get 'out' if vlan and isinstance vlan int mac address table filter list mac address table 'vlan' vlan if address mac address table filter list mac address table 'mac' address if interface mac address table filter list mac address table 'interface' interface proxy output update {'out' mac address table} return proxy output
@access log level logging DEBUG def status bar request resp ''for view in status bar views try r view request if r status code 200 resp + r contentelse LOG warning ' Failedtoexecutestatus barview%s' % view except LOG exception ' Failedtoexecutestatus barview%s' % view return Http Response resp
def squared error a b a b align targets a b return theano tensor square a - b
def pty size from fabric state import win 32 if not win 32 import fcntlimport termiosimport struct default rows default cols 24 80 rows cols default rows default cols if not win 32 and isatty sys stdout fmt 'HH'buffer struct pack fmt 0 0 try result fcntl ioctl sys stdout fileno termios TIOCGWINSZ buffer rows cols struct unpack fmt result if rows 0 rows default rowsif cols 0 cols default colsexcept Attribute Error passreturn rows cols
def pty size from fabric state import win 32 if not win 32 import fcntlimport termiosimport struct default rows default cols 24 80 rows cols default rows default cols if not win 32 and isatty sys stdout fmt 'HH'buffer struct pack fmt 0 0 try result fcntl ioctl sys stdout fileno termios TIOCGWINSZ buffer rows cols struct unpack fmt result if rows 0 rows default rowsif cols 0 cols default colsexcept Attribute Error passreturn rows cols
def sign params signed fields key 'order Page signed Fields' full sig key 'order Page signature Public' merchant id get processor config get 'MERCHANT ID' '' order page version get processor config get 'ORDERPAGE VERSION' '7 ' serial number get processor config get 'SERIAL NUMBER' '' params['merchant ID'] merchant idparams['order Page timestamp'] int time time * 1000 params['order Page version'] order page versionparams['order Page serial Number'] serial numberfields u' ' join params keys values u' ' join [u'{ 0 } {1 }' format i params[i] for i in params keys ] fields sig processor hash fields values + u' signed Fields Public Signature ' + fields sig params[full sig key] processor hash values params[signed fields key] fieldsreturn params
def Benini name alpha beta sigma return rv name Benini Distribution alpha beta sigma
@ajax requireddef preview content request if 'text' not in request POST return Json Response Bad Request {'msg' ' Textismissing' } return Json Response {'rendered' apply markup filter request POST['text'] }
def item to topic iterator resource return Topic from api repr {'name' resource name} iterator client
def list config modules etcdir if not os path isdir etcdir return iter return name for name in os listdir etcdir if name endswith ' py' and os path isfile os path join etcdir name
def configure errorhandlers app @app errorhandler 403 def forbidden page error return render template 'errors/forbidden page html' 403 @app errorhandler 404 def page not found error return render template 'errors/page not found html' 404 @app errorhandler 500 def server error page error return render template 'errors/server error html' 500
def str split arr pat None n None if pat is None if n is None or n 0 n -1 f lambda x x split pat n elif len pat 1 if n is None or n 0 n -1 f lambda x x split pat n else if n is None or n -1 n 0regex re compile pat f lambda x regex split x maxsplit n res na map f arr return res
def get model location session service definition service name None service model Service Model service definition if service name is None endpoint prefix service model endpoint prefixservice name get service name session endpoint prefix api version service model api versiondata path session get component 'data loader' CUSTOMER DATA PAT Hservice model name 'service-%d json' % int float service definition get 'version' '2 0' return os path join data path service name api version service model name
@condition etag func lambda r ETAG strip '"' def etag view unquoted request return Http Response FULL RESPONSE
def s bit field value width endian '<' format 'binary' signed False full range False fuzzable True name None bit field primitives bit field value width None endian format signed full range fuzzable name blocks CURRENT push bit field
def clean destination recursive if destination[ 5] 's 3 //' rm args ['aws' 's 3 ' 'rm' '--quiet' destination]if recursive rm args append '--recursive' subprocess check call rm args elif recursive shutil rmtree destination else os remove destination
def reap children if hasattr os 'waitpid' any process -1 while True try pid status os waitpid any process os WNOHANG if pid 0 breakexcept break
def template funcs funcs {}for plugin in find plugins if plugin template funcs funcs update plugin template funcs return funcs
def write callback option opt str value parser * args ** kwargs if not hasattr parser values 'write' option dest 'write'option action 'store false'parser values write Falsefor in range 3 testphrase ' Yes Iwanttoenablewritesupport'response raw input ' Writesupportrequested Pleasetype"' + testphrase + '"belowprecisely case-sensitive \n' if response testphrase option action 'store true'parser values write Truereturnprint ' Writesupportdisabled '
def write callback option opt str value parser * args ** kwargs if not hasattr parser values 'write' option dest 'write'option action 'store false'parser values write Falsefor in range 3 testphrase ' Yes Iwanttoenablewritesupport'response raw input ' Writesupportrequested Pleasetype"' + testphrase + '"belowprecisely case-sensitive \n' if response testphrase option action 'store true'parser values write Truereturnprint ' Writesupportdisabled '
def write callback option opt str value parser * args ** kwargs if not hasattr parser values 'write' option dest 'write'option action 'store false'parser values write Falsefor in range 3 testphrase ' Yes Iwanttoenablewritesupport'response raw input ' Writesupportrequested Pleasetype"' + testphrase + '"belowprecisely case-sensitive \n' if response testphrase option action 'store true'parser values write Truereturnprint ' Writesupportdisabled '
def arrays to list of tuples arrays colnames first array arrays[colnames[ 0 ]]return [tuple arrays[colname][i] for colname in colnames for i in range len first array ]
@library global functiondef tags to text tags return ' ' join [t slug for t in tags]
@library global functiondef tags to text tags return ' ' join [t slug for t in tags]
def do extra actions api content cc content request fields actions form context request for field form value in actions form cleaned data items if field in request fields and form value api content[field] api content[field] form valueif field 'following' handle following field form value context['cc requester'] cc content elif field 'abuse flagged' handle abuse flagged field form value context['cc requester'] cc content elif field 'voted' handle voted field form value cc content api content request context elif field 'read' handle read field api content form value context['cc requester'] cc content else raise Validation Error {field [' Invalid Key']}
def do extra actions api content cc content request fields actions form context request for field form value in actions form cleaned data items if field in request fields and form value api content[field] api content[field] form valueif field 'following' handle following field form value context['cc requester'] cc content elif field 'abuse flagged' handle abuse flagged field form value context['cc requester'] cc content elif field 'voted' handle voted field form value cc content api content request context elif field 'read' handle read field api content form value context['cc requester'] cc content else raise Validation Error {field [' Invalid Key']}
def do extra actions api content cc content request fields actions form context request for field form value in actions form cleaned data items if field in request fields and form value api content[field] api content[field] form valueif field 'following' handle following field form value context['cc requester'] cc content elif field 'abuse flagged' handle abuse flagged field form value context['cc requester'] cc content elif field 'voted' handle voted field form value cc content api content request context elif field 'read' handle read field api content form value context['cc requester'] cc content else raise Validation Error {field [' Invalid Key']}
def parse rows with reader parsers for row in reader yield parse row row parsers
def suite test Suite unittest Test Suite test Suite add Test Sample Tests 'test Good Stuff' return test Suite
def suite test Suite unittest Test Suite test Suite add Test Sample Tests 'test Good Stuff' return test Suite
def image snapshot flatten call None kwargs None if call 'function' raise Salt Cloud System Exit ' Theimage snapshot flattenfunctionmustbecalledwith-for--function ' if kwargs is None kwargs {}image id kwargs get 'image id' None image name kwargs get 'image name' None snapshot id kwargs get 'snapshot id' None if snapshot id is None raise Salt Cloud System Exit " Theimage stanpshot flattenfunctionrequiresa'snapshot id'tobeprovided " if image id if image name log warning " Boththe'image id'and'image name'argumentswereprovided 'image id'willtakeprecedence " elif image name image id get image id kwargs {'name' image name} else raise Salt Cloud System Exit " Theimage snapshot flattenfunctionrequireseitheran'image id'oran'image name'tobeprovided " server user password get xml rpc auth ' ' join [user password] response server one image snapshotflatten auth int image id int snapshot id data {'action' 'image snapshotflatten' 'flattened' response[ 0 ] 'snapshot id' response[ 1 ] 'error code' response[ 2 ]}return data
def libvlc audio equalizer set preamp p equalizer f preamp f Cfunctions get 'libvlc audio equalizer set preamp' None or Cfunction 'libvlc audio equalizer set preamp' 1 1 None ctypes c int ctypes c void p ctypes c float return f p equalizer f preamp
def build editable options req regexp re compile '[\\?#&] ?P<name>[^& ]+ ?P<value>[^& ]+ ' matched regexp findall req if matched ret dict for option in matched name value optionif name in ret raise Exception '%soptionalreadydefined' % name ret[name] valuereturn retreturn None
def keyring save **kwargs return ceph cfg keyring save **kwargs
def get distribution id vm distributions query 'avail' 'distributions' ['DATA']vm image name config get cloud config value 'image' vm opts distro id ''for distro in distributions if vm image name distro['LABEL'] distro id distro['DISTRIBUTIONID']return distro idif not distro id raise Salt Cloud Not Found " The Distribution I Dforthe'{ 0 }'profilecouldnotbefound \n The'{ 1 }'instancecouldnotbeprovisioned Thefollowingdistributionsareavailable \n{ 2 }" format vm image name vm ['name'] pprint pprint sorted [distro['LABEL'] encode salt system encoding for distro in distributions]
def ec 2 instance create context instance uuid id None return IMPL ec 2 instance create context instance uuid id
def get Division Failure *args **kwargs try 1 / 0 except f failure Failure *args **kwargs return f
def is valid xml char ordinal i return 32 < i < 55295 or i in 9 10 13 or 57344 < i < 65533 or 65536 < i < 1114111
def is valid xml char ordinal i return 32 < i < 55295 or i in 9 10 13 or 57344 < i < 65533 or 65536 < i < 1114111
def thread test method @functools wraps method def Wrapper self thread Test Thread partial method self partial self io loop add callback self stop thread start self wait thread Maybe Raise return Wrapper
def get demo driver provider name 'RACKSPACE' *args **kwargs provider name provider name upper Driver Class get driver getattr Provider provider name if not args args getattr secrets provider name + ' PARAMS' if not kwargs kwargs getattr secrets provider name + ' KEYWORD PARAMS' {} try return Driver Class *args **kwargs except Invalid Creds Error raise Invalid Creds Error 'validvaluesshouldbeputinsecrets py'
def feed data func new name *args **kwargs @wraps func def wrapper self return func self *args **kwargs wrapper name new nameif func doc try wrapper doc func doc format *args **kwargs except Index Error Key Error passreturn wrapper
def feed data func new name *args **kwargs @wraps func def wrapper self return func self *args **kwargs wrapper name new nameif func doc try wrapper doc func doc format *args **kwargs except Index Error Key Error passreturn wrapper
def percent Outputs Stable Over N Time Steps vectors num Samples None total Samples len vectors window Size num Samplesnum Windows 0pct Stable 0for w Start in range 0 total Samples - window Size + 1 data vectors[w Start w Start + window Size ]output Sums data sum axis 0 stable Outputs output Sums window Size sum sample Pct Stable float stable Outputs / data[ 0 ] sum print sample Pct Stablepct Stable + sample Pct Stablenum Windows + 1return float pct Stable / num Windows
def json view f @wraps f def wrapped req *a **kw try ret f req *a **kw blob json dumps ret return http Http Response blob content type JSON except http Http 404 as e blob json dumps {'success' False 'error' 404 'message' str e } return http Http Response Not Found blob content type JSON except Permission Denied as e blob json dumps {'success' False 'error' 403 'message' str e } return http Http Response Forbidden blob content type JSON except Exception as e blob json dumps {'success' False 'error' 500 'message' str e } return http Http Response Server Error blob content type JSON return wrapped
def dir setup test dir pkg temp dir tempfile mkdtemp 'temp' config dir tempfile mkdtemp 'config' work dir tempfile mkdtemp 'work' os chmod temp dir constants CONFIG DIRS MODE os chmod config dir constants CONFIG DIRS MODE os chmod work dir constants CONFIG DIRS MODE test configs pkg resources resource filename pkg os path join 'testdata' test dir shutil copytree test configs os path join temp dir test dir symlinks True return temp dir config dir work dir
def Add File To File Store pathspec None client id None token None if pathspec is None raise Value Error "pathspeccan'tbe None" if client id is None raise Value Error "client idcan'tbe None" urn aff 4 grr VFSGRR Client Pathspec To URN pathspec client id client mock action mocks Get File Client Mock for in test lib Test Flow Helper transfer Get File name client mock token token client id client id pathspec pathspec passauth state rdf flows Grr Message Authorization State AUTHENTICATE Devents Events Publish Event ' File Store Add File To Store' rdf flows Grr Message payload urn auth state auth state token token worker test lib Mock Worker token token worker Simulate return urn
def parse enum key value enumeration return parse enum csv key value enumeration 1 [0 ]
def update status msg **redis kwargs pid getpid red Strict Redis **redis kwargs key 'pid-%d-statuses' % pid msg '% 6f%s' % time msg red lpush key msg red expire key 60 * 60 red ltrim key 0 keep
def update status msg **redis kwargs pid getpid red Strict Redis **redis kwargs key 'pid-%d-statuses' % pid msg '% 6f%s' % time msg red lpush key msg red expire key 60 * 60 red ltrim key 0 keep
def attach priorities queryset as field 'priorities attr' model queryset modelsql '\n SELEC Tjson agg \nrow to json projects priority \n ORDERB Yprojects priority order\n \n FRO Mprojects priority\n WHER Eprojects priority project id {tbl} id\n'sql sql format tbl model meta db table queryset queryset extra select {as field sql} return queryset
def test GPU nstreams limit if not cuda available raise Skip Test ' Optionalpackagecudanotavailable' seed 12345 R MRG Random Streams seed seed use cuda True def eval uniform size nstreams if theano config mode 'FAST COMPILE' mode 'FAST RUN'else mode copy copy theano compile get default mode mode check py code Falseout R uniform size size nstreams nstreams dtype 'float 32 ' f theano function [] out mode mode return f eval uniform 10 2 ** 20 assert raises Value Error eval uniform 10 2 ** 20 + 1
def volume absent name driver None ret {'name' name 'changes' {} 'result' False 'comment' ''}volume find volume name if not volume ret['result'] Trueret['comment'] " Volume'{ 0 }'alreadyabsent" format name return rettry ret['changes']['removed'] salt ['dockerng remove volume'] name ret['result'] Trueexcept Exception as exc ret['comment'] " Failedtoremovevolume'{ 0 }' {1 }" format name exc return ret
def patch user model def get absolute url self return reverse 'users profile' args [self pk] User get absolute url get absolute url
def store multiple option opt value parser *args **kwargs for attribute in args setattr parser values attribute None for key value in kwargs items setattr parser values key value
def nsort roots separated False if not all r is number for r in roots raise Not Implemented Errorkey [[i n 2 as real imag [0 ] for i in r as real imag ] for r in roots]if any i prec 1 for k in key for i in k raise Not Implemented Error 'couldnotcomputerootwithprecision' key [ 1 if i else 0 r i for r i in key]key sorted zip key roots if separated r []i []for im v in key if im i append v else r append v return r i roots zip *key return list roots
def nsort roots separated False if not all r is number for r in roots raise Not Implemented Errorkey [[i n 2 as real imag [0 ] for i in r as real imag ] for r in roots]if any i prec 1 for k in key for i in k raise Not Implemented Error 'couldnotcomputerootwithprecision' key [ 1 if i else 0 r i for r i in key]key sorted zip key roots if separated r []i []for im v in key if im i append v else r append v return r i roots zip *key return list roots
def test multitype conv invalid type param inspect Parameter 'foo' inspect Parameter POSITIONAL ONLY with pytest raises Value Error as excinfo argparser multitype conv param [ None] '' assert str excinfo value 'foo Unknowntype None '
def item to metric iterator resource return Metric from api repr resource iterator client
def resize Window win w h timeout 2 0 Qt Gui Q Application process Events Qt Test Q Test q Wait For Window Shown win win resize w h start time time while True w1 h1 win width win height if w h w1 h1 return Qt Test Q Test q Wait 10 if time time - start > timeout raise Timeout Error ' Windowresizefailed requested%dx%d got%dx%d ' % w h w1 h1
def resize Window win w h timeout 2 0 Qt Gui Q Application process Events Qt Test Q Test q Wait For Window Shown win win resize w h start time time while True w1 h1 win width win height if w h w1 h1 return Qt Test Q Test q Wait 10 if time time - start > timeout raise Timeout Error ' Windowresizefailed requested%dx%d got%dx%d ' % w h w1 h1
def amp server context factory ca certificate control credential return Control Service Context Factory ca certificate control credential 'node-'
def amp server context factory ca certificate control credential return Control Service Context Factory ca certificate control credential 'node-'
def get info from core path full exe path Noneoutput commands getoutput 'gdb-c%sbatch' % path path pattern re compile " Corewasgeneratedby` [^\x 00 ]+ '" re IGNORECASE match re findall path pattern output for m in match m m split '' [0 ]if os path isfile m full exe path mbreakif full exe path is None syslog syslog ' Couldnotdeterminefromwhichapplicationcorefile%sisfrom' % path return {'full exe path' full exe path}
def get info from core path full exe path Noneoutput commands getoutput 'gdb-c%sbatch' % path path pattern re compile " Corewasgeneratedby` [^\x 00 ]+ '" re IGNORECASE match re findall path pattern output for m in match m m split '' [0 ]if os path isfile m full exe path mbreakif full exe path is None syslog syslog ' Couldnotdeterminefromwhichapplicationcorefile%sisfrom' % path return {'full exe path' full exe path}
def takes args function return bool function code co flags & 4
def takes args function return bool function code co flags & 4
def flatten results for row in results yield c value for c in row
def Extract Proxy Config product yaml key proxy config data cafile proxy config data get 'cafile' None disable certificate validation proxy config data get 'disable certificate validation' False http proxy Extract Proxy HTTP PROXY YAML KEY proxy config data https proxy Extract Proxy HTTPS PROXY YAML KEY proxy config data proxy config Proxy Config http proxy http proxy https proxy https proxy cafile cafile disable certificate validation disable certificate validation return proxy config
def apply gmail label rules db session message added categories removed categories add {}discard {}categories {c name c for c in message categories if c name}for cat in added categories if cat name 'all' discard {'trash' 'spam'}elif cat name 'trash' discard {'all' 'spam' 'inbox'}elif cat name 'spam' discard {'all' 'trash' 'inbox'}elif cat name 'inbox' add {'all'}discard {'trash' 'spam'}for name in add if name not in categories category db session query Category filter Category namespace id message namespace id Category name name one message categories add category for name in discard if name in categories message categories discard categories[name]
def bbox to array arr label 0 max bboxes 64 bbox width 16 arr pad bbox arr max bboxes bbox width return arr[np newaxis ]
def bbox to array arr label 0 max bboxes 64 bbox width 16 arr pad bbox arr max bboxes bbox width return arr[np newaxis ]
def fill in subscriptions apps schema editor Project apps get model u'trans' u' Project' Group apps get model u'auth' u' Group' Profile apps get model u'accounts' u' Profile' for project in Project objects all for owner in project owners all try owner profile subscriptions add project except Profile Does Not Exist passif project enable acl try group Group objects get name project name for user in group user set all try user profile subscriptions add project except Profile Does Not Exist passexcept Group Does Not Exist pass
def fill in subscriptions apps schema editor Project apps get model u'trans' u' Project' Group apps get model u'auth' u' Group' Profile apps get model u'accounts' u' Profile' for project in Project objects all for owner in project owners all try owner profile subscriptions add project except Profile Does Not Exist passif project enable acl try group Group objects get name project name for user in group user set all try user profile subscriptions add project except Profile Does Not Exist passexcept Group Does Not Exist pass
@utils arg 'os' metavar '<os>' help ' Typeof OS ' @utils arg 'architecture' metavar '<architecture>' help ' Typeofarchitecture ' @utils arg 'version' metavar '<version>' help ' Version ' @utils arg 'url' metavar '<url>' help 'URL ' @utils arg 'md 5 hash' metavar '<md 5 hash>' help 'MD 5 hash ' @utils arg 'hypervisor' metavar '<hypervisor>' default 'xen' help ' Typeofhypervisor ' def do agent create cs args result cs agents create args os args architecture args version args url args md 5 hash args hypervisor utils print dict result to dict
def get flat core sizes cores core sizes lists []for core in cores flat output size nest flatten core output size core sizes lists append [tensor shape as shape size as list for size in flat output size] return core sizes lists
@celery taskdef send reset token user token make token user user operation 'reset password' send email subject ' Password Recovery Confirmation' recipients [user email] text body render template 'email/reset password txt' user user token token html body render template 'email/reset password html' user user token token
def wrap result name data sparse index fill value dtype None if name in 'eq' 'ne' 'lt' 'gt' 'le' 'ge' dtype np boolif is bool dtype dtype fill value bool fill value return Sparse Array data sparse index sparse index fill value fill value dtype dtype
@utils arg 'host' metavar '<hostname>' help ' Nameofhost ' def do host describe cs args result cs hosts get args host columns ['HOST' 'PROJECT' 'cpu' 'memory mb' 'disk gb']utils print list result columns
def get Key A row column prefix '' return '%sa%s%s' % prefix row column
def authorize permits True authz class None if authz class is None authz class 'tests core support Allow Authorization Policy'def wrapper f @functools wraps f def wrapped *args **kwargs with mock patch '%s permits' % authz class return value permits return f *args **kwargs return wrappedreturn wrapper
def authorize permits True authz class None if authz class is None authz class 'tests core support Allow Authorization Policy'def wrapper f @functools wraps f def wrapped *args **kwargs with mock patch '%s permits' % authz class return value permits return f *args **kwargs return wrappedreturn wrapper
def get valid domains domains valid domains []for domain in domains try valid domains append util enforce domain sanity domain except errors Configuration Error continuereturn valid domains
def complex expand series context builder ty initial x coefs assert ty in types complex domain binary sig typing signature * [ty] * 3 accum context make complex builder ty value initial ONE context get constant ty underlying float 1 0 for coef in reversed coefs constant context get constant ty underlying float coef value numbers complex mul impl context builder binary sig [x accum getvalue ] accum setvalue value accum real builder fadd ONE builder fmul accum real constant accum imag builder fmul accum imag constant return accum getvalue
def complex expand series context builder ty initial x coefs assert ty in types complex domain binary sig typing signature * [ty] * 3 accum context make complex builder ty value initial ONE context get constant ty underlying float 1 0 for coef in reversed coefs constant context get constant ty underlying float coef value numbers complex mul impl context builder binary sig [x accum getvalue ] accum setvalue value accum real builder fadd ONE builder fmul accum real constant accum imag builder fmul accum imag constant return accum getvalue
def complex expand series context builder ty initial x coefs assert ty in types complex domain binary sig typing signature * [ty] * 3 accum context make complex builder ty value initial ONE context get constant ty underlying float 1 0 for coef in reversed coefs constant context get constant ty underlying float coef value numbers complex mul impl context builder binary sig [x accum getvalue ] accum setvalue value accum real builder fadd ONE builder fmul accum real constant accum imag builder fmul accum imag constant return accum getvalue
def complex expand series context builder ty initial x coefs assert ty in types complex domain binary sig typing signature * [ty] * 3 accum context make complex builder ty value initial ONE context get constant ty underlying float 1 0 for coef in reversed coefs constant context get constant ty underlying float coef value numbers complex mul impl context builder binary sig [x accum getvalue ] accum setvalue value accum real builder fadd ONE builder fmul accum real constant accum imag builder fmul accum imag constant return accum getvalue
def complex expand series context builder ty initial x coefs assert ty in types complex domain binary sig typing signature * [ty] * 3 accum context make complex builder ty value initial ONE context get constant ty underlying float 1 0 for coef in reversed coefs constant context get constant ty underlying float coef value numbers complex mul impl context builder binary sig [x accum getvalue ] accum setvalue value accum real builder fadd ONE builder fmul accum real constant accum imag builder fmul accum imag constant return accum getvalue
def require name version None def decorator obj @functools wraps obj def func wrapped *args **kwargs if is installed name version return obj *args **kwargs else msg '"%s"in"%s"requires"%s'msg msg % obj obj module name if not version is None msg + '%s' % version raise Import Error msg + '"' return func wrappedreturn decorator
def require name version None def decorator obj @functools wraps obj def func wrapped *args **kwargs if is installed name version return obj *args **kwargs else msg '"%s"in"%s"requires"%s'msg msg % obj obj module name if not version is None msg + '%s' % version raise Import Error msg + '"' return func wrappedreturn decorator
def run benchmark with tf Graph as default image size 224 images tf Variable tf random normal [FLAGS batch size image size image size 3] dtype tf float 32 stddev 0 1 pool 5 parameters inference images init tf global variables initializer config tf Config Proto config gpu options allocator type 'BFC'sess tf Session config config sess run init time tensorflow run sess pool 5 ' Forward' objective tf nn l2 loss pool 5 grad tf gradients objective parameters time tensorflow run sess grad ' Forward-backward'
def create service check check name status tags None timestamp None hostname None check run id None message None if check run id is None check run id get next id 'service check' return {'id' check run id 'check' check name 'status' status 'host name' hostname 'tags' tags 'timestamp' float timestamp or time time 'message' message}
def watch callback obj weakref method name *args **kwargs obj obj weakref if obj is None returngetattr obj method name *args **kwargs
def watch callback obj weakref method name *args **kwargs obj obj weakref if obj is None returngetattr obj method name *args **kwargs
def asa d1 l d2 xy Line 0 0 slope slope d1 intersection Line l 0 slope slope 180 - d2 [0 ]return Triangle 0 0 l 0 xy
@ensure csrf cookiedef jump to request course id location try course key Course Key from string course id usage key Usage Key from string location replace course key course key except Invalid Key Error raise Http 404 u' Invalidcourse keyorusage key' try redirect url get redirect url course key usage key user request useruser is global staff Global Staff has user user user is enrolled Course Enrollment is enrolled user course key if user is global staff and not user is enrolled redirect url get redirect url for global staff course key next redirect url except Item Not Found Error raise Http 404 u' Nodataatthislocation {0 }' format usage key except No Path To Item raise Http 404 u' Thislocationisnotinanyclass {0 }' format usage key return redirect redirect url
@ensure csrf cookiedef jump to request course id location try course key Course Key from string course id usage key Usage Key from string location replace course key course key except Invalid Key Error raise Http 404 u' Invalidcourse keyorusage key' try redirect url get redirect url course key usage key user request useruser is global staff Global Staff has user user user is enrolled Course Enrollment is enrolled user course key if user is global staff and not user is enrolled redirect url get redirect url for global staff course key next redirect url except Item Not Found Error raise Http 404 u' Nodataatthislocation {0 }' format usage key except No Path To Item raise Http 404 u' Thislocationisnotinanyclass {0 }' format usage key return redirect redirect url
def netstat name sanitize name str name netstat infos salt ['cmd run'] 'netstat-nap' found infos []ret []for info in netstat infos splitlines if info find sanitize name -1 found infos append info ret extend [sanitize name found infos] return ret
def footer logo img is secure logo name configuration helpers get value 'FOOTER ORGANIZATION IMAGE' settings FOOTER ORGANIZATION IMAGE try return absolute url staticfile is secure logo name except Value Error default logo 'images/logo png'log info " Failedtofindfooterlogoat'%s' using'%s'instead" logo name default logo return staticfiles storage url default logo
def check csrf token request token 'csrf token' header 'X-CSRF- Token' raises True supplied token ''if token is not None supplied token request POST get token '' if supplied token '' and header is not None supplied token request headers get header '' expected token request session get csrf token if strings differ bytes expected token bytes supplied token if raises raise Bad CSRF Token 'check csrf token Invalidtoken' return Falsereturn True
def use appnope return sys platform 'darwin' and V platform mac ver [0 ] > V '10 9'
def get python library path dlls get Imports sys executable for filename in dlls for name in PYDYLIB NAMES if os path basename filename name if is win and not os path isabs filename filename getfullnameof filename return filenameif is unix for name in PYDYLIB NAMES python libname find Library name if python libname return python libnameelif is darwin prefixes [compat base prefix os path join compat base prefix 'lib' ]for prefix in prefixes for name in PYDYLIB NAMES full path os path join prefix name if os path exists full path return full pathreturn None
def get Bus Freq if import Ctypes Failed return Falsemib ctypes c int * 2 CTL HW HW BUS FREQ val ctypes c int int Size ctypes c int ctypes sizeof val cocoa sysctl ctypes byref mib 2 ctypes byref val ctypes byref int Size 0 0 return val value
def graph connected component graph node id n node graph shape[ 0 ]if sparse issparse graph graph graph tocsr connected nodes np zeros n node dtype np bool nodes to explore np zeros n node dtype np bool nodes to explore[node id] Truefor in range n node last num component connected nodes sum np logical or connected nodes nodes to explore out connected nodes if last num component > connected nodes sum breakindices np where nodes to explore [0 ]nodes to explore fill False for i in indices if sparse issparse graph neighbors graph[i] toarray ravel else neighbors graph[i]np logical or nodes to explore neighbors out nodes to explore return connected nodes
def graph connected component graph node id n node graph shape[ 0 ]if sparse issparse graph graph graph tocsr connected nodes np zeros n node dtype np bool nodes to explore np zeros n node dtype np bool nodes to explore[node id] Truefor in range n node last num component connected nodes sum np logical or connected nodes nodes to explore out connected nodes if last num component > connected nodes sum breakindices np where nodes to explore [0 ]nodes to explore fill False for i in indices if sparse issparse graph neighbors graph[i] toarray ravel else neighbors graph[i]np logical or nodes to explore neighbors out nodes to explore return connected nodes
def graph connected component graph node id n node graph shape[ 0 ]if sparse issparse graph graph graph tocsr connected nodes np zeros n node dtype np bool nodes to explore np zeros n node dtype np bool nodes to explore[node id] Truefor in range n node last num component connected nodes sum np logical or connected nodes nodes to explore out connected nodes if last num component > connected nodes sum breakindices np where nodes to explore [0 ]nodes to explore fill False for i in indices if sparse issparse graph neighbors graph[i] toarray ravel else neighbors graph[i]np logical or nodes to explore neighbors out nodes to explore return connected nodes
def make color table in class for name value in color templates setattr in class name in class base % value
def delete Menu Items menu try last Menu Index menu index Tkinter END if last Menu Index None menu delete 0 last Menu Index except print 'thisshouldneverhappen thelast Menu Indexindelete Menu Itemsinsettingscouldnotbedetermined '
def parse number stream rv ''while stream peek and stream peek in string digits rv + next stream return int rv
def get deprecated tense removal version future tense u'willbe' past tense u'was' return future tense if Version removal version > PANTS SEMVER else past tense
def broken send *args **kwargs raise SMTP Exception ' Failuremockedbylettuce'
def match pattern data vars None if vars is None vars {}if type pattern is List Type vars[pattern[ 0 ]] datareturn 1 vars if type pattern is not Tuple Type return pattern data vars if len data len pattern return 0 vars for pattern data in map None pattern data same vars match pattern data vars if not same breakreturn same vars
def create l2 gw service cluster tenant id display name devices tags [{'tag' tenant id 'scope' 'os tid'}]gateways [{'transport node uuid' device['id'] 'device id' device['interface name'] 'type' 'L 2 Gateway'} for device in devices]gwservice obj {'display name' check and truncate name display name 'tags' tags 'gateways' gateways 'type' 'L 2 Gateway Service Config'}try return json loads do single request 'POST' build uri path GWSERVICE RESOURCE json dumps gwservice obj cluster cluster except Nvp Api Client Nvp Api Exception LOG exception ' Anexceptionoccuredwhilecommunicatingwiththe NV Pcontrollerforcluster %s' cluster name raise
def setup platform hass config add devices discovery info None add devices [ Demo Lock ' Front Door' STATE LOCKED Demo Lock ' Kitchen Door' STATE UNLOCKED ]
def Web Template key defweb wdir if wdir is None try wdir fix webname key except wdir ''if not wdir wdir defwebif key key set wdir if not wdir return ''full dir real path sabnzbd DIR INTERFACES wdir full main real path full dir DEF MAIN TMPL logging info ' Webdiris%s' full dir if not os path exists full main if defweb DEF STDCONFIG return ''logging warning T ' Cannotfindwebtemplate %s tryingstandardtemplate' full main full dir real path sabnzbd DIR INTERFACES DEF STDINTF full main real path full dir DEF MAIN TMPL if not os path exists full main logging exception ' Cannotfindstandardtemplate %s' full dir panic tmpl full dir exit sab 1 return real path full dir 'templates'
def list security groups profile None conn auth profile return conn list security groups
def stats ret {}out salt ['cmd run'] 'quotastats' splitlines for line in out if not line continuecomps line split ' ' ret[comps[ 0 ]] comps[ 1 ]return ret
@pytest mark cmd@pytest mark django dbdef test update tmserver nosetting capfd po directory tp 0 with pytest raises Command Error as e call command 'update tmserver' assert 'POOTLE TM SERVE Rsettingismissing ' in str e
@cached classmethoddef get edit handler cls if hasattr cls u'edit handler' return cls edit handler bind to model cls tabs []if cls content panels tabs append Object List cls content panels heading ugettext lazy u' Content' if cls promote panels tabs append Object List cls promote panels heading ugettext lazy u' Promote' if cls settings panels tabs append Object List cls settings panels heading ugettext lazy u' Settings' classname u'settings' Edit Handler Tabbed Interface tabs base form class cls base form class return Edit Handler bind to model cls
@cached classmethoddef get edit handler cls if hasattr cls u'edit handler' return cls edit handler bind to model cls tabs []if cls content panels tabs append Object List cls content panels heading ugettext lazy u' Content' if cls promote panels tabs append Object List cls promote panels heading ugettext lazy u' Promote' if cls settings panels tabs append Object List cls settings panels heading ugettext lazy u' Settings' classname u'settings' Edit Handler Tabbed Interface tabs base form class cls base form class return Edit Handler bind to model cls
def get entities custom fields entities custom fields set for entity in entities fields dir entity for field in fields if not field startswith ' ' custom fields add field for skip field in [' Partition Key' ' Row Key' ' Timestamp' 'etag'] custom fields discard skip field return custom fields
def parse Lines chunk items {}for lineno line in chunk header data line split ' ' 1 header header lower items[header] lineno data strip return items
def make action app factory hostname 'localhost' port 5000 threaded False processes 1 stream None sort by 'time' 'calls' restrictions def action hostname 'h' hostname port 'p' port threaded threaded processes processes ' Startanewdevelopmentserver 'from werkzeug serving import run simpleapp Profiler Middleware app factory stream sort by restrictions run simple hostname port app False None threaded processes return action
def init macro recorder Macro Recorder objreg register 'macro-recorder' macro recorder
def get vcenter version kwargs None call None if call 'function' raise Salt Cloud System Exit ' Theget vcenter versionfunctionmustbecalledwith-for--function ' inv salt utils vmware get inventory get si return inv about full Name
def escalate prerelease permissions app validation version app permissions validation get 'permissions' or [] if any perm in PRERELEASE PERMISSIONS for perm in app permissions nobody User Profile objects get email settings NOBODY EMAIL ADDRESS escalate app app version nobody ' Appusesprereleasepermissions' mkt LOG ESCALATION PRERELEASE APP
def get date time format '%Y-%m-%d%H %M %S' UTC OFFSET 3 local datetime datetime now now local datetime - timedelta hours UTC OFFSET if format 'datetime Property' now now strftime format return now
def get Python File Names Except Init file In Directory '' python File Names Except Init get Files With File Type Without Words 'py' [' init py'] file In Directory python File Names Except Init sort return python File Names Except Init
@verbosedef tfr morlet inst freqs n cycles use fft False return itc True decim 1 n jobs 1 picks None zero mean True average True verbose None tfr params dict n cycles n cycles n jobs n jobs use fft use fft zero mean zero mean return tfr aux 'morlet' inst freqs decim return itc picks average **tfr params
@commands u'cur' u'currency' u'exchange' @example u' cur 20 EU Rin USD' def exchange bot trigger if not trigger group 2 return bot reply u' Nosearchterm Anexample cur 20 EU Rin USD' match regex match trigger group 2 if not match bot reply u" Sorry Ididn'tunderstandtheinput " return NOLIMIT amount of to match groups try amount float amount except bot reply u" Sorry Ididn'tunderstandtheinput " display bot amount of to
@pytest mark networkdef test upgrade vcs req with no dists found script tmpdir req '%s#egg pip-test-package' % local checkout 'git+http //github com/pypa/pip-test-package git' tmpdir join 'cache' script pip 'install' req result script pip 'install' '-U' req assert not result returncode
@pytest mark networkdef test upgrade vcs req with no dists found script tmpdir req '%s#egg pip-test-package' % local checkout 'git+http //github com/pypa/pip-test-package git' tmpdir join 'cache' script pip 'install' req result script pip 'install' '-U' req assert not result returncode
def flatpages link list request from django contrib flatpages models import Flat Pagelink list [ page title page url for page in Flat Page objects all ]return render to link list link list
def default completers return collections Ordered Dict [ 'python mode' complete python mode 'base' complete base 'completer' complete completer 'skip' complete skipper 'pip' complete pip 'cd' complete cd 'rmdir' complete rmdir 'xonfig' complete xonfig 'xontrib' complete xontrib 'bash' complete from bash 'man' complete from man 'import' complete import 'python' complete python 'path' complete path ]
def install builtins [' '] gettext
def install builtins [' '] gettext
def install builtins [' '] gettext
def fuzzy url urlstr cwd None relative False do search True force search False urlstr urlstr strip path get path if valid urlstr cwd cwd relative relative check exists True if not force search and path is not None url Q Url from Local File path elif force search or do search and not is url urlstr log url debug 'UR Lisafuzzysearchterm' try url get search url urlstr except Value Error url qurl from user input urlstr else log url debug 'UR Lisafuzzyaddress' url qurl from user input urlstr log url debug ' Convertingfuzzyterm{ r}to URL->{}' format urlstr url to Display String if do search and config get 'general' 'auto-search' and urlstr qtutils ensure valid url elif not url is Valid raise Invalid Url Error url return url
@conf commands registerdef srbt 1 peer pkts *args **kargs a b srbt peer pkts *args **kargs if len a > 0 return a[ 0 ][ 1 ]
@conf commands registerdef srbt 1 peer pkts *args **kargs a b srbt peer pkts *args **kargs if len a > 0 return a[ 0 ][ 1 ]
def test encounter slots session version group a aliased tables Version Group version group b aliased tables Version Group sanity q session query tables Encounter join tables Encounter Slot tables Encounter slot join version group a tables Encounter Slot version group join tables Version tables Encounter version join version group b tables Version version group filter version group a id version group b id assert sanity q count 0
def name from basename basename return u'icons ' + basename
def name from basename basename return u'icons ' + basename
def linux standby if not HAVE DBUS return proxy interface get sessionproxy if proxy if proxy Can Suspend proxy Suspend dbus interface interface else proxy interface pinterface get systemproxy 'U Power' if not proxy proxy interface pinterface get systemproxy ' Device Kit' if proxy if proxy Get interface 'can-suspend' dbus interface pinterface try proxy Suspend dbus interface interface except dbus exceptions D Bus Exception as msg logging info ' Receiveda D Busexception%s' msg else logging info 'D Busdoesnotsupport Suspend standby ' time sleep 10
def has configuration override name configuration get current site configuration if configuration and name in configuration values return Truereturn False
def get values profile None profile profile or {} serializers salt loader serializers opts ret {}for fname in profile get 'files' [] try with salt utils flopen fname as f contents serializers yaml deserialize f ret salt utils dictupdate merge ret contents **profile get 'merge' {} except IO Error log error " Filenotfound'{ 0 }'" format fname except Type Error log error " Errordeserializingsdbfile'{ 0 }'" format fname return ret
def start scan helper target urls scan profile scan info setup scan info Scan Info SCANS[get new scan id ] scan infoscan info w3 af core w3 af core w3 af Core scan info target urls target urlsscan info output RESTAPI Output scan info setup set scan profile file name profile path create temp profile scan profile om manager set output plugins [] try w3 af core profiles use profile scan profile file name workdir profile path target options w3 af core target get options target option target options['target']target option set value [URL u for u in target urls] w3 af core target set options target options w3 af core plugins init plugins om manager set output plugin inst scan info output w3 af core verify environment w3 af core start except Exception as e scan info exception etry w3 af core stop except Attribute Error passfinally scan info finished Truetry os unlink os path join profile path scan profile file name except Attribute Error IO Error as pass
def replace conditional match string conditional match CONDITIONAL search string while conditional match start conditional match start end find closing brace string start + 4 args split conditional string[ start + 4 end - 1 ] rv ''if match group int conditional match group 1 rv unescape replace conditional match args[ 0 ] elif len args > 1 rv unescape replace conditional match args[ 1 ] string string[ start] + rv + string[end ] conditional match CONDITIONAL search string return string
def replace conditional match string conditional match CONDITIONAL search string while conditional match start conditional match start end find closing brace string start + 4 args split conditional string[ start + 4 end - 1 ] rv ''if match group int conditional match group 1 rv unescape replace conditional match args[ 0 ] elif len args > 1 rv unescape replace conditional match args[ 1 ] string string[ start] + rv + string[end ] conditional match CONDITIONAL search string return string
def apply template template dir output dir context mergetreejinja template dir output dir context
def apply template template dir output dir context mergetreejinja template dir output dir context
def get portage return reload portage
def get portage return reload portage
def test on content type formatter hug output format on content type {'application/json' hug output format json 'text/plain' hug output format text} class Fake Request object content type 'application/json'request Fake Request response Fake Request converted hug input format json formatter Bytes IO hug output format json {'name' 'name'} request response assert converted {'name' 'name'} request content type 'text/plain'assert formatter 'hi' request response 'hi' with pytest raises hug HTTP Not Acceptable request content type 'undefined always'formatter 'hi' request response
def test on content type formatter hug output format on content type {'application/json' hug output format json 'text/plain' hug output format text} class Fake Request object content type 'application/json'request Fake Request response Fake Request converted hug input format json formatter Bytes IO hug output format json {'name' 'name'} request response assert converted {'name' 'name'} request content type 'text/plain'assert formatter 'hi' request response 'hi' with pytest raises hug HTTP Not Acceptable request content type 'undefined always'formatter 'hi' request response
def read config file option opt value parser try new settings parser get config file settings value except Value Error as error parser error error parser values update new settings parser
def create return url base query **kwargs part urlsplit base if part fragment raise Value Error " Base UR Lcontainedpartsitshouldn't" for key values in parse qs query items if key in kwargs if isinstance kwargs[key] basestring kwargs[key] [kwargs[key]]kwargs[key] extend values else kwargs[key] valuesif part query for key values in parse qs part query items if key in kwargs if isinstance kwargs[key] basestring kwargs[key] [kwargs[key]]kwargs[key] extend values else kwargs[key] values pre base split '?' [0 ]else pre baselogger debug 'kwargs %s' % kwargs return '%s?%s' % pre url encode params kwargs
def create return url base query **kwargs part urlsplit base if part fragment raise Value Error " Base UR Lcontainedpartsitshouldn't" for key values in parse qs query items if key in kwargs if isinstance kwargs[key] basestring kwargs[key] [kwargs[key]]kwargs[key] extend values else kwargs[key] valuesif part query for key values in parse qs part query items if key in kwargs if isinstance kwargs[key] basestring kwargs[key] [kwargs[key]]kwargs[key] extend values else kwargs[key] values pre base split '?' [0 ]else pre baselogger debug 'kwargs %s' % kwargs return '%s?%s' % pre url encode params kwargs
def create return url base query **kwargs part urlsplit base if part fragment raise Value Error " Base UR Lcontainedpartsitshouldn't" for key values in parse qs query items if key in kwargs if isinstance kwargs[key] basestring kwargs[key] [kwargs[key]]kwargs[key] extend values else kwargs[key] valuesif part query for key values in parse qs part query items if key in kwargs if isinstance kwargs[key] basestring kwargs[key] [kwargs[key]]kwargs[key] extend values else kwargs[key] values pre base split '?' [0 ]else pre baselogger debug 'kwargs %s' % kwargs return '%s?%s' % pre url encode params kwargs
def clear entries options with Session as session query session query Pending Entry filter Pending Entry approved False if options task name query query filter Pending Entry task name options task name deleted query delete console u' Successfullydeleted%ipendingentries' % deleted
def update user attributes user profile attributes dict save False profile fields []if profile profile fields [f name for f in profile meta fields]user fields [f name for f in user meta fields]is profile field lambda f f in profile fields and hasattr profile f is user field lambda f f in user fields and hasattr user f for f value in attributes dict items if is profile field f setattr profile f value profile fb is dirty Trueelif is user field f setattr user f value user fb is dirty Trueelse logger info 'skippingupdateoffield%s' f if save if getattr user ' fb is dirty' False user save if profile and getattr profile ' fb is dirty' False profile save
def setup platform hass config add devices discovery info None from pysabnzbd import Sabnzbd Api Sabnzbd Api Exceptionhost config get CONF HOST port config get CONF PORT name config get CONF NAME api key config get CONF API KEY monitored types config get CONF MONITORED VARIABLES use ssl config get CONF SSL if use ssl uri scheme 'https //'else uri scheme 'http //'base url '{}{} {}/' format uri scheme host port sab api Sabnzbd Api base url api key try sab api check available except Sabnzbd Api Exception LOGGER error ' Connectionto SA Bnzbd AP Ifailed' return Falseglobal THROTTLED REFRESH THROTTLED REFRESH Throttle MIN TIME BETWEEN UPDATES sab api refresh queue devices []for variable in monitored types devices append Sabnzbd Sensor variable sab api name add devices devices
def widgets sorter widget return WIDGETS[widget] order
def validate index index vals from numbers import Numberif isinstance index vals[ 0 ] Number if not all isinstance item Number for item in index vals raise exceptions Plotly Error ' Errorinindexingcolumn Makesureallentriesofeachcolumnareallnumbersorallstrings ' elif isinstance index vals[ 0 ] str if not all isinstance item str for item in index vals raise exceptions Plotly Error ' Errorinindexingcolumn Makesureallentriesofeachcolumnareallnumbersorallstrings '
def get Point Plus Segment With Length length point segment return segment * length / abs segment + point
def get Master Password global Master Password pw ok Q Input Dialog get Text None Q Core Application translate u' Crypto' u' Master Password' Q Core Application translate u' Crypto' u' Enterthemasterpassword ' Q Line Edit Password if ok from py 3 PBKDF 2 import verify Passwordmaster Password Preferences get User u' Master Password' try if master Password if verify Password pw master Password Master Password pw Encode pw else E5 Message Box warning None Q Core Application translate u' Crypto' u' Master Password' Q Core Application translate u' Crypto' u' Thegivenpasswordisincorrect ' else E5 Message Box critical None Q Core Application translate u' Crypto' u' Master Password' Q Core Application translate u' Crypto' u' Thereisnomasterpasswordregistered ' except Value Error as why E5 Message Box warning None Q Core Application translate u' Crypto' u' Master Password' Q Core Application translate u' Crypto' u'<p> Thegivenpasswordcannotbeverified </p><p> Reason {0 }' format str why
@require POST@login requireddef update coupon request course id coupon id request POST get 'coupon id' None if not coupon id return Json Response {'message' 'couponidnotfound' } status 400 try coupon Coupon objects get pk coupon id except Object Does Not Exist return Json Response {'message' 'couponwiththecouponid {coupon id} Does Not Exist' format coupon id coupon id } status 400 description request POST get 'description' coupon description descriptioncoupon save return Json Response {'message' 'couponwiththecouponid {coupon id} updated Successfully' format coupon id coupon id }
def absent name region None key None keyid None profile None ret {'name' name 'result' True 'comment' '' 'changes' {}}is present salt ['boto cloudwatch get alarm'] name region key keyid profile if is present if opts ['test'] ret['comment'] 'alarm{ 0 }issettoberemoved ' format name ret['result'] Nonereturn retdeleted salt ['boto cloudwatch delete alarm'] name region key keyid profile if deleted ret['changes']['old'] nameret['changes']['new'] Noneelse ret['result'] Falseret['comment'] ' Failedtodelete{ 0 }alarm ' format name else ret['comment'] '{ 0 }doesnotexistin{ 1 } ' format name region return ret
def paging pause 0 marker property 'marker' def wrapper f def page *args **kwargs results []marker Nonewhile True try new f marker marker *args **kwargs marker getattr new marker property results extend new if not marker breakelif pause sleep pause except Type Error results f *args **kwargs breakreturn resultsreturn pagereturn wrapper
def paging pause 0 marker property 'marker' def wrapper f def page *args **kwargs results []marker Nonewhile True try new f marker marker *args **kwargs marker getattr new marker property results extend new if not marker breakelif pause sleep pause except Type Error results f *args **kwargs breakreturn resultsreturn pagereturn wrapper
def paging pause 0 marker property 'marker' def wrapper f def page *args **kwargs results []marker Nonewhile True try new f marker marker *args **kwargs marker getattr new marker property results extend new if not marker breakelif pause sleep pause except Type Error results f *args **kwargs breakreturn resultsreturn pagereturn wrapper
def paging pause 0 marker property 'marker' def wrapper f def page *args **kwargs results []marker Nonewhile True try new f marker marker *args **kwargs marker getattr new marker property results extend new if not marker breakelif pause sleep pause except Type Error results f *args **kwargs breakreturn resultsreturn pagereturn wrapper
def feed cli with input text editing mode Editing Mode EMACS clipboard None history None multiline False check line ending True pre run callback None if check line ending assert text endswith u'\n' loop Posix Event Loop try inp Pipe Input inp send text text cli Command Line Interface application Application buffer Buffer accept action Accept Action RETURN DOCUMENT history history is multiline multiline editing mode editing mode clipboard clipboard or In Memory Clipboard key bindings registry Key Binding Manager for prompt registry eventloop loop input inp output Dummy Output if pre run callback pre run callback cli result cli run return result cli finally loop close inp close
def gcd a b while b a b b a % b return a
def apply Redirects manifest redirects for binding in redirects for dep in manifest dependent Assemblies if match binding redirect dep binding logger info ' Redirecting%sversion%s->%s' binding name dep version binding new Version dep version binding new Version
def bulk update nodes serialize nodes index None index index or INDEX actions []for node in nodes serialized serialize node if serialized actions append {' op type' 'update' ' index' index ' id' node id ' type' get doctype from node node 'doc' serialized 'doc as upsert' True} if actions return helpers bulk client actions
def test now now datetime datetime utcnow t Time now assert t format 'datetime' assert t scale 'utc' dt t datetime - now if sys version info[ 2] < 2 7 total secs lambda td td microseconds + td seconds + td days * 24 * 3600 * 10 ** 6 / 10 ** 6 0 else total secs lambda td td total seconds assert total secs dt < 0 1
def test now now datetime datetime utcnow t Time now assert t format 'datetime' assert t scale 'utc' dt t datetime - now if sys version info[ 2] < 2 7 total secs lambda td td microseconds + td seconds + td days * 24 * 3600 * 10 ** 6 / 10 ** 6 0 else total secs lambda td td total seconds assert total secs dt < 0 1
def check key expired key node url if key in node private link keys deleted url furl url add {'status' 'expired'} urlreturn url
@pytest fixture scope 'session' def stubs return stubsmod
def test neg clrtype wrong case global calledcalled Falseclass My Type type def clr Type self global calledcalled Truereturn super My Type self clrtype class X object metaclass My Type Are Equal called False
def test neg clrtype wrong case global calledcalled Falseclass My Type type def clr Type self global calledcalled Truereturn super My Type self clrtype class X object metaclass My Type Are Equal called False
def cmd watch args if len args 0 mpstate status watch Nonereturnmpstate status watch args[ 0 ]print ' Watching%s' % mpstate status watch
@utils expects func args 'self' 'spec obj' def set update time on success function @functools wraps function def decorated function self spec obj return value Nonetry return value function self spec obj except Exception as e LOG warning LW ' Selectedhost % host sfailedtoconsumefrominstance Error % error s' {'host' self host 'error' e} else now timeutils utcnow self updated now replace tzinfo iso 8601 iso 8601 Utc return return valuereturn decorated function
@utils expects func args 'self' 'spec obj' def set update time on success function @functools wraps function def decorated function self spec obj return value Nonetry return value function self spec obj except Exception as e LOG warning LW ' Selectedhost % host sfailedtoconsumefrominstance Error % error s' {'host' self host 'error' e} else now timeutils utcnow self updated now replace tzinfo iso 8601 iso 8601 Utc return return valuereturn decorated function
def nopackage pkg name orphan True if is installed pkg name uninstall pkg name orphan
def generate indices f values False axes f axesif values axes [lrange len a for a in axes]return itertools product *axes
def list Of Features 2 Matrix features X numpy array [] Y numpy array [] for i f in enumerate features if i 0 X fY i * numpy ones len f 1 else X numpy vstack X f Y numpy append Y i * numpy ones len f 1 return X Y
def list Of Features 2 Matrix features X numpy array [] Y numpy array [] for i f in enumerate features if i 0 X fY i * numpy ones len f 1 else X numpy vstack X f Y numpy append Y i * numpy ones len f 1 return X Y
@instrumented task name 'sentry tasks options sync options' queue 'options' def sync options cutoff ONE HOUR cutoff dt timezone now - timedelta seconds cutoff for option in Option objects filter last updated gte cutoff dt iterator try opt default manager lookup key option key default manager store set cache opt option value except Unknown Option as e logger exception six text type e
@instrumented task name 'sentry tasks options sync options' queue 'options' def sync options cutoff ONE HOUR cutoff dt timezone now - timedelta seconds cutoff for option in Option objects filter last updated gte cutoff dt iterator try opt default manager lookup key option key default manager store set cache opt option value except Unknown Option as e logger exception six text type e
@instrumented task name 'sentry tasks options sync options' queue 'options' def sync options cutoff ONE HOUR cutoff dt timezone now - timedelta seconds cutoff for option in Option objects filter last updated gte cutoff dt iterator try opt default manager lookup key option key default manager store set cache opt option value except Unknown Option as e logger exception six text type e
@instrumented task name 'sentry tasks options sync options' queue 'options' def sync options cutoff ONE HOUR cutoff dt timezone now - timedelta seconds cutoff for option in Option objects filter last updated gte cutoff dt iterator try opt default manager lookup key option key default manager store set cache opt option value except Unknown Option as e logger exception six text type e
def task ready request remove request requests pop discard active request active requests discard discard reserved request reserved requests discard remove request request id None discard active request request discard reserved request request
@celery taskdef send activation token user token make token user user operation 'activate account' send email subject ' Account Activation' recipients [user email] text body render template 'email/activate account txt' user user token token html body render template 'email/activate account html' user user token token
def add Cube element Node faces inradius vertexes square [complex - inradius x - inradius y complex inradius x - inradius y complex inradius x inradius y complex - inradius x inradius y ]bottom Top Square triangle mesh get Add Indexed Loops square vertexes [ - inradius z inradius z] triangle mesh add Pillar By Loops faces bottom Top Square
@register function@jinja 2 contextfunctiondef sort link context pretty name sort field request context['request'] sort order clean sort param request get params [ k v for k v in urlparse parse qsl smart str request META['QUERY STRING'] if k not in 'sort' 'order' ]return create sort link pretty name sort field get params sort order
def migrate osx xdg data config assert is osx ' Thisfunctionshouldonlyberunon OSX 'xdg data home os path join os path expanduser '~' ' local' 'share' xdg aj home os path join xdg data home 'autojump' data path os path join xdg aj home 'autojump txt' backup path os path join xdg aj home 'autojump txt bak' if os path exists data path move file data path config['data path'] if os path exists backup path move file backup path config['backup path'] shutil rmtree xdg aj home if len os listdir xdg data home 0 shutil rmtree xdg data home
def migrate osx xdg data config assert is osx ' Thisfunctionshouldonlyberunon OSX 'xdg data home os path join os path expanduser '~' ' local' 'share' xdg aj home os path join xdg data home 'autojump' data path os path join xdg aj home 'autojump txt' backup path os path join xdg aj home 'autojump txt bak' if os path exists data path move file data path config['data path'] if os path exists backup path move file backup path config['backup path'] shutil rmtree xdg aj home if len os listdir xdg data home 0 shutil rmtree xdg data home
def get price infos context products quantity 1 mod ctx get module and context context prices mod get price infos ctx products quantity for module in get discount modules prices module discount prices ctx products prices return prices
def strategy largest first G colors return sorted G key G degree reverse True
def new agent bindings port 8084 spinnaker Gate Agent new instance from bindings 'gate' Gate Task Status new bindings port return spinnaker
def make testdata filename mission type filename return os path join os path dirname file ' ' mission type 'testdata' filename
@contextmanagerdef swap stdin and argv stdin data '' argv data tuple real stdin sys stdinif PY 3 sys stdin String IO stdin data sys stdin buffer Bytes IO to bytes stdin data else sys stdin Bytes IO to bytes stdin data real argv sys argvsys argv argv data yield sys stdin real stdinsys argv real argv
@contextmanagerdef swap stdin and argv stdin data '' argv data tuple real stdin sys stdinif PY 3 sys stdin String IO stdin data sys stdin buffer Bytes IO to bytes stdin data else sys stdin Bytes IO to bytes stdin data real argv sys argvsys argv argv data yield sys stdin real stdinsys argv real argv
def get Empty Z Loops archivable Objects import Radius should Print Warning z zone Arrangement empty Z zone Arrangement get Empty Z z visible Objects evaluate get Visible Objects archivable Objects visible Object Loops List boolean solid get Visible Object Loops List import Radius visible Objects empty Z loops euclidean get Concatenated List visible Object Loops List if euclidean is Loop List Intersecting loops loops boolean solid get Loops Union import Radius visible Object Loops List if should Print Warning print ' Warning thetrianglemeshsliceintersectsitselfinget Extruder Pathsinboolean geometry 'print ' Somethingwillstillbeprinted butthereisnoguaranteethatitwillbethecorrectshape 'print ' Oncethegcodeissaved youshouldcheckoverthelayerwithazof 'print zreturn loops
def add threading args parser parser add argument u'--threads' u'-T' default DEFAULT N THREADS type int help u' Numberofsimultaneousthreadstoexecute'
def demo print '---------------------------------------'print ' Processing%dsequencesfrom%dsamples' % len DEMO SEQUENCES len DEMO SAMPLE MAPPING print '---------------------------------------'for ix cur seq in enumerate DEMO SEQUENCES barcode cur seq[ 8]seq read cur seq[ 8 ]print '--->processingdemosequence' ixprint 'readbarcode ' barcodetry corrected barcode decode barcode 8 barcode orig sample id DEMO SAMPLE MAPPING[corrected barcode]if corrected barcode barcode print '*correctedbarcode ' corrected barcodeelse print '-noerrorbarcode ' corrected barcodeprint 'originalsampleid ' orig sample idprint 'sequenceread ' seq readexcept Value Error as e print ' ' str e 'skipping 'continue
def demo print '---------------------------------------'print ' Processing%dsequencesfrom%dsamples' % len DEMO SEQUENCES len DEMO SAMPLE MAPPING print '---------------------------------------'for ix cur seq in enumerate DEMO SEQUENCES barcode cur seq[ 8]seq read cur seq[ 8 ]print '--->processingdemosequence' ixprint 'readbarcode ' barcodetry corrected barcode decode barcode 8 barcode orig sample id DEMO SAMPLE MAPPING[corrected barcode]if corrected barcode barcode print '*correctedbarcode ' corrected barcodeelse print '-noerrorbarcode ' corrected barcodeprint 'originalsampleid ' orig sample idprint 'sequenceread ' seq readexcept Value Error as e print ' ' str e 'skipping 'continue
def find Elements With Id node elems None if elems is None elems {}id node get Attribute 'id' if id '' elems[id] nodeif node has Child Nodes for child in node child Nodes if child node Type 1 find Elements With Id child elems return elems
def get user settings from username username user model user models User Settings Model get by normalized username User Settings normalize username username if user model is None return Noneelse return get user settings user model id
def migrate hosted facts facts if 'master' in facts if 'router selector' in facts['master'] if 'hosted' not in facts facts['hosted'] {}if 'router' not in facts['hosted'] facts['hosted']['router'] {}facts['hosted']['router']['selector'] facts['master'] pop 'router selector' if 'registry selector' in facts['master'] if 'hosted' not in facts facts['hosted'] {}if 'registry' not in facts['hosted'] facts['hosted']['registry'] {}facts['hosted']['registry']['selector'] facts['master'] pop 'registry selector' return facts
def get markup filter display name name get markup filter name return {'textile' u' Textile' 'markdown' u' Markdown' 'restructuredtext' u're Structured Text'} get name u'HTML'
def get markup filter display name name get markup filter name return {'textile' u' Textile' 'markdown' u' Markdown' 'restructuredtext' u're Structured Text'} get name u'HTML'
def json dump data filename with open filename u'w' as fh json dump data fh cls JSON Encoder indent 2
def get available ctid current ctids list ctids if current ctids return max current ctids + 1 else return 1000
def get default compiler osname None platform None if osname is None osname os nameif platform is None platform sys platformfor pattern compiler in default compilers if re match pattern platform is not None or re match pattern osname is not None return compilerreturn 'unix'
def sort key new new def sort rl expr return new expr class *sorted expr args key key return sort rl
def Get Feed Item Ids For Campaign campaign feed feed item ids set try lhs operand campaign feed['matching Function']['lhs Operand']except Key Error lhs operand Noneif lhs operand and lhs operand[ 0 ][' Function Argument Operand Type'] ' Request Context Operand' request context operand lhs operand[ 0 ]if request context operand['context Type'] 'FEED ITEM ID' and campaign feed['matching Function']['operator'] 'IN' for argument in campaign feed['matching Function']['rhs Operand'] if argument['xsi type'] ' Constant Operand' feed item ids add argument['long Value'] return feed item ids
def Get Feed Item Ids For Campaign campaign feed feed item ids set try lhs operand campaign feed['matching Function']['lhs Operand']except Key Error lhs operand Noneif lhs operand and lhs operand[ 0 ][' Function Argument Operand Type'] ' Request Context Operand' request context operand lhs operand[ 0 ]if request context operand['context Type'] 'FEED ITEM ID' and campaign feed['matching Function']['operator'] 'IN' for argument in campaign feed['matching Function']['rhs Operand'] if argument['xsi type'] ' Constant Operand' feed item ids add argument['long Value'] return feed item ids
def tp read fd n return get hub threadpool apply read fd n
def normalize dotted fields document if isinstance document list prev documentfor i in prev normalize dotted fields i elif isinstance document dict for field in list document if ' ' in field parts field split ' ' prev documentfor part in parts[ -1 ] if part not in prev prev[part] {}prev prev[part]if isinstance document[field] dict list normalize dotted fields document[field] prev[parts[ -1 ]] document[field]document pop field elif isinstance document[field] dict list normalize dotted fields document[field]
def version compare value version operator 'eq' strict False op map {' ' 'eq' ' ' 'eq' 'eq' 'eq' '<' 'lt' 'lt' 'lt' '< ' 'le' 'le' 'le' '>' 'gt' 'gt' 'gt' '> ' 'ge' 'ge' 'ge' ' ' 'ne' '<>' 'ne' 'ne' 'ne'}if strict Version Strict Versionelse Version Loose Versionif operator in op map operator op map[operator]else raise errors Ansible Filter Error ' Invalidoperatortype' try method getattr py operator operator return method Version str value Version str version except Exception as e raise errors Ansible Filter Error ' Versioncomparison %s' % e
def fsencoding s encoding sys getfilesystemencoding if isinstance s unicode s s encode encoding return s
def get Unique Quote Index unique Quote Index word unique Quote Index + 1while get Token By Number unique Quote Index in word unique Quote Index + 1return unique Quote Index
def get original mod name item name if isinstance item name string types return get original mod name [item name] [0 ]else return get original mod name item name
def read file filename mode 'rb' fh open filename mode try return fh read finally fh close
def main logging manager configure logging Build Externals Logging Config verbose True os umask 18 top of tree external packages find top of autotest tree package dir os path join top of tree PACKAGE DIR install dir os path join top of tree INSTALL DIR if install dir not in sys path sys path insert 0 install dir env python path varname 'PYTHONPATH'env python path os environ get env python path varname '' if install dir + ' ' not in env python path os environ[env python path varname] ' ' join [install dir env python path] fetched packages fetch errors fetch necessary packages package dir install dir install errors build and install packages fetched packages install dir logging info 'compiling pyfilesin%sto pyc' install dir compileall compile dir install dir quiet True external packages system "chmod- Ra+r X'%s'" % install dir errors fetch errors + install errors for error msg in errors logging error error msg return len errors
def main logging manager configure logging Build Externals Logging Config verbose True os umask 18 top of tree external packages find top of autotest tree package dir os path join top of tree PACKAGE DIR install dir os path join top of tree INSTALL DIR if install dir not in sys path sys path insert 0 install dir env python path varname 'PYTHONPATH'env python path os environ get env python path varname '' if install dir + ' ' not in env python path os environ[env python path varname] ' ' join [install dir env python path] fetched packages fetch errors fetch necessary packages package dir install dir install errors build and install packages fetched packages install dir logging info 'compiling pyfilesin%sto pyc' install dir compileall compile dir install dir quiet True external packages system "chmod- Ra+r X'%s'" % install dir errors fetch errors + install errors for error msg in errors logging error error msg return len errors
def main logging manager configure logging Build Externals Logging Config verbose True os umask 18 top of tree external packages find top of autotest tree package dir os path join top of tree PACKAGE DIR install dir os path join top of tree INSTALL DIR if install dir not in sys path sys path insert 0 install dir env python path varname 'PYTHONPATH'env python path os environ get env python path varname '' if install dir + ' ' not in env python path os environ[env python path varname] ' ' join [install dir env python path] fetched packages fetch errors fetch necessary packages package dir install dir install errors build and install packages fetched packages install dir logging info 'compiling pyfilesin%sto pyc' install dir compileall compile dir install dir quiet True external packages system "chmod- Ra+r X'%s'" % install dir errors fetch errors + install errors for error msg in errors logging error error msg return len errors
def isotime at if at is None return Nonereturn at strftime '%Y-%m-%d T%H %M %SZ'
def remove masquerade zone None permanent True if zone cmd '--zone {0 }--remove-masquerade' format zone else cmd '--remove-masquerade'if permanent cmd + '--permanent'return firewall cmd cmd
def get http status status code default reason ' Unknown' try code float status code code int code if code < 100 raise Value Errorexcept Value Error raise Value Error 'get http statusfailed "%s"isnotavalidstatuscode' status code try return getattr status codes 'HTTP ' + str code except Attribute Error return str code + '' + default reason
def get http status status code default reason ' Unknown' try code float status code code int code if code < 100 raise Value Errorexcept Value Error raise Value Error 'get http statusfailed "%s"isnotavalidstatuscode' status code try return getattr status codes 'HTTP ' + str code except Attribute Error return str code + '' + default reason
def get http status status code default reason ' Unknown' try code float status code code int code if code < 100 raise Value Errorexcept Value Error raise Value Error 'get http statusfailed "%s"isnotavalidstatuscode' status code try return getattr status codes 'HTTP ' + str code except Attribute Error return str code + '' + default reason
def generate site navigation pages config url context use dir urls True nav items []pages []previous Nonefor config line in pages config for page or header in follow config line url context use dir urls if isinstance page or header Header if page or header is top level nav items append page or header elif isinstance page or header Page if page or header is top level nav items append page or header pages append page or header if previous page or header previous page previousprevious next page page or headerprevious page or headerif len pages 0 raise exceptions Configuration Error u' Nopagesfoundinthepagesconfig Removeitentirelytoenableautomaticpagediscovery ' return nav items pages
def generate site navigation pages config url context use dir urls True nav items []pages []previous Nonefor config line in pages config for page or header in follow config line url context use dir urls if isinstance page or header Header if page or header is top level nav items append page or header elif isinstance page or header Page if page or header is top level nav items append page or header pages append page or header if previous page or header previous page previousprevious next page page or headerprevious page or headerif len pages 0 raise exceptions Configuration Error u' Nopagesfoundinthepagesconfig Removeitentirelytoenableautomaticpagediscovery ' return nav items pages
@pytest mark parametrize 'fast writer' [ True False] def test write no data ipac fast writer table ascii get reader Reader ascii Ipac data table read 't/no data ipac dat' for test def in test defs no data check write table test def data fast writer check write table via table test def data fast writer
@contextlib contextmanagerdef Handle Server Exception display True truncate False try try yield except Unknown Extra Conf as e if vimsupport Confirm str e Load Extra Conf File e extra conf file else Ignore Extra Conf File e extra conf file except Exception as e logger exception u' Errorwhilehandlingserverresponse' if display Display Server Exception e truncate
@contextlib contextmanagerdef Handle Server Exception display True truncate False try try yield except Unknown Extra Conf as e if vimsupport Confirm str e Load Extra Conf File e extra conf file else Ignore Extra Conf File e extra conf file except Exception as e logger exception u' Errorwhilehandlingserverresponse' if display Display Server Exception e truncate
def subgraph G nbunch return G subgraph nbunch
def flat palette color n colors 6 reverse False as cmap False input 'rgb' color color to rgb color input flat desaturate color 0 colors [color flat] if reverse else [flat color] return blend palette colors n colors as cmap
def compute residual proj op B orig fwd orig Q return np dot proj op B orig - np dot np dot Q fwd orig proj op T
def psave fname d f file fname 'w' pickle dump d f f close
def reverse version version if version try return reverse 'version-detail' kwargs {'pk' version pk} except Attribute Error return versionreturn
def reverse version version if version try return reverse 'version-detail' kwargs {'pk' version pk} except Attribute Error return versionreturn
def reverse version version if version try return reverse 'version-detail' kwargs {'pk' version pk} except Attribute Error return versionreturn
def filter re search val pattern if not isinstance val basestring return valresult re search pattern val if result return result group 0 return u''
def median absolute deviation a axis None if isinstance a np ma Masked Array func np ma medianelse func np mediana np asanyarray a a median func a axis axis if axis is not None a median np expand dims a median axis axis return func np abs a - a median axis axis
def xml format a if isinstance a basestring return '"%s"' % encode entities a if isinstance a bool return '"%s"' % 'no' 'yes' [int a ] if isinstance a int long return '"%s"' % a if isinstance a float return '"%s"' % round a 5 if isinstance a type None return '""'if isinstance a Date return '"%s"' % str a if isinstance a datetime datetime return '"%s"' % str date mktime a timetuple
def make KV Post request message server url resp fetchers fetch server url body request message to URL Encoded return http Response To Message resp server url
def libvlc video get track count p mi f Cfunctions get 'libvlc video get track count' None or Cfunction 'libvlc video get track count' 1 None ctypes c int Media Player return f p mi
def notify owner f @functools wraps f def wrapper *args **kwargs '\nifrequest args get \'confirmed\' "true" \ndag id request args get \'dag id\' \ntask id request args get \'task id\' \ndagbag models Dag Bag \nos path expanduser configuration get \'core\' \'DAGS FOLDER\' \n\ndag dagbag get dag dag id \ntask dag get task task id \n\nifcurrent userandhasattr current user \'username\' \nuser current user username\nelse \nuser \'anonymous\'\n\niftask owner user \nsubject \n\' Actionstakenon DAG{ 0 }by{ 1 }\' format \ndag id user \nitems request args items \ncontent Template \'\'\'\naction <i>{{f name }}</i><br>\n<br>\n<b> Parameters</b> <br>\n<table>\n{%fork vinitems%}\n{%ifk \'origin\'%}\n<tr>\n<td>{{k}}</td>\n<td>{{v}}</td>\n</tr>\n{%endif%}\n{%endfor%}\n</table>\n\'\'\' render **locals \niftask email \nsend email task email subject content \n'return f *args **kwargs return wrapper
def notify owner f @functools wraps f def wrapper *args **kwargs '\nifrequest args get \'confirmed\' "true" \ndag id request args get \'dag id\' \ntask id request args get \'task id\' \ndagbag models Dag Bag \nos path expanduser configuration get \'core\' \'DAGS FOLDER\' \n\ndag dagbag get dag dag id \ntask dag get task task id \n\nifcurrent userandhasattr current user \'username\' \nuser current user username\nelse \nuser \'anonymous\'\n\niftask owner user \nsubject \n\' Actionstakenon DAG{ 0 }by{ 1 }\' format \ndag id user \nitems request args items \ncontent Template \'\'\'\naction <i>{{f name }}</i><br>\n<br>\n<b> Parameters</b> <br>\n<table>\n{%fork vinitems%}\n{%ifk \'origin\'%}\n<tr>\n<td>{{k}}</td>\n<td>{{v}}</td>\n</tr>\n{%endif%}\n{%endfor%}\n</table>\n\'\'\' render **locals \niftask email \nsend email task email subject content \n'return f *args **kwargs return wrapper
def notify owner f @functools wraps f def wrapper *args **kwargs '\nifrequest args get \'confirmed\' "true" \ndag id request args get \'dag id\' \ntask id request args get \'task id\' \ndagbag models Dag Bag \nos path expanduser configuration get \'core\' \'DAGS FOLDER\' \n\ndag dagbag get dag dag id \ntask dag get task task id \n\nifcurrent userandhasattr current user \'username\' \nuser current user username\nelse \nuser \'anonymous\'\n\niftask owner user \nsubject \n\' Actionstakenon DAG{ 0 }by{ 1 }\' format \ndag id user \nitems request args items \ncontent Template \'\'\'\naction <i>{{f name }}</i><br>\n<br>\n<b> Parameters</b> <br>\n<table>\n{%fork vinitems%}\n{%ifk \'origin\'%}\n<tr>\n<td>{{k}}</td>\n<td>{{v}}</td>\n</tr>\n{%endif%}\n{%endfor%}\n</table>\n\'\'\' render **locals \niftask email \nsend email task email subject content \n'return f *args **kwargs return wrapper
def login rate limit message current limit getattr g 'view rate limit' None if current limit is not None window stats limiter limiter get window stats *current limit reset time datetime utcfromtimestamp window stats[ 0 ] timeout reset time - datetime utcnow return '{timeout}' format timeout format timedelta timeout
def Generate MS Build Filters File filters path source files rule dependencies extension to rule name filter group []source group [] Append Filters For MS Build '' source files rule dependencies extension to rule name filter group source group if filter group content [' Project' {' Tools Version' '4 0' 'xmlns' 'http //schemas microsoft com/developer/msbuild/ 2003 '} [' Item Group'] + filter group [' Item Group'] + source group ]easy xml Write Xml If Changed content filters path pretty True win 32 True elif os path exists filters path os unlink filters path
def domains configured f @functools wraps f def wrapper self *args **kwargs if not self domain configs configured and CONF identity domain specific drivers enabled with self domain configs lock if not self domain configs configured self domain configs setup domain drivers self driver self resource api return f self *args **kwargs return wrapper
def build control amp service test case reactor None if reactor is None reactor Clock cluster state Cluster State Service reactor cluster state start Service test case add Cleanup cluster state stop Service persistence service Configuration Persistence Service reactor test case make temporary directory persistence service start Service test case add Cleanup persistence service stop Service return Control AMP Service reactor cluster state persistence service TCP 4 Server Endpoint Memory Reactor 1234 Client Context Factory
def filter factory global conf **local conf conf global conf copy conf update local conf enabled not config true value conf get 'disable encryption' 'false' register swift info 'encryption' admin True enabled enabled def encryption filter app return Decrypter Encrypter app conf conf return encryption filter
def is hash deleted context builder h deleted ir Constant h type DELETED return builder icmp unsigned ' ' h deleted
def system groovy registry xml parent data root tag 'hudson plugins groovy System Groovy'sysgroovy XML Sub Element xml parent root tag sysgroovy append groovy common script Source data XML Sub Element sysgroovy 'bindings' text str data get 'bindings' '' XML Sub Element sysgroovy 'classpath' text str data get 'class-path' ''
def segment range to fragment range segment start segment end segment size fragment size fragment start segment start / segment size * fragment size if segment start is not None else None fragment end None if segment end is None else segment end + 1 / segment size * fragment size if segment start is None else segment end + 1 / segment size * fragment size - 1 return fragment start fragment end
def segment range to fragment range segment start segment end segment size fragment size fragment start segment start / segment size * fragment size if segment start is not None else None fragment end None if segment end is None else segment end + 1 / segment size * fragment size if segment start is None else segment end + 1 / segment size * fragment size - 1 return fragment start fragment end
def build DMG outdir os path join WORKDIR 'diskimage' if os path exists outdir shutil rmtree outdir imagepath os path join outdir 'python-%s-macosx' % get Full Version if INCLUDE TIMESTAMP imagepath imagepath + '% 04 d-% 02 d-% 02 d' % time localtime [ 3] imagepath imagepath + ' dmg' os mkdir outdir run Command "hdiutilcreate-volname' Universal Mac Python%s'-srcfolder%s%s" % get Full Version shell Quote os path join WORKDIR 'installer' shell Quote imagepath return imagepath
def build DMG outdir os path join WORKDIR 'diskimage' if os path exists outdir shutil rmtree outdir imagepath os path join outdir 'python-%s-macosx' % get Full Version if INCLUDE TIMESTAMP imagepath imagepath + '% 04 d-% 02 d-% 02 d' % time localtime [ 3] imagepath imagepath + ' dmg' os mkdir outdir run Command "hdiutilcreate-volname' Universal Mac Python%s'-srcfolder%s%s" % get Full Version shell Quote os path join WORKDIR 'installer' shell Quote imagepath return imagepath
def decimal relative time d other None ndigits 0 cardinalize True if other is None other datetime utcnow diff other - d diff seconds total seconds diff abs diff abs diff b idx bisect bisect BOUND DELTAS abs diff - 1 bbound bunit bname BOUNDS[b idx]f diff diff seconds / total seconds bunit rounded diff round f diff ndigits if cardinalize return rounded diff cardinalize time unit bname abs rounded diff return rounded diff bname
def decimal relative time d other None ndigits 0 cardinalize True if other is None other datetime utcnow diff other - d diff seconds total seconds diff abs diff abs diff b idx bisect bisect BOUND DELTAS abs diff - 1 bbound bunit bname BOUNDS[b idx]f diff diff seconds / total seconds bunit rounded diff round f diff ndigits if cardinalize return rounded diff cardinalize time unit bname abs rounded diff return rounded diff bname
def host url property def getter self if 'HTTP HOST' in self environ host self environ['HTTP HOST']else host '%s %s' % self environ['SERVER NAME'] self environ['SERVER PORT'] scheme self environ get 'wsgi url scheme' 'http' if scheme 'http' and host endswith ' 80 ' host port host rsplit ' ' 1 elif scheme 'https' and host endswith ' 443 ' host port host rsplit ' ' 1 return '%s //%s' % scheme host return property getter doc ' Geturlforrequest/responseuptopath'
def build html slider slices range slides klass slider id start value None if start value is None start value slices range[ len slices range // 2 ]return slider template substitute slider id slider id klass slides klass step slices range[ 1 ] - slices range[ 0 ] minvalue slices range[ 0 ] maxvalue slices range[ -1 ] startvalue start value
def write urls index app exc inventory os path join app builder outdir 'objects inv' objects sphinx ext intersphinx fetch inventory app DOCS URL inventory with open os path join app builder outdir 'shorturls json' 'w' as f json dump objects f
def obtain model show ver match re search ' Cisco +? +bytesofmemory' show ver if match return match group 1 else return None
def test marked class run twice testdir request py file testdir makepyfile "\nimportpytest\n@pytest mark parametrize 'abc' [1 2 3] \nclass Test 1 object \ndeftest 1 self abc \nassertabcin[ 1 2 3]\n" file name os path basename py file strpath rec testdir inline run file name file name rec assertoutcome passed 6
def add to recent scan name md 5 url try db obj Recent Scans DB objects filter MD 5 md 5 if not db obj exists new db obj Recent Scans DB NAME name MD 5 md 5 URL url TS timezone now new db obj save except Print Exception '[ERROR] Adding Scan UR Lto Database'
def add to recent scan name md 5 url try db obj Recent Scans DB objects filter MD 5 md 5 if not db obj exists new db obj Recent Scans DB NAME name MD 5 md 5 URL url TS timezone now new db obj save except Print Exception '[ERROR] Adding Scan UR Lto Database'
def post form view request return post form response
@skip 'multiple execute' @skip 'netstandard' def test addreferencetofileandpath conflict code 1 '\nusing System \n\npublicclass Collision Test{\npublicstaticstring Result {\nreturn" Test 1 " \n}\n}\n'code 2 '\nusing System \n\npublicclass Collision Test{\npublicstaticstring Result {\nreturn" Test 2 " \n}\n}\n'tmp testpath temporary dir test 1 cs test 1 dll path combine tmp 'test 1 cs' path combine tmp ' Collision Test dll' test 2 cs test 2 dll path combine tmp 'test 2 cs' path combine sys prefix ' Collision Test dll' write to file test 1 cs code 1 write to file test 2 cs code 2 Are Equal run csc '/nologo/target library/out ' + test 2 dll + '' + test 2 cs 0 Are Equal run csc '/nologo/target library/out ' + test 1 dll + '' + test 1 cs 0 clr Add Reference To File And Path test 1 dll import Collision Test Are Equal Collision Test Result ' Test 1 '
def fit constrained wrap model constraints start params None **fit kwds self modelfrom patsy import Design Infolc Design Info self exog names linear constraint constraints R q lc coefs lc constants params cov res constr fit constrained self R q start params start params fit kwds fit kwds res self fit start params params maxiter 0 warn convergence False res results params paramsres results normalized cov params covk constr len q res results df resid + k constrres results df model - k constrres results constraints lcres results k constr k constrres results results constrained res constrreturn res
def get promo country code programming language gold project False gold user False promo queryset Supporter Promo objects filter live True display type 'doc' filtered promos []for obj in promo queryset if obj programming language and not show to programming language obj programming language continueif country code and not show to geo obj country code continuefiltered promos append obj promo obj choose promo filtered promos if not promo obj house promo Supporter Promo objects filter live True name 'house' order by '?' if house promo exists promo obj house promo first if gold user gold promo Supporter Promo objects filter live True name 'gold-user' if gold promo exists promo obj gold promo first if gold project gold promo Supporter Promo objects filter live True name 'gold-project' if gold promo exists promo obj gold promo first return promo obj
def test property always set descriptor class C object x property lambda self self x def init self self x 42 c C c dict ['x'] 43 Are Equal c x 42 class My Descriptor object def get self *args return 42 class C object x My Descriptor c C c dict ['x'] 43 Are Equal c x 43 class My Descriptor object def get self *args return 42 def set self *args passclass C object x My Descriptor c C c dict ['x'] 43 Are Equal c x 42
def test property always set descriptor class C object x property lambda self self x def init self self x 42 c C c dict ['x'] 43 Are Equal c x 42 class My Descriptor object def get self *args return 42 class C object x My Descriptor c C c dict ['x'] 43 Are Equal c x 43 class My Descriptor object def get self *args return 42 def set self *args passclass C object x My Descriptor c C c dict ['x'] 43 Are Equal c x 42
def migrate admission plugin facts facts if 'master' in facts if 'kube admission plugin config' in facts['master'] if 'admission plugin config' not in facts['master'] facts['master']['admission plugin config'] dict facts['master']['admission plugin config'] merge facts facts['master']['admission plugin config'] facts['master']['kube admission plugin config'] additive facts to overwrite [] protected facts to overwrite [] facts['master'] pop 'kube admission plugin config' None return facts
def to address num if num < 0 return to hex num if num > 4294967295 return '0 x% 016 x' % num else return '0 x% 08 x' % num
def xml add meta data xml ''meta []if data get config META ordered meta Ordered Dict sorted data[config META] items for name value in ordered meta items meta append '<%s>%d</%s>' % name value name if meta xml '<%s>%s</%s>' % config META '' join meta config META return xml
def group snapshot get context group snapshot id return IMPL group snapshot get context group snapshot id
def auto complete request queryset fields None object list []limit request GET get 'limit' 10 query request GET get 'term' '' if fields q object Q for field in fields q object Q **{field query} queryset queryset filter q object for obj in queryset[ limit] object list append {'text' obj unicode 'id' obj pk} return Http Response json dumps object list mimetype 'application/json'
def find system symbol img instruction addr sdk info None return D Sym Symbol objects lookup symbol instruction addr instruction addr image addr img['image addr'] image vmaddr img['image vmaddr'] uuid img['uuid'] cpu name get cpu name img['cpu type'] img['cpu subtype'] object path img['name'] sdk info sdk info
def primitive f p ring f ringdom ring domaink ring ngenscoeffs {}for monom coeff in f iterterms if monom[ -1 ] not in coeffs coeffs[monom[ -1 ]] {}coeffs[monom[ -1 ]][monom[ -1 ]] coeffcont []for coeff in iter coeffs values cont gf gcd cont gf from dict coeff p dom p dom yring ring clone symbols ring symbols[ k - 1 ] contf yring from dense cont trunc ground p return contf f quo contf set ring ring
def get Subfolder With Basename basename directory archive make Directory directory directory Listing os listdir directory for file Name in directory Listing joined File Name os path join directory file Name if os path isdir joined File Name if basename file Name return joined File Namereturn None
def groups many to one one to many defaultdict set for v k in many to one items one to many[k] add v return dict one to many
def get tu source lang 'c' all warnings False flags [] args list flags name 't c'if lang 'cpp' name 't cpp'args append '-std c++ 11 ' elif lang 'objc' name 't m'elif lang 'c' raise Exception ' Unknownlanguage %s' % lang if all warnings args + ['- Wall' '- Wextra']return Translation Unit from source name args unsaved files [ name source ]
def get template source name dirs None loaders []for loader in Engine get default template loaders if hasattr loader 'loaders' loaders extend loader loaders else loaders append loader for loader in loaders try return loader load template source name template dirs dirs except Template Does Not Exist passraise Template Does Not Exist name
def get page class page id warn u'get page classisdeprecatedin Review Board 3 0andwillberemoved use Account Page registry getinstead ' Deprecation Warning return Account Page registry get u'page id' page id
@verbosedef data path path None force update False update path True download True verbose None return data path path path force update force update update path update path name 'visual 92 categories' download download
def set rollback rollback using None return get connection using set rollback rollback
def arg string func return inspect formatargspec *inspect getargspec func
@receiver got request exception def record request exception sender **kwargs logging exception ' Uncaughtexceptionfrom{sender}' format sender sender
@receiver got request exception def record request exception sender **kwargs logging exception ' Uncaughtexceptionfrom{sender}' format sender sender
def instructor task status request output {}task id request GET get 'task id' or request POST get 'task id' tasks request GET get 'task ids[]' or request POST get 'task ids[]' if task id output get instructor task status task id elif tasks for task id in tasks task output get instructor task status task id if task output is not None output[task id] task outputreturn Http Response json dumps output indent 4
def make img name file ext ' png' fn []for i in range 0 30 fn append choice ALPHABET return '' join fn + file ext
def default route family None if family 'inet' and family 'inet 6 ' and family is not None raise Command Execution Error ' Invalidaddressfamily{ 0 }' format family routes routes default route {}if grains ['kernel'] ' Linux' default route['inet'] [' 0 0 0 0' 'default']default route['inet 6 '] [' /0 ' 'default']elif grains ['os'] in [' Free BSD' ' Net BSD' ' Open BSD' ' Mac OS' ' Darwin'] or grains ['kernel'] ' Sun OS' default route['inet'] ['default']default route['inet 6 '] ['default']else raise Command Execution Error ' Notyetsupportedonthisplatform' ret []for route in routes if family if route['destination'] in default route[family] if grains ['kernel'] ' Sun OS' and route['addr family'] family continueret append route elif route['destination'] in default route['inet'] or route['destination'] in default route['inet 6 '] ret append route return ret
def get dev count for disk bus disk bus if disk bus 'ide' return 4else return 26
def initialize api bootstrap context 'cli' api finalize try api Backend rpcclient connect except Attribute Error api Backend xmlclient connect return api
def check ip available ip addr for vm name vm details in six iteritems get resources vms include Config True vm config vm details['config']if ip addr in vm config['ip address'] or vm config['ip address'] ip addr log debug 'IP"{ 0 }"isalreadydefined' format ip addr return Falselog debug "IP'{ 0 }'isavailabletobedefined" format ip addr return True
def check ip available ip addr for vm name vm details in six iteritems get resources vms include Config True vm config vm details['config']if ip addr in vm config['ip address'] or vm config['ip address'] ip addr log debug 'IP"{ 0 }"isalreadydefined' format ip addr return Falselog debug "IP'{ 0 }'isavailabletobedefined" format ip addr return True
def Update User History user t auth ts history get user [] [ -30 ]ts append t auth history[user] tsreturn ts
def getappterminology fullname verbose None if not Mac OS WM Available raise Runtime Error ' Cannotsend Apple Events noaccesstowindowmanager'import Carbon Evt Carbon Evt Wait Next Event 0 0 if os path isdir fullname pkginfo os path join fullname ' Contents' ' Pkg Info' if not os path exists pkginfo raise Runtime Error ' No Pkg Infofilefound'tp cr open pkginfo 'rb' read cr tp cr[ 4 8]else cr tp Mac OS Get Creator And Type fullname talker aetools Talk To cr try talker start except Mac OS Error aetools Error as arg if verbose print >>verbose ' Warning start failed continuinganyway ' argreply talker send 'ascr' 'gdte' return reply[ 1 ]['----'] cr
def getappterminology fullname verbose None if not Mac OS WM Available raise Runtime Error ' Cannotsend Apple Events noaccesstowindowmanager'import Carbon Evt Carbon Evt Wait Next Event 0 0 if os path isdir fullname pkginfo os path join fullname ' Contents' ' Pkg Info' if not os path exists pkginfo raise Runtime Error ' No Pkg Infofilefound'tp cr open pkginfo 'rb' read cr tp cr[ 4 8]else cr tp Mac OS Get Creator And Type fullname talker aetools Talk To cr try talker start except Mac OS Error aetools Error as arg if verbose print >>verbose ' Warning start failed continuinganyway ' argreply talker send 'ascr' 'gdte' return reply[ 1 ]['----'] cr
def window Sequence Eval DS winsz result si old 0idx 0x []y []seq res []for i si in enumerate DS['sequence index'][ 1 ] astype int tar DS['target'][ si - 1 ]curr x si oldcorrect 0 0wrong 0 0while curr x < si x append curr x if result[idx] tar correct + 1 0y + [1 0 1 0]else wrong + 1 0y + [0 0 0 0]idx + 1curr x + winszx append curr x seq res append 100 0 * correct / correct + wrong print 'sequence%dcorrect %g 12 2%%' % i seq res[ -1 ] seq res array seq res print 'totalfractionofcorrectsequences ' 100 0 * float seq res > 0 5 sum / seq res size
def window Sequence Eval DS winsz result si old 0idx 0x []y []seq res []for i si in enumerate DS['sequence index'][ 1 ] astype int tar DS['target'][ si - 1 ]curr x si oldcorrect 0 0wrong 0 0while curr x < si x append curr x if result[idx] tar correct + 1 0y + [1 0 1 0]else wrong + 1 0y + [0 0 0 0]idx + 1curr x + winszx append curr x seq res append 100 0 * correct / correct + wrong print 'sequence%dcorrect %g 12 2%%' % i seq res[ -1 ] seq res array seq res print 'totalfractionofcorrectsequences ' 100 0 * float seq res > 0 5 sum / seq res size
def generate init class class manager original init class init assert original init func body 'def init % apply pos s \nnew state class manager new state if none % self arg s \nifnew state \nreturnnew state initialize instance % apply kw s \nelse \nreturnoriginal init % apply kw s \n'func vars util format argspec init original init grouped False func text func body % func vars if util py 2 k func getattr original init 'im func' original init func defaults getattr func 'func defaults' None else func defaults getattr original init ' defaults ' None func kw defaults getattr original init ' kwdefaults ' None env locals copy exec func text in env init env[' init '] init doc original init doc if func defaults init defaults func defaultsif not util py 2 k and func kw defaults init kwdefaults func kw defaultsreturn init
def generate init class class manager original init class init assert original init func body 'def init % apply pos s \nnew state class manager new state if none % self arg s \nifnew state \nreturnnew state initialize instance % apply kw s \nelse \nreturnoriginal init % apply kw s \n'func vars util format argspec init original init grouped False func text func body % func vars if util py 2 k func getattr original init 'im func' original init func defaults getattr func 'func defaults' None else func defaults getattr original init ' defaults ' None func kw defaults getattr original init ' kwdefaults ' None env locals copy exec func text in env init env[' init '] init doc original init doc if func defaults init defaults func defaultsif not util py 2 k and func kw defaults init kwdefaults func kw defaultsreturn init
def generate init class class manager original init class init assert original init func body 'def init % apply pos s \nnew state class manager new state if none % self arg s \nifnew state \nreturnnew state initialize instance % apply kw s \nelse \nreturnoriginal init % apply kw s \n'func vars util format argspec init original init grouped False func text func body % func vars if util py 2 k func getattr original init 'im func' original init func defaults getattr func 'func defaults' None else func defaults getattr original init ' defaults ' None func kw defaults getattr original init ' kwdefaults ' None env locals copy exec func text in env init env[' init '] init doc original init doc if func defaults init defaults func defaultsif not util py 2 k and func kw defaults init kwdefaults func kw defaultsreturn init
def get client class version warnings warn LW "'get client class'isdeprecated Pleaseuse`novaclient client Client`instead " api version client class get client class and version version return client class
def gen auth resp chall list return [ '%s%s' % chall class name chall domain for chall in chall list]
def test elemwise 4 shape 3 4 a tcn shared constructor theano asarray numpy random rand *shape dtype 'float 32 ' 'a' b tensor fvector c tensor fvector f pfunc [b c] [] updates [ a a + b dimshuffle 'x' 0 * c dimshuffle 0 'x' ] mode mode with gpu has elemwise Falsefor i node in enumerate f maker fgraph toposort has elemwise has elemwise or isinstance node op tensor Elemwise assert not has elemwise f theano asarray numpy random rand 4 dtype 'float 32 ' theano asarray numpy random rand 3 dtype 'float 32 '
def app from nltk grammar import Nonterminal Production CF Gnonterminals 'SVPNPPPPN Name V Det' S VP NP PP P N Name V Det [ Nonterminal s for s in nonterminals split ]productions Production S [NP VP] Production NP [ Det N] Production NP [NP PP] Production VP [VP PP] Production VP [V NP PP] Production VP [V NP] Production PP [P NP] Production NP ['I'] Production Det ['the'] Production Det ['a'] Production N ['man'] Production V ['saw'] Production P ['in'] Production P ['with'] Production N ['park'] Production N ['dog'] Production N ['statue'] Production Det ['my'] grammar CFG S productions sent 'mydogsawamanintheparkwithastatue' split Shift Reduce App grammar sent mainloop
def get tests info input dir msg dir prefix suffix result []for fname in glob join input dir prefix + '*' + suffix infile basename fname fbase splitext infile [0 ]pyrestr fbase rsplit ' py' 1 [ -1 ]if pyrestr isdigit if SYS VERS STR < pyrestr continueif pyrestr startswith ' ' and pyrestr[ 1 ] isdigit if SYS VERS STR > pyrestr[ 1 ] continuemessages glob join msg dir fbase + '* txt' if messages for outfile in sorted messages reverse True py rest outfile rsplit ' py' 1 [ -1 ][ -4 ]if py rest isdigit and SYS VERS STR > py rest breakelse outfile join msg dir fbase + ' txt' result append infile outfile return result
def get tests info input dir msg dir prefix suffix result []for fname in glob join input dir prefix + '*' + suffix infile basename fname fbase splitext infile [0 ]pyrestr fbase rsplit ' py' 1 [ -1 ]if pyrestr isdigit if SYS VERS STR < pyrestr continueif pyrestr startswith ' ' and pyrestr[ 1 ] isdigit if SYS VERS STR > pyrestr[ 1 ] continuemessages glob join msg dir fbase + '* txt' if messages for outfile in sorted messages reverse True py rest outfile rsplit ' py' 1 [ -1 ][ -4 ]if py rest isdigit and SYS VERS STR > py rest breakelse outfile join msg dir fbase + ' txt' result append infile outfile return result
def printer string quiet False debug False **kwargs if debug and not DEBUG returnif debug out '\x 1 b[ 1 30 m DEBUG %s\x 1 b[ 0 m' % string else out stringif not quiet print out **kwargs
@register tagdef more like this parser token bits token split contents if not len bits in 4 6 8 raise template Template Syntax Error u"'%s'tagrequireseither 3 5or 7 arguments " % bits[ 0 ] model bits[ 1 ]if bits[ 2 ] u'as' raise template Template Syntax Error u"'%s'tag'ssecondargumentshouldbe'as' " % bits[ 0 ] varname bits[ 3 ]limit Nonefor types Noneif len bits 6 if bits[ 4 ] u'limit' and bits[ 4 ] u'for' raise template Template Syntax Error u"'%s'tag'sfourthargumentshouldbeeither'limit'or'for' " % bits[ 0 ] if bits[ 4 ] u'limit' limit bits[ 5 ]else for types bits[ 5 ]if len bits 8 if bits[ 4 ] u'for' raise template Template Syntax Error u"'%s'tag'sfourthargumentshouldbe'for' " % bits[ 0 ] for types bits[ 5 ]if bits[ 6 ] u'limit' raise template Template Syntax Error u"'%s'tag'ssixthargumentshouldbe'limit' " % bits[ 0 ] limit bits[ 7 ]return More Like This Node model varname for types limit
def combine images im 1 im 2 alpha return 1 - alpha * im 1 + alpha * im 2
@app before requestdef require json if request method in {'GET' 'HEAD' 'DELETE'} returnif request mimetype 'application/json' abort 400 NO HEADER json data request get json silent True if json data is None abort 400 INVALID JSON
@app before requestdef require json if request method in {'GET' 'HEAD' 'DELETE'} returnif request mimetype 'application/json' abort 400 NO HEADER json data request get json silent True if json data is None abort 400 INVALID JSON
def histogram input min max bins labels None index None bins numpy linspace min max bins + 1 def hist vals return numpy histogram vals bins [0 ]return labeled comprehension input labels index hist object None pass positions False
def get disk bus for device type virt type image meta None device type 'disk' if image meta key 'hw ' + device type + ' bus' disk bus image meta get 'properties' {} get key if disk bus is not None if not is disk bus valid for virt virt type disk bus raise exception Unsupported Hardware model disk bus virt virt type return disk busif virt type 'uml' if device type 'disk' return 'uml'elif virt type 'lxc' return 'lxc'elif virt type 'xen' if device type 'cdrom' return 'ide'elif device type 'disk' return 'xen'elif virt type in 'qemu' 'kvm' if device type 'cdrom' return 'ide'elif device type 'disk' return 'virtio'return None
def Get Field By Name message descriptor field name try return message descriptor fields by name[field name]except Key Error raise Value Error ' Protocolmessagehasno"%s"field ' % field name
def get about info vim return vim service content about
def psaux name sanitize name str name pattern re compile sanitize name salt exception pattern re compile 'salt +ps psaux +' ps aux salt ['cmd run'] 'psaux' found infos []ret []nb lines 0for info in ps aux splitlines found pattern search info if found is not None if not salt exception pattern search info nb lines + 1found infos append info pid count str nb lines + 'occurence s ' ret []ret extend [sanitize name found infos pid count] return ret
def qos specs associations get context qos specs id return IMPL qos specs associations get context qos specs id
def service get all volume sorted context return IMPL service get all volume sorted context
def convert Permanences source SP dest SP num Columns source SP get Num Columns num Inputs source SP get Num Inputs for i in xrange num Columns potential numpy zeros num Inputs astype uint Type source SP get Potential i potential dest SP set Potential i potential perm numpy zeros num Inputs astype real Type source SP get Permanence i perm dest SP set Permanence i perm
def convert Permanences source SP dest SP num Columns source SP get Num Columns num Inputs source SP get Num Inputs for i in xrange num Columns potential numpy zeros num Inputs astype uint Type source SP get Potential i potential dest SP set Potential i potential perm numpy zeros num Inputs astype real Type source SP get Permanence i perm dest SP set Permanence i perm
def get network with the name session network name 'vmnet 0 ' cluster None vm networks session call method vim util 'get object properties' None cluster ' Cluster Compute Resource' ['network'] while vm networks if vm networks objects network obj get network obj session vm networks objects network name if network obj session call method vutil 'cancel retrieval' vm networks return network objvm networks session call method vutil 'continue retrieval' vm networks LOG debug ' Network%snotfoundoncluster ' network name
def get terminal size fallback 80 24 try columns int os environ['COLUMNS'] except Key Error Value Error columns 0try lines int os environ['LINES'] except Key Error Value Error lines 0if columns < 0 or lines < 0 try columns lines get terminal size sys stdout fileno except Name Error OS Error passif columns < 0 and lines < 0 columns lines fallbackreturn terminal size columns lines
def prepend path newpath oldpath if oldpath return newpath + ' ' + oldpath else return newpath
@must be contributor or publicdef grid data auth node **kwargs data request args to dict return {'data' rubeus to hgrid node auth **data }
def get lexer for filename fn code None **options matches []fn basename fn for modname name filenames in LEXERS itervalues for filename in filenames if fnmatch fnmatch fn filename if name not in lexer cache load lexers modname matches append lexer cache[name] for cls in find plugin lexers for filename in cls filenames if fnmatch fnmatch fn filename matches append cls if sys version info > 3 and isinstance code bytes code code decode 'latin 1 ' def get rating cls d cls analyse text code return dif code matches sort key get rating if matches return matches[ -1 ] **options raise Class Not Found 'nolexerforfilename%rfound' % fn
def add kernel to bootloader bootloader base args tag args image initrd bootloader remove kernel tag if base args if args args '%s%s' % base args args else args base argsbootloader add kernel path image title tag initrd initrd args args
def add kernel to bootloader bootloader base args tag args image initrd bootloader remove kernel tag if base args if args args '%s%s' % base args args else args base argsbootloader add kernel path image title tag initrd initrd args args
def set gui mode global gui modegui mode True
def set gui mode global gui modegui mode True
def ishow for manager in Gcf get all fig managers manager show if show needmain thread start new thread Fltk run interactive show needmain False
def ishow for manager in Gcf get all fig managers manager show if show needmain thread start new thread Fltk run interactive show needmain False
def ishow for manager in Gcf get all fig managers manager show if show needmain thread start new thread Fltk run interactive show needmain False
def ishow for manager in Gcf get all fig managers manager show if show needmain thread start new thread Fltk run interactive show needmain False
def task *args **kwargs if len args 1 and callable args[ 0 ] new task invoke task args[ 0 ] ns add task new task return new taskdef decorator f new task invoke task f *args **kwargs ns add task new task return new taskreturn decorator
@conf commands registerdef promiscping net timeout 2 fake bcast 'ff ff ff ff ff fe' **kargs ans unans srp Ether dst fake bcast / ARP pdst net filter 'arpandarp[ 7 ] 2' timeout timeout iface hint net **kargs ans AR Ping Result ans res name 'PROMISC Ping' ans display return ans unans
@conf commands registerdef promiscping net timeout 2 fake bcast 'ff ff ff ff ff fe' **kargs ans unans srp Ether dst fake bcast / ARP pdst net filter 'arpandarp[ 7 ] 2' timeout timeout iface hint net **kargs ans AR Ping Result ans res name 'PROMISC Ping' ans display return ans unans
def instantiate proxy tuple proxy bindings None if proxy in bindings return bindings[proxy]else if proxy callable do not recurse obj proxy keywords['value']else if len proxy positionals > 0 raise Not Implemented Error 'positionalargumentsnotyetsupportedinproxyinstantiation' kwargs dict k instantiate v bindings for k v in six iteritems proxy keywords obj checked call proxy callable kwargs try obj yaml src proxy yaml srcexcept Attribute Error passbindings[proxy] objreturn bindings[proxy]
def get mcp version driver location location driver ex get location by id location if 'MCP 2 0' in location name return '2 0'return '1 0'
def Setup Core search Paths import sysfor path in search Paths sys path append path import string osimport regutil win 32 api win 32 con install Path core Paths Locate Python Core search Paths print core Pathsregutil Register Named Path None string join core Paths ' ' h Key win 32 api Reg Create Key regutil Get Root Key regutil Build Default Python Key try win 32 api Reg Set Value h Key ' Install Path' win 32 con REG SZ install Path finally win 32 api Reg Close Key h Key win 32 paths os path abspath os path split win 32 api file [0 ] + ' ' + os path abspath os path split Locate File Name 'win 32 con py win 32 con pyc' sys path [0 ] check os path join sys prefix 'PC Build' if os path isdir check regutil Register Named Path 'PC Build' check
def address book to list address book ab AB Address Book shared Address Book people address book people return [ab person to dict person for person in people]
def has explicit scheme url return url is Valid and url scheme and url host or url path and '' not in url path and not url path startswith ' '
def at addr for o in gc get objects if id o addr return oreturn None
@log calldef metadef property get all context namespace name namespace metadef namespace get context namespace name properties [] check namespace visibility context namespace namespace name for property in DATA['metadef properties'] if property['namespace id'] namespace['id'] properties append property return properties
def handle extends tail line index if tail return 'extends' [p strip for p in tail split ' ' ] else return 'error' "'extends'withoutfiletypes" line index
def saturate color percent return adjust color 1 percent
def extract doc comment simple content line column markers align column column - len markers[ 0 ] pos content[line] find markers[ 2 ] column if pos -1 return line pos + len markers[ 2 ] content[line][column pos] doc comment content[line][column ]line + 1while line < len content pos content[line] find markers[ 2 ] if pos -1 doc comment + '\n' if content[line][align column ] '' else content[line][align column ] else doc comment + content[line][align column pos]return line pos + len markers[ 2 ] doc comment line + 1return None
def extract doc comment simple content line column markers align column column - len markers[ 0 ] pos content[line] find markers[ 2 ] column if pos -1 return line pos + len markers[ 2 ] content[line][column pos] doc comment content[line][column ]line + 1while line < len content pos content[line] find markers[ 2 ] if pos -1 doc comment + '\n' if content[line][align column ] '' else content[line][align column ] else doc comment + content[line][align column pos]return line pos + len markers[ 2 ] doc comment line + 1return None
def wrap results result dtype if is datetime 64 dtype dtype if not isinstance result np ndarray result lib Timestamp result else result result view dtype elif is timedelta 64 dtype dtype if not isinstance result np ndarray if np fabs result > int 64 max raise Value Error 'overflowintimedeltaoperation' result lib Timedelta result unit 'ns' else result result astype 'i 8 ' view dtype return result
def format call func args kwargs object name ' Memory' path signature format signature func *args **kwargs msg '%s\n[%s] Calling%s \n%s' % 80 * ' ' object name path signature return msg
def format call func args kwargs object name ' Memory' path signature format signature func *args **kwargs msg '%s\n[%s] Calling%s \n%s' % 80 * ' ' object name path signature return msg
def test special bindings keyhint key config stub key config stub set bindings for 'normal' Ordered Dict [ '<a' 'cmd-<a' '<b' 'cmd-<b' '<ctrl-a>' 'cmd-ctrla' ] keyhint update keyhint 'normal' '<' assert keyhint text expected text '&lt ' 'yellow' 'a' 'cmd-&lt a' '&lt ' 'yellow' 'b' 'cmd-&lt b'
def test special bindings keyhint key config stub key config stub set bindings for 'normal' Ordered Dict [ '<a' 'cmd-<a' '<b' 'cmd-<b' '<ctrl-a>' 'cmd-ctrla' ] keyhint update keyhint 'normal' '<' assert keyhint text expected text '&lt ' 'yellow' 'a' 'cmd-&lt a' '&lt ' 'yellow' 'b' 'cmd-&lt b'
def resource type from id context resource id known types {'i' 'instance' 'r' 'reservation' 'vol' 'volume' 'snap' 'snapshot' 'ami' 'image' 'aki' 'image' 'ari' 'image'}type marker resource id split '-' [0 ]return known types get type marker
def deep format obj paramdict allow empty False if hasattr obj 'format' try ret Custom Formatter allow empty format obj **paramdict except Key Error as exc missing key exc args[ 0 ]desc '%sparametermissingtoformat%s\n Given \n%s' % missing key obj pformat paramdict raise Jenkins Jobs Exception desc elif isinstance obj list ret type obj for item in obj ret append deep format item paramdict allow empty elif isinstance obj dict ret type obj for item in obj try ret[ Custom Formatter allow empty format item **paramdict ] deep format obj[item] paramdict allow empty except Key Error as exc missing key exc args[ 0 ]desc '%sparametermissingtoformat%s\n Given \n%s' % missing key obj pformat paramdict raise Jenkins Jobs Exception desc else ret objreturn ret
def deep format obj paramdict allow empty False if hasattr obj 'format' try ret Custom Formatter allow empty format obj **paramdict except Key Error as exc missing key exc args[ 0 ]desc '%sparametermissingtoformat%s\n Given \n%s' % missing key obj pformat paramdict raise Jenkins Jobs Exception desc elif isinstance obj list ret type obj for item in obj ret append deep format item paramdict allow empty elif isinstance obj dict ret type obj for item in obj try ret[ Custom Formatter allow empty format item **paramdict ] deep format obj[item] paramdict allow empty except Key Error as exc missing key exc args[ 0 ]desc '%sparametermissingtoformat%s\n Given \n%s' % missing key obj pformat paramdict raise Jenkins Jobs Exception desc else ret objreturn ret
def get X Normalized Vector 3 Path path if len path < 1 return pathminimum X path[ 0 ] xfor point in path[ 1 ] minimum X min minimum X point x for point in path point x - minimum Xmaximum X path[ 0 ] xfor point in path[ 1 ] maximum X max maximum X point x for point in path point x / maximum Xreturn path
def merge events events ids new id replace events True events np asarray events events out events copy idx touched []for col in [1 2] for i in ids mask events[ col] i events out[ mask col ] new ididx touched append np where mask [0 ] if not replace events idx touched np unique np concatenate idx touched events out np concatenate events out events[idx touched] axis 0 events out events out[np lexsort events out T[ -1 ] ]return events out
def get attrs flag attrs attrs flag 0if u'bold' in attrs attrs flag ATTR BOL Dif u'italic' in attrs attrs flag ATTR ITALI Cif u'underline' in attrs attrs flag ATTR UNDERLIN Ereturn attrs flag
def run command cmd stdin None stdout subprocess PIPE stderr subprocess PIPE shell False cwd None env None assert isinstance cmd list tuple + six string types if not env env os environ copy process subprocess Popen cmd stdin stdin stdout stdout stderr stderr env env cwd cwd shell shell stdout stderr process communicate exit code process returncodereturn exit code stdout stderr
def job id conf return hashlib sha 1 json dumps conf sort keys True encode u'utf- 8 ' hexdigest
def find all stacktraces data rv []exc container data get 'sentry interfaces Exception' if exc container for exc in exc container['values'] stacktrace exc get 'stacktrace' if stacktrace rv append stacktrace exc stacktrace data get 'sentry interfaces Stacktrace' if stacktrace rv append stacktrace None threads data get 'threads' if threads for thread in threads['values'] stacktrace thread get 'stacktrace' if stacktrace rv append stacktrace thread return rv
def matrix to vector matrix system outvec Vector zerovects system base vectors for i x in enumerate matrix outvec + x * vects[i] return outvec
def matrix to vector matrix system outvec Vector zerovects system base vectors for i x in enumerate matrix outvec + x * vects[i] return outvec
def Triangular name a b c return rv name Triangular Distribution a b c
def check partial fit first call clf classes None if getattr clf 'classes ' None is None and classes is None raise Value Error 'classesmustbepassedonthefirstcalltopartial fit ' elif classes is not None if getattr clf 'classes ' None is not None if not array equal clf classes unique labels classes raise Value Error '`classes %r`isnotthesameasonlastcalltopartial fit was %r' % classes clf classes else clf classes unique labels classes return Truereturn False
def check partial fit first call clf classes None if getattr clf 'classes ' None is None and classes is None raise Value Error 'classesmustbepassedonthefirstcalltopartial fit ' elif classes is not None if getattr clf 'classes ' None is not None if not array equal clf classes unique labels classes raise Value Error '`classes %r`isnotthesameasonlastcalltopartial fit was %r' % classes clf classes else clf classes unique labels classes return Truereturn False
def check partial fit first call clf classes None if getattr clf 'classes ' None is None and classes is None raise Value Error 'classesmustbepassedonthefirstcalltopartial fit ' elif classes is not None if getattr clf 'classes ' None is not None if not array equal clf classes unique labels classes raise Value Error '`classes %r`isnotthesameasonlastcalltopartial fit was %r' % classes clf classes else clf classes unique labels classes return Truereturn False
def check partial fit first call clf classes None if getattr clf 'classes ' None is None and classes is None raise Value Error 'classesmustbepassedonthefirstcalltopartial fit ' elif classes is not None if getattr clf 'classes ' None is not None if not array equal clf classes unique labels classes raise Value Error '`classes %r`isnotthesameasonlastcalltopartial fit was %r' % classes clf classes else clf classes unique labels classes return Truereturn False
def check partial fit first call clf classes None if getattr clf 'classes ' None is None and classes is None raise Value Error 'classesmustbepassedonthefirstcalltopartial fit ' elif classes is not None if getattr clf 'classes ' None is not None if not array equal clf classes unique labels classes raise Value Error '`classes %r`isnotthesameasonlastcalltopartial fit was %r' % classes clf classes else clf classes unique labels classes return Truereturn False
def check partial fit first call clf classes None if getattr clf 'classes ' None is None and classes is None raise Value Error 'classesmustbepassedonthefirstcalltopartial fit ' elif classes is not None if getattr clf 'classes ' None is not None if not array equal clf classes unique labels classes raise Value Error '`classes %r`isnotthesameasonlastcalltopartial fit was %r' % classes clf classes else clf classes unique labels classes return Truereturn False
def db get name **connection args dbc connect **connection args if dbc is None return []cur dbc cursor qry 'SELECTDEFAULT CHARACTER SET NAME DEFAULT COLLATION NAMEFROMINFORMATION SCHEMA SCHEMATAWHERESCHEMA NAME % dbname s 'args {'dbname' name} execute cur qry args if cur rowcount rows cur fetchall return {'character set' rows[ 0 ][ 0 ] 'collate' rows[ 0 ][ 1 ]}return {}
@ call asidedef initialize g globals manager Resource Manager g[' manager'] managerfor name in dir manager if not name startswith ' ' g[name] getattr manager name
def generate token length 20 chars UNICODE ASCII CHARACTER SET return u'' join choice chars for x in range length
def wait for volume state change operation volume update get ebs volume state timeout VOLUME STATE CHANGE TIMEOUT time sleep 5 0 start time time time poll until lambda reached end state operation volume update time time - start time timeout itertools repeat 1
def exit set Config Options exit Cleanup False atexit run exitfuncs if sys platform 'darwin' for fd in range 3 4096 if fd not in [7 ] os close fd else os closerange 3 4096 os exit 0
def exit set Config Options exit Cleanup False atexit run exitfuncs if sys platform 'darwin' for fd in range 3 4096 if fd not in [7 ] os close fd else os closerange 3 4096 os exit 0
def save minions jid minions syndic id None cb get connection try jid doc cb get str jid except couchbase exceptions Not Found Error log warning ' Couldnotwritejobcachefileforjid {0 }' format jid return Falseif 'minions' in jid doc value jid doc value['minions'] sorted set jid doc value['minions'] + minions else jid doc value['minions'] minionscb replace str jid jid doc value cas jid doc cas ttl get ttl
def cleanup call ['sudo' 'pkill' '- 9 ' 'qemu-nbd']
def get filename from path path dirpath filename ntpath split path return filename if filename else ntpath basename dirpath
def typed list conversion func return lambda setting [conversion func String Converter elem for elem in setting]
def typed list conversion func return lambda setting [conversion func String Converter elem for elem in setting]
def check package data package data print 'checkingpackagedata'for pkg data in package data items pkg root pjoin *pkg split ' ' for d in data path pjoin pkg root d if '*' in path assert len glob path > 0 ' Nofilesmatchpattern%s' % path else assert os path exists path ' Missingpackagedata %s' % path
def get Starting Address packet return ord packet[ 8 ] << 8 + ord packet[ 9 ]
def assert manual typechecking bad grammar test obj for attr value in bad grammar with nt assert raises Value Error as err setattr test obj attr value nt assert equal err expected Value Error
def assert manual typechecking bad grammar test obj for attr value in bad grammar with nt assert raises Value Error as err setattr test obj attr value nt assert equal err expected Value Error
def test obstime b1950 Time u'B 1950 ' scale u'utc' j1975 Time u'J 1975 ' scale u'utc' fk 4 50 FK 4 ra 1 * u deg dec 2 * u deg obstime b1950 fk 4 75 FK 4 ra 1 * u deg dec 2 * u deg obstime j1975 icrs 50 fk 4 50 transform to ICRS icrs 75 fk 4 75 transform to ICRS assert icrs 50 ra degree icrs 75 ra degree assert icrs 50 dec degree icrs 75 dec degree
def test range assert hug types in range 1 10 '1 ' 1 assert hug types in range 1 10 1 1 assert '1 ' in hug types in range 1 10 doc with pytest raises Value Error hug types in range 1 10 'bacon' with pytest raises Value Error hug types in range 1 10 '15 ' with pytest raises Value Error hug types in range 1 10 -34
def test range assert hug types in range 1 10 '1 ' 1 assert hug types in range 1 10 1 1 assert '1 ' in hug types in range 1 10 doc with pytest raises Value Error hug types in range 1 10 'bacon' with pytest raises Value Error hug types in range 1 10 '15 ' with pytest raises Value Error hug types in range 1 10 -34
def norm s s re sub '\\s+' '' str s strip return re sub '>\\s+<' '><' s
def norm s s re sub '\\s+' '' str s strip return re sub '>\\s+<' '><' s
def to gapic feature feature return image annotator pb 2 Feature type getattr image annotator pb 2 Feature feature feature type max results feature max results
def get variables to train if FLAGS trainable scopes is None return tf trainable variables else scopes [scope strip for scope in FLAGS trainable scopes split ' ' ]variables to train []for scope in scopes variables tf get collection tf Graph Keys TRAINABLE VARIABLES scope variables to train extend variables return variables to train
def test feature first scenario tags extraction feature Feature from string FEATURE 23 assert that feature scenarios[ 0 ] tags deep equals ['onetag' 'another' '$%^&even-weird chars']
def datetime aligned ds 1 ds 2 max Len None aligned 1 dataseries Sequence Data Series max Len aligned 2 dataseries Sequence Data Series max Len Syncer ds 1 ds 2 aligned 1 aligned 2 return aligned 1 aligned 2
def datetime aligned ds 1 ds 2 max Len None aligned 1 dataseries Sequence Data Series max Len aligned 2 dataseries Sequence Data Series max Len Syncer ds 1 ds 2 aligned 1 aligned 2 return aligned 1 aligned 2
def minimum input labels None index None return select input labels index find min True [0 ]
def revoked to list revs list []for rev in revs for rev name props in six iteritems rev dict {}for prop in props for propname val in six iteritems prop if isinstance val datetime datetime val val strftime '%Y-%m-%d%H %M %S' dict [propname] vallist append dict return list
def revoked to list revs list []for rev in revs for rev name props in six iteritems rev dict {}for prop in props for propname val in six iteritems prop if isinstance val datetime datetime val val strftime '%Y-%m-%d%H %M %S' dict [propname] vallist append dict return list
def show receipt json order order info {'order Num' order id 'currency' order currency 'status' order status 'purchase datetime' get default time display order purchase time if order purchase time else None 'billed to' {'first name' order bill to first 'last name' order bill to last 'street 1 ' order bill to street 1 'street 2 ' order bill to street 2 'city' order bill to city 'state' order bill to state 'postal code' order bill to postalcode 'country' order bill to country} 'total cost' order total cost 'items' [{'quantity' item qty 'unit cost' item unit cost 'line cost' item line cost 'line desc' item line desc 'course key' unicode item course id } for item in Order Item objects filter order order select subclasses ]}return Json Response order info
def transfer destroy context transfer id return IMPL transfer destroy context transfer id
def Get Blob Storage return apiproxy stub map apiproxy Get Stub 'blobstore' storage
def ensure not within tag definition cursor forward True block offset cursor block cursor position In Block b boundary next tag boundary block offset forward False if b is None return Falseif boundary is start if forward block boundary next tag boundary block offset if block is not None cursor set Position block position + boundary offset + 1 return Trueelse cursor set Position b position + boundary offset return Truereturn False
def get vlanid and vswitch for portgroup session pg name cluster None host mor vm util get host ref session cluster port grps on host ret session call method vutil 'get object property' host mor 'config network portgroup' if not port grps on host ret msg 'ESXSOA Pserverreturnedanemptyportgroupforthehostsysteminitsresponse' LOG error msg raise exception Nova Exception msg port grps on host port grps on host ret Host Port Groupfor p gp in port grps on host if p gp spec name pg name p grp vswitch name p gp spec vswitch Namereturn p gp spec vlan Id p grp vswitch name return None None
def lookup scopes service name if service name in CLIENT LOGIN SCOPES return CLIENT LOGIN SCOPES[service name]return None
@lower 'print item' types Any def print item impl context builder sig args ty sig args val argspyapi context get python api builder if context enable nrt context nrt incref builder ty val obj pyapi from native value ty val with builder if else cgutils is not null builder obj likely True as if ok if error with if ok pyapi print object obj pyapi decref obj with if error cstr context insert const string builder module 'theprint function' strobj pyapi string from string cstr pyapi err write unraisable strobj pyapi decref strobj res context get dummy value return impl ret untracked context builder sig return type res
@expect downsample frequency@templated docstring frequency PIPELINE DOWNSAMPLING FREQUENCY DOC def select sampling indices dates frequency return changed locations dt to period[frequency] dates include first True
def item keys default '' ret {}key list []if isinstance keys six string types key list append keys elif isinstance keys list key list keyselse log debug "{ 0 } 'keys'argumentisnotastringorlisttype '{ 1 }'" format name keys for key in key list ret[key] os environ get key default return ret
def hosts *host list return list annotating decorator 'hosts' *host list
def hosts *host list return list annotating decorator 'hosts' *host list
def hosts *host list return list annotating decorator 'hosts' *host list
def get search location try return file io read constants SEARCH FILE LOC rstrip except IO Error logging warning ' Searchroleisnotconfigured ' return ''
def tidy stacktrace stack trace []for frame path line no func name text in f[ 5] for f in stack if omit path os path realpath path continuetext u'' join force text t for t in text strip if text else u'' trace append path line no func name text return trace
def get channel channel salt ['config get'] 'mattermost channel' or salt ['config get'] 'mattermost channel' return channel
def longest id ids seqs lengths map len [seqs get id '' for id in ids] return ids[argmax lengths ]
def model fields model only None exclude None field args None converter None converter converter or Model Converter field args field args or {} model fields f attname f for f in model meta fields if only model fields x for x in model fields if x[ 0 ] in only elif exclude model fields x for x in model fields if x[ 0 ] not in exclude field dict {}for name model field in model fields field converter convert model model field field args get name if field is not None field dict[name] fieldreturn field dict
def virtual if not proxy return Falsedef mkf cmd name doc '\n Nestedfunctiontohelpmoveproxyfunctionsintosys modules\n'def cmd *args **kw '\n Callcommandsinproxy\n'proxyfn 'philips hue ' + cmd name return proxy [proxyfn] *args **kw return cmdimport salt proxy philips hue as huefor method in dir hue if method startswith 'call ' setattr sys modules[ name ] method[ 5 ] mkf method getattr hue method doc del huereturn proxy and virtualname or False
def batch inv a return Batch Inv a
def dealias dsk keys None dependencies None keys keys or set if not isinstance keys set keys set keys if not dependencies dependencies {k get dependencies dsk k for k in dsk}aliases set k for k task in dsk items if ishashable task and task in dsk dsk 2 inline dsk aliases inline constants False for k in aliases difference keys del dsk 2 [k]return dsk 2
def Running Avg Loss loss running avg loss summary writer step decay 0 999 if running avg loss 0 running avg loss losselse running avg loss running avg loss * decay + 1 - decay * loss running avg loss min running avg loss 12 loss sum tf Summary loss sum value add tag 'running avg loss' simple value running avg loss summary writer add summary loss sum step sys stdout write 'running avg loss %f\n' % running avg loss return running avg loss
def validate plural forms plural forms str tokens tokenize generate tokens String IO plural forms str readline try danger [x for x in tokens if x[ 0 ] token NAME and x[ 1 ] 'n' ]except tokenize Token Error raise Value Error 'pluralformsexpressionerror maybeunbalancedparenthesis'else if danger raise Value Error 'pluralformsexpressioncouldbedangerous'
def convert to line delimits s if not s[ 0 ] '[' and s[ -1 ] ']' return ss s[ 1 -1 ]from pandas lib import convert json to linesreturn convert json to lines s
def convert to line delimits s if not s[ 0 ] '[' and s[ -1 ] ']' return ss s[ 1 -1 ]from pandas lib import convert json to linesreturn convert json to lines s
def can resize image image size LOG debug ' Checkingifwecanresizeimage% image s size % size s' {'image' image 'size' size} virt size get disk size image if virt size > size LOG debug ' Cannotresizeimage%stoasmallersize ' image return Falsereturn True
def load plugin names settings seen set def generate name path maxsplit 0 splits None if splits is None splits len path split ' ' - 1 name ' ' join path split ' ' splits - maxsplit [ -1 ] rsplit ' ' maxsplit if name not in seen or maxsplit > splits seen add name return namereturn generate name path maxsplit + 1 splits if settings['PLUGINS'] return [generate name path for path in settings['PLUGINS']]else return [' Annotations']
def get window registry window if window is None raise Type Error 'windowis Nonewithscopewindow ' try if window 'current' app get 'app' win app active Window elif window 'last-focused' win last focused window else win window registry[window]except Key Error No Window win Nonetry return win registryexcept Attribute Error raise Registry Unavailable Error 'window'
def search s sub n m len s len sub hsub digest md 5 sub encode 'utf- 8 ' digest offsets []if m > n return offsetsfor i in range n - m + 1 if md 5 s[i i + m ] encode 'utf- 8 ' digest hsub digest if s[i i + m ] sub offsets append i return offsets
def search s sub n m len s len sub hsub digest md 5 sub encode 'utf- 8 ' digest offsets []if m > n return offsetsfor i in range n - m + 1 if md 5 s[i i + m ] encode 'utf- 8 ' digest hsub digest if s[i i + m ] sub offsets append i return offsets
def search s sub n m len s len sub hsub digest md 5 sub encode 'utf- 8 ' digest offsets []if m > n return offsetsfor i in range n - m + 1 if md 5 s[i i + m ] encode 'utf- 8 ' digest hsub digest if s[i i + m ] sub offsets append i return offsets
def test show message twice after first disappears qtbot view with qtbot wait Signal view clear timer timeout view show message usertypes Message Level info 'test' assert not view messages view show message usertypes Message Level info 'test' assert len view messages 1
def extension elements to elements extension elements schemas res []if isinstance schemas list passelif isinstance schemas dict schemas schemas values else return resfor extension element in extension elements for schema in schemas inst extension element to element extension element schema ELEMENT FROM STRING schema NAMESPACE if inst res append inst breakreturn res
def extension elements to elements extension elements schemas res []if isinstance schemas list passelif isinstance schemas dict schemas schemas values else return resfor extension element in extension elements for schema in schemas inst extension element to element extension element schema ELEMENT FROM STRING schema NAMESPACE if inst res append inst breakreturn res
def extension elements to elements extension elements schemas res []if isinstance schemas list passelif isinstance schemas dict schemas schemas values else return resfor extension element in extension elements for schema in schemas inst extension element to element extension element schema ELEMENT FROM STRING schema NAMESPACE if inst res append inst breakreturn res
def lookup path parent None user None exists None url build url RESOURCE route 'lookup' params make params path path parent parent user user exists exists return request 'get' url params params
def packages pkg list update False options None pkg list [pkg for pkg in pkg list if not is installed pkg ]if pkg list install pkg list update update options options
def setup platform hass config add devices discovery info None host config get CONF HOST port config get CONF PORT name config get CONF NAME url 'http //{} {}/api/ Live Data xml' format host port gateway Ted 5000 Gateway url gateway update dev []for mtu in gateway data dev append Ted 5000 Sensor gateway name mtu 'W' dev append Ted 5000 Sensor gateway name mtu 'V' add devices dev return True
def external script script p1 p2 p3 None p4 None command [script p1 p2 p3 p4 ]try stup need shell command creationflags build command command env fix env logging info ' Runninguserscript%s %s %s ' script p1 p2 p subprocess Popen command shell need shell stdin subprocess PIPE stdout subprocess PIPE stderr subprocess STDOUT startupinfo stup env env creationflags creationflags except logging debug ' Failedscript%s Traceback ' script exc info True return ' Cannotrunscript%s\r\n' % script -1 output p stdout read ret p wait return output ret
def get token for user user scope data { 'user %s id' % scope user id}return signing dumps data
def get token for user user scope data { 'user %s id' % scope user id}return signing dumps data
def get token for user user scope data { 'user %s id' % scope user id}return signing dumps data
def find font face rules sheet oeb ans []try rules sheet data css Rulesexcept Attribute Error rules sheet css Rulesfor i rule in enumerate rules if rule type rule FONT FACE RULE continueprops get font properties rule default u'normal' if not props[u'font-family'] or not props[u'src'] continuetry path sheet abshref props[u'src'] except Attribute Error path props[u'src']ff oeb manifest hrefs get urlnormalize path None if not ff continueprops[u'item'] ffif props[u'font-weight'] in {u'bolder' u'lighter'} props[u'font-weight'] u' 400 'props[u'weight'] int props[u'font-weight'] props[u'rule'] ruleprops[u'chars'] set ans append props return ans
def find font face rules sheet oeb ans []try rules sheet data css Rulesexcept Attribute Error rules sheet css Rulesfor i rule in enumerate rules if rule type rule FONT FACE RULE continueprops get font properties rule default u'normal' if not props[u'font-family'] or not props[u'src'] continuetry path sheet abshref props[u'src'] except Attribute Error path props[u'src']ff oeb manifest hrefs get urlnormalize path None if not ff continueprops[u'item'] ffif props[u'font-weight'] in {u'bolder' u'lighter'} props[u'font-weight'] u' 400 'props[u'weight'] int props[u'font-weight'] props[u'rule'] ruleprops[u'chars'] set ans append props return ans
def find font face rules sheet oeb ans []try rules sheet data css Rulesexcept Attribute Error rules sheet css Rulesfor i rule in enumerate rules if rule type rule FONT FACE RULE continueprops get font properties rule default u'normal' if not props[u'font-family'] or not props[u'src'] continuetry path sheet abshref props[u'src'] except Attribute Error path props[u'src']ff oeb manifest hrefs get urlnormalize path None if not ff continueprops[u'item'] ffif props[u'font-weight'] in {u'bolder' u'lighter'} props[u'font-weight'] u' 400 'props[u'weight'] int props[u'font-weight'] props[u'rule'] ruleprops[u'chars'] set ans append props return ans
def is bind mounted module linux mounts dest src None fstype None is mounted Falseif get platform ' Linux' and linux mounts is not None if src is None if dest in linux mounts is mounted Trueelif dest in linux mounts and linux mounts[dest]['src'] src is mounted Trueelse bin path module get bin path 'mount' required True cmd '%s-l' % bin path rc out err module run command cmd mounts []if len out mounts to native out strip split '\n' for mnt in mounts arguments mnt split if arguments[ 0 ] src or src is None and arguments[ 2 ] dest and arguments[ 4 ] fstype or fstype is None is mounted Trueif is mounted breakreturn is mounted
@pytest yield fixture scope u'module' autouse True def ctx builtins xonsh shell Shell {u'PATH' []} yield del builtins xonsh shell
@pytest mark django dbdef test getorig project 0 nongnu store 0 store 0 sync for i db unit in enumerate store 0 units iterator store unit store 0 file store units[ i + 1 ]assert db unit getid store unit getid
def iqr nanpercentile x q axis None interpolation 'linear' keepdims False contains nan False if hasattr np 'nanpercentile' result np nanpercentile x q axis axis interpolation interpolation keepdims keepdims if result ndim > 1 and Numpy Version np version < '1 11 0a' axis np asarray axis if axis size 1 if axis ndim 0 axis axis[ None]result np rollaxis result axis[ 0 ] else result np rollaxis result -1 else msg " Keywordnan policy 'omit'notcorrectlysupportedfornumpyversions< 1 9 x Thedefaultbehaviorofnumpy percentilewillbeused "warnings warn msg Runtime Warning result iqr percentile x q axis axis return result
@cronjobs registerdef update visitors metric if settings STAGE returnlatest metric get latest metric VISITORS METRIC CODE if latest metric is not None latest metric date latest metric startelse latest metric date date 2011 1 1 start latest metric date + timedelta days 1 end date today - timedelta days 1 visitors googleanalytics visitors start end metric kind Metric Kind objects get code VISITORS METRIC CODE for date str visits in visitors items day datetime strptime date str '%Y-%m-%d' date Metric objects create kind metric kind start day end day + timedelta days 1 value visits
def wrappertask task @six wraps task def wrapper *args **kwargs parent task *args **kwargs try subtask next parent except Stop Iteration returnwhile True try if isinstance subtask types Generator Type subtask running Truetry step next subtask except Stop Iteration subtask running Falsewhile subtask running try yield step except Generator Exit subtask close raiseexcept try step subtask throw *sys exc info except Stop Iteration subtask running Falseelse try step next subtask except Stop Iteration subtask running Falseelse yield subtask except Generator Exit parent close raiseexcept try subtask parent throw *sys exc info except Stop Iteration returnelse try subtask next parent except Stop Iteration returnreturn wrapper
def wrappertask task @six wraps task def wrapper *args **kwargs parent task *args **kwargs try subtask next parent except Stop Iteration returnwhile True try if isinstance subtask types Generator Type subtask running Truetry step next subtask except Stop Iteration subtask running Falsewhile subtask running try yield step except Generator Exit subtask close raiseexcept try step subtask throw *sys exc info except Stop Iteration subtask running Falseelse try step next subtask except Stop Iteration subtask running Falseelse yield subtask except Generator Exit parent close raiseexcept try subtask parent throw *sys exc info except Stop Iteration returnelse try subtask next parent except Stop Iteration returnreturn wrapper
def set locale info domain localedir global DOMAIN LOCALEDIR DOMAIN domain LOCALEDIR localedir
def Make Bad Signature Response return '{"status" 21003 }'
def make Rst prefix section app example By Identifier schema store for route in sorted get Routes app if route attributes get 'private api' False continuedata introspect Route route example By Identifier schema store if data['section'] section continuefor method in route methods if data['header'] is not None yield data['header'] yield '-' * len data['header'] yield '' body format Route Body data schema store for line in http directive method prefix + route path body yield line
def all builtins return p for p in plugin plugins values if p builtin
def windows long path name short path if not isinstance short path six text type short path short path decode fsencoding import ctypesbuf ctypes create unicode buffer 260 get long path name w ctypes windll kernel 32 Get Long Path Name Wreturn value get long path name w short path buf 260 if return value 0 or return value > 260 return short pathelse long path buf valueif len long path > 1 and long path[ 1 ] ' ' long path long path[ 0 ] upper + long path[ 1 ] return long path
def windows long path name short path if not isinstance short path six text type short path short path decode fsencoding import ctypesbuf ctypes create unicode buffer 260 get long path name w ctypes windll kernel 32 Get Long Path Name Wreturn value get long path name w short path buf 260 if return value 0 or return value > 260 return short pathelse long path buf valueif len long path > 1 and long path[ 1 ] ' ' long path long path[ 0 ] upper + long path[ 1 ] return long path
def windows long path name short path if not isinstance short path six text type short path short path decode fsencoding import ctypesbuf ctypes create unicode buffer 260 get long path name w ctypes windll kernel 32 Get Long Path Name Wreturn value get long path name w short path buf 260 if return value 0 or return value > 260 return short pathelse long path buf valueif len long path > 1 and long path[ 1 ] ' ' long path long path[ 0 ] upper + long path[ 1 ] return long path
def Sign Component Content component filename output filename component rdf client Client Component From Serialized String open component filename 'rb' read E Print ' Openedcomponent%s ' % component summary name if component build system system ' Windows' Sign Windows Component component output filename returnraise Runtime Error ' Componentsigningisnotimplementedfor OS%s ' % component build system system
def Sign Component Content component filename output filename component rdf client Client Component From Serialized String open component filename 'rb' read E Print ' Openedcomponent%s ' % component summary name if component build system system ' Windows' Sign Windows Component component output filename returnraise Runtime Error ' Componentsigningisnotimplementedfor OS%s ' % component build system system
def nonthreadsafe fn @wraps fn def core *args **kwargs with cuda compiler lock return fn *args **kwargs return core
def nonthreadsafe fn @wraps fn def core *args **kwargs with cuda compiler lock return fn *args **kwargs return core
def nonthreadsafe fn @wraps fn def core *args **kwargs with cuda compiler lock return fn *args **kwargs return core
def get logger name for module module module file module file base dir os path dirname os path abspath module file module name os path basename module file module name module name replace ' pyc' '' replace ' py' '' split base dir split os path sep split [component for component in split if component]start index 0for index component in enumerate reversed split if component startswith 'st 2 ' start index len split - 1 - index breaksplit split[start index ]name ' ' join split + ' ' + module name return name
def build url resource id '' route '' base config get config ['plotly api domain']formatter {'base' base 'resource' resource 'id' id 'route' route}if id if route url '{base}/v 2 /{resource}/{id}/{route}' format **formatter else url '{base}/v 2 /{resource}/{id}' format **formatter elif route url '{base}/v 2 /{resource}/{route}' format **formatter else url '{base}/v 2 /{resource}' format **formatter return url
def get default location complete id db current dbs 3 db current s3 dbctable s3 db survey completeqtable s3 db survey questionatable s3 db survey answerquery atable question id qtable id & atable complete id ctable id code list ['STD-L 4 ' 'STD-L 3 ' 'STD-L 2 ' 'STD-L 1 ' 'STD-L 0 ']for location code in code list record db query & qtable code location code select qtable id limitby 0 1 first if record widget obj survey get Widget From Question record id breakif record widget obj load Answer complete id record id return widget objelse return None
def get default location complete id db current dbs 3 db current s3 dbctable s3 db survey completeqtable s3 db survey questionatable s3 db survey answerquery atable question id qtable id & atable complete id ctable id code list ['STD-L 4 ' 'STD-L 3 ' 'STD-L 2 ' 'STD-L 1 ' 'STD-L 0 ']for location code in code list record db query & qtable code location code select qtable id limitby 0 1 first if record widget obj survey get Widget From Question record id breakif record widget obj load Answer complete id record id return widget objelse return None
def read int 32 fid return unpack simple fid '>i 4 ' np int 32
def get Keys repository repository Class repository class if repository Class list or repository Class tuple return range len repository if repository Class dict return repository keys return None
@contextlib contextmanagerdef batch normalization *bricks from blocks bricks import Batch Normalizationbn find bricks bricks lambda b isinstance b Batch Normalization try for brick in bn brick enter yield finally for brick in bn[ -1 ] brick exit
@contextlib contextmanagerdef batch normalization *bricks from blocks bricks import Batch Normalizationbn find bricks bricks lambda b isinstance b Batch Normalization try for brick in bn brick enter yield finally for brick in bn[ -1 ] brick exit
def add tagids source return modify tagids source
@check login required@valid prefs requireddef root request local site name None if request user is authenticated url name u'dashboard'else url name u'all-review-requests'return Http Response Redirect local site reverse url name local site name local site name
@taskdef upload distutils check Git Hub release pypi register pypi upload test pypi 2 test pypi 3
def setsebools pairs persist False if not isinstance pairs dict return {}if persist cmd 'setsebool-P'else cmd 'setsebool'for boolean value in six iteritems pairs cmd '{ 0 }{ 1 } {2 }' format cmd boolean value return not salt ['cmd retcode'] cmd python shell False
def binary crossentropy output target return - target * tensor log output + 1 0 - target * tensor log 1 0 - output
def required module list docstring None if not docstring return []ret []modules parse docstring docstring get 'deps' [] for mod in modules try imp find module mod except Import Error ret append mod return ret
def required module list docstring None if not docstring return []ret []modules parse docstring docstring get 'deps' [] for mod in modules try imp find module mod except Import Error ret append mod return ret
def HTTP Info From Exception value if isinstance value web HTTP Error return value status code value log message elif isinstance value Invalid Request Error return 400 value args[ 0 ] elif isinstance value Http Forbidden Error return 403 value args[ 0 ] elif isinstance value Not Found Error return 404 value args[ 0 ] elif isinstance value Service Unavailable Error return 503 value args[ 0 ] else return 500 str value
def get current site request crum get current request if not request returnreturn {'id' request site id 'domain' request site domain 'name' request site name}
def eb Authentication failure proto username password failure trap imap 4 No Supported Authentication return proto prompt ' Nosecureauthenticationavailable Logininsecurely? y/N ' add Callback cb Insecure Login proto username password
def contains ch type info ch type if not isinstance ch type string types raise Value Error '`ch type`isofclass{actual class} Itmustbe`str`' format actual class type ch type meg extras ['mag' 'grad' 'planar 1 ' 'planar 2 ']fnirs extras ['hbo' 'hbr']valid channel types sorted [key for key in PICK TYPES KEYS if key 'meg' ] + meg extras + fnirs extras if ch type not in valid channel types raise Value Error 'ch typemustbeoneof%s not"%s"' % valid channel types ch type if info is None raise Value Error ' Cannotcheckforchannelsoftype"%s"becauseinfois None' % ch type return ch type in [channel type info ii for ii in range info['nchan'] ]
def load demo collection id delete demo collection id if not collection domain Collection is demo collection id collection id raise Exception ' Invaliddemocollectionid%s' % collection id demo filepath os path join feconf SAMPLE COLLECTIONS DIR feconf DEMO COLLECTIONS[collection id] if demo filepath endswith 'yaml' yaml content utils get file contents demo filepath else raise Exception ' Unrecognizedfilepath %s' % demo filepath collection save new collection from yaml feconf SYSTEM COMMITTER ID yaml content collection id publish collection and update user profiles feconf SYSTEM COMMITTER ID collection id index collections given ids [collection id] for collection node in collection nodes exp id collection node exploration idif exp services get exploration by id exp id strict False is None exp services load demo exp id logging info ' Collectionwithid%swasloaded ' % collection id
@library global functiondef mozillians form element template get template 'includes/form html' context {'form' element}return mark safe template render context
def get test classes from testsuite suite if not isinstance suite unittest Test Suite raise Type Error 'nota Test Suite' suite results set for test in suite tests if isinstance test unittest Test Case results add test class else classes get test classes from testsuite test results update classes return results
def get test classes from testsuite suite if not isinstance suite unittest Test Suite raise Type Error 'nota Test Suite' suite results set for test in suite tests if isinstance test unittest Test Case results add test class else classes get test classes from testsuite test results update classes return results
def resolve action bundle default debug None allow debug True if not settings DEBUG or not allow debug return True True if default debug is None default debug settings ASSETS DEBU Gdebug bundle debug if bundle debug is not None else default debug if debug 'merge' return True False elif debug is True return False False elif debug is False return True True else raise Value Error ' Invaliddebugvalue %s' % debug
def resolve action bundle default debug None allow debug True if not settings DEBUG or not allow debug return True True if default debug is None default debug settings ASSETS DEBU Gdebug bundle debug if bundle debug is not None else default debug if debug 'merge' return True False elif debug is True return False False elif debug is False return True True else raise Value Error ' Invaliddebugvalue %s' % debug
def get shared secret key provider id secret getattr settings 'CREDIT PROVIDER SECRET KEYS' {} get provider id if isinstance secret unicode try secret str secret except Unicode Encode Error secret Nonelog error u' Sharedsecretkeyforcreditprovider"%s"containsnon-ASCI Iunicode ' provider id return secret
def dup sturm f K if not K has Field raise Domain Error "can'tcompute Sturmsequenceover%s" % K f dup sqf part f K sturm [f dup diff f 1 K ]while sturm[ -1 ] s dup rem sturm[ -2 ] sturm[ -1 ] K sturm append dup neg s K return sturm[ -1 ]
def demo legacy grammar from nltk grammar import Feature Grammarg Feature Grammar fromstring u"\n%start S\n S[sem <hello>]->'hello'\n" print u' Readinggrammar %s' % g print u'*' * 20 for reading in interpret sents [u'hello'] g semkey u'sem' syn sem reading[ 0 ]print print u'output ' sem
def demo legacy grammar from nltk grammar import Feature Grammarg Feature Grammar fromstring u"\n%start S\n S[sem <hello>]->'hello'\n" print u' Readinggrammar %s' % g print u'*' * 20 for reading in interpret sents [u'hello'] g semkey u'sem' syn sem reading[ 0 ]print print u'output ' sem
def asdict sobject return dict items sobject
def row 2 feature row id field geometry field feature {'type' ' Feature' 'properties' copy row }geometry feature['properties'] pop geometry field feature['geometry'] loadshape unhexlify geometry feature['id'] feature['properties'] pop id field return feature
def get index usage key children children [unicode child for child in children]return children index usage key
def bytes to elementtree bytes or file if isinstance bytes or file compat basestring s bytes or fileelse s bytes or file read if compat is py 3 s unicode s 'utf- 8 ' f compat String IO s tree ET Element Tree file f return tree
def double complex from npy cdouble var res ' complexstuff double complex from npy cdouble {} ' format var return res
def get Acceptable accept header have types accepted parse Accept Header accept header preferred match Types accepted have types return [mtype for mtype in preferred]
def build element wise ufunc wrapper cres signature ctx cres target contextlibrary cres libraryfname cres fndesc llvm func nameenv Noneif cres objectmode env cres environmentassert env is not None ll intp cres target context get value type types intp ll pyobj cres target context get value type types pyobject envptr lc Constant int ll intp id env inttoptr ll pyobj else envptr Noneptr build ufunc wrapper library ctx fname signature cres objectmode envptr env dtypenums [as dtype a num for a in signature args]dtypenums append as dtype signature return type num return dtypenums ptr env
def tokenize Json Entry json dict return set find words findall '' join word lower for word in json dict values
def tokenize Json Entry json dict return set find words findall '' join word lower for word in json dict values
def line 2d to 3d line zs 0 zdir u'z' line class Line 3 Dline set 3d properties zs zdir
def save password in keyring credential id username password try import keyringreturn keyring set password credential id username password except Import Error log error ' Triedtostorepasswordinkeyring butnokeyringmoduleisinstalled' return False
def save password in keyring credential id username password try import keyringreturn keyring set password credential id username password except Import Error log error ' Triedtostorepasswordinkeyring butnokeyringmoduleisinstalled' return False
def Gen Api Config service class names generator None hostname None service map {}generator generator or api config Api Config Generator for service class name in service class names module name base service class name service class name rsplit ' ' 1 module import module name fromlist base service class name service getattr module base service class name if not isinstance service type and issubclass service remote Service raise Type Error '%sisnota Proto RP Cservice' % service class name hostname service api info hostname or hostname service map[service class name] generator pretty print config to json service hostname hostname return service map
def save list setting settings filename name new value old value None new value list set new value new value sorted new value key lambda s s lower if old value is not None if old value new value returnsettings set name new value sublime save settings filename
def get comments file worksheet path archive valid files sheet codename os path split worksheet path [ -1 ]rels file PACKAGE WORKSHEET RELS + '/' + sheet codename + ' rels' if rels file not in valid files return Nonerels source archive read rels file root fromstring rels source for i in root if i attrib[' Type'] COMMENTS NS comments file os path split i attrib[' Target'] [ -1 ]comments file PACKAGE XL + '/' + comments file if comments file in valid files return comments filereturn None
def get comments file worksheet path archive valid files sheet codename os path split worksheet path [ -1 ]rels file PACKAGE WORKSHEET RELS + '/' + sheet codename + ' rels' if rels file not in valid files return Nonerels source archive read rels file root fromstring rels source for i in root if i attrib[' Type'] COMMENTS NS comments file os path split i attrib[' Target'] [ -1 ]comments file PACKAGE XL + '/' + comments file if comments file in valid files return comments filereturn None
def check args options for path in [options aws credentials options master yml] if path and not os path exists path sys stderr write 'ERROR {path}notfound \n' format path path sys exit -1
def check args options for path in [options aws credentials options master yml] if path and not os path exists path sys stderr write 'ERROR {path}notfound \n' format path path sys exit -1
def dot u v w a b u 1 u 2 u v 1 v 2 vreturn w * u 1 + b * u 2 * w * v 1 + b * v 2 + abs a * u 1 * v 1
@register simple tag takes context True def simple tag without context parameter arg return ' Expectedresult'
def ensure datetime tzinfo datetime tzinfo None if datetime tzinfo is None datetime datetime replace tzinfo UTC if tzinfo is not None datetime datetime astimezone get timezone tzinfo if hasattr tzinfo 'normalize' datetime tzinfo normalize datetime return datetime
def ensure datetime tzinfo datetime tzinfo None if datetime tzinfo is None datetime datetime replace tzinfo UTC if tzinfo is not None datetime datetime astimezone get timezone tzinfo if hasattr tzinfo 'normalize' datetime tzinfo normalize datetime return datetime
def with ioloop method expect success True def test method self r method self loop self io loopif expect success self pullstream on recv self on message succeed else self pullstream on recv self on message fail loop call later 1 self attempt connection loop call later 1 2 self send msg if expect success loop call later 2 self on test timeout fail else loop call later 2 self on test timeout succeed loop start if self fail msg self fail self fail msg return rreturn test method
def disable inheritance path object Type copy True dc dacl Constants object Type dc get Object Type Bit object Type path dc process Path path object Type return set dacl inheritance path object Type False copy None
def clean config config patterns comment out list []for line in config if line strip startswith '#' continueif '#' in line pure line line[ line index '#' ]else pure line lineif pure line strip endswith ' ' comment out list append line continueif any [re search pat pure line for pat in patterns] comment out list append line new config [ line if line not in comment out list else '#' + line for line in config]return new config
def clean config config patterns comment out list []for line in config if line strip startswith '#' continueif '#' in line pure line line[ line index '#' ]else pure line lineif pure line strip endswith ' ' comment out list append line continueif any [re search pat pure line for pat in patterns] comment out list append line new config [ line if line not in comment out list else '#' + line for line in config]return new config
def get ax freq ax ax freq getattr ax 'freq' None if ax freq is None if hasattr ax 'left ax' ax freq getattr ax left ax 'freq' None elif hasattr ax 'right ax' ax freq getattr ax right ax 'freq' None if ax freq is None shared axes ax get shared x axes get siblings ax if len shared axes > 1 for shared ax in shared axes ax freq getattr shared ax 'freq' None if ax freq is not None breakreturn ax freq
def get Tree Walker tree Type implementation None **kwargs tree Type tree Type lower if tree Type not in tree Walker Cache if tree Type u'dom' from import domtree Walker Cache[tree Type] dom Tree Walkerelif tree Type u'genshi' from import genshitree Walker Cache[tree Type] genshi Tree Walkerelif tree Type u'lxml' from import etree lxmltree Walker Cache[tree Type] etree lxml Tree Walkerelif tree Type u'etree' from import etreeif implementation is None implementation default etreereturn etree get E Tree Module implementation **kwargs Tree Walkerreturn tree Walker Cache get tree Type
def first every last iterable first every last did first Falsefor item in iterable if not did first did first Truefirst item every item if did first last item
def remove comments code pattern ' \\" *?\\" \\\' *?\\\' /\\* *?\\*/ //[^\\r\\n]*\\n 'regex re compile pattern re MULTILINE re DOTALL def do replace match if match group 2 is not None return ''else return match group 1 return regex sub do replace code
def from bundle ingest dirname cs return pd Timestamp cs replace ' ' ' '
def get function object obj attr getattr obj ' numba ' None if attr return getattr obj attr return obj
def get function object obj attr getattr obj ' numba ' None if attr return getattr obj attr return obj
def get function object obj attr getattr obj ' numba ' None if attr return getattr obj attr return obj
def get function object obj attr getattr obj ' numba ' None if attr return getattr obj attr return obj
def get function object obj attr getattr obj ' numba ' None if attr return getattr obj attr return obj
def split commits and tags obj store lst ignore unknown False commits set tags set others set for e in lst try o obj store[e]except Key Error if not ignore unknown raiseelse if isinstance o Commit commits add e elif isinstance o Tag tags add e tagged o object[ 1 ] c t o split commits and tags obj store [tagged] ignore unknown ignore unknown commits ctags tothers oelse others add e return commits tags others
def eval expr expr return eval node ast parse expr body[ 0 ] value
def auto create specific service result parser run utils run result parser result parsers[get name of init run ]command list [c for c in COMMANDS if c not in ['list' 'set target'] ]return Service Result Parser result parser command list
def auto create specific service result parser run utils run result parser result parsers[get name of init run ]command list [c for c in COMMANDS if c not in ['list' 'set target'] ]return Service Result Parser result parser command list
def auto create specific service result parser run utils run result parser result parsers[get name of init run ]command list [c for c in COMMANDS if c not in ['list' 'set target'] ]return Service Result Parser result parser command list
def configure cloud init cloudcfg open '/etc/cloud/cloud cfg' 'w' cloudcfg write CLOUD INIT CFG cloudcfg close
def get partial date formats from django conf import settingsyear month format 'YEAR MONTH FORMAT' month day format 'MONTH DAY FORMAT' if year month format 'YEAR MONTH FORMAT' year month format settings YEAR MONTH FORMA Tif month day format 'MONTH DAY FORMAT' month day format settings MONTH DAY FORMA Treturn year month format month day format
def get partial date formats from django conf import settingsyear month format 'YEAR MONTH FORMAT' month day format 'MONTH DAY FORMAT' if year month format 'YEAR MONTH FORMAT' year month format settings YEAR MONTH FORMA Tif month day format 'MONTH DAY FORMAT' month day format settings MONTH DAY FORMA Treturn year month format month day format
def get partial date formats from django conf import settingsyear month format 'YEAR MONTH FORMAT' month day format 'MONTH DAY FORMAT' if year month format 'YEAR MONTH FORMAT' year month format settings YEAR MONTH FORMA Tif month day format 'MONTH DAY FORMAT' month day format settings MONTH DAY FORMA Treturn year month format month day format
def running service owners exclude '/dev' '/home' '/media' '/proc' '/run' '/sys/' '/tmp' '/var' error {}if 'pkg owner' not in salt error[' Unsupported Package Manager'] ' Themoduleforthepackagemanageronthissystemdoesnotsupportlookingupwhichpackage s ownswhichfile s 'if 'file open files' not in salt error[' Unsupported File Module'] ' Thefilemoduleonthissystemdoesnotsupportlookingupopenfilesonthesystem'if error return {' Error' error}ret {}open files salt ['file open files'] execs salt ['service execs'] for path in open files ignore Falsefor bad dir in exclude if path startswith bad dir ignore Trueif ignore continueif not os access path os X OK continuefor service in execs if path execs[service] pkg salt ['pkg owner'] path ret[service] next six itervalues pkg return ret
def clean missing resource id items user key '#' + unicode resource id + ' ' contacts Object filter permitted user Contact objects filter nuvius resource contains key if not len contacts len items candidates []for contact in contacts found Falsefor item in items itemkey key + unicode item id raw if itemkey in contact nuvius resource found Trueif not found candidates append contact for victim in candidates victim subscribers clear victim delete
@receiver post save sender User def create profile callback sender instance created False **kwargs if created for auto in Auto Group objects all if re match auto match instance email instance groups add auto group Token objects create user instance Profile objects get or create user instance
def def physical type unit name r unit get physical type id if r in physical unit mapping raise Value Error u'{ 0 r} {1 r} alreadydefinedas{ 2 r}' format r name physical unit mapping[r] physical unit mapping[r] name
def gating enabled default None def wrap f def function wrapper course *args if not course enable subsection gating return defaultreturn f course *args return function wrapperreturn wrap
def plot results metrics formats title x ticks x label format markers 'x' ' ' 'o' '+' metric colors 'c' 'm' 'y' 'k' 'g' 'r' 'b' fig plt figure 'scikit-learnmultilabelmetricsbenchmarks' plt title title ax fig add subplot 111 for i metric in enumerate metrics for j format in enumerate formats ax plot x ticks results[ i j ] flat label '{} {}' format metric format marker format markers[j] color metric colors[ i % len metric colors ] ax set xlabel x label ax set ylabel ' Time s ' ax legend plt show
def endpoint absent name profile None **connection args ret {'name' name 'changes' {} 'result' True 'comment' ' Endpointforservice"{ 0 }"isalreadyabsent' format name }endpoint salt ['keystone endpoint get'] name profile profile **connection args if not endpoint return retelse if opts get 'test' ret['result'] Noneret['comment'] ' Endpointforservice"{ 0 }"willbedeleted' format name return ret salt ['keystone endpoint delete'] name profile profile **connection args ret['comment'] ' Endpointforservice"{ 0 }"hasbeendeleted' format name ret['changes']['endpoint'] ' Deleted'return ret
def endpoint absent name profile None **connection args ret {'name' name 'changes' {} 'result' True 'comment' ' Endpointforservice"{ 0 }"isalreadyabsent' format name }endpoint salt ['keystone endpoint get'] name profile profile **connection args if not endpoint return retelse if opts get 'test' ret['result'] Noneret['comment'] ' Endpointforservice"{ 0 }"willbedeleted' format name return ret salt ['keystone endpoint delete'] name profile profile **connection args ret['comment'] ' Endpointforservice"{ 0 }"hasbeendeleted' format name ret['changes']['endpoint'] ' Deleted'return ret
def endpoint absent name profile None **connection args ret {'name' name 'changes' {} 'result' True 'comment' ' Endpointforservice"{ 0 }"isalreadyabsent' format name }endpoint salt ['keystone endpoint get'] name profile profile **connection args if not endpoint return retelse if opts get 'test' ret['result'] Noneret['comment'] ' Endpointforservice"{ 0 }"willbedeleted' format name return ret salt ['keystone endpoint delete'] name profile profile **connection args ret['comment'] ' Endpointforservice"{ 0 }"hasbeendeleted' format name ret['changes']['endpoint'] ' Deleted'return ret
def libvlc media library retain p mlib f Cfunctions get 'libvlc media library retain' None or Cfunction 'libvlc media library retain' 1 None None Media Library return f p mlib
def get default unit format config return u'cds'
def get default unit format config return u'cds'
def delete pool hostname username password name ret {'name' name 'changes' {} 'result' False 'comment' ''}if opts ['test'] return test output ret 'delete' params {'hostname' hostname 'username' username 'password' password 'name' name} existing salt ['bigip list pool'] hostname username password name if existing['code'] 200 deleted salt ['bigip delete pool'] hostname username password name if deleted['code'] 200 ret['result'] Trueret['comment'] ' Poolwassuccessfullydeleted 'ret['changes']['old'] existing['content']ret['changes']['new'] {}else ret load result deleted ret elif existing['code'] 404 ret['result'] Trueret['comment'] ' Thispoolalreadydoesnotexist Nochangesmade 'ret['changes']['old'] {}ret['changes']['new'] {}else ret load result existing ret return ret
def spatial inter hemi connectivity src dist verbose None from scipy spatial distance import cdistsrc ensure src src kind 'surf' conn cdist src[ 0 ]['rr'][src[ 0 ]['vertno']] src[ 1 ]['rr'][src[ 1 ]['vertno']] conn sparse csr matrix conn < dist dtype int empties [sparse csr matrix nv nv dtype int for nv in conn shape]conn sparse vstack [sparse hstack [empties[ 0 ] conn] sparse hstack [conn T empties[ 1 ]] ] return conn
def spatial inter hemi connectivity src dist verbose None from scipy spatial distance import cdistsrc ensure src src kind 'surf' conn cdist src[ 0 ]['rr'][src[ 0 ]['vertno']] src[ 1 ]['rr'][src[ 1 ]['vertno']] conn sparse csr matrix conn < dist dtype int empties [sparse csr matrix nv nv dtype int for nv in conn shape]conn sparse vstack [sparse hstack [empties[ 0 ] conn] sparse hstack [conn T empties[ 1 ]] ] return conn
def is page candidate url Link url Title title artist title slugify title lower artist slugify artist lower sitename re search u'// [^/]+ / *' slugify url Link lower group 1 url Title slugify url Title lower if url Title find title -1 return Truetokens [ by + ' ' + artist for by in BY TRANS] + [artist sitename sitename replace 'www ' '' ] + LYRICS TRANS song Title re sub u' %s ' % u' ' join tokens u'' url Title song Title song Title strip ' ' typo Ratio 0 9return difflib Sequence Matcher None song Title title ratio > typo Ratio
def is page candidate url Link url Title title artist title slugify title lower artist slugify artist lower sitename re search u'// [^/]+ / *' slugify url Link lower group 1 url Title slugify url Title lower if url Title find title -1 return Truetokens [ by + ' ' + artist for by in BY TRANS] + [artist sitename sitename replace 'www ' '' ] + LYRICS TRANS song Title re sub u' %s ' % u' ' join tokens u'' url Title song Title song Title strip ' ' typo Ratio 0 9return difflib Sequence Matcher None song Title title ratio > typo Ratio
def is page candidate url Link url Title title artist title slugify title lower artist slugify artist lower sitename re search u'// [^/]+ / *' slugify url Link lower group 1 url Title slugify url Title lower if url Title find title -1 return Truetokens [ by + ' ' + artist for by in BY TRANS] + [artist sitename sitename replace 'www ' '' ] + LYRICS TRANS song Title re sub u' %s ' % u' ' join tokens u'' url Title song Title song Title strip ' ' typo Ratio 0 9return difflib Sequence Matcher None song Title title ratio > typo Ratio
@pytest mark cmd@pytest mark django dbdef test find duplicate emails noemails capfd member member 2 call command 'find duplicate emails' out err capfd readouterr assert ' Thefollowingusershavenoemailset' in out assert 'member' in out assert 'member 2 ' in out
def multiple file nmds input dir output dir dimensions 2 if not os path exists output dir os makedirs output dir file names os listdir input dir file names [fname for fname in file names if not fname startswith ' ' ]for fname in file names base fname ext os path splitext fname infile os path join input dir fname lines open infile 'U' nmds res string nmds lines dimensions outfile os path join output dir 'nmds ' + base fname + ' txt' outfile open outfile 'w' outfile write nmds res string outfile close
def multiple file nmds input dir output dir dimensions 2 if not os path exists output dir os makedirs output dir file names os listdir input dir file names [fname for fname in file names if not fname startswith ' ' ]for fname in file names base fname ext os path splitext fname infile os path join input dir fname lines open infile 'U' nmds res string nmds lines dimensions outfile os path join output dir 'nmds ' + base fname + ' txt' outfile open outfile 'w' outfile write nmds res string outfile close
def get results dir list pid core dir basename pid dir dict {}for debugdir file in glob glob '/tmp/autotest results dir *' a pid os path splitext debugdir file [1 ]results dir open debugdir file read strip pid dir dict[a pid] os path join results dir core dir basename results dir list []if pid is not None while pid > 1 if pid in pid dir dict results dir list append pid dir dict[pid] pid get parent pid pid else results dir list pid dir dict values return results dir list or pid dir dict values or [os path join '/tmp' core dir basename ]
def intf Options net Mininet auto Static Arp True net add Controller 'c 0 ' h1 net add Host 'h 1 ' h2 net add Host 'h 2 ' s1 net add Switch 's 1 ' link 1 net add Link h1 s1 cls TC Link net add Link h2 s1 net start net ping All info '\n*** Configuringoneintfwithbandwidthof 5 Mb\n' link 1 intf 1 config bw 5 info '\n*** Runningiperftotest\n' net iperf info '\n*** Configuringoneintfwithlossof 50 %\n' link 1 intf 1 config loss 50 info '\n' net iperf h1 h2 l4 Type 'UDP' info '\n*** Configuringoneintfwithdelayof 15 ms\n' link 1 intf 1 config delay '15 ms' info '\n*** Runapingtoconfirmdelay\n' net ping Pair Full info '\n*** Donetesting\n' net stop
def apply overwrites to context context overwrite context for variable overwrite in overwrite context items if variable not in context continuecontext value context[variable]if isinstance context value list if overwrite in context value context value remove overwrite context value insert 0 overwrite else context[variable] overwrite
def apply overwrites to context context overwrite context for variable overwrite in overwrite context items if variable not in context continuecontext value context[variable]if isinstance context value list if overwrite in context value context value remove overwrite context value insert 0 overwrite else context[variable] overwrite
def nearest roads client points params {'points' convert location list points }return client get '/v 1 /nearest Roads' params base url ROADS BASE URL accepts clientid False extract body roads extract get 'snapped Points' []
def loc to eeg loc loc if loc[ 3 6] any return np array [loc[ 0 3] loc[ 3 6]] Telse return loc[ 0 3][ np newaxis] copy
def function call count variance 0 05 def decorate fn def wrap *args **kw with count functions variance variance return fn *args **kw return update wrapper wrap fn return decorate
@skipif not has qt def test line profile rgb plugin setup line profile data chelsea limits None for i in range 6 plugin line tool thicken scan line line image scan data plugin output assert equal line image[ line image 128 ] size 750 assert equal line image[ line image 255 ] size 151 assert equal line image shape 300 451 assert equal scan data shape 151 3 assert allclose scan data max 0 772 rtol 0 001 assert allclose scan data mean 0 4359 rtol 0 001
def clean course key course key padding char return 'course {}' format b32 encode unicode course key replace ' ' padding char
def get non shed tool panel configs app config filenames []for config filename in app config tool configs tree error message xml util parse xml config filename if tree is None continueroot tree getroot tool path root get 'tool path' None if tool path is None config filenames append config filename return config filenames
def canonical type name if name 'int' return 'int 256 'if name 'uint' return 'uint 256 'if name 'fixed' return 'fixed 128 x 128 'if name 'ufixed' return 'ufixed 128 x 128 'if name startswith 'int[' return 'int 256 ' + name[ 3 ] if name startswith 'uint[' return 'uint 256 ' + name[ 4 ] if name startswith 'fixed[' return 'fixed 128 x 128 ' + name[ 5 ] if name startswith 'ufixed[' return 'ufixed 128 x 128 ' + name[ 6 ] return name
def canonical type name if name 'int' return 'int 256 'if name 'uint' return 'uint 256 'if name 'fixed' return 'fixed 128 x 128 'if name 'ufixed' return 'ufixed 128 x 128 'if name startswith 'int[' return 'int 256 ' + name[ 3 ] if name startswith 'uint[' return 'uint 256 ' + name[ 4 ] if name startswith 'fixed[' return 'fixed 128 x 128 ' + name[ 5 ] if name startswith 'ufixed[' return 'ufixed 128 x 128 ' + name[ 6 ] return name
def query *args **kwargs query 'query' try return query Query kwargs get 'scope' cachedir opts ['cachedir'] *args **kwargs except Inspector Query Exception as ex raise Command Execution Error ex except Exception as ex log error get error message ex raise Exception ex
def maybe partial time string index indexer kind assert isinstance index pd Index if not isinstance index pd Datetime Index pd Period Index return indexerif isinstance indexer slice if isinstance indexer start pd compat string types start index maybe cast slice bound indexer start 'left' kind else start indexer startif isinstance indexer stop pd compat string types stop index maybe cast slice bound indexer stop 'right' kind else stop indexer stopreturn slice start stop elif isinstance indexer pd compat string types start index maybe cast slice bound indexer 'left' 'loc' stop index maybe cast slice bound indexer 'right' 'loc' return slice min start stop max start stop return indexer
def notify retweet t source t['user']created at t['created at']source user cycle color source['name'] + color func c['NOTIFICATION']['source nick'] '@' + source['screen name'] notify color func c['NOTIFICATION']['notify'] 'retweetedyourtweet' date parser parse created at clock fallback humanize date clock color func c['NOTIFICATION']['clock'] clock meta c['NOTIFY FORMAT']meta source user join meta split '#source user' meta notify join meta split '#notify' meta clock join meta split '#clock' meta emojize meta print Nicely '' print Nicely meta draw t t['retweeted status'] noti True
def version with settings hide 'running' 'warnings' warn only True res local 'vagrant--version' capture True if res failed return Noneline res splitlines [ -1 ]version re match ' Vagrant ? v ? ersion ? ? * ' line group 1 return tuple to int part for part in version split ' '
def Get Registered Server Option clsid option Name key Name Root 'CLSID\\%s\\%s' % str clsid str option Name return get string key Name Root
def test list add a Hy List [1 2 3] b Hy List [3 4 5] c a + b assert c [1 2 3 3 4 5] assert c class Hy List
def insort col element get lambda x x if not col col insert 0 element return col lo hi 0 len col while lo < hi mid int hi + lo / 2 if get col[mid] > get element hi midelse lo mid + 1 col insert lo element return col
def timestamp return '%s%s' % date today isoformat datetime now strftime '%I %M%p'
def zk service name ip address keyname key file '{}/{} key' format KEY DIRECTORY keyname ssh cmd ['ssh' '-i' key file ip address 'ls{}' format SERVICES DIR ]response subprocess check output ssh cmd init files response split for init file in init files if 'zookeeper' in init file return init fileraise OS Error ' Unabletofind Zoo Keeperon{}' format ip address
def make dict Validator keyvalidator valuevalidator def v d newd util Ordered Dict for key value in d iteritems newd[keyvalidator key ] valuevalidator value return newdv keyvalidator keyvalidatorv valuevalidator valuevalidatorreturn v
def delete vpnservice vpnservice profile None conn auth profile return conn delete vpnservice vpnservice
def crosstalk width height connections d { 'x' 0 i i for i in range width }for j in range 1 height d update { 'x' j i noop [ 'x' j - 1 randint 0 width for in range connections ] for i in range width } return d [ 'x' height - 1 i for i in range width ]
def get state ptr context builder name assert name in 'py' 'np' func name 'numba get %s random state' % name fnty ir Function Type rnd state ptr t fn builder module get or insert function fnty func name fn attributes add 'readnone' fn attributes add 'nounwind' return builder call fn
def get unicode data force False if isinstance data binary type return data decode u'utf- 8 ' elif data is None return u''elif force if PY 2 return unicode data else return str data else return data
def gaussian kl divergence mean ln var assert isinstance mean variable Variable assert isinstance ln var variable Variable J mean sizevar exponential exp ln var return sum sum mean * mean + sum sum var - sum sum ln var - J * 0 5
def nodesplit name parts name split NODENAME SEP 1 if len parts 1 return None parts[ 0 ] return parts
def xpath elem path return elem xpath path namespaces NS
def xpath elem path return elem xpath path namespaces NS
def volume type access remove context type id project id return IMPL volume type access remove context type id project id
def list nat rules module driver network domain try return driver ex list nat rules network domain except Dimension Data API Exception e get exception module fail json msg ' Failedtolist NA Trules %s' % e message
def await results program timeout seconds 2 countdown timeout seconds * 10 while program poll is None and countdown > 0 time sleep 0 1 countdown - 1if countdown 0 program kill raise Timeout Failure '<programtimedout>'
def await results program timeout seconds 2 countdown timeout seconds * 10 while program poll is None and countdown > 0 time sleep 0 1 countdown - 1if countdown 0 program kill raise Timeout Failure '<programtimedout>'
def await results program timeout seconds 2 countdown timeout seconds * 10 while program poll is None and countdown > 0 time sleep 0 1 countdown - 1if countdown 0 program kill raise Timeout Failure '<programtimedout>'
def reloader observer server app interval fd lockfile tempfile mkstemp prefix 'bottle-reloader ' suffix ' lock' os close fd try while os path exists lockfile args [sys executable] + sys argv environ os environ copy environ['BOTTLE CHILD'] 'true'environ['BOTTLE LOCKFILE'] lockfilep subprocess Popen args env environ while p poll is None os utime lockfile None time sleep interval if p poll 3 if os path exists lockfile os unlink lockfile sys exit p poll elif not server quiet print ' Reloadingserver 'except Keyboard Interrupt passif os path exists lockfile os unlink lockfile
def reloader observer server app interval fd lockfile tempfile mkstemp prefix 'bottle-reloader ' suffix ' lock' os close fd try while os path exists lockfile args [sys executable] + sys argv environ os environ copy environ['BOTTLE CHILD'] 'true'environ['BOTTLE LOCKFILE'] lockfilep subprocess Popen args env environ while p poll is None os utime lockfile None time sleep interval if p poll 3 if os path exists lockfile os unlink lockfile sys exit p poll elif not server quiet print ' Reloadingserver 'except Keyboard Interrupt passif os path exists lockfile os unlink lockfile
def http auth required realm def decorator fn @wraps fn def wrapper *args **kwargs if check http auth return fn *args **kwargs if security unauthorized callback return security unauthorized callback else r security default http auth realm if callable realm else realm h {'WWW- Authenticate' ' Basicrealm "%s"' % r }return get unauthorized response headers h return wrapperif callable realm return decorator realm return decorator
def get all groups inventory containers {}for container name in inventory[' meta']['hostvars'] keys if ' ' not in container name continuegroups get groups for container inventory container name containers[container name] groupsreturn containers
def cache disk seconds 86400 * 5 cache folder '/tmp' def do cache function def inner function *args **kwargs ' Calculateacachekeybasedonthedecoratedmethodsignature\nargs[ 1 ]indicatesthedomainoftheinputs wehashondomain \n'key sha 1 str args[ 1 ] + str kwargs encode 'utf- 8 ' hexdigest filepath os path join cache folder key if os path exists filepath modified os path getmtime filepath age seconds time time - modified if age seconds < seconds return pickle load open filepath 'rb' result function *args **kwargs pickle dump result open filepath 'wb' return resultreturn inner functionreturn do cache
def cache disk seconds 86400 * 5 cache folder '/tmp' def do cache function def inner function *args **kwargs ' Calculateacachekeybasedonthedecoratedmethodsignature\nargs[ 1 ]indicatesthedomainoftheinputs wehashondomain \n'key sha 1 str args[ 1 ] + str kwargs encode 'utf- 8 ' hexdigest filepath os path join cache folder key if os path exists filepath modified os path getmtime filepath age seconds time time - modified if age seconds < seconds return pickle load open filepath 'rb' result function *args **kwargs pickle dump result open filepath 'wb' return resultreturn inner functionreturn do cache
def cache disk seconds 86400 * 5 cache folder '/tmp' def do cache function def inner function *args **kwargs ' Calculateacachekeybasedonthedecoratedmethodsignature\nargs[ 1 ]indicatesthedomainoftheinputs wehashondomain \n'key sha 1 str args[ 1 ] + str kwargs encode 'utf- 8 ' hexdigest filepath os path join cache folder key if os path exists filepath modified os path getmtime filepath age seconds time time - modified if age seconds < seconds return pickle load open filepath 'rb' result function *args **kwargs pickle dump result open filepath 'wb' return resultreturn inner functionreturn do cache
def get master uri required True env None argv None if env is None env os environif argv is None argv sys argvtry for arg in argv if arg startswith ' master ' val Nonetry val arg split ' ' except passif not val raise ROS Env Exception " masterremappingargument'%s'improperlyspecified" % arg return valreturn env[ROS MASTER URI]except Key Error as e if required raise ROS Env Exception '%shasnotbeenconfigured' % ROS MASTER URI
@require context@require volume existsdef volume glance metadata bulk create context volume id metadata session get session with session begin for key value in metadata items rows session query models Volume Glance Metadata filter by volume id volume id filter by key key filter by deleted False all if len rows > 0 raise exception Glance Metadata Exists key key volume id volume id vol glance metadata models Volume Glance Metadata vol glance metadata volume id volume idvol glance metadata key keyvol glance metadata value six text type value session add vol glance metadata
def test iba error y score prob y true y pred make prediction binary True aps make index balanced accuracy alpha 0 5 squared True average precision score assert raises Attribute Error aps y true y pred brier make index balanced accuracy alpha 0 5 squared True brier score loss assert raises Attribute Error brier y true y pred kappa make index balanced accuracy alpha 0 5 squared True cohen kappa score assert raises Attribute Error kappa y true y pred ras make index balanced accuracy alpha 0 5 squared True roc auc score assert raises Attribute Error ras y true y pred
def test iba error y score prob y true y pred make prediction binary True aps make index balanced accuracy alpha 0 5 squared True average precision score assert raises Attribute Error aps y true y pred brier make index balanced accuracy alpha 0 5 squared True brier score loss assert raises Attribute Error brier y true y pred kappa make index balanced accuracy alpha 0 5 squared True cohen kappa score assert raises Attribute Error kappa y true y pred ras make index balanced accuracy alpha 0 5 squared True roc auc score assert raises Attribute Error ras y true y pred
def delete name **kwargs ret {'comment' ' Failedtodeletebeacon{ 0 } ' format name 'result' False}if 'test' in kwargs and kwargs['test'] ret['result'] Trueret['comment'] ' Beacon {0 }wouldbedeleted ' format name else try eventer salt utils event get event 'minion' opts opts res salt ['event fire'] {'name' name 'func' 'delete'} 'manage beacons' if res event ret eventer get event tag '/salt/minion/minion beacon delete complete' wait 30 if event ret and event ret['complete'] beacons event ret['beacons']if name not in beacons ret['result'] Trueret['comment'] ' Deletedbeacon {0 } ' format name return retexcept Key Error ret['comment'] ' Eventmodulenotavailable Beaconaddfailed 'return ret
def walk metadata metadata url headers None expect json False metadata dict for line in query metadata metadata url headers expect json if line endswith '/' and not line 'public-keys/' key line[ -1 ]metadata[key] walk metadata metadata url + line headers expect json else results query metadata metadata url + line headers expect json if len results 1 metadata[line] results pop else metadata[line] resultsreturn metadata
def shell Quote value return "'%s'" % value replace "'" '\'"\'"\''
def postprocess for cut fac bins retbins x is series series index name if x is series fac Series fac index series index name name if not retbins return facreturn fac bins
def postprocess for cut fac bins retbins x is series series index name if x is series fac Series fac index series index name name if not retbins return facreturn fac bins
def Match Scorer Ambigs match mismatch matches None matches matches or {'A' {'A' None} 'G' {'G' None} 'C' {'C' None} 'T' {'T' None} '-' {'-' None}} for ambig chars in DNA Sequence iupac degeneracies iteritems try matches[ambig] update {} fromkeys chars except Key Error matches[ambig] {} fromkeys chars for char in chars try matches[char] update {ambig None} except Key Error matches[char] {ambig None}def scorer x y if x not in matches or y not in matches raise Value Error ' Unknowncharacter %sor%s' % x y if y in matches[x] return matchelse return mismatchreturn scorer
def Match Scorer Ambigs match mismatch matches None matches matches or {'A' {'A' None} 'G' {'G' None} 'C' {'C' None} 'T' {'T' None} '-' {'-' None}} for ambig chars in DNA Sequence iupac degeneracies iteritems try matches[ambig] update {} fromkeys chars except Key Error matches[ambig] {} fromkeys chars for char in chars try matches[char] update {ambig None} except Key Error matches[char] {ambig None}def scorer x y if x not in matches or y not in matches raise Value Error ' Unknowncharacter %sor%s' % x y if y in matches[x] return matchelse return mismatchreturn scorer
def write embedding tensor to disk vocab path output path sess embedding embeddings sess run embedding with open output path 'w' as out f with open vocab path as vocab f for index word in enumerate vocab f word word strip embedding embeddings[index]out f write word + ' DCTB ' + ' DCTB ' join [str x for x in embedding] + '\n'
def write embedding tensor to disk vocab path output path sess embedding embeddings sess run embedding with open output path 'w' as out f with open vocab path as vocab f for index word in enumerate vocab f word word strip embedding embeddings[index]out f write word + ' DCTB ' + ' DCTB ' join [str x for x in embedding] + '\n'
def update Instance self try self class latest Class self class except Type Error if hasattr self class ' slots ' raise Rebuild Error " Can'trebuildclasswith slots on Python< 2 6" else raise
def normalize basedir basedir None if isinstance basedir six string types basedir [x strip for x in basedir split ' ' ]if basedir is None basedir []if not basedir basedir get yum config value 'reposdir' if not isinstance basedir list or not basedir raise Salt Invocation Error ' Couldnotdetermineanyrepodirectories' return basedir
def change cwd cwd os getcwd if os path split cwd [1 ] 'scripts' os chdir os path join cwd os pardir
@ np deprecate message 'scipy constants K2 Cisdeprecatedinscipy 0 18 0 Usescipy constants convert temperatureinstead Notethatthenewfunctionhasadifferentsignature ' def K2 C K return np asanyarray K - zero Celsius
def disable monitor try adapt get monitor adapter if not adapt is None tmp getoutput 'airmon-ngstop%s' % adapt debug 'killedmonitoradapter%s' % adapt except Exception as j Error 'errorkillingmonitoradapter %s' % j
def absent name ret {'name' name 'changes' {} 'result' False 'comment' ''}if not salt ['chronos has job'] name ret['result'] Trueret['comment'] ' Job{ 0 }alreadyabsent' format name return retif opts ['test'] ret['result'] Noneret['comment'] ' Job{ 0 }issettoberemoved' format name return retif salt ['chronos rm job'] name ret['changes'] {'job' name}ret['result'] Trueret['comment'] ' Removedjob{ 0 }' format name return retelse ret['result'] Falseret['comment'] ' Failedtoremovejob{ 0 }' format name return ret
def delete queue name region opts None user None queues list queues region opts user url map parse queue list queues logger logging get Logger name logger debug 'map' + six text type url map if name in url map delete {'queue-url' url map[name]}rtn run aws 'delete-queue' region region opts opts user user **delete success Trueerr ''out '{ 0 }deleted' format name else out ''err ' Deletefailed'success Falseret {'retcode' 0 if success else 1 'stdout' out 'stderr' err}return ret
def ec 2 credentials create user id None name None tenant id None tenant None profile None **connection args kstone auth profile **connection args if name user id user get name name profile profile **connection args [name]['id']if not user id return {' Error' ' Couldnotresolve User ID'}if tenant tenant id tenant get name tenant profile profile **connection args [tenant]['id']if not tenant id return {' Error' ' Couldnotresolve Tenant ID'}newec 2 kstone ec 2 create user id tenant id return {'access' newec 2 access 'secret' newec 2 secret 'tenant id' newec 2 tenant id 'user id' newec 2 user id}
def send verification mail request user verification type verify url reverse verification type kwargs {u'uidb 36 ' int to base 36 user id u'token' default token generator make token user } + u'?next ' + next url request or u'/' context {u'request' request u'user' user u'verify url' verify url}subject template name u'email/%s subject txt' % verification type subject subject template subject template name context send mail template subject u'email/%s' % verification type settings DEFAULT FROM EMAIL user email context context
def send verification mail request user verification type verify url reverse verification type kwargs {u'uidb 36 ' int to base 36 user id u'token' default token generator make token user } + u'?next ' + next url request or u'/' context {u'request' request u'user' user u'verify url' verify url}subject template name u'email/%s subject txt' % verification type subject subject template subject template name context send mail template subject u'email/%s' % verification type settings DEFAULT FROM EMAIL user email context context
def start project transfer project user reason signer signing Timestamp Signer token signer sign user id project transfer token tokenproject save template mail builder transfer startcontext {'project' project 'receiver' user 'token' token 'reason' reason}email template user context email send
def show image kwargs call None if call 'function' raise Salt Cloud System Exit ' Theshow imagefunctionmustbecalledwith-for--function ' items query action 'template' command kwargs['image'] if 'error' in items return items['error']ret {}for item in items ret update {item attrib['name'] item attrib} return ret
def Combine Places places time resolution sorted places sorted [{'locality' Get Place p['placemark'] 'timestamp' p['timestamp'] 'opacity' 1 0 'num combined' 1 'total count' p['total count']} for p in places] key itemgetter 'timestamp' place list []def Get Avg Timestamp p return p['timestamp'] / p['num combined'] def Maybe Combine Place p if place list last place place list[ -1 ]if p['locality'] last place['locality'] and abs p['timestamp'] - Get Avg Timestamp last place < time resolution for attr in ['timestamp' 'total count' 'num combined'] last place[attr] + p[attr]returnplace list append p for p in sorted places Maybe Combine Place p for p in place list p['timestamp'] Get Avg Timestamp p return place list
def Combine Places places time resolution sorted places sorted [{'locality' Get Place p['placemark'] 'timestamp' p['timestamp'] 'opacity' 1 0 'num combined' 1 'total count' p['total count']} for p in places] key itemgetter 'timestamp' place list []def Get Avg Timestamp p return p['timestamp'] / p['num combined'] def Maybe Combine Place p if place list last place place list[ -1 ]if p['locality'] last place['locality'] and abs p['timestamp'] - Get Avg Timestamp last place < time resolution for attr in ['timestamp' 'total count' 'num combined'] last place[attr] + p[attr]returnplace list append p for p in sorted places Maybe Combine Place p for p in place list p['timestamp'] Get Avg Timestamp p return place list
def Combine Places places time resolution sorted places sorted [{'locality' Get Place p['placemark'] 'timestamp' p['timestamp'] 'opacity' 1 0 'num combined' 1 'total count' p['total count']} for p in places] key itemgetter 'timestamp' place list []def Get Avg Timestamp p return p['timestamp'] / p['num combined'] def Maybe Combine Place p if place list last place place list[ -1 ]if p['locality'] last place['locality'] and abs p['timestamp'] - Get Avg Timestamp last place < time resolution for attr in ['timestamp' 'total count' 'num combined'] last place[attr] + p[attr]returnplace list append p for p in sorted places Maybe Combine Place p for p in place list p['timestamp'] Get Avg Timestamp p return place list
def f5 reduce f B order Polyn f ring orderdomain Polyn f ring domainif not Polyn f return fwhile True g ffor h in B if Polyn h if monomial divides Polyn h LM Polyn f LM t term div Polyn f LT Polyn h LT domain if sig cmp sig mult Sign h t[ 0 ] Sign f order < 0 hp lbp mul term h t f lbp sub f hp breakif g f or not Polyn f return f
def inv item total volume row try inv item getattr row 'inv inv item' except Attribute Error inv item rowtry quantity inv item quantityexcept Attribute Error return 0 0try supply item getattr row 'supply item' volume supply item volumeexcept Attribute Error itable current s3 db inv inv itemstable current s3 db supply itemquery itable id inv item id & itable item id stable id supply item current db query select stable volume limitby 0 1 first if not supply item returnelse volume supply item volumeif volume is None return current messages['NONE']else return quantity * volume
def markup join seq buf []iterator imap soft unicode seq for arg in iterator buf append arg if hasattr arg ' html ' return Markup u'' join chain buf iterator return concat buf
def create clip in selected slot creator song clip length None selected slot song view highlighted clip slotif creator and selected slot and not selected slot has clip creator create selected slot clip length song view detail clip selected slot clipreturn selected slot clip
def check estimator estimator get params True valid methods 'predict' 'transform' 'predict proba' 'decision function' if not hasattr estimator 'fit' or not any hasattr estimator method for method in valid methods raise Value Error 'estimatormustbeascikit-learntransformeroranestimatorwiththefitandapredict-like e g predict proba oratransformmethod ' if get params and not hasattr estimator 'get params' raise Value Error 'estimatormustbeascikit-learntransformeroranestimatorwiththeget paramsmethodthatallowscloning '
def bokeh installer env name install string if os name 'nt' command string 'activate%s&%s' % env name install string else command string 'sourceactivate%s %s' % env name install string result subprocess call command string shell True executable '/bin/bash' return result 0
def bokeh installer env name install string if os name 'nt' command string 'activate%s&%s' % env name install string else command string 'sourceactivate%s %s' % env name install string result subprocess call command string shell True executable '/bin/bash' return result 0
def bokeh installer env name install string if os name 'nt' command string 'activate%s&%s' % env name install string else command string 'sourceactivate%s %s' % env name install string result subprocess call command string shell True executable '/bin/bash' return result 0
def get permalink url self return '/' join self settings['SITEURL'] self get permalink path
def ck delete try filename request args[ 0 ]except raise HTTP 401 ' Requiredargumentfilenamemissing ' table s3 db doc ckeditordb table upload filename delete filepath os path join request folder 'uploads' filename os unlink filepath
def binop x op y lineno None col None lineno x lineno if lineno is None else lineno col x col offset if col is None else col return ast Bin Op left x op op right y lineno lineno col offset col
def fastq generic in handle out handle mapping from Bio Seq IO Quality IO import Fastq General Iteratorcount 0null chr 0 for title seq old qual in Fastq General Iterator in handle count + 1qual old qual translate mapping if null in qual raise Value Error ' Invalidcharacterinqualitystring' out handle write '@%s\n%s\n+\n%s\n' % title seq qual return count
def fastq generic in handle out handle mapping from Bio Seq IO Quality IO import Fastq General Iteratorcount 0null chr 0 for title seq old qual in Fastq General Iterator in handle count + 1qual old qual translate mapping if null in qual raise Value Error ' Invalidcharacterinqualitystring' out handle write '@%s\n%s\n+\n%s\n' % title seq qual return count
def git Init path run Command ['git' 'init' path path] git Config path
def convert date input date to convert if date to convert try converted date datetime datetime strptime date to convert '%m/%d/%Y' except raise Invalid Date Format return converted dateelse return date to convert
def convert date input date to convert if date to convert try converted date datetime datetime strptime date to convert '%m/%d/%Y' except raise Invalid Date Format return converted dateelse return date to convert
def build ws upgrade request web socket url extra headers None web socket version DEFAULT PROTOCOL VERSION origin None request headers Headers request headers[' Sec- Web Socket- Key'] gen ws sec key for key value in WEBSOCKET UPGRADE HEADERS items request headers[key] valueif extra headers is not None for key value in extra headers request headers[key] valuerequest headers[' Sec- Web Socket- Version'] str web socket version if origin is not None request headers[' Origin'] originelse scheme 'https //' if 'wss //' in web socket url else 'http //' args scheme web socket url get domain request headers[' Origin'] '%s%s' % args forged url web socket url url string replace 'wss //' 'https //' 1 forged url forged url replace 'ws //' 'http //' 1 forged url URL forged url upgrade request Fuzzable Request forged url 'GET' headers request headers return upgrade request
def show destination protocol None return proxy ['napalm call'] 'get route to' **{'destination' destination 'protocol' protocol}
def Concatenate Error Messages prefix status if status error detail return prefix + ' ' + status error detail return prefix
def validate instantiation **kwargs if kwargs and kwargs get 'netapp mode' 'proxy' return LOG warning LW ' Itisnottherecommendedwaytousedriversby Net App Pleaseuse Net App Drivertoachievethefunctionality '
def get return dict success True data None errors None warnings None data {} if data is None else data errors [] if errors is None else errors warnings [] if warnings is None else warnings ret {'success' success 'data' data 'errors' errors 'warnings' warnings}return ret
def update collection summary collection id contributor id to add create collection summary collection id contributor id to add
def set boot arch arch 'default' if arch not in ['i 386 ' 'x 86 64 ' 'default'] msg ' Invalidvaluepassedforarch \n Mustbei 386 x86 64 ordefault \n Passed {0 }' format arch raise Salt Invocation Error msg cmd 'systemsetup-setkernelbootarchitecture{ 0 }' format arch salt utils mac utils execute return success cmd return salt utils mac utils confirm updated arch get boot arch
def user agent implementation platform python implementation if implementation 'C Python' implementation version platform python version elif implementation ' Py Py' implementation version '%s %s %s' % sys pypy version info major sys pypy version info minor sys pypy version info micro if sys pypy version info releaselevel 'final' implementation version '' join [ implementation version sys pypy version info releaselevel] elif implementation ' Jython' implementation version platform python version elif implementation ' Iron Python' implementation version platform python version else implementation version ' Unknown'try p system platform system p release platform release except IO Error p system ' Unknown'p release ' Unknown'return '' join [ 'pip/%s' % pip version '%s/%s' % implementation implementation version '%s/%s' % p system p release ]
def import demo csv part 2 job id request post vars jobif not job id return " Error No Job ID'sprovided"request controller 'stats'output s3 rest controller 'stats' 'demographic data' csv stylesheet 'demographic data xsl' total Records output[ 0 ]total Errors output[ 1 ]total Ignored output[ 2 ]from gluon serializers import json as jsonsresponse headers[' Content- Type'] 'application/json'return jsons {'total Records' total Records 'total Errors' total Errors 'total Ignored' total Ignored}
def create app config None app name None if app name is None app name Default Config PROJEC Tapp Flask app name instance path INSTANCE FOLDER PATH instance relative config True configure app app config configure hook app configure blueprints app configure extensions app configure logging app configure template filters app configure error handlers app configure cli app return app
def assert n free raw sss lower upper None upper lower if upper is None else upper n free raw sss info['proc history'][ 0 ]['max info']['sss info']['nfree']assert true lower < n free < upper 'nfreefail %s< %s< %s' % lower n free upper
def get location conn vm location config get cloud config value 'location' vm opts return conn ex get zone location
def update ports tree ports tree check config exists if ports tree cmd 'poudriereports-u-p{ 0 }' format ports tree else cmd 'poudriereports-u'ret salt ['cmd run'] cmd return ret
def get dev port var backend instance None port var 'BACKEND PORT %s' % str backend lower if instance is not None port var '%s %d' % port var instance return port var
def assign perm user or group obj None warnings warn u" Shortcutfunction'assign'isbeingrenamedto'assign perm' Updateyourcodeaccordinglyasoldnamewillbedepreciatedin 2 0version " Deprecation Warning return assign perm perm user or group obj
def get hosts mapped with segments context segment host mapping network Segment Host Mapping get objects context return {row host for row in segment host mapping}
def get hosts mapped with segments context segment host mapping network Segment Host Mapping get objects context return {row host for row in segment host mapping}
def split function payload return payload[ - append size ] payload
def split function payload return payload[ - append size ] payload
def safe str o return safe Format str o
def safe str o return safe Format str o
def rand base length bad chars cset set chars - set list bad if len cset 0 return ''chars [list cset [random randrange len cset ] for i in xrange length ]chars map str chars return '' join chars
def get args parser build arg parser args parser parse args return prompt for password args
def get args parser build arg parser args parser parse args return prompt for password args
def xl cell to rowcol abs cell str if not cell str return 0 0 False False match range parts match cell str col abs match group 1 col str match group 2 row abs match group 3 row str match group 4 if col abs col abs Trueelse col abs Falseif row abs row abs Trueelse row abs Falseexpn 0col 0for char in reversed col str col + ord char - ord 'A' + 1 * 26 ** expn expn + 1row int row str - 1 col - 1return row col row abs col abs
def save registration code user course id mode slug invoice None order None invoice item None code random code generator matching coupons Coupon objects filter code code is active True if matching coupons return save registration code user course id mode slug invoice invoice order order invoice item invoice item course registration Course Registration Code code code course id unicode course id created by user invoice invoice order order mode slug mode slug invoice item invoice item try with transaction atomic course registration save return course registrationexcept Integrity Error return save registration code user course id mode slug invoice invoice order order invoice item invoice item
def save registration code user course id mode slug invoice None order None invoice item None code random code generator matching coupons Coupon objects filter code code is active True if matching coupons return save registration code user course id mode slug invoice invoice order order invoice item invoice item course registration Course Registration Code code code course id unicode course id created by user invoice invoice order order mode slug mode slug invoice item invoice item try with transaction atomic course registration save return course registrationexcept Integrity Error return save registration code user course id mode slug invoice invoice order order invoice item invoice item
def save registration code user course id mode slug invoice None order None invoice item None code random code generator matching coupons Coupon objects filter code code is active True if matching coupons return save registration code user course id mode slug invoice invoice order order invoice item invoice item course registration Course Registration Code code code course id unicode course id created by user invoice invoice order order mode slug mode slug invoice item invoice item try with transaction atomic course registration save return course registrationexcept Integrity Error return save registration code user course id mode slug invoice invoice order order invoice item invoice item
def skip If Py 3 message from unittest import skip Iffrom platform import is py 3 return skip If is py 3 message
def region invalidate namespace region *args if callable namespace if not region region namespace arg regionnamespace namespace arg namespaceif not region raise Beaker Exception ' Regionorcallablefunctionnamespaceisrequired' else region cache regions[region]cache Cache get cache namespace region cache key '' join str x for x in args cache remove value cache key
def region invalidate namespace region *args if callable namespace if not region region namespace arg regionnamespace namespace arg namespaceif not region raise Beaker Exception ' Regionorcallablefunctionnamespaceisrequired' else region cache regions[region]cache Cache get cache namespace region cache key '' join str x for x in args cache remove value cache key
def region invalidate namespace region *args if callable namespace if not region region namespace arg regionnamespace namespace arg namespaceif not region raise Beaker Exception ' Regionorcallablefunctionnamespaceisrequired' else region cache regions[region]cache Cache get cache namespace region cache key '' join str x for x in args cache remove value cache key
def usergroup exists name None node None nodeids None **connection args conn args login **connection args zabbix version apiinfo version **connection args try if conn args if Loose Version zabbix version > Loose Version '2 5' if not name name ''ret usergroup get name None **connection args return bool ret else method 'usergroup exists'params {}if not name and not node and not nodeids return {'result' False 'comment' ' Pleasesubmitname nodeornodeidsparametertocheckifatleastoneusergroupexists '}if name params['name'] nameif Loose Version zabbix version < Loose Version '2 4' if node params['node'] nodeif nodeids params['nodeids'] nodeidsret query method params conn args['url'] conn args['auth'] return ret['result']else raise Key Errorexcept Key Error return False
def test lambda list keywords mixed can compile u' fn x&restxs&kwargskw listxxskw ' cant compile u' fn x&restxs&fasfkey{bar"baz"} ' if PY 3 can compile u' fn[x&restxs&kwargskwxs&kwonlykwoxs] listxxskwxskwoxs '
def select best encoding outstream None outstream outstream or sys stdout encoding getattr outstream 'encoding' None or sys getdefaultencoding if is ascii encoding encoding return 'utf- 8 'return encoding
def dump filename options out sys stdout with open filename u'rb' as file obj return dump file obj options options out out
def count leading line ch i n 0 len line while i < n and line[i] ch i + 1return i
def count leading line ch i n 0 len line while i < n and line[i] ch i + 1return i
def read channel model channel name monitor name 'monitor' return getattr model monitor name channels[channel name] val record[ -1 ]
def read channel model channel name monitor name 'monitor' return getattr model monitor name channels[channel name] val record[ -1 ]
def read channel model channel name monitor name 'monitor' return getattr model monitor name channels[channel name] val record[ -1 ]
def display name with default escaped block return display name with default block replace '<' '&lt ' replace '>' '&gt '
def display name with default escaped block return display name with default block replace '<' '&lt ' replace '>' '&gt '
def translate message message return {'id' message['id'] 'project id' message['project id'] 'request id' message['request id'] 'resource type' message['resource type'] 'resource uuid' message get 'resource uuid' 'event id' message['event id'] 'message level' message['message level'] 'created at' message['created at'] 'expires at' message get 'expires at' }
def clean Block Quoted Text text joiner '' L filter truth map line Clean split text '\n' return joiner join L
def clean Block Quoted Text text joiner '' L filter truth map line Clean split text '\n' return joiner join L
def last modified date to timestamp last modified date str start datetime datetime strptime last modified date str '%Y-%m-%d T%H %M %S %f' delta start - EPOCH return Timestamp delta total seconds
def analyze movie review filename language client language Client with open movie review filename 'r' as review file document language client document from html review file read annotations document annotate text include sentiment True include syntax False include entities False print result annotations
def analyze movie review filename language client language Client with open movie review filename 'r' as review file document language client document from html review file read annotations document annotate text include sentiment True include syntax False include entities False print result annotations
def do for subarray entry condition func path None if path is None path []if isinstance entry list if condition entry func entry path else for index item in enumerate entry do for subarray item condition func path + [index]
def file move session dc ref src file dst file LOG debug ' Movingfilefrom% src sto% dst s ' {'src' src file 'dst' dst file} vim session vimmove task session call method vim ' Move Datastore File Task' vim service content file Manager source Name str src file source Datacenter dc ref destination Name str dst file destination Datacenter dc ref session wait for task move task LOG debug ' Filemoved'
def get download url for platform url templates platform info dict os ok Falsearchitecture ok Falsefor url template in url templates os name url template get 'os' None architecture url template get 'architecture' None if os name if os name lower platform info dict['os'] os ok Trueelse os ok Falseelse os ok Trueif architecture if architecture lower platform info dict['architecture'] architecture ok Trueelse architecture ok Falseelse architecture ok Trueif os ok and architecture ok return url templatereturn None
def test random state transfer class Graph def init self seed 123 self rng MRG Random Streams seed self y self rng uniform size 1 g1 Graph seed 123 f1 theano function [] g1 y g2 Graph seed 987 f2 theano function [] g2 y g2 rng rstate g1 rng rstatefor su 1 su 2 in zip g1 rng state updates g2 rng state updates su 2 [ 0 ] set value su 1 [ 0 ] get value numpy testing assert array almost equal f1 f2 decimal 6
def get package data package walk [ dirpath replace package + os sep '' 1 filenames for dirpath dirnames filenames in os walk package if not os path exists os path join dirpath ' init py' ]filepaths []for base filenames in walk filepaths extend [os path join base filename for filename in filenames] return {package filepaths}
def get required content course user required content []if settings FEATURES get 'MILESTONES APP' try milestone paths get course milestones fulfillment paths unicode course id serialize user user except Invalid Milestone Relationship Type Exception return required contentfor path key in milestone paths milestone path milestone paths[path key]if milestone path get 'content' and len milestone path['content'] for content in milestone path['content'] required content append content return required content
def batch iter data batch size num epochs shuffle True data np array data data size len data num batches per epoch int len data - 1 / batch size + 1 for epoch in range num epochs if shuffle shuffle indices np random permutation np arange data size shuffled data data[shuffle indices]else shuffled data datafor batch num in range num batches per epoch start index batch num * batch size end index min batch num + 1 * batch size data size yield shuffled data[start index end index]
def buildgraph cursor include last hop False include target False only connected True graph {}entry nodes set for host in cursor if 'traces' not in host continuefor trace in host['traces'] hops trace['hops']hops sort key lambda hop hop['ttl'] if not hops continueentry nodes add hops[ 0 ]['ipaddr'] if not include last hop and not include target if hops[ -1 ]['ipaddr'] host['addr'] hops pop if not include last hop hops pop for i hop in enumerate hops[ 1 ] if not only connected or hop['ttl'] - hops[i]['ttl'] 1 graph setdefault hops[i]['ipaddr'] set update [hop['ipaddr']] return graph entry nodes
def Get Printable Strs namespace kinds namespace str namespace or '' if kinds kind str 'all%sentities' % ' ' join kinds else kind str ''return namespace str kind str
def resize data socket try socket tab set viewport get viewport data['size'] except Key Error Attribute Error pass
def resize data socket try socket tab set viewport get viewport data['size'] except Key Error Attribute Error pass
def top contributors aoa start None end None locale None count 10 page 1 query Reply Metrics Mapping Type search facet 'creator id' filtered True size BIG NUMBER locale locale split '-' [0 ] if locale else None query apply filters query start end locale return get creator counts query count page
def has win 32 com if not sys platform startswith 'win 32 ' return Falsetry mod import 'win 32 com' except Import Error return Falsereturn True
def ensure dir directory try os makedirs directory except OS Error as exc if exc errno errno EEXIST passelse raise
@register tagdef overextends parser token if DJANGO VERSION > 1 9 warnings warn u" The`overextends`templatetagisdeprecatedinfavourof Django'sbuilt-in`extends`tag whichsupportsrecursiveextensionin Django 1 9andabove " Deprecation Warning stacklevel 2 bits token split contents if len bits 2 raise Template Syntax Error u"'%s'takesoneargument" % bits[ 0 ] parent name parser compile filter bits[ 1 ] nodelist parser parse if nodelist get nodes by type Extends Node raise Template Syntax Error u"'%s'cannotappearmorethanonceinthesametemplate" % bits[ 0 ] return Over Extends Node nodelist parent name None
@register tagdef overextends parser token if DJANGO VERSION > 1 9 warnings warn u" The`overextends`templatetagisdeprecatedinfavourof Django'sbuilt-in`extends`tag whichsupportsrecursiveextensionin Django 1 9andabove " Deprecation Warning stacklevel 2 bits token split contents if len bits 2 raise Template Syntax Error u"'%s'takesoneargument" % bits[ 0 ] parent name parser compile filter bits[ 1 ] nodelist parser parse if nodelist get nodes by type Extends Node raise Template Syntax Error u"'%s'cannotappearmorethanonceinthesametemplate" % bits[ 0 ] return Over Extends Node nodelist parent name None
@register tagdef overextends parser token if DJANGO VERSION > 1 9 warnings warn u" The`overextends`templatetagisdeprecatedinfavourof Django'sbuilt-in`extends`tag whichsupportsrecursiveextensionin Django 1 9andabove " Deprecation Warning stacklevel 2 bits token split contents if len bits 2 raise Template Syntax Error u"'%s'takesoneargument" % bits[ 0 ] parent name parser compile filter bits[ 1 ] nodelist parser parse if nodelist get nodes by type Extends Node raise Template Syntax Error u"'%s'cannotappearmorethanonceinthesametemplate" % bits[ 0 ] return Over Extends Node nodelist parent name None
@taskdef win install deps options download dir path 'downloaded' abspath if not download dir exists download dir makedirs win packages {' Py 2 exe' dev config['WINDOWS']['py 2 exe'] ' Nose' dev config['WINDOWS']['nose'] ' Py Proj' dev config['WINDOWS']['pyproj'] 'l XML' dev config['WINDOWS']['lxml']}failed Falsefor package url in win packages iteritems tempfile download dir / os path basename url print ' Installingfile ' + tempfile grab winfiles url tempfile package try easy install main [tempfile] except Exception as e failed Trueprint 'installfailedwitherror ' eos remove tempfile if failed and sys maxsize > 2 ** 32 print '64 bitarchitectureisnotcurrentlysupported'print 'tryfindingthe 64 binariesforpy 2 exe nose andpyproj'elif failed print 'installfailedforpy 2 exe nose and/orpyproj'else print ' Windowsdependenciesnowcomplete Runpipinstall-egeonode--use-mirrors'
@taskdef win install deps options download dir path 'downloaded' abspath if not download dir exists download dir makedirs win packages {' Py 2 exe' dev config['WINDOWS']['py 2 exe'] ' Nose' dev config['WINDOWS']['nose'] ' Py Proj' dev config['WINDOWS']['pyproj'] 'l XML' dev config['WINDOWS']['lxml']}failed Falsefor package url in win packages iteritems tempfile download dir / os path basename url print ' Installingfile ' + tempfile grab winfiles url tempfile package try easy install main [tempfile] except Exception as e failed Trueprint 'installfailedwitherror ' eos remove tempfile if failed and sys maxsize > 2 ** 32 print '64 bitarchitectureisnotcurrentlysupported'print 'tryfindingthe 64 binariesforpy 2 exe nose andpyproj'elif failed print 'installfailedforpy 2 exe nose and/orpyproj'else print ' Windowsdependenciesnowcomplete Runpipinstall-egeonode--use-mirrors'
def load Image Series filelist None if filelist is None or len filelist < 1 returnimglist []for img in filelist if not os path exists img print 'unabletofind%s' % img continuetry im Image open img convert 2 byte except if not is Spider Image img print img + 'isnota Spiderimagefile' continueim info['filename'] imgimglist append im return imglist
def remove metadata module data start line start col end line end col lines module data split '\n' new lines lines[ start line]if start col 0 new lines append lines[start line][ start col] next line lines[end line]if len next line - 1 end col new lines append next line[end col ] if len lines > end line new lines extend lines[ end line + 1 ] return '\n' join new lines
@check event permissionsdef delete event request event id next None login required True event get object or 404 Event id event id next next or reverse 'day calendar' args [event calendar slug] next get next url request next return delete object request model Event object id event id post delete redirect next template name 'schedule/delete event html' extra context dict next next login required login required
@ docstring 'instrument' def get instrument by id id includes [] release status [] release type [] params check filter and make params 'instrument' includes release status release type return do mb query 'instrument' id includes params
@ docstring 'instrument' def get instrument by id id includes [] release status [] release type [] params check filter and make params 'instrument' includes release status release type return do mb query 'instrument' id includes params
def present name maintenance db user None db password None db host None db port None db user None ret {'name' name 'changes' {} 'result' True 'comment' ' Language{ 0 }isalreadyinstalled' format name }dbargs {'runas' user 'host' db host 'user' db user 'port' db port 'password' db password}languages salt ['postgres language list'] maintenance db **dbargs if name not in languages if opts ['test'] ret['result'] Noneret['comment'] ' Language{ 0 }issettobeinstalled' format name return retif salt ['postgres language create'] name maintenance db **dbargs ret['comment'] ' Language{ 0 }hasbeeninstalled' format name ret['changes'][name] ' Present'else ret['comment'] ' Failedtoinstalllanguage{ 0 }' format name ret['result'] Falsereturn ret
def sqlite bytelower bytestring if not six PY 2 return bytestring lower return buffer bytes bytestring lower
def sqlite bytelower bytestring if not six PY 2 return bytestring lower return buffer bytes bytestring lower
def count sprintf parameters string return len sprintf placeholder re findall string
def test write assert not getattr django conf settings 'FOOBAR' None 1234 assets conf settings FOOBAR 1234 assert django conf settings FOOBAR 1234
def test write assert not getattr django conf settings 'FOOBAR' None 1234 assets conf settings FOOBAR 1234 assert django conf settings FOOBAR 1234
def random password generator characters string letters + string digits pwd size constants PASSWORD SIZ Ereturn '' join random choice characters for x in range pwd size
def can support reuse db connection return not connection creation get test db name ' memory '
def can support reuse db connection return not connection creation get test db name ' memory '
def can support reuse db connection return not connection creation get test db name ' memory '
def expected output args f inspect currentframe f back f backi f f lasti + 3 bytecode f f code co codeinstruction ordornot bytecode[i] while True if instruction dis opmap['DUP TOP'] if ordornot bytecode[ i + 1 ] dis opmap['UNPACK SEQUENCE'] return ordornot bytecode[ i + 2 ] i + 4instruction ordornot bytecode[i] continueif instruction dis opmap['STORE NAME'] return 1if instruction dis opmap['UNPACK SEQUENCE'] return ordornot bytecode[ i + 1 ] if instruction dis opmap get 'UNPACK EX' -1 return ordornot bytecode[ i + 1 ] + ordornot bytecode[ i + 2 ] + 0 1 return 0
def first Result gen return list gen [0 ]
def get compile mode node if not isinstance node mod raise Type Error 'expectedmodnode got%r' % node class name return { Expression 'eval' Interactive 'single'} get node class 'expr'
def generate sha 1 string salt None if not isinstance string str text type string str string if not salt salt sha 1 str random random encode 'utf- 8 ' hexdigest [ 5]salted bytes smart bytes salt + smart bytes string hash sha 1 salted bytes hexdigest return salt hash
def load scores ba dir dir return File Binned Array Dir dir
def load scores ba dir dir return File Binned Array Dir dir
def get oauth token from body body if six PY 3 body body decode 'utf- 8 ' credentials urlparse parse qs body key credentials['oauth token'][ 0 ]secret credentials['oauth token secret'][ 0 ]token {'key' key 'id' key 'secret' secret}expires at credentials get 'oauth expires at' if expires at token['expires'] expires at[ 0 ]return token
def urivalue uri uri uri[ uri find ' ' + 1 -1 ] strip if uri and uri[ 0 ] in '\'"' and uri[ 0 ] uri[ -1 ] return stringvalue uri else return uri
def urivalue uri uri uri[ uri find ' ' + 1 -1 ] strip if uri and uri[ 0 ] in '\'"' and uri[ 0 ] uri[ -1 ] return stringvalue uri else return uri
def qc results params alpha score qc tol qc verbose False assert not np isnan params max assert params params ravel 'F' min 'paramsshouldhavealreadybeen 1 -d'fprime score params k params len params passed array np array [ True] * k params for i in range k params if alpha[i] > 0 if abs fprime[i] - alpha[i] / alpha[i] > qc tol passed array[i] Falseqc dict dict fprime fprime alpha alpha params params passed array passed array passed passed array min if not passed num failed passed array False sum message 'Q Ccheckdidnotpassfor%doutof%dparameters' % num failed k params message + '\n Tryincreasingsolveraccuracyornumberofiterations decreasingalpha orswitchsolvers'if qc verbose message + get verbose addon qc dict print message return passed
def qc results params alpha score qc tol qc verbose False assert not np isnan params max assert params params ravel 'F' min 'paramsshouldhavealreadybeen 1 -d'fprime score params k params len params passed array np array [ True] * k params for i in range k params if alpha[i] > 0 if abs fprime[i] - alpha[i] / alpha[i] > qc tol passed array[i] Falseqc dict dict fprime fprime alpha alpha params params passed array passed array passed passed array min if not passed num failed passed array False sum message 'Q Ccheckdidnotpassfor%doutof%dparameters' % num failed k params message + '\n Tryincreasingsolveraccuracyornumberofiterations decreasingalpha orswitchsolvers'if qc verbose message + get verbose addon qc dict print message return passed
def fork exec cmd exec env None logfile None pass fds None env os environ copy if exec env is not None for env name env val in exec env items if callable env val env[env name] env val env get env name else env[env name] env valpid os fork if pid 0 if logfile fds [1 2]with open logfile 'r+b' as fptr for desc in fds try os dup 2 fptr fileno desc except OS Error passif pass fds and hasattr os 'set inheritable' for fd in pass fds os set inheritable fd True args shlex split cmd os execvpe args[ 0 ] args env else return pid
def calc julian from U or W year week of year day of week week starts Mon first weekday datetime date year 1 1 weekday if not week starts Mon first weekday first weekday + 1 % 7 day of week day of week + 1 % 7 week 0 length 7 - first weekday % 7 if week of year 0 return 1 + day of week - first weekday else days to week week 0 length + 7 * week of year - 1 return 1 + days to week + day of week
def calc julian from U or W year week of year day of week week starts Mon first weekday datetime date year 1 1 weekday if not week starts Mon first weekday first weekday + 1 % 7 day of week day of week + 1 % 7 week 0 length 7 - first weekday % 7 if week of year 0 return 1 + day of week - first weekday else days to week week 0 length + 7 * week of year - 1 return 1 + days to week + day of week
def delete name region None key None keyid None profile None conn get conn region region key key keyid keyid profile profile if not exists name region key keyid profile return Truetry conn delete load balancer name msg ' Deleted ELB{ 0 } ' format name log info msg return Trueexcept boto exception Boto Server Error as error log debug error msg ' Failedtodelete ELB{ 0 }' format name log error msg return False
def query series api key user token member name None params {}if member name member id query member id api key user token member name if member id params {u'id' member id}else log error u'member%rnotfound' % member name return []r requests get API URL PREFIX + u'members/infos' params params headers {u' Accept' u'application/json' u'X- Beta Series- Version' u' 2 1' u'X- Beta Series- Key' api key u'X- Beta Series- Token' user token} assert r status code 200 u' Bad HTT Pstatuscode %s' % r status code j r json error list j[u'errors']for err in error list log error str err if not error list return [x[u'title'] for x in j[u'member'][u'shows'] if x[u'user'][u'archived'] is False ]else return []
def func namespace func kls Noneif hasattr func 'im func' kls func im classfunc func im funcif kls return '%s %s' % kls module kls name else return '%s %s' % func module func name
def get casava version fastq 1 if isinstance fastq 1 list fastq read f line 1 fastq 1 [ 0 ]else fastq read f line 1 fastq 1 readline fastq 1 seek 0 post casava v180 is casava v180 or later fastq read f line 1 if post casava v180 check header match f check header match 180 or laterelse check header match f check header match pre 180 return check header match f
def get casava version fastq 1 if isinstance fastq 1 list fastq read f line 1 fastq 1 [ 0 ]else fastq read f line 1 fastq 1 readline fastq 1 seek 0 post casava v180 is casava v180 or later fastq read f line 1 if post casava v180 check header match f check header match 180 or laterelse check header match f check header match pre 180 return check header match f
def get casava version fastq 1 if isinstance fastq 1 list fastq read f line 1 fastq 1 [ 0 ]else fastq read f line 1 fastq 1 readline fastq 1 seek 0 post casava v180 is casava v180 or later fastq read f line 1 if post casava v180 check header match f check header match 180 or laterelse check header match f check header match pre 180 return check header match f
def nova to osvif vif vif LOG debug ' Converting VIF%s' vif funcname ' nova to osvif vif ' + vif['type'] replace ' ' ' ' func getattr sys modules[ name ] funcname None if not func raise exception Nova Exception " Unsupported VI Ftype% type sconvert'% func s'" % {'type' vif['type'] 'func' funcname} try vifobj func vif LOG debug ' Convertedobject%s' vifobj return vifobjexcept Not Implemented Error LOG debug ' Noconversionfor VI Ftype%syet' vif['type'] return None
def upgrade migrate engine meta Meta Data bind migrate engine instances Table 'instances' meta autoload True shadow instances Table 'shadow instances' meta autoload True ephemeral key uuid Column 'ephemeral key uuid' String 36 instances create column ephemeral key uuid shadow instances create column ephemeral key uuid copy migrate engine execute instances update values ephemeral key uuid None migrate engine execute shadow instances update values ephemeral key uuid None
def get client env eget env getg regex client search eget 'http x forwarded for' '' client g group or '' split ' ' [0 ] if g else None if client in None '' 'unknown' g regex client search eget 'remote addr' '' if g client g group elif env http host startswith '[' client ' 1'else client '127 0 0 1'if not is valid ip address client raise HTTP 400 ' Bad Request request client %s ' % client return client
def custom command user None conf file None bin env None ret salt ['cmd run all'] ctl cmd command None conf file bin env runas user python shell False return get return ret
def custom command user None conf file None bin env None ret salt ['cmd run all'] ctl cmd command None conf file bin env runas user python shell False return get return ret
@webob dec wsgify@util check accept 'application/json' def get resource provider req uuid util wsgi path item req environ 'uuid' context req environ['placement context']resource provider objects Resource Provider get by uuid context uuid req response body encodeutils to utf 8 jsonutils dumps serialize provider req environ resource provider req response content type 'application/json'return req response
def defoveate channel img rings dense input start idx ring w numpy sum rings inner h img shape[ 1 ] - 2 * ring w inner w img shape[ 2 ] - 2 * ring w end idx start idx + inner h * inner w inner img dense input[ start idx end idx] reshape -1 inner h inner w img[ ring w ring w + inner h ring w ring w + inner w ] inner imgidx 0start idx end idxfor rd in rings start idx restore ring img idx rd dense input start idx idx + rdreturn start idx
def s3 location constraint for region region region fix region region if not region or region S3 REGION WITH NO LOCATION CONSTRAINT return ''else return region
def s3 location constraint for region region region fix region region if not region or region S3 REGION WITH NO LOCATION CONSTRAINT return ''else return region
def s3 location constraint for region region region fix region region if not region or region S3 REGION WITH NO LOCATION CONSTRAINT return ''else return region
@click command u'publish-realtime' @click argument u'event' @click option u'--message' @click option u'--room' @click option u'--user' @click option u'--doctype' @click option u'--docname' @click option u'--after-commit' @pass contextdef publish realtime context event message room user doctype docname after commit from frappe import publish realtimefor site in context sites try frappe init site site frappe connect publish realtime event message message room room user user doctype doctype docname docname after commit after commit frappe db commit finally frappe destroy
@loader option def contains eager loadopt attr alias None if alias is not None if not isinstance alias str info inspect alias alias info selectablecloned loadopt set relationship strategy attr {'lazy' 'joined'} propagate to loaders False cloned local opts['eager from alias'] aliasreturn cloned
@loader option def contains eager loadopt attr alias None if alias is not None if not isinstance alias str info inspect alias alias info selectablecloned loadopt set relationship strategy attr {'lazy' 'joined'} propagate to loaders False cloned local opts['eager from alias'] aliasreturn cloned
def get index videos course return list {attr video[attr] for attr in ['edx video id' 'client video id' 'created' 'duration' 'status']} for video in get videos course
def assert has text output text assert output find text > 0 " Outputfiledidnotcontainexpectedtext'%s' output'%s' " % text output
def assert has text output text assert output find text > 0 " Outputfiledidnotcontainexpectedtext'%s' output'%s' " % text output
def call args try return command output args except subprocess Called Process Error as e raise Replay Gain Error u'{ 0 }exitedwithstatus{ 1 }' format args[ 0 ] e returncode except Unicode Encode Error raise Replay Gain Error u'argumentencodingfailed'
def get date data position dummy 0 opts dummy 1 end position + 8 millis UNPACK LONG data[position end] [0 ]return millis to datetime millis opts end